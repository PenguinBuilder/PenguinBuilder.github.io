import{$,t as themeSelector}from"./theme-selector.js";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var lzString={exports:{}},hasRequiredLzString;function requireLzString(){return hasRequiredLzString||(hasRequiredLzString=1,(function(i){var n=(function(){var o=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",f={};function E(N,x){if(!f[N]){f[N]={};for(var w=0;w<N.length;w++)f[N][N.charAt(w)]=w}return f[N][x]}var g={compressToBase64:function(N){if(N==null)return"";var x=g._compress(N,6,function(w){return s.charAt(w)});switch(x.length%4){default:case 0:return x;case 1:return x+"===";case 2:return x+"==";case 3:return x+"="}},decompressFromBase64:function(N){return N==null?"":N==""?null:g._decompress(N.length,32,function(x){return E(s,N.charAt(x))})},compressToUTF16:function(N){return N==null?"":g._compress(N,15,function(x){return o(x+32)})+" "},decompressFromUTF16:function(N){return N==null?"":N==""?null:g._decompress(N.length,16384,function(x){return N.charCodeAt(x)-32})},compressToUint8Array:function(N){for(var x=g.compress(N),w=new Uint8Array(x.length*2),R=0,k=x.length;R<k;R++){var B=x.charCodeAt(R);w[R*2]=B>>>8,w[R*2+1]=B%256}return w},decompressFromUint8Array:function(N){if(N==null)return g.decompress(N);for(var x=new Array(N.length/2),w=0,R=x.length;w<R;w++)x[w]=N[w*2]*256+N[w*2+1];var k=[];return x.forEach(function(B){k.push(o(B))}),g.decompress(k.join(""))},compressToEncodedURIComponent:function(N){return N==null?"":g._compress(N,6,function(x){return l.charAt(x)})},decompressFromEncodedURIComponent:function(N){return N==null?"":N==""?null:(N=N.replace(/ /g,"+"),g._decompress(N.length,32,function(x){return E(l,N.charAt(x))}))},compress:function(N){return g._compress(N,16,function(x){return o(x)})},_compress:function(N,x,w){if(N==null)return"";var R,k,B={},P={},z="",m="",d="",y=2,F=3,L=2,G=[],p=0,I=0,D;for(D=0;D<N.length;D+=1)if(z=N.charAt(D),Object.prototype.hasOwnProperty.call(B,z)||(B[z]=F++,P[z]=!0),m=d+z,Object.prototype.hasOwnProperty.call(B,m))d=m;else{if(Object.prototype.hasOwnProperty.call(P,d)){if(d.charCodeAt(0)<256){for(R=0;R<L;R++)p=p<<1,I==x-1?(I=0,G.push(w(p)),p=0):I++;for(k=d.charCodeAt(0),R=0;R<8;R++)p=p<<1|k&1,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=k>>1}else{for(k=1,R=0;R<L;R++)p=p<<1|k,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=0;for(k=d.charCodeAt(0),R=0;R<16;R++)p=p<<1|k&1,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=k>>1}y--,y==0&&(y=Math.pow(2,L),L++),delete P[d]}else for(k=B[d],R=0;R<L;R++)p=p<<1|k&1,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=k>>1;y--,y==0&&(y=Math.pow(2,L),L++),B[m]=F++,d=String(z)}if(d!==""){if(Object.prototype.hasOwnProperty.call(P,d)){if(d.charCodeAt(0)<256){for(R=0;R<L;R++)p=p<<1,I==x-1?(I=0,G.push(w(p)),p=0):I++;for(k=d.charCodeAt(0),R=0;R<8;R++)p=p<<1|k&1,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=k>>1}else{for(k=1,R=0;R<L;R++)p=p<<1|k,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=0;for(k=d.charCodeAt(0),R=0;R<16;R++)p=p<<1|k&1,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=k>>1}y--,y==0&&(y=Math.pow(2,L),L++),delete P[d]}else for(k=B[d],R=0;R<L;R++)p=p<<1|k&1,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=k>>1;y--,y==0&&(y=Math.pow(2,L),L++)}for(k=2,R=0;R<L;R++)p=p<<1|k&1,I==x-1?(I=0,G.push(w(p)),p=0):I++,k=k>>1;for(;;)if(p=p<<1,I==x-1){G.push(w(p));break}else I++;return G.join("")},decompress:function(N){return N==null?"":N==""?null:g._decompress(N.length,32768,function(x){return N.charCodeAt(x)})},_decompress:function(N,x,w){var R=[],k=4,B=4,P=3,z="",m=[],d,y,F,L,G,p,I,D={val:w(0),position:x,index:1};for(d=0;d<3;d+=1)R[d]=d;for(F=0,G=Math.pow(2,2),p=1;p!=G;)L=D.val&D.position,D.position>>=1,D.position==0&&(D.position=x,D.val=w(D.index++)),F|=(L>0?1:0)*p,p<<=1;switch(F){case 0:for(F=0,G=Math.pow(2,8),p=1;p!=G;)L=D.val&D.position,D.position>>=1,D.position==0&&(D.position=x,D.val=w(D.index++)),F|=(L>0?1:0)*p,p<<=1;I=o(F);break;case 1:for(F=0,G=Math.pow(2,16),p=1;p!=G;)L=D.val&D.position,D.position>>=1,D.position==0&&(D.position=x,D.val=w(D.index++)),F|=(L>0?1:0)*p,p<<=1;I=o(F);break;case 2:return""}for(R[3]=I,y=I,m.push(I);;){if(D.index>N)return"";for(F=0,G=Math.pow(2,P),p=1;p!=G;)L=D.val&D.position,D.position>>=1,D.position==0&&(D.position=x,D.val=w(D.index++)),F|=(L>0?1:0)*p,p<<=1;switch(I=F){case 0:for(F=0,G=Math.pow(2,8),p=1;p!=G;)L=D.val&D.position,D.position>>=1,D.position==0&&(D.position=x,D.val=w(D.index++)),F|=(L>0?1:0)*p,p<<=1;R[B++]=o(F),I=B-1,k--;break;case 1:for(F=0,G=Math.pow(2,16),p=1;p!=G;)L=D.val&D.position,D.position>>=1,D.position==0&&(D.position=x,D.val=w(D.index++)),F|=(L>0?1:0)*p,p<<=1;R[B++]=o(F),I=B-1,k--;break;case 2:return m.join("")}if(k==0&&(k=Math.pow(2,P),P++),R[I])z=R[I];else if(I===B)z=y+y.charAt(0);else return null;m.push(z),R[B++]=y+z.charAt(0),k--,y=z,k==0&&(k=Math.pow(2,P),P++)}}};return g})();i!=null?i.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(lzString)),lzString.exports}var lzStringExports=requireLzString();function FileHandle(i,n){function o(g){return lzStringExports.compressToUTF16(JSON.stringify(g))}function s(g){return JSON.parse(lzStringExports.decompressFromUTF16(g))}async function l(){const[g,N]=i(),x=await window.showSaveFilePicker({suggestedName:N+".pb",types:[{description:"PenguinBuilder Save",accept:{"application/octet-stream":[".pb"]}}]});f=x;const w=await x.createWritable();await w.write(o(g)),await w.close()}let f;async function E(){if(f===void 0){await l();return}const g=await f.createWritable();await g.write(o(i()[0])),await g.close()}$("#save-as").click(l),$("#save").click(E),$("html").on("keydown",async g=>{(g.ctrlKey||g.metaKey)&&g.key=="s"&&(await E(),g.preventDefault())}),$("#open").click(async()=>{const[g]=await window.showOpenFilePicker({multiple:!1,types:[{description:"PenguinBuilder Save",accept:{"application/octet-stream":[".pb"]}}]});f=g;const x=await(await g.getFile()).text(),w=s(x);n(w)})}function characters(i){return i.split("")}function member(i,n){return n.includes(i)}class DefaultsError extends Error{constructor(n,o){super(),this.name="DefaultsError",this.message=n,this.defs=o}}function defaults(i,n,o){i===!0?i={}:i!=null&&typeof i=="object"&&(i={...i});const s=i||{};if(o){for(const l in s)if(HOP(s,l)&&!HOP(n,l))throw new DefaultsError("`"+l+"` is not a supported option",n)}for(const l in n)if(HOP(n,l))if(!i||!HOP(i,l))s[l]=n[l];else if(l==="ecma"){let f=i[l]|0;f>5&&f<2015&&(f+=2009),s[l]=f}else s[l]=i&&HOP(i,l)?i[l]:n[l];return s}function noop(){}function return_false(){return!1}function return_true(){return!0}function return_this(){return this}function return_null(){return null}var MAP=(function(){function i(o,s,l=!0){const f=[];for(let E=0;E<o.length;++E){let N=o[E].transform(s,l);N instanceof AST_Node?f.push(N):N instanceof n&&f.push(...N.v)}return f}i.splice=function(o){return new n(o)},i.skip={};function n(o){this.v=o}return i})();function make_node(i,n,o){return o||(o={}),n&&(o.start||(o.start=n.start),o.end||(o.end=n.end)),new i(o)}function make_void_0(i){return make_node(AST_UnaryPrefix,i,{operator:"void",expression:make_node(AST_Number,i,{value:0})})}function push_uniq(i,n){i.includes(n)||i.push(n)}function string_template(i,n){return i.replace(/{(.+?)}/g,function(o,s){return n&&n[s]})}function remove(i,n){for(var o=i.length;--o>=0;)i[o]===n&&i.splice(o,1)}function mergeSort(i,n){if(i.length<2)return i.slice();function o(l,f){for(var E=[],g=0,N=0,x=0;g<l.length&&N<f.length;)n(l[g],f[N])<=0?E[x++]=l[g++]:E[x++]=f[N++];return g<l.length&&E.push.apply(E,l.slice(g)),N<f.length&&E.push.apply(E,f.slice(N)),E}function s(l){if(l.length<=1)return l;var f=Math.floor(l.length/2),E=l.slice(0,f),g=l.slice(f);return E=s(E),g=s(g),o(E,g)}return s(i)}function makePredicate(i){return Array.isArray(i)||(i=i.split(" ")),new Set(i.sort())}function map_add(i,n,o){i.has(n)?i.get(n).push(o):i.set(n,[o])}function map_from_object(i){var n=new Map;for(var o in i)HOP(i,o)&&o.charAt(0)==="$"&&n.set(o.substr(1),i[o]);return n}function map_to_object(i){var n=Object.create(null);return i.forEach(function(o,s){n["$"+s]=o}),n}function HOP(i,n){return Object.prototype.hasOwnProperty.call(i,n)}function keep_name(i,n){return i===!0||i instanceof RegExp&&i.test(n)}var lineTerminatorEscape={"\0":"0","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function regexp_source_fix(i){return i.replace(/[\0\n\r\u2028\u2029]/g,function(n,o){var s=i[o-1]=="\\"&&(i[o-2]!="\\"||/(?:^|[^\\])(?:\\{2})*$/.test(i.slice(0,o-1)));return(s?"":"\\")+lineTerminatorEscape[n]})}const re_safe_regexp=/^[\\/|\0\s\w^$.[\]()]*$/,regexp_is_safe=i=>re_safe_regexp.test(i),all_flags="dgimsuyv";function sort_regexp_flags(i){const n=new Set(i.split(""));let o="";for(const s of all_flags)n.has(s)&&(o+=s,n.delete(s));return n.size&&n.forEach(s=>{o+=s}),o}function has_annotation(i,n){return i._annotations&n}function set_annotation(i,n){i._annotations|=n}function clear_annotation(i,n){i._annotations&=-9}var LATEST_RAW="",TEMPLATE_RAWS=new Map,KEYWORDS="break case catch class const continue debugger default delete do else export extends finally for function if in instanceof let new return switch throw try typeof var void while with",KEYWORDS_ATOM="false null true",RESERVED_WORDS="enum import super this "+KEYWORDS_ATOM+" "+KEYWORDS,ALL_RESERVED_WORDS="implements interface package private protected public static "+RESERVED_WORDS,KEYWORDS_BEFORE_EXPRESSION="return new delete throw else case yield await";KEYWORDS=makePredicate(KEYWORDS);RESERVED_WORDS=makePredicate(RESERVED_WORDS);KEYWORDS_BEFORE_EXPRESSION=makePredicate(KEYWORDS_BEFORE_EXPRESSION);KEYWORDS_ATOM=makePredicate(KEYWORDS_ATOM);ALL_RESERVED_WORDS=makePredicate(ALL_RESERVED_WORDS);var OPERATOR_CHARS=makePredicate(characters("+-*&%=<>!?|~^")),RE_HEX_NUMBER=/^0x[0-9a-f]+$/i,RE_OCT_NUMBER=/^0[0-7]+$/,RE_ES6_OCT_NUMBER=/^0o[0-7]+$/i,RE_BIN_NUMBER=/^0b[01]+$/i,RE_DEC_NUMBER=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,RE_BIG_INT=/^(0[xob])?[0-9a-f]+n$/i,RE_KEYWORD_RELATIONAL_OPERATORS=/in(?:stanceof)?/y,OPERATORS=makePredicate(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","**","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","||=","&&=","??=","/=","*=","**=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","??","||"]),WHITESPACE_CHARS=makePredicate(characters(`  
\r	\f\v​           \u2028\u2029  　\uFEFF`)),NEWLINE_CHARS=makePredicate(characters(`
\r\u2028\u2029`)),PUNC_AFTER_EXPRESSION=makePredicate(characters(";]),:")),PUNC_BEFORE_EXPRESSION=makePredicate(characters("[{(,;:")),PUNC_CHARS=makePredicate(characters("[]{}(),;:")),UNICODE={ID_Start:/[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/(?:[$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF])+/};function get_full_char(i,n){if(is_surrogate_pair_head(i.charCodeAt(n))){if(is_surrogate_pair_tail(i.charCodeAt(n+1)))return i.charAt(n)+i.charAt(n+1)}else if(is_surrogate_pair_tail(i.charCodeAt(n))&&is_surrogate_pair_head(i.charCodeAt(n-1)))return i.charAt(n-1)+i.charAt(n);return i.charAt(n)}function get_full_char_code(i,n){return is_surrogate_pair_head(i.charCodeAt(n))?65536+(i.charCodeAt(n)-55296<<10)+i.charCodeAt(n+1)-56320:i.charCodeAt(n)}function get_full_char_length(i){for(var n=0,o=0;o<i.length;o++)is_surrogate_pair_head(i.charCodeAt(o))&&is_surrogate_pair_tail(i.charCodeAt(o+1))&&(n++,o++);return i.length-n}function from_char_code(i){return i>65535?(i-=65536,String.fromCharCode((i>>10)+55296)+String.fromCharCode(i%1024+56320)):String.fromCharCode(i)}function is_surrogate_pair_head(i){return i>=55296&&i<=56319}function is_surrogate_pair_tail(i){return i>=56320&&i<=57343}function is_digit(i){return i>=48&&i<=57}function is_identifier_start(i){return UNICODE.ID_Start.test(i)}function is_identifier_char(i){return UNICODE.ID_Continue.test(i)}const BASIC_IDENT=/^[a-z_$][a-z0-9_$]*$/i;function is_basic_identifier_string(i){return BASIC_IDENT.test(i)}function is_identifier_string(i,n){if(BASIC_IDENT.test(i))return!0;if(!n&&/[\ud800-\udfff]/.test(i))return!1;var o=UNICODE.ID_Start.exec(i);return!o||o.index!==0?!1:(i=i.slice(o[0].length),i?(o=UNICODE.ID_Continue.exec(i),!!o&&o[0].length===i.length):!0)}function parse_js_number(i,n=!0){if(!n&&i.includes("e"))return NaN;if(RE_HEX_NUMBER.test(i))return parseInt(i.substr(2),16);if(RE_OCT_NUMBER.test(i))return parseInt(i.substr(1),8);if(RE_ES6_OCT_NUMBER.test(i))return parseInt(i.substr(2),8);if(RE_BIN_NUMBER.test(i))return parseInt(i.substr(2),2);if(RE_DEC_NUMBER.test(i))return parseFloat(i);var o=parseFloat(i);if(o==i)return o}class JS_Parse_Error extends Error{constructor(n,o,s,l,f){super(),this.name="SyntaxError",this.message=n,this.filename=o,this.line=s,this.col=l,this.pos=f}}function js_error(i,n,o,s,l){throw new JS_Parse_Error(i,n,o,s,l)}function is_token(i,n,o){return i.type==n&&(o==null||i.value==o)}var EX_EOF={};function tokenizer$3(i,n,o,s){var l={text:i,filename:n,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,brace_counter:0,template_braces:[],comments_before:[],directives:{},directive_stack:[]};function f(){return get_full_char(l.text,l.pos)}function E(){if(!(l.text.charCodeAt(l.pos+1)===46))return!1;const ue=l.text.charCodeAt(l.pos+2);return ue<48||ue>57}function g(te,ue){var me=get_full_char(l.text,l.pos++);if(te&&!me)throw EX_EOF;return NEWLINE_CHARS.has(me)?(l.newline_before=l.newline_before||!ue,++l.line,l.col=0,me=="\r"&&f()==`
`&&(++l.pos,me=`
`)):(me.length>1&&(++l.pos,++l.col),++l.col),me}function N(te){for(;te--;)g()}function x(te){return l.text.substr(l.pos,te.length)==te}function w(){for(var te=l.text,ue=l.pos,me=l.text.length;ue<me;++ue){var Le=te[ue];if(NEWLINE_CHARS.has(Le))return ue}return-1}function R(te,ue){var me=l.text.indexOf(te,l.pos);if(me==-1)throw EX_EOF;return me}function k(){l.tokline=l.line,l.tokcol=l.col,l.tokpos=l.pos}var B=!1,P=null;function z(te,ue,me){l.regex_allowed=te=="operator"&&!UNARY_POSTFIX.has(ue)||te=="keyword"&&KEYWORDS_BEFORE_EXPRESSION.has(ue)||te=="punc"&&PUNC_BEFORE_EXPRESSION.has(ue)||te=="arrow",te=="punc"&&(ue=="."||ue=="?.")?B=!0:me||(B=!1);const Le=l.tokline,Qe=l.tokcol,Fe=l.tokpos,lt=l.newline_before,de=n;let De=[],he=[];me||(De=l.comments_before,he=l.comments_before=[]),l.newline_before=!1;const Se=new AST_Token(te,ue,Le,Qe,Fe,lt,De,he,de);return me||(P=Se),Se}function m(){for(;WHITESPACE_CHARS.has(f());)g()}function d(){for(var te=l.pos,ue=!1;te<l.text.length;){var me=get_full_char(l.text,te);if(NEWLINE_CHARS.has(me))return{char:me,pos:te};if(ue)me=="*"&&get_full_char(l.text,te+1)=="/"?(te+=2,ue=!1):te++;else if(WHITESPACE_CHARS.has(me))te++;else{if(me=="/"){var Le=get_full_char(l.text,te+1);if(Le=="/")return te=w(),{char:get_full_char(l.text,te),pos:te};if(Le=="*"){ue=!0,te+=2;continue}}return{char:me,pos:te}}}return{char:null,pos:te}}function y(te,ue){if(te=="\\")return!0;if(is_identifier_start(te)){if(RE_KEYWORD_RELATIONAL_OPERATORS.lastIndex=ue,RE_KEYWORD_RELATIONAL_OPERATORS.test(l.text)){var me=get_full_char(l.text,RE_KEYWORD_RELATIONAL_OPERATORS.lastIndex);if(!is_identifier_char(me)&&me!="\\")return!1}return!0}return!1}function F(te){for(var ue="",me,Le=0;(me=f())&&te(me,Le++);)ue+=g();return ue}function L(te){js_error(te,n,l.tokline,l.tokcol,l.tokpos)}function G(te){var ue=!1,me=!1,Le=!1,Qe=te==".",Fe=!1,lt=!1,de=F(function(he,Se){if(Fe)return!1;var Ue=he.charCodeAt(0);switch(Ue){case 95:return lt=!0;case 98:case 66:return Le=!0;case 111:case 79:case 120:case 88:return Le?!1:Le=!0;case 101:case 69:return Le?!0:ue?!1:ue=me=!0;case 45:return me||Se==0&&!te;case 43:return me;case(me=!1,46):return!Qe&&!Le&&!ue?Qe=!0:!1;case 110:return Fe=!0,!0}return Ue>=48&&Ue<=57||Ue>=97&&Ue<=102||Ue>=65&&Ue<=70});if(te&&(de=te+de),LATEST_RAW=de,RE_OCT_NUMBER.test(de)&&ce.has_directive("use strict")&&L("Legacy octal literals are not allowed in strict mode"),lt&&(de.endsWith("_")?L("Numeric separators are not allowed at the end of numeric literals"):de.includes("__")&&L("Only one underscore is allowed as numeric separator"),de=de.replace(/_/g,"")),Fe){const he=de.slice(0,-1),Se=RE_HEX_NUMBER.test(he),Ue=parse_js_number(he,Se);if(!Qe&&RE_BIG_INT.test(de)&&!isNaN(Ue))return z("big_int",he);L("Invalid or unexpected token")}var De=parse_js_number(de);if(isNaN(De))L("Invalid syntax: "+de);else return z("num",De)}function p(te){return te>="0"&&te<="7"}function I(te,ue,me){var Le=g(!0,te);switch(Le.charCodeAt(0)){case 110:return`
`;case 114:return"\r";case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 120:return String.fromCharCode(V(2,ue));case 117:if(f()=="{"){for(g(!0),f()==="}"&&L("Expecting hex-character between {}");f()=="0";)g(!0);var Qe,Fe=R("}")-l.pos;return(Fe>6||(Qe=V(Fe,ue))>1114111)&&L("Unicode reference out of bounds"),g(!0),from_char_code(Qe)}return String.fromCharCode(V(4,ue));case 10:return"";case 13:if(f()==`
`)return g(!0,te),""}return p(Le)?(me&&ue&&(Le==="0"&&!p(f())||L("Octal escape sequences are not allowed in template strings")),D(Le,ue)):Le}function D(te,ue){var me=f();return me>="0"&&me<="7"&&(te+=g(!0),te[0]<="3"&&(me=f())>="0"&&me<="7"&&(te+=g(!0))),te==="0"?"\0":(te.length>0&&ce.has_directive("use strict")&&ue&&L("Legacy octal escape sequences are not allowed in strict mode"),String.fromCharCode(parseInt(te,8)))}function V(te,ue){for(var me=0;te>0;--te){if(!ue&&isNaN(parseInt(f(),16)))return parseInt(me,16)||"";var Le=g(!0);isNaN(parseInt(Le,16))&&L("Invalid hex-character pattern in string"),me+=Le}return parseInt(me,16)}var C=ke("Unterminated string constant",function(){const te=l.pos;for(var ue=g(),me=[];;){var Le=g(!0,!0);if(Le=="\\")Le=I(!0,!0);else if(Le=="\r"||Le==`
`)L("Unterminated string constant");else if(Le==ue)break;me.push(Le)}var Qe=z("string",me.join(""));return LATEST_RAW=l.text.slice(te,l.pos),Qe.quote=ue,Qe}),K=ke("Unterminated template",function(te){te&&l.template_braces.push(l.brace_counter);var ue="",me="",Le,Qe;for(g(!0,!0);(Le=g(!0,!0))!="`";){if(Le=="\r")f()==`
`&&++l.pos,Le=`
`;else if(Le=="$"&&f()=="{")return g(!0,!0),l.brace_counter++,Qe=z(te?"template_head":"template_cont",ue),TEMPLATE_RAWS.set(Qe,me),Qe.template_end=!1,Qe;if(me+=Le,Le=="\\"){var Fe=l.pos,lt=P&&(P.type==="name"||P.type==="punc"&&(P.value===")"||P.value==="]"));Le=I(!0,!lt,!0),me+=l.text.substr(Fe,l.pos-Fe)}ue+=Le}return l.template_braces.pop(),Qe=z(te?"template_head":"template_cont",ue),TEMPLATE_RAWS.set(Qe,me),Qe.template_end=!0,Qe});function X(te){var ue=l.regex_allowed,me=w(),Le;return me==-1?(Le=l.text.substr(l.pos),l.pos=l.text.length):(Le=l.text.substring(l.pos,me),l.pos=me),l.col=l.tokcol+(l.pos-l.tokpos),l.comments_before.push(z(te,Le,!0)),l.regex_allowed=ue,ce}var re=ke("Unterminated multiline comment",function(){var te=l.regex_allowed,ue=R("*/",!0),me=l.text.substring(l.pos,ue).replace(/\r\n|\r|\u2028|\u2029/g,`
`);return N(get_full_char_length(me)+2),l.comments_before.push(z("comment2",me,!0)),l.newline_before=l.newline_before||me.includes(`
`),l.regex_allowed=te,ce}),se=function(){let te=l.pos,ue=te-1,me="c";for(;(me=l.text.charAt(++ue))&&(me>="a"&&me<="z"||me>="A"&&me<="Z"););return ue>te+1&&me&&me!=="\\"&&!is_identifier_char(me)&&me<="~"?(l.pos+=ue-te,l.col+=ue-te,l.text.slice(te,l.pos)):Pe()},Pe=ke("Unterminated identifier name",function(){var te=[],ue,me=!1,Le=function(){return me=!0,g(),f()!=="u"&&L("Expecting UnicodeEscapeSequence -- uXXXX or u{XXXX}"),I(!1,!0)};if((ue=f())==="\\")ue=Le(),is_identifier_start(ue)||L("First identifier char is an invalid identifier char");else if(is_identifier_start(ue))g();else return"";for(te.push(ue);(ue=f())!=null;){if((ue=f())==="\\")ue=Le(),is_identifier_char(ue)||L("Invalid escaped identifier char");else{if(!is_identifier_char(ue))break;g()}te.push(ue)}const Qe=te.join("");return RESERVED_WORDS.has(Qe)&&me&&L("Escaped characters are not allowed in keywords"),Qe}),Te=ke("Unterminated regular expression",function(te){for(var ue=!1,me,Le=!1;me=g(!0);)if(NEWLINE_CHARS.has(me))L("Unexpected line terminator");else if(ue)/^[\u0000-\u007F]$/.test(me)?te+="\\"+me:te+=me,ue=!1;else if(me=="[")Le=!0,te+=me;else if(me=="]"&&Le)Le=!1,te+=me;else{if(me=="/"&&!Le)break;me=="\\"?ue=!0:te+=me}const Qe=se();return z("regexp","/"+te+"/"+Qe)});function Ae(te){function ue(me){if(!f())return me;var Le=me+f();return OPERATORS.has(Le)?(g(),ue(Le)):me}return z("operator",ue(te||g()))}function we(){switch(g(),f()){case"/":return g(),X("comment1");case"*":return g(),re()}return l.regex_allowed?Te(""):Ae("/")}function ve(){return g(),f()===">"?(g(),z("arrow","=>")):Ae("=")}function be(){return g(),is_digit(f().charCodeAt(0))?G("."):f()==="."?(g(),g(),z("expand","...")):z("punc",".")}function Xe(){var te=se();return B?z("name",te):KEYWORDS_ATOM.has(te)?z("atom",te):KEYWORDS.has(te)?OPERATORS.has(te)?z("operator",te):z("keyword",te):z("name",te)}function Be(){return g(),z("privatename",se())}function ke(te,ue){return function(me){try{return ue(me)}catch(Le){if(Le===EX_EOF)L(te);else throw Le}}}function ce(te){if(te!=null)return Te(te);for(s&&l.pos==0&&x("#!")&&(k(),N(2),X("comment5"));;){if(m(),k(),o){if(x("<!--")){N(4),X("comment3");continue}if(x("-->")&&l.newline_before){N(3),X("comment4");continue}}var ue=f();if(!ue)return z("eof");var me=ue.charCodeAt(0);switch(me){case 34:case 39:return C();case 46:return be();case 47:{var Le=we();if(Le===ce)continue;return Le}case 61:return ve();case 63:{if(!E())break;return g(),g(),z("punc","?.")}case 96:return K(!0);case 123:l.brace_counter++;break;case 125:if(l.brace_counter--,l.template_braces.length>0&&l.template_braces[l.template_braces.length-1]===l.brace_counter)return K(!1);break}if(is_digit(me))return G();if(PUNC_CHARS.has(ue))return z("punc",g());if(OPERATOR_CHARS.has(ue))return Ae();if(me==92||is_identifier_start(ue))return Xe();if(me==35)return Be();break}L("Unexpected character '"+ue+"'")}return ce.next=g,ce.peek=f,ce.context=function(te){return te&&(l=te),l},ce.add_directive=function(te){l.directive_stack[l.directive_stack.length-1].push(te),l.directives[te]===void 0?l.directives[te]=1:l.directives[te]++},ce.push_directives_stack=function(){l.directive_stack.push([])},ce.pop_directives_stack=function(){for(var te=l.directive_stack[l.directive_stack.length-1],ue=0;ue<te.length;ue++)l.directives[te[ue]]--;l.directive_stack.pop()},ce.has_directive=function(te){return l.directives[te]>0},ce.peek_next_token_start_or_newline=d,ce.ch_starts_binding_identifier=y,ce}var UNARY_PREFIX=makePredicate(["typeof","void","delete","--","++","!","~","-","+"]),UNARY_POSTFIX=makePredicate(["--","++"]),ASSIGNMENT=makePredicate(["=","+=","-=","??=","&&=","||=","/=","*=","**=","%=",">>=","<<=",">>>=","|=","^=","&="]),LOGICAL_ASSIGNMENT=makePredicate(["??=","&&=","||="]),PRECEDENCE=(function(i,n){for(var o=0;o<i.length;++o)for(const s of i[o])n[s]=o+1;return n})([["||"],["??"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),ATOMIC_START_TOKEN=makePredicate(["atom","num","big_int","string","regexp","name"]);function parse$1(i,n){const o=new WeakMap;n=defaults(n,{bare_returns:!1,ecma:null,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var s={input:typeof i=="string"?tokenizer$3(i,n.filename,n.html5_comments,n.shebang):i,token:null,prev:null,peeked:null,in_function:0,in_async:-1,in_generator:-1,in_directives:!0,in_loop:0,labels:[]};s.token=E();function l(W,Q){return is_token(s.token,W,Q)}function f(){return s.peeked||(s.peeked=s.input())}function E(){return s.prev=s.token,s.peeked||f(),s.token=s.peeked,s.peeked=null,s.in_directives=s.in_directives&&(s.token.type=="string"||l("punc",";")),s.token}function g(){return s.prev}function N(W,Q,ie,ge){var Oe=s.input.context();js_error(W,Oe.filename,Q??Oe.tokline,ie??Oe.tokcol,ge??Oe.tokpos)}function x(W,Q){N(Q,W.line,W.col)}function w(W){W==null&&(W=s.token),x(W,"Unexpected token: "+W.type+" ("+W.value+")")}function R(W,Q){if(l(W,Q))return E();x(s.token,"Unexpected token "+s.token.type+" «"+s.token.value+"», expected "+W+" «"+Q+"»")}function k(W){return R("punc",W)}function B(W){return W.nlb||!W.comments_before.every(Q=>!Q.nlb)}function P(){return!n.strict&&(l("eof")||l("punc","}")||B(s.token))}function z(){return s.in_generator===s.in_function}function m(){return s.in_async===s.in_function}function d(){return s.in_async===s.in_function||s.in_function===0&&s.input.has_directive("use strict")}function y(W){l("punc",";")?E():!W&&!P()&&w()}function F(){k("(");var W=Je(!0);return k(")"),W}function L(W){return function(...ie){const ge=s.token,Oe=W(...ie);return Oe.start=ge,Oe.end=g(),Oe}}function G(){(l("operator","/")||l("operator","/="))&&(s.peeked=null,s.token=s.input(s.token.value.substr(1)))}var p=L(function W(Q,ie,ge){switch(G(),s.token.type){case"string":if(s.in_directives){var Oe=f();!LATEST_RAW.includes("\\")&&(is_token(Oe,"punc",";")||is_token(Oe,"punc","}")||B(Oe)||is_token(Oe,"eof"))?s.input.add_directive(s.token.value):s.in_directives=!1}var We=s.in_directives,Ye=D();return We&&Ye.body instanceof AST_String?new AST_Directive(Ye.body):Ye;case"template_head":case"num":case"big_int":case"regexp":case"operator":case"atom":return D();case"name":if(s.token.value=="async"&&is_token(f(),"keyword","function"))return E(),E(),ie&&N("functions are not allowed as the body of a loop"),Pe(AST_Defun,!1,!0,Q);if(s.token.value=="import"&&!is_token(f(),"punc","(")&&!is_token(f(),"punc",".")){E();var rt=j();return y(),rt}if(s.token.value=="using"&&is_token(f(),"name")&&!B(f())){E();var rt=de();return y(),rt}if(s.token.value=="await"&&d()&&is_token(f(),"name","using")&&!B(f())){var Ot=s.input.peek_next_token_start_or_newline();if(s.input.ch_starts_binding_identifier(Ot.char,Ot.pos)){E();var rt=De();return y(),rt}}return is_token(f(),"punc",":")?I():D();case"privatename":return s.in_class||N("Private field must be used in an enclosing class"),D();case"punc":switch(s.token.value){case"{":return new AST_BlockStatement({start:s.token,body:te(),end:g()});case"[":case"(":return D();case";":return s.in_directives=!1,E(),new AST_EmptyStatement;default:w()}case"keyword":switch(s.token.value){case"break":return E(),V(AST_Break);case"continue":return E(),V(AST_Continue);case"debugger":return E(),y(),new AST_Debugger;case"do":E();var Bt=Nt(W);R("keyword","while");var Ft=F();return y(!0),new AST_Do({body:Bt,condition:Ft});case"while":return E(),new AST_While({condition:F(),body:Nt(function(){return W(!1,!0)})});case"for":return E(),C();case"class":return E(),ie&&N("classes are not allowed as the body of a loop"),ge&&N("classes are not allowed as the body of an if"),ot(AST_DefClass,Q);case"function":return E(),ie&&N("functions are not allowed as the body of a loop"),Pe(AST_Defun,!1,!1,Q);case"if":return E(),ce();case"return":s.in_function==0&&!n.bare_returns&&N("'return' outside of function"),E();var ii=null;return l("punc",";")?E():P()||(ii=Je(!0),y()),new AST_Return({value:ii});case"switch":return E(),new AST_Switch({expression:F(),body:Nt(ue)});case"throw":E(),B(s.token)&&N("Illegal newline after 'throw'");var ii=Je(!0);return y(),new AST_Throw({value:ii});case"try":return E(),me();case"var":E();var rt=Qe();return y(),rt;case"let":E();var rt=Fe();return y(),rt;case"const":E();var rt=lt();return y(),rt;case"with":return s.input.has_directive("use strict")&&N("Strict mode may not include a with statement"),E(),new AST_With({expression:F(),body:W()});case"export":if(!is_token(f(),"punc","(")){E();var rt=le();return l("punc",";")&&y(),rt}}}w()});function I(){var W=ye(AST_Label);W.name==="await"&&m()&&x(s.prev,"await cannot be used as label inside async function"),s.labels.some(ie=>ie.name===W.name)&&N("Label "+W.name+" defined twice"),k(":"),s.labels.push(W);var Q=p();return s.labels.pop(),Q instanceof AST_IterationStatement||W.references.forEach(function(ie){ie instanceof AST_Continue&&(ie=ie.label.start,N("Continue label `"+W.name+"` refers to non-IterationStatement.",ie.line,ie.col,ie.pos))}),new AST_LabeledStatement({body:Q,label:W})}function D(W){return new AST_SimpleStatement({body:(W=Je(!0),y(),W)})}function V(W){var Q=null,ie;P()||(Q=ye(AST_LabelRef,!0)),Q!=null?(ie=s.labels.find(Oe=>Oe.name===Q.name),ie||N("Undefined label "+Q.name),Q.thedef=ie):s.in_loop==0&&N(W.TYPE+" not inside a loop or switch"),y();var ge=new W({label:Q});return ie&&ie.references.push(ge),ge}function C(){var W="`for await` invalid in this context",Q=s.token;Q.type=="name"&&Q.value=="await"?(d()||x(Q,W),E()):Q=!1,k("(");var ie=null;if(l("punc",";"))Q&&x(Q,W);else{ie=l("keyword","var")?(E(),Qe(!0)):l("keyword","let")?(E(),Fe(!0)):l("keyword","const")?(E(),lt(!0)):l("name","using")&&is_token(f(),"name")&&(f().value!="of"||s.input.peek_next_token_start_or_newline().char=="=")?(E(),de(!0)):l("name","await")&&d()&&is_token(f(),"name","using")?(E(),De(!0)):Je(!0,!0);var ge=l("operator","in"),Oe=l("name","of");if(Q&&!Oe&&x(Q,W),ge||Oe)return ie instanceof AST_DefinitionsLike?(ie.definitions.length>1&&x(ie.start,"Only one variable declaration allowed in for..in loop"),ge&&ie instanceof AST_Using&&x(ie.start,"Invalid using declaration in for..in loop")):ee(ie)||(ie=xe(ie))instanceof AST_Destructuring||x(ie.start,"Invalid left-hand side in for..in loop"),E(),ge?re(ie):X(ie,!!Q)}return K(ie)}function K(W){k(";");var Q=l("punc",";")?null:Je(!0);k(";");var ie=l("punc",")")?null:Je(!0);return k(")"),new AST_For({init:W,condition:Q,step:ie,body:Nt(function(){return p(!1,!0)})})}function X(W,Q){var ie=W instanceof AST_DefinitionsLike?W.definitions[0].name:null,ge=Je(!0);return k(")"),new AST_ForOf({await:Q,init:W,name:ie,object:ge,body:Nt(function(){return p(!1,!0)})})}function re(W){var Q=Je(!0);return k(")"),new AST_ForIn({init:W,object:Q,body:Nt(function(){return p(!1,!0)})})}var se=function(W,Q,ie){B(s.token)&&N("Unexpected newline before arrow (=>)"),R("arrow","=>");var ge=Xe(l("punc","{"),!1,ie);return new AST_Arrow({start:W,end:ge.end,async:ie,argnames:Q,body:ge})},Pe=function(W,Q,ie,ge){var Oe=W===AST_Defun;l("operator","*")&&(Q=!0,E());var We=l("name")?ye(Oe?AST_SymbolDefun:AST_SymbolLambda):null;Oe&&!We&&(ge?W=AST_Function:w()),We&&W!==AST_Accessor&&!(We instanceof AST_SymbolDeclaration)&&w(g());var Ye=[],rt=Xe(!0,Q,ie,We,Ye);return new W({start:Ye.start,end:rt.end,is_generator:Q,async:ie,name:We,argnames:Ye,body:rt})};class Te{constructor(Q,ie,ge=!1){this.is_parameter=Q,this.duplicates_ok=ge,this.parameters=new Set,this.duplicate=null,this.default_assignment=!1,this.spread=!1,this.strict_mode=!!ie}add_parameter(Q){if(this.parameters.has(Q.value))this.duplicate===null&&(this.duplicate=Q),this.check_strict();else if(this.parameters.add(Q.value),this.is_parameter)switch(Q.value){case"arguments":case"eval":case"yield":this.strict_mode&&x(Q,"Unexpected "+Q.value+" identifier as parameter inside strict mode");break;default:RESERVED_WORDS.has(Q.value)&&w()}}mark_default_assignment(Q){this.default_assignment===!1&&(this.default_assignment=Q)}mark_spread(Q){this.spread===!1&&(this.spread=Q)}mark_strict_mode(){this.strict_mode=!0}is_strict(){return this.default_assignment!==!1||this.spread!==!1||this.strict_mode}check_strict(){this.is_strict()&&this.duplicate!==null&&!this.duplicates_ok&&x(this.duplicate,"Parameter "+this.duplicate.value+" was used already")}}function Ae(W){var Q=new Te(!0,s.input.has_directive("use strict"));for(k("(");!l("punc",")");){var ie=we(Q);if(W.push(ie),l("punc",")")||k(","),ie instanceof AST_Expansion)break}E()}function we(W,Q){var ie,ge=!1;return W===void 0&&(W=new Te(!0,s.input.has_directive("use strict"))),l("expand","...")&&(ge=s.token,W.mark_spread(s.token),E()),ie=ve(W,Q),l("operator","=")&&ge===!1&&(W.mark_default_assignment(s.token),E(),ie=new AST_DefaultAssign({start:ie.start,left:ie,operator:"=",right:Je(!1),end:s.token})),ge!==!1&&(l("punc",")")||w(),ie=new AST_Expansion({start:ge,expression:ie,end:ge})),W.check_strict(),ie}function ve(W,Q){var ie=[],ge=!0,Oe=!1,We,Ye=s.token;if(W===void 0){const ii=s.input.has_directive("use strict"),Et=Q===AST_SymbolVar;W=new Te(!1,ii,Et)}if(Q=Q===void 0?AST_SymbolFunarg:Q,l("punc","[")){for(E();!l("punc","]");){if(ge?ge=!1:k(","),l("expand","...")&&(Oe=!0,We=s.token,W.mark_spread(s.token),E()),l("punc"))switch(s.token.value){case",":ie.push(new AST_Hole({start:s.token,end:s.token}));continue;case"]":break;case"[":case"{":ie.push(ve(W,Q));break;default:w()}else l("name")?(W.add_parameter(s.token),ie.push(ye(Q))):N("Invalid function parameter");l("operator","=")&&Oe===!1&&(W.mark_default_assignment(s.token),E(),ie[ie.length-1]=new AST_DefaultAssign({start:ie[ie.length-1].start,left:ie[ie.length-1],operator:"=",right:Je(!1),end:s.token})),Oe&&(l("punc","]")||N("Rest element must be last element"),ie[ie.length-1]=new AST_Expansion({start:We,expression:ie[ie.length-1],end:We}))}return k("]"),W.check_strict(),new AST_Destructuring({start:Ye,names:ie,is_array:!0,end:g()})}else if(l("punc","{")){for(E();!l("punc","}");){if(ge?ge=!1:k(","),l("expand","...")&&(Oe=!0,We=s.token,W.mark_spread(s.token),E()),l("name")&&(is_token(f(),"punc")||is_token(f(),"operator"))&&[",","}","="].includes(f().value)){W.add_parameter(s.token);var rt=g(),Ot=ye(Q);Oe?ie.push(new AST_Expansion({start:We,expression:Ot,end:Ot.end})):ie.push(new AST_ObjectKeyVal({start:rt,key:Ot.name,value:Ot,end:Ot.end}))}else{if(l("punc","}"))continue;var Bt=s.token,Ft=O();Ft===null?w(g()):g().type==="name"&&!l("punc",":")?ie.push(new AST_ObjectKeyVal({start:g(),key:Ft,value:new Q({start:g(),name:Ft,end:g()}),end:g()})):(k(":"),ie.push(new AST_ObjectKeyVal({start:Bt,quote:Bt.quote,key:Ft,value:ve(W,Q),end:g()})))}Oe?l("punc","}")||N("Rest element must be last element"):l("operator","=")&&(W.mark_default_assignment(s.token),E(),ie[ie.length-1].value=new AST_DefaultAssign({start:ie[ie.length-1].value.start,left:ie[ie.length-1].value,operator:"=",right:Je(!1),end:s.token}))}return k("}"),W.check_strict(),new AST_Destructuring({start:Ye,names:ie,is_array:!1,end:g()})}else{if(l("name"))return W.add_parameter(s.token),ye(Q);N("Invalid function parameter")}}function be(W,Q){var ie,ge,Oe,We=[];for(k("(");!l("punc",")");)ie&&w(ie),l("expand","...")?(ie=s.token,Q&&(ge=s.token),E(),We.push(new AST_Expansion({start:g(),expression:Je(),end:s.token}))):We.push(Je()),l("punc",")")||(k(","),l("punc",")")&&(Oe=g(),Q&&(ge=Oe)));return k(")"),W&&l("arrow","=>")?ie&&Oe&&w(Oe):ge&&w(ge),We}function Xe(W,Q,ie,ge,Oe){var We=s.in_loop,Ye=s.labels,rt=s.in_generator,Ot=s.in_async;if(++s.in_function,Q&&(s.in_generator=s.in_function),ie&&(s.in_async=s.in_function),Oe&&Ae(Oe),W&&(s.in_directives=!0),s.in_loop=0,s.labels=[],W){s.input.push_directives_stack();var Bt=te();ge&&ne(ge),Oe&&Oe.forEach(ne),s.input.pop_directives_stack()}else var Bt=[new AST_Return({start:s.token,value:Je(!1),end:s.token})];return--s.in_function,s.in_loop=We,s.labels=Ye,s.in_generator=rt,s.in_async=Ot,Bt}function Be(){return d()||N("Unexpected await expression outside async function",s.prev.line,s.prev.col,s.prev.pos),new AST_Await({start:g(),end:s.token,expression:c(!0)})}function ke(){var W=s.token,Q=!1,ie=!0;return P()||l("punc")&&PUNC_AFTER_EXPRESSION.has(s.token.value)||l("template_cont")?ie=!1:l("operator","*")&&(Q=!0,E()),new AST_Yield({start:W,is_star:Q,expression:ie?Je():null,end:g()})}function ce(){var W=F(),Q=p(!1,!1,!0),ie=null;return l("keyword","else")&&(E(),ie=p(!1,!1,!0)),new AST_If({condition:W,body:Q,alternative:ie})}function te(){k("{");for(var W=[];!l("punc","}");)l("eof")&&w(),W.push(p());return E(),W}function ue(){k("{");for(var W=[],Q=null,ie=null,ge;!l("punc","}");)l("eof")&&w(),l("keyword","case")?(ie&&(ie.end=g()),Q=[],ie=new AST_Case({start:(ge=s.token,E(),ge),expression:Je(!0),body:Q}),W.push(ie),k(":")):l("keyword","default")?(ie&&(ie.end=g()),Q=[],ie=new AST_Default({start:(ge=s.token,E(),k(":"),ge),body:Q}),W.push(ie)):(Q||w(),Q.push(p()));return ie&&(ie.end=g()),E(),W}function me(){var W,Q=null,ie=null;if(W=new AST_TryBlock({start:s.token,body:te(),end:g()}),l("keyword","catch")){var ge=s.token;if(E(),l("punc","{"))var Oe=null;else{k("(");var Oe=we(void 0,AST_SymbolCatch);k(")")}Q=new AST_Catch({start:ge,argname:Oe,body:te(),end:g()})}if(l("keyword","finally")){var ge=s.token;E(),ie=new AST_Finally({start:ge,body:te(),end:g()})}return!Q&&!ie&&N("Missing catch/finally blocks"),new AST_Try({body:W,bcatch:Q,bfinally:ie})}function Le(W,Q){for(var ie=[],ge;;){var Oe=Q==="var"?AST_SymbolVar:Q==="const"?AST_SymbolConst:Q==="let"?AST_SymbolLet:Q==="using"||Q==="await using"?AST_SymbolUsing:null,We=Q==="using"||Q==="await using"?AST_UsingDef:AST_VarDef;if(l("punc","{")||l("punc","[")?ge=new We({start:s.token,name:ve(void 0,Oe),value:l("operator","=")?(R("operator","="),Je(!1,W)):null,end:g()}):(ge=new We({start:s.token,name:ye(Oe),value:l("operator","=")?(E(),Je(!1,W)):!W&&(Q==="const"||Q==="using"||Q==="await using")?N("Missing initializer in "+Q+" declaration"):null,end:g()}),ge.name.name=="import"&&N("Unexpected token: import")),ie.push(ge),!l("punc",","))break;E()}return ie}var Qe=function(W){return new AST_Var({start:g(),definitions:Le(W,"var"),end:g()})},Fe=function(W){return new AST_Let({start:g(),definitions:Le(W,"let"),end:g()})},lt=function(W){return new AST_Const({start:g(),definitions:Le(W,"const"),end:g()})},de=function(W){return new AST_Using({start:g(),await:!1,definitions:Le(W,"using"),end:g()})},De=function(W){return new AST_Using({start:g(),await:!0,definitions:(E(),Le(W,"await using")),end:g()})},he=function(W){var Q=s.token;if(R("operator","new"),l("punc","."))return E(),R("name","target"),T(new AST_NewTarget({start:Q,end:g()}),W);var ie=He(!1),ge;l("punc","(")?(E(),ge=tt(")",!0)):ge=[];var Oe=new AST_New({start:Q,expression:ie,args:ge,end:g()});return v(Oe),T(Oe,W)};function Se(){var W=s.token,Q;switch(W.type){case"name":Q=J(AST_SymbolRef);break;case"num":Q=new AST_Number({start:W,end:W,value:W.value,raw:LATEST_RAW});break;case"big_int":Q=new AST_BigInt({start:W,end:W,value:W.value,raw:LATEST_RAW});break;case"string":Q=new AST_String({start:W,end:W,value:W.value,quote:W.quote}),v(Q);break;case"regexp":const[ie,ge,Oe]=W.value.match(/^\/(.*)\/(\w*)$/);Q=new AST_RegExp({start:W,end:W,value:{source:ge,flags:Oe}});break;case"atom":switch(W.value){case"false":Q=new AST_False({start:W,end:W});break;case"true":Q=new AST_True({start:W,end:W});break;case"null":Q=new AST_Null({start:W,end:W});break}break}return E(),Q}function Ue(W,Q){var ie=function(ge,Oe){return Oe?new AST_DefaultAssign({start:ge.start,left:ge,operator:"=",right:Oe,end:Oe.end}):ge};if(W instanceof AST_Object)return ie(new AST_Destructuring({start:W.start,end:W.end,is_array:!1,names:W.properties.map(ge=>Ue(ge))}),Q);if(W instanceof AST_ObjectKeyVal)return W.value=Ue(W.value),ie(W,Q);if(W instanceof AST_Hole)return W;if(W instanceof AST_Destructuring)return W.names=W.names.map(ge=>Ue(ge)),ie(W,Q);if(W instanceof AST_SymbolRef)return ie(new AST_SymbolFunarg({name:W.name,start:W.start,end:W.end}),Q);if(W instanceof AST_Expansion)return W.expression=Ue(W.expression),ie(W,Q);if(W instanceof AST_Array)return ie(new AST_Destructuring({start:W.start,end:W.end,is_array:!0,names:W.elements.map(ge=>Ue(ge))}),Q);if(W instanceof AST_Assign)return ie(Ue(W.left,W.right),Q);if(W instanceof AST_DefaultAssign)return W.left=Ue(W.left),W;N("Invalid function parameter",W.start.line,W.start.col)}var He=function(W,Q){if(l("operator","new"))return he(W);if(l("name","import")&&is_token(f(),"punc","."))return $e(W);var ie=s.token,ge,Oe=l("name","async")&&(ge=f()).value!="["&&ge.type!="arrow"&&Se();if(l("punc")){switch(s.token.value){case"(":if(Oe&&!W)break;var We=be(Q,!Oe);if(Q&&l("arrow","=>"))return se(ie,We.map(Et=>Ue(Et)),!!Oe);var Ye=Oe?new AST_Call({expression:Oe,args:We}):at(ie,We);if(Ye.start){const Et=ie.comments_before.length;if(o.set(ie,Et),Ye.start.comments_before.unshift(...ie.comments_before),ie.comments_before=Ye.start.comments_before,Et==0&&ie.comments_before.length>0){var rt=ie.comments_before[0];rt.nlb||(rt.nlb=ie.nlb,ie.nlb=!1)}ie.comments_after=Ye.start.comments_after}Ye.start=ie;var Ot=g();return Ye.end&&(Ot.comments_before=Ye.end.comments_before,Ye.end.comments_after.push(...Ot.comments_after),Ot.comments_after=Ye.end.comments_after),Ye.end=Ot,Ye instanceof AST_Call&&v(Ye),T(Ye,W);case"[":return T(ht(),W);case"{":return T(st(),W)}Oe||w()}if(Q&&l("name")&&is_token(f(),"arrow")){var Bt=new AST_SymbolFunarg({name:s.token.value,start:ie,end:ie});return E(),se(ie,[Bt],!!Oe)}if(l("keyword","function")){E();var Ft=Pe(AST_Function,!1,!!Oe);return Ft.start=ie,Ft.end=g(),T(Ft,W)}if(Oe)return T(Oe,W);if(l("keyword","class")){E();var ii=ot(AST_ClassExpression);return ii.start=ie,ii.end=g(),T(ii,W)}if(l("template_head"))return T(et(),W);if(ATOMIC_START_TOKEN.has(s.token.type))return T(Se(),W);w()};function et(){var W=[],Q=s.token;for(W.push(new AST_TemplateSegment({start:s.token,raw:TEMPLATE_RAWS.get(s.token),value:s.token.value,end:s.token}));!s.token.template_end;)E(),G(),W.push(Je(!0)),W.push(new AST_TemplateSegment({start:s.token,raw:TEMPLATE_RAWS.get(s.token),value:s.token.value,end:s.token}));return E(),new AST_TemplateString({start:Q,segments:W,end:s.token})}function tt(W,Q,ie){for(var ge=!0,Oe=[];!l("punc",W)&&(ge?ge=!1:k(","),!(Q&&l("punc",W)));)l("punc",",")&&ie?Oe.push(new AST_Hole({start:s.token,end:s.token})):l("expand","...")?(E(),Oe.push(new AST_Expansion({start:g(),expression:Je(),end:s.token}))):Oe.push(Je(!1));return E(),Oe}var ht=L(function(){return k("["),new AST_Array({elements:tt("]",!n.strict,!0)})}),nt=L((W,Q)=>Pe(AST_Accessor,W,Q)),st=L(function(){var Q=s.token,ie=!0,ge=[];for(k("{");!l("punc","}")&&(ie?ie=!1:k(","),!(!n.strict&&l("punc","}")));){if(Q=s.token,Q.type=="expand"){E(),ge.push(new AST_Expansion({start:Q,expression:Je(!1),end:g()}));continue}l("privatename")&&N("private fields are not allowed in an object");var Oe=O(),We;if(l("punc",":"))Oe===null?w(g()):(E(),We=Je(!1));else{var Ye=it(Oe,Q);if(Ye){ge.push(Ye);continue}We=new AST_SymbolRef({start:g(),name:Oe,end:g()})}l("operator","=")&&(E(),We=new AST_Assign({start:Q,left:We,operator:"=",right:Je(!1),logical:!1,end:g()}));const rt=new AST_ObjectKeyVal({start:Q,quote:Q.quote,key:Oe,value:We,end:g()});ge.push(v(rt))}return E(),new AST_Object({properties:ge})});function ot(W,Q){var ie,ge,Oe,We,Ye=[];s.input.push_directives_stack(),s.input.add_directive("use strict"),s.token.type=="name"&&s.token.value!="extends"&&(Oe=ye(W===AST_DefClass?AST_SymbolDefClass:AST_SymbolClass)),W===AST_DefClass&&!Oe&&(Q?W=AST_ClassExpression:w()),s.token.value=="extends"&&(E(),We=Je(!0)),k("{");const rt=s.in_class;for(s.in_class=!0;l("punc",";");)E();for(;!l("punc","}");)for(ie=s.token,ge=it(O(),ie,!0),ge||w(),Ye.push(ge);l("punc",";");)E();return s.in_class=rt,s.input.pop_directives_stack(),E(),new W({start:ie,name:Oe,extends:We,properties:Ye,end:g()})}function it(W,Q,ie){const ge=(Et,Sn)=>typeof Et=="string"?new Sn({start:Q,name:Et,end:g()}):(Et===null&&w(),Et);var Oe=g().type==="privatename";const We=()=>!l("punc","(")&&!l("punc",",")&&!l("punc","}")&&!l("punc",";")&&!l("operator","=")&&!Oe;var Ye=!1,rt=!1,Ot=!1,Bt=null;if(ie&&W==="static"&&We()){const Et=S();if(Et!=null)return Et;rt=!0,W=O()}W==="async"&&We()&&(Ye=!0,W=O()),g().type==="operator"&&g().value==="*"&&(Ot=!0,W=O()),(W==="get"||W==="set")&&We()&&(Bt=W,W=O()),!Oe&&g().type==="privatename"&&(Oe=!0);const Ft=g();if(Bt!=null)if(Oe){const Et=Bt==="get"?AST_PrivateGetter:AST_PrivateSetter;return v(new Et({start:Q,static:rt,key:ge(W,AST_SymbolMethod),value:nt(),end:g()}))}else{const Et=Bt==="get"?AST_ObjectGetter:AST_ObjectSetter;return W=ge(W,AST_SymbolMethod),v(new Et({start:Q,static:rt,key:W,quote:W instanceof AST_SymbolMethod?Ft.quote:void 0,value:nt(),end:g()}))}if(l("punc","(")){W=ge(W,AST_SymbolMethod);const Et=Oe?AST_PrivateMethod:AST_ConciseMethod;var ii=new Et({start:Q,static:rt,key:W,quote:W instanceof AST_SymbolMethod?Ft.quote:void 0,value:nt(Ot,Ye),end:g()});return v(ii)}if(ie){const Et=Oe?AST_SymbolPrivateProperty:AST_SymbolClassProperty,Sn=Oe?AST_ClassPrivateProperty:AST_ClassProperty,rn=ge(W,Et),kr=rn instanceof AST_SymbolClassProperty?Ft.quote:void 0;if(l("operator","="))return E(),v(new Sn({start:Q,static:rt,quote:kr,key:rn,value:Je(!1),end:g()}));if(l("name")||l("privatename")||l("punc","[")||l("operator","*")||l("punc",";")||l("punc","}")||l("string")||l("num")||l("big_int"))return v(new Sn({start:Q,static:rt,quote:kr,key:rn,end:g()}))}}function S(){if(!l("punc","{"))return null;const W=s.token,Q=[];for(E();!l("punc","}");)Q.push(p());return E(),new AST_ClassStaticBlock({start:W,body:Q,end:g()})}function ae(){return(l("keyword","with")||l("name","assert"))&&!B(s.token)?(E(),st()):null}function j(){var W=g(),Q,ie;l("name")&&(Q=ye(AST_SymbolImport)),l("punc",",")&&E(),ie=Ve(!0),(ie||Q)&&R("name","from");var ge=s.token;ge.type!=="string"&&w(),E();const Oe=ae();return new AST_Import({start:W,imported_name:Q,imported_names:ie,module_name:new AST_String({start:ge,value:ge.value,quote:ge.quote,end:ge}),attributes:Oe,end:s.token})}function $e(W){var Q=s.token;return R("name","import"),R("punc","."),R("name","meta"),T(new AST_ImportMeta({start:Q,end:g()}),W)}function Ne(W){function Q(rt,Ot){return new rt({name:O(),quote:Ot||void 0,start:g(),end:g()})}var ie=W?AST_SymbolImportForeign:AST_SymbolExportForeign,ge=W?AST_SymbolImport:AST_SymbolExport,Oe=s.token,We,Ye;return W?We=Q(ie,Oe.quote):Ye=Q(ge,Oe.quote),l("name","as")?(E(),W?Ye=Q(ge):We=Q(ie,s.token.quote)):W?Ye=new ge(We):We=new ie(Ye),new AST_NameMapping({start:Oe,foreign_name:We,name:Ye,end:g()})}function Ie(W,Q){var ie=W?AST_SymbolImportForeign:AST_SymbolExportForeign,ge=W?AST_SymbolImport:AST_SymbolExport,Oe=s.token,We,Ye,rt=g();return W?We=Q:Ye=Q,We=We||new ge({start:Oe,name:"*",end:rt}),Ye=Ye||new ie({start:Oe,name:"*",end:rt}),new AST_NameMapping({start:Oe,foreign_name:Ye,name:We,end:rt})}function Ve(W){var Q;if(l("punc","{")){for(E(),Q=[];!l("punc","}");)Q.push(Ne(W)),l("punc",",")&&E();E()}else if(l("operator","*")){var ie;E(),l("name","as")&&(E(),ie=W?ye(AST_SymbolImport):h(AST_SymbolExportForeign)),Q=[Ie(W,ie)]}return Q}function le(){var W=s.token,Q,ie;if(l("keyword","default"))Q=!0,E();else if(ie=Ve(!1))if(l("name","from")){E();var ge=s.token;ge.type!=="string"&&w(),E();const rt=ae();return new AST_Export({start:W,is_default:Q,exported_names:ie,module_name:new AST_String({start:ge,value:ge.value,quote:ge.quote,end:ge}),end:g(),attributes:rt})}else return new AST_Export({start:W,is_default:Q,exported_names:ie,end:g()});var Oe,We,Ye;return l("punc","{")||Q&&(l("keyword","class")||l("keyword","function"))&&is_token(f(),"punc")?(We=Je(!1),y()):(Oe=p(Q))instanceof AST_Definitions&&Q?w(Oe.start):Oe instanceof AST_Definitions||Oe instanceof AST_Defun||Oe instanceof AST_DefClass?Ye=Oe:Oe instanceof AST_ClassExpression||Oe instanceof AST_Function?We=Oe:Oe instanceof AST_SimpleStatement?We=Oe.body:w(Oe.start),new AST_Export({start:W,is_default:Q,exported_value:We,exported_definition:Ye,end:g(),attributes:null})}function O(){var W=s.token;switch(W.type){case"punc":if(W.value==="["){E();var Q=Je(!1);return k("]"),Q}else w(W);case"operator":if(W.value==="*")return E(),null;["delete","in","instanceof","new","typeof","void"].includes(W.value)||w(W);case"name":case"privatename":case"string":case"keyword":case"atom":return E(),W.value;case"num":case"big_int":return E(),""+W.value;default:w(W)}}function H(){var W=s.token;return W.type!="name"&&W.type!="privatename"&&w(),E(),W.value}function J(W){var Q=s.token.value;return new(Q=="this"?AST_This:Q=="super"?AST_Super:W)({name:String(Q),start:s.token,end:s.token})}function ne(W){var Q=W.name;z()&&Q=="yield"&&x(W.start,"Yield cannot be used as identifier inside generators"),s.input.has_directive("use strict")&&(Q=="yield"&&x(W.start,"Unexpected yield identifier inside strict mode"),W instanceof AST_SymbolDeclaration&&(Q=="arguments"||Q=="eval")&&x(W.start,"Unexpected "+Q+" in strict mode"))}function ye(W,Q){if(!l("name"))return Q||N("Name expected"),null;var ie=J(W);return ne(ie),E(),ie}function h(W){if(!l("name")){l("string")||N("Name or string expected");var Q=s.token,ie=new W({start:Q,end:Q,name:Q.value,quote:Q.quote});return E(),ie}var ge=J(W);return ne(ge),E(),ge}function v(W,Q=W.start){var ie=Q.comments_before;const ge=o.get(Q);for(var Oe=ge??ie.length;--Oe>=0;){var We=ie[Oe];if(/[@#]__/.test(We.value)){if(/[@#]__PURE__/.test(We.value)){set_annotation(W,_PURE);break}if(/[@#]__INLINE__/.test(We.value)){set_annotation(W,_INLINE);break}if(/[@#]__NOINLINE__/.test(We.value)){set_annotation(W,_NOINLINE);break}if(/[@#]__KEY__/.test(We.value)){set_annotation(W,_KEY);break}if(/[@#]__MANGLE_PROP__/.test(We.value)){set_annotation(W,_MANGLEPROP);break}}}return W}var T=function(W,Q,ie){var ge=W.start;if(l("punc",".")){E(),l("privatename")&&!s.in_class&&N("Private field must be used in an enclosing class");const Ye=l("privatename")?AST_DotHash:AST_Dot;return v(T(new Ye({start:ge,expression:W,optional:!1,property:H(),end:g()}),Q,ie))}if(l("punc","[")){E();var Oe=Je(!0);return k("]"),v(T(new AST_Sub({start:ge,expression:W,optional:!1,property:Oe,end:g()}),Q,ie))}if(Q&&l("punc","(")){E();var We=new AST_Call({start:ge,expression:W,optional:!1,args:_(),end:g()});return v(We),T(We,!0,ie)}if(l("punc","?.")){E();let Ye;if(Q&&l("punc","(")){E();const rt=new AST_Call({start:ge,optional:!0,expression:W,args:_(),end:g()});v(rt),Ye=T(rt,!0,!0)}else if(l("name")||l("privatename")){l("privatename")&&!s.in_class&&N("Private field must be used in an enclosing class");const rt=l("privatename")?AST_DotHash:AST_Dot;Ye=v(T(new rt({start:ge,expression:W,optional:!0,property:H(),end:g()}),Q,!0))}else if(l("punc","[")){E();const rt=Je(!0);k("]"),Ye=v(T(new AST_Sub({start:ge,expression:W,optional:!0,property:rt,end:g()}),Q,!0))}return Ye||w(),Ye instanceof AST_Chain?Ye:new AST_Chain({start:ge,expression:Ye,end:g()})}return l("template_head")?(ie&&w(),T(new AST_PrefixedTemplateString({start:ge,prefix:W,template_string:et(),end:g()}),Q)):W};function _(){for(var W=[];!l("punc",")");)l("expand","...")?(E(),W.push(new AST_Expansion({start:g(),expression:Je(!1),end:g()}))):W.push(Je(!1)),l("punc",")")||k(",");return E(),W}var c=function(W,Q){var ie=s.token;if(ie.type=="name"&&ie.value=="await"&&d())return E(),Be();if(l("operator")&&UNARY_PREFIX.has(ie.value)){E(),G();var ge=A(AST_UnaryPrefix,ie,c(W));return ge.start=ie,ge.end=g(),ge}for(var Oe=He(W,Q);l("operator")&&UNARY_POSTFIX.has(s.token.value)&&!B(s.token);)Oe instanceof AST_Arrow&&w(),Oe=A(AST_UnaryPostfix,s.token,Oe),Oe.start=ie,Oe.end=s.token,E();return Oe};function A(W,Q,ie){var ge=Q.value;switch(ge){case"++":case"--":ee(ie)||N("Invalid use of "+ge+" operator",Q.line,Q.col,Q.pos);break;case"delete":ie instanceof AST_SymbolRef&&s.input.has_directive("use strict")&&N("Calling delete on expression not allowed in strict mode",ie.start.line,ie.start.col,ie.start.pos);break}return new W({operator:ge,expression:ie})}var M=function(W,Q,ie){var ge=l("operator")?s.token.value:null;ge=="in"&&ie&&(ge=null),ge=="**"&&W instanceof AST_UnaryPrefix&&!is_token(W.start,"punc","(")&&W.operator!=="--"&&W.operator!=="++"&&w(W.start);var Oe=ge!=null?PRECEDENCE[ge]:null;if(Oe!=null&&(Oe>Q||ge==="**"&&Q===Oe)){E();var We=Y(ie,Oe,!0);return M(new AST_Binary({start:W.start,left:W,operator:ge,right:We,end:We.end}),Q,ie)}return W};function Y(W,Q,ie,ge){if(!W&&Q<PRECEDENCE.in&&l("privatename")){s.in_class||N("Private field must be used in an enclosing class");const Oe=s.token,We=new AST_SymbolPrivateProperty({start:Oe,name:Oe.value,end:Oe});E(),R("operator","in");const Ye=new AST_PrivateIn({start:Oe,key:We,value:Y(W,PRECEDENCE.in,!0),end:g()});return M(Ye,0,W)}else return M(c(ie,ge),Q,W)}var q=function(W){var Q=s.token,ie=Y(W,0,!0,!0);if(l("operator","?")){E();var ge=Je(!1);return k(":"),new AST_Conditional({start:Q,condition:ie,consequent:ge,alternative:Je(!1,W),end:g()})}return ie};function ee(W){return W instanceof AST_PropAccess||W instanceof AST_SymbolRef}function xe(W){if(W instanceof AST_Object)W=new AST_Destructuring({start:W.start,names:W.properties.map(xe),is_array:!1,end:W.end});else if(W instanceof AST_Array){for(var Q=[],ie=0;ie<W.elements.length;ie++)W.elements[ie]instanceof AST_Expansion&&(ie+1!==W.elements.length&&x(W.elements[ie].start,"Spread must the be last element in destructuring array"),W.elements[ie].expression=xe(W.elements[ie].expression)),Q.push(xe(W.elements[ie]));W=new AST_Destructuring({start:W.start,names:Q,is_array:!0,end:W.end})}else W instanceof AST_ObjectProperty?W.value=xe(W.value):W instanceof AST_Assign&&(W=new AST_DefaultAssign({start:W.start,left:W.left,operator:"=",right:W.right,end:W.end}));return W}var ze=function(W){G();var Q=s.token;if(Q.type=="name"&&Q.value=="yield"){if(z())return E(),ke();s.input.has_directive("use strict")&&x(s.token,"Unexpected yield identifier inside strict mode")}var ie=q(W),ge=s.token.value;if(l("operator")&&ASSIGNMENT.has(ge)){if(ee(ie)||(ie=xe(ie))instanceof AST_Destructuring)return E(),new AST_Assign({start:Q,left:ie,operator:ge,right:ze(W),logical:LOGICAL_ASSIGNMENT.has(ge),end:g()});N("Invalid assignment")}return ie},at=function(W,Q){if(Q.length===1)return Q[0];if(Q.length>1)return new AST_Sequence({start:W,expressions:Q,end:f()});N("Invalid parenthesized expression")},Je=function(W,Q){for(var ie=s.token,ge=[];ge.push(ze(Q)),!(!W||!l("punc",","));)E(),W=!0;return at(ie,ge)};function Nt(W){++s.in_loop;var Q=W();return--s.in_loop,Q}return n.expression?Je(!0):(function(){var Q=s.token,ie=[];for(s.input.push_directives_stack(),n.module&&s.input.add_directive("use strict");!l("eof");)ie.push(p());s.input.pop_directives_stack();var ge=g(),Oe=n.toplevel;return Oe?(Oe.body=Oe.body.concat(ie),Oe.end=ge):Oe=new AST_Toplevel({start:Q,body:ie,end:ge}),TEMPLATE_RAWS=new Map,Oe})()}function DEFNODE(i,n,o,s,l=AST_Node){n?n=n.split(/\s+/):n=[];var f=n;l&&l.PROPS&&(n=n.concat(l.PROPS));const E=l&&Object.create(l.prototype);if(E&&(o.prototype=E,o.BASE=l),l&&l.SUBCLASSES.push(o),o.prototype.CTOR=o,o.prototype.constructor=o,o.PROPS=n||null,o.SELF_PROPS=f,o.SUBCLASSES=[],i&&(o.prototype.TYPE=o.TYPE=i),s)for(let g in s)HOP(s,g)&&(g[0]==="$"?o[g.substr(1)]=s[g]:o.prototype[g]=s[g]);return o.DEFMETHOD=function(g,N){this.prototype[g]=N},o}const has_tok_flag=(i,n)=>!!(i.flags&n),set_tok_flag=(i,n,o)=>{o?i.flags|=n:i.flags&=~n},TOK_FLAG_NLB=1,TOK_FLAG_QUOTE_SINGLE=2,TOK_FLAG_QUOTE_EXISTS=4,TOK_FLAG_TEMPLATE_END=8;class AST_Token{constructor(n,o,s,l,f,E,g,N,x){this.flags=E?1:0,this.type=n,this.value=o,this.line=s,this.col=l,this.pos=f,this.comments_before=g,this.comments_after=N,this.file=x,Object.seal(this)}[Symbol.for("nodejs.util.inspect.custom")](n,o){const s=E=>o.stylize(E,"special"),l=typeof this.value=="string"&&this.value.includes("`")?"'":"`",f=`${l}${this.value}${l}`;return`${s("[AST_Token")} ${f} at ${this.line}:${this.col}${s("]")}`}get nlb(){return has_tok_flag(this,TOK_FLAG_NLB)}set nlb(n){set_tok_flag(this,TOK_FLAG_NLB,n)}get quote(){return has_tok_flag(this,TOK_FLAG_QUOTE_EXISTS)?has_tok_flag(this,TOK_FLAG_QUOTE_SINGLE)?"'":'"':""}set quote(n){set_tok_flag(this,TOK_FLAG_QUOTE_SINGLE,n==="'"),set_tok_flag(this,TOK_FLAG_QUOTE_EXISTS,!!n)}get template_end(){return has_tok_flag(this,TOK_FLAG_TEMPLATE_END)}set template_end(n){set_tok_flag(this,TOK_FLAG_TEMPLATE_END,n)}}var AST_Node=DEFNODE("Node","start end",function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{_clone:function(i){if(i){var n=this.clone();return n.transform(new TreeTransformer(function(o){if(o!==n)return o.clone(!0)}))}return new this.CTOR(this)},clone:function(i){return this._clone(i)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},_walk:function(i){return i._visit(this)},walk:function(i){return this._walk(i)},_children_backwards:()=>{}},null),AST_Statement=DEFNODE("Statement",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class of all statements"}),AST_Debugger=DEFNODE("Debugger",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Represents a debugger statement"},AST_Statement),AST_Directive=DEFNODE("Directive","value quote",function(n){n&&(this.value=n.value,this.quote=n.quote,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:'Represents a directive, like "use strict";',$propdoc:{value:"[string] The value of this directive as a plain string (it's not an AST_String!)",quote:"[string] the original quote character"}},AST_Statement),AST_SimpleStatement=DEFNODE("SimpleStatement","body",function(n){n&&(this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_walk:function(i){return i._visit(this,function(){this.body._walk(i)})},_children_backwards(i){i(this.body)}},AST_Statement);function walk_body(i,n){const o=i.body;for(var s=0,l=o.length;s<l;s++)o[s]._walk(n)}function clone_block_scope(i){var n=this._clone(i);return this.block_scope&&(n.block_scope=this.block_scope.clone()),n}var AST_Block=DEFNODE("Block","body block_scope",function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements",block_scope:"[AST_Scope] the block scope"},_walk:function(i){return i._visit(this,function(){walk_body(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n])},clone:clone_block_scope},AST_Statement),AST_BlockStatement=DEFNODE("BlockStatement",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A block statement"},AST_Block),AST_EmptyStatement=DEFNODE("EmptyStatement",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The empty statement (empty block or simply a semicolon)"},AST_Statement),AST_StatementWithBody=DEFNODE("StatementWithBody","body",function(n){n&&(this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"}},AST_Statement),AST_LabeledStatement=DEFNODE("LabeledStatement","label",function(n){n&&(this.label=n.label,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_walk:function(i){return i._visit(this,function(){this.label._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),i(this.label)},clone:function(i){var n=this._clone(i);if(i){var o=n.label,s=this.label;n.walk(new TreeWalker(function(l){l instanceof AST_LoopControl&&l.label&&l.label.thedef===s&&(l.label.thedef=o,o.references.push(l))}))}return n}},AST_StatementWithBody),AST_IterationStatement=DEFNODE("IterationStatement","block_scope",function(n){n&&(this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Internal class.  All loops inherit from it.",$propdoc:{block_scope:"[AST_Scope] the block scope for this iteration statement."},clone:clone_block_scope},AST_StatementWithBody),AST_DWLoop=DEFNODE("DWLoop","condition",function(n){n&&(this.condition=n.condition,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"}},AST_IterationStatement),AST_Do=DEFNODE("Do",null,function(n){n&&(this.condition=n.condition,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `do` statement",_walk:function(i){return i._visit(this,function(){this.body._walk(i),this.condition._walk(i)})},_children_backwards(i){i(this.condition),i(this.body)}},AST_DWLoop),AST_While=DEFNODE("While",null,function(n){n&&(this.condition=n.condition,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `while` statement",_walk:function(i){return i._visit(this,function(){this.condition._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),i(this.condition)}},AST_DWLoop),AST_For=DEFNODE("For","init condition step",function(n){n&&(this.init=n.init,this.condition=n.condition,this.step=n.step,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_walk:function(i){return i._visit(this,function(){this.init&&this.init._walk(i),this.condition&&this.condition._walk(i),this.step&&this.step._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),this.step&&i(this.step),this.condition&&i(this.condition),this.init&&i(this.init)}},AST_IterationStatement),AST_ForIn=DEFNODE("ForIn","init object",function(n){n&&(this.init=n.init,this.object=n.object,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `for ... in` statement",$propdoc:{init:"[AST_Node] the `for/in` initialization code",object:"[AST_Node] the object that we're looping through"},_walk:function(i){return i._visit(this,function(){this.init._walk(i),this.object._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),this.object&&i(this.object),this.init&&i(this.init)}},AST_IterationStatement),AST_ForOf=DEFNODE("ForOf","await",function(n){n&&(this.await=n.await,this.init=n.init,this.object=n.object,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `for ... of` statement"},AST_ForIn),AST_With=DEFNODE("With","expression",function(n){n&&(this.expression=n.expression,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),i(this.expression)}},AST_StatementWithBody),AST_Scope=DEFNODE("Scope","variables uses_with uses_eval parent_scope enclosed cname",function(n){n&&(this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{variables:"[Map/S] a map of name -> SymbolDef for all variables/functions defined in this scope",uses_with:"[boolean/S] tells whether this scope uses the `with` statement",uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",parent_scope:"[AST_Scope?/S] link to the parent scope",enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",cname:"[integer/S] current index for mangling variables (used internally by the mangler)"},get_defun_scope:function(){for(var i=this;i.is_block_scope();)i=i.parent_scope;return i},clone:function(i,n){var o=this._clone(i);return i&&this.variables&&n&&!this._block_scope?o.figure_out_scope({},{toplevel:n,parent_scope:this.parent_scope}):(this.variables&&(o.variables=new Map(this.variables)),this.enclosed&&(o.enclosed=this.enclosed.slice()),this._block_scope&&(o._block_scope=this._block_scope)),o},pinned:function(){return this.uses_eval||this.uses_with}},AST_Block),AST_Toplevel=DEFNODE("Toplevel","globals",function(n){n&&(this.globals=n.globals,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The toplevel scope",$propdoc:{globals:"[Map/S] a map of name -> SymbolDef for all undeclared names"},wrap_commonjs:function(i){var n=this.body,o="(function(exports){'$ORIG';})(typeof "+i+"=='undefined'?("+i+"={}):"+i+");";return o=parse$1(o),o=o.transform(new TreeTransformer(function(s){if(s instanceof AST_Directive&&s.value=="$ORIG")return MAP.splice(n)})),o},wrap_enclose:function(i){typeof i!="string"&&(i="");var n=i.indexOf(":");n<0&&(n=i.length);var o=this.body;return parse$1(["(function(",i.slice(0,n),'){"$ORIG"})(',i.slice(n+1),")"].join("")).transform(new TreeTransformer(function(s){if(s instanceof AST_Directive&&s.value=="$ORIG")return MAP.splice(o)}))}},AST_Scope),AST_Expansion=DEFNODE("Expansion","expression",function(n){n&&(this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An expandible argument, such as ...rest, a splat, such as [1,2,...all], or an expansion in a variable declaration, such as var [first, ...rest] = list",$propdoc:{expression:"[AST_Node] the thing to be expanded"},_walk:function(i){return i._visit(this,function(){this.expression.walk(i)})},_children_backwards(i){i(this.expression)}}),AST_Lambda=DEFNODE("Lambda","name argnames uses_arguments is_generator async",function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for functions",$propdoc:{name:"[AST_SymbolDeclaration?] the name of this function",argnames:"[AST_SymbolFunarg|AST_Destructuring|AST_Expansion|AST_DefaultAssign*] array of function arguments, destructurings, or expanding arguments",uses_arguments:"[boolean/S] tells whether this function accesses the arguments array",is_generator:"[boolean] is this a generator method",async:"[boolean] is this method async"},args_as_names:function(){for(var i=[],n=0;n<this.argnames.length;n++)this.argnames[n]instanceof AST_Destructuring?i.push(...this.argnames[n].all_symbols()):i.push(this.argnames[n]);return i},_walk:function(i){return i._visit(this,function(){this.name&&this.name._walk(i);for(var n=this.argnames,o=0,s=n.length;o<s;o++)n[o]._walk(i);walk_body(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n]);for(n=this.argnames.length;n--;)i(this.argnames[n]);this.name&&i(this.name)},is_braceless(){return this.body[0]instanceof AST_Return&&this.body[0].value},length_property(){let i=0;for(const n of this.argnames)(n instanceof AST_SymbolFunarg||n instanceof AST_Destructuring)&&i++;return i}},AST_Scope),AST_Accessor=DEFNODE("Accessor",null,function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A setter/getter function.  The `name` property is always null."},AST_Lambda),AST_Function=DEFNODE("Function",null,function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A function expression"},AST_Lambda),AST_Arrow=DEFNODE("Arrow",null,function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An ES6 Arrow function ((a) => b)"},AST_Lambda),AST_Defun=DEFNODE("Defun",null,function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A function definition"},AST_Lambda),AST_Destructuring=DEFNODE("Destructuring","names is_array",function(n){n&&(this.names=n.names,this.is_array=n.is_array,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A destructuring of several names. Used in destructuring assignment and with destructuring function argument names",$propdoc:{names:"[AST_Node*] Array of properties or elements",is_array:"[Boolean] Whether the destructuring represents an object or array"},_walk:function(i){return i._visit(this,function(){this.names.forEach(function(n){n._walk(i)})})},_children_backwards(i){let n=this.names.length;for(;n--;)i(this.names[n])},all_symbols:function(){var i=[];return walk(this,n=>{if(n instanceof AST_SymbolDeclaration&&i.push(n),n instanceof AST_Lambda)return!0}),i}}),AST_PrefixedTemplateString=DEFNODE("PrefixedTemplateString","template_string prefix",function(n){n&&(this.template_string=n.template_string,this.prefix=n.prefix,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A templatestring with a prefix, such as String.raw`foobarbaz`",$propdoc:{template_string:"[AST_TemplateString] The template string",prefix:"[AST_Node] The prefix, which will get called."},_walk:function(i){return i._visit(this,function(){this.prefix._walk(i),this.template_string._walk(i)})},_children_backwards(i){i(this.template_string),i(this.prefix)}}),AST_TemplateString=DEFNODE("TemplateString","segments",function(n){n&&(this.segments=n.segments,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A template string literal",$propdoc:{segments:"[AST_Node*] One or more segments, starting with AST_TemplateSegment. AST_Node may follow AST_TemplateSegment, but each AST_Node must be followed by AST_TemplateSegment."},_walk:function(i){return i._visit(this,function(){this.segments.forEach(function(n){n._walk(i)})})},_children_backwards(i){let n=this.segments.length;for(;n--;)i(this.segments[n])}}),AST_TemplateSegment=DEFNODE("TemplateSegment","value raw",function(n){n&&(this.value=n.value,this.raw=n.raw,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A segment of a template string literal",$propdoc:{value:"Content of the segment",raw:"Raw source of the segment"}}),AST_Jump=DEFNODE("Jump",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)"},AST_Statement),AST_Exit=DEFNODE("Exit","value",function(n){n&&(this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_walk:function(i){return i._visit(this,this.value&&function(){this.value._walk(i)})},_children_backwards(i){this.value&&i(this.value)}},AST_Jump),AST_Return=DEFNODE("Return",null,function(n){n&&(this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `return` statement"},AST_Exit),AST_Throw=DEFNODE("Throw",null,function(n){n&&(this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `throw` statement"},AST_Exit),AST_LoopControl=DEFNODE("LoopControl","label",function(n){n&&(this.label=n.label,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_walk:function(i){return i._visit(this,this.label&&function(){this.label._walk(i)})},_children_backwards(i){this.label&&i(this.label)}},AST_Jump),AST_Break=DEFNODE("Break",null,function(n){n&&(this.label=n.label,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `break` statement"},AST_LoopControl),AST_Continue=DEFNODE("Continue",null,function(n){n&&(this.label=n.label,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `continue` statement"},AST_LoopControl),AST_Await=DEFNODE("Await","expression",function(n){n&&(this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An `await` statement",$propdoc:{expression:"[AST_Node] the mandatory expression being awaited"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}}),AST_Yield=DEFNODE("Yield","expression is_star",function(n){n&&(this.expression=n.expression,this.is_star=n.is_star,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `yield` statement",$propdoc:{expression:"[AST_Node?] the value returned or thrown by this statement; could be null (representing undefined) but only when is_star is set to false",is_star:"[Boolean] Whether this is a yield or yield* statement"},_walk:function(i){return i._visit(this,this.expression&&function(){this.expression._walk(i)})},_children_backwards(i){this.expression&&i(this.expression)}}),AST_If=DEFNODE("If","condition alternative",function(n){n&&(this.condition=n.condition,this.alternative=n.alternative,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_walk:function(i){return i._visit(this,function(){this.condition._walk(i),this.body._walk(i),this.alternative&&this.alternative._walk(i)})},_children_backwards(i){this.alternative&&i(this.alternative),i(this.body),i(this.condition)}},AST_StatementWithBody),AST_Switch=DEFNODE("Switch","expression",function(n){n&&(this.expression=n.expression,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i),walk_body(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n]);i(this.expression)}},AST_Block),AST_SwitchBranch=DEFNODE("SwitchBranch",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for `switch` branches"},AST_Block),AST_Default=DEFNODE("Default",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `default` switch branch"},AST_SwitchBranch),AST_Case=DEFNODE("Case","expression",function(n){n&&(this.expression=n.expression,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i),walk_body(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n]);i(this.expression)}},AST_SwitchBranch),AST_Try=DEFNODE("Try","body bcatch bfinally",function(n){n&&(this.body=n.body,this.bcatch=n.bcatch,this.bfinally=n.bfinally,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `try` statement",$propdoc:{body:"[AST_TryBlock] the try block",bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_walk:function(i){return i._visit(this,function(){this.body._walk(i),this.bcatch&&this.bcatch._walk(i),this.bfinally&&this.bfinally._walk(i)})},_children_backwards(i){this.bfinally&&i(this.bfinally),this.bcatch&&i(this.bcatch),i(this.body)}},AST_Statement),AST_TryBlock=DEFNODE("TryBlock",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `try` block of a try statement"},AST_Block),AST_Catch=DEFNODE("Catch","argname",function(n){n&&(this.argname=n.argname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[AST_SymbolCatch|AST_Destructuring|AST_Expansion|AST_DefaultAssign] symbol for the exception"},_walk:function(i){return i._visit(this,function(){this.argname&&this.argname._walk(i),walk_body(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n]);this.argname&&i(this.argname)}},AST_Block),AST_Finally=DEFNODE("Finally",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},AST_Block),AST_DefinitionsLike=DEFNODE("DefinitionsLike","definitions",function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for variable definitions and `using`",$propdoc:{definitions:"[AST_VarDef*|AST_UsingDef*] array of variable definitions"},_walk:function(i){return i._visit(this,function(){for(var n=this.definitions,o=0,s=n.length;o<s;o++)n[o]._walk(i)})},_children_backwards(i){let n=this.definitions.length;for(;n--;)i(this.definitions[n])}},AST_Statement),AST_Definitions=DEFNODE("Definitions",null,function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for `var` or `const` nodes (variable declarations/initializations)"},AST_DefinitionsLike),AST_Var=DEFNODE("Var",null,function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `var` statement"},AST_Definitions),AST_Let=DEFNODE("Let",null,function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `let` statement"},AST_Definitions),AST_Const=DEFNODE("Const",null,function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `const` statement"},AST_Definitions),AST_Using=DEFNODE("Using","await",function(n){n&&(this.await=n.await,this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `using` statement",$propdoc:{await:"[boolean] Whether it's `await using`"}},AST_DefinitionsLike),AST_VarDefLike=DEFNODE("VarDefLike","name value",function(n){n&&(this.name=n.name,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A name=value pair in a variable definition statement or `using`",$propdoc:{name:"[AST_Destructuring|AST_SymbolDeclaration] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_walk:function(i){return i._visit(this,function(){this.name._walk(i),this.value&&this.value._walk(i)})},_children_backwards(i){this.value&&i(this.value),i(this.name)},declarations_as_names(){return this.name instanceof AST_SymbolDeclaration?[this.name]:this.name.all_symbols()}}),AST_VarDef=DEFNODE("VarDef",null,function(n){n&&(this.name=n.name,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A variable declaration; only appears in a AST_Definitions node"},AST_VarDefLike),AST_UsingDef=DEFNODE("UsingDef",null,function(n){n&&(this.name=n.name,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Like VarDef but specific to AST_Using"},AST_VarDefLike),AST_NameMapping=DEFNODE("NameMapping","foreign_name name",function(n){n&&(this.foreign_name=n.foreign_name,this.name=n.name,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The part of the export/import statement that declare names from a module.",$propdoc:{foreign_name:"[AST_SymbolExportForeign|AST_SymbolImportForeign] The name being exported/imported (as specified in the module)",name:"[AST_SymbolExport|AST_SymbolImport] The name as it is visible to this module."},_walk:function(i){return i._visit(this,function(){this.foreign_name._walk(i),this.name._walk(i)})},_children_backwards(i){i(this.name),i(this.foreign_name)}}),AST_Import=DEFNODE("Import","imported_name imported_names module_name attributes",function(n){n&&(this.imported_name=n.imported_name,this.imported_names=n.imported_names,this.module_name=n.module_name,this.attributes=n.attributes,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An `import` statement",$propdoc:{imported_name:"[AST_SymbolImport] The name of the variable holding the module's default export.",imported_names:"[AST_NameMapping*] The names of non-default imported variables",module_name:"[AST_String] String literal describing where this module came from",attributes:"[AST_Object?] The import attributes (with {...})"},_walk:function(i){return i._visit(this,function(){this.imported_name&&this.imported_name._walk(i),this.imported_names&&this.imported_names.forEach(function(n){n._walk(i)}),this.module_name._walk(i)})},_children_backwards(i){if(i(this.module_name),this.imported_names){let n=this.imported_names.length;for(;n--;)i(this.imported_names[n])}this.imported_name&&i(this.imported_name)}}),AST_ImportMeta=DEFNODE("ImportMeta",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A reference to import.meta"}),AST_Export=DEFNODE("Export","exported_definition exported_value is_default exported_names module_name attributes",function(n){n&&(this.exported_definition=n.exported_definition,this.exported_value=n.exported_value,this.is_default=n.is_default,this.exported_names=n.exported_names,this.module_name=n.module_name,this.attributes=n.attributes,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An `export` statement",$propdoc:{exported_definition:"[AST_Defun|AST_Definitions|AST_DefClass?] An exported definition",exported_value:"[AST_Node?] An exported value",exported_names:"[AST_NameMapping*?] List of exported names",module_name:"[AST_String?] Name of the file to load exports from",is_default:"[Boolean] Whether this is the default exported value of this module",attributes:"[AST_Object?] The import attributes"},_walk:function(i){return i._visit(this,function(){this.exported_definition&&this.exported_definition._walk(i),this.exported_value&&this.exported_value._walk(i),this.exported_names&&this.exported_names.forEach(function(n){n._walk(i)}),this.module_name&&this.module_name._walk(i)})},_children_backwards(i){if(this.module_name&&i(this.module_name),this.exported_names){let n=this.exported_names.length;for(;n--;)i(this.exported_names[n])}this.exported_value&&i(this.exported_value),this.exported_definition&&i(this.exported_definition)}},AST_Statement),AST_Call=DEFNODE("Call","expression args optional _annotations",function(n){n&&(this.expression=n.expression,this.args=n.args,this.optional=n.optional,this._annotations=n._annotations,this.start=n.start,this.end=n.end,this.initialize()),this.flags=0},{$documentation:"A function call expression",$propdoc:{expression:"[AST_Node] expression to invoke as function",args:"[AST_Node*] array of arguments",optional:"[boolean] whether this is an optional call (IE ?.() )",_annotations:"[number] bitfield containing information about the call"},initialize(){this._annotations==null&&(this._annotations=0)},_walk(i){return i._visit(this,function(){for(var n=this.args,o=0,s=n.length;o<s;o++)n[o]._walk(i);this.expression._walk(i)})},_children_backwards(i){let n=this.args.length;for(;n--;)i(this.args[n]);i(this.expression)}}),AST_New=DEFNODE("New",null,function(n){n&&(this.expression=n.expression,this.args=n.args,this.optional=n.optional,this._annotations=n._annotations,this.start=n.start,this.end=n.end,this.initialize()),this.flags=0},{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties"},AST_Call),AST_Sequence=DEFNODE("Sequence","expressions",function(n){n&&(this.expressions=n.expressions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_walk:function(i){return i._visit(this,function(){this.expressions.forEach(function(n){n._walk(i)})})},_children_backwards(i){let n=this.expressions.length;for(;n--;)i(this.expressions[n])}}),AST_PropAccess=DEFNODE("PropAccess","expression property optional",function(n){n&&(this.expression=n.expression,this.property=n.property,this.optional=n.optional,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",property:"[AST_Node|string] the property to access.  For AST_Dot & AST_DotHash this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",optional:"[boolean] whether this is an optional property access (IE ?.)"}}),AST_Dot=DEFNODE("Dot","quote",function(n){n&&(this.quote=n.quote,this.expression=n.expression,this.property=n.property,this.optional=n.optional,this._annotations=n._annotations,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A dotted property access expression",$propdoc:{quote:"[string] the original quote character when transformed from AST_Sub"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}},AST_PropAccess),AST_DotHash=DEFNODE("DotHash","",function(n){n&&(this.expression=n.expression,this.property=n.property,this.optional=n.optional,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A dotted property access to a private property",_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}},AST_PropAccess),AST_Sub=DEFNODE("Sub",null,function(n){n&&(this.expression=n.expression,this.property=n.property,this.optional=n.optional,this._annotations=n._annotations,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:'Index-style property access, i.e. `a["foo"]`',_walk:function(i){return i._visit(this,function(){this.expression._walk(i),this.property._walk(i)})},_children_backwards(i){i(this.property),i(this.expression)}},AST_PropAccess),AST_Chain=DEFNODE("Chain","expression",function(n){n&&(this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A chain expression like a?.b?.(c)?.[d]",$propdoc:{expression:"[AST_Call|AST_Dot|AST_DotHash|AST_Sub] chain element."},_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}}),AST_Unary=DEFNODE("Unary","operator expression",function(n){n&&(this.operator=n.operator,this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}}),AST_UnaryPrefix=DEFNODE("UnaryPrefix",null,function(n){n&&(this.operator=n.operator,this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},AST_Unary),AST_UnaryPostfix=DEFNODE("UnaryPostfix",null,function(n){n&&(this.operator=n.operator,this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Unary postfix expression, i.e. `i++`"},AST_Unary),AST_Binary=DEFNODE("Binary","operator left right",function(n){n&&(this.operator=n.operator,this.left=n.left,this.right=n.right,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_walk:function(i){return i._visit(this,function(){this.left._walk(i),this.right._walk(i)})},_children_backwards(i){i(this.right),i(this.left)}}),AST_Conditional=DEFNODE("Conditional","condition consequent alternative",function(n){n&&(this.condition=n.condition,this.consequent=n.consequent,this.alternative=n.alternative,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_walk:function(i){return i._visit(this,function(){this.condition._walk(i),this.consequent._walk(i),this.alternative._walk(i)})},_children_backwards(i){i(this.alternative),i(this.consequent),i(this.condition)}}),AST_Assign=DEFNODE("Assign","logical",function(n){n&&(this.logical=n.logical,this.operator=n.operator,this.left=n.left,this.right=n.right,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An assignment expression — `a = b + 5`",$propdoc:{logical:"Whether it's a logical assignment"}},AST_Binary),AST_DefaultAssign=DEFNODE("DefaultAssign",null,function(n){n&&(this.operator=n.operator,this.left=n.left,this.right=n.right,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A default assignment expression like in `(a = 3) => a`"},AST_Binary),AST_Array=DEFNODE("Array","elements",function(n){n&&(this.elements=n.elements,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_walk:function(i){return i._visit(this,function(){for(var n=this.elements,o=0,s=n.length;o<s;o++)n[o]._walk(i)})},_children_backwards(i){let n=this.elements.length;for(;n--;)i(this.elements[n])}}),AST_Object=DEFNODE("Object","properties",function(n){n&&(this.properties=n.properties,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An object literal",$propdoc:{properties:"[AST_ObjectProperty*] array of properties"},_walk:function(i){return i._visit(this,function(){for(var n=this.properties,o=0,s=n.length;o<s;o++)n[o]._walk(i)})},_children_backwards(i){let n=this.properties.length;for(;n--;)i(this.properties[n])}}),AST_ObjectProperty=DEFNODE("ObjectProperty","key value",function(n){n&&(this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name. For ObjectKeyVal this is a string. For getters, setters and computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters, setters and methods this is an AST_Accessor."},_walk:function(i){return i._visit(this,function(){this.key instanceof AST_Node&&this.key._walk(i),this.value._walk(i)})},_children_backwards(i){i(this.value),this.key instanceof AST_Node&&i(this.key)}}),AST_ObjectKeyVal=DEFNODE("ObjectKeyVal","quote",function(n){n&&(this.quote=n.quote,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$documentation:"A key: value object property",$propdoc:{quote:"[string] the original quote character"},computed_key(){return this.key instanceof AST_Node}},AST_ObjectProperty),AST_PrivateSetter=DEFNODE("PrivateSetter","static",function(n){n&&(this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$propdoc:{static:"[boolean] whether this is a static private setter"},$documentation:"A private setter property",computed_key(){return!1}},AST_ObjectProperty),AST_PrivateGetter=DEFNODE("PrivateGetter","static",function(n){n&&(this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$propdoc:{static:"[boolean] whether this is a static private getter"},$documentation:"A private getter property",computed_key(){return!1}},AST_ObjectProperty),AST_ObjectSetter=DEFNODE("ObjectSetter","quote static",function(n){n&&(this.quote=n.quote,this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] whether this is a static setter (classes only)"},$documentation:"An object setter property",computed_key(){return!(this.key instanceof AST_SymbolMethod)}},AST_ObjectProperty),AST_ObjectGetter=DEFNODE("ObjectGetter","quote static",function(n){n&&(this.quote=n.quote,this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] whether this is a static getter (classes only)"},$documentation:"An object getter property",computed_key(){return!(this.key instanceof AST_SymbolMethod)}},AST_ObjectProperty),AST_ConciseMethod=DEFNODE("ConciseMethod","quote static",function(n){n&&(this.quote=n.quote,this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] is this method static (classes only)"},$documentation:"An ES6 concise method inside an object or class",computed_key(){return!(this.key instanceof AST_SymbolMethod)}},AST_ObjectProperty),AST_PrivateMethod=DEFNODE("PrivateMethod","static",function(n){n&&(this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A private class method inside a class",$propdoc:{static:"[boolean] is this a static private method"},computed_key(){return!1}},AST_ObjectProperty),AST_Class=DEFNODE("Class","name extends properties",function(n){n&&(this.name=n.name,this.extends=n.extends,this.properties=n.properties,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$propdoc:{name:"[AST_SymbolClass|AST_SymbolDefClass?] optional class name.",extends:"[AST_Node]? optional parent class",properties:"[AST_ObjectProperty|AST_ClassStaticBlock]* array of properties or static blocks"},$documentation:"An ES6 class",_walk:function(i){return i._visit(this,function(){this.name&&this.name._walk(i),this.extends&&this.extends._walk(i),this.properties.forEach(n=>n._walk(i))})},_children_backwards(i){let n=this.properties.length;for(;n--;)i(this.properties[n]);this.extends&&i(this.extends),this.name&&i(this.name)},visit_nondeferred_class_parts(i){this.extends&&this.extends._walk(i),this.properties.forEach(n=>{if(n instanceof AST_ClassStaticBlock){n._walk(i);return}n.computed_key()&&(i.push(n),n.key._walk(i),i.pop()),(n instanceof AST_ClassPrivateProperty&&n.static&&n.value||n instanceof AST_ClassProperty&&n.static&&n.value)&&(i.push(n),n.value._walk(i),i.pop())})},visit_deferred_class_parts(i){this.properties.forEach(n=>{n instanceof AST_ConciseMethod||n instanceof AST_PrivateMethod?n.walk(i):(n instanceof AST_ClassProperty&&!n.static&&n.value||n instanceof AST_ClassPrivateProperty&&!n.static&&n.value)&&(i.push(n),n.value._walk(i),i.pop())})},is_self_referential:function(){const i=this.name&&this.name.definition().id;let n=!1,o=!0;return this.visit_nondeferred_class_parts(new TreeWalker((s,l)=>{if(n)return!0;if(s instanceof AST_This)return n=o;if(s instanceof AST_SymbolRef)return n=s.definition().id===i;if(s instanceof AST_Lambda&&!(s instanceof AST_Arrow)){const f=o;return o=!1,l(),o=f,!0}})),n}},AST_Scope),AST_ClassProperty=DEFNODE("ClassProperty","static quote",function(n){n&&(this.static=n.static,this.quote=n.quote,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$documentation:"A class property",$propdoc:{static:"[boolean] whether this is a static key",quote:"[string] which quote is being used"},_walk:function(i){return i._visit(this,function(){this.key instanceof AST_Node&&this.key._walk(i),this.value instanceof AST_Node&&this.value._walk(i)})},_children_backwards(i){this.value instanceof AST_Node&&i(this.value),this.key instanceof AST_Node&&i(this.key)},computed_key(){return!(this.key instanceof AST_SymbolClassProperty)}},AST_ObjectProperty),AST_ClassPrivateProperty=DEFNODE("ClassPrivateProperty","",function(n){n&&(this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A class property for a private property",_walk:function(i){return i._visit(this,function(){this.value instanceof AST_Node&&this.value._walk(i)})},_children_backwards(i){this.value instanceof AST_Node&&i(this.value)},computed_key(){return!1}},AST_ObjectProperty),AST_PrivateIn=DEFNODE("PrivateIn","key value",function(n){n&&(this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An `in` binop when the key is private, eg #x in this",_walk:function(i){return i._visit(this,function(){this.key._walk(i),this.value._walk(i)})},_children_backwards(i){i(this.value),i(this.key)}}),AST_DefClass=DEFNODE("DefClass",null,function(n){n&&(this.name=n.name,this.extends=n.extends,this.properties=n.properties,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A class definition"},AST_Class),AST_ClassStaticBlock=DEFNODE("ClassStaticBlock","body block_scope",function(n){this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end},{$documentation:"A block containing statements to be executed in the context of the class",$propdoc:{body:"[AST_Statement*] an array of statements"},_walk:function(i){return i._visit(this,function(){walk_body(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n])},clone:clone_block_scope,computed_key(){return!1}},AST_Scope),AST_ClassExpression=DEFNODE("ClassExpression",null,function(n){n&&(this.name=n.name,this.extends=n.extends,this.properties=n.properties,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A class expression."},AST_Class),AST_Symbol=DEFNODE("Symbol","scope name thedef",function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},$documentation:"Base class for all symbols"}),AST_NewTarget=DEFNODE("NewTarget",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A reference to new.target"}),AST_SymbolDeclaration=DEFNODE("SymbolDeclaration","init",function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A declaration symbol (symbol in var/const, function name or argument, symbol in catch)"},AST_Symbol),AST_SymbolVar=DEFNODE("SymbolVar",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol defining a variable"},AST_SymbolDeclaration),AST_SymbolBlockDeclaration=DEFNODE("SymbolBlockDeclaration",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for block-scoped declaration symbols"},AST_SymbolDeclaration),AST_SymbolConst=DEFNODE("SymbolConst",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A constant declaration"},AST_SymbolBlockDeclaration),AST_SymbolUsing=DEFNODE("SymbolUsing",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `using` declaration"},AST_SymbolBlockDeclaration),AST_SymbolLet=DEFNODE("SymbolLet",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A block-scoped `let` declaration"},AST_SymbolBlockDeclaration),AST_SymbolFunarg=DEFNODE("SymbolFunarg",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming a function argument"},AST_SymbolVar),AST_SymbolDefun=DEFNODE("SymbolDefun",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol defining a function"},AST_SymbolDeclaration),AST_SymbolMethod=DEFNODE("SymbolMethod",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol in an object defining a method"},AST_Symbol),AST_SymbolClassProperty=DEFNODE("SymbolClassProperty",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol for a class property"},AST_Symbol),AST_SymbolLambda=DEFNODE("SymbolLambda",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming a function expression"},AST_SymbolDeclaration),AST_SymbolDefClass=DEFNODE("SymbolDefClass",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming a class's name in a class declaration. Lexically scoped to its containing scope, and accessible within the class."},AST_SymbolBlockDeclaration),AST_SymbolClass=DEFNODE("SymbolClass",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming a class's name. Lexically scoped to the class."},AST_SymbolDeclaration),AST_SymbolCatch=DEFNODE("SymbolCatch",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming the exception in catch"},AST_SymbolBlockDeclaration),AST_SymbolImport=DEFNODE("SymbolImport",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol referring to an imported name"},AST_SymbolBlockDeclaration),AST_SymbolImportForeign=DEFNODE("SymbolImportForeign","quote",function(n){n&&(this.quote=n.quote,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A symbol imported from a module, but it is defined in the other module, and its real name is irrelevant for this module's purposes"},AST_Symbol),AST_Label=DEFNODE("Label","references",function(n){n&&(this.references=n.references,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end,this.initialize()),this.flags=0},{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},AST_Symbol),AST_SymbolRef=DEFNODE("SymbolRef",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Reference to some symbol (not definition/declaration)"},AST_Symbol),AST_SymbolExport=DEFNODE("SymbolExport","quote",function(n){n&&(this.quote=n.quote,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol referring to a name to export"},AST_SymbolRef),AST_SymbolExportForeign=DEFNODE("SymbolExportForeign","quote",function(n){n&&(this.quote=n.quote,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A symbol exported from this module, but it is used in the other module, and its real name is irrelevant for this module's purposes"},AST_Symbol),AST_LabelRef=DEFNODE("LabelRef",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Reference to a label symbol"},AST_Symbol),AST_SymbolPrivateProperty=DEFNODE("SymbolPrivateProperty",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A symbol that refers to a private property"},AST_Symbol),AST_This=DEFNODE("This",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `this` symbol"},AST_Symbol),AST_Super=DEFNODE("Super",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `super` symbol"},AST_This),AST_Constant=DEFNODE("Constant",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for all constants",getValue:function(){return this.value}}),AST_String=DEFNODE("String","value quote",function(n){n&&(this.value=n.value,this.quote=n.quote,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$documentation:"A string literal",$propdoc:{value:"[string] the contents of this string",quote:"[string] the original quote character"}},AST_Constant),AST_Number=DEFNODE("Number","value raw",function(n){n&&(this.value=n.value,this.raw=n.raw,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value",raw:"[string] numeric value as string"}},AST_Constant),AST_BigInt=DEFNODE("BigInt","value raw",function(n){n&&(this.value=n.value,this.raw=n.raw,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A big int literal",$propdoc:{value:"[string] big int value, represented as a string",raw:"[string] the original format preserved"}},AST_Constant),AST_RegExp=DEFNODE("RegExp","value",function(n){n&&(this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"}},AST_Constant),AST_Atom=DEFNODE("Atom",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for atoms"},AST_Constant),AST_Null=DEFNODE("Null",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `null` atom",value:null},AST_Atom),AST_NaN=DEFNODE("NaN",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The impossible value",value:NaN},AST_Atom),AST_Undefined=DEFNODE("Undefined",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `undefined` value",value:(function(){})()},AST_Atom),AST_Hole=DEFNODE("Hole",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A hole in an array",value:(function(){})()},AST_Atom),AST_Infinity=DEFNODE("Infinity",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `Infinity` value",value:1/0},AST_Atom),AST_Boolean=DEFNODE("Boolean",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for booleans"},AST_Atom),AST_False=DEFNODE("False",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `false` atom",value:!1},AST_Boolean),AST_True=DEFNODE("True",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `true` atom",value:!0},AST_Boolean);function walk(i,n,o=[i]){const s=o.push.bind(o);for(;o.length;){const l=o.pop(),f=n(l,o);if(f){if(f===walk_abort)return!0;continue}l._children_backwards(s)}return!1}function walk_parent(i,n,o){const s=[i],l=s.push.bind(s),f=o?o.slice():[],E=[];let g;const N={parent:(x=0)=>x===-1?g:o&&x>=f.length?(x-=f.length,o[o.length-(x+1)]):f[f.length-(1+x)]};for(;s.length;){for(g=s.pop();E.length&&s.length==E[E.length-1];)f.pop(),E.pop();const x=n(g,N);if(x){if(x===walk_abort)return!0;continue}const w=s.length;g._children_backwards(l),s.length>w&&(f.push(g),E.push(w-1))}return!1}const walk_abort=Symbol("abort walk");class TreeWalker{constructor(n){this.visit=n,this.stack=[],this.directives=Object.create(null)}_visit(n,o){this.push(n);var s=this.visit(n,o?function(){o.call(n)}:noop);return!s&&o&&o.call(n),this.pop(),s}parent(n){return this.stack[this.stack.length-2-(n||0)]}push(n){n instanceof AST_Lambda?this.directives=Object.create(this.directives):n instanceof AST_Directive&&!this.directives[n.value]?this.directives[n.value]=n:n instanceof AST_Class&&(this.directives=Object.create(this.directives),this.directives["use strict"]||(this.directives["use strict"]=n)),this.stack.push(n)}pop(){var n=this.stack.pop();(n instanceof AST_Lambda||n instanceof AST_Class)&&(this.directives=Object.getPrototypeOf(this.directives))}self(){return this.stack[this.stack.length-1]}find_parent(n){for(var o=this.stack,s=o.length;--s>=0;){var l=o[s];if(l instanceof n)return l}}is_within_loop(){let n=this.stack.length-1,o=this.stack[n];for(;n--;){const s=this.stack[n];if(s instanceof AST_Lambda)return!1;if(s instanceof AST_IterationStatement&&!(s instanceof AST_For&&o===s.init)&&!((s instanceof AST_ForIn||s instanceof AST_ForOf)&&o===s.object))return!0;o=s}return!1}find_scope(){for(var n=this.stack,o=n.length;--o>=0;){const s=n[o];if(s instanceof AST_Toplevel||s instanceof AST_Lambda)return s;if(s.block_scope)return s.block_scope}}has_directive(n){var o=this.directives[n];if(o)return o;var s=this.stack[this.stack.length-1];if(s instanceof AST_Scope&&s.body)for(var l=0;l<s.body.length;++l){var f=s.body[l];if(!(f instanceof AST_Directive))break;if(f.value==n)return f}}loopcontrol_target(n){var o=this.stack;if(n.label)for(var s=o.length;--s>=0;){var l=o[s];if(l instanceof AST_LabeledStatement&&l.label.name==n.label.name)return l.body}else for(var s=o.length;--s>=0;){var l=o[s];if(l instanceof AST_IterationStatement||n instanceof AST_Break&&l instanceof AST_Switch)return l}}}class TreeTransformer extends TreeWalker{constructor(n,o){super(),this.before=n,this.after=o}}const _PURE=1,_INLINE=2,_NOINLINE=4,_KEY=8,_MANGLEPROP=16;function def_transform(i,n){i.DEFMETHOD("transform",function(o,s){let l;if(o.push(this),o.before&&(l=o.before(this,n,s)),l===void 0&&(l=this,n(l,o),o.after)){const f=o.after(l,s);f!==void 0&&(l=f)}return o.pop(),l})}def_transform(AST_Node,noop);def_transform(AST_LabeledStatement,function(i,n){i.label=i.label.transform(n),i.body=i.body.transform(n)});def_transform(AST_SimpleStatement,function(i,n){i.body=i.body.transform(n)});def_transform(AST_Block,function(i,n){i.body=MAP(i.body,n)});def_transform(AST_Do,function(i,n){i.body=i.body.transform(n),i.condition=i.condition.transform(n)});def_transform(AST_While,function(i,n){i.condition=i.condition.transform(n),i.body=i.body.transform(n)});def_transform(AST_For,function(i,n){i.init&&(i.init=i.init.transform(n)),i.condition&&(i.condition=i.condition.transform(n)),i.step&&(i.step=i.step.transform(n)),i.body=i.body.transform(n)});def_transform(AST_ForIn,function(i,n){i.init=i.init.transform(n),i.object=i.object.transform(n),i.body=i.body.transform(n)});def_transform(AST_With,function(i,n){i.expression=i.expression.transform(n),i.body=i.body.transform(n)});def_transform(AST_Exit,function(i,n){i.value&&(i.value=i.value.transform(n))});def_transform(AST_LoopControl,function(i,n){i.label&&(i.label=i.label.transform(n))});def_transform(AST_If,function(i,n){i.condition=i.condition.transform(n),i.body=i.body.transform(n),i.alternative&&(i.alternative=i.alternative.transform(n))});def_transform(AST_Switch,function(i,n){i.expression=i.expression.transform(n),i.body=MAP(i.body,n)});def_transform(AST_Case,function(i,n){i.expression=i.expression.transform(n),i.body=MAP(i.body,n)});def_transform(AST_Try,function(i,n){i.body=i.body.transform(n),i.bcatch&&(i.bcatch=i.bcatch.transform(n)),i.bfinally&&(i.bfinally=i.bfinally.transform(n))});def_transform(AST_Catch,function(i,n){i.argname&&(i.argname=i.argname.transform(n)),i.body=MAP(i.body,n)});def_transform(AST_DefinitionsLike,function(i,n){i.definitions=MAP(i.definitions,n)});def_transform(AST_VarDefLike,function(i,n){i.name=i.name.transform(n),i.value&&(i.value=i.value.transform(n))});def_transform(AST_Destructuring,function(i,n){i.names=MAP(i.names,n)});def_transform(AST_Lambda,function(i,n){i.name&&(i.name=i.name.transform(n)),i.argnames=MAP(i.argnames,n,!1),i.body instanceof AST_Node?i.body=i.body.transform(n):i.body=MAP(i.body,n)});def_transform(AST_Call,function(i,n){i.expression=i.expression.transform(n),i.args=MAP(i.args,n,!1)});def_transform(AST_Sequence,function(i,n){const o=MAP(i.expressions,n);i.expressions=o.length?o:[new AST_Number({value:0})]});def_transform(AST_PropAccess,function(i,n){i.expression=i.expression.transform(n)});def_transform(AST_Sub,function(i,n){i.expression=i.expression.transform(n),i.property=i.property.transform(n)});def_transform(AST_Chain,function(i,n){i.expression=i.expression.transform(n)});def_transform(AST_Yield,function(i,n){i.expression&&(i.expression=i.expression.transform(n))});def_transform(AST_Await,function(i,n){i.expression=i.expression.transform(n)});def_transform(AST_Unary,function(i,n){i.expression=i.expression.transform(n)});def_transform(AST_Binary,function(i,n){i.left=i.left.transform(n),i.right=i.right.transform(n)});def_transform(AST_PrivateIn,function(i,n){i.key=i.key.transform(n),i.value=i.value.transform(n)});def_transform(AST_Conditional,function(i,n){i.condition=i.condition.transform(n),i.consequent=i.consequent.transform(n),i.alternative=i.alternative.transform(n)});def_transform(AST_Array,function(i,n){i.elements=MAP(i.elements,n)});def_transform(AST_Object,function(i,n){i.properties=MAP(i.properties,n)});def_transform(AST_ObjectProperty,function(i,n){i.key instanceof AST_Node&&(i.key=i.key.transform(n)),i.value&&(i.value=i.value.transform(n))});def_transform(AST_Class,function(i,n){i.name&&(i.name=i.name.transform(n)),i.extends&&(i.extends=i.extends.transform(n)),i.properties=MAP(i.properties,n)});def_transform(AST_ClassStaticBlock,function(i,n){i.body=MAP(i.body,n)});def_transform(AST_Expansion,function(i,n){i.expression=i.expression.transform(n)});def_transform(AST_NameMapping,function(i,n){i.foreign_name=i.foreign_name.transform(n),i.name=i.name.transform(n)});def_transform(AST_Import,function(i,n){i.imported_name&&(i.imported_name=i.imported_name.transform(n)),i.imported_names&&MAP(i.imported_names,n),i.module_name=i.module_name.transform(n)});def_transform(AST_Export,function(i,n){i.exported_definition&&(i.exported_definition=i.exported_definition.transform(n)),i.exported_value&&(i.exported_value=i.exported_value.transform(n)),i.exported_names&&MAP(i.exported_names,n),i.module_name&&(i.module_name=i.module_name.transform(n))});def_transform(AST_TemplateString,function(i,n){i.segments=MAP(i.segments,n)});def_transform(AST_PrefixedTemplateString,function(i,n){i.prefix=i.prefix.transform(n),i.template_string=i.template_string.transform(n)});(function(){var i=function(p){for(var I=0;I<p.length;I++)if(p[I]instanceof AST_Statement&&p[I].body instanceof AST_String)p[I]=new AST_Directive({start:p[I].start,end:p[I].end,quote:'"',value:p[I].body.value});else return p;return p};function n(p){return p&&p.length>0?new AST_Object({start:l(p),end:f(p),properties:p.map(I=>new AST_ObjectKeyVal({start:l(I),end:f(I),key:I.key.name||I.key.value,value:g(I.value)}))}):null}var o={Program:function(p){return new AST_Toplevel({start:l(p),end:f(p),body:i(p.body.map(g))})},ArrayPattern:function(p){return new AST_Destructuring({start:l(p),end:f(p),names:p.elements.map(function(I){return I===null?new AST_Hole:g(I)}),is_array:!0})},ObjectPattern:function(p){return new AST_Destructuring({start:l(p),end:f(p),names:p.properties.map(g),is_array:!1})},AssignmentPattern:function(p){return new AST_DefaultAssign({start:l(p),end:f(p),left:g(p.left),operator:"=",right:g(p.right)})},SpreadElement:function(p){return new AST_Expansion({start:l(p),end:f(p),expression:g(p.argument)})},RestElement:function(p){return new AST_Expansion({start:l(p),end:f(p),expression:g(p.argument)})},TemplateElement:function(p){return new AST_TemplateSegment({start:l(p),end:f(p),value:p.value.cooked,raw:p.value.raw})},TemplateLiteral:function(p){for(var I=[],D=0;D<p.quasis.length;D++)I.push(g(p.quasis[D])),p.expressions[D]&&I.push(g(p.expressions[D]));return new AST_TemplateString({start:l(p),end:f(p),segments:I})},TaggedTemplateExpression:function(p){return new AST_PrefixedTemplateString({start:l(p),end:f(p),template_string:g(p.quasi),prefix:g(p.tag)})},FunctionDeclaration:function(p){return new AST_Defun({start:l(p),end:f(p),name:p.id&&x(AST_SymbolDefun,p.id),argnames:p.params.map(I=>R(I,AST_SymbolFunarg)),is_generator:p.generator,async:p.async,body:i(g(p.body).body)})},FunctionExpression:function(p){return w(p,!1)},ArrowFunctionExpression:function(p){const I=p.body.type==="BlockStatement"?g(p.body).body:[make_node(AST_Return,{},{value:g(p.body)})];return new AST_Arrow({start:l(p),end:f(p),argnames:p.params.map(D=>R(D,AST_SymbolFunarg)),body:I,async:p.async})},ExpressionStatement:function(p){return new AST_SimpleStatement({start:l(p),end:f(p),body:g(p.expression)})},TryStatement:function(p){var I=p.handlers||[p.handler];if(I.length>1||p.guardedHandlers&&p.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new AST_Try({start:l(p),end:f(p),body:new AST_TryBlock(g(p.block)),bcatch:g(I[0]),bfinally:p.finalizer?new AST_Finally(g(p.finalizer)):null})},Property:function(p){if(p.kind=="init"&&!p.method){var I={start:l(p.key||p.value),end:f(p.value),key:p.computed?g(p.key):p.key.name||String(p.key.value),quote:N(p.key,p.computed),static:!1,value:g(p.value)};return new AST_ObjectKeyVal(I)}else{var D=w(p.value,!0),I={start:l(p.key||p.value),end:f(p.value),key:p.computed?g(p.key):x(AST_SymbolMethod,p.key),quote:N(p.key,p.computed),static:!1,value:D};if(p.kind=="get")return new AST_ObjectGetter(I);if(p.kind=="set")return new AST_ObjectSetter(I);if(p.method)return new AST_ConciseMethod(I)}},MethodDefinition:function(p){const I=p.key.type==="PrivateIdentifier",D=p.computed?g(p.key):new AST_SymbolMethod({name:p.key.name||String(p.key.value)});var V={start:l(p),end:f(p),key:D,quote:N(p.key,p.computed),value:w(p.value,!0),static:p.static};return p.kind=="get"?new(I?AST_PrivateGetter:AST_ObjectGetter)(V):p.kind=="set"?new(I?AST_PrivateSetter:AST_ObjectSetter)(V):new(I?AST_PrivateMethod:AST_ConciseMethod)(V)},FieldDefinition:function(p){let I;if(p.computed)I=g(p.key);else{if(p.key.type!=="Identifier")throw new Error("Non-Identifier key in FieldDefinition");I=g(p.key)}return new AST_ClassProperty({start:l(p),end:f(p),quote:N(p.key,p.computed),key:I,value:g(p.value),static:p.static})},PropertyDefinition:function(p){let I;if(p.computed)I=g(p.key);else{if(p.key.type==="PrivateIdentifier")return new AST_ClassPrivateProperty({start:l(p),end:f(p),key:g(p.key),value:g(p.value),static:p.static});I=x(AST_SymbolClassProperty,p.key)}return new AST_ClassProperty({start:l(p),end:f(p),quote:N(p.key,p.computed),key:I,value:g(p.value),static:p.static})},PrivateIdentifier:function(p){return new AST_SymbolPrivateProperty({start:l(p),end:f(p),name:p.name})},StaticBlock:function(p){return new AST_ClassStaticBlock({start:l(p),end:f(p),body:p.body.map(g)})},ArrayExpression:function(p){return new AST_Array({start:l(p),end:f(p),elements:p.elements.map(function(I){return I===null?new AST_Hole:g(I)})})},ObjectExpression:function(p){return new AST_Object({start:l(p),end:f(p),properties:p.properties.map(function(I){return I.type==="SpreadElement"||(I.type="Property"),g(I)})})},SequenceExpression:function(p){return new AST_Sequence({start:l(p),end:f(p),expressions:p.expressions.map(g)})},MemberExpression:function(p){return p.property.type==="PrivateIdentifier"?new AST_DotHash({start:l(p),end:f(p),property:p.property.name,expression:g(p.object),optional:p.optional||!1}):new(p.computed?AST_Sub:AST_Dot)({start:l(p),end:f(p),property:p.computed?g(p.property):p.property.name,expression:g(p.object),optional:p.optional||!1})},ChainExpression:function(p){return new AST_Chain({start:l(p),end:f(p),expression:g(p.expression)})},SwitchCase:function(p){return new(p.test?AST_Case:AST_Default)({start:l(p),end:f(p),expression:g(p.test),body:p.consequent.map(g)})},VariableDeclaration:function(p){let I,D=AST_VarDef,V,C=!1;p.kind==="const"?(I=AST_Const,V=AST_SymbolConst):p.kind==="let"?(I=AST_Let,V=AST_SymbolLet):p.kind==="using"?(I=AST_Using,D=AST_UsingDef,V=AST_SymbolUsing):p.kind==="await using"?(I=AST_Using,D=AST_UsingDef,V=AST_SymbolUsing,C=!0):(I=AST_Var,V=AST_SymbolVar);const K=p.declarations.map(X=>new D({start:l(X),end:f(X),name:R(X.id,V),value:g(X.init)}));return new I({start:l(p),end:f(p),definitions:K,await:C})},ImportDeclaration:function(p){var I=null,D=null;return p.specifiers.forEach(function(V){V.type==="ImportSpecifier"||V.type==="ImportNamespaceSpecifier"?(D||(D=[]),D.push(g(V))):V.type==="ImportDefaultSpecifier"&&(I=g(V))}),new AST_Import({start:l(p),end:f(p),imported_name:I,imported_names:D,module_name:g(p.source),attributes:n(p.attributes||p.assertions)})},ImportSpecifier:function(p){return new AST_NameMapping({start:l(p),end:f(p),foreign_name:x(AST_SymbolImportForeign,p.imported,p.imported.type==="Literal"),name:x(AST_SymbolImport,p.local)})},ImportDefaultSpecifier:function(p){return x(AST_SymbolImport,p.local)},ImportNamespaceSpecifier:function(p){return new AST_NameMapping({start:l(p),end:f(p),foreign_name:new AST_SymbolImportForeign({name:"*"}),name:x(AST_SymbolImport,p.local)})},ImportExpression:function(p){const I=[g(p.source)];return p.options&&I.push(g(p.options)),new AST_Call({start:l(p),end:f(p),expression:g({type:"Identifier",name:"import"}),optional:!1,args:I})},ExportAllDeclaration:function(p){var I=p.exported==null?new AST_SymbolExportForeign({name:"*"}):x(AST_SymbolExportForeign,p.exported,p.exported.type==="Literal");return new AST_Export({start:l(p),end:f(p),exported_names:[new AST_NameMapping({start:l(p),end:f(p),name:new AST_SymbolExport({name:"*"}),foreign_name:I})],module_name:g(p.source),attributes:n(p.attributes||p.assertions)})},ExportNamedDeclaration:function(p){return p.declaration?new AST_Export({start:l(p),end:f(p),exported_definition:g(p.declaration),exported_names:null,module_name:null,attributes:null}):new AST_Export({start:l(p),end:f(p),exported_definition:null,exported_names:p.specifiers&&p.specifiers.length?p.specifiers.map(g):[],module_name:g(p.source),attributes:n(p.attributes||p.assertions)})},ExportDefaultDeclaration:function(p){return new AST_Export({start:l(p),end:f(p),exported_value:g(p.declaration),is_default:!0})},ExportSpecifier:function(p){return new AST_NameMapping({start:l(p),end:f(p),foreign_name:x(AST_SymbolExportForeign,p.exported,p.exported.type==="Literal"),name:x(AST_SymbolExport,p.local,p.local.type==="Literal")})},Literal:function(p){var I=p.value,D={start:l(p),end:f(p)},V=p.regex;if(V&&V.pattern)return D.value={source:V.pattern,flags:V.flags},new AST_RegExp(D);if(V){const K=p.raw||I,X=K.match(/^\/(.*)\/(\w*)$/);if(!X)throw new Error("Invalid regex source "+K);const[re,se,Pe]=X;return D.value={source:se,flags:Pe},new AST_RegExp(D)}const C=typeof p.value=="bigint"?p.value.toString():p.bigint;if(typeof C=="string")return D.value=C,D.raw=p.raw,new AST_BigInt(D);if(I===null)return new AST_Null(D);switch(typeof I){case"string":return D.quote='"',D.value=I,new AST_String(D);case"number":return D.value=I,D.raw=p.raw||I.toString(),new AST_Number(D);case"boolean":return new(I?AST_True:AST_False)(D)}},MetaProperty:function(p){if(p.meta.name==="new"&&p.property.name==="target")return new AST_NewTarget({start:l(p),end:f(p)});if(p.meta.name==="import"&&p.property.name==="meta")return new AST_ImportMeta({start:l(p),end:f(p)})},Identifier:function(p){return new AST_SymbolRef({start:l(p),end:f(p),name:p.name})},EmptyStatement:function(p){return new AST_EmptyStatement({start:l(p),end:f(p)})},BlockStatement:function(p){return new AST_BlockStatement({start:l(p),end:f(p),body:p.body.map(g)})},IfStatement:function(p){return new AST_If({start:l(p),end:f(p),condition:g(p.test),body:g(p.consequent),alternative:g(p.alternate)})},LabeledStatement:function(p){try{const I=x(AST_Label,p.label);return E.push(I),new AST_LabeledStatement({start:l(p),end:f(p),label:I,body:g(p.body)})}finally{E.pop()}},BreakStatement:function(p){return new AST_Break({start:l(p),end:f(p),label:k(p.label)})},ContinueStatement:function(p){return new AST_Continue({start:l(p),end:f(p),label:k(p.label)})},WithStatement:function(p){return new AST_With({start:l(p),end:f(p),expression:g(p.object),body:g(p.body)})},SwitchStatement:function(p){return new AST_Switch({start:l(p),end:f(p),expression:g(p.discriminant),body:p.cases.map(g)})},ReturnStatement:function(p){return new AST_Return({start:l(p),end:f(p),value:g(p.argument)})},ThrowStatement:function(p){return new AST_Throw({start:l(p),end:f(p),value:g(p.argument)})},WhileStatement:function(p){return new AST_While({start:l(p),end:f(p),condition:g(p.test),body:g(p.body)})},DoWhileStatement:function(p){return new AST_Do({start:l(p),end:f(p),condition:g(p.test),body:g(p.body)})},ForStatement:function(p){return new AST_For({start:l(p),end:f(p),init:g(p.init),condition:g(p.test),step:g(p.update),body:g(p.body)})},ForInStatement:function(p){return new AST_ForIn({start:l(p),end:f(p),init:g(p.left),object:g(p.right),body:g(p.body)})},ForOfStatement:function(p){return new AST_ForOf({start:l(p),end:f(p),init:g(p.left),object:g(p.right),body:g(p.body),await:p.await})},AwaitExpression:function(p){return new AST_Await({start:l(p),end:f(p),expression:g(p.argument)})},YieldExpression:function(p){return new AST_Yield({start:l(p),end:f(p),expression:g(p.argument),is_star:p.delegate})},DebuggerStatement:function(p){return new AST_Debugger({start:l(p),end:f(p)})},CatchClause:function(p){return new AST_Catch({start:l(p),end:f(p),argname:p.param?R(p.param,AST_SymbolCatch):null,body:g(p.body).body})},ThisExpression:function(p){return new AST_This({start:l(p),name:"this",end:f(p)})},Super:function(p){return new AST_Super({start:l(p),end:f(p),name:"super"})},BinaryExpression:function(p){return p.left.type==="PrivateIdentifier"?new AST_PrivateIn({start:l(p),end:f(p),key:new AST_SymbolPrivateProperty({start:l(p.left),end:f(p.left),name:p.left.name}),value:g(p.right)}):new AST_Binary({start:l(p),end:f(p),operator:p.operator,left:g(p.left),right:g(p.right)})},LogicalExpression:function(p){return new AST_Binary({start:l(p),end:f(p),operator:p.operator,left:g(p.left),right:g(p.right)})},AssignmentExpression:function(p){return new AST_Assign({start:l(p),end:f(p),operator:p.operator,logical:p.operator==="??="||p.operator==="&&="||p.operator==="||=",left:g(p.left),right:g(p.right)})},ConditionalExpression:function(p){return new AST_Conditional({start:l(p),end:f(p),condition:g(p.test),consequent:g(p.consequent),alternative:g(p.alternate)})},NewExpression:function(p){return new AST_New({start:l(p),end:f(p),expression:g(p.callee),args:p.arguments.map(g)})},CallExpression:function(p){return new AST_Call({start:l(p),end:f(p),expression:g(p.callee),optional:p.optional,args:p.arguments.map(g)})}};o.UpdateExpression=o.UnaryExpression=function(I){var D="prefix"in I?I.prefix:I.type=="UnaryExpression";return new(D?AST_UnaryPrefix:AST_UnaryPostfix)({start:l(I),end:f(I),operator:I.operator,expression:g(I.argument)})},o.ClassDeclaration=o.ClassExpression=function(I){return new(I.type==="ClassDeclaration"?AST_DefClass:AST_ClassExpression)({start:l(I),end:f(I),name:I.id&&x(I.type==="ClassDeclaration"?AST_SymbolDefClass:AST_SymbolClass,I.id),extends:g(I.superClass),properties:I.body.body.map(g)})},P(AST_EmptyStatement,function(){return{type:"EmptyStatement"}}),P(AST_BlockStatement,function(I){return{type:"BlockStatement",body:I.body.map(m)}}),P(AST_If,function(I){return{type:"IfStatement",test:m(I.condition),consequent:m(I.body),alternate:m(I.alternative)}}),P(AST_LabeledStatement,function(I){return{type:"LabeledStatement",label:m(I.label),body:m(I.body)}}),P(AST_Break,function(I){return{type:"BreakStatement",label:m(I.label)}}),P(AST_Continue,function(I){return{type:"ContinueStatement",label:m(I.label)}}),P(AST_With,function(I){return{type:"WithStatement",object:m(I.expression),body:m(I.body)}}),P(AST_Switch,function(I){return{type:"SwitchStatement",discriminant:m(I.expression),cases:I.body.map(m)}}),P(AST_Return,function(I){return{type:"ReturnStatement",argument:m(I.value)}}),P(AST_Throw,function(I){return{type:"ThrowStatement",argument:m(I.value)}}),P(AST_While,function(I){return{type:"WhileStatement",test:m(I.condition),body:m(I.body)}}),P(AST_Do,function(I){return{type:"DoWhileStatement",test:m(I.condition),body:m(I.body)}}),P(AST_For,function(I){return{type:"ForStatement",init:m(I.init),test:m(I.condition),update:m(I.step),body:m(I.body)}}),P(AST_ForIn,function(I){return{type:"ForInStatement",left:m(I.init),right:m(I.object),body:m(I.body)}}),P(AST_ForOf,function(I){return{type:"ForOfStatement",left:m(I.init),right:m(I.object),body:m(I.body),await:I.await}}),P(AST_Await,function(I){return{type:"AwaitExpression",argument:m(I.expression)}}),P(AST_Yield,function(I){return{type:"YieldExpression",argument:m(I.expression),delegate:I.is_star}}),P(AST_Debugger,function(){return{type:"DebuggerStatement"}}),P(AST_VarDefLike,function(I){return{type:"VariableDeclarator",id:m(I.name),init:m(I.value)}}),P(AST_This,function(){return{type:"ThisExpression"}}),P(AST_Super,function(){return{type:"Super"}}),P(AST_Conditional,function(I){return{type:"ConditionalExpression",test:m(I.condition),consequent:m(I.consequent),alternate:m(I.alternative)}}),P(AST_New,function(I){return{type:"NewExpression",callee:m(I.expression),arguments:I.args.map(m)}}),P(AST_Call,function(I){if(I.expression instanceof AST_SymbolRef&&I.expression.name==="import"){const[D,V]=I.args.map(m);return{type:"ImportExpression",source:D,options:V||null}}return{type:"CallExpression",callee:m(I.expression),optional:I.optional,arguments:I.args.map(m)}}),P(AST_Toplevel,function(I){return G("Program",I)}),P(AST_Expansion,function(I){return{type:F()?"RestElement":"SpreadElement",argument:m(I.expression)}}),P(AST_PrefixedTemplateString,function(I){return{type:"TaggedTemplateExpression",tag:m(I.prefix),quasi:m(I.template_string)}}),P(AST_TemplateString,function(I){for(var D=[],V=[],C=0;C<I.segments.length;C++)C%2!==0?V.push(m(I.segments[C])):D.push({type:"TemplateElement",value:{raw:I.segments[C].raw,cooked:I.segments[C].value},tail:C===I.segments.length-1});return{type:"TemplateLiteral",quasis:D,expressions:V}}),P(AST_Defun,function(I){return{type:"FunctionDeclaration",id:m(I.name),params:I.argnames.map(y),generator:I.is_generator,async:I.async,body:G("BlockStatement",I)}}),P(AST_Function,function(I){return{type:"FunctionExpression",id:m(I.name),params:I.argnames.map(y),generator:I.is_generator||!1,async:I.async||!1,body:G("BlockStatement",I)}}),P(AST_Arrow,function(I){var D=I.body.length===1&&I.body[0]instanceof AST_Return&&I.body[0].value?m(I.body[0].value):{type:"BlockStatement",body:I.body.map(m)};return{type:"ArrowFunctionExpression",params:I.argnames.map(y),async:I.async,body:D}}),P(AST_Destructuring,function(I){return I.is_array?{type:"ArrayPattern",elements:I.names.map(D=>D instanceof AST_Hole?null:y(D))}:{type:"ObjectPattern",properties:I.names.map(D=>{if(D instanceof AST_ObjectKeyVal){var V=D.computed_key();const[C,K]=d(D.key,V,D.quote,D.value);return{type:"Property",computed:V,kind:"init",key:K,method:!1,shorthand:C,value:y(D.value)}}else return y(D)})}}),P(AST_DefaultAssign,function(I){return{type:"AssignmentPattern",left:y(I.left),right:m(I.right)}}),P(AST_Directive,function(I){return{type:"ExpressionStatement",expression:{type:"Literal",value:I.value,raw:I.print_to_string()},directive:I.value}}),P(AST_SimpleStatement,function(I){return{type:"ExpressionStatement",expression:m(I.body)}}),P(AST_SwitchBranch,function(I){return{type:"SwitchCase",test:m(I.expression),consequent:I.body.map(m)}}),P(AST_Try,function(I){return{type:"TryStatement",block:L(I.body),handler:m(I.bcatch),guardedHandlers:[],finalizer:m(I.bfinally)}}),P(AST_Catch,function(I){return{type:"CatchClause",param:I.argname!=null?y(I.argname):null,body:L(I)}}),P(AST_DefinitionsLike,function(I){return{type:"VariableDeclaration",kind:I instanceof AST_Const?"const":I instanceof AST_Let?"let":I instanceof AST_Using?I.await?"await using":"using":"var",declarations:I.definitions.map(m)}});function s(p){const I=[];if(p)for(const{key:D,value:V}of p.properties){const C=is_basic_identifier_string(D)?{type:"Identifier",name:D}:{type:"Literal",value:D,raw:JSON.stringify(D)};I.push({type:"ImportAttribute",key:C,value:m(V)})}return I}P(AST_Export,function(I){if(I.exported_names){var D=I.exported_names[0];if(D&&D.name.name==="*"&&!D.name.quote){var V=D.foreign_name,C=V.name==="*"&&!V.quote?null:m(V);return{type:"ExportAllDeclaration",source:m(I.module_name),exported:C,attributes:s(I.attributes)}}return{type:"ExportNamedDeclaration",specifiers:I.exported_names.map(function(K){return{type:"ExportSpecifier",exported:m(K.foreign_name),local:m(K.name)}}),declaration:m(I.exported_definition),source:m(I.module_name),attributes:s(I.attributes)}}return I.is_default?{type:"ExportDefaultDeclaration",declaration:m(I.exported_value||I.exported_definition)}:{type:"ExportNamedDeclaration",declaration:m(I.exported_value||I.exported_definition),specifiers:[],source:null}}),P(AST_Import,function(I){var D=[];if(I.imported_name&&D.push({type:"ImportDefaultSpecifier",local:m(I.imported_name)}),I.imported_names){var V=I.imported_names[0].foreign_name;V.name==="*"&&!V.quote?D.push({type:"ImportNamespaceSpecifier",local:m(I.imported_names[0].name)}):I.imported_names.forEach(function(C){D.push({type:"ImportSpecifier",local:m(C.name),imported:m(C.foreign_name)})})}return{type:"ImportDeclaration",specifiers:D,source:m(I.module_name),attributes:s(I.attributes)}}),P(AST_ImportMeta,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"import"},property:{type:"Identifier",name:"meta"}}}),P(AST_Sequence,function(I){return{type:"SequenceExpression",expressions:I.expressions.map(m)}}),P(AST_DotHash,function(I){return{type:"MemberExpression",object:m(I.expression),computed:!1,property:{type:"PrivateIdentifier",name:I.property},optional:I.optional}}),P(AST_PropAccess,function(I){var D=I instanceof AST_Sub;return{type:"MemberExpression",object:m(I.expression),computed:D,property:D?m(I.property):{type:"Identifier",name:I.property},optional:I.optional}}),P(AST_Chain,function(I){return{type:"ChainExpression",expression:m(I.expression)}}),P(AST_Unary,function(I){return{type:I.operator=="++"||I.operator=="--"?"UpdateExpression":"UnaryExpression",operator:I.operator,prefix:I instanceof AST_UnaryPrefix,argument:m(I.expression)}}),P(AST_Binary,function(I){return I.operator=="="&&F()?{type:"AssignmentPattern",left:m(I.left),right:m(I.right)}:{type:I.operator=="&&"||I.operator=="||"||I.operator==="??"?"LogicalExpression":"BinaryExpression",left:m(I.left),operator:I.operator,right:m(I.right)}}),P(AST_Assign,function(I){return{type:"AssignmentExpression",operator:I.operator,left:m(I.left),right:m(I.right)}}),P(AST_PrivateIn,function(I){return{type:"BinaryExpression",left:{type:"PrivateIdentifier",name:I.key.name},operator:"in",right:m(I.value)}}),P(AST_Array,function(I){return{type:"ArrayExpression",elements:I.elements.map(m)}}),P(AST_Object,function(I){return{type:"ObjectExpression",properties:I.properties.map(m)}}),P(AST_ObjectProperty,function(I,D){var V=I.computed_key();const[C,K]=d(I.key,V,I.quote,I.value);var X;return I instanceof AST_ObjectGetter?X="get":I instanceof AST_ObjectSetter&&(X="set"),I instanceof AST_PrivateGetter||I instanceof AST_PrivateSetter?{type:"MethodDefinition",computed:!1,kind:I instanceof AST_PrivateGetter?"get":"set",static:I.static,key:{type:"PrivateIdentifier",name:I.key.name},value:m(I.value)}:I instanceof AST_ClassPrivateProperty?{type:"PropertyDefinition",key:{type:"PrivateIdentifier",name:I.key.name},value:m(I.value),computed:!1,static:I.static}:I instanceof AST_ClassProperty?{type:"PropertyDefinition",key:K,value:m(I.value),computed:V,static:I.static}:D instanceof AST_Class?{type:"MethodDefinition",computed:V,kind:X,static:I.static,key:m(I.key),value:m(I.value)}:{type:"Property",computed:V,method:!1,shorthand:C,kind:X,key:K,value:m(I.value)}}),P(AST_ObjectKeyVal,function(I){var D=I.computed_key();const[V,C]=d(I.key,D,I.quote,I.value);return{type:"Property",computed:D,shorthand:V,method:!1,kind:"init",key:C,value:m(I.value)}}),P(AST_ConciseMethod,function(I,D){const V=I.computed_key(),[C,K]=d(I.key,V,I.quote,I.value);return D instanceof AST_Object?{type:"Property",kind:"init",computed:V,method:!0,shorthand:!1,key:K,value:m(I.value)}:{type:"MethodDefinition",kind:!V&&I.key.name==="constructor"?"constructor":"method",computed:V,key:K,value:m(I.value),static:I.static}}),P(AST_PrivateMethod,function(I){return{type:"MethodDefinition",kind:"method",key:{type:"PrivateIdentifier",name:I.key.name},value:m(I.value),computed:!1,static:I.static}}),P(AST_Class,function(I){var D=I instanceof AST_ClassExpression?"ClassExpression":"ClassDeclaration";return{type:D,superClass:m(I.extends),id:I.name?m(I.name):null,body:{type:"ClassBody",body:I.properties.map(m)}}}),P(AST_ClassStaticBlock,function(I){return{type:"StaticBlock",body:I.body.map(m)}}),P(AST_NewTarget,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"new"},property:{type:"Identifier",name:"target"}}}),P(AST_Symbol,function(I,D){if(I instanceof AST_SymbolMethod&&D.quote||(I instanceof AST_SymbolImportForeign||I instanceof AST_SymbolExportForeign||I instanceof AST_SymbolExport)&&I.quote)return{type:"Literal",value:I.name};var V=I.definition();return{type:"Identifier",name:V?V.mangled_name||V.name:I.name}}),P(AST_RegExp,function(I){const D=I.value.source,V=I.value.flags;return{type:"Literal",value:null,raw:I.print_to_string(),regex:{pattern:D,flags:V}}}),P(AST_Constant,function(I){var D=I.value;return{type:"Literal",value:D,raw:I.raw||I.print_to_string()}}),P(AST_Atom,function(I){return{type:"Identifier",name:String(I.value)}}),P(AST_BigInt,p=>({type:"Literal",value:null,bigint:typeof BigInt=="function"?BigInt(p.value).toString():p.value,raw:p.raw})),AST_Boolean.DEFMETHOD("to_mozilla_ast",AST_Constant.prototype.to_mozilla_ast),AST_Null.DEFMETHOD("to_mozilla_ast",AST_Constant.prototype.to_mozilla_ast),AST_Hole.DEFMETHOD("to_mozilla_ast",function(){return null}),AST_Block.DEFMETHOD("to_mozilla_ast",AST_BlockStatement.prototype.to_mozilla_ast),AST_Lambda.DEFMETHOD("to_mozilla_ast",AST_Function.prototype.to_mozilla_ast);function l(p){var I=p.loc,D=I&&I.start,V=p.range;return new AST_Token("","",D&&D.line||0,D&&D.column||0,V?V[0]:p.start,!1,[],[],I&&I.source)}function f(p){var I=p.loc,D=I&&I.end,V=p.range;return new AST_Token("","",D&&D.line||0,D&&D.column||0,V?V[0]:p.end,!1,[],[],I&&I.source)}var E=null;function g(p){return p==null?null:o[p.type](p)}function N(p,I){return!I&&p.type==="Literal"&&typeof p.value=="string"?'"':""}function x(p,I,D){return new p({start:l(I),quote:D?'"':void 0,name:I.type==="Identifier"?I.name:String(I.value),end:f(I)})}function w(p,I){return new(I?AST_Accessor:AST_Function)({start:l(p),end:f(p),name:p.id&&x(I?AST_SymbolMethod:AST_SymbolLambda,p.id),argnames:p.params.map(D=>R(D,AST_SymbolFunarg)),is_generator:p.generator,async:p.async,body:i(g(p.body).body)})}function R(p,I){switch(p.type){case"ObjectPattern":return new AST_Destructuring({start:l(p),end:f(p),names:p.properties.map(C=>R(C,I)),is_array:!1});case"Property":var D=p.key,V={start:l(D||p.value),end:f(p.value),key:D.type=="Identifier"?D.name:String(D.value),quote:!p.computed&&D.type==="Literal"&&typeof D.value=="string"?'"':"",value:R(p.value,I)};return p.computed&&(V.key=g(p.key)),new AST_ObjectKeyVal(V);case"ArrayPattern":return new AST_Destructuring({start:l(p),end:f(p),names:p.elements.map(function(C){return C===null?new AST_Hole:R(C,I)}),is_array:!0});case"SpreadElement":case"RestElement":return new AST_Expansion({start:l(p),end:f(p),expression:R(p.argument,I)});case"AssignmentPattern":return new AST_DefaultAssign({start:l(p),end:f(p),left:R(p.left,I),operator:"=",right:g(p.right)});case"Identifier":return new I({start:l(p),end:f(p),name:p.name});default:throw new Error("Invalid node type for destructuring: "+p.type)}}function k(p){if(!p)return null;const I=x(AST_LabelRef,p);let D=E.length;for(;D--;){const V=E[D];if(I.name===V.name){I.thedef=V;break}}return I}AST_Node.from_mozilla_ast=function(p){var I=E;E=[];var D=g(p);return E=I,D};function B(p,I){var D=p.start,V=p.end;return D&&V&&(D.pos!=null&&V.endpos!=null&&(I.range=[D.pos,V.endpos]),D.line&&(I.loc={start:{line:D.line,column:D.col},end:V.endline?{line:V.endline,column:V.endcol}:null},D.file&&(I.loc.source=D.file))),I}function P(p,I){p.DEFMETHOD("to_mozilla_ast",function(D){return B(this,I(this,D))})}var z=null;function m(p){z===null&&(z=[]),z.push(p);var I=p!=null?p.to_mozilla_ast(z[z.length-2]):null;return z.pop(),z.length===0&&(z=null),I}function d(p,I=!1,D=!1,V=null){if(I)return[!1,m(p)];const C=typeof p=="string"?p:p.name;let K;return D?K={type:"Literal",value:C,raw:JSON.stringify(C)}:""+ +C===C&&+C>=0?K={type:"Literal",value:+C,raw:JSON.stringify(+C)}:K={type:"Identifier",name:C},[K.type==="Identifier"&&K.name===C&&(V instanceof AST_Symbol&&V.name===C||V instanceof AST_DefaultAssign&&V.left.name===C),K]}function y(p){if(p instanceof AST_Expansion)return{type:"RestElement",argument:y(p.expression)};if(p instanceof AST_Symbol||p instanceof AST_Destructuring||p instanceof AST_DefaultAssign||p instanceof AST_PropAccess)return m(p);throw new Error(p.TYPE)}function F(){for(var p=z.length;p--;)if(z[p]instanceof AST_Destructuring)return!0;return!1}function L(p){return{type:"BlockStatement",body:p.body.map(m)}}function G(p,I){var D=I.body.map(m);return I.body[0]instanceof AST_SimpleStatement&&I.body[0].body instanceof AST_String&&D.unshift(m(new AST_EmptyStatement(I.body[0]))),{type:p,body:D}}})();function first_in_statement(i){let n=i.parent(-1);for(let o=0,s;s=i.parent(o);o++){if(s instanceof AST_Statement&&s.body===n)return!0;if(s instanceof AST_Sequence&&s.expressions[0]===n||s.TYPE==="Call"&&s.expression===n||s instanceof AST_PrefixedTemplateString&&s.prefix===n||s instanceof AST_Dot&&s.expression===n||s instanceof AST_Sub&&s.expression===n||s instanceof AST_Chain&&s.expression===n||s instanceof AST_Conditional&&s.condition===n||s instanceof AST_Binary&&s.left===n||s instanceof AST_UnaryPostfix&&s.expression===n)n=s;else return!1}}function left_is_object(i){return i instanceof AST_Object?!0:i instanceof AST_Sequence?left_is_object(i.expressions[0]):i.TYPE==="Call"?left_is_object(i.expression):i instanceof AST_PrefixedTemplateString?left_is_object(i.prefix):i instanceof AST_Dot||i instanceof AST_Sub||i instanceof AST_Chain?left_is_object(i.expression):i instanceof AST_Conditional?left_is_object(i.condition):i instanceof AST_Binary?left_is_object(i.left):i instanceof AST_UnaryPostfix?left_is_object(i.expression):!1}const CODE_LINE_BREAK=10,CODE_SPACE=32,r_annotation=/[@#]__(PURE|INLINE|NOINLINE)__/;function is_some_comments(i){return(i.type==="comment2"||i.type==="comment1")&&/@preserve|@copyright|@lic|@cc_on|^\**!/i.test(i.value)}const ROPE_COMMIT_WHEN=8*1e3;class Rope{constructor(){this.committed="",this.current=""}append(n){this.current.length>ROPE_COMMIT_WHEN?(this.committed+=this.current+n,this.current=""):this.current+=n}insertAt(n,o){const{committed:s,current:l}=this;o<s.length?this.committed=s.slice(0,o)+n+s.slice(o):o===s.length?this.committed+=n:(o-=s.length,this.committed+=l.slice(0,o)+n,this.current=l.slice(o))}charAt(n){const{committed:o}=this;return n<o.length?o[n]:this.current[n-o.length]}charCodeAt(n){const{committed:o}=this;return n<o.length?o.charCodeAt(n):this.current.charCodeAt(n-o.length)}length(){return this.committed.length+this.current.length}expectDirective(){let n,o=this.length();if(o<=0)return!0;for(;(n=this.charCodeAt(--o))&&(n==CODE_SPACE||n==CODE_LINE_BREAK););return!n||n===59||n===123}hasNLB(){let n=this.length()-1;for(;n>=0;){const o=this.charCodeAt(n--);if(o===CODE_LINE_BREAK)return!0;if(o!==CODE_SPACE)return!1}return!0}toString(){return this.committed+this.current}}function OutputStream(i){var n=!i;i=defaults(i,{ascii_only:!1,beautify:!1,braces:!1,comments:"some",ecma:5,ie8:!1,indent_level:4,indent_start:0,inline_script:!0,keep_numbers:!1,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_annotations:!1,quote_keys:!1,quote_style:0,safari10:!1,semicolons:!0,shebang:!0,shorthand:void 0,source_map:null,webkit:!1,width:80,wrap_iife:!1,wrap_func_args:!1,_destroy_ast:!1},!0),i.shorthand===void 0&&(i.shorthand=i.ecma>5);var o=return_false;if(i.comments){let he=i.comments;if(typeof i.comments=="string"&&/^\/.*\/[a-zA-Z]*$/.test(i.comments)){var s=i.comments.lastIndexOf("/");he=new RegExp(i.comments.substr(1,s-1),i.comments.substr(s+1))}he instanceof RegExp?o=function(Se){return Se.type!="comment5"&&he.test(Se.value)}:typeof he=="function"?o=function(Se){return Se.type!="comment5"&&he(this,Se)}:he==="some"?o=is_some_comments:o=return_true}if(i.preserve_annotations){let he=o;o=function(Se){return r_annotation.test(Se.value)||he.apply(this,arguments)}}var l=0,f=0,E=1,g=0,N=new Rope;let x=new Set;var w=i.ascii_only?function(he,Se=!1,Ue=!1){return i.ecma>=2015&&!i.safari10&&!Ue&&(he=he.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(He){var et=get_full_char_code(He,0).toString(16);return"\\u{"+et+"}"})),he.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(He){var et=He.charCodeAt(0).toString(16);if(et.length<=2&&!Se){for(;et.length<2;)et="0"+et;return"\\x"+et}else{for(;et.length<4;)et="0"+et;return"\\u"+et}})}:function(he){return he.replace(/[\ud800-\udbff][\udc00-\udfff]|([\ud800-\udbff]|[\udc00-\udfff])/g,function(Se,Ue){return Ue?"\\u"+Ue.charCodeAt(0).toString(16):Se})};function R(he,Se){var Ue=0,He=0;he=he.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(nt,st){switch(nt){case'"':return++Ue,'"';case"'":return++He,"'";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return i.ie8?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\uFEFF":return"\\ufeff";case"\0":return/[0-9]/.test(get_full_char(he,st+1))?"\\x00":"\\0"}return nt});function et(){return"'"+he.replace(/\x27/g,"\\'")+"'"}function tt(){return'"'+he.replace(/\x22/g,'\\"')+'"'}function ht(){return"`"+he.replace(/`/g,"\\`")+"`"}if(he=w(he),Se==="`")return ht();switch(i.quote_style){case 1:return et();case 2:return tt();case 3:return Se=="'"?et():tt();default:return Ue>He?et():tt()}}function k(he,Se){var Ue=R(he,Se);return i.inline_script&&(Ue=Ue.replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),Ue=Ue.replace(/\x3c!--/g,"\\x3c!--"),Ue=Ue.replace(/--\x3e/g,"--\\x3e")),Ue}function B(he){return he=he.toString(),he=w(he,!0),he}function P(he){return" ".repeat(i.indent_start+l-he*i.indent_level)}var z=!1,m=!1,d=!1,y=0,F=!1,L=!1,G=-1,p="",I,D,V=i.source_map&&[],C=V?function(){V.forEach(function(he){try{let{name:Se,token:Ue}=he;Se!==!1&&(Ue.type=="name"||Ue.type==="privatename"?Se=Ue.value:Se instanceof AST_Symbol&&(Se=Ue.type==="string"?Ue.value:Se.name)),i.source_map.add(he.token.file,he.line,he.col,he.token.line,he.token.col,is_basic_identifier_string(Se)?Se:void 0)}catch{}}),V=[]}:noop,K=i.max_line_len?function(){if(f>i.max_line_len&&y){N.insertAt(`
`,y);const Se=N.length()-y-1;if(V){var he=Se-f;V.forEach(function(Ue){Ue.line++,Ue.col+=he})}E++,g++,f=Se}y&&(y=0,C())}:noop,X=makePredicate("( [ + * / - , . `");function re(he){he=String(he);var Se=get_full_char(he,0);F&&Se&&(F=!1,Se!==`
`&&(re(`
`),Te())),L&&Se&&(L=!1,/[\s;})]/.test(Se)||Pe()),G=-1;var Ue=p.charAt(p.length-1);d&&(d=!1,(Ue===":"&&Se==="}"||(!Se||!";}".includes(Se))&&Ue!==";")&&(i.semicolons||X.has(Se)?(N.append(";"),f++,g++):(K(),f>0&&(N.append(`
`),g++,E++,f=0),/^\s+$/.test(he)&&(d=!0)),i.beautify||(m=!1))),m&&((is_identifier_char(Ue)&&(is_identifier_char(Se)||Se=="\\")||Se=="/"&&Se==Ue||(Se=="+"||Se=="-")&&Se==p)&&(N.append(" "),f++,g++),m=!1),I&&(V.push({token:I,name:D,line:E,col:f}),I=!1,y||C()),N.append(he),z=he[he.length-1]=="(",g+=he.length;var He=he.split(/\r?\n/),et=He.length-1;E+=et,f+=He[0].length,et>0&&(K(),f=He[et].length),p=he}var se=function(){re("*")},Pe=i.beautify?function(){re(" ")}:function(){m=!0},Te=i.beautify?function(he){i.beautify&&re(P(he?.5:0))}:noop,Ae=i.beautify?function(he,Se){he===!0&&(he=Xe());var Ue=l;l=he;var He=Se();return l=Ue,He}:function(he,Se){return Se()},we=i.beautify?function(){if(G<0)return re(`
`);N.charAt(G)!=`
`&&(N.insertAt(`
`,G),g++,E++),G++}:i.max_line_len?function(){K(),y=N.length()}:noop,ve=i.beautify?function(){re(";")}:function(){d=!0};function be(){d=!1,re(";")}function Xe(){return l+i.indent_level}function Be(he){var Se;return re("{"),we(),Ae(Xe(),function(){Se=he()}),Te(),re("}"),Se}function ke(he){re("(");var Se=he();return re(")"),Se}function ce(he){re("[");var Se=he();return re("]"),Se}function te(){re(","),Pe()}function ue(){re(":"),Pe()}var me=V?function(he,Se){I=he,D=Se}:noop;function Le(){return y&&K(),N.toString()}function Qe(he){return i.preserve_annotations||(he=he.replace(r_annotation," ")),/^\s*$/.test(he)?"":he.replace(/(<\s*\/\s*)(script)/i,"<\\/$2")}function Fe(he){var Se=this,Ue=he.start;if(!Ue)return;var He=Se.printed_comments;const et=he instanceof AST_Exit&&he.value||(he instanceof AST_Await||he instanceof AST_Yield)&&he.expression;if(Ue.comments_before&&He.has(Ue.comments_before))if(et)Ue.comments_before=[];else return;var tt=Ue.comments_before;if(tt||(tt=Ue.comments_before=[]),He.add(tt),et){var ht=new TreeWalker(function(ot){var it=ht.parent();if(it instanceof AST_Exit||it instanceof AST_Await||it instanceof AST_Yield||it instanceof AST_Binary&&it.left===ot||it.TYPE=="Call"&&it.expression===ot||it instanceof AST_Conditional&&it.condition===ot||it instanceof AST_Dot&&it.expression===ot||it instanceof AST_Sequence&&it.expressions[0]===ot||it instanceof AST_Sub&&it.expression===ot||it instanceof AST_UnaryPostfix){if(!ot.start)return;var S=ot.start.comments_before;S&&!He.has(S)&&(He.add(S),tt=tt.concat(S))}else return!0});ht.push(he),et.walk(ht)}if(g==0){tt.length>0&&i.shebang&&tt[0].type==="comment5"&&!He.has(tt[0])&&(re("#!"+tt.shift().value+`
`),Te());var nt=i.preamble;nt&&re(nt.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,`
`))}if(tt=tt.filter(o,he).filter(ot=>!He.has(ot)),tt.length!=0){var st=N.hasNLB();tt.forEach(function(ot,it){if(He.add(ot),st||(ot.nlb?(re(`
`),Te(),st=!0):it>0&&Pe()),/comment[134]/.test(ot.type)){var S=Qe(ot.value);S&&(re("//"+S+`
`),Te()),st=!0}else if(ot.type=="comment2"){var S=Qe(ot.value);S&&re("/*"+S+"*/"),st=!1}}),st||(Ue.nlb?(re(`
`),Te()):Pe())}}function lt(he,Se){var Ue=this,He=he.end;if(He){var et=Ue.printed_comments,tt=He[Se?"comments_before":"comments_after"];if(!(!tt||et.has(tt))&&(he instanceof AST_Statement||tt.every(nt=>!/comment[134]/.test(nt.type)))){et.add(tt);var ht=N.length();tt.filter(o,he).forEach(function(nt,st){if(!et.has(nt)){if(et.add(nt),L=!1,F?(re(`
`),Te(),F=!1):nt.nlb&&(st>0||!N.hasNLB())?(re(`
`),Te()):(st>0||!Se)&&Pe(),/comment[134]/.test(nt.type)){const ot=Qe(nt.value);ot&&re("//"+ot),F=!0}else if(nt.type=="comment2"){const ot=Qe(nt.value);ot&&re("/*"+ot+"*/"),L=!0}}}),N.length()>ht&&(G=ht)}}}const de=i._destroy_ast?function(Se){Se.body.length=0,Se.argnames.length=0}:noop;var De=[];return{get:Le,toString:Le,indent:Te,in_directive:!1,use_asm:null,active_scope:null,indentation:function(){return l},current_width:function(){return f-l},should_break:function(){return i.width&&this.current_width()>=i.width},has_parens:function(){return z},newline:we,print:re,star:se,space:Pe,comma:te,colon:ue,last:function(){return p},semicolon:ve,force_semicolon:be,to_utf8:w,print_name:function(he){re(B(he))},print_string:function(he,Se,Ue){var He=k(he,Se);Ue===!0&&!He.includes("\\")&&(N.expectDirective()||be(),be()),re(He)},print_template_string_chars:function(he){var Se=k(he,"`").replace(/\${/g,"\\${");return re(Se.substr(1,Se.length-2))},encode_string:k,next_indent:Xe,with_indent:Ae,with_block:Be,with_parens:ke,with_square:ce,add_mapping:me,option:function(he){return i[he]},gc_scope:de,printed_comments:x,prepend_comments:n?noop:Fe,append_comments:n||o===return_false?noop:lt,line:function(){return E},col:function(){return f},pos:function(){return g},push_node:function(he){De.push(he)},pop_node:function(){return De.pop()},parent:function(he){return De[De.length-2-(he||0)]}}}(function(){function i(m,d){m.DEFMETHOD("_codegen",d)}AST_Node.DEFMETHOD("print",function(m,d){var y=this,F=y._codegen;y instanceof AST_Scope?m.active_scope=y:!m.use_asm&&y instanceof AST_Directive&&y.value=="use asm"&&(m.use_asm=m.active_scope);function L(){m.prepend_comments(y),y.add_source_map(m),F(y,m),m.append_comments(y)}m.push_node(y),d||y.needs_parens(m)?m.with_parens(L):L(),m.pop_node(),y===m.use_asm&&(m.use_asm=null)}),AST_Node.DEFMETHOD("_print",AST_Node.prototype.print),AST_Node.DEFMETHOD("print_to_string",function(m){var d=OutputStream(m);return this.print(d),d.get()});function n(m,d){Array.isArray(m)?m.forEach(function(y){n(y,d)}):m.DEFMETHOD("needs_parens",d)}n(AST_Node,return_false),n(AST_Function,function(m){if(!m.has_parens()&&first_in_statement(m))return!0;if(m.option("webkit")){var d=m.parent();if(d instanceof AST_PropAccess&&d.expression===this)return!0}if(m.option("wrap_iife")){var d=m.parent();if(d instanceof AST_Call&&d.expression===this)return!0}if(m.option("wrap_func_args")){var d=m.parent();if(d instanceof AST_Call&&d.args.includes(this))return!0}return!1}),n(AST_Arrow,function(m){var d=m.parent();return m.option("wrap_func_args")&&d instanceof AST_Call&&d.args.includes(this)?!0:d instanceof AST_PropAccess&&d.expression===this||d instanceof AST_Conditional&&d.condition===this}),n(AST_Object,function(m){return!m.has_parens()&&first_in_statement(m)}),n(AST_ClassExpression,first_in_statement),n(AST_Unary,function(m){var d=m.parent();return d instanceof AST_PropAccess&&d.expression===this||d instanceof AST_Call&&d.expression===this||d instanceof AST_Binary&&d.operator==="**"&&this instanceof AST_UnaryPrefix&&d.left===this&&this.operator!=="++"&&this.operator!=="--"}),n(AST_Await,function(m){var d=m.parent();return d instanceof AST_PropAccess&&d.expression===this||d instanceof AST_Call&&d.expression===this||d instanceof AST_Binary&&d.operator==="**"&&d.left===this||m.option("safari10")&&d instanceof AST_UnaryPrefix}),n(AST_Sequence,function(m){var d=m.parent();return d instanceof AST_Call||d instanceof AST_Unary||d instanceof AST_Binary||d instanceof AST_VarDefLike||d instanceof AST_PropAccess||d instanceof AST_Array||d instanceof AST_ObjectProperty||d instanceof AST_Conditional||d instanceof AST_Arrow||d instanceof AST_DefaultAssign||d instanceof AST_Expansion||d instanceof AST_ForOf&&this===d.object||d instanceof AST_Yield||d instanceof AST_Export}),n(AST_Binary,function(m){var d=m.parent();if(d instanceof AST_Call&&d.expression===this||d instanceof AST_Unary||d instanceof AST_PropAccess&&d.expression===this)return!0;if(d instanceof AST_Binary){const y=d.operator,F=this.operator;if(F==="??"&&(y==="||"||y==="&&")||y==="??"&&(F==="||"||F==="&&"))return!0;const L=PRECEDENCE[y],G=PRECEDENCE[F];if(L>G||L==G&&(this===d.right||y=="**"))return!0}if(d instanceof AST_PrivateIn){const y=this.operator,F=PRECEDENCE.in,L=PRECEDENCE[y];if(F>L||F==L&&this===d.value)return!0}}),n(AST_PrivateIn,function(m){var d=m.parent();if(d instanceof AST_Call&&d.expression===this||d instanceof AST_Unary||d instanceof AST_PropAccess&&d.expression===this)return!0;if(d instanceof AST_Binary){const y=d.operator,F=PRECEDENCE[y],L=PRECEDENCE.in;if(F>L||F==L&&(this===d.right||y=="**"))return!0}if(d instanceof AST_PrivateIn&&this===d.value)return!0}),n(AST_Yield,function(m){var d=m.parent();if(d instanceof AST_Binary&&d.operator!=="="||d instanceof AST_Call&&d.expression===this||d instanceof AST_Conditional&&d.condition===this||d instanceof AST_Unary||d instanceof AST_PropAccess&&d.expression===this)return!0}),n(AST_Chain,function(m){var d=m.parent();return d instanceof AST_Call||d instanceof AST_PropAccess?d.expression===this:!1}),n(AST_PropAccess,function(m){var d=m.parent();if(d instanceof AST_New&&d.expression===this)return walk(this,y=>{if(y instanceof AST_Scope)return!0;if(y instanceof AST_Call)return walk_abort})}),n(AST_Call,function(m){var d=m.parent(),y;return d instanceof AST_New&&d.expression===this||d instanceof AST_Export&&d.is_default&&this.expression instanceof AST_Function?!0:this.expression instanceof AST_Function&&d instanceof AST_PropAccess&&d.expression===this&&(y=m.parent(1))instanceof AST_Assign&&y.left===d}),n(AST_New,function(m){var d=m.parent();if(this.args.length===0&&(d instanceof AST_PropAccess||d instanceof AST_Call&&d.expression===this||d instanceof AST_PrefixedTemplateString&&d.prefix===this))return!0}),n(AST_Number,function(m){var d=m.parent();if(d instanceof AST_PropAccess&&d.expression===this){var y=this.getValue();if(y<0||/^0/.test(B(y)))return!0}}),n(AST_BigInt,function(m){var d=m.parent();if(d instanceof AST_PropAccess&&d.expression===this){var y=this.getValue();if(y.startsWith("-"))return!0}}),n([AST_Assign,AST_Conditional],function(m){var d=m.parent();if(d instanceof AST_Unary||d instanceof AST_Binary&&!(d instanceof AST_Assign)||d instanceof AST_Call&&d.expression===this||d instanceof AST_Conditional&&d.condition===this||d instanceof AST_PropAccess&&d.expression===this||this instanceof AST_Assign&&this.left instanceof AST_Destructuring&&this.left.is_array===!1)return!0}),i(AST_Directive,function(m,d){d.print_string(m.value,m.quote),d.semicolon()}),i(AST_Expansion,function(m,d){d.print("..."),m.expression.print(d)}),i(AST_Destructuring,function(m,d){d.print(m.is_array?"[":"{");var y=m.names.length;m.names.forEach(function(F,L){L>0&&d.comma(),F.print(d),L==y-1&&F instanceof AST_Hole&&d.comma()}),d.print(m.is_array?"]":"}")}),i(AST_Debugger,function(m,d){d.print("debugger"),d.semicolon()});function o(m,d,y,F){var L=m.length-1;y.in_directive=F,m.forEach(function(G,p){y.in_directive===!0&&!(G instanceof AST_Directive||G instanceof AST_EmptyStatement||G instanceof AST_SimpleStatement&&G.body instanceof AST_String)&&(y.in_directive=!1),G instanceof AST_EmptyStatement||(y.indent(),G.print(y),p==L&&d||(y.newline(),d&&y.newline())),y.in_directive===!0&&G instanceof AST_SimpleStatement&&G.body instanceof AST_String&&(y.in_directive=!1)}),y.in_directive=!1}AST_StatementWithBody.DEFMETHOD("_do_print_body",function(m){R(this.body,m)}),i(AST_Statement,function(m,d){m.body.print(d),d.semicolon()}),i(AST_Toplevel,function(m,d){o(m.body,!0,d,!0),d.print("")}),i(AST_LabeledStatement,function(m,d){m.label.print(d),d.colon(),m.body.print(d)}),i(AST_SimpleStatement,function(m,d){m.body.print(d),d.semicolon()});function s(m,d){d.print("{"),d.with_indent(d.next_indent(),function(){d.append_comments(m,!0)}),d.add_mapping(m.end),d.print("}")}function l(m,d,y){m.body.length>0?d.with_block(function(){o(m.body,!1,d,y),d.add_mapping(m.end)}):s(m,d)}i(AST_BlockStatement,function(m,d){l(m,d)}),i(AST_EmptyStatement,function(m,d){d.semicolon()}),i(AST_Do,function(m,d){d.print("do"),d.space(),P(m.body,d),d.space(),d.print("while"),d.space(),d.with_parens(function(){m.condition.print(d)}),d.semicolon()}),i(AST_While,function(m,d){d.print("while"),d.space(),d.with_parens(function(){m.condition.print(d)}),d.space(),m._do_print_body(d)}),i(AST_For,function(m,d){d.print("for"),d.space(),d.with_parens(function(){m.init?(m.init instanceof AST_DefinitionsLike?m.init.print(d):E(m.init,d,!0),d.print(";"),d.space()):d.print(";"),m.condition?(m.condition.print(d),d.print(";"),d.space()):d.print(";"),m.step&&m.step.print(d)}),d.space(),m._do_print_body(d)}),i(AST_ForIn,function(m,d){d.print("for"),m.await&&(d.space(),d.print("await")),d.space(),d.with_parens(function(){m.init.print(d),d.space(),d.print(m instanceof AST_ForOf?"of":"in"),d.space(),m.object.print(d)}),d.space(),m._do_print_body(d)}),i(AST_With,function(m,d){d.print("with"),d.space(),d.with_parens(function(){m.expression.print(d)}),d.space(),m._do_print_body(d)}),AST_Lambda.DEFMETHOD("_do_print",function(m,d){var y=this;d||(y.async&&(m.print("async"),m.space()),m.print("function"),y.is_generator&&m.star(),y.name&&m.space()),y.name instanceof AST_Symbol?y.name.print(m):d&&y.name instanceof AST_Node&&m.with_square(function(){y.name.print(m)}),m.with_parens(function(){y.argnames.forEach(function(F,L){L&&m.comma(),F.print(m)})}),m.space(),l(y,m,!0)}),i(AST_Lambda,function(m,d){m._do_print(d),d.gc_scope(m)}),i(AST_PrefixedTemplateString,function(m,d){var y=m.prefix,F=y instanceof AST_Lambda||y instanceof AST_Binary||y instanceof AST_Conditional||y instanceof AST_Sequence||y instanceof AST_Unary||y instanceof AST_Dot&&y.expression instanceof AST_Object;F&&d.print("("),m.prefix.print(d),F&&d.print(")"),m.template_string.print(d)}),i(AST_TemplateString,function(m,d){var y=d.parent()instanceof AST_PrefixedTemplateString;d.print("`");for(var F=0;F<m.segments.length;F++)m.segments[F]instanceof AST_TemplateSegment?y?d.print(m.segments[F].raw):d.print_template_string_chars(m.segments[F].value):(d.print("${"),m.segments[F].print(d),d.print("}"));d.print("`")}),i(AST_TemplateSegment,function(m,d){d.print_template_string_chars(m.value)}),AST_Arrow.DEFMETHOD("_do_print",function(m){var d=this,y=m.parent(),F=y instanceof AST_Binary&&!(y instanceof AST_Assign)&&!(y instanceof AST_DefaultAssign)||y instanceof AST_Unary||y instanceof AST_Call&&d===y.expression;F&&m.print("("),d.async&&(m.print("async"),m.space()),d.argnames.length===1&&d.argnames[0]instanceof AST_Symbol?d.argnames[0].print(m):m.with_parens(function(){d.argnames.forEach(function(G,p){p&&m.comma(),G.print(m)})}),m.space(),m.print("=>"),m.space();const L=d.body[0];if(d.body.length===1&&L instanceof AST_Return){const G=L.value;G?left_is_object(G)?(m.print("("),G.print(m),m.print(")")):G.print(m):m.print("{}")}else l(d,m);F&&m.print(")"),m.gc_scope(d)}),AST_Exit.DEFMETHOD("_do_print",function(m,d){if(m.print(d),this.value){m.space();const y=this.value.start.comments_before;y&&y.length&&!m.printed_comments.has(y)?(m.print("("),this.value.print(m),m.print(")")):this.value.print(m)}m.semicolon()}),i(AST_Return,function(m,d){m._do_print(d,"return")}),i(AST_Throw,function(m,d){m._do_print(d,"throw")}),i(AST_Yield,function(m,d){var y=m.is_star?"*":"";d.print("yield"+y),m.expression&&(d.space(),m.expression.print(d))}),i(AST_Await,function(m,d){d.print("await"),d.space();var y=m.expression,F=!(y instanceof AST_Call||y instanceof AST_SymbolRef||y instanceof AST_PropAccess||y instanceof AST_Unary||y instanceof AST_Constant||y instanceof AST_Await||y instanceof AST_Object);F&&d.print("("),m.expression.print(d),F&&d.print(")")}),AST_LoopControl.DEFMETHOD("_do_print",function(m,d){m.print(d),this.label&&(m.space(),this.label.print(m)),m.semicolon()}),i(AST_Break,function(m,d){m._do_print(d,"break")}),i(AST_Continue,function(m,d){m._do_print(d,"continue")});function f(m,d){var y=m.body;if(d.option("braces")||d.option("ie8")&&y instanceof AST_Do)return P(y,d);if(!y)return d.force_semicolon();for(;;)if(y instanceof AST_If){if(!y.alternative){P(m.body,d);return}y=y.alternative}else if(y instanceof AST_StatementWithBody)y=y.body;else break;R(m.body,d)}i(AST_If,function(m,d){d.print("if"),d.space(),d.with_parens(function(){m.condition.print(d)}),d.space(),m.alternative?(f(m,d),d.space(),d.print("else"),d.space(),m.alternative instanceof AST_If?m.alternative.print(d):R(m.alternative,d)):m._do_print_body(d)}),i(AST_Switch,function(m,d){d.print("switch"),d.space(),d.with_parens(function(){m.expression.print(d)}),d.space();var y=m.body.length-1;y<0?s(m,d):d.with_block(function(){m.body.forEach(function(F,L){d.indent(!0),F.print(d),L<y&&F.body.length>0&&d.newline()})})}),AST_SwitchBranch.DEFMETHOD("_do_print_body",function(m){m.newline(),this.body.forEach(function(d){m.indent(),d.print(m),m.newline()})}),i(AST_Default,function(m,d){d.print("default:"),m._do_print_body(d)}),i(AST_Case,function(m,d){d.print("case"),d.space(),m.expression.print(d),d.print(":"),m._do_print_body(d)}),i(AST_Try,function(m,d){d.print("try"),d.space(),m.body.print(d),m.bcatch&&(d.space(),m.bcatch.print(d)),m.bfinally&&(d.space(),m.bfinally.print(d))}),i(AST_TryBlock,function(m,d){l(m,d)}),i(AST_Catch,function(m,d){d.print("catch"),m.argname&&(d.space(),d.with_parens(function(){m.argname.print(d)})),d.space(),l(m,d)}),i(AST_Finally,function(m,d){d.print("finally"),d.space(),l(m,d)}),AST_DefinitionsLike.DEFMETHOD("_do_print",function(m,d){m.print(d),m.space(),this.definitions.forEach(function(G,p){p&&m.comma(),G.print(m)});var y=m.parent(),F=y instanceof AST_For||y instanceof AST_ForIn,L=!F||y&&y.init!==this;L&&m.semicolon()}),i(AST_Let,function(m,d){m._do_print(d,"let")}),i(AST_Var,function(m,d){m._do_print(d,"var")}),i(AST_Const,function(m,d){m._do_print(d,"const")}),i(AST_Using,function(m,d){m._do_print(d,m.await?"await using":"using")}),i(AST_Import,function(m,d){d.print("import"),d.space(),m.imported_name&&m.imported_name.print(d),m.imported_name&&m.imported_names&&(d.print(","),d.space()),m.imported_names&&(m.imported_names.length===1&&m.imported_names[0].foreign_name.name==="*"&&!m.imported_names[0].foreign_name.quote?m.imported_names[0].print(d):(d.print("{"),m.imported_names.forEach(function(y,F){d.space(),y.print(d),F<m.imported_names.length-1&&d.print(",")}),d.space(),d.print("}"))),(m.imported_name||m.imported_names)&&(d.space(),d.print("from"),d.space()),m.module_name.print(d),m.attributes&&(d.print("with"),m.attributes.print(d)),d.semicolon()}),i(AST_ImportMeta,function(m,d){d.print("import.meta")}),i(AST_NameMapping,function(m,d){var y=d.parent()instanceof AST_Import,F=m.name.definition(),L=m.foreign_name,G=(F&&F.mangled_name||m.name.name)!==L.name;!G&&L.name==="*"&&!!L.quote!=!!m.name.quote&&(G=!0);var p=!L.quote;G?(y?p?d.print(L.name):d.print_string(L.name,L.quote):m.name.quote?d.print_string(m.name.name,m.name.quote):m.name.print(d),d.space(),d.print("as"),d.space(),y?m.name.print(d):p?d.print(L.name):d.print_string(L.name,L.quote)):m.name.quote?d.print_string(m.name.name,m.name.quote):m.name.print(d)}),i(AST_Export,function(m,d){if(d.print("export"),d.space(),m.is_default&&(d.print("default"),d.space()),m.exported_names)m.exported_names.length===1&&m.exported_names[0].name.name==="*"&&!m.exported_names[0].name.quote?m.exported_names[0].print(d):(d.print("{"),m.exported_names.forEach(function(y,F){d.space(),y.print(d),F<m.exported_names.length-1&&d.print(",")}),d.space(),d.print("}"));else if(m.exported_value)m.exported_value.print(d);else if(m.exported_definition&&(m.exported_definition.print(d),m.exported_definition instanceof AST_Definitions))return;m.module_name&&(d.space(),d.print("from"),d.space(),m.module_name.print(d)),m.attributes&&(d.print("with"),m.attributes.print(d)),(m.exported_value&&!(m.exported_value instanceof AST_Defun||m.exported_value instanceof AST_Function||m.exported_value instanceof AST_Class)||m.module_name||m.exported_names)&&d.semicolon()});function E(m,d,y){var F=!1;y&&(F=walk(m,L=>{if(L instanceof AST_Scope&&!(L instanceof AST_Arrow))return!0;if(L instanceof AST_Binary&&L.operator=="in"||L instanceof AST_PrivateIn)return walk_abort})),m.print(d,F)}i(AST_VarDefLike,function(m,d){if(m.name.print(d),m.value){d.space(),d.print("="),d.space();var y=d.parent(1),F=y instanceof AST_For||y instanceof AST_ForIn;E(m.value,d,F)}}),i(AST_Call,function(m,d){m.expression.print(d),!(m instanceof AST_New&&m.args.length===0)&&((m.expression instanceof AST_Call||m.expression instanceof AST_Lambda)&&d.add_mapping(m.start),m.optional&&d.print("?."),d.with_parens(function(){m.args.forEach(function(y,F){F&&d.comma(),y.print(d)})}))}),i(AST_New,function(m,d){d.print("new"),d.space(),AST_Call.prototype._codegen(m,d)}),AST_Sequence.DEFMETHOD("_do_print",function(m){this.expressions.forEach(function(d,y){y>0&&(m.comma(),m.should_break()&&(m.newline(),m.indent())),d.print(m)})}),i(AST_Sequence,function(m,d){m._do_print(d)}),i(AST_Dot,function(m,d){var y=m.expression;y.print(d);var F=m.property,L=ALL_RESERVED_WORDS.has(F)?d.option("ie8"):!is_identifier_string(F,d.option("ecma")>=2015&&!d.option("safari10"));m.optional&&d.print("?."),L?(d.print("["),d.add_mapping(m.end),d.print_string(F),d.print("]")):(y instanceof AST_Number&&y.getValue()>=0&&(/[xa-f.)]/i.test(d.last())||d.print(".")),m.optional||d.print("."),d.add_mapping(m.end),d.print_name(F))}),i(AST_DotHash,function(m,d){var y=m.expression;y.print(d);var F=m.property;m.optional&&d.print("?"),d.print(".#"),d.add_mapping(m.end),d.print_name(F)}),i(AST_Sub,function(m,d){m.expression.print(d),m.optional&&d.print("?."),d.print("["),m.property.print(d),d.print("]")}),i(AST_Chain,function(m,d){m.expression.print(d)}),i(AST_UnaryPrefix,function(m,d){var y=m.operator;y==="--"&&d.last().endsWith("!")&&d.print(" "),d.print(y),(/^[a-z]/i.test(y)||/[+-]$/.test(y)&&m.expression instanceof AST_UnaryPrefix&&/^[+-]/.test(m.expression.operator))&&d.space(),m.expression.print(d)}),i(AST_UnaryPostfix,function(m,d){m.expression.print(d),d.print(m.operator)}),i(AST_Binary,function(m,d){var y=m.operator;m.left.print(d),y[0]==">"&&d.last().endsWith("--")?d.print(" "):d.space(),d.print(y),d.space(),m.right.print(d)}),i(AST_Conditional,function(m,d){m.condition.print(d),d.space(),d.print("?"),d.space(),m.consequent.print(d),d.space(),d.colon(),m.alternative.print(d)}),i(AST_Array,function(m,d){d.with_square(function(){var y=m.elements,F=y.length;F>0&&d.space(),y.forEach(function(L,G){G&&d.comma(),L.print(d),G===F-1&&L instanceof AST_Hole&&d.comma()}),F>0&&d.space()})}),i(AST_Object,function(m,d){m.properties.length>0?d.with_block(function(){m.properties.forEach(function(y,F){F&&(d.print(","),d.newline()),d.indent(),y.print(d)}),d.newline()}):s(m,d)}),i(AST_Class,function(m,d){if(d.print("class"),d.space(),m.name&&(m.name.print(d),d.space()),m.extends){var y=!(m.extends instanceof AST_SymbolRef)&&!(m.extends instanceof AST_PropAccess)&&!(m.extends instanceof AST_ClassExpression)&&!(m.extends instanceof AST_Function);d.print("extends"),y?d.print("("):d.space(),m.extends.print(d),y?d.print(")"):d.space()}m.properties.length>0?d.with_block(function(){m.properties.forEach(function(F,L){L&&d.newline(),d.indent(),F.print(d)}),d.newline()}):d.print("{}")}),i(AST_NewTarget,function(m,d){d.print("new.target")});function g(m,d,y){if(y.option("quote_keys"))return y.print_string(m),!1;if(""+ +m==m&&m>=0)return y.option("keep_numbers")?(y.print(m),!1):(y.print(B(m)),!1);var F=ALL_RESERVED_WORDS.has(m)?y.option("ie8"):y.option("ecma")<2015||y.option("safari10")?!is_basic_identifier_string(m):!is_identifier_string(m,!0);return F||d&&y.option("keep_quoted_props")?(y.print_string(m,d),!1):(y.print_name(m),!0)}i(AST_ObjectKeyVal,function(m,d){function y(L){var G=L.definition();return G?G.mangled_name||G.name:L.name}const F=d.option("shorthand")&&!(m.key instanceof AST_Node);F&&m.value instanceof AST_Symbol&&y(m.value)===m.key&&!ALL_RESERVED_WORDS.has(m.key)?g(m.key,m.quote,d)||(d.colon(),m.value.print(d)):F&&m.value instanceof AST_DefaultAssign&&m.value.left instanceof AST_Symbol&&y(m.value.left)===m.key?(g(m.key,m.quote,d)||(d.colon(),m.value.left.print(d)),d.space(),d.print("="),d.space(),m.value.right.print(d)):(m.key instanceof AST_Node?d.with_square(function(){m.key.print(d)}):g(m.key,m.quote,d),d.colon(),m.value.print(d))}),i(AST_ClassPrivateProperty,(m,d)=>{m.static&&(d.print("static"),d.space()),d.print("#"),g(m.key.name,void 0,d),m.value&&(d.print("="),m.value.print(d)),d.semicolon()}),i(AST_ClassProperty,(m,d)=>{m.static&&(d.print("static"),d.space()),m.key instanceof AST_SymbolClassProperty?g(m.key.name,m.quote,d):(d.print("["),m.key.print(d),d.print("]")),m.value&&(d.print("="),m.value.print(d)),d.semicolon()}),AST_ObjectProperty.DEFMETHOD("_print_getter_setter",function(m,d,y){var F=this;F.static&&(y.print("static"),y.space()),m&&(y.print(m),y.space()),F.key instanceof AST_SymbolMethod?(d&&y.print("#"),g(F.key.name,F.quote,y),F.key.add_source_map(y)):y.with_square(function(){F.key.print(y)}),F.value._do_print(y,!0)}),i(AST_ObjectSetter,function(m,d){m._print_getter_setter("set",!1,d)}),i(AST_ObjectGetter,function(m,d){m._print_getter_setter("get",!1,d)}),i(AST_PrivateSetter,function(m,d){m._print_getter_setter("set",!0,d)}),i(AST_PrivateGetter,function(m,d){m._print_getter_setter("get",!0,d)}),i(AST_ConciseMethod,function(m,d){var y;m.value.is_generator&&m.value.async?y="async*":m.value.is_generator?y="*":m.value.async&&(y="async"),m._print_getter_setter(y,!1,d)}),i(AST_PrivateMethod,function(m,d){var y;m.value.is_generator&&m.value.async?y="async*":m.value.is_generator?y="*":m.value.async&&(y="async"),m._print_getter_setter(y,!0,d)}),i(AST_PrivateIn,function(m,d){m.key.print(d),d.space(),d.print("in"),d.space(),m.value.print(d)}),i(AST_SymbolPrivateProperty,function(m,d){d.print("#"+m.name)}),i(AST_ClassStaticBlock,function(m,d){d.print("static"),d.space(),l(m,d)}),AST_Symbol.DEFMETHOD("_do_print",function(m){var d=this.definition();m.print_name(d?d.mangled_name||d.name:this.name)}),i(AST_Symbol,function(m,d){m._do_print(d)}),i(AST_Hole,noop),i(AST_This,function(m,d){d.print("this")}),i(AST_Super,function(m,d){d.print("super")}),i(AST_Constant,function(m,d){d.print(m.getValue())}),i(AST_String,function(m,d){d.print_string(m.getValue(),m.quote,d.in_directive)}),i(AST_Number,function(m,d){(d.option("keep_numbers")||d.use_asm)&&m.raw?d.print(m.raw):d.print(B(m.getValue()))}),i(AST_BigInt,function(m,d){d.option("keep_numbers")&&m.raw?d.print(m.raw):d.print(m.getValue()+"n")});const N=/(<\s*\/\s*script)/i,x=/^\s*script/i,w=(m,d)=>d.replace("/","\\/");i(AST_RegExp,function(m,d){let{source:y,flags:F}=m.getValue();y=regexp_source_fix(y),F=F?sort_regexp_flags(F):"",y=y.replace(N,w),x.test(y)&&d.last().endsWith("<")&&d.print(" "),d.print(d.to_utf8(`/${y}/${F}`,!1,!0));const L=d.parent();L instanceof AST_Binary&&/^\w/.test(L.operator)&&L.left===m&&d.print(" ")});function R(m,d){d.option("braces")?P(m,d):!m||m instanceof AST_EmptyStatement?d.force_semicolon():m instanceof AST_DefinitionsLike&&!(m instanceof AST_Var)||m instanceof AST_Class?P(m,d):m.print(d)}function k(m){for(var d=m[0],y=d.length,F=1;F<m.length;++F)m[F].length<y&&(d=m[F],y=d.length);return d}function B(m){var d=m.toString(10).replace(/^0\./,".").replace("e+","e"),y=[d];Math.floor(m)===m&&(m<0?y.push("-0x"+(-m).toString(16).toLowerCase()):y.push("0x"+m.toString(16).toLowerCase()));var F,L,G;return(F=/^\.0+/.exec(d))?(L=F[0].length,G=d.slice(L),y.push(G+"e-"+(G.length+L-1))):(F=/0+$/.exec(d))?(L=F[0].length,y.push(d.slice(0,-L)+"e"+L)):(F=/^(\d)\.(\d+)e(-?\d+)$/.exec(d))&&y.push(F[1]+F[2]+"e"+(F[3]-F[2].length)),k(y)}function P(m,d){!m||m instanceof AST_EmptyStatement?d.print("{}"):m instanceof AST_BlockStatement?m.print(d):d.with_block(function(){d.indent(),m.print(d),d.newline()})}function z(m,d){m.forEach(function(y){y.DEFMETHOD("add_source_map",d)})}z([AST_Node,AST_LabeledStatement,AST_Toplevel],noop),z([AST_Array,AST_BlockStatement,AST_Catch,AST_Class,AST_Constant,AST_Debugger,AST_DefinitionsLike,AST_Directive,AST_Finally,AST_Jump,AST_Lambda,AST_New,AST_Object,AST_StatementWithBody,AST_Symbol,AST_Switch,AST_SwitchBranch,AST_TemplateString,AST_TemplateSegment,AST_Try],function(m){m.add_mapping(this.start)}),z([AST_ObjectGetter,AST_ObjectSetter,AST_PrivateGetter,AST_PrivateSetter,AST_ConciseMethod,AST_PrivateMethod],function(m){m.add_mapping(this.start,!1)}),z([AST_SymbolMethod,AST_SymbolPrivateProperty],function(m){const d=this.end&&this.end.type;d==="name"||d==="privatename"?m.add_mapping(this.end,this.name):m.add_mapping(this.end)}),z([AST_ObjectProperty],function(m){m.add_mapping(this.start,this.key)})})();const shallow_cmp=(i,n)=>i===null&&n===null||i.TYPE===n.TYPE&&i.shallow_cmp(n),equivalent_to=(i,n)=>{if(!shallow_cmp(i,n))return!1;const o=[i],s=[n],l=o.push.bind(o),f=s.push.bind(s);for(;o.length&&s.length;){const E=o.pop(),g=s.pop();if(!shallow_cmp(E,g)||(E._children_backwards(l),g._children_backwards(f),o.length!==s.length))return!1}return o.length==0&&s.length==0},pass_through=()=>!0;AST_Node.prototype.shallow_cmp=function(){throw new Error("did not find a shallow_cmp function for "+this.constructor.name)};AST_Debugger.prototype.shallow_cmp=pass_through;AST_Directive.prototype.shallow_cmp=function(i){return this.value===i.value};AST_SimpleStatement.prototype.shallow_cmp=pass_through;AST_Block.prototype.shallow_cmp=pass_through;AST_EmptyStatement.prototype.shallow_cmp=pass_through;AST_LabeledStatement.prototype.shallow_cmp=function(i){return this.label.name===i.label.name};AST_Do.prototype.shallow_cmp=pass_through;AST_While.prototype.shallow_cmp=pass_through;AST_For.prototype.shallow_cmp=function(i){return(this.init==null?i.init==null:this.init===i.init)&&(this.condition==null?i.condition==null:this.condition===i.condition)&&(this.step==null?i.step==null:this.step===i.step)};AST_ForIn.prototype.shallow_cmp=pass_through;AST_ForOf.prototype.shallow_cmp=pass_through;AST_With.prototype.shallow_cmp=pass_through;AST_Toplevel.prototype.shallow_cmp=pass_through;AST_Expansion.prototype.shallow_cmp=pass_through;AST_Lambda.prototype.shallow_cmp=function(i){return this.is_generator===i.is_generator&&this.async===i.async};AST_Destructuring.prototype.shallow_cmp=function(i){return this.is_array===i.is_array};AST_PrefixedTemplateString.prototype.shallow_cmp=pass_through;AST_TemplateString.prototype.shallow_cmp=pass_through;AST_TemplateSegment.prototype.shallow_cmp=function(i){return this.value===i.value};AST_Jump.prototype.shallow_cmp=pass_through;AST_LoopControl.prototype.shallow_cmp=pass_through;AST_Await.prototype.shallow_cmp=pass_through;AST_Yield.prototype.shallow_cmp=function(i){return this.is_star===i.is_star};AST_If.prototype.shallow_cmp=function(i){return this.alternative==null?i.alternative==null:this.alternative===i.alternative};AST_Switch.prototype.shallow_cmp=pass_through;AST_SwitchBranch.prototype.shallow_cmp=pass_through;AST_Try.prototype.shallow_cmp=function(i){return this.body===i.body&&(this.bcatch==null?i.bcatch==null:this.bcatch===i.bcatch)&&(this.bfinally==null?i.bfinally==null:this.bfinally===i.bfinally)};AST_Catch.prototype.shallow_cmp=function(i){return this.argname==null?i.argname==null:this.argname===i.argname};AST_Finally.prototype.shallow_cmp=pass_through;AST_DefinitionsLike.prototype.shallow_cmp=pass_through;AST_VarDefLike.prototype.shallow_cmp=function(i){return this.value==null?i.value==null:this.value===i.value};AST_NameMapping.prototype.shallow_cmp=pass_through;AST_Import.prototype.shallow_cmp=function(i){return(this.imported_name==null?i.imported_name==null:this.imported_name===i.imported_name)&&(this.imported_names==null?i.imported_names==null:this.imported_names===i.imported_names)&&(this.attributes==null?i.attributes==null:this.attributes===i.attributes)};AST_ImportMeta.prototype.shallow_cmp=pass_through;AST_Export.prototype.shallow_cmp=function(i){return(this.exported_definition==null?i.exported_definition==null:this.exported_definition===i.exported_definition)&&(this.exported_value==null?i.exported_value==null:this.exported_value===i.exported_value)&&(this.exported_names==null?i.exported_names==null:this.exported_names===i.exported_names)&&(this.attributes==null?i.attributes==null:this.attributes===i.attributes)&&this.module_name===i.module_name&&this.is_default===i.is_default};AST_Call.prototype.shallow_cmp=pass_through;AST_Sequence.prototype.shallow_cmp=pass_through;AST_PropAccess.prototype.shallow_cmp=pass_through;AST_Chain.prototype.shallow_cmp=pass_through;AST_Dot.prototype.shallow_cmp=function(i){return this.property===i.property};AST_DotHash.prototype.shallow_cmp=function(i){return this.property===i.property};AST_Unary.prototype.shallow_cmp=function(i){return this.operator===i.operator};AST_Binary.prototype.shallow_cmp=function(i){return this.operator===i.operator};AST_PrivateIn.prototype.shallow_cmp=pass_through;AST_Conditional.prototype.shallow_cmp=pass_through;AST_Array.prototype.shallow_cmp=pass_through;AST_Object.prototype.shallow_cmp=pass_through;AST_ObjectProperty.prototype.shallow_cmp=pass_through;AST_ObjectKeyVal.prototype.shallow_cmp=function(i){return this.key===i.key&&this.quote===i.quote};AST_ObjectSetter.prototype.shallow_cmp=function(i){return this.static===i.static};AST_ObjectGetter.prototype.shallow_cmp=function(i){return this.static===i.static};AST_ConciseMethod.prototype.shallow_cmp=function(i){return this.static===i.static};AST_PrivateMethod.prototype.shallow_cmp=function(i){return this.static===i.static};AST_Class.prototype.shallow_cmp=function(i){return(this.name==null?i.name==null:this.name===i.name)&&(this.extends==null?i.extends==null:this.extends===i.extends)};AST_ClassProperty.prototype.shallow_cmp=function(i){return this.static===i.static&&(typeof this.key=="string"?this.key===i.key:!0)};AST_ClassPrivateProperty.prototype.shallow_cmp=function(i){return this.static===i.static};AST_Symbol.prototype.shallow_cmp=function(i){return this.name===i.name};AST_NewTarget.prototype.shallow_cmp=pass_through;AST_This.prototype.shallow_cmp=pass_through;AST_Super.prototype.shallow_cmp=pass_through;AST_String.prototype.shallow_cmp=function(i){return this.value===i.value};AST_Number.prototype.shallow_cmp=function(i){return this.value===i.value};AST_BigInt.prototype.shallow_cmp=function(i){return this.value===i.value};AST_RegExp.prototype.shallow_cmp=function(i){return this.value.flags===i.value.flags&&this.value.source===i.value.source};AST_Atom.prototype.shallow_cmp=pass_through;const MASK_EXPORT_DONT_MANGLE=1,MASK_EXPORT_WANT_MANGLE=2;let function_defs=null,unmangleable_names=null,scopes_with_block_defuns=null;class SymbolDef{constructor(n,o,s){this.name=o.name,this.orig=[o],this.init=s,this.eliminated=0,this.assignments=0,this.scope=n,this.replaced=0,this.global=!1,this.export=0,this.mangled_name=null,this.undeclared=!1,this.id=SymbolDef.next_id++,this.chained=!1,this.direct_access=!1,this.escaped=0,this.recursive_refs=0,this.references=[],this.should_replace=void 0,this.single_use=!1,this.fixed=!1,Object.seal(this)}fixed_value(){return!this.fixed||this.fixed instanceof AST_Node?this.fixed:this.fixed()}unmangleable(n){return n||(n={}),function_defs&&function_defs.has(this.id)&&keep_name(n.keep_fnames,this.orig[0].name)?!0:this.global&&!n.toplevel||this.export&MASK_EXPORT_DONT_MANGLE||this.undeclared||!n.eval&&this.scope.pinned()||(this.orig[0]instanceof AST_SymbolLambda||this.orig[0]instanceof AST_SymbolDefun)&&keep_name(n.keep_fnames,this.orig[0].name)||this.orig[0]instanceof AST_SymbolMethod||(this.orig[0]instanceof AST_SymbolClass||this.orig[0]instanceof AST_SymbolDefClass)&&keep_name(n.keep_classnames,this.orig[0].name)}mangle(n){const o=n.cache&&n.cache.props;if(this.global&&o&&o.has(this.name))this.mangled_name=o.get(this.name);else if(!this.mangled_name&&!this.unmangleable(n)){var s=this.scope,l=this.orig[0];n.ie8&&l instanceof AST_SymbolLambda&&(s=s.parent_scope);const f=redefined_catch_def(this);this.mangled_name=f?f.mangled_name||f.name:s.next_mangled(n,this),this.global&&o&&o.set(this.name,this.mangled_name)}}}SymbolDef.next_id=1;function redefined_catch_def(i){if(i.orig[0]instanceof AST_SymbolCatch&&i.scope.is_block_scope())return i.scope.get_defun_scope().variables.get(i.name)}AST_Scope.DEFMETHOD("figure_out_scope",function(i,{parent_scope:n=void 0,toplevel:o=this}={}){if(i=defaults(i,{cache:null,ie8:!1,safari10:!1,module:!1}),!(o instanceof AST_Toplevel))throw new Error("Invalid toplevel scope");var s=this.parent_scope=n,l=new Map,f=null,E=null,g=[],w=new TreeWalker((R,k)=>{if(R.is_block_scope()){const L=s;if(R.block_scope=s=new AST_Scope(R),s._block_scope=!0,s.init_scope_vars(L),s.uses_with=L.uses_with,s.uses_eval=L.uses_eval,i.safari10&&(R instanceof AST_For||R instanceof AST_ForIn||R instanceof AST_ForOf)&&g.push(s),R instanceof AST_Switch){const G=s;s=L,R.expression.walk(w),s=G;for(let p=0;p<R.body.length;p++)R.body[p].walk(w)}else k();return s=L,!0}if(R instanceof AST_Destructuring){const L=E;return E=R,k(),E=L,!0}if(R instanceof AST_Scope){R.init_scope_vars(s);var B=s,P=f,z=l;return f=s=R,l=new Map,k(),s=B,f=P,l=z,!0}if(R instanceof AST_LabeledStatement){var m=R.label;if(l.has(m.name))throw new Error(string_template("Label {name} defined twice",m));return l.set(m.name,m),k(),l.delete(m.name),!0}if(R instanceof AST_With){for(var d=s;d;d=d.parent_scope)d.uses_with=!0;return}if(R instanceof AST_Symbol&&(R.scope=s),R instanceof AST_Label&&(R.thedef=R,R.references=[]),R instanceof AST_SymbolLambda)f.def_function(R,R.name=="arguments"?void 0:f);else if(R instanceof AST_SymbolDefun){const L=f.parent_scope;R.scope=w.directives["use strict"]?L:L.get_defun_scope(),N(R.scope.def_function(R,f),1)}else if(R instanceof AST_SymbolClass)N(f.def_variable(R,f),1);else if(R instanceof AST_SymbolImport)s.def_variable(R);else if(R instanceof AST_SymbolDefClass)N((R.scope=f.parent_scope).def_function(R,f),1);else if(R instanceof AST_SymbolVar||R instanceof AST_SymbolLet||R instanceof AST_SymbolConst||R instanceof AST_SymbolUsing||R instanceof AST_SymbolCatch){var y;if(R instanceof AST_SymbolBlockDeclaration?y=s.def_variable(R,null):y=f.def_variable(R,R.TYPE=="SymbolVar"?null:void 0),y.orig.every(L=>L===R?!0:R instanceof AST_SymbolBlockDeclaration?L instanceof AST_SymbolLambda:!(L instanceof AST_SymbolLet||L instanceof AST_SymbolConst||L instanceof AST_SymbolUsing))||js_error(`"${R.name}" is redeclared`,R.start.file,R.start.line,R.start.col,R.start.pos),R instanceof AST_SymbolFunarg||N(y,2),f!==s){R.mark_enclosed();var y=s.find_variable(R);R.thedef!==y&&(R.thedef=y,R.reference())}}else if(R instanceof AST_LabelRef){var F=l.get(R.name);if(!F)throw new Error(string_template("Undefined label {name} [{line},{col}]",{name:R.name,line:R.start.line,col:R.start.col}));R.thedef=F}!(s instanceof AST_Toplevel)&&(R instanceof AST_Export||R instanceof AST_Import)&&js_error(`"${R.TYPE}" statement may only appear at the top level`,R.start.file,R.start.line,R.start.col,R.start.pos)});i.module&&(w.directives["use strict"]=!0),this.walk(w);function N(R,k){if(E){var B=0;do k++;while(w.parent(B++)!==E)}var P=w.parent(k);if(R.export=P instanceof AST_Export?MASK_EXPORT_DONT_MANGLE:0){var z=P.exported_definition;(z instanceof AST_Defun||z instanceof AST_DefClass)&&P.is_default&&(R.export=MASK_EXPORT_WANT_MANGLE)}}this instanceof AST_Toplevel&&(this.globals=new Map);var w=new TreeWalker(R=>{if(R instanceof AST_LoopControl&&R.label)return R.label.thedef.references.push(R),!0;if(R instanceof AST_SymbolRef){var k=R.name;if(k=="eval"&&w.parent()instanceof AST_Call)for(var B=R.scope;B&&!B.uses_eval;B=B.parent_scope)B.uses_eval=!0;var P;return w.parent()instanceof AST_NameMapping&&w.parent(1).module_name||!(P=R.scope.find_variable(k))?(P=o.def_global(R),R instanceof AST_SymbolExport&&(P.export=MASK_EXPORT_DONT_MANGLE)):P.scope instanceof AST_Lambda&&k=="arguments"&&(P.scope.get_defun_scope().uses_arguments=!0),R.thedef=P,R.reference(),R.scope.is_block_scope()&&!(P.orig[0]instanceof AST_SymbolBlockDeclaration)&&(R.scope=R.scope.get_defun_scope()),!0}var z;if(R instanceof AST_SymbolCatch&&(z=redefined_catch_def(R.definition())))for(var B=R.scope;B&&(push_uniq(B.enclosed,z),B!==z.scope);)B=B.parent_scope});if(this.walk(w),(i.ie8||i.safari10)&&walk(this,R=>{if(R instanceof AST_SymbolCatch){var k=R.name,B=R.thedef.references,P=R.scope.get_defun_scope(),z=P.find_variable(k)||o.globals.get(k)||P.def_variable(R);return B.forEach(function(m){m.thedef=z,m.reference()}),R.thedef=z,R.reference(),!0}}),i.safari10)for(const R of g)R.parent_scope.variables.forEach(function(k){push_uniq(R.enclosed,k)})});AST_Toplevel.DEFMETHOD("def_global",function(i){var n=this.globals,o=i.name;if(n.has(o))return n.get(o);var s=new SymbolDef(this,i);return s.undeclared=!0,s.global=!0,n.set(o,s),s});AST_Scope.DEFMETHOD("init_scope_vars",function(i){this.variables=new Map,this.uses_with=!1,this.uses_eval=!1,this.parent_scope=i,this.enclosed=[],this.cname=-1});AST_Scope.DEFMETHOD("conflicting_def",function(i){return this.enclosed.find(n=>n.name===i)||this.variables.has(i)||this.parent_scope&&this.parent_scope.conflicting_def(i)});AST_Scope.DEFMETHOD("conflicting_def_shallow",function(i){return this.enclosed.find(n=>n.name===i)||this.variables.has(i)});AST_Scope.DEFMETHOD("add_child_scope",function(i){if(i.parent_scope===this)return;i.parent_scope=this,i instanceof AST_Arrow&&this instanceof AST_Lambda&&!this.uses_arguments&&(this.uses_arguments=walk(i,l=>{if(l instanceof AST_SymbolRef&&l.scope instanceof AST_Lambda&&l.name==="arguments")return walk_abort;if(l instanceof AST_Lambda&&!(l instanceof AST_Arrow))return!0})),this.uses_with=this.uses_with||i.uses_with,this.uses_eval=this.uses_eval||i.uses_eval;const n=(()=>{const l=[];let f=this;do l.push(f);while(f=f.parent_scope);return l.reverse(),l})(),o=new Set(i.enclosed),s=[];for(const l of n){s.forEach(f=>push_uniq(l.enclosed,f));for(const f of l.variables.values())o.has(f)&&(push_uniq(s,f),push_uniq(l.enclosed,f))}});function find_scopes_visible_from(i){const n=new Set;for(const o of new Set(i))(function s(l){l==null||n.has(l)||(n.add(l),s(l.parent_scope))})(o);return[...n]}AST_Scope.DEFMETHOD("create_symbol",function(i,{source:n,tentative_name:o,scope:s,conflict_scopes:l=[s],init:f=null}={}){let E;if(l=find_scopes_visible_from(l),o){o=E=o.replace(/(?:^[^a-z_$]|[^a-z0-9_$])/ig,"_");let N=0;for(;l.find(x=>x.conflicting_def_shallow(E));)E=o+"$"+N++}if(!E)throw new Error("No symbol name could be generated in create_symbol()");const g=make_node(i,n,{name:E,scope:s});return this.def_variable(g,f||null),g.mark_enclosed(),g});AST_Node.DEFMETHOD("is_block_scope",return_false);AST_Class.DEFMETHOD("is_block_scope",return_false);AST_Lambda.DEFMETHOD("is_block_scope",return_false);AST_Toplevel.DEFMETHOD("is_block_scope",return_false);AST_SwitchBranch.DEFMETHOD("is_block_scope",return_false);AST_Block.DEFMETHOD("is_block_scope",return_true);AST_Scope.DEFMETHOD("is_block_scope",function(){return this._block_scope||!1});AST_IterationStatement.DEFMETHOD("is_block_scope",return_true);AST_Lambda.DEFMETHOD("init_scope_vars",function(){AST_Scope.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1,this.def_variable(new AST_SymbolFunarg({name:"arguments",start:this.start,end:this.end}))});AST_Arrow.DEFMETHOD("init_scope_vars",function(){AST_Scope.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1});AST_Symbol.DEFMETHOD("mark_enclosed",function(){for(var i=this.definition(),n=this.scope;n&&(push_uniq(n.enclosed,i),n!==i.scope);)n=n.parent_scope});AST_Symbol.DEFMETHOD("reference",function(){this.definition().references.push(this),this.mark_enclosed()});AST_Scope.DEFMETHOD("find_variable",function(i){return i instanceof AST_Symbol&&(i=i.name),this.variables.get(i)||this.parent_scope&&this.parent_scope.find_variable(i)});AST_Scope.DEFMETHOD("def_function",function(i,n){var o=this.def_variable(i,n);return(!o.init||o.init instanceof AST_Defun)&&(o.init=n),o});AST_Scope.DEFMETHOD("def_variable",function(i,n){var o=this.variables.get(i.name);return o?(o.orig.push(i),o.init&&(o.scope!==i.scope||o.init instanceof AST_Function)&&(o.init=n)):(o=new SymbolDef(this,i,n),this.variables.set(i.name,o),o.global=!this.parent_scope),i.thedef=o});function next_mangled(i,n){let o;scopes_with_block_defuns&&(o=i.get_defun_scope())&&scopes_with_block_defuns.has(o)&&(i=o);var s=i.enclosed,l=n.nth_identifier;e:for(;;){var f=l.get(++i.cname);if(!ALL_RESERVED_WORDS.has(f)&&!n.reserved.has(f)){if(unmangleable_names&&unmangleable_names.has(f))continue e;for(let E=s.length;--E>=0;){const g=s[E],N=g.mangled_name||g.unmangleable(n)&&g.name;if(f==N)continue e}return f}}}AST_Scope.DEFMETHOD("next_mangled",function(i){return next_mangled(this,i)});AST_Toplevel.DEFMETHOD("next_mangled",function(i){let n;const o=this.mangled_names;do n=next_mangled(this,i);while(o.has(n));return n});AST_Function.DEFMETHOD("next_mangled",function(i,n){for(var o=n.orig[0]instanceof AST_SymbolFunarg&&this.name&&this.name.definition(),s=o?o.mangled_name||o.name:null;;){var l=next_mangled(this,i);if(!s||s!=l)return l}});AST_Symbol.DEFMETHOD("unmangleable",function(i){var n=this.definition();return!n||n.unmangleable(i)});AST_Label.DEFMETHOD("unmangleable",return_false);AST_Symbol.DEFMETHOD("unreferenced",function(){return!this.definition().references.length&&!this.scope.pinned()});AST_Symbol.DEFMETHOD("definition",function(){return this.thedef});AST_Symbol.DEFMETHOD("global",function(){return this.thedef.global});function format_mangler_options(i){return i=defaults(i,{eval:!1,nth_identifier:base54,ie8:!1,keep_classnames:!1,keep_fnames:!1,module:!1,reserved:[],toplevel:!1}),i.module&&(i.toplevel=!0),!Array.isArray(i.reserved)&&!(i.reserved instanceof Set)&&(i.reserved=[]),i.reserved=new Set(i.reserved),i.reserved.add("arguments"),i}AST_Toplevel.DEFMETHOD("mangle_names",function(i){i=format_mangler_options(i);var n=i.nth_identifier,o=-1,s=[];i.keep_fnames&&(function_defs=new Set);const l=this.mangled_names=new Set;unmangleable_names=new Set,i.cache&&(this.globals.forEach(E),i.cache.props&&i.cache.props.forEach(function(g){l.add(g)}));var f=new TreeWalker(function(g,N){if(g instanceof AST_LabeledStatement){var x=o;return N(),o=x,!0}if(g instanceof AST_Defun&&!(f.parent()instanceof AST_Scope)&&(scopes_with_block_defuns=scopes_with_block_defuns||new Set,scopes_with_block_defuns.add(g.parent_scope.get_defun_scope())),g instanceof AST_Scope){g.variables.forEach(E);return}if(g.is_block_scope()){g.block_scope.variables.forEach(E);return}if(function_defs&&g instanceof AST_VarDef&&g.value instanceof AST_Lambda&&!g.value.name&&keep_name(i.keep_fnames,g.name.name)){function_defs.add(g.name.definition().id);return}if(g instanceof AST_Label){let w;do w=n.get(++o);while(ALL_RESERVED_WORDS.has(w));return g.mangled_name=w,!0}if(!(i.ie8||i.safari10)&&g instanceof AST_SymbolCatch){s.push(g.definition());return}});this.walk(f),(i.keep_fnames||i.keep_classnames)&&s.forEach(g=>{g.name.length<6&&g.unmangleable(i)&&unmangleable_names.add(g.name)}),s.forEach(g=>{g.mangle(i)}),function_defs=null,unmangleable_names=null,scopes_with_block_defuns=null;function E(g){g.export&MASK_EXPORT_DONT_MANGLE?unmangleable_names.add(g.name):i.reserved.has(g.name)||s.push(g)}});AST_Toplevel.DEFMETHOD("find_colliding_names",function(i){const n=i.cache&&i.cache.props,o=new Set;return i.reserved.forEach(s),this.globals.forEach(l),this.walk(new TreeWalker(function(f){f instanceof AST_Scope&&f.variables.forEach(l),f instanceof AST_SymbolCatch&&l(f.definition())})),o;function s(f){o.add(f)}function l(f){var E=f.name;if(f.global&&n&&n.has(E))E=n.get(E);else if(!f.unmangleable(i))return;s(E)}});AST_Toplevel.DEFMETHOD("expand_names",function(i){i=format_mangler_options(i);var n=i.nth_identifier;n.reset&&n.sort&&(n.reset(),n.sort());var o=this.find_colliding_names(i),s=0;this.globals.forEach(f),this.walk(new TreeWalker(function(E){E instanceof AST_Scope&&E.variables.forEach(f),E instanceof AST_SymbolCatch&&f(E.definition())}));function l(){var E;do E=n.get(s++);while(o.has(E)||ALL_RESERVED_WORDS.has(E));return E}function f(E){if(E.global&&i.cache||E.unmangleable(i)||i.reserved.has(E.name))return;const g=redefined_catch_def(E),N=E.name=g?g.name:l();E.orig.forEach(function(x){x.name=N}),E.references.forEach(function(x){x.name=N})}});AST_Node.DEFMETHOD("tail_node",return_this);AST_Sequence.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]});AST_Toplevel.DEFMETHOD("compute_char_frequency",function(i){i=format_mangler_options(i);var n=i.nth_identifier;if(!n.reset||!n.consider||!n.sort)return;n.reset();try{AST_Node.prototype.print=function(s,l){this._print(s,l),this instanceof AST_Symbol&&!this.unmangleable(i)?n.consider(this.name,-1):i.properties&&(this instanceof AST_DotHash?n.consider("#"+this.property,-1):this instanceof AST_Dot?n.consider(this.property,-1):this instanceof AST_Sub&&o(this.property))},n.consider(this.print_to_string(),1)}finally{AST_Node.prototype.print=AST_Node.prototype._print}n.sort();function o(s){s instanceof AST_String?n.consider(s.value,-1):s instanceof AST_Conditional?(o(s.consequent),o(s.alternative)):s instanceof AST_Sequence&&o(s.tail_node())}});const base54=(()=>{const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_".split(""),n="0123456789".split("");let o,s;function l(){s=new Map,i.forEach(function(x){s.set(x,0)}),n.forEach(function(x){s.set(x,0)})}function f(x,w){for(var R=x.length;--R>=0;)s.set(x[R],s.get(x[R])+w)}function E(x,w){return s.get(w)-s.get(x)}function g(){o=mergeSort(i,E).concat(mergeSort(n,E))}l(),g();function N(x){var w="",R=54;x++;do x--,w+=o[x%R],x=Math.floor(x/R),R=64;while(x>0);return w}return{get:N,consider:f,reset:l,sort:g}})();let mangle_options;AST_Node.prototype.size=function(i,n){mangle_options=i&&i._mangle_options;let o=0;return walk_parent(this,(s,l)=>{if(o+=s._size(l),s instanceof AST_Arrow&&s.is_braceless())return o+=s.body[0].value._size(l),!0},n||i&&i.stack),mangle_options=void 0,o};AST_Node.prototype._size=()=>0;AST_Debugger.prototype._size=()=>8;AST_Directive.prototype._size=function(){return 2+this.value.length};const list_overhead=i=>i.length&&i.length-1;AST_Block.prototype._size=function(){return 2+list_overhead(this.body)};AST_Toplevel.prototype._size=function(){return list_overhead(this.body)};AST_EmptyStatement.prototype._size=()=>1;AST_LabeledStatement.prototype._size=()=>2;AST_Do.prototype._size=()=>9;AST_While.prototype._size=()=>7;AST_For.prototype._size=()=>8;AST_ForIn.prototype._size=()=>8;AST_With.prototype._size=()=>6;AST_Expansion.prototype._size=()=>3;const lambda_modifiers=i=>(i.is_generator?1:0)+(i.async?6:0);AST_Accessor.prototype._size=function(){return lambda_modifiers(this)+4+list_overhead(this.argnames)+list_overhead(this.body)};AST_Function.prototype._size=function(i){return!!first_in_statement(i)*2+lambda_modifiers(this)+12+list_overhead(this.argnames)+list_overhead(this.body)};AST_Defun.prototype._size=function(){return lambda_modifiers(this)+13+list_overhead(this.argnames)+list_overhead(this.body)};AST_Arrow.prototype._size=function(){let i=2+list_overhead(this.argnames);this.argnames.length===1&&this.argnames[0]instanceof AST_Symbol||(i+=2);const n=this.is_braceless()?0:list_overhead(this.body)+2;return lambda_modifiers(this)+i+n};AST_Destructuring.prototype._size=()=>2;AST_TemplateString.prototype._size=function(){return 2+Math.floor(this.segments.length/2)*3};AST_TemplateSegment.prototype._size=function(){return this.value.length};AST_Return.prototype._size=function(){return this.value?7:6};AST_Throw.prototype._size=()=>6;AST_Break.prototype._size=function(){return this.label?6:5};AST_Continue.prototype._size=function(){return this.label?9:8};AST_If.prototype._size=()=>4;AST_Switch.prototype._size=function(){return 8+list_overhead(this.body)};AST_Case.prototype._size=function(){return 5+list_overhead(this.body)};AST_Default.prototype._size=function(){return 8+list_overhead(this.body)};AST_Try.prototype._size=()=>3;AST_Catch.prototype._size=function(){let i=7+list_overhead(this.body);return this.argname&&(i+=2),i};AST_Finally.prototype._size=function(){return 7+list_overhead(this.body)};AST_Var.prototype._size=function(){return 4+list_overhead(this.definitions)};AST_Let.prototype._size=function(){return 4+list_overhead(this.definitions)};AST_Const.prototype._size=function(){return 6+list_overhead(this.definitions)};AST_Using.prototype._size=function(){return(this.await?6:0)+6+list_overhead(this.definitions)};AST_VarDefLike.prototype._size=function(){return this.value?1:0};AST_NameMapping.prototype._size=function(){return this.name?4:0};AST_Import.prototype._size=function(){let i=6;return this.imported_name&&(i+=1),(this.imported_name||this.imported_names)&&(i+=5),this.imported_names&&(i+=2+list_overhead(this.imported_names)),i};AST_ImportMeta.prototype._size=()=>11;AST_Export.prototype._size=function(){let i=7+(this.is_default?8:0);return this.exported_value&&(i+=this.exported_value._size()),this.exported_names&&(i+=2+list_overhead(this.exported_names)),this.module_name&&(i+=5),i};AST_Call.prototype._size=function(){return this.optional?4+list_overhead(this.args):2+list_overhead(this.args)};AST_New.prototype._size=function(){return 6+list_overhead(this.args)};AST_Sequence.prototype._size=function(){return list_overhead(this.expressions)};AST_Dot.prototype._size=function(){return this.optional?this.property.length+2:this.property.length+1};AST_DotHash.prototype._size=function(){return this.optional?this.property.length+3:this.property.length+2};AST_Sub.prototype._size=function(){return this.optional?4:2};AST_Unary.prototype._size=function(){return this.operator==="typeof"?7:this.operator==="void"?5:this.operator.length};AST_Binary.prototype._size=function(i){if(this.operator==="in")return 4;let n=this.operator.length;return(this.operator==="+"||this.operator==="-")&&this.right instanceof AST_Unary&&this.right.operator===this.operator&&(n+=1),this.needs_parens(i)&&(n+=2),n};AST_Conditional.prototype._size=()=>3;AST_Array.prototype._size=function(){return 2+list_overhead(this.elements)};AST_Object.prototype._size=function(i){let n=2;return first_in_statement(i)&&(n+=2),n+list_overhead(this.properties)};const key_size=i=>typeof i=="string"?i.length:0;AST_ObjectKeyVal.prototype._size=function(){return key_size(this.key)+1};const static_size=i=>i?7:0;AST_ObjectGetter.prototype._size=function(){return 5+static_size(this.static)+key_size(this.key)};AST_ObjectSetter.prototype._size=function(){return 5+static_size(this.static)+key_size(this.key)};AST_ConciseMethod.prototype._size=function(){return static_size(this.static)+key_size(this.key)};AST_PrivateMethod.prototype._size=function(){return AST_ConciseMethod.prototype._size.call(this)+1};AST_PrivateGetter.prototype._size=function(){return AST_ConciseMethod.prototype._size.call(this)+4};AST_PrivateSetter.prototype._size=function(){return AST_ConciseMethod.prototype._size.call(this)+4};AST_PrivateIn.prototype._size=function(){return 5};AST_Class.prototype._size=function(){return(this.name?8:7)+(this.extends?8:0)};AST_ClassStaticBlock.prototype._size=function(){return 8+list_overhead(this.body)};AST_ClassProperty.prototype._size=function(){return static_size(this.static)+(typeof this.key=="string"?this.key.length+2:0)+(this.value?1:0)};AST_ClassPrivateProperty.prototype._size=function(){return AST_ClassProperty.prototype._size.call(this)+1};AST_Symbol.prototype._size=function(){return mangle_options&&this.thedef&&!this.thedef.unmangleable(mangle_options)?1:this.name.length};AST_SymbolClassProperty.prototype._size=function(){return this.name.length};AST_SymbolRef.prototype._size=AST_SymbolDeclaration.prototype._size=function(){return this.name==="arguments"?9:AST_Symbol.prototype._size.call(this)};AST_NewTarget.prototype._size=()=>10;AST_SymbolImportForeign.prototype._size=function(){return this.name.length};AST_SymbolExportForeign.prototype._size=function(){return this.name.length};AST_This.prototype._size=()=>4;AST_Super.prototype._size=()=>5;AST_String.prototype._size=function(){return this.value.length+2};AST_Number.prototype._size=function(){const{value:i}=this;return i===0?1:i>0&&Math.floor(i)===i?Math.floor(Math.log10(i)+1):i.toString().length};AST_BigInt.prototype._size=function(){return this.value.length};AST_RegExp.prototype._size=function(){return this.value.toString().length};AST_Null.prototype._size=()=>4;AST_NaN.prototype._size=()=>3;AST_Undefined.prototype._size=()=>6;AST_Hole.prototype._size=()=>0;AST_Infinity.prototype._size=()=>8;AST_True.prototype._size=()=>4;AST_False.prototype._size=()=>5;AST_Await.prototype._size=()=>6;AST_Yield.prototype._size=()=>6;const UNUSED=1,TRUTHY=2,FALSY=4,UNDEFINED=8,INLINED=16,WRITE_ONLY=32,SQUEEZED=256,OPTIMIZED=512,TOP=1024,CLEAR_BETWEEN_PASSES=SQUEEZED|OPTIMIZED|TOP,has_flag=(i,n)=>i.flags&n,set_flag=(i,n)=>{i.flags|=n},clear_flag=(i,n)=>{i.flags&=~n};function merge_sequence(i,n){return n instanceof AST_Sequence?i.push(...n.expressions):i.push(n),i}function make_sequence(i,n){if(n.length==1)return n[0];if(n.length==0)throw new Error("trying to create a sequence with length zero!");return make_node(AST_Sequence,i,{expressions:n.reduce(merge_sequence,[])})}function make_empty_function(i){return make_node(AST_Function,i,{uses_arguments:!1,argnames:[],body:[],is_generator:!1,async:!1,variables:new Map,uses_with:!1,uses_eval:!1,parent_scope:null,enclosed:[],cname:0,block_scope:void 0})}function make_node_from_constant(i,n){switch(typeof i){case"string":return make_node(AST_String,n,{value:i});case"number":return isNaN(i)?make_node(AST_NaN,n):isFinite(i)?1/i<0?make_node(AST_UnaryPrefix,n,{operator:"-",expression:make_node(AST_Number,n,{value:-i})}):make_node(AST_Number,n,{value:i}):i<0?make_node(AST_UnaryPrefix,n,{operator:"-",expression:make_node(AST_Infinity,n)}):make_node(AST_Infinity,n);case"bigint":return make_node(AST_BigInt,n,{value:i.toString()});case"boolean":return make_node(i?AST_True:AST_False,n);case"undefined":return make_void_0(n);default:if(i===null)return make_node(AST_Null,n,{value:null});if(i instanceof RegExp)return make_node(AST_RegExp,n,{value:{source:regexp_source_fix(i.source),flags:i.flags}});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof i}))}}function best_of_expression(i,n){return i.size()>n.size()?n:i}function best_of_statement(i,n){return best_of_expression(make_node(AST_SimpleStatement,i,{body:i}),make_node(AST_SimpleStatement,n,{body:n})).body}function best_of(i,n,o){return first_in_statement(i)?best_of_statement(n,o):best_of_expression(n,o)}function get_simple_key(i){if(i instanceof AST_Constant)return i.getValue();if(!(i instanceof AST_UnaryPrefix&&i.operator=="void"&&i.expression instanceof AST_Constant))return i}function read_property(i,n){if(n=get_simple_key(n),!(n instanceof AST_Node)){var o;if(i instanceof AST_Array){var s=i.elements;if(n=="length")return make_node_from_constant(s.length,i);typeof n=="number"&&n in s&&(o=s[n])}else if(i instanceof AST_Object){n=""+n;for(var l=i.properties,f=l.length;--f>=0;){var E=l[f];if(!(E instanceof AST_ObjectKeyVal))return;!o&&l[f].key===n&&(o=l[f].value)}}return o instanceof AST_SymbolRef&&o.fixed_value()||o}}function has_break_or_continue(i,n){var o=!1,s=new TreeWalker(function(l){if(o||l instanceof AST_Scope)return!0;if(l instanceof AST_LoopControl&&s.loopcontrol_target(l)===i)return o=!0});return n instanceof AST_LabeledStatement&&s.push(n),s.push(i),i.body.walk(s),o}function maintain_this_binding(i,n,o){if(requires_sequence_to_maintain_binding(i,n,o)){const s=make_node(AST_Number,n,{value:0});return make_sequence(n,[s,o])}else return o}function requires_sequence_to_maintain_binding(i,n,o){return i instanceof AST_UnaryPrefix&&i.operator=="delete"||i instanceof AST_Call&&i.expression===n&&(o instanceof AST_Chain||o instanceof AST_PropAccess||o instanceof AST_SymbolRef&&o.name=="eval")}function is_func_expr(i){return i instanceof AST_Arrow||i instanceof AST_Function}function is_iife_call(i){return i.TYPE!="Call"?!1:i.expression instanceof AST_Function||is_iife_call(i.expression)}function is_empty(i){return i===null||i instanceof AST_EmptyStatement?!0:i instanceof AST_BlockStatement?i.body.length==0:!1}const identifier_atom=makePredicate("Infinity NaN undefined");function is_identifier_atom(i){return i instanceof AST_Infinity||i instanceof AST_NaN||i instanceof AST_Undefined}function is_ref_of(i,n){if(!(i instanceof AST_SymbolRef))return!1;for(var o=i.definition().orig,s=o.length;--s>=0;)if(o[s]instanceof n)return!0}function can_be_evicted_from_block(i){return!(i instanceof AST_DefClass||i instanceof AST_Defun||i instanceof AST_Let||i instanceof AST_Const||i instanceof AST_Using||i instanceof AST_Export||i instanceof AST_Import)}function as_statement_array(i){if(i===null)return[];if(i instanceof AST_BlockStatement)return i.body;if(i instanceof AST_EmptyStatement)return[];if(i instanceof AST_Statement)return[i];throw new Error("Can't convert thing to statement array")}function is_reachable(i,n){const o=s=>{if(s instanceof AST_SymbolRef&&n.includes(s.definition()))return walk_abort};return walk_parent(i,(s,l)=>{if(s instanceof AST_Scope&&s!==i){var f=l.parent();return f instanceof AST_Call&&f.expression===s&&!(s.async||s.is_generator)?void 0:walk(s,o)?walk_abort:!0}})}function is_recursive_ref(i,n){for(var o,s=0;o=i.parent(s);s++)if(o instanceof AST_Lambda||o instanceof AST_Class){var l=o.name;if(l&&l.definition()===n)return!0}return!1}function retain_top_func(i,n){return n.top_retain&&i instanceof AST_Defun&&has_flag(i,TOP)&&i.name&&n.top_retain(i.name.definition())}function make_nested_lookup(i){const n=new Map;for(var o of Object.keys(i))n.set(o,makePredicate(i[o]));return(l,f)=>{const E=n.get(l);return E!=null&&E.has(f)}}const pure_prop_access_globals=new Set(["Number","String","Array","Object","Function","Promise"]),object_methods=["constructor","toString","valueOf"],is_pure_native_method=make_nested_lookup({Array:["at","flat","includes","indexOf","join","lastIndexOf","slice",...object_methods],Boolean:object_methods,Function:object_methods,Number:["toExponential","toFixed","toPrecision",...object_methods],Object:object_methods,RegExp:["test",...object_methods],String:["at","charAt","charCodeAt","charPointAt","concat","endsWith","fromCharCode","fromCodePoint","includes","indexOf","italics","lastIndexOf","localeCompare","match","matchAll","normalize","padStart","padEnd","repeat","replace","replaceAll","search","slice","split","startsWith","substr","substring","repeat","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimEnd","trimStart",...object_methods]}),is_pure_native_fn=make_nested_lookup({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","hasOwn","keys"],String:["fromCharCode"]}),is_pure_native_value=make_nested_lookup({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),is_undeclared_ref=i=>i instanceof AST_SymbolRef&&i.definition().undeclared,bitwise_binop=makePredicate("<<< >> << & | ^ ~"),lazy_op=makePredicate("&& || ??"),unary_side_effects=makePredicate("delete ++ --");(function(i){const n=makePredicate("! delete"),o=makePredicate("in instanceof == != === !== < <= >= >");i(AST_Node,return_false),i(AST_UnaryPrefix,function(){return n.has(this.operator)}),i(AST_Binary,function(){return o.has(this.operator)||lazy_op.has(this.operator)&&this.left.is_boolean()&&this.right.is_boolean()}),i(AST_Conditional,function(){return this.consequent.is_boolean()&&this.alternative.is_boolean()}),i(AST_Assign,function(){return this.operator=="="&&this.right.is_boolean()}),i(AST_Sequence,function(){return this.tail_node().is_boolean()}),i(AST_True,return_true),i(AST_False,return_true)})(function(i,n){i.DEFMETHOD("is_boolean",n)});(function(i){i(AST_Node,return_false),i(AST_Number,return_true);const n=makePredicate("+ - ~ ++ --");i(AST_Unary,function(s){return n.has(this.operator)&&this.expression.is_number(s)});const o=makePredicate("- * / % & | ^ << >> >>>");i(AST_Binary,function(s){return this.operator==="+"?this.left.is_number(s)&&this.right.is_number_or_bigint(s)||this.right.is_number(s)&&this.left.is_number_or_bigint(s):o.has(this.operator)?this.left.is_number(s)||this.right.is_number(s):!1}),i(AST_Assign,function(s){return(this.operator==="="||o.has(this.operator.slice(0,-1)))&&this.right.is_number(s)}),i(AST_Sequence,function(s){return this.tail_node().is_number(s)}),i(AST_Conditional,function(s){return this.consequent.is_number(s)&&this.alternative.is_number(s)})})(function(i,n){i.DEFMETHOD("is_number",n)});(function(i){i(AST_Node,return_false),i(AST_BigInt,return_true);const n=makePredicate("+ - ~ ++ --");i(AST_Unary,function(s){return n.has(this.operator)&&this.expression.is_bigint(s)});const o=makePredicate("- * / % & | ^ << >>");i(AST_Binary,function(s){return this.operator==="+"?this.left.is_bigint(s)&&this.right.is_number_or_bigint(s)||this.right.is_bigint(s)&&this.left.is_number_or_bigint(s):o.has(this.operator)?this.left.is_bigint(s)||this.right.is_bigint(s):!1}),i(AST_Assign,function(s){return(o.has(this.operator.slice(0,-1))||this.operator=="=")&&this.right.is_bigint(s)}),i(AST_Sequence,function(s){return this.tail_node().is_bigint(s)}),i(AST_Conditional,function(s){return this.consequent.is_bigint(s)&&this.alternative.is_bigint(s)})})(function(i,n){i.DEFMETHOD("is_bigint",n)});(function(i){i(AST_Node,return_false),i(AST_Number,return_true),i(AST_BigInt,return_true);const n=makePredicate("+ - ~ ++ --");i(AST_Unary,function(s){return n.has(this.operator)});const o=makePredicate("- * / % & | ^ << >>");i(AST_Binary,function(s){return this.operator==="+"?this.left.is_number_or_bigint(s)&&this.right.is_number_or_bigint(s):o.has(this.operator)}),i(AST_Assign,function(s){return o.has(this.operator.slice(0,-1))||this.operator=="="&&this.right.is_number_or_bigint(s)}),i(AST_Sequence,function(s){return this.tail_node().is_number_or_bigint(s)}),i(AST_Conditional,function(s){return this.consequent.is_number_or_bigint(s)&&this.alternative.is_number_or_bigint(s)})})(function(i,n){i.DEFMETHOD("is_number_or_bigint",n)});(function(i){i(AST_Node,return_false),i(AST_Number,function(n){return this.value===(this.value|0)}),i(AST_UnaryPrefix,function(n){return this.operator=="~"?this.expression.is_number(n):this.operator==="+"?this.expression.is_32_bit_integer(n):!1}),i(AST_Binary,function(n){return bitwise_binop.has(this.operator)&&(this.left.is_number(n)||this.right.is_number(n))})})(function(i,n){i.DEFMETHOD("is_32_bit_integer",n)});(function(i){i(AST_Node,return_false),i(AST_String,return_true),i(AST_TemplateString,return_true),i(AST_UnaryPrefix,function(){return this.operator=="typeof"}),i(AST_Binary,function(n){return this.operator=="+"&&(this.left.is_string(n)||this.right.is_string(n))}),i(AST_Assign,function(n){return(this.operator=="="||this.operator=="+=")&&this.right.is_string(n)}),i(AST_Sequence,function(n){return this.tail_node().is_string(n)}),i(AST_Conditional,function(n){return this.consequent.is_string(n)&&this.alternative.is_string(n)})})(function(i,n){i.DEFMETHOD("is_string",n)});function is_undefined(i,n){return has_flag(i,UNDEFINED)||i instanceof AST_Undefined||i instanceof AST_UnaryPrefix&&i.operator=="void"&&!i.expression.has_side_effects(n)}function is_null_or_undefined(i,n){let o;return i instanceof AST_Null||is_undefined(i,n)||i instanceof AST_SymbolRef&&(o=i.definition().fixed)instanceof AST_Node&&is_nullish(o,n)}function is_nullish_shortcircuited(i,n){return i instanceof AST_PropAccess||i instanceof AST_Call?i.optional&&is_null_or_undefined(i.expression,n)||is_nullish_shortcircuited(i.expression,n):i instanceof AST_Chain?is_nullish_shortcircuited(i.expression,n):!1}function is_nullish(i,n){return is_null_or_undefined(i,n)?!0:is_nullish_shortcircuited(i,n)}(function(i){i(AST_Node,return_true),i(AST_EmptyStatement,return_false),i(AST_Constant,return_false),i(AST_This,return_false);function n(o,s){for(var l=o.length;--l>=0;)if(o[l].has_side_effects(s))return!0;return!1}i(AST_Block,function(o){return n(this.body,o)}),i(AST_Call,function(o){return!this.is_callee_pure(o)&&(!this.expression.is_call_pure(o)||this.expression.has_side_effects(o))?!0:n(this.args,o)}),i(AST_Switch,function(o){return this.expression.has_side_effects(o)||n(this.body,o)}),i(AST_Case,function(o){return this.expression.has_side_effects(o)||n(this.body,o)}),i(AST_Try,function(o){return this.body.has_side_effects(o)||this.bcatch&&this.bcatch.has_side_effects(o)||this.bfinally&&this.bfinally.has_side_effects(o)}),i(AST_If,function(o){return this.condition.has_side_effects(o)||this.body&&this.body.has_side_effects(o)||this.alternative&&this.alternative.has_side_effects(o)}),i(AST_ImportMeta,return_false),i(AST_LabeledStatement,function(o){return this.body.has_side_effects(o)}),i(AST_SimpleStatement,function(o){return this.body.has_side_effects(o)}),i(AST_Lambda,return_false),i(AST_Class,function(o){return this.extends&&this.extends.has_side_effects(o)?!0:n(this.properties,o)}),i(AST_ClassStaticBlock,function(o){return n(this.body,o)}),i(AST_Binary,function(o){return this.left.has_side_effects(o)||this.right.has_side_effects(o)}),i(AST_Assign,return_true),i(AST_Conditional,function(o){return this.condition.has_side_effects(o)||this.consequent.has_side_effects(o)||this.alternative.has_side_effects(o)}),i(AST_Unary,function(o){return unary_side_effects.has(this.operator)||this.expression.has_side_effects(o)}),i(AST_SymbolRef,function(o){return!this.is_declared(o)&&!pure_prop_access_globals.has(this.name)}),i(AST_SymbolClassProperty,return_false),i(AST_SymbolDeclaration,return_false),i(AST_Object,function(o){return n(this.properties,o)}),i(AST_ObjectKeyVal,function(o){return this.computed_key()&&this.key.has_side_effects(o)||this.value&&this.value.has_side_effects(o)}),i([AST_ClassProperty,AST_ClassPrivateProperty],function(o){return this.computed_key()&&this.key.has_side_effects(o)||this.static&&this.value&&this.value.has_side_effects(o)}),i([AST_PrivateMethod,AST_PrivateGetter,AST_PrivateSetter,AST_ConciseMethod,AST_ObjectGetter,AST_ObjectSetter],function(o){return this.computed_key()&&this.key.has_side_effects(o)}),i(AST_Array,function(o){return n(this.elements,o)}),i(AST_Dot,function(o){return is_nullish(this,o)?this.expression.has_side_effects(o):!this.optional&&this.expression.may_throw_on_access(o)?!0:this.expression.has_side_effects(o)}),i(AST_Sub,function(o){if(is_nullish(this,o))return this.expression.has_side_effects(o);if(!this.optional&&this.expression.may_throw_on_access(o))return!0;var s=this.property.has_side_effects(o);return s&&this.optional?!0:s||this.expression.has_side_effects(o)}),i(AST_Chain,function(o){return this.expression.has_side_effects(o)}),i(AST_Sequence,function(o){return n(this.expressions,o)}),i(AST_Definitions,function(o){return n(this.definitions,o)}),i(AST_VarDef,function(){return this.value!=null}),i(AST_TemplateSegment,return_false),i(AST_TemplateString,function(o){return n(this.segments,o)})})(function(i,n){for(const o of[].concat(i))o.DEFMETHOD("has_side_effects",n)});(function(i){i(AST_Node,return_true),i(AST_Constant,return_false),i(AST_EmptyStatement,return_false),i(AST_Lambda,return_false),i(AST_SymbolDeclaration,return_false),i(AST_This,return_false),i(AST_ImportMeta,return_false);function n(o,s){for(var l=o.length;--l>=0;)if(o[l].may_throw(s))return!0;return!1}i(AST_Class,function(o){return this.extends&&this.extends.may_throw(o)?!0:n(this.properties,o)}),i(AST_ClassStaticBlock,function(o){return n(this.body,o)}),i(AST_Array,function(o){return n(this.elements,o)}),i(AST_Assign,function(o){return this.right.may_throw(o)?!0:!o.has_directive("use strict")&&this.operator=="="&&this.left instanceof AST_SymbolRef?!1:this.left.may_throw(o)}),i(AST_Binary,function(o){return this.left.may_throw(o)||this.right.may_throw(o)}),i(AST_Block,function(o){return n(this.body,o)}),i(AST_Call,function(o){return is_nullish(this,o)?!1:n(this.args,o)?!0:this.is_callee_pure(o)?!1:this.expression.may_throw(o)?!0:!(this.expression instanceof AST_Lambda)||n(this.expression.body,o)}),i(AST_Case,function(o){return this.expression.may_throw(o)||n(this.body,o)}),i(AST_Conditional,function(o){return this.condition.may_throw(o)||this.consequent.may_throw(o)||this.alternative.may_throw(o)}),i(AST_Definitions,function(o){return n(this.definitions,o)}),i(AST_If,function(o){return this.condition.may_throw(o)||this.body&&this.body.may_throw(o)||this.alternative&&this.alternative.may_throw(o)}),i(AST_LabeledStatement,function(o){return this.body.may_throw(o)}),i(AST_Object,function(o){return n(this.properties,o)}),i(AST_ObjectKeyVal,function(o){return this.computed_key()&&this.key.may_throw(o)||this.value?this.value.may_throw(o):!1}),i([AST_ClassProperty,AST_ClassPrivateProperty],function(o){return this.computed_key()&&this.key.may_throw(o)||this.static&&this.value&&this.value.may_throw(o)}),i([AST_ConciseMethod,AST_ObjectGetter,AST_ObjectSetter],function(o){return this.computed_key()&&this.key.may_throw(o)}),i([AST_PrivateMethod,AST_PrivateGetter,AST_PrivateSetter],return_false),i(AST_Return,function(o){return this.value&&this.value.may_throw(o)}),i(AST_Sequence,function(o){return n(this.expressions,o)}),i(AST_SimpleStatement,function(o){return this.body.may_throw(o)}),i(AST_Dot,function(o){return is_nullish(this,o)?!1:!this.optional&&this.expression.may_throw_on_access(o)||this.expression.may_throw(o)}),i(AST_Sub,function(o){return is_nullish(this,o)?!1:!this.optional&&this.expression.may_throw_on_access(o)||this.expression.may_throw(o)||this.property.may_throw(o)}),i(AST_Chain,function(o){return this.expression.may_throw(o)}),i(AST_Switch,function(o){return this.expression.may_throw(o)||n(this.body,o)}),i(AST_SymbolRef,function(o){return!this.is_declared(o)&&!pure_prop_access_globals.has(this.name)}),i(AST_SymbolClassProperty,return_false),i(AST_Try,function(o){return this.bcatch?this.bcatch.may_throw(o):this.body.may_throw(o)||this.bfinally&&this.bfinally.may_throw(o)}),i(AST_Unary,function(o){return this.operator=="typeof"&&this.expression instanceof AST_SymbolRef?!1:this.expression.may_throw(o)}),i(AST_VarDef,function(o){return this.value?this.value.may_throw(o):!1})})(function(i,n){for(const o of[].concat(i))o.DEFMETHOD("may_throw",n)});(function(i){function n(o){let s=!0;return walk(this,l=>{if(l instanceof AST_SymbolRef){if(has_flag(this,INLINED))return s=!1,walk_abort;var f=l.definition();if(member(f,this.enclosed)&&!this.variables.has(f.name)){if(o){var E=o.find_variable(l);if(f.undeclared?!E:E===f)return s="f",!0}return s=!1,walk_abort}return!0}if(l instanceof AST_This&&this instanceof AST_Arrow)return s=!1,walk_abort}),s}i(AST_Node,return_false),i(AST_Constant,return_true),i(AST_Class,function(o){if(this.extends&&!this.extends.is_constant_expression(o))return!1;for(const s of this.properties)if(s.computed_key()&&!s.key.is_constant_expression(o)||s.static&&s.value&&!s.value.is_constant_expression(o)||s instanceof AST_ClassStaticBlock)return!1;return n.call(this,o)}),i(AST_Lambda,n),i(AST_Unary,function(){return this.expression.is_constant_expression()}),i(AST_Binary,function(){return this.left.is_constant_expression()&&this.right.is_constant_expression()}),i(AST_Array,function(){return this.elements.every(o=>o.is_constant_expression())}),i(AST_Object,function(){return this.properties.every(o=>o.is_constant_expression())}),i(AST_ObjectProperty,function(){return!!(!(this.key instanceof AST_Node)&&this.value&&this.value.is_constant_expression())})})(function(i,n){i.DEFMETHOD("is_constant_expression",n)});(function(i){AST_Node.DEFMETHOD("may_throw_on_access",function(o){return!o.option("pure_getters")||this._dot_throw(o)});function n(o){return/strict/.test(o.option("pure_getters"))}i(AST_Node,n),i(AST_Null,return_true),i(AST_Undefined,return_true),i(AST_Constant,return_false),i(AST_Array,return_false),i(AST_Object,function(o){if(!n(o))return!1;for(var s=this.properties.length;--s>=0;)if(this.properties[s]._dot_throw(o))return!0;return!1}),i(AST_Class,return_false),i(AST_ObjectProperty,return_false),i(AST_ObjectGetter,return_true),i(AST_Expansion,function(o){return this.expression._dot_throw(o)}),i(AST_Function,return_false),i(AST_Arrow,return_false),i(AST_UnaryPostfix,return_false),i(AST_UnaryPrefix,function(){return this.operator=="void"}),i(AST_Binary,function(o){return(this.operator=="&&"||this.operator=="||"||this.operator=="??")&&(this.left._dot_throw(o)||this.right._dot_throw(o))}),i(AST_Assign,function(o){return this.logical?!0:this.operator=="="&&this.right._dot_throw(o)}),i(AST_Conditional,function(o){return this.consequent._dot_throw(o)||this.alternative._dot_throw(o)}),i(AST_Dot,function(o){return n(o)?this.property=="prototype"?!(this.expression instanceof AST_Function||this.expression instanceof AST_Class):!0:!1}),i(AST_Chain,function(o){return this.expression._dot_throw(o)}),i(AST_Sequence,function(o){return this.tail_node()._dot_throw(o)}),i(AST_SymbolRef,function(o){if(this.name==="arguments"&&this.scope instanceof AST_Lambda)return!1;if(has_flag(this,UNDEFINED))return!0;if(!n(o)||is_undeclared_ref(this)&&this.is_declared(o)||this.is_immutable())return!1;var s=this.fixed_value();return!s||s._dot_throw(o)})})(function(i,n){i.DEFMETHOD("_dot_throw",n)});function is_lhs(i,n){if(n instanceof AST_Unary&&unary_side_effects.has(n.operator))return n.expression;if(n instanceof AST_Assign&&n.left===i||n instanceof AST_ForIn&&n.init===i)return i}(function(i){function n(s){return make_node(AST_UnaryPrefix,s,{operator:"!",expression:s})}function o(s,l,f){var E=n(s);if(f){var g=make_node(AST_SimpleStatement,l,{body:l});return best_of_expression(E,g)===g?l:E}return best_of_expression(E,l)}i(AST_Node,function(){return n(this)}),i(AST_Statement,function(){throw new Error("Cannot negate a statement")}),i(AST_Function,function(){return n(this)}),i(AST_Class,function(){return n(this)}),i(AST_Arrow,function(){return n(this)}),i(AST_UnaryPrefix,function(){return this.operator=="!"?this.expression:n(this)}),i(AST_Sequence,function(s){var l=this.expressions.slice();return l.push(l.pop().negate(s)),make_sequence(this,l)}),i(AST_Conditional,function(s,l){var f=this.clone();return f.consequent=f.consequent.negate(s),f.alternative=f.alternative.negate(s),o(this,f,l)}),i(AST_Binary,function(s,l){var f=this.clone(),E=this.operator;if(s.option("unsafe_comps"))switch(E){case"<=":return f.operator=">",f;case"<":return f.operator=">=",f;case">=":return f.operator="<",f;case">":return f.operator="<=",f}switch(E){case"==":return f.operator="!=",f;case"!=":return f.operator="==",f;case"===":return f.operator="!==",f;case"!==":return f.operator="===",f;case"&&":return f.operator="||",f.left=f.left.negate(s,l),f.right=f.right.negate(s),o(this,f,l);case"||":return f.operator="&&",f.left=f.left.negate(s,l),f.right=f.right.negate(s),o(this,f,l)}return n(this)})})(function(i,n){i.DEFMETHOD("negate",function(o,s){return n.call(this,o,s)})});(function(i){function n(o){return make_node(AST_UnaryPrefix,o,{operator:"~",expression:o})}i(AST_Node,function(o){return n(this)}),i(AST_Number,function(o){const s=~this.value;return s.toString().length>this.value.toString().length?n(this):make_node(AST_Number,this,{value:s})}),i(AST_UnaryPrefix,function(o,s){return this.operator=="~"&&(this.expression.is_32_bit_integer(o)||(s??o.in_32_bit_context()))?this.expression:n(this)})})(function(i,n){i.DEFMETHOD("bitwise_negate",n)});var global_pure_fns=makePredicate("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError");AST_Call.DEFMETHOD("is_callee_pure",function(i){if(i.option("unsafe")){var n=this.expression,o=this.args&&this.args[0]&&this.args[0].evaluate(i);if(n.expression&&n.expression.name==="hasOwnProperty"&&(o==null||o.thedef&&o.thedef.undeclared))return!1;if(is_undeclared_ref(n)&&global_pure_fns.has(n.name)||n instanceof AST_Dot&&is_undeclared_ref(n.expression)&&is_pure_native_fn(n.expression.name,n.property))return!0}return this instanceof AST_New&&i.option("pure_new")||i.option("side_effects")&&has_annotation(this,_PURE)?!0:!i.pure_funcs(this)});AST_Node.DEFMETHOD("is_call_pure",return_false);AST_Dot.DEFMETHOD("is_call_pure",function(i){if(!i.option("unsafe"))return;const n=this.expression;let o;return n instanceof AST_Array?o="Array":n.is_boolean()?o="Boolean":n.is_number(i)?o="Number":n instanceof AST_RegExp?o="RegExp":n.is_string(i)?o="String":this.may_throw_on_access(i)||(o="Object"),o!=null&&is_pure_native_method(o,this.property)});const aborts=i=>i&&i.aborts();(function(i){i(AST_Statement,return_null),i(AST_Jump,return_this);function n(){for(var o=0;o<this.body.length;o++)if(aborts(this.body[o]))return this.body[o];return null}i(AST_Import,return_null),i(AST_BlockStatement,n),i(AST_SwitchBranch,n),i(AST_DefClass,function(){for(const o of this.properties)if(o instanceof AST_ClassStaticBlock&&o.aborts())return o;return null}),i(AST_ClassStaticBlock,n),i(AST_If,function(){return this.alternative&&aborts(this.body)&&aborts(this.alternative)&&this})})(function(i,n){i.DEFMETHOD("aborts",n)});AST_Node.DEFMETHOD("contains_this",function(){return walk(this,i=>{if(i instanceof AST_This)return walk_abort;if(i!==this&&i instanceof AST_Scope&&!(i instanceof AST_Arrow))return!0})});function is_modified(i,n,o,s,l,f){var E=n.parent(l),g=is_lhs(o,E);if(g)return g;if(!f&&E instanceof AST_Call&&E.expression===o&&!(s instanceof AST_Arrow)&&!(s instanceof AST_Class)&&!E.is_callee_pure(i)&&(!(s instanceof AST_Function)||!(E instanceof AST_New)&&s.contains_this()))return!0;if(E instanceof AST_Array)return is_modified(i,n,E,E,l+1);if(E instanceof AST_ObjectKeyVal&&o===E.value){var N=n.parent(l+1);return is_modified(i,n,N,N,l+2)}if(E instanceof AST_PropAccess&&E.expression===o){var x=read_property(s,E.property);return!f&&is_modified(i,n,E,x,l+1)}}function is_used_in_expression(i){for(let n=-1,o,s;o=i.parent(n),s=i.parent(n+1);n++){if(s instanceof AST_Sequence)if(s.expressions.indexOf(o)!==s.expressions.length-1){const f=i.parent(n+2);return!(s.expressions.length>2||s.expressions.length===1||!requires_sequence_to_maintain_binding(f,s,s.expressions[1]))}else continue;if(s instanceof AST_Unary){const l=s.operator;if(l==="void")return!1;if(l==="typeof"||l==="+"||l==="-"||l==="!"||l==="~")continue}return!(s instanceof AST_SimpleStatement||s instanceof AST_LabeledStatement||s instanceof AST_Scope)}return!0}function def_eval(i,n){i.DEFMETHOD("_eval",n)}const nullish=Symbol("This AST_Chain is nullish");AST_Node.DEFMETHOD("evaluate",function(i){if(!i.option("evaluate"))return this;var n=this._eval(i,1);if(!n||n instanceof RegExp)return n;if(typeof n=="function"||typeof n=="object"||n==nullish)return this;if(typeof n=="string"){const o=this.size(i);if(n.length+2>o)return this}return n});var unaryPrefix=makePredicate("! ~ - + void");AST_Node.DEFMETHOD("is_constant",function(){return this instanceof AST_Constant?!(this instanceof AST_RegExp):this instanceof AST_UnaryPrefix&&unaryPrefix.has(this.operator)&&(this.expression instanceof AST_Constant||this.expression.is_constant())});def_eval(AST_Statement,function(){throw new Error(string_template("Cannot evaluate a statement [{file}:{line},{col}]",this.start))});def_eval(AST_Lambda,return_this);def_eval(AST_Class,return_this);def_eval(AST_Node,return_this);def_eval(AST_Constant,function(){return this.getValue()});const supports_bigint=typeof BigInt=="function";def_eval(AST_BigInt,function(){return supports_bigint?BigInt(this.value):this});def_eval(AST_RegExp,function(i){let n=i.evaluated_regexps.get(this.value);if(n===void 0&&regexp_is_safe(this.value.source)){try{const{source:o,flags:s}=this.value;n=new RegExp(o,s)}catch{n=null}i.evaluated_regexps.set(this.value,n)}return n||this});def_eval(AST_TemplateString,function(){return this.segments.length!==1?this:this.segments[0].value});def_eval(AST_Function,function(i){if(i.option("unsafe")){var n=function(){};return n.node=this,n.toString=()=>this.print_to_string(),n}return this});def_eval(AST_Array,function(i,n){if(i.option("unsafe")){for(var o=[],s=0,l=this.elements.length;s<l;s++){var f=this.elements[s],E=f._eval(i,n);if(f===E)return this;o.push(E)}return o}return this});def_eval(AST_Object,function(i,n){if(i.option("unsafe")){for(var o={},s=0,l=this.properties.length;s<l;s++){var f=this.properties[s];if(f instanceof AST_Expansion)return this;var E=f.key;if(E instanceof AST_Symbol)E=E.name;else if(E instanceof AST_Node&&(E=E._eval(i,n),E===f.key))return this;if(typeof Object.prototype[E]=="function")return this;if(!(f.value instanceof AST_Function)&&(o[E]=f.value._eval(i,n),o[E]===f.value))return this}return o}return this});var non_converting_unary=makePredicate("! typeof void");def_eval(AST_UnaryPrefix,function(i,n){var o=this.expression;if(i.option("typeofs")&&this.operator=="typeof"){if(o instanceof AST_Lambda||o instanceof AST_SymbolRef&&o.fixed_value()instanceof AST_Lambda)return"function";if((o instanceof AST_Object||o instanceof AST_Array||o instanceof AST_SymbolRef&&(o.fixed_value()instanceof AST_Object||o.fixed_value()instanceof AST_Array))&&!o.has_side_effects(i))return typeof{}}if(non_converting_unary.has(this.operator)||n++,o=o._eval(i,n),o===this.expression)return this;switch(this.operator){case"!":return!o;case"typeof":return o instanceof RegExp?this:typeof o;case"void":return;case"~":return~o;case"-":return-o;case"+":return+o}return this});var non_converting_binary=makePredicate("&& || ?? === !==");const identity_comparison=makePredicate("== != === !=="),has_identity=i=>typeof i=="object"||typeof i=="function"||typeof i=="symbol";def_eval(AST_Binary,function(i,n){non_converting_binary.has(this.operator)||n++;var o=this.left._eval(i,n);if(o===this.left)return this;var s=this.right._eval(i,n);if(s===this.right)return this;if(o!=null&&s!=null&&identity_comparison.has(this.operator)&&has_identity(o)&&has_identity(s)&&typeof o==typeof s)return this;if(typeof o=="bigint"!=(typeof s=="bigint")||typeof o=="bigint"&&(this.operator===">>>"||this.operator==="/"&&Number(s)===0))return this;var l;switch(this.operator){case"&&":l=o&&s;break;case"||":l=o||s;break;case"??":l=o??s;break;case"|":l=o|s;break;case"&":l=o&s;break;case"^":l=o^s;break;case"+":l=o+s;break;case"*":l=o*s;break;case"**":l=o**s;break;case"/":l=o/s;break;case"%":l=o%s;break;case"-":l=o-s;break;case"<<":l=o<<s;break;case">>":l=o>>s;break;case">>>":l=o>>>s;break;case"==":l=o==s;break;case"===":l=o===s;break;case"!=":l=o!=s;break;case"!==":l=o!==s;break;case"<":l=o<s;break;case"<=":l=o<=s;break;case">":l=o>s;break;case">=":l=o>=s;break;default:return this}return typeof l=="number"&&isNaN(l)&&i.find_parent(AST_With)?this:l});def_eval(AST_Conditional,function(i,n){var o=this.condition._eval(i,n);if(o===this.condition)return this;var s=o?this.consequent:this.alternative,l=s._eval(i,n);return l===s?this:l});const reentrant_ref_eval=new Set;def_eval(AST_SymbolRef,function(i,n){if(reentrant_ref_eval.has(this))return this;var o=this.fixed_value();if(!o)return this;reentrant_ref_eval.add(this);const s=o._eval(i,n);if(reentrant_ref_eval.delete(this),s===o)return this;if(s&&typeof s=="object"){var l=this.definition().escaped;if(l&&n>l)return this}return s});const global_objs={Array,Math,Number,Object,String},regexp_flags=new Set(["dotAll","global","ignoreCase","multiline","sticky","unicode"]);def_eval(AST_PropAccess,function(i,n){let o=this.expression._eval(i,n+1);if(o===nullish||this.optional&&o==null)return nullish;if(this.property==="length"){if(typeof o=="string")return o.length;if(o instanceof AST_Array&&o.elements.every(N=>!(N instanceof AST_Expansion))&&o.elements.every(N=>!N.has_side_effects(i)))return o.elements.length}if(i.option("unsafe")){var s=this.property;if(s instanceof AST_Node&&(s=s._eval(i,n),s===this.property))return this;var l=this.expression;if(is_undeclared_ref(l)){var f,E=l.name==="hasOwnProperty"&&s==="call"&&(f=i.parent()&&i.parent().args)&&f&&f[0]&&f[0].evaluate(i);if(E=E instanceof AST_Dot?E.expression:E,E==null||E.thedef&&E.thedef.undeclared)return this.clone();if(!is_pure_native_value(l.name,s))return this;o=global_objs[l.name]}else{if(o instanceof RegExp){if(s=="source")return regexp_source_fix(o.source);if(s=="flags"||regexp_flags.has(s))return o[s]}if(!o||o===l||!HOP(o,s))return this;if(typeof o=="function")switch(s){case"name":return o.node.name?o.node.name.name:"";case"length":return o.node.length_property();default:return this}}return o[s]}return this});def_eval(AST_Chain,function(i,n){const o=this.expression._eval(i,n);return o===nullish?void 0:o===this.expression?this:o});def_eval(AST_Call,function(i,n){var o=this.expression;const s=o._eval(i,n);if(s===nullish||this.optional&&s==null)return nullish;if(i.option("unsafe")&&o instanceof AST_PropAccess){var l=o.property;if(l instanceof AST_Node&&(l=l._eval(i,n),l===o.property))return this;var f,E=o.expression;if(is_undeclared_ref(E)){var g=E.name==="hasOwnProperty"&&l==="call"&&this.args[0]&&this.args[0].evaluate(i);if(g=g instanceof AST_Dot?g.expression:g,g==null||g.thedef&&g.thedef.undeclared)return this.clone();if(!is_pure_native_fn(E.name,l))return this;f=global_objs[E.name]}else{if(f=E._eval(i,n+1),f===E||!f)return this;if(!is_pure_native_method(f.constructor.name,l))return this}for(var N=[],x=0,w=this.args.length;x<w;x++){var R=this.args[x],k=R._eval(i,n);if(R===k)return this;if(R instanceof AST_Lambda)return this;N.push(k)}try{return f[l].apply(f,N)}catch{}}return this});def_eval(AST_New,return_this);function def_drop_side_effect_free(i,n){for(const o of[].concat(i))o.DEFMETHOD("drop_side_effect_free",n)}function trim(i,n,o){var s=i.length;if(!s)return null;for(var l=[],f=!1,E=0;E<s;E++){var g=i[E].drop_side_effect_free(n,o);f|=g!==i[E],g&&(l.push(g),o=!1)}return f?l.length?l:null:i}def_drop_side_effect_free(AST_Node,return_this);def_drop_side_effect_free(AST_Constant,return_null);def_drop_side_effect_free(AST_This,return_null);def_drop_side_effect_free(AST_Call,function(i,n){if(is_nullish_shortcircuited(this,i))return this.expression.drop_side_effect_free(i,n);if(!this.is_callee_pure(i)){if(this.expression.is_call_pure(i)){var o=this.args.slice();return o.unshift(this.expression.expression),o=trim(o,i,n),o&&make_sequence(this,o)}if(is_func_expr(this.expression)&&(!this.expression.name||!this.expression.name.definition().references.length)){var s=this.clone();return s.expression.process_expression(!1,i),s}return this}var l=trim(this.args,i,n);return l&&make_sequence(this,l)});def_drop_side_effect_free(AST_Accessor,return_null);def_drop_side_effect_free(AST_Function,return_null);def_drop_side_effect_free(AST_Arrow,return_null);def_drop_side_effect_free(AST_Class,function(i){const n=[];if(this.is_self_referential()&&this.has_side_effects(i))return this;const o=this.extends&&this.extends.drop_side_effect_free(i);o&&n.push(o);for(const l of this.properties)if(l instanceof AST_ClassStaticBlock){if(l.has_side_effects(i))return this}else{const f=l.drop_side_effect_free(i);f&&n.push(f)}if(!n.length)return null;const s=make_sequence(this,n);return this instanceof AST_DefClass?make_node(AST_SimpleStatement,this,{body:s}):s});def_drop_side_effect_free([AST_ClassProperty,AST_ClassPrivateProperty],function(i){const n=this.computed_key()&&this.key.drop_side_effect_free(i),o=this.static&&this.value&&this.value.drop_side_effect_free(i);return n&&o?make_sequence(this,[n,o]):n||o||null});def_drop_side_effect_free(AST_Binary,function(i,n){var o=this.right.drop_side_effect_free(i);if(!o)return this.left.drop_side_effect_free(i,n);if(lazy_op.has(this.operator)){if(o===this.right)return this;var s=this.clone();return s.right=o,s}else{var l=this.left.drop_side_effect_free(i,n);return l?make_sequence(this,[l,o]):this.right.drop_side_effect_free(i,n)}});def_drop_side_effect_free(AST_Assign,function(i){if(this.logical)return this;var n=this.left;if(n.has_side_effects(i)||i.has_directive("use strict")&&n instanceof AST_PropAccess&&n.expression.is_constant())return this;for(set_flag(this,WRITE_ONLY);n instanceof AST_PropAccess;)n=n.expression;return n.is_constant_expression(i.find_parent(AST_Scope))?this.right.drop_side_effect_free(i):this});def_drop_side_effect_free(AST_Conditional,function(i){var n=this.consequent.drop_side_effect_free(i),o=this.alternative.drop_side_effect_free(i);if(n===this.consequent&&o===this.alternative)return this;if(!n)return o?make_node(AST_Binary,this,{operator:"||",left:this.condition,right:o}):this.condition.drop_side_effect_free(i);if(!o)return make_node(AST_Binary,this,{operator:"&&",left:this.condition,right:n});var s=this.clone();return s.consequent=n,s.alternative=o,s});def_drop_side_effect_free(AST_Unary,function(i,n){if(unary_side_effects.has(this.operator))return this.expression.has_side_effects(i)?clear_flag(this,WRITE_ONLY):set_flag(this,WRITE_ONLY),this;if(this.operator=="typeof"&&this.expression instanceof AST_SymbolRef)return null;var o=this.expression.drop_side_effect_free(i,n);return n&&o&&is_iife_call(o)?o===this.expression&&this.operator=="!"?this:o.negate(i,n):o});def_drop_side_effect_free(AST_SymbolRef,function(i){return this.is_declared(i)||pure_prop_access_globals.has(this.name)?null:this});def_drop_side_effect_free(AST_Object,function(i,n){var o=trim(this.properties,i,n);return o&&make_sequence(this,o)});def_drop_side_effect_free(AST_ObjectKeyVal,function(i,n){const s=this.key instanceof AST_Node&&this.key.drop_side_effect_free(i,n),l=this.value.drop_side_effect_free(i,n);return s&&l?make_sequence(this,[s,l]):s||l});def_drop_side_effect_free([AST_ConciseMethod,AST_ObjectGetter,AST_ObjectSetter],function(){return this.computed_key()?this.key:null});def_drop_side_effect_free([AST_PrivateMethod,AST_PrivateGetter,AST_PrivateSetter],function(){return null});def_drop_side_effect_free(AST_Array,function(i,n){var o=trim(this.elements,i,n);return o&&make_sequence(this,o)});def_drop_side_effect_free(AST_Dot,function(i,n){return is_nullish_shortcircuited(this,i)?this.expression.drop_side_effect_free(i,n):!this.optional&&this.expression.may_throw_on_access(i)?this:this.expression.drop_side_effect_free(i,n)});def_drop_side_effect_free(AST_Sub,function(i,n){if(is_nullish_shortcircuited(this,i))return this.expression.drop_side_effect_free(i,n);if(!this.optional&&this.expression.may_throw_on_access(i))return this;var o=this.property.drop_side_effect_free(i);if(o&&this.optional)return this;var s=this.expression.drop_side_effect_free(i,n);return s&&o?make_sequence(this,[s,o]):s||o});def_drop_side_effect_free(AST_Chain,function(i,n){return this.expression.drop_side_effect_free(i,n)});def_drop_side_effect_free(AST_Sequence,function(i){var n=this.tail_node(),o=n.drop_side_effect_free(i);if(o===n)return this;var s=this.expressions.slice(0,-1);return o&&s.push(o),s.length?make_sequence(this,s):make_node(AST_Number,this,{value:0})});def_drop_side_effect_free(AST_Expansion,function(i,n){return this.expression.drop_side_effect_free(i,n)});def_drop_side_effect_free(AST_TemplateSegment,return_null);def_drop_side_effect_free(AST_TemplateString,function(i){var n=trim(this.segments,i,first_in_statement);return n&&make_sequence(this,n)});const r_keep_assign=/keep_assign/;AST_Scope.DEFMETHOD("drop_unused",function(i){if(!i.option("unused")||i.has_directive("use asm")||!this.variables)return;var n=this;if(n.pinned())return;var o=!(n instanceof AST_Toplevel)||i.toplevel.funcs,s=!(n instanceof AST_Toplevel)||i.toplevel.vars;const l=r_keep_assign.test(i.option("unused"))?return_false:function(B){if(B instanceof AST_Assign&&!B.logical&&(has_flag(B,WRITE_ONLY)||B.operator=="="))return B.left;if(B instanceof AST_Unary&&has_flag(B,WRITE_ONLY))return B.expression};var f=new Map,E=new Map;n instanceof AST_Toplevel&&i.top_retain&&n.variables.forEach(function(B){i.top_retain(B)&&f.set(B.id,B)});var g=new Map,N=new Map,x=this,w=new TreeWalker(function(B,P){if(B instanceof AST_Lambda&&B.uses_arguments&&!w.has_directive("use strict")&&B.argnames.forEach(function(d){if(d instanceof AST_SymbolDeclaration){var y=d.definition();f.set(y.id,y)}}),B===n)return;if(B instanceof AST_Class&&B.has_side_effects(i)&&(B.is_self_referential()?P():B.visit_nondeferred_class_parts(w)),B instanceof AST_Defun||B instanceof AST_DefClass){var z=B.name.definition();return(w.parent()instanceof AST_Export||!o&&x===n)&&z.global&&f.set(z.id,z),map_add(N,z.id,B),!0}const m=x===n;if(B instanceof AST_SymbolFunarg&&m&&map_add(g,B.definition().id,B),B instanceof AST_Definitions&&m){const d=w.parent()instanceof AST_Export;return B.definitions.forEach(function(y){if(y.name instanceof AST_SymbolVar&&map_add(g,y.name.definition().id,y),(d||!s)&&walk(y.name,L=>{if(L instanceof AST_SymbolDeclaration){const G=L.definition();G.global&&f.set(G.id,G)}}),y.name instanceof AST_Destructuring&&y.walk(w),y.name instanceof AST_SymbolDeclaration&&y.value){var F=y.name.definition();map_add(N,F.id,y.value),!F.chained&&y.name.fixed_value()===y.value&&E.set(F.id,y),y.value.has_side_effects(i)&&y.value.walk(w)}}),!0}return k(B,P)});n.walk(w),w=new TreeWalker(k),f.forEach(function(B){var P=N.get(B.id);P&&P.forEach(function(z){z.walk(w)})});var R=new TreeTransformer(function(P,z,m){var d=R.parent();if(s){const se=l(P);if(se instanceof AST_SymbolRef){var F=se.definition(),y=f.has(F.id);if(P instanceof AST_Assign){if(!y||E.has(F.id)&&E.get(F.id)!==P){const Te=P.right.transform(R);return!y&&!Te.has_side_effects(i)&&!is_used_in_expression(R)?m?MAP.skip:make_node(AST_Number,P,{value:0}):maintain_this_binding(d,P,Te)}}else if(!y)return m?MAP.skip:make_node(AST_Number,P,{value:0})}}if(x===n){var F;if(P.name&&(P instanceof AST_ClassExpression&&!keep_name(i.option("keep_classnames"),(F=P.name.definition()).name)||P instanceof AST_Function&&!keep_name(i.option("keep_fnames"),(F=P.name.definition()).name))&&(!f.has(F.id)||F.orig.length>1)&&(P.name=null),P instanceof AST_Lambda&&!(P instanceof AST_Accessor))for(var L=!i.option("keep_fargs")||d instanceof AST_Call&&d.expression===P&&!P.pinned()&&(!P.name||P.name.unreferenced()),G=P.argnames,p=G.length;--p>=0;){var I=G[p];I instanceof AST_Expansion&&(I=I.expression),I instanceof AST_DefaultAssign&&(I=I.left),!(I instanceof AST_Destructuring)&&!f.has(I.definition().id)?(set_flag(I,UNUSED),L&&G.pop()):L=!1}if(P instanceof AST_DefClass&&P!==n){const se=P.name.definition();if(z(P,this),!(se.global&&!o||f.has(se.id))){const Te=P.drop_side_effect_free(i);return Te??(se.eliminated++,m?MAP.skip:make_node(AST_EmptyStatement,P))}return P}if(P instanceof AST_Defun&&P!==n){const se=P.name.definition();if(!(se.global&&!o||f.has(se.id)))return se.eliminated++,m?MAP.skip:make_node(AST_EmptyStatement,P)}if(P instanceof AST_Definitions&&!(d instanceof AST_ForIn&&d.init===P)){var D=!(d instanceof AST_Toplevel)&&!(P instanceof AST_Var),V=[],C=[],K=[],X=[];switch(P.definitions.forEach(function(se){se.value&&(se.value=se.value.transform(R));var Pe=se.name instanceof AST_Destructuring,Te=Pe?new SymbolDef(null,{name:"<destructure>"}):se.name.definition();if(D&&Te.global)return K.push(se);if(!(s||D)||Pe&&(se.name.names.length||se.name.is_array||i.option("pure_getters")!=!0)||f.has(Te.id)){if(se.value&&E.has(Te.id)&&E.get(Te.id)!==se&&(se.value=se.value.drop_side_effect_free(i)),se.name instanceof AST_SymbolVar){var Ae=g.get(Te.id);if(Ae.length>1&&(!se.value||Te.orig.indexOf(se.name)>Te.eliminated)){if(se.value){var we=make_node(AST_SymbolRef,se.name,se.name);Te.references.push(we);var ve=make_node(AST_Assign,se,{operator:"=",logical:!1,left:we,right:se.value});E.get(Te.id)===se&&E.set(Te.id,ve),X.push(ve.transform(R))}remove(Ae,se),Te.eliminated++;return}}se.value?(X.length>0&&(K.length>0?(X.push(se.value),se.value=make_sequence(se.value,X)):V.push(make_node(AST_SimpleStatement,P,{body:make_sequence(P,X)})),X=[]),K.push(se)):C.push(se)}else if(Te.orig[0]instanceof AST_SymbolCatch){var be=se.value&&se.value.drop_side_effect_free(i);be&&X.push(be),se.value=null,C.push(se)}else{var be=se.value&&se.value.drop_side_effect_free(i);be&&X.push(be),Te.eliminated++}}),(C.length>0||K.length>0)&&(P.definitions=C.concat(K),V.push(P)),X.length>0&&V.push(make_node(AST_SimpleStatement,P,{body:make_sequence(P,X)})),V.length){case 0:return m?MAP.skip:make_node(AST_EmptyStatement,P);case 1:return V[0];default:return m?MAP.splice(V):make_node(AST_BlockStatement,P,{body:V})}}if(P instanceof AST_For){z(P,this);var re;return P.init instanceof AST_BlockStatement&&(re=P.init,P.init=re.body.pop(),re.body.push(P)),P.init instanceof AST_SimpleStatement?P.init=P.init.body:is_empty(P.init)&&(P.init=null),re?m?MAP.splice(re.body):re:P}if(P instanceof AST_LabeledStatement&&P.body instanceof AST_For){if(z(P,this),P.body instanceof AST_BlockStatement){var re=P.body;return P.body=re.body.pop(),re.body.push(P),m?MAP.splice(re.body):re}return P}if(P instanceof AST_BlockStatement)return z(P,this),m&&P.body.every(can_be_evicted_from_block)?MAP.splice(P.body):P;if(P instanceof AST_Scope&&!(P instanceof AST_ClassStaticBlock)){const se=x;return x=P,z(P,this),x=se,P}}},function(P,z){if(P instanceof AST_Sequence)switch(P.expressions.length){case 0:return z?MAP.skip:make_node(AST_Number,P,{value:0});case 1:return P.expressions[0]}});n.transform(R);function k(B,P){var z;const m=l(B);if(m instanceof AST_SymbolRef&&!is_ref_of(B.left,AST_SymbolBlockDeclaration)&&n.variables.get(m.name)===(z=m.definition()))return B instanceof AST_Assign&&(B.right.walk(w),!z.chained&&B.left.fixed_value()===B.right&&E.set(z.id,B)),!0;if(B instanceof AST_SymbolRef){if(z=B.definition(),!f.has(z.id)&&(f.set(z.id,z),z.orig[0]instanceof AST_SymbolCatch)){const y=z.scope.is_block_scope()&&z.scope.get_defun_scope().variables.get(z.name);y&&f.set(y.id,y)}return!0}if(B instanceof AST_Class)return P(),!0;if(B instanceof AST_Scope&&!(B instanceof AST_ClassStaticBlock)){var d=x;return x=B,P(),x=d,!0}}});function def_reduce_vars(i,n){i.DEFMETHOD("reduce_vars",n)}def_reduce_vars(AST_Node,noop);function reset_def(i,n){n.assignments=0,n.chained=!1,n.direct_access=!1,n.escaped=0,n.recursive_refs=0,n.references=[],n.single_use=void 0,n.scope.pinned()||n.orig[0]instanceof AST_SymbolFunarg&&n.scope.uses_arguments?n.fixed=!1:n.orig[0]instanceof AST_SymbolConst||!i.exposed(n)?n.fixed=n.init:n.fixed=!1}function reset_variables(i,n,o){o.variables.forEach(function(s){reset_def(n,s),s.fixed===null?(i.defs_to_safe_ids.set(s.id,i.safe_ids),mark(i,s,!0)):s.fixed&&(i.loop_ids.set(s.id,i.in_loop),mark(i,s,!0))})}function reset_block_variables(i,n){n.block_scope&&n.block_scope.variables.forEach(o=>{reset_def(i,o)})}function push(i){i.safe_ids=Object.create(i.safe_ids)}function pop(i){i.safe_ids=Object.getPrototypeOf(i.safe_ids)}function mark(i,n,o){i.safe_ids[n.id]=o}function safe_to_read(i,n){if(n.single_use=="m")return!1;if(i.safe_ids[n.id]){if(n.fixed==null){var o=n.orig[0];if(o instanceof AST_SymbolFunarg||o.name=="arguments")return!1;n.fixed=make_void_0(o)}return!0}return n.fixed instanceof AST_Defun}function safe_to_assign(i,n,o,s){if(n.fixed===void 0)return!0;let l;return n.fixed===null&&(l=i.defs_to_safe_ids.get(n.id))?(l[n.id]=!1,i.defs_to_safe_ids.delete(n.id),!0):!HOP(i.safe_ids,n.id)||!safe_to_read(i,n)||n.fixed===!1||n.fixed!=null&&(!s||n.references.length>n.assignments)?!1:n.fixed instanceof AST_Defun?s instanceof AST_Node&&n.fixed.parent_scope===o:n.orig.every(f=>!(f instanceof AST_SymbolConst||f instanceof AST_SymbolDefun||f instanceof AST_SymbolLambda))}function ref_once(i,n,o){return n.option("unused")&&!o.scope.pinned()&&o.references.length-o.recursive_refs==1&&i.loop_ids.get(o.id)===i.in_loop}function is_immutable(i){return i?i.is_constant()||i instanceof AST_Lambda||i instanceof AST_This:!1}function mark_escaped(i,n,o,s,l,f=0,E=1){var g=i.parent(f);if(!(l&&(l.is_constant()||l instanceof AST_ClassExpression))){if(g instanceof AST_Assign&&(g.operator==="="||g.logical)&&s===g.right||g instanceof AST_Call&&(s!==g.expression||g instanceof AST_New)||g instanceof AST_Exit&&s===g.value&&s.scope!==n.scope||g instanceof AST_VarDefLike&&s===g.value||g instanceof AST_Yield&&s===g.value&&s.scope!==n.scope){E>1&&!(l&&l.is_constant_expression(o))&&(E=1),(!n.escaped||n.escaped>E)&&(n.escaped=E);return}else if(g instanceof AST_Array||g instanceof AST_Await||g instanceof AST_Binary&&lazy_op.has(g.operator)||g instanceof AST_Conditional&&s!==g.condition||g instanceof AST_Expansion||g instanceof AST_Sequence&&s===g.tail_node())mark_escaped(i,n,o,g,g,f+1,E);else if(g instanceof AST_ObjectKeyVal&&s===g.value){var N=i.parent(f+1);mark_escaped(i,n,o,N,N,f+2,E)}else if(g instanceof AST_PropAccess&&s===g.expression&&(l=read_property(l,g.property),mark_escaped(i,n,o,g,l,f+1,E+1),l))return;f>0||g instanceof AST_Sequence&&s!==g.tail_node()||g instanceof AST_SimpleStatement||(n.direct_access=!0)}}const suppress=i=>walk(i,n=>{if(n instanceof AST_Symbol){var o=n.definition();o&&(n instanceof AST_SymbolRef&&o.references.push(n),o.fixed=!1)}});def_reduce_vars(AST_Accessor,function(i,n,o){return push(i),reset_variables(i,o,this),n(),pop(i),!0});def_reduce_vars(AST_Assign,function(i,n,o){var s=this;if(s.left instanceof AST_Destructuring){suppress(s.left);return}const l=()=>{if(s.logical)return s.left.walk(i),push(i),s.right.walk(i),pop(i),!0};var f=s.left;if(!(f instanceof AST_SymbolRef))return l();var E=f.definition(),g=safe_to_assign(i,E,f.scope,s.right);if(E.assignments++,!g)return l();var N=E.fixed;if(!N&&s.operator!="="&&!s.logical)return l();var x=s.operator=="=",w=x?s.right:s;return is_modified(o,i,s,w,0)?l():(E.references.push(f),s.logical||(x||(E.chained=!0),E.fixed=x?function(){return s.right}:function(){return make_node(AST_Binary,s,{operator:s.operator.slice(0,-1),left:N instanceof AST_Node?N:N(),right:s.right})}),s.logical?(mark(i,E,!1),push(i),s.right.walk(i),pop(i),!0):(mark(i,E,!1),s.right.walk(i),mark(i,E,!0),mark_escaped(i,E,f.scope,s,w,0,1),!0))});def_reduce_vars(AST_Binary,function(i){if(lazy_op.has(this.operator))return this.left.walk(i),push(i),this.right.walk(i),pop(i),!0});def_reduce_vars(AST_Block,function(i,n,o){reset_block_variables(o,this)});def_reduce_vars(AST_Case,function(i){return push(i),this.expression.walk(i),pop(i),push(i),walk_body(this,i),pop(i),!0});def_reduce_vars(AST_Class,function(i,n){return clear_flag(this,INLINED),push(i),n(),pop(i),!0});def_reduce_vars(AST_ClassStaticBlock,function(i,n,o){reset_block_variables(o,this)});def_reduce_vars(AST_Conditional,function(i){return this.condition.walk(i),push(i),this.consequent.walk(i),pop(i),push(i),this.alternative.walk(i),pop(i),!0});def_reduce_vars(AST_Chain,function(i,n){const o=i.safe_ids;return n(),i.safe_ids=o,!0});def_reduce_vars(AST_Call,function(i){this.expression.walk(i),this.optional&&push(i);for(const n of this.args)n.walk(i);return!0});def_reduce_vars(AST_PropAccess,function(i){if(this.optional)return this.expression.walk(i),push(i),this.property instanceof AST_Node&&this.property.walk(i),!0});def_reduce_vars(AST_Default,function(i,n){return push(i),n(),pop(i),!0});function mark_lambda(i,n,o){clear_flag(this,INLINED),push(i),reset_variables(i,o,this);var s;return!this.name&&!this.uses_arguments&&!this.pinned()&&(s=i.parent())instanceof AST_Call&&s.expression===this&&!s.args.some(l=>l instanceof AST_Expansion)&&this.argnames.every(l=>l instanceof AST_Symbol)&&this.argnames.forEach((l,f)=>{if(l.definition){var E=l.definition();E.orig.length>1||(E.fixed===void 0&&(!this.uses_arguments||i.has_directive("use strict"))?(E.fixed=function(){return s.args[f]||make_void_0(s)},i.loop_ids.set(E.id,i.in_loop),mark(i,E,!0)):E.fixed=!1)}}),n(),pop(i),handle_defined_after_hoist(this),!0}function handle_defined_after_hoist(i){const n=[];walk(i,x=>{if(x!==i){if(x instanceof AST_Defun)return n.push(x),!0;if(x instanceof AST_Scope||x instanceof AST_SimpleStatement)return!0}});const o=new Map,s=new Map,l=new Set,f=new Set;for(const x of n){const w=x.name.definition(),R=[];for(const k of x.enclosed)if(!(k.fixed===!1||k===w||k.scope.get_defun_scope()!==i)){if(l.add(k.id),k.assignments===0&&k.orig.length===1&&k.orig[0]instanceof AST_SymbolDefun){f.add(k.id),l.add(k.id),f.add(w.id),l.add(w.id),o.has(w.id)||o.set(w.id,[]),o.get(w.id).push(k.id);continue}R.push(k)}R.length&&(s.set(w.id,R),f.add(w.id),l.add(w.id))}if(!s.size)return;let E=1;const g=new Map,N=new Map;walk_parent(i,(x,w)=>{if(x instanceof AST_Symbol&&x.thedef){const R=x.definition().id;E++,l.has(R)&&(x instanceof AST_SymbolDeclaration||is_lhs(x,w.parent()))&&N.set(R,E),f.has(R)&&!g.has(R)&&!is_recursive_ref(w,R)&&g.set(R,E)}});for(const[x,w]of g){const R=new Set(o.get(x));for(const k of R){let B=g.get(k);if(!(B!=null&&B<w)){g.set(k,w);for(const P of o.get(k)||[])R.add(P)}}}for(const[x,w]of s){const R=g.get(x);if(R!==void 0)for(const k of w){if(k.fixed===!1)continue;let B=N.get(k.id)||0;R<B&&(k.fixed=!1)}}}def_reduce_vars(AST_Lambda,mark_lambda);def_reduce_vars(AST_Do,function(i,n,o){reset_block_variables(o,this);const s=i.in_loop;return i.in_loop=this,push(i),this.body.walk(i),has_break_or_continue(this)&&(pop(i),push(i)),this.condition.walk(i),pop(i),i.in_loop=s,!0});def_reduce_vars(AST_For,function(i,n,o){reset_block_variables(o,this),this.init&&this.init.walk(i);const s=i.in_loop;return i.in_loop=this,push(i),this.condition&&this.condition.walk(i),this.body.walk(i),this.step&&(has_break_or_continue(this)&&(pop(i),push(i)),this.step.walk(i)),pop(i),i.in_loop=s,!0});def_reduce_vars(AST_ForIn,function(i,n,o){reset_block_variables(o,this),suppress(this.init),this.object.walk(i);const s=i.in_loop;return i.in_loop=this,push(i),this.body.walk(i),pop(i),i.in_loop=s,!0});def_reduce_vars(AST_If,function(i){return this.condition.walk(i),push(i),this.body.walk(i),pop(i),this.alternative&&(push(i),this.alternative.walk(i),pop(i)),!0});def_reduce_vars(AST_LabeledStatement,function(i){return push(i),this.body.walk(i),pop(i),!0});def_reduce_vars(AST_SymbolCatch,function(){this.definition().fixed=!1});def_reduce_vars(AST_SymbolRef,function(i,n,o){var s=this.definition();s.references.push(this),s.references.length==1&&!s.fixed&&s.orig[0]instanceof AST_SymbolDefun&&i.loop_ids.set(s.id,i.in_loop);var l;s.fixed===void 0||!safe_to_read(i,s)?s.fixed=!1:s.fixed&&(l=this.fixed_value(),l instanceof AST_Lambda&&is_recursive_ref(i,s)?s.recursive_refs++:l&&!o.exposed(s)&&ref_once(i,o,s)?s.single_use=l instanceof AST_Lambda&&!l.pinned()||l instanceof AST_Class||s.scope===this.scope&&l.is_constant_expression():s.single_use=!1,is_modified(o,i,this,l,0,is_immutable(l))&&(s.single_use?s.single_use="m":s.fixed=!1)),mark_escaped(i,s,this.scope,this,l,0,1)});def_reduce_vars(AST_Toplevel,function(i,n,o){return this.globals.forEach(function(s){reset_def(o,s)}),reset_variables(i,o,this),n(),handle_defined_after_hoist(this),!0});def_reduce_vars(AST_Try,function(i,n,o){return reset_block_variables(o,this),push(i),this.body.walk(i),pop(i),this.bcatch&&(push(i),this.bcatch.walk(i),pop(i)),this.bfinally&&this.bfinally.walk(i),!0});def_reduce_vars(AST_Unary,function(i){var n=this;if(!(n.operator!=="++"&&n.operator!=="--")){var o=n.expression;if(o instanceof AST_SymbolRef){var s=o.definition(),l=safe_to_assign(i,s,o.scope,!0);if(s.assignments++,!!l){var f=s.fixed;if(f)return s.references.push(o),s.chained=!0,s.fixed=function(){return make_node(AST_Binary,n,{operator:n.operator.slice(0,-1),left:make_node(AST_UnaryPrefix,n,{operator:"+",expression:f instanceof AST_Node?f:f()}),right:make_node(AST_Number,n,{value:1})})},mark(i,s,!0),!0}}}});def_reduce_vars(AST_VarDef,function(i,n){var o=this;if(o.name instanceof AST_Destructuring){suppress(o.name);return}var s=o.name.definition();if(o.value){if(safe_to_assign(i,s,o.name.scope,o.value))return s.fixed=function(){return o.value},i.loop_ids.set(s.id,i.in_loop),mark(i,s,!1),n(),mark(i,s,!0),!0;s.fixed=!1}});def_reduce_vars(AST_UsingDef,function(){suppress(this.name)});def_reduce_vars(AST_While,function(i,n,o){reset_block_variables(o,this);const s=i.in_loop;return i.in_loop=this,push(i),n(),pop(i),i.in_loop=s,!0});function loop_body(i){return i instanceof AST_IterationStatement&&i.body instanceof AST_BlockStatement?i.body:i}function is_lhs_read_only(i){if(i instanceof AST_This)return!0;if(i instanceof AST_SymbolRef)return i.definition().orig[0]instanceof AST_SymbolLambda;if(i instanceof AST_PropAccess){if(i=i.expression,i instanceof AST_SymbolRef){if(i.is_immutable())return!1;i=i.fixed_value()}return i?i instanceof AST_RegExp?!1:i instanceof AST_Constant?!0:is_lhs_read_only(i):!0}return!1}function remove_initializers(i){var n=[];return i.definitions.forEach(function(o){o.name instanceof AST_SymbolDeclaration?(o.value=null,n.push(o)):o.declarations_as_names().forEach(s=>{n.push(make_node(AST_VarDef,o,{name:s,value:null}))})}),n.length?make_node(AST_Var,i,{definitions:n}):null}function extract_from_unreachable_code(i,n,o){walk(n,s=>{if(s instanceof AST_Var){const l=remove_initializers(s);return l&&o.push(l),!0}if(s instanceof AST_Defun&&(s===n||!i.has_directive("use strict")))return o.push(s===n?s:make_node(AST_Var,s,{definitions:[make_node(AST_VarDef,s,{name:make_node(AST_SymbolVar,s.name,s.name),value:null})]})),!0;if(s instanceof AST_Export||s instanceof AST_Import)return o.push(s),!0;if(s instanceof AST_Scope||s instanceof AST_Class)return!0})}function tighten_body(i,n){const o=n.find_scope(),s=o.get_defun_scope(),{in_loop:l,in_try:f}=N();var E,g=10;do E=!1,w(i),n.option("dead_code")&&k(i,n),n.option("if_return")&&R(i,n),n.sequences_limit>0&&(P(i,n),m(i,n)),n.option("join_vars")&&y(i),n.option("collapse_vars")&&x(i,n);while(E&&g-- >0);function N(){var F=n.self(),L=0,G=!1,p=!1;do if(F instanceof AST_IterationStatement)G=!0;else{if(F instanceof AST_Scope)break;F instanceof AST_TryBlock&&(p=!0)}while(F=n.parent(L++));return{in_loop:G,in_try:p}}function x(F,L){if(o.pinned()||s.pinned())return F;for(var G,p=[],I=F.length,D=new TreeTransformer(function(j){if(ce)return j;if(!ke)return j!==C[K]?j:(K++,K<C.length?Qe(j):(ke=!0,se=Se(j,0),se===j&&(ce=!0),j));var $e=D.parent();if(j instanceof AST_Assign&&(j.logical||j.operator!="="&&Te.equivalent_to(j.left))||j instanceof AST_Await||j instanceof AST_Using||j instanceof AST_Call&&Te instanceof AST_PropAccess&&Te.equivalent_to(j.expression)||(j instanceof AST_Call||j instanceof AST_PropAccess)&&j.optional||j instanceof AST_Debugger||j instanceof AST_Destructuring||j instanceof AST_Expansion&&j.expression instanceof AST_Symbol&&(j.expression instanceof AST_This||j.expression.definition().references.length>1)||j instanceof AST_IterationStatement&&!(j instanceof AST_For)||j instanceof AST_LoopControl||j instanceof AST_Try||j instanceof AST_With||j instanceof AST_Yield||j instanceof AST_Export||j instanceof AST_Class||$e instanceof AST_For&&j!==$e.init||!be&&j instanceof AST_SymbolRef&&!j.is_declared(L)&&!pure_prop_access_globals.has(j)||j instanceof AST_SymbolRef&&$e instanceof AST_Call&&has_annotation($e,_NOINLINE)||j instanceof AST_ObjectProperty&&j.key instanceof AST_Node)return ce=!0,j;if(!Pe&&(!we||!be)&&($e instanceof AST_Binary&&lazy_op.has($e.operator)&&$e.left!==j||$e instanceof AST_Conditional&&$e.condition!==j||$e instanceof AST_If&&$e.condition!==j)&&(Pe=$e),ue&&!(j instanceof AST_SymbolDeclaration)&&Te.equivalent_to(j)&&!ae(D.find_scope()||o,Ae)){if(Pe)return ce=!0,j;if(is_lhs(j,$e))return re&&te++,j;if(te++,re&&X instanceof AST_VarDef)return j;if(E=ce=!0,X instanceof AST_UnaryPostfix)return make_node(AST_UnaryPrefix,X,X);if(X instanceof AST_VarDef){var Ne=X.name.definition(),Ie=X.value;return Ne.references.length-Ne.replaced==1&&!L.exposed(Ne)?(Ne.replaced++,Be&&is_identifier_atom(Ie)?Ie.transform(L):maintain_this_binding($e,j,Ie)):make_node(AST_Assign,X,{operator:"=",logical:!1,left:make_node(AST_SymbolRef,X.name,X.name),right:Ie})}return clear_flag(X,WRITE_ONLY),X}var Ve;return(j instanceof AST_Call||j instanceof AST_Exit&&(ve||Te instanceof AST_PropAccess||it(Te))||j instanceof AST_PropAccess&&(ve||j.expression.may_throw_on_access(L))||j instanceof AST_SymbolRef&&(Ae.has(j.name)&&Ae.get(j.name).modified||ve&&it(j))||j instanceof AST_VarDef&&j.value&&(Ae.has(j.name.name)||ve&&it(j.name))||j instanceof AST_Using||(Ve=is_lhs(j.left,j))&&(Ve instanceof AST_PropAccess||Ae.has(Ve.name))||Xe&&(f?j.has_side_effects(L):S(j)))&&(se=j,j instanceof AST_Scope&&(ce=!0)),Qe(j)},function(j){ce||(se===j&&(ce=!0),Pe===j&&(Pe=null))}),V=new TreeTransformer(function(j){if(ce)return j;if(!ke)return j!==C[K]?j:(K++,K<C.length?void 0:(ke=!0,j));if(j instanceof AST_SymbolRef&&j.name==Le.name)return--te||(ce=!0),is_lhs(j,V.parent())?j:(Le.replaced++,re.replaced--,X.value);if(j instanceof AST_Default||j instanceof AST_Scope)return j});--I>=0;){I==0&&L.option("unused")&&De();var C=[];for(he(F[I]);p.length>0;){C=p.pop();var K=0,X=C[C.length-1],re=null,se=null,Pe=null,Te=He(X);if(!(!Te||is_lhs_read_only(Te)||Te.has_side_effects(L))){var Ae=tt(X),we=nt(Te);Te instanceof AST_SymbolRef&&Ae.set(Te.name,{def:Te.definition(),modified:!1});var ve=st(X),be=ot(),Xe=X.may_throw(L),Be=X.name instanceof AST_SymbolFunarg,ke=Be,ce=!1,te=0,ue=!G||!ke;if(!ue){for(let j=L.self().argnames.lastIndexOf(X.name)+1;!ce&&j<G.length;j++)G[j].transform(D);ue=!0}for(var me=I;!ce&&me<F.length;me++)F[me].transform(D);if(re){var Le=X.name.definition();if(ce&&Le.references.length-Le.replaced>te)te=!1;else{ce=!1,K=0,ke=Be;for(var me=I;!ce&&me<F.length;me++)F[me].transform(V);re.single_use=!1}}te&&!ht(X)&&F.splice(I,1)}}}function Qe(j){if(j instanceof AST_Scope)return j;if(j instanceof AST_Switch){j.expression=j.expression.transform(D);for(var $e=0,Ne=j.body.length;!ce&&$e<Ne;$e++){var Ie=j.body[$e];if(Ie instanceof AST_Case){if(!ke){if(Ie!==C[K])continue;K++}if(Ie.expression=Ie.expression.transform(D),!be)break}}return ce=!0,j}}function Fe(j,$e){if(j.global)return!1;let Ne=j.scope;for(;Ne&&Ne!==$e;){if(Ne.variables.has(j.name))return!0;Ne=Ne.parent_scope}return!1}function lt(j,$e,Ne){var Ie=!1,Ve=!(j instanceof AST_Arrow);return $e.walk(new TreeWalker(function(le,O){if(Ie)return!0;if(le instanceof AST_SymbolRef&&(j.variables.has(le.name)||Fe(le.definition(),j))){var H=le.definition().scope;if(H!==s){for(;H=H.parent_scope;)if(H===s)return!0}return Ie=!0}if((Ne||Ve)&&le instanceof AST_This)return Ie=!0;if(le instanceof AST_Scope&&!(le instanceof AST_Arrow)){var J=Ve;return Ve=!1,O(),Ve=J,!0}})),Ie}function de(j){return!(j instanceof AST_Expansion||walk(j,Ne=>{if(Ne instanceof AST_Await)return walk_abort}))}function De(){var j,$e=L.self();if(is_func_expr($e)&&!$e.name&&!$e.uses_arguments&&!$e.pinned()&&(j=L.parent())instanceof AST_Call&&j.expression===$e&&j.args.every(de)){var Ne=L.has_directive("use strict");Ne&&!member(Ne,$e.body)&&(Ne=!1);var Ie=$e.argnames.length;G=j.args.slice(Ie);for(var Ve=new Set,le=Ie;--le>=0;){var O=$e.argnames[le],H=j.args[le];const ne=O.definition&&O.definition();if(!(ne&&ne.orig.length>1)&&(G.unshift(make_node(AST_VarDef,O,{name:O,value:H})),!Ve.has(O.name)))if(Ve.add(O.name),O instanceof AST_Expansion){var J=j.args.slice(le);J.every(h=>!lt($e,h,Ne))&&p.unshift([make_node(AST_VarDef,O,{name:O.expression,value:make_node(AST_Array,j,{elements:J})})])}else H?(H instanceof AST_Lambda&&H.pinned()||lt($e,H,Ne))&&(H=null):H=make_void_0(O).transform(L),H&&p.unshift([make_node(AST_VarDef,O,{name:O,value:H})])}}}function he(j){if(C.push(j),j instanceof AST_Assign)!j.left.has_side_effects(L)&&!(j.right instanceof AST_Chain)&&p.push(C.slice()),he(j.right);else if(j instanceof AST_Binary)he(j.left),he(j.right);else if(j instanceof AST_Call&&!has_annotation(j,_NOINLINE))he(j.expression),j.args.forEach(he);else if(j instanceof AST_Case)he(j.expression);else if(j instanceof AST_Conditional)he(j.condition),he(j.consequent),he(j.alternative);else if(j instanceof AST_Definitions){var $e=j.definitions.length,Ne=$e-200;for(Ne<0&&(Ne=0);Ne<$e;Ne++)he(j.definitions[Ne])}else j instanceof AST_DWLoop?(he(j.condition),j.body instanceof AST_Block||he(j.body)):j instanceof AST_Exit?j.value&&he(j.value):j instanceof AST_For?(j.init&&he(j.init),j.condition&&he(j.condition),j.step&&he(j.step),j.body instanceof AST_Block||he(j.body)):j instanceof AST_ForIn?(he(j.object),j.body instanceof AST_Block||he(j.body)):j instanceof AST_If?(he(j.condition),j.body instanceof AST_Block||he(j.body),j.alternative&&!(j.alternative instanceof AST_Block)&&he(j.alternative)):j instanceof AST_Sequence?j.expressions.forEach(he):j instanceof AST_SimpleStatement?he(j.body):j instanceof AST_Switch?(he(j.expression),j.body.forEach(he)):j instanceof AST_Unary?(j.operator=="++"||j.operator=="--")&&p.push(C.slice()):j instanceof AST_VarDef&&j.value&&!(j.value instanceof AST_Chain)&&(p.push(C.slice()),he(j.value));C.pop()}function Se(j,$e,Ne){var Ie=D.parent($e);return Ie instanceof AST_Assign?Ne&&!Ie.logical&&!(Ie.left instanceof AST_PropAccess||Ae.has(Ie.left.name))?Se(Ie,$e+1,Ne):j:Ie instanceof AST_Binary?Ne&&(!lazy_op.has(Ie.operator)||Ie.left===j)?Se(Ie,$e+1,Ne):j:Ie instanceof AST_Call||Ie instanceof AST_Case?j:Ie instanceof AST_Conditional?Ne&&Ie.condition===j?Se(Ie,$e+1,Ne):j:Ie instanceof AST_Definitions?Se(Ie,$e+1,!0):Ie instanceof AST_Exit?Ne?Se(Ie,$e+1,Ne):j:Ie instanceof AST_If?Ne&&Ie.condition===j?Se(Ie,$e+1,Ne):j:Ie instanceof AST_IterationStatement?j:Ie instanceof AST_Sequence?Se(Ie,$e+1,Ie.tail_node()!==j):Ie instanceof AST_SimpleStatement?Se(Ie,$e+1,!0):Ie instanceof AST_Switch||Ie instanceof AST_VarDef?j:null}function Ue(j){var $e=j.value;if($e instanceof AST_SymbolRef&&$e.name!="arguments"){var Ne=$e.definition();if(!Ne.undeclared)return re=Ne}}function He(j){if(j instanceof AST_Assign&&j.logical)return!1;if(j instanceof AST_VarDef&&j.name instanceof AST_SymbolDeclaration){var $e=j.name.definition();if(!member(j.name,$e.orig))return;var Ne=$e.references.length-$e.replaced;if(!Ne)return;var Ie=$e.orig.length-$e.eliminated;if(Ie>1&&!(j.name instanceof AST_SymbolFunarg)||(Ne>1?Ue(j):!L.exposed($e)))return make_node(AST_SymbolRef,j.name,j.name)}else{const Ve=j instanceof AST_Assign?j.left:j.expression;return!is_ref_of(Ve,AST_SymbolConst)&&!is_ref_of(Ve,AST_SymbolLet)&&!is_ref_of(Ve,AST_SymbolUsing)&&Ve}}function et(j){return j instanceof AST_Assign?j.right:j.value}function tt(j){var $e=new Map;if(j instanceof AST_Unary)return $e;var Ne=new TreeWalker(function(Ie){for(var Ve=Ie;Ve instanceof AST_PropAccess;)Ve=Ve.expression;if(Ve instanceof AST_SymbolRef){const le=$e.get(Ve.name);(!le||!le.modified)&&$e.set(Ve.name,{def:Ve.definition(),modified:is_modified(L,Ne,Ie,Ie,0)})}});return et(j).walk(Ne),$e}function ht(j){if(j.name instanceof AST_SymbolFunarg){var $e=L.parent(),Ne=L.self().argnames,Ie=Ne.indexOf(j.name);if(Ie<0)$e.args.length=Math.min($e.args.length,Ne.length-1);else{var Ve=$e.args;Ve[Ie]&&(Ve[Ie]=make_node(AST_Number,Ve[Ie],{value:0}))}return!0}var le=!1;return F[I].transform(new TreeTransformer(function(O,H,J){if(le)return O;if(O===j||O.body===j)return le=!0,O instanceof AST_VarDef?(O.value=O.name instanceof AST_SymbolConst?make_void_0(O.value):null,O):J?MAP.skip:null},function(O){if(O instanceof AST_Sequence)switch(O.expressions.length){case 0:return null;case 1:return O.expressions[0]}}))}function nt(j){for(;j instanceof AST_PropAccess;)j=j.expression;return j instanceof AST_SymbolRef&&j.definition().scope.get_defun_scope()===s&&!(l&&(Ae.has(j.name)||X instanceof AST_Unary||X instanceof AST_Assign&&!X.logical&&X.operator!="="))}function st(j){return j instanceof AST_Unary?unary_side_effects.has(j.operator):et(j).has_side_effects(L)}function ot(){if(ve)return!1;if(re)return!0;if(Te instanceof AST_SymbolRef){var j=Te.definition();if(j.references.length-j.replaced==(X instanceof AST_VarDef?1:2))return!0}return!1}function it(j){if(!j.definition)return!0;var $e=j.definition();return $e.orig.length==1&&$e.orig[0]instanceof AST_SymbolDefun?!1:$e.scope.get_defun_scope()!==s?!0:$e.references.some(Ne=>Ne.scope.get_defun_scope()!==s)}function S(j,$e){if(j instanceof AST_Assign)return S(j.left,!0);if(j instanceof AST_Unary)return S(j.expression,!0);if(j instanceof AST_VarDef)return j.value&&S(j.value);if($e){if(j instanceof AST_Dot||j instanceof AST_Sub)return S(j.expression,!0);if(j instanceof AST_SymbolRef)return j.definition().scope.get_defun_scope()!==s}return!1}function ae(j,$e){for(const{def:Ne}of $e.values()){const Ie=j.find_variable(Ne.name);if(Ie){if(Ie===Ne)continue;return!0}}return!1}}function w(F){for(var L=[],G=0;G<F.length;){var p=F[G];p instanceof AST_BlockStatement&&p.body.every(can_be_evicted_from_block)?(E=!0,w(p.body),F.splice(G,1,...p.body),G+=p.body.length):p instanceof AST_EmptyStatement?(E=!0,F.splice(G,1)):p instanceof AST_Directive?L.indexOf(p.value)<0?(G++,L.push(p.value)):(E=!0,F.splice(G,1)):G++}}function R(F,L){var G=L.self(),p=Pe(F),I=G instanceof AST_Lambda;const D=Math.min(F.length,500);for(var V=D;--V>=0;){var C=F[V],K=be(V),X=F[K];if(I&&!X&&C instanceof AST_Return){if(!C.value){E=!0,F.splice(V,1);continue}if(C.value instanceof AST_UnaryPrefix&&C.value.operator=="void"){E=!0,F[V]=make_node(AST_SimpleStatement,C,{body:C.value.expression});continue}}if(C instanceof AST_If){let Be,ke;if(Be=aborts(C.body),Ae(Be)&&(ke=ve(C.body,Be))){Be.label&&remove(Be.label.thedef.references,Be),E=!0,C=C.clone(),C.condition=C.condition.negate(L),C.body=make_node(AST_BlockStatement,C,{body:as_statement_array(C.alternative).concat(we())}),C.alternative=make_node(AST_BlockStatement,C,{body:ke}),F[V]=C.transform(L);continue}if(Be=aborts(C.alternative),Ae(Be)&&(ke=ve(C.alternative,Be))){Be.label&&remove(Be.label.thedef.references,Be),E=!0,C=C.clone(),C.body=make_node(AST_BlockStatement,C.body,{body:as_statement_array(C.body).concat(we())}),C.alternative=make_node(AST_BlockStatement,C.alternative,{body:ke}),F[V]=C.transform(L);continue}}if(C instanceof AST_If&&C.body instanceof AST_Return){var re=C.body.value;if(!re&&!C.alternative&&(I&&!X||X instanceof AST_Return&&!X.value)){E=!0,F[V]=make_node(AST_SimpleStatement,C.condition,{body:C.condition});continue}if(re&&!C.alternative&&X instanceof AST_Return&&X.value){E=!0,C=C.clone(),C.alternative=X,F[V]=C.transform(L),F.splice(K,1);continue}if(re&&!C.alternative&&(!X&&I&&p||X instanceof AST_Return)){E=!0,C=C.clone(),C.alternative=X||make_node(AST_Return,C,{value:null}),F[V]=C.transform(L),X&&F.splice(K,1);continue}var se=F[Xe(V)];if(L.option("sequences")&&I&&!C.alternative&&se instanceof AST_If&&se.body instanceof AST_Return&&be(K)==F.length&&X instanceof AST_SimpleStatement){E=!0,C=C.clone(),C.alternative=make_node(AST_BlockStatement,X,{body:[X,make_node(AST_Return,X,{value:null})]}),F[V]=C.transform(L),F.splice(K,1);continue}}}function Pe(Be){for(var ke=0,ce=Be.length;--ce>=0;){var te=Be[ce];if(te instanceof AST_If&&te.body instanceof AST_Return&&++ke>1)return!0}return!1}function Te(Be){return!Be||Be instanceof AST_UnaryPrefix&&Be.operator=="void"}function Ae(Be){if(!Be)return!1;for(var ke=V+1,ce=F.length;ke<ce;ke++){var te=F[ke];if(te instanceof AST_DefinitionsLike&&!(te instanceof AST_Var))return!1}var ue=Be instanceof AST_LoopControl?L.loopcontrol_target(Be):null;return Be instanceof AST_Return&&I&&Te(Be.value)||Be instanceof AST_Continue&&G===loop_body(ue)||Be instanceof AST_Break&&ue instanceof AST_BlockStatement&&G===ue}function we(){var Be=F.slice(V+1);return F.length=V+1,Be.filter(function(ke){return ke instanceof AST_Defun?(F.push(ke),!1):!0})}function ve(Be,ke){var ce=as_statement_array(Be);if(ke===ce[ce.length-1]&&(ce=ce.slice(0,-1),!!ce.every(te=>can_be_evicted_from_block(te))))return ke.value&&ce.push(make_node(AST_SimpleStatement,ke.value,{body:ke.value.expression})),ce}function be(Be){for(var ke=Be+1,ce=F.length;ke<ce;ke++){var te=F[ke];if(!(te instanceof AST_Var&&B(te)))break}return ke}function Xe(Be){for(var ke=Be;--ke>=0;){var ce=F[ke];if(!(ce instanceof AST_Var&&B(ce)))break}return ke}}function k(F,L){for(var G,p=L.self(),I=0,D=0,V=F.length;I<V;I++){var C=F[I];if(C instanceof AST_LoopControl){var K=L.loopcontrol_target(C);C instanceof AST_Break&&!(K instanceof AST_IterationStatement)&&loop_body(K)===p||C instanceof AST_Continue&&loop_body(K)===p?C.label&&remove(C.label.thedef.references,C):F[D++]=C}else F[D++]=C;if(aborts(C)){G=F.slice(I+1);break}}F.length=D,E=D!=V,G&&G.forEach(function(X){extract_from_unreachable_code(L,X,F)})}function B(F){return F.definitions.every(L=>!L.value)}function P(F,L){if(F.length<2)return;var G=[],p=0;function I(){if(G.length){var X=make_sequence(G[0],G);F[p++]=make_node(AST_SimpleStatement,X,{body:X}),G=[]}}for(var D=0,V=F.length;D<V;D++){var C=F[D];if(C instanceof AST_SimpleStatement){G.length>=L.sequences_limit&&I();var K=C.body;G.length>0&&(K=K.drop_side_effect_free(L)),K&&merge_sequence(G,K)}else C instanceof AST_Definitions&&B(C)||C instanceof AST_Defun||I(),F[p++]=C}I(),F.length=p,p!=V&&(E=!0)}function z(F,L){if(!(F instanceof AST_BlockStatement))return F;for(var G=null,p=0,I=F.body.length;p<I;p++){var D=F.body[p];if(D instanceof AST_Var&&B(D))L.push(D);else{if(G||D instanceof AST_DefinitionsLike&&!(D instanceof AST_Var))return!1;G=D}}return G}function m(F,L){function G(se){p--,E=!0;var Pe=I.body;return make_sequence(Pe,[Pe,se]).transform(L)}for(var p=0,I,D=0;D<F.length;D++){var V=F[D];if(I&&(V instanceof AST_Exit?V.value=G(V.value||make_void_0(V).transform(L)):V instanceof AST_For?V.init instanceof AST_DefinitionsLike||walk(I.body,Pe=>{if(Pe instanceof AST_Scope)return!0;if(Pe instanceof AST_Binary&&Pe.operator==="in")return walk_abort})||(V.init?V.init=G(V.init):(V.init=I.body,p--,E=!0)):V instanceof AST_ForIn?(!(V.init instanceof AST_DefinitionsLike)||V.init instanceof AST_Var)&&(V.object=G(V.object)):V instanceof AST_If?V.condition=G(V.condition):(V instanceof AST_Switch||V instanceof AST_With)&&(V.expression=G(V.expression))),L.option("conditionals")&&V instanceof AST_If){var C=[],K=z(V.body,C),X=z(V.alternative,C);if(K!==!1&&X!==!1&&C.length>0){var re=C.length;C.push(make_node(AST_If,V,{condition:V.condition,body:K||make_node(AST_EmptyStatement,V.body),alternative:X})),C.unshift(p,1),[].splice.apply(F,C),D+=re,p+=re+1,I=null,E=!0;continue}}F[p++]=V,I=V instanceof AST_SimpleStatement?V:null}F.length=p}function d(F,L){if(F instanceof AST_Definitions){var G=F.definitions[F.definitions.length-1];if(G.value instanceof AST_Object){var p;if(L instanceof AST_Assign&&!L.logical?p=[L]:L instanceof AST_Sequence&&(p=L.expressions.slice()),!!p){var I=!1;do{var D=p[0];if(!(D instanceof AST_Assign)||D.operator!="="||!(D.left instanceof AST_PropAccess))break;var V=D.left.expression;if(!(V instanceof AST_SymbolRef)||G.name.name!=V.name||!D.right.is_constant_expression(o))break;var C=D.left.property;if(C instanceof AST_Node&&(C=C.evaluate(n)),C instanceof AST_Node)break;C=""+C;var K=n.option("ecma")<2015&&n.has_directive("use strict")?function(re){return re.key!=C&&re.key&&re.key.name!=C}:function(re){return re.key&&re.key.name!=C};if(!G.value.properties.every(K))break;var X=G.value.properties.filter(function(re){return re.key===C})[0];X?X.value=new AST_Sequence({start:X.start,expressions:[X.value.clone(),D.right.clone()],end:X.end}):G.value.properties.push(make_node(AST_ObjectKeyVal,D,{key:C,value:D.right})),p.shift(),I=!0}while(p.length);return I&&p}}}}function y(F){for(var L,G=0,p=-1,I=F.length;G<I;G++){var D=F[G],V=F[p];if(D instanceof AST_Definitions)V&&V.TYPE==D.TYPE?(V.definitions=V.definitions.concat(D.definitions),E=!0):L&&L.TYPE==D.TYPE&&B(D)?(L.definitions=L.definitions.concat(D.definitions),E=!0):(F[++p]=D,L=D);else if(D instanceof AST_Using&&V instanceof AST_Using&&V.await===D.await)V.definitions=V.definitions.concat(D.definitions);else if(D instanceof AST_Exit)D.value=K(D.value);else if(D instanceof AST_For){var C=d(V,D.init);C?(E=!0,D.init=C.length?make_sequence(D.init,C):null,F[++p]=D):V instanceof AST_Var&&(!D.init||D.init.TYPE==V.TYPE)?(D.init&&(V.definitions=V.definitions.concat(D.init.definitions)),D.init=V,F[p]=D,E=!0):L instanceof AST_Var&&D.init instanceof AST_Var&&B(D.init)?(L.definitions=L.definitions.concat(D.init.definitions),D.init=null,F[++p]=D,E=!0):F[++p]=D}else if(D instanceof AST_ForIn)D.object=K(D.object);else if(D instanceof AST_If)D.condition=K(D.condition);else if(D instanceof AST_SimpleStatement){var C=d(V,D.body);if(C){if(E=!0,!C.length)continue;D.body=make_sequence(D.body,C)}F[++p]=D}else D instanceof AST_Switch||D instanceof AST_With?D.expression=K(D.expression):F[++p]=D}F.length=p+1;function K(X){F[++p]=D;var re=d(V,X);return re?(E=!0,re.length?make_sequence(X,re):X instanceof AST_Sequence?X.tail_node().left:X.left):X}}}function within_array_or_object_literal(i){for(var n,o=0;n=i.parent(o++);){if(n instanceof AST_Statement)return!1;if(n instanceof AST_Array||n instanceof AST_ObjectKeyVal||n instanceof AST_Object)return!0}return!1}function scope_encloses_variables_in_this_scope(i,n){for(const o of n.enclosed){if(n.variables.has(o.name))continue;const s=i.find_variable(o.name);if(s){if(s===o)continue;return!0}}return!1}function is_const_symbol_short_than_init_value(i,n){if(i.orig.length===1&&n){const o=n.size(),s=i.name.length;return o>s}return!0}function inline_into_symbolref(i,n){if(n.in_computed_key())return i;const o=n.parent(),s=i.definition(),l=n.find_scope();let f=i.fixed_value();if(n.top_retain&&s.global&&n.top_retain(s)&&is_const_symbol_short_than_init_value(s,f))return s.fixed=!1,s.single_use=!1,i;if(dont_inline_lambda_in_loop(n,f))return i;let E=s.single_use&&!(o instanceof AST_Call&&o.is_callee_pure(n)||has_annotation(o,_NOINLINE))&&!(o instanceof AST_Export&&f instanceof AST_Lambda&&f.name);if(E&&f instanceof AST_Node&&(E=!f.has_side_effects(n)&&!f.may_throw(n)),f instanceof AST_Class&&s.scope!==i.scope)return i;if(E&&(f instanceof AST_Lambda||f instanceof AST_Class)){if(retain_top_func(f,n))E=!1;else if(s.scope!==i.scope&&(s.escaped==1||has_flag(f,INLINED)||within_array_or_object_literal(n)||!n.option("reduce_funcs")))E=!1;else if(is_recursive_ref(n,s))E=!1;else if((s.scope!==i.scope||s.orig[0]instanceof AST_SymbolFunarg)&&(E=f.is_constant_expression(i.scope),E=="f")){var g=i.scope;do(g instanceof AST_Defun||is_func_expr(g))&&set_flag(g,INLINED);while(g=g.parent_scope)}}if(E&&(f instanceof AST_Lambda||f instanceof AST_Class)&&(E=s.scope===i.scope&&!scope_encloses_variables_in_this_scope(l,f)||o instanceof AST_Call&&o.expression===i&&!scope_encloses_variables_in_this_scope(l,f)&&!(f.name&&f.name.definition().recursive_refs>0)),E&&f){if(f instanceof AST_DefClass&&(set_flag(f,SQUEEZED),f=make_node(AST_ClassExpression,f,f)),f instanceof AST_Defun&&(set_flag(f,SQUEEZED),f=make_node(AST_Function,f,f)),s.recursive_refs>0&&f.name instanceof AST_SymbolDefun){const x=f.name.definition();let w=f.variables.get(f.name.name),R=w&&w.orig[0];R instanceof AST_SymbolLambda||(R=make_node(AST_SymbolLambda,f.name,f.name),R.scope=f,f.name=R,w=f.def_function(R)),walk(f,k=>{k instanceof AST_SymbolRef&&k.definition()===x&&(k.thedef=w,w.references.push(k))})}return(f instanceof AST_Lambda||f instanceof AST_Class)&&f.parent_scope!==l&&(f=f.clone(!0,n.get_toplevel()),l.add_child_scope(f)),f.optimize(n)}if(f){let x;if(f instanceof AST_This)!(s.orig[0]instanceof AST_SymbolFunarg)&&s.references.every(w=>s.scope===w.scope)&&(x=f);else{var N=f.evaluate(n);N!==f&&(n.option("unsafe_regexp")||!(N instanceof RegExp))&&(x=make_node_from_constant(N,f))}if(x){const w=i.size(n),R=x.size(n);let k=0;if(n.option("unused")&&!n.exposed(s)&&(k=(w+2+f.size(n))/(s.references.length-s.assignments)),R<=w+k)return x}}return i}function inline_into_call(i,n){if(n.in_computed_key())return i;var o=i.expression,s=o,l=i.args.every(D=>!(D instanceof AST_Expansion));if(n.option("reduce_vars")&&s instanceof AST_SymbolRef&&!has_annotation(i,_NOINLINE)){const D=s.fixed_value();if(retain_top_func(D,n)||!n.toplevel.funcs&&o.definition().global)return i;s=D}if(dont_inline_lambda_in_loop(n,s)&&!has_annotation(i,_INLINE))return i;var f=s instanceof AST_Lambda,E=f&&s.body[0],g=f&&!s.is_generator&&!s.async,N=g&&n.option("inline")&&!i.is_callee_pure(n);if(N&&E instanceof AST_Return){let D=E.value;if(!D||D.is_constant_expression()){D?D=D.clone(!0):D=make_void_0(i);const V=i.args.concat(D);return make_sequence(i,V).optimize(n)}if(s.argnames.length===1&&s.argnames[0]instanceof AST_SymbolFunarg&&i.args.length<2&&!(i.args[0]instanceof AST_Expansion)&&D instanceof AST_SymbolRef&&D.name===s.argnames[0].name){const V=(i.args[0]||make_void_0()).optimize(n);let C;return V instanceof AST_PropAccess&&(C=n.parent())instanceof AST_Call&&C.expression===i?make_sequence(i,[make_node(AST_Number,i,{value:0}),V]):V}}if(N){var x,w,R=-1;let D,V,C;if(l&&!s.uses_arguments&&!(n.parent()instanceof AST_Class)&&!(s.name&&s instanceof AST_Function)&&(V=m(E))&&(o===s||has_annotation(i,_INLINE)||n.option("unused")&&(D=o.definition()).references.length==1&&!is_recursive_ref(n,D)&&s.is_constant_expression(o.scope))&&!has_annotation(i,_PURE|_NOINLINE)&&!s.contains_this()&&F()&&(C=n.find_scope())&&!scope_encloses_variables_in_this_scope(C,s)&&!(function(){let X=0,re;for(;re=n.parent(X++);){if(re instanceof AST_DefaultAssign)return!0;if(re instanceof AST_Block)break}return!1})()&&!(x instanceof AST_Class))return set_flag(s,SQUEEZED),C.add_child_scope(s),make_sequence(i,I(V)).optimize(n)}if(N&&has_annotation(i,_INLINE))return set_flag(s,SQUEEZED),s=make_node(s.CTOR===AST_Defun?AST_Function:s.CTOR,s,s),s=s.clone(!0),s.figure_out_scope({},{parent_scope:n.find_scope(),toplevel:n.get_toplevel()}),make_node(AST_Call,i,{expression:s,args:i.args}).optimize(n);if(g&&n.option("side_effects")&&s.body.every(is_empty)){var B=i.args.concat(make_void_0(i));return make_sequence(i,B).optimize(n)}if(n.option("negate_iife")&&n.parent()instanceof AST_SimpleStatement&&is_iife_call(i))return i.negate(n,!0);var P=i.evaluate(n);if(P!==i)return P=make_node_from_constant(P,i).optimize(n),best_of(n,P,i);return i;function z(D){if(!D)return make_void_0(i);if(D instanceof AST_Return)return D.value?D.value.clone(!0):make_void_0(i);if(D instanceof AST_SimpleStatement)return make_node(AST_UnaryPrefix,D,{operator:"void",expression:D.body.clone(!0)})}function m(D){var V=s.body,C=V.length;if(n.option("inline")<3)return C==1&&z(D);D=null;for(var K=0;K<C;K++){var X=V[K];if(X instanceof AST_Var){if(D&&!X.definitions.every(re=>!re.value))return!1}else{if(D)return!1;X instanceof AST_EmptyStatement||(D=X)}}return z(D)}function d(D,V){for(var C=0,K=s.argnames.length;C<K;C++){var X=s.argnames[C];if(X instanceof AST_DefaultAssign){if(has_flag(X.left,UNUSED))continue;return!1}if(X instanceof AST_Destructuring)return!1;if(X instanceof AST_Expansion){if(has_flag(X.expression,UNUSED))continue;return!1}if(!has_flag(X,UNUSED)){if(!V||D.has(X.name)||identifier_atom.has(X.name)||x.conflicting_def(X.name))return!1;w&&w.push(X.definition())}}return!0}function y(D,V){for(var C=s.body.length,K=0;K<C;K++){var X=s.body[K];if(X instanceof AST_Var){if(!V)return!1;for(var re=X.definitions.length;--re>=0;){var se=X.definitions[re].name;if(se instanceof AST_Destructuring||D.has(se.name)||identifier_atom.has(se.name)||x.conflicting_def(se.name))return!1;w&&w.push(se.definition())}}}return!0}function F(){var D=new Set;do if(x=n.parent(++R),x.is_block_scope()&&x.block_scope&&x.block_scope.variables.forEach(function(K){D.add(K.name)}),x instanceof AST_Catch)x.argname&&D.add(x.argname.name);else if(x instanceof AST_IterationStatement)w=[];else if(x instanceof AST_SymbolRef&&x.fixed_value()instanceof AST_Scope)return!1;while(!(x instanceof AST_Scope));var V=!(x instanceof AST_Toplevel)||n.toplevel.vars,C=n.option("inline");return!y(D,C>=3&&V)||!d(D,C>=2&&V)?!1:!w||w.length==0||!is_reachable(s,w)}function L(D,V,C,K){var X=C.definition();x.variables.has(C.name)||(x.variables.set(C.name,X),x.enclosed.push(X),D.push(make_node(AST_VarDef,C,{name:C,value:null})));var se=make_node(AST_SymbolRef,C,C);X.references.push(se),K&&V.push(make_node(AST_Assign,i,{operator:"=",logical:!1,left:se,right:K.clone()}))}function G(D,V){for(var C=s.argnames.length,K=i.args.length;--K>=C;)V.push(i.args[K]);for(K=C;--K>=0;){var X=s.argnames[K],re=i.args[K];if(has_flag(X,UNUSED)||!X.name||x.conflicting_def(X.name))re&&V.push(re);else{var se=make_node(AST_SymbolVar,X,X);X.definition().orig.push(se),!re&&w&&(re=make_void_0(i)),L(D,V,se,re)}}D.reverse(),V.reverse()}function p(D,V){for(var C=V.length,K=0,X=s.body.length;K<X;K++){var re=s.body[K];if(re instanceof AST_Var)for(var se=0,Pe=re.definitions.length;se<Pe;se++){var Te=re.definitions[se],Ae=Te.name;if(L(D,V,Ae,Te.value),w&&s.argnames.every(be=>be.name!=Ae.name)){var we=s.variables.get(Ae.name),ve=make_node(AST_SymbolRef,Ae,Ae);we.references.push(ve),V.splice(C++,0,make_node(AST_Assign,Te,{operator:"=",logical:!1,left:ve,right:make_void_0(Ae)}))}}}}function I(D){var V=[],C=[];if(G(V,C),p(V,C),C.push(D),V.length){const K=x.body.indexOf(n.parent(R-1))+1;x.body.splice(K,0,make_node(AST_Var,s,{definitions:V}))}return C.map(K=>K.clone(!0))}}function dont_inline_lambda_in_loop(i,n){return(n instanceof AST_Lambda||n instanceof AST_Class)&&!!i.is_within_loop()}(function(i){function n(o,s){if(o instanceof AST_Node)return o instanceof AST_Constant||(o=o.clone(!0)),make_node(o.CTOR,s,o);if(Array.isArray(o))return make_node(AST_Array,s,{elements:o.map(function(E){return n(E,s)})});if(o&&typeof o=="object"){var l=[];for(var f in o)HOP(o,f)&&l.push(make_node(AST_ObjectKeyVal,s,{key:f,value:n(o[f],s)}));return make_node(AST_Object,s,{properties:l})}return make_node_from_constant(o,s)}AST_Toplevel.DEFMETHOD("resolve_defines",function(o){return o.option("global_defs")?(this.figure_out_scope({ie8:o.option("ie8")}),this.transform(new TreeTransformer(function(s){var l=s._find_defs(o,"");if(l){for(var f=0,E=s,g;(g=this.parent(f++))&&!(!(g instanceof AST_PropAccess)||g.expression!==E);)E=g;if(!is_lhs(E,g))return l}}))):this}),i(AST_Node,noop),i(AST_Chain,function(o,s){return this.expression._find_defs(o,s)}),i(AST_Dot,function(o,s){return this.expression._find_defs(o,"."+this.property+s)}),i(AST_SymbolDeclaration,function(){this.global()}),i(AST_SymbolRef,function(o,s){if(this.global()){var l=o.option("global_defs"),f=this.name+s;if(HOP(l,f))return n(l[f],this)}}),i(AST_ImportMeta,function(o,s){var l=o.option("global_defs"),f="import.meta"+s;if(HOP(l,f))return n(l[f],this)})})(function(i,n){i.DEFMETHOD("_find_defs",n)});class Compressor extends TreeWalker{constructor(n,{false_by_default:o=!1,mangle_options:s=!1}){super(),n.defaults!==void 0&&!n.defaults&&(o=!0),this.options=defaults(n,{arguments:!1,arrows:!o,booleans:!o,booleans_as_integers:!1,collapse_vars:!o,comparisons:!o,computed_props:!o,conditionals:!o,dead_code:!o,defaults:!0,directives:!o,drop_console:!1,drop_debugger:!o,ecma:5,evaluate:!o,expression:!1,global_defs:!1,hoist_funs:!1,hoist_props:!o,hoist_vars:!1,ie8:!1,if_return:!o,inline:!o,join_vars:!o,keep_classnames:!1,keep_fargs:!0,keep_fnames:!1,keep_infinity:!1,lhs_constants:!o,loops:!o,module:!1,negate_iife:!o,passes:1,properties:!o,pure_getters:!o&&"strict",pure_funcs:null,pure_new:!1,reduce_funcs:!o,reduce_vars:!o,sequences:!o,side_effects:!o,switches:!o,top_retain:null,toplevel:!!(n&&n.top_retain),typeofs:!o,unsafe:!1,unsafe_arrows:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_symbols:!1,unsafe_methods:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!o,warnings:!1},!0);var l=this.options.global_defs;if(typeof l=="object")for(var f in l)f[0]==="@"&&HOP(l,f)&&(l[f.slice(1)]=parse$1(l[f],{expression:!0}));this.options.inline===!0&&(this.options.inline=3);var E=this.options.pure_funcs;typeof E=="function"?this.pure_funcs=E:this.pure_funcs=E?function(w){return!E.includes(w.expression.print_to_string())}:return_true;var g=this.options.top_retain;g instanceof RegExp?this.top_retain=function(w){return g.test(w.name)}:typeof g=="function"?this.top_retain=g:g&&(typeof g=="string"&&(g=g.split(/,/)),this.top_retain=function(w){return g.includes(w.name)}),this.options.module&&(this.directives["use strict"]=!0,this.options.toplevel=!0);var N=this.options.toplevel;this.toplevel=typeof N=="string"?{funcs:/funcs/.test(N),vars:/vars/.test(N)}:{funcs:N,vars:N};var x=this.options.sequences;this.sequences_limit=x==1?800:x|0,this.evaluated_regexps=new Map,this._toplevel=void 0,this._mangle_options=s&&format_mangler_options(s)}mangle_options(){var n=this._mangle_options&&this._mangle_options.nth_identifier||base54,o=this._mangle_options&&this._mangle_options.module||this.option("module");return{ie8:this.option("ie8"),nth_identifier:n,module:o}}option(n){return this.options[n]}exposed(n){if(n.export)return!0;if(n.global){for(var o=0,s=n.orig.length;o<s;o++)if(!this.toplevel[n.orig[o]instanceof AST_SymbolDefun?"funcs":"vars"])return!0}return!1}in_boolean_context(){if(!this.option("booleans"))return!1;for(var n=this.self(),o=0,s;s=this.parent(o);o++){if(s instanceof AST_SimpleStatement||s instanceof AST_Conditional&&s.condition===n||s instanceof AST_DWLoop&&s.condition===n||s instanceof AST_For&&s.condition===n||s instanceof AST_If&&s.condition===n||s instanceof AST_UnaryPrefix&&s.operator=="!"&&s.expression===n)return!0;if(s instanceof AST_Binary&&(s.operator=="&&"||s.operator=="||"||s.operator=="??")||s instanceof AST_Conditional||s.tail_node()===n)n=s;else return!1}}in_32_bit_context(n){if(!this.option("evaluate"))return!1;for(var o=this.self(),s=0,l;l=this.parent(s);s++){if(l instanceof AST_Binary&&bitwise_binop.has(l.operator))return n?(o===l.left?l.right:l.left).is_number(this):!0;if(l instanceof AST_UnaryPrefix)return l.operator==="~";if(l instanceof AST_Binary&&(l.operator=="&&"&&l.right===o||l.operator=="||"&&l.right===o||l.operator=="??"&&l.right===o)||l instanceof AST_Conditional&&l.condition!==o||l.tail_node()===o)o=l;else return!1}}in_computed_key(){if(!this.option("evaluate"))return!1;for(var n=this.self(),o=0,s;s=this.parent(o);o++)if(s instanceof AST_ObjectProperty&&s.key===n)return!0;return!1}get_toplevel(){return this._toplevel}compress(n){n=n.resolve_defines(this),this._toplevel=n,this.option("expression")&&this._toplevel.process_expression(!0);for(var o=+this.options.passes||1,s=1/0,l=!1,f=this.mangle_options(),E=0;E<o;E++)if(this._toplevel.figure_out_scope(f),E===0&&this.option("drop_console")&&(this._toplevel=this._toplevel.drop_console(this.option("drop_console"))),(E>0||this.option("reduce_vars"))&&this._toplevel.reset_opt_flags(this),this._toplevel=this._toplevel.transform(this),o>1){let g=0;if(walk(this._toplevel,()=>{g++}),g<s)s=g,l=!1;else{if(l)break;l=!0}}return this.option("expression")&&this._toplevel.process_expression(!1),n=this._toplevel,this._toplevel=void 0,n}before(n,o){if(has_flag(n,SQUEEZED))return n;var s=!1;n instanceof AST_Scope&&(n=n.hoist_properties(this),n=n.hoist_declarations(this),s=!0),o(n,this),o(n,this);var l=n.optimize(this);return s&&l instanceof AST_Scope&&(l.drop_unused(this),o(l,this)),l===n&&set_flag(l,SQUEEZED),l}is_lhs(){const n=this.stack[this.stack.length-1],o=this.stack[this.stack.length-2];return is_lhs(n,o)}}function def_optimize(i,n){i.DEFMETHOD("optimize",function(o){var s=this;if(has_flag(s,OPTIMIZED)||o.has_directive("use asm"))return s;var l=n(s,o);return set_flag(l,OPTIMIZED),l})}def_optimize(AST_Node,function(i){return i});AST_Toplevel.DEFMETHOD("drop_console",function(i){const n=Array.isArray(i),o=new TreeTransformer(function(s){if(s.TYPE==="Call"){var l=s.expression;if(l instanceof AST_PropAccess){for(var f=l.expression,E=l.property,g=2;f.expression;)E=f.property,f=f.expression,g++;if(!(n&&!i.includes(E))&&is_undeclared_ref(f)&&f.name=="console")if(g===3&&!["call","apply"].includes(l.property)&&is_used_in_expression(o))l.expression=make_empty_function(s),set_flag(l.expression,SQUEEZED),s.args=[];else return make_void_0(s)}}});return this.transform(o)});AST_Node.DEFMETHOD("equivalent_to",function(i){return equivalent_to(this,i)});AST_Scope.DEFMETHOD("process_expression",function(i,n){var o=this,s=new TreeTransformer(function(l){if(i&&l instanceof AST_SimpleStatement)return make_node(AST_Return,l,{value:l.body});if(!i&&l instanceof AST_Return){if(n){var f=l.value&&l.value.drop_side_effect_free(n,!0);return f?make_node(AST_SimpleStatement,l,{body:f}):make_node(AST_EmptyStatement,l)}return make_node(AST_SimpleStatement,l,{body:l.value||make_void_0(l)})}if(l instanceof AST_Class||l instanceof AST_Lambda&&l!==o)return l;if(l instanceof AST_Block){var E=l.body.length-1;E>=0&&(l.body[E]=l.body[E].transform(s))}else l instanceof AST_If?(l.body=l.body.transform(s),l.alternative&&(l.alternative=l.alternative.transform(s))):l instanceof AST_With&&(l.body=l.body.transform(s));return l});o.transform(s)});AST_Toplevel.DEFMETHOD("reset_opt_flags",function(i){const n=this,o=i.option("reduce_vars"),s=new TreeWalker(function(l,f){if(clear_flag(l,CLEAR_BETWEEN_PASSES),o)return i.top_retain&&l instanceof AST_Defun&&s.parent()===n&&set_flag(l,TOP),l.reduce_vars(s,f,i)});s.safe_ids=Object.create(null),s.in_loop=null,s.loop_ids=new Map,s.defs_to_safe_ids=new Map,n.walk(s)});AST_Symbol.DEFMETHOD("fixed_value",function(){var i=this.thedef.fixed;return!i||i instanceof AST_Node?i:i()});AST_SymbolRef.DEFMETHOD("is_immutable",function(){var i=this.definition().orig;return i.length==1&&i[0]instanceof AST_SymbolLambda});function find_variable(i,n){for(var o,s=0;(o=i.parent(s++))&&!(o instanceof AST_Scope);)if(o instanceof AST_Catch&&o.argname){o=o.argname.definition().scope;break}return o.find_variable(n)}var global_names=makePredicate("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Math Number parseFloat parseInt RangeError ReferenceError RegExp Object setInterval setTimeout String SyntaxError TypeError unescape URIError");AST_SymbolRef.DEFMETHOD("is_declared",function(i){return!this.definition().undeclared||i.option("unsafe")&&global_names.has(this.name)});var directives$1=new Set(["use asm","use strict"]);def_optimize(AST_Directive,function(i,n){return n.option("directives")&&(!directives$1.has(i.value)||n.has_directive(i.value)!==i)?make_node(AST_EmptyStatement,i):i});def_optimize(AST_Debugger,function(i,n){return n.option("drop_debugger")?make_node(AST_EmptyStatement,i):i});def_optimize(AST_LabeledStatement,function(i,n){return i.body instanceof AST_Break&&n.loopcontrol_target(i.body)===i.body?make_node(AST_EmptyStatement,i):i.label.references.length==0?i.body:i});def_optimize(AST_Block,function(i,n){return tighten_body(i.body,n),i});function can_be_extracted_from_if_block(i){return!(i instanceof AST_Const||i instanceof AST_Let||i instanceof AST_Using||i instanceof AST_Class)}def_optimize(AST_BlockStatement,function(i,n){switch(tighten_body(i.body,n),i.body.length){case 1:if(!n.has_directive("use strict")&&n.parent()instanceof AST_If&&can_be_extracted_from_if_block(i.body[0])||can_be_evicted_from_block(i.body[0]))return i.body[0];break;case 0:return make_node(AST_EmptyStatement,i)}return i});function opt_AST_Lambda(i,n){return tighten_body(i.body,n),n.option("side_effects")&&i.body.length==1&&i.body[0]===n.has_directive("use strict")&&(i.body.length=0),i}def_optimize(AST_Lambda,opt_AST_Lambda);AST_Scope.DEFMETHOD("hoist_declarations",function(i){var n=this;if(i.has_directive("use asm"))return n;var o=i.option("hoist_funs"),s=i.option("hoist_vars");if(o||s){var l=[],f=[],E=new Map,g=0,N=0;walk(n,m=>{if(m instanceof AST_Scope&&m!==n)return!0;if(m instanceof AST_Var)return++N,!0}),s=s&&N>1;var x=new TreeTransformer(function(d){if(d!==n){if(d instanceof AST_Directive)return l.push(d),make_node(AST_EmptyStatement,d);if(o&&d instanceof AST_Defun&&!(x.parent()instanceof AST_Export)&&x.parent()===n)return f.push(d),make_node(AST_EmptyStatement,d);if(s&&d instanceof AST_Var&&!d.definitions.some(G=>G.name instanceof AST_Destructuring)){d.definitions.forEach(function(G){E.set(G.name.name,G),++g});var y=d.to_assignments(i),F=x.parent();if(F instanceof AST_ForIn&&F.init===d){if(y==null){var L=d.definitions[0].name;return make_node(AST_SymbolRef,L,L)}return y}return F instanceof AST_For&&F.init===d?y:y?make_node(AST_SimpleStatement,d,{body:y}):make_node(AST_EmptyStatement,d)}if(d instanceof AST_Scope)return d}});if(n=n.transform(x),g>0){var w=[];const m=n instanceof AST_Lambda,d=m?n.args_as_names():null;if(E.forEach((y,F)=>{m&&d.some(L=>L.name===y.name.name)?E.delete(F):(y=y.clone(),y.value=null,w.push(y),E.set(F,y))}),w.length>0){for(var R=0;R<n.body.length;){if(n.body[R]instanceof AST_SimpleStatement){var k=n.body[R].body,B,P;if(k instanceof AST_Assign&&k.operator=="="&&(B=k.left)instanceof AST_Symbol&&E.has(B.name)){var z=E.get(B.name);if(z.value)break;z.value=k.right,remove(w,z),w.push(z),n.body.splice(R,1);continue}if(k instanceof AST_Sequence&&(P=k.expressions[0])instanceof AST_Assign&&P.operator=="="&&(B=P.left)instanceof AST_Symbol&&E.has(B.name)){var z=E.get(B.name);if(z.value)break;z.value=P.right,remove(w,z),w.push(z),n.body[R].body=make_sequence(k,k.expressions.slice(1));continue}}if(n.body[R]instanceof AST_EmptyStatement){n.body.splice(R,1);continue}if(n.body[R]instanceof AST_BlockStatement){n.body.splice(R,1,...n.body[R].body);continue}break}w=make_node(AST_Var,n,{definitions:w}),f.push(w)}}n.body=l.concat(f,n.body)}return n});AST_Scope.DEFMETHOD("hoist_properties",function(i){var n=this;if(!i.option("hoist_props")||i.has_directive("use asm"))return n;var o=n instanceof AST_Toplevel&&i.top_retain||return_false,s=new Map,l=new TreeTransformer(function(f,E){if(f instanceof AST_VarDef){const g=f.name;let N,x;if(g.scope===n&&!(g instanceof AST_SymbolUsing)&&(N=g.definition()).escaped!=1&&!N.assignments&&!N.direct_access&&!N.single_use&&!i.exposed(N)&&!o(N)&&(x=g.fixed_value())===f.value&&x instanceof AST_Object&&!x.properties.some(w=>w instanceof AST_Expansion||w.computed_key())){E(f,this);const w=new Map,R=[];return x.properties.forEach(({key:k,value:B})=>{const P=l.find_scope(),z=n.create_symbol(g.CTOR,{source:g,scope:P,conflict_scopes:new Set([P,...g.definition().references.map(m=>m.scope)]),tentative_name:g.name+"_"+k});w.set(String(k),z.definition()),R.push(make_node(AST_VarDef,f,{name:z,value:B}))}),s.set(N.id,w),MAP.splice(R)}}else if(f instanceof AST_PropAccess&&f.expression instanceof AST_SymbolRef){const g=s.get(f.expression.definition().id);if(g){const N=g.get(String(get_simple_key(f.property))),x=make_node(AST_SymbolRef,f,{name:N.name,scope:f.expression.scope,thedef:N});return x.reference({}),x}}});return n.transform(l)});def_optimize(AST_SimpleStatement,function(i,n){if(n.option("side_effects")){var o=i.body,s=o.drop_side_effect_free(n,!0);if(!s)return make_node(AST_EmptyStatement,i);if(s!==o)return make_node(AST_SimpleStatement,i,{body:s})}return i});def_optimize(AST_While,function(i,n){return n.option("loops")?make_node(AST_For,i,i).optimize(n):i});def_optimize(AST_Do,function(i,n){if(!n.option("loops"))return i;var o=i.condition.tail_node().evaluate(n);if(!(o instanceof AST_Node)){if(o)return make_node(AST_For,i,{body:make_node(AST_BlockStatement,i.body,{body:[i.body,make_node(AST_SimpleStatement,i.condition,{body:i.condition})]})}).optimize(n);if(!has_break_or_continue(i,n.parent()))return make_node(AST_BlockStatement,i.body,{body:[i.body,make_node(AST_SimpleStatement,i.condition,{body:i.condition})]}).optimize(n)}return i});function if_break_in_loop(i,n){var o=i.body instanceof AST_BlockStatement?i.body.body[0]:i.body;if(n.option("dead_code")&&l(o)){var s=[];return i.init instanceof AST_Statement?s.push(i.init):i.init&&s.push(make_node(AST_SimpleStatement,i.init,{body:i.init})),i.condition&&s.push(make_node(AST_SimpleStatement,i.condition,{body:i.condition})),extract_from_unreachable_code(n,i.body,s),make_node(AST_BlockStatement,i,{body:s})}return o instanceof AST_If&&(l(o.body)?(i.condition?i.condition=make_node(AST_Binary,i.condition,{left:i.condition,operator:"&&",right:o.condition.negate(n)}):i.condition=o.condition.negate(n),f(o.alternative)):l(o.alternative)&&(i.condition?i.condition=make_node(AST_Binary,i.condition,{left:i.condition,operator:"&&",right:o.condition}):i.condition=o.condition,f(o.body))),i;function l(E){return E instanceof AST_Break&&n.loopcontrol_target(E)===n.self()}function f(E){E=as_statement_array(E),i.body instanceof AST_BlockStatement?(i.body=i.body.clone(),i.body.body=E.concat(i.body.body.slice(1)),i.body=i.body.transform(n)):i.body=make_node(AST_BlockStatement,i.body,{body:E}).transform(n),i=if_break_in_loop(i,n)}}def_optimize(AST_For,function(i,n){if(!n.option("loops"))return i;if(n.option("side_effects")&&i.init&&(i.init=i.init.drop_side_effect_free(n)),i.condition){var o=i.condition.evaluate(n);if(!(o instanceof AST_Node)){if(o)i.condition=null;else if(!n.option("dead_code")){var s=i.condition;i.condition=make_node_from_constant(o,i.condition),i.condition=best_of_expression(i.condition.transform(n),s)}}if(n.option("dead_code")&&(o instanceof AST_Node&&(o=i.condition.tail_node().evaluate(n)),!o)){var l=[];return extract_from_unreachable_code(n,i.body,l),i.init instanceof AST_Statement?l.push(i.init):i.init&&l.push(make_node(AST_SimpleStatement,i.init,{body:i.init})),l.push(make_node(AST_SimpleStatement,i.condition,{body:i.condition})),make_node(AST_BlockStatement,i,{body:l}).optimize(n)}}return if_break_in_loop(i,n)});def_optimize(AST_If,function(i,n){if(is_empty(i.alternative)&&(i.alternative=null),!n.option("conditionals"))return i;var o=i.condition.evaluate(n);if(!n.option("dead_code")&&!(o instanceof AST_Node)){var s=i.condition;i.condition=make_node_from_constant(o,s),i.condition=best_of_expression(i.condition.transform(n),s)}if(n.option("dead_code"))if(o instanceof AST_Node&&(o=i.condition.tail_node().evaluate(n)),o){if(!(o instanceof AST_Node)){var l=[];return l.push(make_node(AST_SimpleStatement,i.condition,{body:i.condition})),l.push(i.body),i.alternative&&extract_from_unreachable_code(n,i.alternative,l),make_node(AST_BlockStatement,i,{body:l}).optimize(n)}}else{var l=[];return extract_from_unreachable_code(n,i.body,l),l.push(make_node(AST_SimpleStatement,i.condition,{body:i.condition})),i.alternative&&l.push(i.alternative),make_node(AST_BlockStatement,i,{body:l}).optimize(n)}var f=i.condition.negate(n),E=i.condition.size(),g=f.size(),N=g<E;if(i.alternative&&N){N=!1,i.condition=f;var x=i.body;i.body=i.alternative||make_node(AST_EmptyStatement,i),i.alternative=x}if(is_empty(i.body)&&is_empty(i.alternative))return make_node(AST_SimpleStatement,i.condition,{body:i.condition.clone()}).optimize(n);if(i.body instanceof AST_SimpleStatement&&i.alternative instanceof AST_SimpleStatement)return make_node(AST_SimpleStatement,i,{body:make_node(AST_Conditional,i,{condition:i.condition,consequent:i.body.body,alternative:i.alternative.body})}).optimize(n);if(is_empty(i.alternative)&&i.body instanceof AST_SimpleStatement)return E===g&&!N&&i.condition instanceof AST_Binary&&i.condition.operator=="||"&&(N=!0),N?make_node(AST_SimpleStatement,i,{body:make_node(AST_Binary,i,{operator:"||",left:f,right:i.body.body})}).optimize(n):make_node(AST_SimpleStatement,i,{body:make_node(AST_Binary,i,{operator:"&&",left:i.condition,right:i.body.body})}).optimize(n);if(i.body instanceof AST_EmptyStatement&&i.alternative instanceof AST_SimpleStatement)return make_node(AST_SimpleStatement,i,{body:make_node(AST_Binary,i,{operator:"||",left:i.condition,right:i.alternative.body})}).optimize(n);if(i.body instanceof AST_Exit&&i.alternative instanceof AST_Exit&&i.body.TYPE==i.alternative.TYPE)return make_node(i.body.CTOR,i,{value:make_node(AST_Conditional,i,{condition:i.condition,consequent:i.body.value||make_void_0(i.body),alternative:i.alternative.value||make_void_0(i.alternative)}).transform(n)}).optimize(n);if(i.body instanceof AST_If&&!i.body.alternative&&!i.alternative&&(i=make_node(AST_If,i,{condition:make_node(AST_Binary,i.condition,{operator:"&&",left:i.condition,right:i.body.condition}),body:i.body.body,alternative:null})),aborts(i.body)&&i.alternative){var w=i.alternative;return i.alternative=null,make_node(AST_BlockStatement,i,{body:[i,w]}).optimize(n)}if(aborts(i.alternative)){var l=i.body;return i.body=i.alternative,i.condition=N?f:i.condition.negate(n),i.alternative=null,make_node(AST_BlockStatement,i,{body:[i,l]}).optimize(n)}return i});def_optimize(AST_Switch,function(i,n){if(!n.option("switches"))return i;var o,s=i.expression.evaluate(n);if(!(s instanceof AST_Node)){var l=i.expression;i.expression=make_node_from_constant(s,l),i.expression=best_of_expression(i.expression.transform(n),l)}if(!n.option("dead_code"))return i;s instanceof AST_Node&&(s=i.expression.tail_node().evaluate(n));for(var f=[],E=[],g,N,x=0,w=i.body.length;x<w&&!N;x++){if(o=i.body[x],o instanceof AST_Default)g?P(o,E[E.length-1]):g=o;else if(!(s instanceof AST_Node)){var R=o.expression.evaluate(n);if(!(R instanceof AST_Node)&&R!==s){P(o,E[E.length-1]);continue}if(R instanceof AST_Node&&!R.has_side_effects(n)&&(R=o.expression.tail_node().evaluate(n)),R===s&&(N=o,g)){var k=E.indexOf(g);E.splice(k,1),P(g,E[k-1]),g=null}}E.push(o)}for(;x<w;)P(i.body[x++],E[E.length-1]);i.body=E;let B=g||N;if(g=null,N=null,E.every((L,G)=>(L===B||L.expression instanceof AST_Constant)&&(L.body.length===0||aborts(L)||E.length-1===G)))for(let L=0;L<E.length;L++){const G=E[L];for(let p=L+1;p<E.length;p++){const I=E[p];if(I.body.length===0)continue;const D=p===E.length-1,V=z(I,G,!1);if(V||D&&z(I,G,!0)){!V&&D&&I.body.push(make_node(AST_Break));let C=p-1,K=0;for(;C>L&&F(E[C--]);)K++;const X=E.splice(p-K,1+K);E.splice(L+1,0,...X),L+=X.length}}}for(let L=0;L<E.length;L++){let G=E[L];if(G.body.length!==0&&aborts(G))for(let p=L+1;p<E.length;L++,p++){let I=E[p];if(I.body.length!==0){if(z(I,G,!1)||p===E.length-1&&z(I,G,!0)){G.body=[],G=I;continue}break}}}{let L=E.length-1;for(;L>=0;L--){let G=E[L].body;for(;y(G[G.length-1],n);)G.pop();if(!F(E[L]))break}if(L++,!B||E.indexOf(B)>=L)for(let G=E.length-1;G>=L;G--){let p=E[G];if(p===B)B=null,P(E.pop());else if(!p.expression.has_side_effects(n))P(E.pop());else break}}e:if(B){let L=E.indexOf(B),G=L;for(;G<E.length-1&&F(E[G]);G++);if(G<E.length-1)break e;let p=E.length-1;for(;p>=0;p--){let I=E[p];if(I!==B&&I.expression.has_side_effects(n))break}if(G>p){let I=L-1;for(;I>=0&&F(E[I]);I--);let D=Math.max(p,I)+1,V=L;p>L?(V=p,E[p].body=E[G].body):B.body=E[G].body,E.splice(V+1,G-V),E.splice(D,L-D)}}e:if(B){let L=E.findIndex(D=>!F(D)),G;if(L===E.length-1){let D=E[L];if(d(i))break e;G=make_node(AST_BlockStatement,D,{body:D.body}),D.body=[]}else if(L!==-1)break e;if(!E.find(D=>D!==B&&D.expression.has_side_effects(n)))return make_node(AST_BlockStatement,i,{body:f.concat(m(i.expression),B.expression?m(B.expression):[],G||[])}).optimize(n);const I=E.indexOf(B);if(E.splice(I,1),B=null,G)return make_node(AST_BlockStatement,i,{body:f.concat(i,G)}).optimize(n)}if(E.length>0&&(E[0].body=f.concat(E[0].body)),E.length==0)return make_node(AST_BlockStatement,i,{body:f.concat(m(i.expression))}).optimize(n);if(E.length==1&&!d(i)){let L=E[0];return make_node(AST_If,i,{condition:make_node(AST_Binary,i,{operator:"===",left:i.expression,right:L.expression}),body:make_node(AST_BlockStatement,L,{body:L.body}),alternative:null}).optimize(n)}if(E.length===2&&B&&!d(i)){let L=E[0]===B?E[1]:E[0],G=B.expression&&m(B.expression);if(aborts(E[0])){let V=E[0];return y(V.body[V.body.length-1],n)&&V.body.pop(),make_node(AST_If,i,{condition:make_node(AST_Binary,i,{operator:"===",left:i.expression,right:L.expression}),body:make_node(AST_BlockStatement,L,{body:L.body}),alternative:make_node(AST_BlockStatement,B,{body:[].concat(G||[],B.body)})}).optimize(n)}let p="===",I=make_node(AST_BlockStatement,L,{body:L.body}),D=make_node(AST_BlockStatement,B,{body:[].concat(G||[],B.body)});if(E[0]===B){p="!==";let V=D;D=I,I=V}return make_node(AST_BlockStatement,i,{body:[make_node(AST_If,i,{condition:make_node(AST_Binary,i,{operator:p,left:i.expression,right:L.expression}),body:I,alternative:null}),D]}).optimize(n)}return i;function P(L,G){G&&!aborts(G)?G.body=G.body.concat(L.body):extract_from_unreachable_code(n,L,f)}function z(L,G,p){let I=L.body,D=G.body;if(p&&(I=I.concat(make_node(AST_Break))),I.length!==D.length)return!1;let V=make_node(AST_BlockStatement,L,{body:I}),C=make_node(AST_BlockStatement,G,{body:D});return V.equivalent_to(C)}function m(L){return make_node(AST_SimpleStatement,L,{body:L})}function d(L){let G=!1,p=new TreeWalker(I=>{if(G||I instanceof AST_Lambda||I instanceof AST_SimpleStatement)return!0;if(!y(I,p))return;let D=p.parent();D instanceof AST_SwitchBranch&&D.body[D.body.length-1]===I||(G=!0)});return L.walk(p),G}function y(L,G){return L instanceof AST_Break&&G.loopcontrol_target(L)===i}function F(L){return!aborts(L)&&!make_node(AST_BlockStatement,L,{body:L.body}).has_side_effects(n)}});def_optimize(AST_Try,function(i,n){if(i.bcatch&&i.bfinally&&i.bfinally.body.every(is_empty)&&(i.bfinally=null),n.option("dead_code")&&i.body.body.every(is_empty)){var o=[];return i.bcatch&&extract_from_unreachable_code(n,i.bcatch,o),i.bfinally&&o.push(...i.bfinally.body),make_node(AST_BlockStatement,i,{body:o}).optimize(n)}return i});AST_Definitions.DEFMETHOD("to_assignments",function(i){var n=i.option("reduce_vars"),o=[];for(const l of this.definitions){if(l.value){var s=make_node(AST_SymbolRef,l.name,l.name);o.push(make_node(AST_Assign,l,{operator:"=",logical:!1,left:s,right:l.value})),n&&(s.definition().fixed=!1)}const f=l.name.definition();f.eliminated++,f.replaced--}return o.length==0?null:make_sequence(this,o)});def_optimize(AST_Definitions,function(i){return i.definitions.length==0?make_node(AST_EmptyStatement,i):i});def_optimize(AST_VarDef,function(i,n){return i.name instanceof AST_SymbolLet&&i.value!=null&&is_undefined(i.value,n)&&(i.value=null),i});def_optimize(AST_Import,function(i){return i});def_optimize(AST_Call,function(i,n){var o=i.expression,s=o;inline_array_like_spread(i.args);var l=i.args.every(X=>!(X instanceof AST_Expansion));n.option("reduce_vars")&&s instanceof AST_SymbolRef&&(s=s.fixed_value());var f=s instanceof AST_Lambda;if(f&&s.pinned())return i;if(n.option("unused")&&l&&f&&!s.uses_arguments){for(var E=0,g=0,N=0,x=i.args.length;N<x;N++){if(s.argnames[N]instanceof AST_Expansion){if(has_flag(s.argnames[N].expression,UNUSED))for(;N<x;){var w=i.args[N++].drop_side_effect_free(n);w&&(i.args[E++]=w)}else for(;N<x;)i.args[E++]=i.args[N++];g=E;break}var R=N>=s.argnames.length;if(R||has_flag(s.argnames[N],UNUSED)){var w=i.args[N].drop_side_effect_free(n);if(w)i.args[E++]=w;else if(!R){i.args[E++]=make_node(AST_Number,i.args[N],{value:0});continue}}else i.args[E++]=i.args[N];g=E}i.args.length=g}if(o instanceof AST_Dot&&o.expression instanceof AST_SymbolRef&&o.expression.name==="console"&&o.expression.definition().undeclared&&o.property==="assert"){const X=i.args[0];if(X){const re=X.evaluate(n);if(re===1||re===!0)return make_void_0(i).optimize(n)}}if(n.option("unsafe")&&!o.contains_optional()){if(o instanceof AST_Dot&&o.start.value==="Array"&&o.property==="from"&&i.args.length===1){const[X]=i.args;if(X instanceof AST_Array)return make_node(AST_Array,X,{elements:X.elements}).optimize(n)}if(is_undeclared_ref(o))switch(o.name){case"Array":if(i.args.length!=1)return make_node(AST_Array,i,{elements:i.args}).optimize(n);if(i.args[0]instanceof AST_Number&&i.args[0].value<=11){const X=[];for(let re=0;re<i.args[0].value;re++)X.push(new AST_Hole);return new AST_Array({elements:X})}break;case"Object":if(i.args.length==0)return make_node(AST_Object,i,{properties:[]});break;case"String":if(i.args.length==0)return make_node(AST_String,i,{value:""});if(i.args.length<=1)return make_node(AST_Binary,i,{left:i.args[0],operator:"+",right:make_node(AST_String,i,{value:""})}).optimize(n);break;case"Number":if(i.args.length==0)return make_node(AST_Number,i,{value:0});if(i.args.length==1&&n.option("unsafe_math"))return make_node(AST_UnaryPrefix,i,{expression:i.args[0],operator:"+"}).optimize(n);break;case"Symbol":i.args.length==1&&i.args[0]instanceof AST_String&&n.option("unsafe_symbols")&&(i.args.length=0);break;case"Boolean":if(i.args.length==0)return make_node(AST_False,i);if(i.args.length==1)return make_node(AST_UnaryPrefix,i,{expression:make_node(AST_UnaryPrefix,i,{expression:i.args[0],operator:"!"}),operator:"!"}).optimize(n);break;case"RegExp":var k=[];if(i.args.length>=1&&i.args.length<=2&&i.args.every(X=>{var re=X.evaluate(n);return k.push(re),X!==re})&&regexp_is_safe(k[0])){let[X,re]=k;X=regexp_source_fix(new RegExp(X).source);const se=make_node(AST_RegExp,i,{value:{source:X,flags:re}});if(se._eval(n)!==se)return se}break}else if(o instanceof AST_Dot)switch(o.property){case"toString":if(i.args.length==0&&!o.expression.may_throw_on_access(n))return make_node(AST_Binary,i,{left:make_node(AST_String,i,{value:""}),operator:"+",right:o.expression}).optimize(n);break;case"join":if(o.expression instanceof AST_Array)e:{var B;if(i.args.length>0&&(B=i.args[0].evaluate(n),B===i.args[0]))break e;for(var P=[],z=[],N=0,x=o.expression.elements.length;N<x;N++){var m=o.expression.elements[N];if(m instanceof AST_Expansion)break e;var d=m.evaluate(n);d!==m?z.push(d):(z.length>0&&(P.push(make_node(AST_String,i,{value:z.join(B)})),z.length=0),P.push(m))}if(z.length>0&&P.push(make_node(AST_String,i,{value:z.join(B)})),P.length==0)return make_node(AST_String,i,{value:""});if(P.length==1)return P[0].is_string(n)?P[0]:make_node(AST_Binary,P[0],{operator:"+",left:make_node(AST_String,i,{value:""}),right:P[0]});if(B==""){var y;return P[0].is_string(n)||P[1].is_string(n)?y=P.shift():y=make_node(AST_String,i,{value:""}),P.reduce(function(re,se){return make_node(AST_Binary,se,{operator:"+",left:re,right:se})},y).optimize(n)}var w=i.clone();return w.expression=w.expression.clone(),w.expression.expression=w.expression.expression.clone(),w.expression.expression.elements=P,best_of(n,i,w)}break;case"charAt":if(o.expression.is_string(n)){var F=i.args[0],L=F?F.evaluate(n):0;if(L!==F)return make_node(AST_Sub,o,{expression:o.expression,property:make_node_from_constant(L|0,F||o)}).optimize(n)}break;case"apply":if(i.args.length==2&&i.args[1]instanceof AST_Array){var G=i.args[1].elements.slice();return G.unshift(i.args[0]),make_node(AST_Call,i,{expression:make_node(AST_Dot,o,{expression:o.expression,optional:!1,property:"call"}),args:G}).optimize(n)}break;case"call":var p=o.expression;if(p instanceof AST_SymbolRef&&(p=p.fixed_value()),p instanceof AST_Lambda&&!p.contains_this())return(i.args.length?make_sequence(this,[i.args[0],make_node(AST_Call,i,{expression:o.expression,args:i.args.slice(1)})]):make_node(AST_Call,i,{expression:o.expression,args:[]})).optimize(n);break}}if(n.option("unsafe_Function")&&is_undeclared_ref(o)&&o.name=="Function"){if(i.args.length==0)return make_empty_function(i).optimize(n);if(i.args.every(X=>X instanceof AST_String))try{var K="n(function("+i.args.slice(0,-1).map(function(X){return X.value}).join(",")+"){"+i.args[i.args.length-1].value+"})",I=parse$1(K),D=n.mangle_options();I.figure_out_scope(D);var V=new Compressor(n.options,{mangle_options:n._mangle_options});I=I.transform(V),I.figure_out_scope(D),I.compute_char_frequency(D),I.mangle_names(D);var C;walk(I,X=>{if(is_func_expr(X))return C=X,walk_abort});var K=OutputStream();return AST_BlockStatement.prototype._codegen.call(C,C,K),i.args=[make_node(AST_String,i,{value:C.argnames.map(function(X){return X.print_to_string()}).join(",")}),make_node(AST_String,i.args[i.args.length-1],{value:K.get().replace(/^{|}$/g,"")})],i}catch(X){if(!(X instanceof JS_Parse_Error))throw X}}return inline_into_call(i,n)});AST_Node.DEFMETHOD("contains_optional",function(){return this instanceof AST_PropAccess||this instanceof AST_Call||this instanceof AST_Chain?this.optional?!0:this.expression.contains_optional():!1});def_optimize(AST_New,function(i,n){return n.option("unsafe")&&is_undeclared_ref(i.expression)&&["Object","RegExp","Function","Error","Array"].includes(i.expression.name)?make_node(AST_Call,i,i).transform(n):i});def_optimize(AST_Sequence,function(i,n){if(!n.option("side_effects"))return i;var o=[];l();var s=o.length-1;if(f(),s==0)return i=maintain_this_binding(n.parent(),n.self(),o[0]),i instanceof AST_Sequence||(i=i.optimize(n)),i;return i.expressions=o,i;function l(){var E=first_in_statement(n),g=i.expressions.length-1;i.expressions.forEach(function(N,x){x<g&&(N=N.drop_side_effect_free(n,E)),N&&(merge_sequence(o,N),E=!1)})}function f(){for(;s>0&&is_undefined(o[s],n);)s--;s<o.length-1&&(o[s]=make_node(AST_UnaryPrefix,i,{operator:"void",expression:o[s]}),o.length=s+1)}});AST_Unary.DEFMETHOD("lift_sequences",function(i){if(i.option("sequences")&&this.expression instanceof AST_Sequence){var n=this.expression.expressions.slice(),o=this.clone();return o.expression=n.pop(),n.push(o),make_sequence(this,n).optimize(i)}return this});def_optimize(AST_UnaryPostfix,function(i,n){return i.lift_sequences(n)});def_optimize(AST_UnaryPrefix,function(i,n){var o=i.expression;if(i.operator=="delete"&&!(o instanceof AST_SymbolRef||o instanceof AST_PropAccess||o instanceof AST_Chain||is_identifier_atom(o)))return make_sequence(i,[o,make_node(AST_True,i)]).optimize(n);if(i.operator==="void"&&o instanceof AST_Number&&o.value===0)return unsafe_undefined_ref(i,n)||i;var s=i.lift_sequences(n);if(s!==i)return s;if(n.option("side_effects")&&i.operator=="void")return o=o.drop_side_effect_free(n),o?(i.expression=o,i):make_void_0(i).optimize(n);if(n.in_boolean_context())switch(i.operator){case"!":if(o instanceof AST_UnaryPrefix&&o.operator=="!")return o.expression;o instanceof AST_Binary&&(i=best_of(n,i,o.negate(n,first_in_statement(n))));break;case"typeof":return(o instanceof AST_SymbolRef?make_node(AST_True,i):make_sequence(i,[o,make_node(AST_True,i)])).optimize(n)}if(i.operator=="-"&&o instanceof AST_Infinity&&(o=o.transform(n)),o instanceof AST_Binary&&(i.operator=="+"||i.operator=="-")&&(o.operator=="*"||o.operator=="/"||o.operator=="%"))return make_node(AST_Binary,i,{operator:o.operator,left:make_node(AST_UnaryPrefix,o.left,{operator:i.operator,expression:o.left}),right:o.right});if(n.option("evaluate")){if(i.operator==="~"&&i.expression instanceof AST_UnaryPrefix&&i.expression.operator==="~"&&(n.in_32_bit_context(!1)||i.expression.expression.is_32_bit_integer(n)))return i.expression.expression;if(i.operator==="~"&&o instanceof AST_Binary&&o.operator==="^")return o.left instanceof AST_UnaryPrefix&&o.left.operator==="~"?o.left=o.left.bitwise_negate(n,!0):o.right=o.right.bitwise_negate(n,!0),o}if(i.operator!="-"||!(o instanceof AST_Number||o instanceof AST_Infinity||o instanceof AST_BigInt)){var l=i.evaluate(n);if(l!==i)return l=make_node_from_constant(l,i).optimize(n),best_of(n,l,i)}return i});AST_Binary.DEFMETHOD("lift_sequences",function(i){if(i.option("sequences")){if(this.left instanceof AST_Sequence){var n=this.left.expressions.slice(),o=this.clone();return o.left=n.pop(),n.push(o),make_sequence(this,n).optimize(i)}if(this.right instanceof AST_Sequence&&!this.left.has_side_effects(i)){for(var s=this.operator=="="&&this.left instanceof AST_SymbolRef,n=this.right.expressions,l=n.length-1,f=0;f<l&&!(!s&&n[f].has_side_effects(i));f++);if(f==l){n=n.slice();var o=this.clone();return o.right=n.pop(),n.push(o),make_sequence(this,n).optimize(i)}else if(f>0){var o=this.clone();return o.right=make_sequence(this.right,n.slice(f)),n=n.slice(0,f),n.push(o),make_sequence(this,n).optimize(i)}}}return this});var commutativeOperators=makePredicate("== === != !== * & | ^");function is_object(i){return i instanceof AST_Array||i instanceof AST_Lambda||i instanceof AST_Object||i instanceof AST_Class}def_optimize(AST_Binary,function(i,n){function o(){return i.left.is_constant()||i.right.is_constant()||!i.left.has_side_effects(n)&&!i.right.has_side_effects(n)}function s(p){if(o()){p&&(i.operator=p);var I=i.left;i.left=i.right,i.right=I}}if(n.option("lhs_constants")&&commutativeOperators.has(i.operator)&&i.right.is_constant()&&!i.left.is_constant()&&(i.left instanceof AST_Binary&&PRECEDENCE[i.left.operator]>=PRECEDENCE[i.operator]||s()),i=i.lift_sequences(n),n.option("comparisons"))switch(i.operator){case"===":case"!==":var l=!0;(i.left.is_string(n)&&i.right.is_string(n)||i.left.is_number(n)&&i.right.is_number(n)||i.left.is_bigint(n)&&i.right.is_bigint(n)||i.left.is_boolean()&&i.right.is_boolean()||i.left.equivalent_to(i.right))&&(i.operator=i.operator.substr(0,2));case"==":case"!=":if(!l&&is_undefined(i.left,n))i.left=make_node(AST_Null,i.left);else if(!l&&is_undefined(i.right,n))i.right=make_node(AST_Null,i.right);else if(n.option("typeofs")&&i.left instanceof AST_String&&i.left.value=="undefined"&&i.right instanceof AST_UnaryPrefix&&i.right.operator=="typeof"){var f=i.right.expression;(f instanceof AST_SymbolRef?f.is_declared(n):!(f instanceof AST_PropAccess&&n.option("ie8")))&&(i.right=f,i.left=make_void_0(i.left).optimize(n),i.operator.length==2&&(i.operator+="="))}else if(n.option("typeofs")&&i.left instanceof AST_UnaryPrefix&&i.left.operator=="typeof"&&i.right instanceof AST_String&&i.right.value=="undefined"){var f=i.left.expression;(f instanceof AST_SymbolRef?f.is_declared(n):!(f instanceof AST_PropAccess&&n.option("ie8")))&&(i.left=f,i.right=make_void_0(i.right).optimize(n),i.operator.length==2&&(i.operator+="="))}else{if(i.left instanceof AST_SymbolRef&&i.right instanceof AST_SymbolRef&&i.left.definition()===i.right.definition()&&is_object(i.left.fixed_value()))return make_node(i.operator[0]=="="?AST_True:AST_False,i);if(i.left.is_32_bit_integer(n)&&i.right.is_32_bit_integer(n)){const p=K=>make_node(AST_UnaryPrefix,K,{operator:"!",expression:K}),I=(K,X)=>X?n.in_boolean_context()?K:p(p(K)):p(K);if(i.left instanceof AST_Number&&i.left.value===0)return I(i.right,i.operator[0]==="!");if(i.right instanceof AST_Number&&i.right.value===0)return I(i.left,i.operator[0]==="!");let D,V,C;if((D=i.left instanceof AST_Binary?i.left:i.right instanceof AST_Binary?i.right:null)&&(C=D===i.left?i.right:i.left)&&D.operator==="&"&&C instanceof AST_Number&&C.is_32_bit_integer(n)&&(V=D.left.equivalent_to(C)?D.right:D.right.equivalent_to(C)?D.left:null)){let K=I(make_node(AST_Binary,i,{operator:"&",left:C,right:make_node(AST_UnaryPrefix,i,{operator:"~",expression:V})}),i.operator[0]==="!");return best_of(n,K,i)}}}break;case"&&":case"||":var E=i.left;if(E.operator==i.operator&&(E=E.right),E instanceof AST_Binary&&E.operator==(i.operator=="&&"?"!==":"===")&&i.right instanceof AST_Binary&&E.operator==i.right.operator&&(is_undefined(E.left,n)&&i.right.left instanceof AST_Null||E.left instanceof AST_Null&&is_undefined(i.right.left,n))&&!E.right.has_side_effects(n)&&E.right.equivalent_to(i.right.right)){var g=make_node(AST_Binary,i,{operator:E.operator.slice(0,-1),left:make_node(AST_Null,i),right:E.right});return E!==i.left&&(g=make_node(AST_Binary,i,{operator:i.operator,left:i.left.left,right:g})),g}break}if(i.operator=="+"&&n.in_boolean_context()){var N=i.left.evaluate(n),x=i.right.evaluate(n);if(N&&typeof N=="string")return make_sequence(i,[i.right,make_node(AST_True,i)]).optimize(n);if(x&&typeof x=="string")return make_sequence(i,[i.left,make_node(AST_True,i)]).optimize(n)}if(n.option("comparisons")&&i.is_boolean()){if(!(n.parent()instanceof AST_Binary)||n.parent()instanceof AST_Assign){var w=make_node(AST_UnaryPrefix,i,{operator:"!",expression:i.negate(n,first_in_statement(n))});i=best_of(n,i,w)}if(n.option("unsafe_comps"))switch(i.operator){case"<":s(">");break;case"<=":s(">=");break}}if(i.operator=="+"){if(i.right instanceof AST_String&&i.right.getValue()==""&&i.left.is_string(n))return i.left;if(i.left instanceof AST_String&&i.left.getValue()==""&&i.right.is_string(n))return i.right;if(i.left instanceof AST_Binary&&i.left.operator=="+"&&i.left.left instanceof AST_String&&i.left.left.getValue()==""&&i.right.is_string(n))return i.left=i.left.right,i}if(n.option("evaluate")){switch(i.operator){case"&&":var N=has_flag(i.left,TRUTHY)?!0:has_flag(i.left,FALSY)?!1:i.left.evaluate(n);if(N){if(!(N instanceof AST_Node))return make_sequence(i,[i.left,i.right]).optimize(n)}else return maintain_this_binding(n.parent(),n.self(),i.left).optimize(n);var x=i.right.evaluate(n);if(x){if(!(x instanceof AST_Node)){var R=n.parent();if(R.operator=="&&"&&R.left===n.self()||n.in_boolean_context())return i.left.optimize(n)}}else{if(n.in_boolean_context())return make_sequence(i,[i.left,make_node(AST_False,i)]).optimize(n);set_flag(i,FALSY)}if(i.left.operator=="||"){var k=i.left.right.evaluate(n);if(!k)return make_node(AST_Conditional,i,{condition:i.left.left,consequent:i.right,alternative:i.left.right}).optimize(n)}break;case"||":var N=has_flag(i.left,TRUTHY)?!0:has_flag(i.left,FALSY)?!1:i.left.evaluate(n);if(N){if(!(N instanceof AST_Node))return maintain_this_binding(n.parent(),n.self(),i.left).optimize(n)}else return make_sequence(i,[i.left,i.right]).optimize(n);var x=i.right.evaluate(n);if(x){if(!(x instanceof AST_Node)){if(n.in_boolean_context())return make_sequence(i,[i.left,make_node(AST_True,i)]).optimize(n);set_flag(i,TRUTHY)}}else{var R=n.parent();if(R.operator=="||"&&R.left===n.self()||n.in_boolean_context())return i.left.optimize(n)}if(i.left.operator=="&&"){var k=i.left.right.evaluate(n);if(k&&!(k instanceof AST_Node))return make_node(AST_Conditional,i,{condition:i.left.left,consequent:i.left.right,alternative:i.right}).optimize(n)}break;case"??":if(is_nullish(i.left,n))return i.right;var N=i.left.evaluate(n);if(!(N instanceof AST_Node))return N==null?i.right:i.left;if(n.in_boolean_context()){const D=i.right.evaluate(n);if(!(D instanceof AST_Node)&&!D)return i.left}}var B=!0;switch(i.operator){case"+":if(i.right instanceof AST_Constant&&i.left instanceof AST_Binary&&i.left.operator=="+"&&i.left.is_string(n)){var P=make_node(AST_Binary,i,{operator:"+",left:i.left.right,right:i.right}),z=P.optimize(n);P!==z&&(i=make_node(AST_Binary,i,{operator:"+",left:i.left.left,right:z}))}if(i.left instanceof AST_Binary&&i.left.operator=="+"&&i.left.is_string(n)&&i.right instanceof AST_Binary&&i.right.operator=="+"&&i.right.is_string(n)){var P=make_node(AST_Binary,i,{operator:"+",left:i.left.right,right:i.right.left}),m=P.optimize(n);P!==m&&(i=make_node(AST_Binary,i,{operator:"+",left:make_node(AST_Binary,i.left,{operator:"+",left:i.left.left,right:m}),right:i.right.right}))}if(i.right instanceof AST_UnaryPrefix&&i.right.operator=="-"&&i.left.is_number_or_bigint(n)){i=make_node(AST_Binary,i,{operator:"-",left:i.left,right:i.right.expression});break}if(i.left instanceof AST_UnaryPrefix&&i.left.operator=="-"&&o()&&i.right.is_number_or_bigint(n)){i=make_node(AST_Binary,i,{operator:"-",left:i.right,right:i.left.expression});break}if(i.left instanceof AST_TemplateString){var d=i.left,z=i.right.evaluate(n);if(z!=i.right)return d.segments[d.segments.length-1].value+=String(z),d}if(i.right instanceof AST_TemplateString){var z=i.right,d=i.left.evaluate(n);if(d!=i.left)return z.segments[0].value=String(d)+z.segments[0].value,z}if(i.left instanceof AST_TemplateString&&i.right instanceof AST_TemplateString){var d=i.left,y=d.segments,z=i.right;y[y.length-1].value+=z.segments[0].value;for(var F=1;F<z.segments.length;F++)y.push(z.segments[F]);return d}case"*":B=n.option("unsafe_math");case"&":case"|":case"^":if(i.left.is_number_or_bigint(n)&&i.right.is_number_or_bigint(n)&&o()&&!(i.left instanceof AST_Binary&&i.left.operator!=i.operator&&PRECEDENCE[i.left.operator]>=PRECEDENCE[i.operator])){var L=make_node(AST_Binary,i,{operator:i.operator,left:i.right,right:i.left});i.right instanceof AST_Constant&&!(i.left instanceof AST_Constant)?i=best_of(n,L,i):i=best_of(n,i,L)}B&&i.is_number_or_bigint(n)&&(i.right instanceof AST_Binary&&i.right.operator==i.operator&&(i=make_node(AST_Binary,i,{operator:i.operator,left:make_node(AST_Binary,i.left,{operator:i.operator,left:i.left,right:i.right.left,start:i.left.start,end:i.right.left.end}),right:i.right.right})),i.right instanceof AST_Constant&&i.left instanceof AST_Binary&&i.left.operator==i.operator&&(i.left.left instanceof AST_Constant?i=make_node(AST_Binary,i,{operator:i.operator,left:make_node(AST_Binary,i.left,{operator:i.operator,left:i.left.left,right:i.right,start:i.left.left.start,end:i.right.end}),right:i.left.right}):i.left.right instanceof AST_Constant&&(i=make_node(AST_Binary,i,{operator:i.operator,left:make_node(AST_Binary,i.left,{operator:i.operator,left:i.left.right,right:i.right,start:i.left.right.start,end:i.right.end}),right:i.left.left}))),i.left instanceof AST_Binary&&i.left.operator==i.operator&&i.left.right instanceof AST_Constant&&i.right instanceof AST_Binary&&i.right.operator==i.operator&&i.right.left instanceof AST_Constant&&(i=make_node(AST_Binary,i,{operator:i.operator,left:make_node(AST_Binary,i.left,{operator:i.operator,left:make_node(AST_Binary,i.left.left,{operator:i.operator,left:i.left.right,right:i.right.left,start:i.left.right.start,end:i.right.left.end}),right:i.left.left}),right:i.right.right})))}if(bitwise_binop.has(i.operator)){let p,I,D,V,C=i.left;if(i.operator==="&"&&i.right instanceof AST_Binary&&i.right.operator==="|"&&typeof(I=i.left.evaluate(n))=="number"&&(typeof(p=i.right.right.evaluate(n))=="number"?(D=i.right.left,V=i.right.right):typeof(p=i.right.left.evaluate(n))=="number"&&(D=i.right.right,V=i.right.left),D&&V))if((p&I)===0)i=make_node(AST_Binary,i,{operator:i.operator,left:C,right:D});else{const Te=make_node(AST_Binary,i,{operator:"|",left:make_node(AST_Binary,i,{operator:"&",left:D,right:C}),right:make_node_from_constant(p&I,V)});i=best_of(n,i,Te)}(i.operator==="|"||i.operator==="&")&&i.left.equivalent_to(i.right)&&!i.left.has_side_effects(n)&&n.in_32_bit_context(!0)&&(i.left=make_node(AST_Number,i,{value:0}),i.operator="|"),i.operator==="^"&&i.left instanceof AST_UnaryPrefix&&i.left.operator==="~"&&i.right instanceof AST_UnaryPrefix&&i.right.operator==="~"&&(i=make_node(AST_Binary,i,{operator:"^",left:i.left.expression,right:i.right.expression})),(i.operator==="<<"||i.operator===">>")&&i.right instanceof AST_Number&&i.right.value===0&&(i.operator="|");const K=i.right instanceof AST_Number&&i.right.value===0?i.right:i.left instanceof AST_Number&&i.left.value===0?i.left:null,X=K&&(K===i.right?i.left:i.right);if(K&&(i.operator==="|"||i.operator==="^")&&(X.is_32_bit_integer(n)||n.in_32_bit_context(!0)))return X;if(K&&i.operator==="&"&&!X.has_side_effects(n)&&X.is_32_bit_integer(n))return K;const re=Te=>Te instanceof AST_Number&&Te.value===-1||Te instanceof AST_UnaryPrefix&&Te.operator==="-"&&Te.expression instanceof AST_Number&&Te.expression.value===1,se=re(i.right)?i.right:re(i.left)?i.left:null,Pe=se===i.right?i.left:i.right;if(se&&i.operator==="&"&&(Pe.is_32_bit_integer(n)||n.in_32_bit_context(!0)))return Pe;if(se&&i.operator==="^"&&(Pe.is_32_bit_integer(n)||n.in_32_bit_context(!0)))return Pe.bitwise_negate(n)}}if(i.right instanceof AST_Binary&&i.right.operator==i.operator&&(lazy_op.has(i.operator)||i.operator=="+"&&(i.right.left.is_string(n)||i.left.is_string(n)&&i.right.right.is_string(n))))return i.left=make_node(AST_Binary,i.left,{operator:i.operator,left:i.left.transform(n),right:i.right.left.transform(n)}),i.right=i.right.right.transform(n),i.transform(n);var G=i.evaluate(n);return G!==i?(G=make_node_from_constant(G,i).optimize(n),best_of(n,G,i)):i});def_optimize(AST_SymbolExport,function(i){return i});def_optimize(AST_SymbolRef,function(i,n){if(!n.option("ie8")&&is_undeclared_ref(i)&&!n.find_parent(AST_With))switch(i.name){case"undefined":return make_node(AST_Undefined,i).optimize(n);case"NaN":return make_node(AST_NaN,i).optimize(n);case"Infinity":return make_node(AST_Infinity,i).optimize(n)}return n.option("reduce_vars")&&!n.is_lhs()?inline_into_symbolref(i,n):i});function is_atomic(i,n){return i instanceof AST_SymbolRef||i.TYPE===n.TYPE}function unsafe_undefined_ref(i,n){if(n.option("unsafe_undefined")){var o=find_variable(n,"undefined");if(o){var s=make_node(AST_SymbolRef,i,{name:"undefined",scope:o.scope,thedef:o});return set_flag(s,UNDEFINED),s}}return null}def_optimize(AST_Undefined,function(i,n){var o=unsafe_undefined_ref(i,n);if(o)return o;var s=n.is_lhs();return s&&is_atomic(s,i)?i:make_void_0(i)});def_optimize(AST_Infinity,function(i,n){var o=n.is_lhs();return o&&is_atomic(o,i)||n.option("keep_infinity")&&!(o&&!is_atomic(o,i))&&!find_variable(n,"Infinity")?i:make_node(AST_Binary,i,{operator:"/",left:make_node(AST_Number,i,{value:1}),right:make_node(AST_Number,i,{value:0})})});def_optimize(AST_NaN,function(i,n){var o=n.is_lhs();return o&&!is_atomic(o,i)||find_variable(n,"NaN")?make_node(AST_Binary,i,{operator:"/",left:make_node(AST_Number,i,{value:0}),right:make_node(AST_Number,i,{value:0})}):i});const ASSIGN_OPS=makePredicate("+ - / * % >> << >>> | ^ &"),ASSIGN_OPS_COMMUTATIVE=makePredicate("* | ^ &");def_optimize(AST_Assign,function(i,n){if(i.logical)return i.lift_sequences(n);var o;if(i.operator==="="&&i.left instanceof AST_SymbolRef&&i.left.name!=="arguments"&&!(o=i.left.definition()).undeclared&&i.right.equivalent_to(i.left))return i.right;if(n.option("dead_code")&&i.left instanceof AST_SymbolRef&&(o=i.left.definition()).scope===n.find_parent(AST_Lambda)){var s=0,l,f=i;do if(l=f,f=n.parent(s++),f instanceof AST_Exit){if(E(s,f)||is_reachable(o.scope,[o]))break;return i.operator=="="?i.right:(o.fixed=!1,make_node(AST_Binary,i,{operator:i.operator.slice(0,-1),left:i.left,right:i.right}).optimize(n))}while(f instanceof AST_Binary&&f.right===l||f instanceof AST_Sequence&&f.tail_node()===l)}return i=i.lift_sequences(n),i.operator=="="&&i.left instanceof AST_SymbolRef&&i.right instanceof AST_Binary&&(i.right.left instanceof AST_SymbolRef&&i.right.left.name==i.left.name&&ASSIGN_OPS.has(i.right.operator)?(i.operator=i.right.operator+"=",i.right=i.right.right):i.right.right instanceof AST_SymbolRef&&i.right.right.name==i.left.name&&ASSIGN_OPS_COMMUTATIVE.has(i.right.operator)&&!i.right.left.has_side_effects(n)&&(i.operator=i.right.operator+"=",i.right=i.right.left)),i;function E(g,N){function x(){const k=i.right;i.right=make_node(AST_Null,k);const B=N.may_throw(n);return i.right=k,B}for(var w=i.left.definition().scope.get_defun_scope(),R;(R=n.parent(g++))!==w;)if(R instanceof AST_Try&&(R.bfinally||R.bcatch&&x()))return!0}});def_optimize(AST_DefaultAssign,function(i,n){if(!n.option("evaluate"))return i;var o=i.right.evaluate(n);let s,l;return o===void 0?(!((s=n.parent())instanceof AST_Lambda)||n.option("keep_fargs")===!1||(l=n.parent(1)).TYPE==="Call"&&l.expression===s)&&(i=i.left):o!==i.right&&(o=make_node_from_constant(o,i.right),i.right=best_of_expression(o,i.right)),i});function is_nullish_check(i,n,o){if(n.may_throw(o))return!1;let s;if(i instanceof AST_Binary&&i.operator==="=="&&((s=is_nullish(i.left,o)&&i.left)||(s=is_nullish(i.right,o)&&i.right))&&(s===i.left?i.right:i.left).equivalent_to(n))return!0;if(i instanceof AST_Binary&&i.operator==="||"){let l,f;const E=g=>{if(!(g instanceof AST_Binary&&(g.operator==="==="||g.operator==="==")))return!1;let N=0,x;return g.left instanceof AST_Null&&(N++,l=g,x=g.right),g.right instanceof AST_Null&&(N++,l=g,x=g.left),is_undefined(g.left,o)&&(N++,f=g,x=g.right),is_undefined(g.right,o)&&(N++,f=g,x=g.left),!(N!==1||!x.equivalent_to(n))};if(!E(i.left)||!E(i.right))return!1;if(l&&f&&l!==f)return!0}return!1}def_optimize(AST_Conditional,function(i,n){if(!n.option("conditionals"))return i;if(i.condition instanceof AST_Sequence){var o=i.condition.expressions.slice();return i.condition=o.pop(),o.push(i),make_sequence(i,o)}var s=i.condition.evaluate(n);if(s!==i.condition)return s?maintain_this_binding(n.parent(),n.self(),i.consequent):maintain_this_binding(n.parent(),n.self(),i.alternative);var l=s.negate(n,first_in_statement(n));best_of(n,s,l)===l&&(i=make_node(AST_Conditional,i,{condition:l,consequent:i.alternative,alternative:i.consequent}));var f=i.condition,E=i.consequent,g=i.alternative;if(f instanceof AST_SymbolRef&&E instanceof AST_SymbolRef&&f.definition()===E.definition())return make_node(AST_Binary,i,{operator:"||",left:f,right:g});if(E instanceof AST_Assign&&g instanceof AST_Assign&&E.operator===g.operator&&E.logical===g.logical&&E.left.equivalent_to(g.left)&&(!i.condition.has_side_effects(n)||E.operator=="="&&!E.left.has_side_effects(n)))return make_node(AST_Assign,i,{operator:E.operator,left:E.left,logical:E.logical,right:make_node(AST_Conditional,i,{condition:i.condition,consequent:E.right,alternative:g.right})});var N;if(E instanceof AST_Call&&g.TYPE===E.TYPE&&E.args.length>0&&E.args.length==g.args.length&&E.expression.equivalent_to(g.expression)&&!i.condition.has_side_effects(n)&&!E.expression.has_side_effects(n)&&typeof(N=P())=="number"){var x=E.clone();return x.args[N]=make_node(AST_Conditional,i,{condition:i.condition,consequent:E.args[N],alternative:g.args[N]}),x}if(g instanceof AST_Conditional&&E.equivalent_to(g.consequent))return make_node(AST_Conditional,i,{condition:make_node(AST_Binary,i,{operator:"||",left:f,right:g.condition}),consequent:E,alternative:g.alternative}).optimize(n);if(n.option("ecma")>=2020&&is_nullish_check(f,g,n))return make_node(AST_Binary,i,{operator:"??",left:g,right:E}).optimize(n);if(g instanceof AST_Sequence&&E.equivalent_to(g.expressions[g.expressions.length-1]))return make_sequence(i,[make_node(AST_Binary,i,{operator:"||",left:f,right:make_sequence(i,g.expressions.slice(0,-1))}),E]).optimize(n);if(g instanceof AST_Binary&&g.operator=="&&"&&E.equivalent_to(g.right))return make_node(AST_Binary,i,{operator:"&&",left:make_node(AST_Binary,i,{operator:"||",left:f,right:g.left}),right:E}).optimize(n);if(E instanceof AST_Conditional&&E.alternative.equivalent_to(g))return make_node(AST_Conditional,i,{condition:make_node(AST_Binary,i,{left:i.condition,operator:"&&",right:E.condition}),consequent:E.consequent,alternative:g});if(E.equivalent_to(g))return make_sequence(i,[i.condition,E]).optimize(n);if(E instanceof AST_Binary&&E.operator=="||"&&E.right.equivalent_to(g))return make_node(AST_Binary,i,{operator:"||",left:make_node(AST_Binary,i,{operator:"&&",left:i.condition,right:E.left}),right:g}).optimize(n);const w=n.in_boolean_context();if(k(i.consequent))return B(i.alternative)?R(i.condition):make_node(AST_Binary,i,{operator:"||",left:R(i.condition),right:i.alternative});if(B(i.consequent))return k(i.alternative)?R(i.condition.negate(n)):make_node(AST_Binary,i,{operator:"&&",left:R(i.condition.negate(n)),right:i.alternative});if(k(i.alternative))return make_node(AST_Binary,i,{operator:"||",left:R(i.condition.negate(n)),right:i.consequent});if(B(i.alternative))return make_node(AST_Binary,i,{operator:"&&",left:R(i.condition),right:i.consequent});return i;function R(z){return z.is_boolean()?z:make_node(AST_UnaryPrefix,z,{operator:"!",expression:z.negate(n)})}function k(z){return z instanceof AST_True||w&&z instanceof AST_Constant&&z.getValue()||z instanceof AST_UnaryPrefix&&z.operator=="!"&&z.expression instanceof AST_Constant&&!z.expression.getValue()}function B(z){return z instanceof AST_False||w&&z instanceof AST_Constant&&!z.getValue()||z instanceof AST_UnaryPrefix&&z.operator=="!"&&z.expression instanceof AST_Constant&&z.expression.getValue()}function P(){for(var z=E.args,m=g.args,d=0,y=z.length;d<y;d++){if(z[d]instanceof AST_Expansion)return;if(!z[d].equivalent_to(m[d])){if(m[d]instanceof AST_Expansion)return;for(var F=d+1;F<y;F++)if(z[F]instanceof AST_Expansion||!z[F].equivalent_to(m[F]))return;return d}}}});def_optimize(AST_Boolean,function(i,n){if(n.in_boolean_context())return make_node(AST_Number,i,{value:+i.value});var o=n.parent();return n.option("booleans_as_integers")?(o instanceof AST_Binary&&(o.operator=="==="||o.operator=="!==")&&(o.operator=o.operator.replace(/=$/,"")),make_node(AST_Number,i,{value:+i.value})):n.option("booleans")?o instanceof AST_Binary&&(o.operator=="=="||o.operator=="!=")?make_node(AST_Number,i,{value:+i.value}):make_node(AST_UnaryPrefix,i,{operator:"!",expression:make_node(AST_Number,i,{value:1-i.value})}):i});function safe_to_flatten(i,n){return i instanceof AST_SymbolRef&&(i=i.fixed_value()),i?!(i instanceof AST_Lambda||i instanceof AST_Class)||!(i instanceof AST_Lambda&&i.contains_this())?!0:n.parent()instanceof AST_New:!1}AST_PropAccess.DEFMETHOD("flatten_object",function(i,n){if(n.option("properties")&&i!=="__proto__"&&!(this instanceof AST_DotHash)){var o=n.option("unsafe_arrows")&&n.option("ecma")>=2015,s=this.expression;if(s instanceof AST_Object)for(var l=s.properties,f=l.length;--f>=0;){var E=l[f];if(""+(E instanceof AST_ConciseMethod?E.key.name:E.key)==i)return!l.every(N=>(N instanceof AST_ObjectKeyVal||o&&N instanceof AST_ConciseMethod&&!N.value.is_generator)&&!N.computed_key())||!safe_to_flatten(E.value,n)?void 0:make_node(AST_Sub,this,{expression:make_node(AST_Array,s,{elements:l.map(function(N){var x=N.value;x instanceof AST_Accessor&&(x=make_node(AST_Function,x,x));var w=N.key;return w instanceof AST_Node&&!(w instanceof AST_SymbolMethod)?make_sequence(N,[w,x]):x})}),property:make_node(AST_Number,this,{value:f})})}}});def_optimize(AST_Sub,function(i,n){var o=i.expression,s=i.property;if(n.option("properties")){var l=s.evaluate(n);if(l!==s){if(typeof l=="string")if(l=="undefined")l=void 0;else{var f=parseFloat(l);f.toString()==l&&(l=f)}s=i.property=best_of_expression(s,make_node_from_constant(l,s).transform(n));var E=""+l;if(is_basic_identifier_string(E)&&E.length<=s.size()+1)return make_node(AST_Dot,i,{expression:o,optional:i.optional,property:E,quote:s.quote}).optimize(n)}}var g;e:if(n.option("arguments")&&o instanceof AST_SymbolRef&&o.name=="arguments"&&o.definition().orig.length==1&&(g=o.scope)instanceof AST_Lambda&&g.uses_arguments&&!(g instanceof AST_Arrow)&&s instanceof AST_Number){for(var N=s.getValue(),x=new Set,w=g.argnames,R=0;R<w.length;R++){if(!(w[R]instanceof AST_SymbolFunarg))break e;var k=w[R].name;if(x.has(k))break e;x.add(k)}var B=g.argnames[N];if(B&&n.has_directive("use strict")){var P=B.definition();(!n.option("reduce_vars")||P.assignments||P.orig.length>1)&&(B=null)}else if(!B&&!n.option("keep_fargs")&&N<g.argnames.length+5)for(;N>=g.argnames.length;)B=g.create_symbol(AST_SymbolFunarg,{source:g,scope:g,tentative_name:"argument_"+g.argnames.length}),g.argnames.push(B);if(B){var z=make_node(AST_SymbolRef,i,B);return z.reference({}),clear_flag(B,UNUSED),z}}if(n.is_lhs())return i;if(l!==s){var m=i.flatten_object(E,n);m&&(o=i.expression=m.expression,s=i.property=m.property)}if(n.option("properties")&&n.option("side_effects")&&s instanceof AST_Number&&o instanceof AST_Array){var N=s.getValue(),d=o.elements,y=d[N];e:if(safe_to_flatten(y,n)){for(var F=!0,L=[],G=d.length;--G>N;){var f=d[G].drop_side_effect_free(n);f&&(L.unshift(f),F&&f.has_side_effects(n)&&(F=!1))}if(y instanceof AST_Expansion)break e;for(y=y instanceof AST_Hole?make_void_0(y):y,F||L.unshift(y);--G>=0;){var f=d[G];if(f instanceof AST_Expansion)break e;f=f.drop_side_effect_free(n),f?L.unshift(f):N--}return F?(L.push(y),make_sequence(i,L).optimize(n)):make_node(AST_Sub,i,{expression:make_node(AST_Array,o,{elements:L}),property:make_node(AST_Number,s,{value:N})})}}var p=i.evaluate(n);return p!==i?(p=make_node_from_constant(p,i).optimize(n),best_of(n,p,i)):i});def_optimize(AST_Chain,function(i,n){if(is_nullish(i.expression,n)){let o=n.parent();return o instanceof AST_UnaryPrefix&&o.operator==="delete"?make_node_from_constant(0,i):make_void_0(i).optimize(n)}return i.expression instanceof AST_PropAccess||i.expression instanceof AST_Call?i:i.expression});def_optimize(AST_Dot,function(i,n){const o=n.parent();if(n.is_lhs())return i;if(n.option("unsafe_proto")&&i.expression instanceof AST_Dot&&i.expression.property=="prototype"){var s=i.expression.expression;if(is_undeclared_ref(s))switch(s.name){case"Array":i.expression=make_node(AST_Array,i.expression,{elements:[]});break;case"Function":i.expression=make_empty_function(i.expression);break;case"Number":i.expression=make_node(AST_Number,i.expression,{value:0});break;case"Object":i.expression=make_node(AST_Object,i.expression,{properties:[]});break;case"RegExp":i.expression=make_node(AST_RegExp,i.expression,{value:{source:"t",flags:""}});break;case"String":i.expression=make_node(AST_String,i.expression,{value:""});break}}if(!(o instanceof AST_Call)||!has_annotation(o,_NOINLINE)){const f=i.flatten_object(i.property,n);if(f)return f.optimize(n)}if(i.expression instanceof AST_PropAccess&&o instanceof AST_PropAccess)return i;let l=i.evaluate(n);return l!==i?(l=make_node_from_constant(l,i).optimize(n),best_of(n,l,i)):i});function literals_in_boolean_context(i,n){return n.in_boolean_context()?best_of(n,i,make_sequence(i,[i,make_node(AST_True,i)]).optimize(n)):i}function inline_array_like_spread(i){for(var n=0;n<i.length;n++){var o=i[n];if(o instanceof AST_Expansion){var s=o.expression;s instanceof AST_Array&&!s.elements.some(l=>l instanceof AST_Hole)&&(i.splice(n,1,...s.elements),n--)}}}def_optimize(AST_Array,function(i,n){var o=literals_in_boolean_context(i,n);return o!==i?o:(inline_array_like_spread(i.elements),i)});function inline_object_prop_spread(i){for(var n=0;n<i.length;n++){var o=i[n];if(o instanceof AST_Expansion){const s=o.expression;s instanceof AST_Object&&s.properties.every(l=>l instanceof AST_ObjectKeyVal)?(i.splice(n,1,...s.properties),n--):(s instanceof AST_Constant||s.is_constant())&&!(s instanceof AST_String)&&(i.splice(n,1),n--)}}}def_optimize(AST_Object,function(i,n){var o=literals_in_boolean_context(i,n);return o!==i?o:(inline_object_prop_spread(i.properties),i)});def_optimize(AST_RegExp,literals_in_boolean_context);def_optimize(AST_Return,function(i,n){return i.value&&is_undefined(i.value,n)&&(i.value=null),i});def_optimize(AST_Arrow,opt_AST_Lambda);def_optimize(AST_Function,function(i,n){return i=opt_AST_Lambda(i,n),n.option("unsafe_arrows")&&n.option("ecma")>=2015&&!i.name&&!i.is_generator&&!i.uses_arguments&&!i.pinned()&&!walk(i,s=>{if(s instanceof AST_This)return walk_abort})?make_node(AST_Arrow,i,i).optimize(n):i});def_optimize(AST_Class,function(i){for(let n=0;n<i.properties.length;n++){const o=i.properties[n];o instanceof AST_ClassStaticBlock&&o.body.length==0&&(i.properties.splice(n,1),n--)}return i});def_optimize(AST_ClassStaticBlock,function(i,n){return tighten_body(i.body,n),i});def_optimize(AST_Yield,function(i,n){return i.expression&&!i.is_star&&is_undefined(i.expression,n)&&(i.expression=null),i});def_optimize(AST_TemplateString,function(i,n){if(!n.option("evaluate")||n.parent()instanceof AST_PrefixedTemplateString)return i;for(var o=[],s=0;s<i.segments.length;s++){var l=i.segments[s];if(l instanceof AST_Node){var f=l.evaluate(n);if(f!==l&&(f+"").length<=l.size()+3){o[o.length-1].value=o[o.length-1].value+f+i.segments[++s].value;continue}if(l instanceof AST_TemplateString){var E=l.segments;o[o.length-1].value+=E[0].value;for(var g=1;g<E.length;g++)l=E[g],o.push(l);continue}}o.push(l)}if(i.segments=o,o.length==1)return make_node(AST_String,i,o[0]);if(o.length===3&&o[1]instanceof AST_Node&&(o[1].is_string(n)||o[1].is_number_or_bigint(n)||is_nullish(o[1],n)||n.option("unsafe"))){if(o[2].value==="")return make_node(AST_Binary,i,{operator:"+",left:make_node(AST_String,i,{value:o[0].value}),right:o[1]});if(o[0].value==="")return make_node(AST_Binary,i,{operator:"+",left:o[1],right:make_node(AST_String,i,{value:o[2].value})})}return i});def_optimize(AST_PrefixedTemplateString,function(i){return i});function lift_key(i,n){if(!n.option("computed_props")||!(i.key instanceof AST_Constant))return i;if(i.key instanceof AST_String||i.key instanceof AST_Number){const o=i.key.value.toString();if(o==="__proto__"||o=="constructor"&&n.parent()instanceof AST_Class)return i;i instanceof AST_ObjectKeyVal?(i.quote=i.key.quote,i.key=o):i instanceof AST_ClassProperty?(i.quote=i.key.quote,i.key=make_node(AST_SymbolClassProperty,i.key,{name:o})):(i.quote=i.key.quote,i.key=make_node(AST_SymbolMethod,i.key,{name:o}))}return i}def_optimize(AST_ObjectProperty,lift_key);def_optimize(AST_ConciseMethod,function(i,n){if(lift_key(i,n),n.option("arrows")&&n.parent()instanceof AST_Object&&!i.value.is_generator&&!i.value.uses_arguments&&!i.value.pinned()&&i.value.body.length==1&&i.value.body[0]instanceof AST_Return&&i.value.body[0].value&&!i.value.contains_this()){var o=make_node(AST_Arrow,i.value,i.value);return o.async=i.value.async,o.is_generator=i.value.is_generator,make_node(AST_ObjectKeyVal,i,{key:i.key instanceof AST_SymbolMethod?i.key.name:i.key,value:o,quote:i.quote})}return i});def_optimize(AST_ObjectKeyVal,function(i,n){lift_key(i,n);var o=n.option("unsafe_methods");if(o&&n.option("ecma")>=2015&&(!(o instanceof RegExp)||o.test(i.key+""))){var s=i.key,l=i.value,f=l instanceof AST_Arrow&&Array.isArray(l.body)&&!l.contains_this();if((f||l instanceof AST_Function)&&!l.name)return make_node(AST_ConciseMethod,i,{key:s instanceof AST_Node?s:make_node(AST_SymbolMethod,i,{name:s}),value:make_node(AST_Accessor,l,l),quote:i.quote})}return i});def_optimize(AST_Destructuring,function(i,n){if(n.option("pure_getters")==!0&&n.option("unused")&&!i.is_array&&Array.isArray(i.names)&&!f(n)&&!(i.names[i.names.length-1]instanceof AST_Expansion)){for(var o=[],s=0;s<i.names.length;s++){var l=i.names[s];l instanceof AST_ObjectKeyVal&&typeof l.key=="string"&&l.value instanceof AST_SymbolDeclaration&&!E(n,l.value.definition())||o.push(l)}o.length!=i.names.length&&(i.names=o)}return i;function f(g){for(var N=[/^VarDef$/,/^(Const|Let|Var)$/,/^Export$/],x=0,w=0,R=N.length;x<R;w++){var k=g.parent(w);if(!k)return!1;if(!(x===0&&k.TYPE=="Destructuring")){if(!N[x].test(k.TYPE))return!1;x++}}return!0}function E(g,N){return N.references.length?!0:N.global?g.toplevel.vars?g.top_retain?g.top_retain(N):!1:!0:!1}});var comma=44,semicolon=59,chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",intToChar=new Uint8Array(64),charToInt=new Uint8Array(128);for(let i=0;i<chars.length;i++){const n=chars.charCodeAt(i);intToChar[i]=n,charToInt[n]=i}function decodeInteger(i,n){let o=0,s=0,l=0;do{const E=i.next();l=charToInt[E],o|=(l&31)<<s,s+=5}while(l&32);const f=o&1;return o>>>=1,f&&(o=-2147483648|-o),n+o}function encodeInteger(i,n,o){let s=n-o;s=s<0?-s<<1|1:s<<1;do{let l=s&31;s>>>=5,s>0&&(l|=32),i.write(intToChar[l])}while(s>0);return n}function hasMoreVlq(i,n){return i.pos>=n?!1:i.peek()!==comma}var bufLength=1024*16,td=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(i){return Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString()}}:{decode(i){let n="";for(let o=0;o<i.length;o++)n+=String.fromCharCode(i[o]);return n}},StringWriter=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(bufLength)}write(i){const{buffer:n}=this;n[this.pos++]=i,this.pos===bufLength&&(this.out+=td.decode(n),this.pos=0)}flush(){const{buffer:i,out:n,pos:o}=this;return o>0?n+td.decode(i.subarray(0,o)):n}},StringReader=class{constructor(i){this.pos=0,this.buffer=i}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(i){const{buffer:n,pos:o}=this,s=n.indexOf(i,o);return s===-1?n.length:s}};function decode(i){const{length:n}=i,o=new StringReader(i),s=[];let l=0,f=0,E=0,g=0,N=0;do{const x=o.indexOf(";"),w=[];let R=!0,k=0;for(l=0;o.pos<x;){let B;l=decodeInteger(o,l),l<k&&(R=!1),k=l,hasMoreVlq(o,x)?(f=decodeInteger(o,f),E=decodeInteger(o,E),g=decodeInteger(o,g),hasMoreVlq(o,x)?(N=decodeInteger(o,N),B=[l,f,E,g,N]):B=[l,f,E,g]):B=[l],w.push(B),o.pos++}R||sort(w),s.push(w),o.pos=x+1}while(o.pos<=n);return s}function sort(i){i.sort(sortComparator$1)}function sortComparator$1(i,n){return i[0]-n[0]}function encode(i){const n=new StringWriter;let o=0,s=0,l=0,f=0;for(let E=0;E<i.length;E++){const g=i[E];if(E>0&&n.write(semicolon),g.length===0)continue;let N=0;for(let x=0;x<g.length;x++){const w=g[x];x>0&&n.write(comma),N=encodeInteger(n,w[0],N),w.length!==1&&(o=encodeInteger(n,w[1],o),s=encodeInteger(n,w[2],s),l=encodeInteger(n,w[3],l),w.length!==4&&(f=encodeInteger(n,w[4],f)))}}return n.flush()}var resolveUri_umd$1={exports:{}},resolveUri_umd=resolveUri_umd$1.exports,hasRequiredResolveUri_umd;function requireResolveUri_umd(){return hasRequiredResolveUri_umd||(hasRequiredResolveUri_umd=1,(function(i,n){(function(o,s){i.exports=s()})(resolveUri_umd,(function(){const o=/^[\w+.-]+:\/\//,s=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,l=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;function f(y){return o.test(y)}function E(y){return y.startsWith("//")}function g(y){return y.startsWith("/")}function N(y){return y.startsWith("file:")}function x(y){return/^[.?#]/.test(y)}function w(y){const F=s.exec(y);return k(F[1],F[2]||"",F[3],F[4]||"",F[5]||"/",F[6]||"",F[7]||"")}function R(y){const F=l.exec(y),L=F[2];return k("file:","",F[1]||"","",g(L)?L:"/"+L,F[3]||"",F[4]||"")}function k(y,F,L,G,p,I,D){return{scheme:y,user:F,host:L,port:G,path:p,query:I,hash:D,type:7}}function B(y){if(E(y)){const L=w("http:"+y);return L.scheme="",L.type=6,L}if(g(y)){const L=w("http://foo.com"+y);return L.scheme="",L.host="",L.type=5,L}if(N(y))return R(y);if(f(y))return w(y);const F=w("http://foo.com/"+y);return F.scheme="",F.host="",F.type=y?y.startsWith("?")?3:y.startsWith("#")?2:4:1,F}function P(y){if(y.endsWith("/.."))return y;const F=y.lastIndexOf("/");return y.slice(0,F+1)}function z(y,F){m(F,F.type),y.path==="/"?y.path=F.path:y.path=P(F.path)+y.path}function m(y,F){const L=F<=4,G=y.path.split("/");let p=1,I=0,D=!1;for(let C=1;C<G.length;C++){const K=G[C];if(!K){D=!0;continue}if(D=!1,K!=="."){if(K===".."){I?(D=!0,I--,p--):L&&(G[p++]=K);continue}G[p++]=K,I++}}let V="";for(let C=1;C<p;C++)V+="/"+G[C];(!V||D&&!V.endsWith("/.."))&&(V+="/"),y.path=V}function d(y,F){if(!y&&!F)return"";const L=B(y);let G=L.type;if(F&&G!==7){const I=B(F),D=I.type;switch(G){case 1:L.hash=I.hash;case 2:L.query=I.query;case 3:case 4:z(L,I);case 5:L.user=I.user,L.host=I.host,L.port=I.port;case 6:L.scheme=I.scheme}D>G&&(G=D)}m(L,G);const p=L.query+L.hash;switch(G){case 2:case 3:return p;case 4:{const I=L.path.slice(1);return I?x(F||y)&&!x(I)?"./"+I+p:I+p:p||"."}case 5:return L.path+p;default:return L.scheme+"//"+L.user+L.host+L.port+L.path+p}}return d}))})(resolveUri_umd$1)),resolveUri_umd$1.exports}var resolveUri_umdExports=requireResolveUri_umd();const resolveUri=getDefaultExportFromCjs(resolveUri_umdExports);function stripFilename(i){if(!i)return"";const n=i.lastIndexOf("/");return i.slice(0,n+1)}function resolver(i,n){const o=stripFilename(i),s=n?n+"/":"";return l=>resolveUri(s+(l||""),o)}var COLUMN$1=0,SOURCES_INDEX$1=1,SOURCE_LINE$1=2,SOURCE_COLUMN$1=3,NAMES_INDEX$1=4,REV_GENERATED_LINE=1,REV_GENERATED_COLUMN=2;function maybeSort(i,n){const o=nextUnsortedSegmentLine(i,0);if(o===i.length)return i;n||(i=i.slice());for(let s=o;s<i.length;s=nextUnsortedSegmentLine(i,s+1))i[s]=sortSegments(i[s],n);return i}function nextUnsortedSegmentLine(i,n){for(let o=n;o<i.length;o++)if(!isSorted(i[o]))return o;return i.length}function isSorted(i){for(let n=1;n<i.length;n++)if(i[n][COLUMN$1]<i[n-1][COLUMN$1])return!1;return!0}function sortSegments(i,n){return n||(i=i.slice()),i.sort(sortComparator)}function sortComparator(i,n){return i[COLUMN$1]-n[COLUMN$1]}function buildBySources(i,n){const o=n.map(()=>[]);for(let s=0;s<i.length;s++){const l=i[s];for(let f=0;f<l.length;f++){const E=l[f];if(E.length===1)continue;const g=E[SOURCES_INDEX$1],N=E[SOURCE_LINE$1],x=E[SOURCE_COLUMN$1],w=o[g];(w[N]||(w[N]=[])).push([x,s,E[COLUMN$1]])}}for(let s=0;s<o.length;s++){const l=o[s];for(let f=0;f<l.length;f++){const E=l[f];E&&E.sort(sortComparator)}}return o}var found=!1;function binarySearch(i,n,o,s){for(;o<=s;){const l=o+(s-o>>1),f=i[l][COLUMN$1]-n;if(f===0)return found=!0,l;f<0?o=l+1:s=l-1}return found=!1,o-1}function upperBound(i,n,o){for(let s=o+1;s<i.length&&i[s][COLUMN$1]===n;o=s++);return o}function lowerBound(i,n,o){for(let s=o-1;s>=0&&i[s][COLUMN$1]===n;o=s--);return o}function memoizedState(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function memoizedBinarySearch(i,n,o,s){const{lastKey:l,lastNeedle:f,lastIndex:E}=o;let g=0,N=i.length-1;if(s===l){if(n===f)return found=E!==-1&&i[E][COLUMN$1]===n,E;n>=f?g=E===-1?0:E:N=E}return o.lastKey=s,o.lastNeedle=n,o.lastIndex=binarySearch(i,n,g,N)}function parse(i){return typeof i=="string"?JSON.parse(i):i}var FlattenMap=function(i,n){const o=parse(i);if(!("sections"in o))return new TraceMap(o,n);const s=[],l=[],f=[],E=[],g=[];recurse(o,n,s,l,f,E,g,0,0,1/0,1/0);const N={version:3,file:o.file,names:E,sources:l,sourcesContent:f,mappings:s,ignoreList:g};return presortedDecodedMap(N)};function recurse(i,n,o,s,l,f,E,g,N,x,w){const{sections:R}=i;for(let k=0;k<R.length;k++){const{map:B,offset:P}=R[k];let z=x,m=w;if(k+1<R.length){const d=R[k+1].offset;z=Math.min(x,g+d.line),z===x?m=Math.min(w,N+d.column):z<x&&(m=N+d.column)}addSection(B,n,o,s,l,f,E,g+P.line,N+P.column,z,m)}}function addSection(i,n,o,s,l,f,E,g,N,x,w){const R=parse(i);if("sections"in R)return recurse(...arguments);const k=new TraceMap(R,n),B=s.length,P=f.length,z=decodedMappings(k),{resolvedSources:m,sourcesContent:d,ignoreList:y}=k;if(append(s,m),append(f,k.names),d)append(l,d);else for(let F=0;F<m.length;F++)l.push(null);if(y)for(let F=0;F<y.length;F++)E.push(y[F]+B);for(let F=0;F<z.length;F++){const L=g+F;if(L>x)return;const G=getLine(o,L),p=F===0?N:0,I=z[F];for(let D=0;D<I.length;D++){const V=I[D],C=p+V[COLUMN$1];if(L===x&&C>=w)return;if(V.length===1){G.push([C]);continue}const K=B+V[SOURCES_INDEX$1],X=V[SOURCE_LINE$1],re=V[SOURCE_COLUMN$1];G.push(V.length===4?[C,K,X,re]:[C,K,X,re,P+V[NAMES_INDEX$1]])}}}function append(i,n){for(let o=0;o<n.length;o++)i.push(n[o])}function getLine(i,n){for(let o=i.length;o<=n;o++)i[o]=[];return i[n]}var LINE_GTR_ZERO="`line` must be greater than 0 (lines start at line 1)",COL_GTR_EQ_ZERO="`column` must be greater than or equal to 0 (columns start at column 0)",LEAST_UPPER_BOUND=-1,GREATEST_LOWER_BOUND=1,TraceMap=class{constructor(i,n){const o=typeof i=="string";if(!o&&i._decodedMemo)return i;const s=parse(i),{version:l,file:f,names:E,sourceRoot:g,sources:N,sourcesContent:x}=s;this.version=l,this.file=f,this.names=E||[],this.sourceRoot=g,this.sources=N,this.sourcesContent=x,this.ignoreList=s.ignoreList||s.x_google_ignoreList||void 0;const w=resolver(n,g);this.resolvedSources=N.map(w);const{mappings:R}=s;if(typeof R=="string")this._encoded=R,this._decoded=void 0;else if(Array.isArray(R))this._encoded=void 0,this._decoded=maybeSort(R,o);else throw s.sections?new Error("TraceMap passed sectioned source map, please use FlattenMap export instead"):new Error(`invalid source map: ${JSON.stringify(s)}`);this._decodedMemo=memoizedState(),this._bySources=void 0,this._bySourceMemos=void 0}};function cast$1(i){return i}function encodedMappings(i){var n,o;return(o=(n=i)._encoded)!=null?o:n._encoded=encode(i._decoded)}function decodedMappings(i){var n;return(n=i)._decoded||(n._decoded=decode(i._encoded))}function originalPositionFor(i,n){let{line:o,column:s,bias:l}=n;if(o--,o<0)throw new Error(LINE_GTR_ZERO);if(s<0)throw new Error(COL_GTR_EQ_ZERO);const f=decodedMappings(i);if(o>=f.length)return OMapping(null,null,null,null);const E=f[o],g=traceSegmentInternal(E,i._decodedMemo,o,s,l||GREATEST_LOWER_BOUND);if(g===-1)return OMapping(null,null,null,null);const N=E[g];if(N.length===1)return OMapping(null,null,null,null);const{names:x,resolvedSources:w}=i;return OMapping(w[N[SOURCES_INDEX$1]],N[SOURCE_LINE$1]+1,N[SOURCE_COLUMN$1],N.length===5?x[N[NAMES_INDEX$1]]:null)}function generatedPositionFor(i,n){const{source:o,line:s,column:l,bias:f}=n;return generatedPosition(i,o,s,l,f||GREATEST_LOWER_BOUND,!1)}function allGeneratedPositionsFor(i,n){const{source:o,line:s,column:l,bias:f}=n;return generatedPosition(i,o,s,l,f||LEAST_UPPER_BOUND,!0)}function eachMapping(i,n){const o=decodedMappings(i),{names:s,resolvedSources:l}=i;for(let f=0;f<o.length;f++){const E=o[f];for(let g=0;g<E.length;g++){const N=E[g],x=f+1,w=N[0];let R=null,k=null,B=null,P=null;N.length!==1&&(R=l[N[1]],k=N[2]+1,B=N[3]),N.length===5&&(P=s[N[4]]),n({generatedLine:x,generatedColumn:w,source:R,originalLine:k,originalColumn:B,name:P})}}}function sourceIndex(i,n){const{sources:o,resolvedSources:s}=i;let l=o.indexOf(n);return l===-1&&(l=s.indexOf(n)),l}function sourceContentFor(i,n){const{sourcesContent:o}=i;if(o==null)return null;const s=sourceIndex(i,n);return s===-1?null:o[s]}function presortedDecodedMap(i,n){const o=new TraceMap(clone(i,[]),n);return o._decoded=i.mappings,o}function clone(i,n){return{version:i.version,file:i.file,names:i.names,sourceRoot:i.sourceRoot,sources:i.sources,sourcesContent:i.sourcesContent,mappings:n,ignoreList:i.ignoreList||i.x_google_ignoreList}}function OMapping(i,n,o,s){return{source:i,line:n,column:o,name:s}}function GMapping(i,n){return{line:i,column:n}}function traceSegmentInternal(i,n,o,s,l){let f=memoizedBinarySearch(i,s,n,o);return found?f=(l===LEAST_UPPER_BOUND?upperBound:lowerBound)(i,s,f):l===LEAST_UPPER_BOUND&&f++,f===-1||f===i.length?-1:f}function sliceGeneratedPositions(i,n,o,s,l){let f=traceSegmentInternal(i,n,o,s,GREATEST_LOWER_BOUND);if(!found&&l===LEAST_UPPER_BOUND&&f++,f===-1||f===i.length)return[];const E=found?s:i[f][COLUMN$1];found||(f=lowerBound(i,E,f));const g=upperBound(i,E,f),N=[];for(;f<=g;f++){const x=i[f];N.push(GMapping(x[REV_GENERATED_LINE]+1,x[REV_GENERATED_COLUMN]))}return N}function generatedPosition(i,n,o,s,l,f){var E,g;if(o--,o<0)throw new Error(LINE_GTR_ZERO);if(s<0)throw new Error(COL_GTR_EQ_ZERO);const{sources:N,resolvedSources:x}=i;let w=N.indexOf(n);if(w===-1&&(w=x.indexOf(n)),w===-1)return f?[]:GMapping(null,null);const R=(E=i)._bySourceMemos||(E._bySourceMemos=N.map(memoizedState)),B=((g=i)._bySources||(g._bySources=buildBySources(decodedMappings(i),R)))[w][o];if(B==null)return f?[]:GMapping(null,null);const P=R[w];if(f)return sliceGeneratedPositions(B,P,o,s,l);const z=traceSegmentInternal(B,P,o,s,l);if(z===-1)return GMapping(null,null);const m=B[z];return GMapping(m[REV_GENERATED_LINE]+1,m[REV_GENERATED_COLUMN])}var SetArray=class{constructor(){this._indexes={__proto__:null},this.array=[]}};function cast(i){return i}function get(i,n){return i._indexes[n]}function put(i,n){const o=get(i,n);if(o!==void 0)return o;const{array:s,_indexes:l}=i,f=s.push(n);return l[n]=f-1}var COLUMN=0,SOURCES_INDEX=1,SOURCE_LINE=2,SOURCE_COLUMN=3,NAMES_INDEX=4,NO_NAME=-1,GenMapping=class{constructor({file:i,sourceRoot:n}={}){this._names=new SetArray,this._sources=new SetArray,this._sourcesContent=[],this._mappings=[],this.file=i,this.sourceRoot=n,this._ignoreList=new SetArray}};function cast2(i){return i}var maybeAddMapping=(i,n)=>addMappingInternal(!0,i,n);function setSourceContent(i,n,o){const{_sources:s,_sourcesContent:l}=i,f=put(s,n);l[f]=o}function toDecodedMap(i){const{_mappings:n,_sources:o,_sourcesContent:s,_names:l,_ignoreList:f}=i;return removeEmptyFinalLines(n),{version:3,file:i.file||void 0,names:l.array,sourceRoot:i.sourceRoot||void 0,sources:o.array,sourcesContent:s,mappings:n,ignoreList:f.array}}function toEncodedMap(i){const n=toDecodedMap(i);return Object.assign({},n,{mappings:encode(n.mappings)})}function fromMap(i){const n=new TraceMap(i),o=new GenMapping({file:n.file,sourceRoot:n.sourceRoot});return putAll(o._names,n.names),putAll(o._sources,n.sources),o._sourcesContent=n.sourcesContent||n.sources.map(()=>null),o._mappings=decodedMappings(n),n.ignoreList&&putAll(o._ignoreList,n.ignoreList),o}function addSegmentInternal(i,n,o,s,l,f,E,g,N){const{_mappings:x,_sources:w,_sourcesContent:R,_names:k}=n,B=getIndex(x,o),P=getColumnIndex(B,s);if(!l)return skipSourceless(B,P)?void 0:insert(B,P,[s]);const z=put(w,l),m=g?put(k,g):NO_NAME;if(z===R.length&&(R[z]=N??null),!skipSource(B,P,z,f,E,m))return insert(B,P,g?[s,z,f,E,m]:[s,z,f,E])}function getIndex(i,n){for(let o=i.length;o<=n;o++)i[o]=[];return i[n]}function getColumnIndex(i,n){let o=i.length;for(let s=o-1;s>=0;o=s--){const l=i[s];if(n>=l[COLUMN])break}return o}function insert(i,n,o){for(let s=i.length;s>n;s--)i[s]=i[s-1];i[n]=o}function removeEmptyFinalLines(i){const{length:n}=i;let o=n;for(let s=o-1;s>=0&&!(i[s].length>0);o=s,s--);o<n&&(i.length=o)}function putAll(i,n){for(let o=0;o<n.length;o++)put(i,n[o])}function skipSourceless(i,n){return n===0?!0:i[n-1].length===1}function skipSource(i,n,o,s,l,f){if(n===0)return!1;const E=i[n-1];return E.length===1?!1:o===E[SOURCES_INDEX]&&s===E[SOURCE_LINE]&&l===E[SOURCE_COLUMN]&&f===(E.length===5?E[NAMES_INDEX]:NO_NAME)}function addMappingInternal(i,n,o){const{generated:s,source:l,original:f,name:E,content:g}=o;return l?addSegmentInternal(i,n,s.line-1,s.column,l,f.line-1,f.column,E,g):addSegmentInternal(i,n,s.line-1,s.column,null,null,null,null,null)}var SourceMapConsumer=class ld{constructor(n,o){const s=this._map=new FlattenMap(n,o);this.file=s.file,this.names=s.names,this.sourceRoot=s.sourceRoot,this.sources=s.resolvedSources,this.sourcesContent=s.sourcesContent,this.version=s.version}static fromSourceMap(n,o){return n.toDecodedMap?new ld(n.toDecodedMap(),o):new ld(n.toJSON(),o)}get mappings(){return encodedMappings(this._map)}originalPositionFor(n){return originalPositionFor(this._map,n)}generatedPositionFor(n){return generatedPositionFor(this._map,n)}allGeneratedPositionsFor(n){return allGeneratedPositionsFor(this._map,n)}hasContentsOfAllSources(){if(!this.sourcesContent||this.sourcesContent.length!==this.sources.length)return!1;for(const n of this.sourcesContent)if(n==null)return!1;return!0}sourceContentFor(n,o){const s=sourceContentFor(this._map,n);if(s!=null)return s;if(o)return null;throw new Error(`"${n}" is not in the SourceMap.`)}eachMapping(n,o){eachMapping(this._map,o?n.bind(o):n)}destroy(){}},SourceMapGenerator=class Um{constructor(n){this._map=n instanceof GenMapping?n:new GenMapping(n)}static fromSourceMap(n){return new Um(fromMap(n))}addMapping(n){maybeAddMapping(this._map,n)}setSourceContent(n,o){setSourceContent(this._map,n,o)}toJSON(){return toEncodedMap(this._map)}toString(){return JSON.stringify(this.toJSON())}toDecodedMap(){return toDecodedMap(this._map)}};function*SourceMap(i){i=defaults(i,{file:null,root:null,orig:null,files:{}});var n,o=new SourceMapGenerator({file:i.file,sourceRoot:i.root});let s={__proto__:null},l=i.files;for(var f in l)HOP(l,f)&&(s[f]=l[f]);i.orig&&(n=yield new SourceMapConsumer(i.orig),n.sourcesContent&&n.sources.forEach(function(R,k){var B=n.sourcesContent[k];B&&(s[R]=B)}));function E(R,k,B,P,z,m){let d={line:k,column:B};if(n){var y=n.originalPositionFor({line:P,column:z});if(y.source===null){o.addMapping({generated:d,original:null,source:null,name:null});return}R=y.source,P=y.line,z=y.column,m=y.name||m}o.addMapping({generated:d,original:{line:P,column:z},source:R,name:m}),o.setSourceContent(R,s[R])}function g(R){return R.sourcesContent&&R.sourcesContent.every(B=>B==null)&&delete R.sourcesContent,R.file===void 0&&delete R.file,R.sourceRoot===void 0&&delete R.sourceRoot,R}function N(){return o.toDecodedMap?g(o.toDecodedMap()):null}function x(){return g(o.toJSON())}function w(){n&&n.destroy&&n.destroy()}return{add:E,getDecoded:N,getEncoded:x,destroy:w}}var domprops=["$&","$'","$*","$+","$1","$2","$3","$4","$5","$6","$7","$8","$9","$_","$`","$input","-moz-animation","-moz-animation-delay","-moz-animation-direction","-moz-animation-duration","-moz-animation-fill-mode","-moz-animation-iteration-count","-moz-animation-name","-moz-animation-play-state","-moz-animation-timing-function","-moz-appearance","-moz-backface-visibility","-moz-border-end","-moz-border-end-color","-moz-border-end-style","-moz-border-end-width","-moz-border-image","-moz-border-start","-moz-border-start-color","-moz-border-start-style","-moz-border-start-width","-moz-box-align","-moz-box-direction","-moz-box-flex","-moz-box-ordinal-group","-moz-box-orient","-moz-box-pack","-moz-box-sizing","-moz-float-edge","-moz-font-feature-settings","-moz-font-language-override","-moz-force-broken-image-icon","-moz-hyphens","-moz-image-region","-moz-margin-end","-moz-margin-start","-moz-orient","-moz-osx-font-smoothing","-moz-outline-radius","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-padding-end","-moz-padding-start","-moz-perspective","-moz-perspective-origin","-moz-tab-size","-moz-text-size-adjust","-moz-transform","-moz-transform-origin","-moz-transform-style","-moz-transition","-moz-transition-delay","-moz-transition-duration","-moz-transition-property","-moz-transition-timing-function","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-user-select","-moz-window-dragging","-webkit-align-content","-webkit-align-items","-webkit-align-self","-webkit-animation","-webkit-animation-delay","-webkit-animation-direction","-webkit-animation-duration","-webkit-animation-fill-mode","-webkit-animation-iteration-count","-webkit-animation-name","-webkit-animation-play-state","-webkit-animation-timing-function","-webkit-appearance","-webkit-backface-visibility","-webkit-background-clip","-webkit-background-origin","-webkit-background-size","-webkit-border-bottom-left-radius","-webkit-border-bottom-right-radius","-webkit-border-image","-webkit-border-radius","-webkit-border-top-left-radius","-webkit-border-top-right-radius","-webkit-box-align","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-shadow","-webkit-box-sizing","-webkit-clip-path","-webkit-filter","-webkit-flex","-webkit-flex-basis","-webkit-flex-direction","-webkit-flex-flow","-webkit-flex-grow","-webkit-flex-shrink","-webkit-flex-wrap","-webkit-font-feature-settings","-webkit-justify-content","-webkit-line-clamp","-webkit-mask","-webkit-mask-clip","-webkit-mask-composite","-webkit-mask-image","-webkit-mask-origin","-webkit-mask-position","-webkit-mask-position-x","-webkit-mask-position-y","-webkit-mask-repeat","-webkit-mask-size","-webkit-order","-webkit-perspective","-webkit-perspective-origin","-webkit-text-fill-color","-webkit-text-security","-webkit-text-size-adjust","-webkit-text-stroke","-webkit-text-stroke-color","-webkit-text-stroke-width","-webkit-transform","-webkit-transform-origin","-webkit-transform-style","-webkit-transition","-webkit-transition-delay","-webkit-transition-duration","-webkit-transition-property","-webkit-transition-timing-function","-webkit-user-select","@@iterator","ABORT_ERR","ACTIVE","ACTIVE_ATTRIBUTES","ACTIVE_TEXTURE","ACTIVE_UNIFORMS","ACTIVE_UNIFORM_BLOCKS","ADDITION","ALIASED_LINE_WIDTH_RANGE","ALIASED_POINT_SIZE_RANGE","ALL","ALLOW_KEYBOARD_INPUT","ALLPASS","ALPHA","ALPHA_BITS","ALREADY_SIGNALED","ALT_MASK","ALWAYS","ANY_SAMPLES_PASSED","ANY_SAMPLES_PASSED_CONSERVATIVE","ANY_TYPE","ANY_UNORDERED_NODE_TYPE","ARRAY_BUFFER","ARRAY_BUFFER_BINDING","ATTACHED_SHADERS","ATTRIBUTE_NODE","AT_TARGET","AbortController","AbortSignal","AbsoluteOrientationSensor","AbstractRange","Accelerometer","AddSearchProvider","AggregateError","AnalyserNode","Animation","AnimationEffect","AnimationEvent","AnimationPlaybackEvent","AnimationTimeline","AnonXMLHttpRequest","Any","AnyPermissions","ApplicationCache","ApplicationCacheErrorEvent","Array","ArrayBuffer","ArrayType","AsyncDisposableStack","Atomics","Attr","Audio","AudioBuffer","AudioBufferSourceNode","AudioContext","AudioData","AudioDecoder","AudioDestinationNode","AudioEncoder","AudioListener","AudioNode","AudioParam","AudioParamMap","AudioProcessingEvent","AudioScheduledSourceNode","AudioSinkInfo","AudioStreamTrack","AudioWorklet","AudioWorkletNode","AuthenticatorAssertionResponse","AuthenticatorAttestationResponse","AuthenticatorResponse","AutocompleteErrorEvent","BACK","BAD_BOUNDARYPOINTS_ERR","BAD_REQUEST","BANDPASS","BLEND","BLEND_COLOR","BLEND_DST_ALPHA","BLEND_DST_RGB","BLEND_EQUATION","BLEND_EQUATION_ALPHA","BLEND_EQUATION_RGB","BLEND_SRC_ALPHA","BLEND_SRC_RGB","BLUE","BLUE_BITS","BLUR","BOOL","BOOLEAN_TYPE","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","BOTH","BROWSER_DEFAULT_WEBGL","BUBBLING_PHASE","BUFFER_SIZE","BUFFER_USAGE","BYTE","BYTES_PER_ELEMENT","BackgroundFetchManager","BackgroundFetchRecord","BackgroundFetchRegistration","BarProp","BarcodeDetector","BaseAudioContext","BaseHref","BatteryManager","BeforeInstallPromptEvent","BeforeLoadEvent","BeforeUnloadEvent","BigInt","BigInt64Array","BigUint64Array","BiquadFilterNode","Blob","BlobEvent","Bluetooth","BluetoothCharacteristicProperties","BluetoothDevice","BluetoothRemoteGATTCharacteristic","BluetoothRemoteGATTDescriptor","BluetoothRemoteGATTServer","BluetoothRemoteGATTService","BluetoothUUID","Boolean","BroadcastChannel","BrowserCaptureMediaStreamTrack","BrowserInfo","ByteLengthQueuingStrategy","CAPTURING_PHASE","CCW","CDATASection","CDATA_SECTION_NODE","CHANGE","CHARSET_RULE","CHECKING","CLAMP_TO_EDGE","CLICK","CLOSED","CLOSING","COLOR","COLOR_ATTACHMENT0","COLOR_ATTACHMENT1","COLOR_ATTACHMENT10","COLOR_ATTACHMENT11","COLOR_ATTACHMENT12","COLOR_ATTACHMENT13","COLOR_ATTACHMENT14","COLOR_ATTACHMENT15","COLOR_ATTACHMENT2","COLOR_ATTACHMENT3","COLOR_ATTACHMENT4","COLOR_ATTACHMENT5","COLOR_ATTACHMENT6","COLOR_ATTACHMENT7","COLOR_ATTACHMENT8","COLOR_ATTACHMENT9","COLOR_BUFFER_BIT","COLOR_CLEAR_VALUE","COLOR_WRITEMASK","COMMENT_NODE","COMPARE_REF_TO_TEXTURE","COMPILE_STATUS","COMPLETION_STATUS_KHR","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_TEXTURE_FORMATS","COMPUTE","CONDITION_SATISFIED","CONFIGURATION_UNSUPPORTED","CONNECTING","CONSTANT_ALPHA","CONSTANT_COLOR","CONSTRAINT_ERR","CONTEXT_LOST_WEBGL","CONTROL_MASK","COPY_DST","COPY_READ_BUFFER","COPY_READ_BUFFER_BINDING","COPY_SRC","COPY_WRITE_BUFFER","COPY_WRITE_BUFFER_BINDING","COUNTER_STYLE_RULE","CSPViolationReportBody","CSS","CSS2Properties","CSSAnimation","CSSCharsetRule","CSSConditionRule","CSSContainerRule","CSSCounterStyleRule","CSSFontFaceRule","CSSFontFeatureValuesRule","CSSFontPaletteValuesRule","CSSFunctionDeclarations","CSSFunctionDescriptors","CSSFunctionRule","CSSGroupingRule","CSSImageValue","CSSImportRule","CSSKeyframeRule","CSSKeyframesRule","CSSKeywordValue","CSSLayerBlockRule","CSSLayerStatementRule","CSSMarginRule","CSSMathClamp","CSSMathInvert","CSSMathMax","CSSMathMin","CSSMathNegate","CSSMathProduct","CSSMathSum","CSSMathValue","CSSMatrixComponent","CSSMediaRule","CSSMozDocumentRule","CSSNameSpaceRule","CSSNamespaceRule","CSSNestedDeclarations","CSSNumericArray","CSSNumericValue","CSSPageDescriptors","CSSPageRule","CSSPerspective","CSSPositionTryDescriptors","CSSPositionTryRule","CSSPositionValue","CSSPrimitiveValue","CSSPropertyRule","CSSRotate","CSSRule","CSSRuleList","CSSScale","CSSScopeRule","CSSSkew","CSSSkewX","CSSSkewY","CSSStartingStyleRule","CSSStyleDeclaration","CSSStyleProperties","CSSStyleRule","CSSStyleSheet","CSSStyleValue","CSSSupportsRule","CSSTransformComponent","CSSTransformValue","CSSTransition","CSSTranslate","CSSUnitValue","CSSUnknownRule","CSSUnparsedValue","CSSValue","CSSValueList","CSSVariableReferenceValue","CSSVariablesDeclaration","CSSVariablesRule","CSSViewTransitionRule","CSSViewportRule","CSS_ATTR","CSS_CM","CSS_COUNTER","CSS_CUSTOM","CSS_DEG","CSS_DIMENSION","CSS_EMS","CSS_EXS","CSS_FILTER_BLUR","CSS_FILTER_BRIGHTNESS","CSS_FILTER_CONTRAST","CSS_FILTER_CUSTOM","CSS_FILTER_DROP_SHADOW","CSS_FILTER_GRAYSCALE","CSS_FILTER_HUE_ROTATE","CSS_FILTER_INVERT","CSS_FILTER_OPACITY","CSS_FILTER_REFERENCE","CSS_FILTER_SATURATE","CSS_FILTER_SEPIA","CSS_GRAD","CSS_HZ","CSS_IDENT","CSS_IN","CSS_INHERIT","CSS_KHZ","CSS_MATRIX","CSS_MATRIX3D","CSS_MM","CSS_MS","CSS_NUMBER","CSS_PC","CSS_PERCENTAGE","CSS_PERSPECTIVE","CSS_PRIMITIVE_VALUE","CSS_PT","CSS_PX","CSS_RAD","CSS_RECT","CSS_RGBCOLOR","CSS_ROTATE","CSS_ROTATE3D","CSS_ROTATEX","CSS_ROTATEY","CSS_ROTATEZ","CSS_S","CSS_SCALE","CSS_SCALE3D","CSS_SCALEX","CSS_SCALEY","CSS_SCALEZ","CSS_SKEW","CSS_SKEWX","CSS_SKEWY","CSS_STRING","CSS_TRANSLATE","CSS_TRANSLATE3D","CSS_TRANSLATEX","CSS_TRANSLATEY","CSS_TRANSLATEZ","CSS_UNKNOWN","CSS_URI","CSS_VALUE_LIST","CSS_VH","CSS_VMAX","CSS_VMIN","CSS_VW","CULL_FACE","CULL_FACE_MODE","CURRENT_PROGRAM","CURRENT_QUERY","CURRENT_VERTEX_ATTRIB","CUSTOM","CW","Cache","CacheStorage","CanvasCaptureMediaStream","CanvasCaptureMediaStreamTrack","CanvasGradient","CanvasPattern","CanvasRenderingContext2D","CaptureController","CaretPosition","ChannelMergerNode","ChannelSplitterNode","ChapterInformation","CharacterBoundsUpdateEvent","CharacterData","ClientRect","ClientRectList","Clipboard","ClipboardEvent","ClipboardItem","CloseEvent","CloseWatcher","Collator","ColorArray","ColorValue","CommandEvent","Comment","CompileError","CompositionEvent","CompressionStream","Console","ConstantSourceNode","ContentVisibilityAutoStateChangeEvent","ContextFilter","ContextType","Controllers","ConvolverNode","CookieChangeEvent","CookieStore","CookieStoreManager","CountQueuingStrategy","Counter","CreateMonitor","CreateType","Credential","CredentialsContainer","CropTarget","Crypto","CryptoKey","CustomElementRegistry","CustomEvent","CustomStateSet","DATABASE_ERR","DATA_CLONE_ERR","DATA_ERR","DBLCLICK","DECR","DECR_WRAP","DELETE_STATUS","DEPTH","DEPTH24_STENCIL8","DEPTH32F_STENCIL8","DEPTH_ATTACHMENT","DEPTH_BITS","DEPTH_BUFFER_BIT","DEPTH_CLEAR_VALUE","DEPTH_COMPONENT","DEPTH_COMPONENT16","DEPTH_COMPONENT24","DEPTH_COMPONENT32F","DEPTH_FUNC","DEPTH_RANGE","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","DEPTH_TEST","DEPTH_WRITEMASK","DEVICE_INELIGIBLE","DIRECTION_DOWN","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DISABLED","DISPATCH_REQUEST_ERR","DITHER","DOCUMENT_FRAGMENT_NODE","DOCUMENT_NODE","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_TYPE_NODE","DOMCursor","DOMError","DOMException","DOMImplementation","DOMImplementationLS","DOMMatrix","DOMMatrixReadOnly","DOMParser","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectList","DOMRectReadOnly","DOMRequest","DOMSTRING_SIZE_ERR","DOMSettableTokenList","DOMStringList","DOMStringMap","DOMTokenList","DOMTransactionEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","DOM_INPUT_METHOD_DROP","DOM_INPUT_METHOD_HANDWRITING","DOM_INPUT_METHOD_IME","DOM_INPUT_METHOD_KEYBOARD","DOM_INPUT_METHOD_MULTIMODAL","DOM_INPUT_METHOD_OPTION","DOM_INPUT_METHOD_PASTE","DOM_INPUT_METHOD_SCRIPT","DOM_INPUT_METHOD_UNKNOWN","DOM_INPUT_METHOD_VOICE","DOM_KEY_LOCATION_JOYSTICK","DOM_KEY_LOCATION_LEFT","DOM_KEY_LOCATION_MOBILE","DOM_KEY_LOCATION_NUMPAD","DOM_KEY_LOCATION_RIGHT","DOM_KEY_LOCATION_STANDARD","DOM_VK_0","DOM_VK_1","DOM_VK_2","DOM_VK_3","DOM_VK_4","DOM_VK_5","DOM_VK_6","DOM_VK_7","DOM_VK_8","DOM_VK_9","DOM_VK_A","DOM_VK_ACCEPT","DOM_VK_ADD","DOM_VK_ALT","DOM_VK_ALTGR","DOM_VK_AMPERSAND","DOM_VK_ASTERISK","DOM_VK_AT","DOM_VK_ATTN","DOM_VK_B","DOM_VK_BACKSPACE","DOM_VK_BACK_QUOTE","DOM_VK_BACK_SLASH","DOM_VK_BACK_SPACE","DOM_VK_C","DOM_VK_CANCEL","DOM_VK_CAPS_LOCK","DOM_VK_CIRCUMFLEX","DOM_VK_CLEAR","DOM_VK_CLOSE_BRACKET","DOM_VK_CLOSE_CURLY_BRACKET","DOM_VK_CLOSE_PAREN","DOM_VK_COLON","DOM_VK_COMMA","DOM_VK_CONTEXT_MENU","DOM_VK_CONTROL","DOM_VK_CONVERT","DOM_VK_CRSEL","DOM_VK_CTRL","DOM_VK_D","DOM_VK_DECIMAL","DOM_VK_DELETE","DOM_VK_DIVIDE","DOM_VK_DOLLAR","DOM_VK_DOUBLE_QUOTE","DOM_VK_DOWN","DOM_VK_E","DOM_VK_EISU","DOM_VK_END","DOM_VK_ENTER","DOM_VK_EQUALS","DOM_VK_EREOF","DOM_VK_ESCAPE","DOM_VK_EXCLAMATION","DOM_VK_EXECUTE","DOM_VK_EXSEL","DOM_VK_F","DOM_VK_F1","DOM_VK_F10","DOM_VK_F11","DOM_VK_F12","DOM_VK_F13","DOM_VK_F14","DOM_VK_F15","DOM_VK_F16","DOM_VK_F17","DOM_VK_F18","DOM_VK_F19","DOM_VK_F2","DOM_VK_F20","DOM_VK_F21","DOM_VK_F22","DOM_VK_F23","DOM_VK_F24","DOM_VK_F25","DOM_VK_F26","DOM_VK_F27","DOM_VK_F28","DOM_VK_F29","DOM_VK_F3","DOM_VK_F30","DOM_VK_F31","DOM_VK_F32","DOM_VK_F33","DOM_VK_F34","DOM_VK_F35","DOM_VK_F36","DOM_VK_F4","DOM_VK_F5","DOM_VK_F6","DOM_VK_F7","DOM_VK_F8","DOM_VK_F9","DOM_VK_FINAL","DOM_VK_FRONT","DOM_VK_G","DOM_VK_GREATER_THAN","DOM_VK_H","DOM_VK_HANGUL","DOM_VK_HANJA","DOM_VK_HASH","DOM_VK_HELP","DOM_VK_HK_TOGGLE","DOM_VK_HOME","DOM_VK_HYPHEN_MINUS","DOM_VK_I","DOM_VK_INSERT","DOM_VK_J","DOM_VK_JUNJA","DOM_VK_K","DOM_VK_KANA","DOM_VK_KANJI","DOM_VK_L","DOM_VK_LEFT","DOM_VK_LEFT_TAB","DOM_VK_LESS_THAN","DOM_VK_M","DOM_VK_META","DOM_VK_MODECHANGE","DOM_VK_MULTIPLY","DOM_VK_N","DOM_VK_NONCONVERT","DOM_VK_NUMPAD0","DOM_VK_NUMPAD1","DOM_VK_NUMPAD2","DOM_VK_NUMPAD3","DOM_VK_NUMPAD4","DOM_VK_NUMPAD5","DOM_VK_NUMPAD6","DOM_VK_NUMPAD7","DOM_VK_NUMPAD8","DOM_VK_NUMPAD9","DOM_VK_NUM_LOCK","DOM_VK_O","DOM_VK_OEM_1","DOM_VK_OEM_102","DOM_VK_OEM_2","DOM_VK_OEM_3","DOM_VK_OEM_4","DOM_VK_OEM_5","DOM_VK_OEM_6","DOM_VK_OEM_7","DOM_VK_OEM_8","DOM_VK_OEM_COMMA","DOM_VK_OEM_MINUS","DOM_VK_OEM_PERIOD","DOM_VK_OEM_PLUS","DOM_VK_OPEN_BRACKET","DOM_VK_OPEN_CURLY_BRACKET","DOM_VK_OPEN_PAREN","DOM_VK_P","DOM_VK_PA1","DOM_VK_PAGEDOWN","DOM_VK_PAGEUP","DOM_VK_PAGE_DOWN","DOM_VK_PAGE_UP","DOM_VK_PAUSE","DOM_VK_PERCENT","DOM_VK_PERIOD","DOM_VK_PIPE","DOM_VK_PLAY","DOM_VK_PLUS","DOM_VK_PRINT","DOM_VK_PRINTSCREEN","DOM_VK_PROCESSKEY","DOM_VK_PROPERITES","DOM_VK_Q","DOM_VK_QUESTION_MARK","DOM_VK_QUOTE","DOM_VK_R","DOM_VK_REDO","DOM_VK_RETURN","DOM_VK_RIGHT","DOM_VK_S","DOM_VK_SCROLL_LOCK","DOM_VK_SELECT","DOM_VK_SEMICOLON","DOM_VK_SEPARATOR","DOM_VK_SHIFT","DOM_VK_SLASH","DOM_VK_SLEEP","DOM_VK_SPACE","DOM_VK_SUBTRACT","DOM_VK_T","DOM_VK_TAB","DOM_VK_TILDE","DOM_VK_U","DOM_VK_UNDERSCORE","DOM_VK_UNDO","DOM_VK_UNICODE","DOM_VK_UP","DOM_VK_V","DOM_VK_VOLUME_DOWN","DOM_VK_VOLUME_MUTE","DOM_VK_VOLUME_UP","DOM_VK_W","DOM_VK_WIN","DOM_VK_WINDOW","DOM_VK_WIN_ICO_00","DOM_VK_WIN_ICO_CLEAR","DOM_VK_WIN_ICO_HELP","DOM_VK_WIN_OEM_ATTN","DOM_VK_WIN_OEM_AUTO","DOM_VK_WIN_OEM_BACKTAB","DOM_VK_WIN_OEM_CLEAR","DOM_VK_WIN_OEM_COPY","DOM_VK_WIN_OEM_CUSEL","DOM_VK_WIN_OEM_ENLW","DOM_VK_WIN_OEM_FINISH","DOM_VK_WIN_OEM_FJ_JISHO","DOM_VK_WIN_OEM_FJ_LOYA","DOM_VK_WIN_OEM_FJ_MASSHOU","DOM_VK_WIN_OEM_FJ_ROYA","DOM_VK_WIN_OEM_FJ_TOUROKU","DOM_VK_WIN_OEM_JUMP","DOM_VK_WIN_OEM_PA1","DOM_VK_WIN_OEM_PA2","DOM_VK_WIN_OEM_PA3","DOM_VK_WIN_OEM_RESET","DOM_VK_WIN_OEM_WSCTRL","DOM_VK_X","DOM_VK_XF86XK_ADD_FAVORITE","DOM_VK_XF86XK_APPLICATION_LEFT","DOM_VK_XF86XK_APPLICATION_RIGHT","DOM_VK_XF86XK_AUDIO_CYCLE_TRACK","DOM_VK_XF86XK_AUDIO_FORWARD","DOM_VK_XF86XK_AUDIO_LOWER_VOLUME","DOM_VK_XF86XK_AUDIO_MEDIA","DOM_VK_XF86XK_AUDIO_MUTE","DOM_VK_XF86XK_AUDIO_NEXT","DOM_VK_XF86XK_AUDIO_PAUSE","DOM_VK_XF86XK_AUDIO_PLAY","DOM_VK_XF86XK_AUDIO_PREV","DOM_VK_XF86XK_AUDIO_RAISE_VOLUME","DOM_VK_XF86XK_AUDIO_RANDOM_PLAY","DOM_VK_XF86XK_AUDIO_RECORD","DOM_VK_XF86XK_AUDIO_REPEAT","DOM_VK_XF86XK_AUDIO_REWIND","DOM_VK_XF86XK_AUDIO_STOP","DOM_VK_XF86XK_AWAY","DOM_VK_XF86XK_BACK","DOM_VK_XF86XK_BACK_FORWARD","DOM_VK_XF86XK_BATTERY","DOM_VK_XF86XK_BLUE","DOM_VK_XF86XK_BLUETOOTH","DOM_VK_XF86XK_BOOK","DOM_VK_XF86XK_BRIGHTNESS_ADJUST","DOM_VK_XF86XK_CALCULATOR","DOM_VK_XF86XK_CALENDAR","DOM_VK_XF86XK_CD","DOM_VK_XF86XK_CLOSE","DOM_VK_XF86XK_COMMUNITY","DOM_VK_XF86XK_CONTRAST_ADJUST","DOM_VK_XF86XK_COPY","DOM_VK_XF86XK_CUT","DOM_VK_XF86XK_CYCLE_ANGLE","DOM_VK_XF86XK_DISPLAY","DOM_VK_XF86XK_DOCUMENTS","DOM_VK_XF86XK_DOS","DOM_VK_XF86XK_EJECT","DOM_VK_XF86XK_EXCEL","DOM_VK_XF86XK_EXPLORER","DOM_VK_XF86XK_FAVORITES","DOM_VK_XF86XK_FINANCE","DOM_VK_XF86XK_FORWARD","DOM_VK_XF86XK_FRAME_BACK","DOM_VK_XF86XK_FRAME_FORWARD","DOM_VK_XF86XK_GAME","DOM_VK_XF86XK_GO","DOM_VK_XF86XK_GREEN","DOM_VK_XF86XK_HIBERNATE","DOM_VK_XF86XK_HISTORY","DOM_VK_XF86XK_HOME_PAGE","DOM_VK_XF86XK_HOT_LINKS","DOM_VK_XF86XK_I_TOUCH","DOM_VK_XF86XK_KBD_BRIGHTNESS_DOWN","DOM_VK_XF86XK_KBD_BRIGHTNESS_UP","DOM_VK_XF86XK_KBD_LIGHT_ON_OFF","DOM_VK_XF86XK_LAUNCH0","DOM_VK_XF86XK_LAUNCH1","DOM_VK_XF86XK_LAUNCH2","DOM_VK_XF86XK_LAUNCH3","DOM_VK_XF86XK_LAUNCH4","DOM_VK_XF86XK_LAUNCH5","DOM_VK_XF86XK_LAUNCH6","DOM_VK_XF86XK_LAUNCH7","DOM_VK_XF86XK_LAUNCH8","DOM_VK_XF86XK_LAUNCH9","DOM_VK_XF86XK_LAUNCH_A","DOM_VK_XF86XK_LAUNCH_B","DOM_VK_XF86XK_LAUNCH_C","DOM_VK_XF86XK_LAUNCH_D","DOM_VK_XF86XK_LAUNCH_E","DOM_VK_XF86XK_LAUNCH_F","DOM_VK_XF86XK_LIGHT_BULB","DOM_VK_XF86XK_LOG_OFF","DOM_VK_XF86XK_MAIL","DOM_VK_XF86XK_MAIL_FORWARD","DOM_VK_XF86XK_MARKET","DOM_VK_XF86XK_MEETING","DOM_VK_XF86XK_MEMO","DOM_VK_XF86XK_MENU_KB","DOM_VK_XF86XK_MENU_PB","DOM_VK_XF86XK_MESSENGER","DOM_VK_XF86XK_MON_BRIGHTNESS_DOWN","DOM_VK_XF86XK_MON_BRIGHTNESS_UP","DOM_VK_XF86XK_MUSIC","DOM_VK_XF86XK_MY_COMPUTER","DOM_VK_XF86XK_MY_SITES","DOM_VK_XF86XK_NEW","DOM_VK_XF86XK_NEWS","DOM_VK_XF86XK_OFFICE_HOME","DOM_VK_XF86XK_OPEN","DOM_VK_XF86XK_OPEN_URL","DOM_VK_XF86XK_OPTION","DOM_VK_XF86XK_PASTE","DOM_VK_XF86XK_PHONE","DOM_VK_XF86XK_PICTURES","DOM_VK_XF86XK_POWER_DOWN","DOM_VK_XF86XK_POWER_OFF","DOM_VK_XF86XK_RED","DOM_VK_XF86XK_REFRESH","DOM_VK_XF86XK_RELOAD","DOM_VK_XF86XK_REPLY","DOM_VK_XF86XK_ROCKER_DOWN","DOM_VK_XF86XK_ROCKER_ENTER","DOM_VK_XF86XK_ROCKER_UP","DOM_VK_XF86XK_ROTATE_WINDOWS","DOM_VK_XF86XK_ROTATION_KB","DOM_VK_XF86XK_ROTATION_PB","DOM_VK_XF86XK_SAVE","DOM_VK_XF86XK_SCREEN_SAVER","DOM_VK_XF86XK_SCROLL_CLICK","DOM_VK_XF86XK_SCROLL_DOWN","DOM_VK_XF86XK_SCROLL_UP","DOM_VK_XF86XK_SEARCH","DOM_VK_XF86XK_SEND","DOM_VK_XF86XK_SHOP","DOM_VK_XF86XK_SPELL","DOM_VK_XF86XK_SPLIT_SCREEN","DOM_VK_XF86XK_STANDBY","DOM_VK_XF86XK_START","DOM_VK_XF86XK_STOP","DOM_VK_XF86XK_SUBTITLE","DOM_VK_XF86XK_SUPPORT","DOM_VK_XF86XK_SUSPEND","DOM_VK_XF86XK_TASK_PANE","DOM_VK_XF86XK_TERMINAL","DOM_VK_XF86XK_TIME","DOM_VK_XF86XK_TOOLS","DOM_VK_XF86XK_TOP_MENU","DOM_VK_XF86XK_TO_DO_LIST","DOM_VK_XF86XK_TRAVEL","DOM_VK_XF86XK_USER1KB","DOM_VK_XF86XK_USER2KB","DOM_VK_XF86XK_USER_PB","DOM_VK_XF86XK_UWB","DOM_VK_XF86XK_VENDOR_HOME","DOM_VK_XF86XK_VIDEO","DOM_VK_XF86XK_VIEW","DOM_VK_XF86XK_WAKE_UP","DOM_VK_XF86XK_WEB_CAM","DOM_VK_XF86XK_WHEEL_BUTTON","DOM_VK_XF86XK_WLAN","DOM_VK_XF86XK_WORD","DOM_VK_XF86XK_WWW","DOM_VK_XF86XK_XFER","DOM_VK_XF86XK_YELLOW","DOM_VK_XF86XK_ZOOM_IN","DOM_VK_XF86XK_ZOOM_OUT","DOM_VK_Y","DOM_VK_Z","DOM_VK_ZOOM","DONE","DONT_CARE","DOWNLOADING","DRAGDROP","DRAW_BUFFER0","DRAW_BUFFER1","DRAW_BUFFER10","DRAW_BUFFER11","DRAW_BUFFER12","DRAW_BUFFER13","DRAW_BUFFER14","DRAW_BUFFER15","DRAW_BUFFER2","DRAW_BUFFER3","DRAW_BUFFER4","DRAW_BUFFER5","DRAW_BUFFER6","DRAW_BUFFER7","DRAW_BUFFER8","DRAW_BUFFER9","DRAW_FRAMEBUFFER","DRAW_FRAMEBUFFER_BINDING","DST_ALPHA","DST_COLOR","DYNAMIC_COPY","DYNAMIC_DRAW","DYNAMIC_READ","DataChannel","DataTransfer","DataTransferItem","DataTransferItemList","DataView","Date","DateTimeFormat","DecompressionStream","DelayNode","DelegatedInkTrailPresenter","DeprecationReportBody","DesktopNotification","DesktopNotificationCenter","Details","DeviceLightEvent","DeviceMotionEvent","DeviceMotionEventAcceleration","DeviceMotionEventRotationRate","DeviceOrientationEvent","DevicePosture","DeviceProximityEvent","DeviceStorage","DeviceStorageChangeEvent","DigitalCredential","Directory","DisplayNames","DisposableStack","Document","DocumentFragment","DocumentPictureInPicture","DocumentPictureInPictureEvent","DocumentTimeline","DocumentType","DragEvent","Duration","DurationFormat","DynamicsCompressorNode","E","ELEMENT_ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER_BINDING","ELEMENT_NODE","EMPTY","ENCODING_ERR","ENDED","END_TO_END","END_TO_START","ENTITY_NODE","ENTITY_REFERENCE_NODE","EPSILON","EQUAL","EQUALPOWER","ERROR","EXPONENTIAL_DISTANCE","EditContext","Element","ElementInternals","ElementQuery","EncodedAudioChunk","EncodedVideoChunk","EnterPictureInPictureEvent","Entity","EntityReference","Error","ErrorEvent","EvalError","Event","EventCounts","EventException","EventSource","EventTarget","Exception","ExtensionContext","ExtensionDisabledReason","ExtensionInfo","ExtensionInstallType","ExtensionType","External","EyeDropper","FASTEST","FIDOSDK","FILTER_ACCEPT","FILTER_INTERRUPT","FILTER_REJECT","FILTER_SKIP","FINISHED_STATE","FIRST_ORDERED_NODE_TYPE","FLOAT","FLOAT_32_UNSIGNED_INT_24_8_REV","FLOAT_MAT2","FLOAT_MAT2x3","FLOAT_MAT2x4","FLOAT_MAT3","FLOAT_MAT3x2","FLOAT_MAT3x4","FLOAT_MAT4","FLOAT_MAT4x2","FLOAT_MAT4x3","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","FOCUS","FONT_FACE_RULE","FONT_FEATURE_VALUES_RULE","FRAGMENT","FRAGMENT_SHADER","FRAGMENT_SHADER_DERIVATIVE_HINT","FRAGMENT_SHADER_DERIVATIVE_HINT_OES","FRAMEBUFFER","FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE","FRAMEBUFFER_ATTACHMENT_BLUE_SIZE","FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING","FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE","FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE","FRAMEBUFFER_ATTACHMENT_GREEN_SIZE","FRAMEBUFFER_ATTACHMENT_OBJECT_NAME","FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE","FRAMEBUFFER_ATTACHMENT_RED_SIZE","FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE","FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE","FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER","FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL","FRAMEBUFFER_BINDING","FRAMEBUFFER_COMPLETE","FRAMEBUFFER_DEFAULT","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_MULTISAMPLE","FRAMEBUFFER_UNSUPPORTED","FRONT","FRONT_AND_BACK","FRONT_FACE","FUNC_ADD","FUNC_REVERSE_SUBTRACT","FUNC_SUBTRACT","FeaturePolicy","FeaturePolicyViolationReportBody","FederatedCredential","Feed","FeedEntry","Fence","FencedFrameConfig","FetchLaterResult","File","FileError","FileList","FileReader","FileSystem","FileSystemDirectoryEntry","FileSystemDirectoryHandle","FileSystemDirectoryReader","FileSystemEntry","FileSystemFileEntry","FileSystemFileHandle","FileSystemHandle","FileSystemObserver","FileSystemWritableFileStream","FinalizationRegistry","FindInPage","Float16Array","Float32Array","Float64Array","FocusEvent","FontData","FontFace","FontFaceSet","FontFaceSetLoadEvent","FormData","FormDataEvent","FragmentDirective","Function","GENERATE_MIPMAP_HINT","GEQUAL","GPU","GPUAdapter","GPUAdapterInfo","GPUBindGroup","GPUBindGroupLayout","GPUBuffer","GPUBufferUsage","GPUCanvasContext","GPUColorWrite","GPUCommandBuffer","GPUCommandEncoder","GPUCompilationInfo","GPUCompilationMessage","GPUComputePassEncoder","GPUComputePipeline","GPUDevice","GPUDeviceLostInfo","GPUError","GPUExternalTexture","GPUInternalError","GPUMapMode","GPUOutOfMemoryError","GPUPipelineError","GPUPipelineLayout","GPUQuerySet","GPUQueue","GPURenderBundle","GPURenderBundleEncoder","GPURenderPassEncoder","GPURenderPipeline","GPUSampler","GPUShaderModule","GPUShaderStage","GPUSupportedFeatures","GPUSupportedLimits","GPUTexture","GPUTextureUsage","GPUTextureView","GPUUncapturedErrorEvent","GPUValidationError","GREATER","GREEN","GREEN_BITS","GainNode","Gamepad","GamepadAxisMoveEvent","GamepadButton","GamepadButtonEvent","GamepadEvent","GamepadHapticActuator","GamepadPose","Geolocation","GeolocationCoordinates","GeolocationPosition","GeolocationPositionError","GestureEvent","GetInfo","Global","GravitySensor","Gyroscope","HALF_FLOAT","HAVE_CURRENT_DATA","HAVE_ENOUGH_DATA","HAVE_FUTURE_DATA","HAVE_METADATA","HAVE_NOTHING","HEADERS_RECEIVED","HID","HIDConnectionEvent","HIDDEN","HIDDevice","HIDInputReportEvent","HIERARCHY_REQUEST_ERR","HIGHPASS","HIGHSHELF","HIGH_FLOAT","HIGH_INT","HORIZONTAL","HORIZONTAL_AXIS","HRTF","HTMLAllCollection","HTMLAnchorElement","HTMLAppletElement","HTMLAreaElement","HTMLAudioElement","HTMLBRElement","HTMLBaseElement","HTMLBaseFontElement","HTMLBlockquoteElement","HTMLBodyElement","HTMLButtonElement","HTMLCanvasElement","HTMLCollection","HTMLCommandElement","HTMLContentElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDirectoryElement","HTMLDivElement","HTMLDocument","HTMLElement","HTMLEmbedElement","HTMLFencedFrameElement","HTMLFieldSetElement","HTMLFontElement","HTMLFormControlsCollection","HTMLFormElement","HTMLFrameElement","HTMLFrameSetElement","HTMLHRElement","HTMLHeadElement","HTMLHeadingElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLIsIndexElement","HTMLKeygenElement","HTMLLIElement","HTMLLabelElement","HTMLLegendElement","HTMLLinkElement","HTMLMapElement","HTMLMarqueeElement","HTMLMediaElement","HTMLMenuElement","HTMLMenuItemElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLObjectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLOptionsCollection","HTMLOutputElement","HTMLParagraphElement","HTMLParamElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLPropertiesCollection","HTMLQuoteElement","HTMLScriptElement","HTMLSelectElement","HTMLSelectedContentElement","HTMLShadowElement","HTMLSlotElement","HTMLSourceElement","HTMLSpanElement","HTMLStyleElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTemplateElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement","HashChangeEvent","Headers","Highlight","HighlightRegistry","History","Hz","ICE_CHECKING","ICE_CLOSED","ICE_COMPLETED","ICE_CONNECTED","ICE_FAILED","ICE_GATHERING","ICE_WAITING","IDBCursor","IDBCursorWithValue","IDBDatabase","IDBDatabaseException","IDBFactory","IDBFileHandle","IDBFileRequest","IDBIndex","IDBKeyRange","IDBMutableFile","IDBObjectStore","IDBOpenDBRequest","IDBRecord","IDBRequest","IDBTransaction","IDBVersionChangeEvent","IDLE","IIRFilterNode","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","IMPORT_RULE","INCR","INCR_WRAP","INDEX","INDEX_SIZE_ERR","INDIRECT","INT","INTERLEAVED_ATTRIBS","INT_2_10_10_10_REV","INT_SAMPLER_2D","INT_SAMPLER_2D_ARRAY","INT_SAMPLER_3D","INT_SAMPLER_CUBE","INT_VEC2","INT_VEC3","INT_VEC4","INUSE_ATTRIBUTE_ERR","INVALID_ACCESS_ERR","INVALID_CHARACTER_ERR","INVALID_ENUM","INVALID_EXPRESSION_ERR","INVALID_FRAMEBUFFER_OPERATION","INVALID_INDEX","INVALID_MODIFICATION_ERR","INVALID_NODE_TYPE_ERR","INVALID_OPERATION","INVALID_STATE_ERR","INVALID_VALUE","INVERSE_DISTANCE","INVERT","IceCandidate","IconInfo","IdentityCredential","IdentityCredentialError","IdentityProvider","IdleDeadline","IdleDetector","Image","ImageBitmap","ImageBitmapRenderingContext","ImageCapture","ImageData","ImageDataType","ImageDecoder","ImageTrack","ImageTrackList","Infinity","Ink","InputDeviceCapabilities","InputDeviceInfo","InputEvent","InputMethodContext","InstallTrigger","InstallTriggerImpl","Instance","Instant","Int16Array","Int32Array","Int8Array","IntegrityViolationReportBody","Intent","InterestEvent","InternalError","IntersectionObserver","IntersectionObserverEntry","Intl","IsSearchProviderInstalled","Iterator","JSON","JSTag","KEEP","KEYDOWN","KEYFRAMES_RULE","KEYFRAME_RULE","KEYPRESS","KEYUP","KeyEvent","Keyboard","KeyboardEvent","KeyboardLayoutMap","KeyframeEffect","LENGTHADJUST_SPACING","LENGTHADJUST_SPACINGANDGLYPHS","LENGTHADJUST_UNKNOWN","LEQUAL","LESS","LINEAR","LINEAR_DISTANCE","LINEAR_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINES","LINE_LOOP","LINE_STRIP","LINE_WIDTH","LINK_STATUS","LIVE","LN10","LN2","LOADED","LOADING","LOG10E","LOG2E","LOWPASS","LOWSHELF","LOW_FLOAT","LOW_INT","LSException","LSParserFilter","LUMINANCE","LUMINANCE_ALPHA","LanguageCode","LanguageDetector","LargestContentfulPaint","LaunchParams","LaunchQueue","LaunchType","LayoutShift","LayoutShiftAttribution","LinearAccelerationSensor","LinkError","ListFormat","LocalMediaStream","Locale","Location","Lock","LockManager","MAP_READ","MAP_WRITE","MARGIN_RULE","MAX","MAX_3D_TEXTURE_SIZE","MAX_ARRAY_TEXTURE_LAYERS","MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND","MAX_CLIENT_WAIT_TIMEOUT_WEBGL","MAX_COLOR_ATTACHMENTS","MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_COMBINED_UNIFORM_BLOCKS","MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_DRAW_BUFFERS","MAX_ELEMENTS_INDICES","MAX_ELEMENTS_VERTICES","MAX_ELEMENT_INDEX","MAX_FRAGMENT_INPUT_COMPONENTS","MAX_FRAGMENT_UNIFORM_BLOCKS","MAX_FRAGMENT_UNIFORM_COMPONENTS","MAX_FRAGMENT_UNIFORM_VECTORS","MAX_PROGRAM_TEXEL_OFFSET","MAX_RENDERBUFFER_SIZE","MAX_SAFE_INTEGER","MAX_SAMPLES","MAX_SERVER_WAIT_TIMEOUT","MAX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_LOD_BIAS","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_TEXTURE_SIZE","MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS","MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS","MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS","MAX_UNIFORM_BLOCK_SIZE","MAX_UNIFORM_BUFFER_BINDINGS","MAX_VALUE","MAX_VARYING_COMPONENTS","MAX_VARYING_VECTORS","MAX_VERTEX_ATTRIBS","MAX_VERTEX_OUTPUT_COMPONENTS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_BLOCKS","MAX_VERTEX_UNIFORM_COMPONENTS","MAX_VERTEX_UNIFORM_VECTORS","MAX_VIEWPORT_DIMS","MEDIA_ERR_ABORTED","MEDIA_ERR_DECODE","MEDIA_ERR_ENCRYPTED","MEDIA_ERR_NETWORK","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_KEYERR_CLIENT","MEDIA_KEYERR_DOMAIN","MEDIA_KEYERR_HARDWARECHANGE","MEDIA_KEYERR_OUTPUT","MEDIA_KEYERR_SERVICE","MEDIA_KEYERR_UNKNOWN","MEDIA_RULE","MEDIUM_FLOAT","MEDIUM_INT","META_MASK","MIDIAccess","MIDIConnectionEvent","MIDIInput","MIDIInputMap","MIDIMessageEvent","MIDIOutput","MIDIOutputMap","MIDIPort","MIN","MIN_PROGRAM_TEXEL_OFFSET","MIN_SAFE_INTEGER","MIN_VALUE","MIRRORED_REPEAT","MODE_ASYNCHRONOUS","MODE_SYNCHRONOUS","MODIFICATION","MOUSEDOWN","MOUSEDRAG","MOUSEMOVE","MOUSEOUT","MOUSEOVER","MOUSEUP","MOZ_KEYFRAMES_RULE","MOZ_KEYFRAME_RULE","MOZ_SOURCE_CURSOR","MOZ_SOURCE_ERASER","MOZ_SOURCE_KEYBOARD","MOZ_SOURCE_MOUSE","MOZ_SOURCE_PEN","MOZ_SOURCE_TOUCH","MOZ_SOURCE_UNKNOWN","MSGESTURE_FLAG_BEGIN","MSGESTURE_FLAG_CANCEL","MSGESTURE_FLAG_END","MSGESTURE_FLAG_INERTIA","MSGESTURE_FLAG_NONE","MSPOINTER_TYPE_MOUSE","MSPOINTER_TYPE_PEN","MSPOINTER_TYPE_TOUCH","MS_ASYNC_CALLBACK_STATUS_ASSIGN_DELEGATE","MS_ASYNC_CALLBACK_STATUS_CANCEL","MS_ASYNC_CALLBACK_STATUS_CHOOSEANY","MS_ASYNC_CALLBACK_STATUS_ERROR","MS_ASYNC_CALLBACK_STATUS_JOIN","MS_ASYNC_OP_STATUS_CANCELED","MS_ASYNC_OP_STATUS_ERROR","MS_ASYNC_OP_STATUS_SUCCESS","MS_MANIPULATION_STATE_ACTIVE","MS_MANIPULATION_STATE_CANCELLED","MS_MANIPULATION_STATE_COMMITTED","MS_MANIPULATION_STATE_DRAGGING","MS_MANIPULATION_STATE_INERTIA","MS_MANIPULATION_STATE_PRESELECT","MS_MANIPULATION_STATE_SELECTING","MS_MANIPULATION_STATE_STOPPED","MS_MEDIA_ERR_ENCRYPTED","MS_MEDIA_KEYERR_CLIENT","MS_MEDIA_KEYERR_DOMAIN","MS_MEDIA_KEYERR_HARDWARECHANGE","MS_MEDIA_KEYERR_OUTPUT","MS_MEDIA_KEYERR_SERVICE","MS_MEDIA_KEYERR_UNKNOWN","Map","Math","MathMLElement","MediaCapabilities","MediaCapabilitiesInfo","MediaController","MediaDeviceInfo","MediaDevices","MediaElementAudioSourceNode","MediaEncryptedEvent","MediaError","MediaKeyError","MediaKeyEvent","MediaKeyMessageEvent","MediaKeyNeededEvent","MediaKeySession","MediaKeyStatusMap","MediaKeySystemAccess","MediaKeys","MediaList","MediaMetadata","MediaQueryList","MediaQueryListEvent","MediaRecorder","MediaRecorderErrorEvent","MediaSession","MediaSettingsRange","MediaSource","MediaSourceHandle","MediaStream","MediaStreamAudioDestinationNode","MediaStreamAudioSourceNode","MediaStreamEvent","MediaStreamTrack","MediaStreamTrackAudioSourceNode","MediaStreamTrackAudioStats","MediaStreamTrackEvent","MediaStreamTrackGenerator","MediaStreamTrackProcessor","MediaStreamTrackVideoStats","Memory","MessageChannel","MessageEvent","MessagePort","MessageSender","Methods","MimeType","MimeTypeArray","Module","MouseEvent","MouseScrollEvent","MozAnimation","MozAnimationDelay","MozAnimationDirection","MozAnimationDuration","MozAnimationFillMode","MozAnimationIterationCount","MozAnimationName","MozAnimationPlayState","MozAnimationTimingFunction","MozAppearance","MozBackfaceVisibility","MozBinding","MozBorderBottomColors","MozBorderEnd","MozBorderEndColor","MozBorderEndStyle","MozBorderEndWidth","MozBorderImage","MozBorderLeftColors","MozBorderRightColors","MozBorderStart","MozBorderStartColor","MozBorderStartStyle","MozBorderStartWidth","MozBorderTopColors","MozBoxAlign","MozBoxDirection","MozBoxFlex","MozBoxOrdinalGroup","MozBoxOrient","MozBoxPack","MozBoxSizing","MozCSSKeyframeRule","MozCSSKeyframesRule","MozColumnCount","MozColumnFill","MozColumnGap","MozColumnRule","MozColumnRuleColor","MozColumnRuleStyle","MozColumnRuleWidth","MozColumnWidth","MozColumns","MozContactChangeEvent","MozFloatEdge","MozFontFeatureSettings","MozFontLanguageOverride","MozForceBrokenImageIcon","MozHyphens","MozImageRegion","MozMarginEnd","MozMarginStart","MozMmsEvent","MozMmsMessage","MozMobileMessageThread","MozOSXFontSmoothing","MozOrient","MozOsxFontSmoothing","MozOutlineRadius","MozOutlineRadiusBottomleft","MozOutlineRadiusBottomright","MozOutlineRadiusTopleft","MozOutlineRadiusTopright","MozPaddingEnd","MozPaddingStart","MozPerspective","MozPerspectiveOrigin","MozPowerManager","MozSettingsEvent","MozSmsEvent","MozSmsMessage","MozStackSizing","MozTabSize","MozTextAlignLast","MozTextDecorationColor","MozTextDecorationLine","MozTextDecorationStyle","MozTextSizeAdjust","MozTransform","MozTransformOrigin","MozTransformStyle","MozTransition","MozTransitionDelay","MozTransitionDuration","MozTransitionProperty","MozTransitionTimingFunction","MozUserFocus","MozUserInput","MozUserModify","MozUserSelect","MozWindowDragging","MozWindowShadow","MutationEvent","MutationObserver","MutationRecord","MutedInfo","MutedInfoReason","NAMESPACE_ERR","NAMESPACE_RULE","NEAREST","NEAREST_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","NEGATIVE_INFINITY","NETWORK_EMPTY","NETWORK_ERR","NETWORK_IDLE","NETWORK_LOADED","NETWORK_LOADING","NETWORK_NO_SOURCE","NEVER","NEW","NEXT","NEXT_NO_DUPLICATE","NICEST","NODE_AFTER","NODE_BEFORE","NODE_BEFORE_AND_AFTER","NODE_INSIDE","NONE","NON_TRANSIENT_ERR","NOTATION_NODE","NOTCH","NOTEQUAL","NOT_ALLOWED_ERR","NOT_FOUND_ERR","NOT_READABLE_ERR","NOT_SUPPORTED_ERR","NO_DATA_ALLOWED_ERR","NO_ERR","NO_ERROR","NO_MODIFICATION_ALLOWED_ERR","NUMBER_TYPE","NUM_COMPRESSED_TEXTURE_FORMATS","NaN","NamedNodeMap","NavigateEvent","Navigation","NavigationActivation","NavigationCurrentEntryChangeEvent","NavigationDestination","NavigationHistoryEntry","NavigationPrecommitController","NavigationPreloadManager","NavigationTransition","Navigator","NavigatorLogin","NavigatorManagedData","NavigatorUAData","NearbyLinks","NetworkInformation","Node","NodeFilter","NodeIterator","NodeList","NotRestoredReasonDetails","NotRestoredReasons","Notation","Notification","NotifyPaintEvent","Now","Number","NumberFormat","OBJECT_TYPE","OBSOLETE","OK","ONE","ONE_MINUS_CONSTANT_ALPHA","ONE_MINUS_CONSTANT_COLOR","ONE_MINUS_DST_ALPHA","ONE_MINUS_DST_COLOR","ONE_MINUS_SRC_ALPHA","ONE_MINUS_SRC_COLOR","OPEN","OPENED","OPENING","ORDERED_NODE_ITERATOR_TYPE","ORDERED_NODE_SNAPSHOT_TYPE","OTHER_ERROR","OTPCredential","OUT_OF_MEMORY","Object","Observable","OfflineAudioCompletionEvent","OfflineAudioContext","OfflineResourceList","OffscreenCanvas","OffscreenCanvasRenderingContext2D","OnClickData","OnInstalledReason","OnPerformanceWarningCategory","OnPerformanceWarningSeverity","OnRestartRequiredReason","Option","OrientationSensor","OscillatorNode","OverconstrainedError","OverflowEvent","PACK_ALIGNMENT","PACK_ROW_LENGTH","PACK_SKIP_PIXELS","PACK_SKIP_ROWS","PAGE_RULE","PARSE_ERR","PATHSEG_ARC_ABS","PATHSEG_ARC_REL","PATHSEG_CLOSEPATH","PATHSEG_CURVETO_CUBIC_ABS","PATHSEG_CURVETO_CUBIC_REL","PATHSEG_CURVETO_CUBIC_SMOOTH_ABS","PATHSEG_CURVETO_CUBIC_SMOOTH_REL","PATHSEG_CURVETO_QUADRATIC_ABS","PATHSEG_CURVETO_QUADRATIC_REL","PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS","PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL","PATHSEG_LINETO_ABS","PATHSEG_LINETO_HORIZONTAL_ABS","PATHSEG_LINETO_HORIZONTAL_REL","PATHSEG_LINETO_REL","PATHSEG_LINETO_VERTICAL_ABS","PATHSEG_LINETO_VERTICAL_REL","PATHSEG_MOVETO_ABS","PATHSEG_MOVETO_REL","PATHSEG_UNKNOWN","PATH_EXISTS_ERR","PEAKING","PERMISSION_DENIED","PERSISTENT","PI","PIXEL_PACK_BUFFER","PIXEL_PACK_BUFFER_BINDING","PIXEL_UNPACK_BUFFER","PIXEL_UNPACK_BUFFER_BINDING","PLAYING_STATE","POINTS","POLYGON_OFFSET_FACTOR","POLYGON_OFFSET_FILL","POLYGON_OFFSET_UNITS","POSITION_UNAVAILABLE","POSITIVE_INFINITY","PREV","PREV_NO_DUPLICATE","PROCESSING_INSTRUCTION_NODE","PageChangeEvent","PageRevealEvent","PageSettings","PageSwapEvent","PageTransitionEvent","PaintRequest","PaintRequestList","PannerNode","PasswordCredential","Path2D","PaymentAddress","PaymentInstruments","PaymentManager","PaymentMethodChangeEvent","PaymentRequest","PaymentRequestUpdateEvent","PaymentResponse","Performance","PerformanceElementTiming","PerformanceEntry","PerformanceEventTiming","PerformanceLongAnimationFrameTiming","PerformanceLongTaskTiming","PerformanceMark","PerformanceMeasure","PerformanceNavigation","PerformanceNavigationTiming","PerformanceObserver","PerformanceObserverEntryList","PerformancePaintTiming","PerformanceResourceTiming","PerformanceScriptTiming","PerformanceServerTiming","PerformanceTiming","PeriodicSyncManager","PeriodicWave","PermissionStatus","Permissions","PhotoCapabilities","PictureInPictureEvent","PictureInPictureWindow","PlainDate","PlainDateTime","PlainMonthDay","PlainTime","PlainYearMonth","PlatformArch","PlatformInfo","PlatformNaclArch","PlatformOs","Plugin","PluginArray","PluralRules","PointerEvent","PopStateEvent","PopupBlockedEvent","Port","Presentation","PresentationAvailability","PresentationConnection","PresentationConnectionAvailableEvent","PresentationConnectionCloseEvent","PresentationConnectionList","PresentationReceiver","PresentationRequest","PressureObserver","PressureRecord","ProcessingInstruction","Profiler","ProgressEvent","Promise","PromiseRejectionEvent","PropertyNodeList","ProtectedAudience","Proxy","PublicKeyCredential","PushManager","PushSubscription","PushSubscriptionOptions","Q","QUERY_RESOLVE","QUERY_RESULT","QUERY_RESULT_AVAILABLE","QUOTA_ERR","QUOTA_EXCEEDED_ERR","QueryInterface","QuotaExceededError","R11F_G11F_B10F","R16F","R16I","R16UI","R32F","R32I","R32UI","R8","R8I","R8UI","R8_SNORM","RASTERIZER_DISCARD","READ","READ_BUFFER","READ_FRAMEBUFFER","READ_FRAMEBUFFER_BINDING","READ_ONLY","READ_ONLY_ERR","READ_WRITE","RED","RED_BITS","RED_INTEGER","REMOVAL","RENDERBUFFER","RENDERBUFFER_ALPHA_SIZE","RENDERBUFFER_BINDING","RENDERBUFFER_BLUE_SIZE","RENDERBUFFER_DEPTH_SIZE","RENDERBUFFER_GREEN_SIZE","RENDERBUFFER_HEIGHT","RENDERBUFFER_INTERNAL_FORMAT","RENDERBUFFER_RED_SIZE","RENDERBUFFER_SAMPLES","RENDERBUFFER_STENCIL_SIZE","RENDERBUFFER_WIDTH","RENDERER","RENDERING_INTENT_ABSOLUTE_COLORIMETRIC","RENDERING_INTENT_AUTO","RENDERING_INTENT_PERCEPTUAL","RENDERING_INTENT_RELATIVE_COLORIMETRIC","RENDERING_INTENT_SATURATION","RENDERING_INTENT_UNKNOWN","RENDER_ATTACHMENT","REPEAT","REPLACE","RG","RG16F","RG16I","RG16UI","RG32F","RG32I","RG32UI","RG8","RG8I","RG8UI","RG8_SNORM","RGB","RGB10_A2","RGB10_A2UI","RGB16F","RGB16I","RGB16UI","RGB32F","RGB32I","RGB32UI","RGB565","RGB5_A1","RGB8","RGB8I","RGB8UI","RGB8_SNORM","RGB9_E5","RGBA","RGBA16F","RGBA16I","RGBA16UI","RGBA32F","RGBA32I","RGBA32UI","RGBA4","RGBA8","RGBA8I","RGBA8UI","RGBA8_SNORM","RGBA_INTEGER","RGBColor","RGB_INTEGER","RG_INTEGER","ROTATION_CLOCKWISE","ROTATION_COUNTERCLOCKWISE","RTCCertificate","RTCDTMFSender","RTCDTMFToneChangeEvent","RTCDataChannel","RTCDataChannelEvent","RTCDtlsTransport","RTCEncodedAudioFrame","RTCEncodedVideoFrame","RTCError","RTCErrorEvent","RTCIceCandidate","RTCIceTransport","RTCPeerConnection","RTCPeerConnectionIceErrorEvent","RTCPeerConnectionIceEvent","RTCRtpReceiver","RTCRtpScriptTransform","RTCRtpSender","RTCRtpTransceiver","RTCSctpTransport","RTCSessionDescription","RTCStatsReport","RTCTrackEvent","RadioNodeList","Range","RangeError","RangeException","ReadableByteStreamController","ReadableStream","ReadableStreamBYOBReader","ReadableStreamBYOBRequest","ReadableStreamDefaultController","ReadableStreamDefaultReader","RecordErrorEvent","Rect","ReferenceError","Reflect","RegExp","RelativeOrientationSensor","RelativeTimeFormat","RemotePlayback","Report","ReportBody","ReportingObserver","Request","RequestUpdateCheckStatus","ResizeObserver","ResizeObserverEntry","ResizeObserverSize","Response","RestrictionTarget","RuntimeError","SAMPLER_2D","SAMPLER_2D_ARRAY","SAMPLER_2D_ARRAY_SHADOW","SAMPLER_2D_SHADOW","SAMPLER_3D","SAMPLER_BINDING","SAMPLER_CUBE","SAMPLER_CUBE_SHADOW","SAMPLES","SAMPLE_ALPHA_TO_COVERAGE","SAMPLE_BUFFERS","SAMPLE_COVERAGE","SAMPLE_COVERAGE_INVERT","SAMPLE_COVERAGE_VALUE","SAWTOOTH","SCHEDULED_STATE","SCISSOR_BOX","SCISSOR_TEST","SCROLL_PAGE_DOWN","SCROLL_PAGE_UP","SDP_ANSWER","SDP_OFFER","SDP_PRANSWER","SECURITY_ERR","SELECT","SEPARATE_ATTRIBS","SERIALIZE_ERR","SEVERITY_ERROR","SEVERITY_FATAL_ERROR","SEVERITY_WARNING","SHADER_COMPILER","SHADER_TYPE","SHADING_LANGUAGE_VERSION","SHIFT_MASK","SHORT","SHOWING","SHOW_ALL","SHOW_ATTRIBUTE","SHOW_CDATA_SECTION","SHOW_COMMENT","SHOW_DOCUMENT","SHOW_DOCUMENT_FRAGMENT","SHOW_DOCUMENT_TYPE","SHOW_ELEMENT","SHOW_ENTITY","SHOW_ENTITY_REFERENCE","SHOW_NOTATION","SHOW_PROCESSING_INSTRUCTION","SHOW_TEXT","SIGNALED","SIGNED_NORMALIZED","SINE","SOUNDFIELD","SQLException","SQRT1_2","SQRT2","SQUARE","SRC_ALPHA","SRC_ALPHA_SATURATE","SRC_COLOR","SRGB","SRGB8","SRGB8_ALPHA8","START_TO_END","START_TO_START","STATIC_COPY","STATIC_DRAW","STATIC_READ","STENCIL","STENCIL_ATTACHMENT","STENCIL_BACK_FAIL","STENCIL_BACK_FUNC","STENCIL_BACK_PASS_DEPTH_FAIL","STENCIL_BACK_PASS_DEPTH_PASS","STENCIL_BACK_REF","STENCIL_BACK_VALUE_MASK","STENCIL_BACK_WRITEMASK","STENCIL_BITS","STENCIL_BUFFER_BIT","STENCIL_CLEAR_VALUE","STENCIL_FAIL","STENCIL_FUNC","STENCIL_INDEX","STENCIL_INDEX8","STENCIL_PASS_DEPTH_FAIL","STENCIL_PASS_DEPTH_PASS","STENCIL_REF","STENCIL_TEST","STENCIL_VALUE_MASK","STENCIL_WRITEMASK","STORAGE","STORAGE_BINDING","STREAM_COPY","STREAM_DRAW","STREAM_READ","STRING_TYPE","STYLE_RULE","SUBPIXEL_BITS","SUPPORTS_RULE","SVGAElement","SVGAltGlyphDefElement","SVGAltGlyphElement","SVGAltGlyphItemElement","SVGAngle","SVGAnimateColorElement","SVGAnimateElement","SVGAnimateMotionElement","SVGAnimateTransformElement","SVGAnimatedAngle","SVGAnimatedBoolean","SVGAnimatedEnumeration","SVGAnimatedInteger","SVGAnimatedLength","SVGAnimatedLengthList","SVGAnimatedNumber","SVGAnimatedNumberList","SVGAnimatedPreserveAspectRatio","SVGAnimatedRect","SVGAnimatedString","SVGAnimatedTransformList","SVGAnimationElement","SVGCircleElement","SVGClipPathElement","SVGColor","SVGComponentTransferFunctionElement","SVGCursorElement","SVGDefsElement","SVGDescElement","SVGDiscardElement","SVGDocument","SVGElement","SVGElementInstance","SVGElementInstanceList","SVGEllipseElement","SVGException","SVGFEBlendElement","SVGFEColorMatrixElement","SVGFEComponentTransferElement","SVGFECompositeElement","SVGFEConvolveMatrixElement","SVGFEDiffuseLightingElement","SVGFEDisplacementMapElement","SVGFEDistantLightElement","SVGFEDropShadowElement","SVGFEFloodElement","SVGFEFuncAElement","SVGFEFuncBElement","SVGFEFuncGElement","SVGFEFuncRElement","SVGFEGaussianBlurElement","SVGFEImageElement","SVGFEMergeElement","SVGFEMergeNodeElement","SVGFEMorphologyElement","SVGFEOffsetElement","SVGFEPointLightElement","SVGFESpecularLightingElement","SVGFESpotLightElement","SVGFETileElement","SVGFETurbulenceElement","SVGFilterElement","SVGFontElement","SVGFontFaceElement","SVGFontFaceFormatElement","SVGFontFaceNameElement","SVGFontFaceSrcElement","SVGFontFaceUriElement","SVGForeignObjectElement","SVGGElement","SVGGeometryElement","SVGGlyphElement","SVGGlyphRefElement","SVGGradientElement","SVGGraphicsElement","SVGHKernElement","SVGImageElement","SVGLength","SVGLengthList","SVGLineElement","SVGLinearGradientElement","SVGMPathElement","SVGMarkerElement","SVGMaskElement","SVGMatrix","SVGMetadataElement","SVGMissingGlyphElement","SVGNumber","SVGNumberList","SVGPaint","SVGPathElement","SVGPathSeg","SVGPathSegArcAbs","SVGPathSegArcRel","SVGPathSegClosePath","SVGPathSegCurvetoCubicAbs","SVGPathSegCurvetoCubicRel","SVGPathSegCurvetoCubicSmoothAbs","SVGPathSegCurvetoCubicSmoothRel","SVGPathSegCurvetoQuadraticAbs","SVGPathSegCurvetoQuadraticRel","SVGPathSegCurvetoQuadraticSmoothAbs","SVGPathSegCurvetoQuadraticSmoothRel","SVGPathSegLinetoAbs","SVGPathSegLinetoHorizontalAbs","SVGPathSegLinetoHorizontalRel","SVGPathSegLinetoRel","SVGPathSegLinetoVerticalAbs","SVGPathSegLinetoVerticalRel","SVGPathSegList","SVGPathSegMovetoAbs","SVGPathSegMovetoRel","SVGPatternElement","SVGPoint","SVGPointList","SVGPolygonElement","SVGPolylineElement","SVGPreserveAspectRatio","SVGRadialGradientElement","SVGRect","SVGRectElement","SVGRenderingIntent","SVGSVGElement","SVGScriptElement","SVGSetElement","SVGStopElement","SVGStringList","SVGStyleElement","SVGSwitchElement","SVGSymbolElement","SVGTRefElement","SVGTSpanElement","SVGTextContentElement","SVGTextElement","SVGTextPathElement","SVGTextPositioningElement","SVGTitleElement","SVGTransform","SVGTransformList","SVGUnitTypes","SVGUseElement","SVGVKernElement","SVGViewElement","SVGViewSpec","SVGZoomAndPan","SVGZoomEvent","SVG_ANGLETYPE_DEG","SVG_ANGLETYPE_GRAD","SVG_ANGLETYPE_RAD","SVG_ANGLETYPE_UNKNOWN","SVG_ANGLETYPE_UNSPECIFIED","SVG_CHANNEL_A","SVG_CHANNEL_B","SVG_CHANNEL_G","SVG_CHANNEL_R","SVG_CHANNEL_UNKNOWN","SVG_COLORTYPE_CURRENTCOLOR","SVG_COLORTYPE_RGBCOLOR","SVG_COLORTYPE_RGBCOLOR_ICCCOLOR","SVG_COLORTYPE_UNKNOWN","SVG_EDGEMODE_DUPLICATE","SVG_EDGEMODE_NONE","SVG_EDGEMODE_UNKNOWN","SVG_EDGEMODE_WRAP","SVG_FEBLEND_MODE_COLOR","SVG_FEBLEND_MODE_COLOR_BURN","SVG_FEBLEND_MODE_COLOR_DODGE","SVG_FEBLEND_MODE_DARKEN","SVG_FEBLEND_MODE_DIFFERENCE","SVG_FEBLEND_MODE_EXCLUSION","SVG_FEBLEND_MODE_HARD_LIGHT","SVG_FEBLEND_MODE_HUE","SVG_FEBLEND_MODE_LIGHTEN","SVG_FEBLEND_MODE_LUMINOSITY","SVG_FEBLEND_MODE_MULTIPLY","SVG_FEBLEND_MODE_NORMAL","SVG_FEBLEND_MODE_OVERLAY","SVG_FEBLEND_MODE_SATURATION","SVG_FEBLEND_MODE_SCREEN","SVG_FEBLEND_MODE_SOFT_LIGHT","SVG_FEBLEND_MODE_UNKNOWN","SVG_FECOLORMATRIX_TYPE_HUEROTATE","SVG_FECOLORMATRIX_TYPE_LUMINANCETOALPHA","SVG_FECOLORMATRIX_TYPE_MATRIX","SVG_FECOLORMATRIX_TYPE_SATURATE","SVG_FECOLORMATRIX_TYPE_UNKNOWN","SVG_FECOMPONENTTRANSFER_TYPE_DISCRETE","SVG_FECOMPONENTTRANSFER_TYPE_GAMMA","SVG_FECOMPONENTTRANSFER_TYPE_IDENTITY","SVG_FECOMPONENTTRANSFER_TYPE_LINEAR","SVG_FECOMPONENTTRANSFER_TYPE_TABLE","SVG_FECOMPONENTTRANSFER_TYPE_UNKNOWN","SVG_FECOMPOSITE_OPERATOR_ARITHMETIC","SVG_FECOMPOSITE_OPERATOR_ATOP","SVG_FECOMPOSITE_OPERATOR_IN","SVG_FECOMPOSITE_OPERATOR_LIGHTER","SVG_FECOMPOSITE_OPERATOR_OUT","SVG_FECOMPOSITE_OPERATOR_OVER","SVG_FECOMPOSITE_OPERATOR_UNKNOWN","SVG_FECOMPOSITE_OPERATOR_XOR","SVG_INVALID_VALUE_ERR","SVG_LENGTHTYPE_CM","SVG_LENGTHTYPE_EMS","SVG_LENGTHTYPE_EXS","SVG_LENGTHTYPE_IN","SVG_LENGTHTYPE_MM","SVG_LENGTHTYPE_NUMBER","SVG_LENGTHTYPE_PC","SVG_LENGTHTYPE_PERCENTAGE","SVG_LENGTHTYPE_PT","SVG_LENGTHTYPE_PX","SVG_LENGTHTYPE_UNKNOWN","SVG_MARKERUNITS_STROKEWIDTH","SVG_MARKERUNITS_UNKNOWN","SVG_MARKERUNITS_USERSPACEONUSE","SVG_MARKER_ORIENT_ANGLE","SVG_MARKER_ORIENT_AUTO","SVG_MARKER_ORIENT_AUTO_START_REVERSE","SVG_MARKER_ORIENT_UNKNOWN","SVG_MASKTYPE_ALPHA","SVG_MASKTYPE_LUMINANCE","SVG_MATRIX_NOT_INVERTABLE","SVG_MEETORSLICE_MEET","SVG_MEETORSLICE_SLICE","SVG_MEETORSLICE_UNKNOWN","SVG_MORPHOLOGY_OPERATOR_DILATE","SVG_MORPHOLOGY_OPERATOR_ERODE","SVG_MORPHOLOGY_OPERATOR_UNKNOWN","SVG_PAINTTYPE_CURRENTCOLOR","SVG_PAINTTYPE_NONE","SVG_PAINTTYPE_RGBCOLOR","SVG_PAINTTYPE_RGBCOLOR_ICCCOLOR","SVG_PAINTTYPE_UNKNOWN","SVG_PAINTTYPE_URI","SVG_PAINTTYPE_URI_CURRENTCOLOR","SVG_PAINTTYPE_URI_NONE","SVG_PAINTTYPE_URI_RGBCOLOR","SVG_PAINTTYPE_URI_RGBCOLOR_ICCCOLOR","SVG_PRESERVEASPECTRATIO_NONE","SVG_PRESERVEASPECTRATIO_UNKNOWN","SVG_PRESERVEASPECTRATIO_XMAXYMAX","SVG_PRESERVEASPECTRATIO_XMAXYMID","SVG_PRESERVEASPECTRATIO_XMAXYMIN","SVG_PRESERVEASPECTRATIO_XMIDYMAX","SVG_PRESERVEASPECTRATIO_XMIDYMID","SVG_PRESERVEASPECTRATIO_XMIDYMIN","SVG_PRESERVEASPECTRATIO_XMINYMAX","SVG_PRESERVEASPECTRATIO_XMINYMID","SVG_PRESERVEASPECTRATIO_XMINYMIN","SVG_SPREADMETHOD_PAD","SVG_SPREADMETHOD_REFLECT","SVG_SPREADMETHOD_REPEAT","SVG_SPREADMETHOD_UNKNOWN","SVG_STITCHTYPE_NOSTITCH","SVG_STITCHTYPE_STITCH","SVG_STITCHTYPE_UNKNOWN","SVG_TRANSFORM_MATRIX","SVG_TRANSFORM_ROTATE","SVG_TRANSFORM_SCALE","SVG_TRANSFORM_SKEWX","SVG_TRANSFORM_SKEWY","SVG_TRANSFORM_TRANSLATE","SVG_TRANSFORM_UNKNOWN","SVG_TURBULENCE_TYPE_FRACTALNOISE","SVG_TURBULENCE_TYPE_TURBULENCE","SVG_TURBULENCE_TYPE_UNKNOWN","SVG_UNIT_TYPE_OBJECTBOUNDINGBOX","SVG_UNIT_TYPE_UNKNOWN","SVG_UNIT_TYPE_USERSPACEONUSE","SVG_WRONG_TYPE_ERR","SVG_ZOOMANDPAN_DISABLE","SVG_ZOOMANDPAN_MAGNIFY","SVG_ZOOMANDPAN_UNKNOWN","SYNC_CONDITION","SYNC_FENCE","SYNC_FLAGS","SYNC_FLUSH_COMMANDS_BIT","SYNC_GPU_COMMANDS_COMPLETE","SYNC_STATUS","SYNTAX_ERR","SavedPages","Scheduler","Scheduling","Screen","ScreenDetailed","ScreenDetails","ScreenOrientation","Script","ScriptProcessorNode","ScrollAreaEvent","ScrollTimeline","SecurityPolicyViolationEvent","Segmenter","Selection","Sensor","SensorErrorEvent","Serial","SerialPort","ServiceWorker","ServiceWorkerContainer","ServiceWorkerRegistration","SessionDescription","Set","ShadowRoot","SharedArrayBuffer","SharedStorage","SharedStorageAppendMethod","SharedStorageClearMethod","SharedStorageDeleteMethod","SharedStorageModifierMethod","SharedStorageSetMethod","SharedStorageWorklet","SharedWorker","SharingState","SimpleGestureEvent","SnapEvent","SourceBuffer","SourceBufferList","SpeechGrammar","SpeechGrammarList","SpeechRecognition","SpeechRecognitionErrorEvent","SpeechRecognitionEvent","SpeechRecognitionPhrase","SpeechSynthesis","SpeechSynthesisErrorEvent","SpeechSynthesisEvent","SpeechSynthesisUtterance","SpeechSynthesisVoice","StaticRange","StereoPannerNode","StopIteration","Storage","StorageBucket","StorageBucketManager","StorageEvent","StorageManager","String","StructType","StylePropertyMap","StylePropertyMapReadOnly","StyleSheet","StyleSheetList","SubmitEvent","Subscriber","SubtleCrypto","Summarizer","SuppressedError","SuspendError","Suspending","Symbol","SyncManager","SyntaxError","TAB_ID_NONE","TAB_INDEX_NONE","TEMPORARY","TEXTPATH_METHODTYPE_ALIGN","TEXTPATH_METHODTYPE_STRETCH","TEXTPATH_METHODTYPE_UNKNOWN","TEXTPATH_SPACINGTYPE_AUTO","TEXTPATH_SPACINGTYPE_EXACT","TEXTPATH_SPACINGTYPE_UNKNOWN","TEXTURE","TEXTURE0","TEXTURE1","TEXTURE10","TEXTURE11","TEXTURE12","TEXTURE13","TEXTURE14","TEXTURE15","TEXTURE16","TEXTURE17","TEXTURE18","TEXTURE19","TEXTURE2","TEXTURE20","TEXTURE21","TEXTURE22","TEXTURE23","TEXTURE24","TEXTURE25","TEXTURE26","TEXTURE27","TEXTURE28","TEXTURE29","TEXTURE3","TEXTURE30","TEXTURE31","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","TEXTURE9","TEXTURE_2D","TEXTURE_2D_ARRAY","TEXTURE_3D","TEXTURE_BASE_LEVEL","TEXTURE_BINDING","TEXTURE_BINDING_2D","TEXTURE_BINDING_2D_ARRAY","TEXTURE_BINDING_3D","TEXTURE_BINDING_CUBE_MAP","TEXTURE_COMPARE_FUNC","TEXTURE_COMPARE_MODE","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Z","TEXTURE_CUBE_MAP_POSITIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_IMMUTABLE_FORMAT","TEXTURE_IMMUTABLE_LEVELS","TEXTURE_MAG_FILTER","TEXTURE_MAX_ANISOTROPY_EXT","TEXTURE_MAX_LEVEL","TEXTURE_MAX_LOD","TEXTURE_MIN_FILTER","TEXTURE_MIN_LOD","TEXTURE_WRAP_R","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXT_NODE","TIMEOUT","TIMEOUT_ERR","TIMEOUT_EXPIRED","TIMEOUT_IGNORED","TOO_LARGE_ERR","TRANSACTION_INACTIVE_ERR","TRANSFORM_FEEDBACK","TRANSFORM_FEEDBACK_ACTIVE","TRANSFORM_FEEDBACK_BINDING","TRANSFORM_FEEDBACK_BUFFER","TRANSFORM_FEEDBACK_BUFFER_BINDING","TRANSFORM_FEEDBACK_BUFFER_MODE","TRANSFORM_FEEDBACK_BUFFER_SIZE","TRANSFORM_FEEDBACK_BUFFER_START","TRANSFORM_FEEDBACK_PAUSED","TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","TRANSFORM_FEEDBACK_VARYINGS","TRIANGLE","TRIANGLES","TRIANGLE_FAN","TRIANGLE_STRIP","TYPE_BACK_FORWARD","TYPE_ERR","TYPE_MISMATCH_ERR","TYPE_NAVIGATE","TYPE_RELOAD","TYPE_RESERVED","Tab","TabStatus","Table","Tag","TaskAttributionTiming","TaskController","TaskPriorityChangeEvent","TaskSignal","Temporal","Text","TextDecoder","TextDecoderStream","TextEncoder","TextEncoderStream","TextEvent","TextFormat","TextFormatUpdateEvent","TextMetrics","TextTrack","TextTrackCue","TextTrackCueList","TextTrackList","TextUpdateEvent","TimeEvent","TimeRanges","ToggleEvent","Touch","TouchEvent","TouchList","TrackEvent","TransformStream","TransformStreamDefaultController","TransitionEvent","Translator","TreeWalker","TrustedHTML","TrustedScript","TrustedScriptURL","TrustedTypePolicy","TrustedTypePolicyFactory","TypeError","TypedObject","U2F","UIEvent","UNCACHED","UNIFORM","UNIFORM_ARRAY_STRIDE","UNIFORM_BLOCK_ACTIVE_UNIFORMS","UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES","UNIFORM_BLOCK_BINDING","UNIFORM_BLOCK_DATA_SIZE","UNIFORM_BLOCK_INDEX","UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER","UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER","UNIFORM_BUFFER","UNIFORM_BUFFER_BINDING","UNIFORM_BUFFER_OFFSET_ALIGNMENT","UNIFORM_BUFFER_SIZE","UNIFORM_BUFFER_START","UNIFORM_IS_ROW_MAJOR","UNIFORM_MATRIX_STRIDE","UNIFORM_OFFSET","UNIFORM_SIZE","UNIFORM_TYPE","UNKNOWN_ERR","UNKNOWN_RULE","UNMASKED_RENDERER_WEBGL","UNMASKED_VENDOR_WEBGL","UNORDERED_NODE_ITERATOR_TYPE","UNORDERED_NODE_SNAPSHOT_TYPE","UNPACK_ALIGNMENT","UNPACK_COLORSPACE_CONVERSION_WEBGL","UNPACK_FLIP_Y_WEBGL","UNPACK_IMAGE_HEIGHT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ROW_LENGTH","UNPACK_SKIP_IMAGES","UNPACK_SKIP_PIXELS","UNPACK_SKIP_ROWS","UNSCHEDULED_STATE","UNSENT","UNSIGNALED","UNSIGNED_BYTE","UNSIGNED_INT","UNSIGNED_INT_10F_11F_11F_REV","UNSIGNED_INT_24_8","UNSIGNED_INT_2_10_10_10_REV","UNSIGNED_INT_5_9_9_9_REV","UNSIGNED_INT_SAMPLER_2D","UNSIGNED_INT_SAMPLER_2D_ARRAY","UNSIGNED_INT_SAMPLER_3D","UNSIGNED_INT_SAMPLER_CUBE","UNSIGNED_INT_VEC2","UNSIGNED_INT_VEC3","UNSIGNED_INT_VEC4","UNSIGNED_NORMALIZED","UNSIGNED_SHORT","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","UNSPECIFIED_EVENT_TYPE_ERR","UPDATEREADY","URIError","URL","URLPattern","URLSearchParams","URLUnencoded","URL_MISMATCH_ERR","USB","USBAlternateInterface","USBConfiguration","USBConnectionEvent","USBDevice","USBEndpoint","USBInTransferResult","USBInterface","USBIsochronousInTransferPacket","USBIsochronousInTransferResult","USBIsochronousOutTransferPacket","USBIsochronousOutTransferResult","USBOutTransferResult","UTC","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","UpdateFilter","UpdatePropertyName","UserActivation","UserMessageHandler","UserMessageHandlersNamespace","UserProximityEvent","VALIDATE_STATUS","VALIDATION_ERR","VARIABLES_RULE","VENDOR","VERSION","VERSION_CHANGE","VERSION_ERR","VERTEX","VERTEX_ARRAY_BINDING","VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","VERTEX_ATTRIB_ARRAY_DIVISOR","VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE","VERTEX_ATTRIB_ARRAY_ENABLED","VERTEX_ATTRIB_ARRAY_INTEGER","VERTEX_ATTRIB_ARRAY_NORMALIZED","VERTEX_ATTRIB_ARRAY_POINTER","VERTEX_ATTRIB_ARRAY_SIZE","VERTEX_ATTRIB_ARRAY_STRIDE","VERTEX_ATTRIB_ARRAY_TYPE","VERTEX_SHADER","VERTICAL","VERTICAL_AXIS","VER_ERR","VIEWPORT","VIEWPORT_RULE","VRDisplay","VRDisplayCapabilities","VRDisplayEvent","VREyeParameters","VRFieldOfView","VRFrameData","VRPose","VRStageParameters","VTTCue","VTTRegion","ValidityState","VideoColorSpace","VideoDecoder","VideoEncoder","VideoFrame","VideoPlaybackQuality","VideoStreamTrack","ViewTimeline","ViewTransition","ViewTransitionTypeSet","ViewType","Viewport","VirtualKeyboard","VirtualKeyboardGeometryChangeEvent","VisibilityStateEntry","VisualViewport","WAIT_FAILED","WEBKIT_FILTER_RULE","WEBKIT_KEYFRAMES_RULE","WEBKIT_KEYFRAME_RULE","WEBKIT_REGION_RULE","WGSLLanguageFeatures","WINDOW_ID_CURRENT","WINDOW_ID_NONE","WRITE","WRONG_DOCUMENT_ERR","WakeLock","WakeLockSentinel","WasmAnyRef","WaveShaperNode","WeakMap","WeakRef","WeakSet","WebAssembly","WebGL2RenderingContext","WebGLActiveInfo","WebGLBuffer","WebGLContextEvent","WebGLFramebuffer","WebGLObject","WebGLProgram","WebGLQuery","WebGLRenderbuffer","WebGLRenderingContext","WebGLSampler","WebGLShader","WebGLShaderPrecisionFormat","WebGLSync","WebGLTexture","WebGLTransformFeedback","WebGLUniformLocation","WebGLVertexArray","WebGLVertexArrayObject","WebKitAnimationEvent","WebKitBlobBuilder","WebKitCSSFilterRule","WebKitCSSFilterValue","WebKitCSSKeyframeRule","WebKitCSSKeyframesRule","WebKitCSSMatrix","WebKitCSSRegionRule","WebKitCSSTransformValue","WebKitDataCue","WebKitGamepad","WebKitMediaKeyError","WebKitMediaKeyMessageEvent","WebKitMediaKeySession","WebKitMediaKeys","WebKitMediaSource","WebKitMutationObserver","WebKitNamespace","WebKitPlaybackTargetAvailabilityEvent","WebKitPoint","WebKitShadowRoot","WebKitSourceBuffer","WebKitSourceBufferList","WebKitTransitionEvent","WebSocket","WebSocketError","WebSocketStream","WebTransport","WebTransportBidirectionalStream","WebTransportDatagramDuplexStream","WebTransportError","WebTransportReceiveStream","WebTransportSendStream","WebkitAlignContent","WebkitAlignItems","WebkitAlignSelf","WebkitAnimation","WebkitAnimationDelay","WebkitAnimationDirection","WebkitAnimationDuration","WebkitAnimationFillMode","WebkitAnimationIterationCount","WebkitAnimationName","WebkitAnimationPlayState","WebkitAnimationTimingFunction","WebkitAppearance","WebkitBackfaceVisibility","WebkitBackgroundClip","WebkitBackgroundOrigin","WebkitBackgroundSize","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius","WebkitBorderImage","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBoxAlign","WebkitBoxDirection","WebkitBoxFlex","WebkitBoxOrdinalGroup","WebkitBoxOrient","WebkitBoxPack","WebkitBoxShadow","WebkitBoxSizing","WebkitClipPath","WebkitFilter","WebkitFlex","WebkitFlexBasis","WebkitFlexDirection","WebkitFlexFlow","WebkitFlexGrow","WebkitFlexShrink","WebkitFlexWrap","WebkitFontFeatureSettings","WebkitJustifyContent","WebkitLineClamp","WebkitMask","WebkitMaskClip","WebkitMaskComposite","WebkitMaskImage","WebkitMaskOrigin","WebkitMaskPosition","WebkitMaskPositionX","WebkitMaskPositionY","WebkitMaskRepeat","WebkitMaskSize","WebkitOrder","WebkitPerspective","WebkitPerspectiveOrigin","WebkitTextFillColor","WebkitTextSecurity","WebkitTextSizeAdjust","WebkitTextStroke","WebkitTextStrokeColor","WebkitTextStrokeWidth","WebkitTransform","WebkitTransformOrigin","WebkitTransformStyle","WebkitTransition","WebkitTransitionDelay","WebkitTransitionDuration","WebkitTransitionProperty","WebkitTransitionTimingFunction","WebkitUserSelect","WheelEvent","Window","WindowControlsOverlay","WindowControlsOverlayGeometryChangeEvent","WindowState","WindowType","Worker","Worklet","WritableStream","WritableStreamDefaultController","WritableStreamDefaultWriter","XMLDocument","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestException","XMLHttpRequestProgressEvent","XMLHttpRequestUpload","XMLSerializer","XMLStylesheetProcessingInstruction","XPathEvaluator","XPathException","XPathExpression","XPathNSResolver","XPathResult","XRAnchor","XRAnchorSet","XRBoundedReferenceSpace","XRCPUDepthInformation","XRCamera","XRDOMOverlayState","XRDepthInformation","XRFrame","XRHand","XRHitTestResult","XRHitTestSource","XRInputSource","XRInputSourceArray","XRInputSourceEvent","XRInputSourcesChangeEvent","XRJointPose","XRJointSpace","XRLayer","XRLightEstimate","XRLightProbe","XRPose","XRRay","XRReferenceSpace","XRReferenceSpaceEvent","XRRenderState","XRRigidTransform","XRSession","XRSessionEvent","XRSpace","XRSystem","XRTransientInputHitTestResult","XRTransientInputHitTestSource","XRView","XRViewerPose","XRViewport","XRWebGLBinding","XRWebGLDepthInformation","XRWebGLLayer","XSLTProcessor","ZERO","ZonedDateTime","ZoomSettings","ZoomSettingsMode","ZoomSettingsScope","_XD0M_","_YD0M_","__REACT_DEVTOOLS_GLOBAL_HOOK__","__brand","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__opera","__proto__","_browserjsran","a","aLink","abbr","abort","aborted","aboutConfigPrefs","abs","absolute","acceleration","accelerationIncludingGravity","accelerator","accent-color","accentColor","accept","acceptCharset","acceptNode","access","accessKey","accessKeyLabel","accuracy","acos","acosh","action","actionURL","actions","activated","activation","activationStart","active","activeCues","activeElement","activeSourceBuffers","activeSourceCount","activeTexture","activeVRDisplays","activeViewTransition","activityLog","actualBoundingBoxAscent","actualBoundingBoxDescent","actualBoundingBoxLeft","actualBoundingBoxRight","adAuctionComponents","adAuctionHeaders","adapterInfo","add","addAll","addBehavior","addCandidate","addColorStop","addCue","addElement","addEventListener","addFilter","addFromString","addFromUri","addIceCandidate","addImport","addListener","addModule","addNamed","addPageRule","addPath","addPointer","addRange","addRegion","addRule","addSearchEngine","addSourceBuffer","addStream","addTeardown","addTextTrack","addTrack","addTransceiver","addWakeLockListener","added","addedNodes","additionalName","additiveSymbols","addons","address","addressLine","addressModeU","addressModeV","addressModeW","adopt","adoptNode","adoptedCallback","adoptedStyleSheets","adr","advance","after","alarms","album","alert","algorithm","align","align-content","align-items","align-self","alignContent","alignItems","alignSelf","alignmentBaseline","alinkColor","all","allSettled","allocationSize","allow","allowFullscreen","allowPaymentRequest","allowedDirections","allowedFeatures","allowedToPlay","allowsFeature","alpha","alphaMode","alphaToCoverageEnabled","alphabeticBaseline","alt","altGraphKey","altHtml","altKey","altLeft","alternate","alternateSetting","alternates","altitude","altitudeAccuracy","altitudeAngle","amplitude","ancestorOrigins","anchor","anchorName","anchorNode","anchorOffset","anchorScope","anchorSpace","anchors","and","angle","angularAcceleration","angularVelocity","animVal","animate","animated","animatedInstanceRoot","animatedNormalizedPathSegList","animatedPathSegList","animatedPoints","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","animationComposition","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationStartTime","animationTimingFunction","animationsPaused","anniversary","annotation","antialias","anticipatedRemoval","any","app","appCodeName","appMinorVersion","appName","appNotifications","appVersion","appearance","append","appendBuffer","appendChild","appendData","appendItem","appendMedium","appendNamed","appendRule","appendStream","appendWindowEnd","appendWindowStart","applets","applicationCache","applicationServerKey","apply","applyConstraints","applyElement","arc","arcTo","arch","architecture","archive","areas","arguments","ariaActiveDescendantElement","ariaAtomic","ariaAutoComplete","ariaBrailleLabel","ariaBrailleRoleDescription","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColIndexText","ariaColSpan","ariaControlsElements","ariaCurrent","ariaDescribedByElements","ariaDescription","ariaDetailsElements","ariaDisabled","ariaErrorMessageElements","ariaExpanded","ariaFlowToElements","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLabelledByElements","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaNotify","ariaOrientation","ariaOwnsElements","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowIndexText","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","arrayBuffer","arrayLayerCount","arrayStride","artist","artwork","as","asIntN","asUintN","ascentOverride","asin","asinh","aspect","aspect-ratio","aspectRatio","assert","assign","assignedElements","assignedNodes","assignedSlot","async","asyncDispose","asyncIterator","at","atEnd","atan","atan2","atanh","atob","attachEvent","attachInternals","attachShader","attachShadow","attachedElements","attachments","attack","attestationObject","attrChange","attrName","attributeChangedCallback","attributeFilter","attributeName","attributeNamespace","attributeOldValue","attributeStyleMap","attributes","attribution","attributionSrc","audioBitrateMode","audioBitsPerSecond","audioTracks","audioWorklet","authenticatedSignedWrites","authenticatorAttachment","authenticatorData","autoIncrement","autobuffer","autocapitalize","autocomplete","autocorrect","autofocus","automationRate","autoplay","availHeight","availLeft","availTop","availWidth","availability","available","averageLatency","aversion","ax","axes","axis","ay","azimuth","azimuthAngle","b","back","backdrop-filter","backdropFilter","backends","backface-visibility","backfaceVisibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","backgroundAttachment","backgroundBlendMode","backgroundClip","backgroundColor","backgroundFetch","backgroundImage","backgroundOrigin","backgroundPosition","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize","badInput","badge","balance","baseArrayLayer","baseFrequencyX","baseFrequencyY","baseLatency","baseLayer","baseMipLevel","baseNode","baseOffset","basePalette","baseURI","baseVal","baseline-source","baselineShift","baselineSource","batchUpdate","battery","bday","before","beginComputePass","beginElement","beginElementAt","beginOcclusionQuery","beginPath","beginQuery","beginRenderPass","beginTransformFeedback","beginningOfPassWriteIndex","behavior","behaviorCookie","behaviorPart","behaviorUrns","beta","bezierCurveTo","bgColor","bgProperties","bias","big","bigint64","biguint64","binaryType","bind","bindAttribLocation","bindBuffer","bindBufferBase","bindBufferRange","bindFramebuffer","bindGroupLayouts","bindRenderbuffer","bindSampler","bindTexture","bindTransformFeedback","bindVertexArray","binding","bitness","blend","blendColor","blendEquation","blendEquationSeparate","blendFunc","blendFuncSeparate","blink","blitFramebuffer","blob","block-size","blockDirection","blockSize","blockedURI","blockedURL","blocking","blockingDuration","blue","bluetooth","blur","body","bodyUsed","bold","bookmarks","booleanValue","boost","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","borderBlock","borderBlockColor","borderBlockEnd","borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth","borderBlockStart","borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth","borderBlockStyle","borderBlockWidth","borderBottom","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomStyle","borderBottomWidth","borderBoxSize","borderCollapse","borderColor","borderColorDark","borderColorLight","borderEndEndRadius","borderEndStartRadius","borderImage","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderInline","borderInlineColor","borderInlineEnd","borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth","borderInlineStart","borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth","borderInlineStyle","borderInlineWidth","borderLeft","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRadius","borderRight","borderRightColor","borderRightStyle","borderRightWidth","borderSpacing","borderStartEndRadius","borderStartStartRadius","borderStyle","borderTop","borderTopColor","borderTopLeftRadius","borderTopRightRadius","borderTopStyle","borderTopWidth","borderWidth","bottom","bottomMargin","bound","boundElements","boundingClientRect","boundingHeight","boundingLeft","boundingRect","boundingTop","boundingWidth","bounds","boundsGeometry","box-decoration-break","box-shadow","box-sizing","boxDecorationBreak","boxShadow","boxSizing","brand","brands","break-after","break-before","break-inside","breakAfter","breakBefore","breakInside","broadcast","browser","browserLanguage","browserSettings","browsingData","browsingTopics","btoa","bubbles","buffer","bufferData","bufferDepth","bufferSize","bufferSubData","buffered","bufferedAmount","bufferedAmountLowThreshold","buffers","buildID","buildNumber","button","buttonID","buttons","byobRequest","byteLength","byteOffset","bytes","bytesPerRow","bytesWritten","c","cache","caches","call","caller","camera","canBeFormatted","canBeMounted","canBeShared","canConstructInDedicatedWorker","canGoBack","canGoForward","canHaveChildren","canHaveHTML","canInsertDTMF","canIntercept","canLoadAdAuctionFencedFrame","canLoadOpaqueURL","canMakePayment","canParse","canPlayType","canPresent","canShare","canTransition","canTrickleIceCandidates","cancel","cancelAndHoldAtTime","cancelAnimationFrame","cancelBubble","cancelIdleCallback","cancelScheduledValues","cancelVideoFrameCallback","cancelWatchAvailability","cancelable","candidate","canonicalUUID","canvas","cap","capabilities","caption","caption-side","captionSide","captivePortal","capture","captureEvents","captureStackTrace","captureStream","captureTab","captureVisibleTab","caret-color","caretBidiLevel","caretColor","caretPositionFromPoint","caretRangeFromPoint","cast","catch","category","cbrt","cd","ceil","cellIndex","cellPadding","cellSpacing","cells","ch","chOff","chain","challenge","changeType","changed","changedTouches","channel","channelCount","channelCountMode","channelInterpretation","chapterInfo","char","charAt","charCode","charCodeAt","charIndex","charLength","characterBounds","characterBoundsRangeStart","characterData","characterDataOldValue","characterSet","characterVariant","characteristic","charging","chargingTime","charset","check","checkDCE","checkEnclosure","checkFramebufferStatus","checkIntersection","checkValidity","checkVisibility","checked","childElementCount","childList","childNodes","children","chrome","ciphertext","cite","city","claimInterface","claimed","classList","className","classid","clear","clearAppBadge","clearAttributes","clearBuffer","clearBufferfi","clearBufferfv","clearBufferiv","clearBufferuiv","clearColor","clearData","clearDepth","clearHalt","clearImmediate","clearInterval","clearLiveSeekableRange","clearMarks","clearMaxGCPauseAccumulator","clearMeasures","clearOriginJoinedAdInterestGroups","clearParameters","clearRect","clearResourceTimings","clearShadow","clearStencil","clearTimeout","clearValue","clearWatch","click","clickCount","clientDataJSON","clientHeight","clientInformation","clientLeft","clientRect","clientRects","clientTop","clientWaitSync","clientWidth","clientX","clientY","clip","clip-path","clip-rule","clipBottom","clipLeft","clipPath","clipPathUnits","clipRight","clipRule","clipTop","clipboard","clipboardData","clonable","clone","cloneContents","cloneNode","cloneRange","close","closeCode","closePath","closed","closedBy","closest","clz","clz32","cm","cmp","code","codeBase","codePointAt","codeType","codedHeight","codedRect","codedWidth","colSpan","collapse","collapseToEnd","collapseToStart","collapsed","collect","collections","colno","color","color-adjust","color-interpolation","color-interpolation-filters","color-scheme","colorAdjust","colorAttachments","colorDepth","colorFormats","colorInterpolation","colorInterpolationFilters","colorMask","colorScheme","colorSpace","colorType","cols","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columnCount","columnFill","columnGap","columnNumber","columnRule","columnRuleColor","columnRuleStyle","columnRuleWidth","columnSpan","columnWidth","columns","command","commandForElement","commands","commit","commitLoadTime","commitPreferences","commitStyles","committed","commonAncestorContainer","compact","compare","compareBoundaryPoints","compareDocumentPosition","compareEndPoints","compareExchange","compareNode","comparePoint","compatMode","compatible","compile","compileShader","compileStreaming","complete","completed","component","componentFromPoint","composed","composedPath","composite","compositionEndOffset","compositionStartOffset","compressedTexImage2D","compressedTexImage3D","compressedTexSubImage2D","compressedTexSubImage3D","compute","computedStyleMap","concat","conditionText","coneInnerAngle","coneOuterAngle","coneOuterGain","config","configURL","configurable","configuration","configurationName","configurationValue","configurations","configure","confirm","confirmComposition","confirmSiteSpecificTrackingException","confirmWebWideTrackingException","congestionControl","connect","connectEnd","connectNative","connectShark","connectStart","connected","connectedCallback","connectedMoveCallback","connection","connectionInfo","connectionList","connectionSpeed","connectionState","connections","console","consolidate","constants","constraint","constrictionActive","construct","constructor","contactID","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","containIntrinsicBlockSize","containIntrinsicHeight","containIntrinsicInlineSize","containIntrinsicSize","containIntrinsicWidth","container","container-name","container-type","containerId","containerName","containerQuery","containerSrc","containerType","contains","containsNode","content","content-visibility","contentBoxSize","contentDocument","contentEditable","contentEncoding","contentHint","contentOverflow","contentRect","contentScriptType","contentStyleType","contentType","contentVisibility","contentWindow","context","contextId","contextIds","contextMenu","contextMenus","contextType","contextTypes","contextmenu","contextualIdentities","continue","continuePrimaryKey","continuous","control","controlTransferIn","controlTransferOut","controller","controls","controlsList","convertPointFromNode","convertQuadFromNode","convertRectFromNode","convertToBlob","convertToSpecifiedUnits","cookie","cookieEnabled","cookieStore","cookies","coords","copyBufferSubData","copyBufferToBuffer","copyBufferToTexture","copyExternalImageToTexture","copyFromChannel","copyTexImage2D","copyTexSubImage2D","copyTexSubImage3D","copyTextureToBuffer","copyTextureToTexture","copyTo","copyToChannel","copyWithin","correspondingElement","correspondingUseElement","corruptedVideoFrames","cos","cosh","count","countReset","counter-increment","counter-reset","counter-set","counterIncrement","counterReset","counterSet","country","cpuClass","cpuSleepAllowed","cqb","cqh","cqi","cqmax","cqmin","cqw","create","createAnalyser","createAnchor","createAnswer","createAttribute","createAttributeNS","createAuctionNonce","createBidirectionalStream","createBindGroup","createBindGroupLayout","createBiquadFilter","createBuffer","createBufferSource","createCDATASection","createCSSStyleSheet","createCaption","createChannelMerger","createChannelSplitter","createCommandEncoder","createComment","createComputePipeline","createComputePipelineAsync","createConicGradient","createConstantSource","createContextualFragment","createControlRange","createConvolver","createDTMFSender","createDataChannel","createDelay","createDelayNode","createDocument","createDocumentFragment","createDocumentType","createDynamicsCompressor","createElement","createElementNS","createEncodedStreams","createEntityReference","createEvent","createEventObject","createExpression","createFramebuffer","createFunction","createGain","createGainNode","createHTML","createHTMLDocument","createIIRFilter","createImageBitmap","createImageData","createIndex","createJavaScriptNode","createLinearGradient","createMediaElementSource","createMediaKeys","createMediaStreamDestination","createMediaStreamSource","createMediaStreamTrackSource","createMutableFile","createNSResolver","createNodeIterator","createNotification","createObjectStore","createObjectURL","createOffer","createOscillator","createPanner","createPattern","createPeriodicWave","createPipelineLayout","createPolicy","createPopup","createProcessingInstruction","createProgram","createQuery","createQuerySet","createRadialGradient","createRange","createRangeCollection","createReader","createRenderBundleEncoder","createRenderPipeline","createRenderPipelineAsync","createRenderbuffer","createSVGAngle","createSVGLength","createSVGMatrix","createSVGNumber","createSVGPathSegArcAbs","createSVGPathSegArcRel","createSVGPathSegClosePath","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicRel","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoCubicSmoothRel","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticRel","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegCurvetoQuadraticSmoothRel","createSVGPathSegLinetoAbs","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoHorizontalRel","createSVGPathSegLinetoRel","createSVGPathSegLinetoVerticalAbs","createSVGPathSegLinetoVerticalRel","createSVGPathSegMovetoAbs","createSVGPathSegMovetoRel","createSVGPoint","createSVGRect","createSVGTransform","createSVGTransformFromMatrix","createSampler","createScript","createScriptProcessor","createScriptURL","createSession","createShader","createShaderModule","createShadowRoot","createStereoPanner","createStyleSheet","createTBody","createTFoot","createTHead","createTask","createTextNode","createTextRange","createTexture","createTouch","createTouchList","createTransformFeedback","createTreeWalker","createUnidirectionalStream","createVertexArray","createView","createWaveShaper","createWorklet","createWritable","creationTime","credentialless","credentials","criticalCHRestart","cropTo","crossOrigin","crossOriginIsolated","crypto","csi","csp","cssFloat","cssRules","cssText","cssValueType","ctrlKey","ctrlLeft","cues","cullFace","cullMode","currentCSSZoom","currentDirection","currentEntry","currentLocalDescription","currentNode","currentPage","currentRect","currentRemoteDescription","currentScale","currentScreen","currentScript","currentSrc","currentState","currentStyle","currentTarget","currentTime","currentTranslate","currentView","cursor","curve","customElements","customError","cx","cy","d","data","dataFld","dataFormatAs","dataLoss","dataLossMessage","dataPageSize","dataSrc","dataTransfer","database","databases","datagrams","dataset","dateTime","db","debug","debuggerEnabled","declarativeNetRequest","declare","decode","decodeAudioData","decodeQueueSize","decodeURI","decodeURIComponent","decodedBodySize","decoding","decodingInfo","decreaseZoomLevel","decrypt","default","defaultCharset","defaultChecked","defaultMuted","defaultPlaybackRate","defaultPolicy","defaultPrevented","defaultQueue","defaultRequest","defaultSelected","defaultStatus","defaultURL","defaultValue","defaultView","defaultstatus","defer","define","defineMagicFunction","defineMagicVariable","defineProperties","defineProperty","deg","delay","delayTime","delegatesFocus","delete","deleteBuffer","deleteCaption","deleteCell","deleteContents","deleteData","deleteDatabase","deleteFramebuffer","deleteFromDocument","deleteIndex","deleteMedium","deleteObjectStore","deleteProgram","deleteProperty","deleteQuery","deleteRenderbuffer","deleteRow","deleteRule","deleteSampler","deleteShader","deleteSync","deleteTFoot","deleteTHead","deleteTexture","deleteTransformFeedback","deleteVertexArray","deleted","deliverChangeRecords","deliveredFrames","deliveredFramesDuration","delivery","deliveryInfo","deliveryStatus","deliveryTimestamp","deliveryType","delta","deltaMode","deltaX","deltaY","deltaZ","dependentLocality","deprecatedReplaceInURN","deprecatedRunAdAuctionEnforcesKAnonymity","deprecatedURNToURL","depthActive","depthBias","depthBiasClamp","depthBiasSlopeScale","depthClearValue","depthCompare","depthDataFormat","depthFailOp","depthFar","depthFunc","depthLoadOp","depthMask","depthNear","depthOrArrayLayers","depthRange","depthReadOnly","depthStencil","depthStencilAttachment","depthStencilFormat","depthStoreOp","depthType","depthUsage","depthWriteEnabled","deref","deriveBits","deriveKey","descentOverride","description","deselectAll","designMode","desiredSize","destination","destinationURL","destroy","detach","detachEvent","detachShader","detached","detail","details","detect","detectLanguage","detune","device","deviceClass","deviceId","deviceMemory","devicePixelContentBoxSize","devicePixelRatio","devicePosture","deviceProtocol","deviceSubclass","deviceVersionMajor","deviceVersionMinor","deviceVersionSubminor","deviceXDPI","deviceYDPI","devtools","devtools_panels","didTimeout","difference","diffuseConstant","digest","dimension","dimensions","dir","dirName","direction","dirxml","disable","disablePictureInPicture","disableRemotePlayback","disableVertexAttribArray","disabled","discard","discardedFrames","dischargingTime","disconnect","disconnectShark","disconnectedCallback","dispatchEvent","dispatchWorkgroups","dispatchWorkgroupsIndirect","display","displayHeight","displayId","displayName","displayWidth","dispose","disposeAsync","disposed","disposition","distanceModel","div","divisor","djsapi","djsproxy","dns","doImport","doNotTrack","doScroll","doctype","document","documentElement","documentId","documentIds","documentLifecycle","documentMode","documentOrigin","documentOrigins","documentPictureInPicture","documentURI","documentURL","documentUrl","documentUrls","dolphin","dolphinGameCenter","dolphininfo","dolphinmeta","dom","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domOverlayState","domain","domainLookupEnd","domainLookupStart","dominant-baseline","dominantBaseline","done","dopplerFactor","dotAll","downDegrees","downlink","download","downloadRequest","downloadTotal","downloaded","downloads","dpcm","dpi","dppx","dragDrop","draggable","draw","drawArrays","drawArraysInstanced","drawArraysInstancedANGLE","drawBuffers","drawCustomFocusRing","drawElements","drawElementsInstanced","drawElementsInstancedANGLE","drawFocusIfNeeded","drawImage","drawImageFromRect","drawIndexed","drawIndexedIndirect","drawIndirect","drawRangeElements","drawSystemFocusRing","drawingBufferColorSpace","drawingBufferFormat","drawingBufferHeight","drawingBufferStorage","drawingBufferWidth","drop","dropEffect","droppedVideoFrames","dropzone","dstFactor","dtmf","dump","dumpProfile","duplex","duplicate","durability","duration","dvb","dvh","dvi","dvmax","dvmin","dvname","dvnum","dvw","dx","dy","dynamicId","dynsrc","e","edgeMode","editContext","effect","effectAllowed","effectiveDirective","effectiveType","effects","elapsedTime","element","elementFromPoint","elementTiming","elements","elementsFromPoint","elevation","ellipse","em","emHeightAscent","emHeightDescent","email","embeds","emit","emma","empty","empty-cells","emptyCells","emptyHTML","emptyScript","emulatedPosition","enable","enableBackground","enableDelegations","enableStyleSheetsForSet","enableVertexAttribArray","enabled","enabledFeatures","enabledPlugin","encode","encodeInto","encodeQueueSize","encodeURI","encodeURIComponent","encodedBodySize","encoding","encodingInfo","encrypt","enctype","end","endContainer","endElement","endElementAt","endOcclusionQuery","endOfPassWriteIndex","endOfStream","endOffset","endQuery","endTime","endTransformFeedback","ended","endpoint","endpointNumber","endpoints","endsWith","enqueue","enterKeyHint","entities","entries","entry","entryPoint","entryType","enumerable","enumerate","enumerateDevices","enumerateEditable","environmentBlendMode","equals","error","errorCode","errorDetail","errorText","escape","estimate","eval","evaluate","event","eventCounts","eventPhase","events","every","ex","exception","exchange","exec","execCommand","execCommandShowHelp","execScript","executeBundles","executionStart","exitFullscreen","exitPictureInPicture","exitPointerLock","exitPresent","exp","expand","expandEntityReferences","expando","expansion","expectedContextLanguages","expectedImprovement","expectedInputLanguages","experiments","expiration","expirationTime","expires","expiryDate","explicitOriginalTarget","expm1","exponent","exponentialRampToValueAtTime","exportKey","exports","extend","extension","extensionTypes","extensions","extentNode","extentOffset","external","externalResourcesRequired","externalTexture","extractContents","extractable","eye","f","f16round","face","factoryReset","failOp","failureReason","fallback","family","familyName","farthestViewportElement","fastSeek","fatal","featureId","featurePolicy","featureSettings","features","fence","fenceSync","fetch","fetchLater","fetchPriority","fetchStart","fftSize","fgColor","fieldOfView","file","fileCreatedDate","fileHandle","fileModifiedDate","fileName","fileSize","fileUpdatedDate","filename","files","filesystem","fill","fill-opacity","fill-rule","fillJointRadii","fillLightMode","fillOpacity","fillPoses","fillRect","fillRule","fillStyle","fillText","filter","filterResX","filterResY","filterUnits","filters","finalResponseHeadersStart","finally","find","findIndex","findLast","findLastIndex","findRule","findText","finish","finishDocumentLoadTime","finishLoadTime","finished","fireEvent","firesTouchEvents","first","firstChild","firstElementChild","firstInterimResponseStart","firstPage","firstPaintAfterLoadTime","firstPaintTime","firstUIEventTimestamp","fixed","flags","flat","flatMap","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","flexBasis","flexDirection","flexFlow","flexGrow","flexShrink","flexWrap","flip","flipX","flipY","float","float32","float64","flood-color","flood-opacity","floodColor","floodOpacity","floor","flush","focus","focusNode","focusOffset","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","fontBoundingBoxAscent","fontBoundingBoxDescent","fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontOpticalSizing","fontPalette","fontSize","fontSizeAdjust","fontSmoothingEnabled","fontStretch","fontStyle","fontSynthesis","fontSynthesisPosition","fontSynthesisSmallCaps","fontSynthesisStyle","fontSynthesisWeight","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantEmoji","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontVariationSettings","fontWeight","fontcolor","fontfaces","fonts","fontsize","for","forEach","force","forceFallbackAdapter","forceRedraw","forced-color-adjust","forcedColorAdjust","forcedStyleAndLayoutDuration","forget","form","formAction","formData","formEnctype","formMethod","formNoValidate","formTarget","format","formatToParts","forms","forward","forwardWheel","forwardX","forwardY","forwardZ","foundation","fr","fragment","fragmentDirective","frame","frameBorder","frameCount","frameElement","frameId","frameIds","frameSpacing","framebuffer","framebufferHeight","framebufferRenderbuffer","framebufferTexture2D","framebufferTextureLayer","framebufferWidth","frames","freeSpace","freeze","frequency","frequencyBinCount","from","fromAsync","fromBase64","fromCharCode","fromCodePoint","fromElement","fromEntries","fromFloat32Array","fromFloat64Array","fromHex","fromMatrix","fromPoint","fromQuad","fromRect","frontFace","fround","fullName","fullPath","fullRange","fullScreen","fullVersionList","fullscreen","fullscreenElement","fullscreenEnabled","fx","fy","g","gain","gamepad","gamma","gap","gatheringState","gatt","geckoProfiler","genderIdentity","generateCertificate","generateKey","generateMipmap","generateRequest","geolocation","gestureObject","get","getAcceptLanguages","getActiveAttrib","getActiveUniform","getActiveUniformBlockName","getActiveUniformBlockParameter","getActiveUniforms","getAdjacentText","getAll","getAllKeys","getAllRecords","getAllResponseHeaders","getAllowlistForFeature","getAnimations","getAsFile","getAsFileSystemHandle","getAsString","getAttachedShaders","getAttribLocation","getAttribute","getAttributeNS","getAttributeNames","getAttributeNode","getAttributeNodeNS","getAttributeType","getAudioTracks","getAuthenticatorData","getAutoplayPolicy","getAvailability","getBBox","getBackgroundPage","getBadgeBackgroundColor","getBadgeText","getBadgeTextColor","getBattery","getBigInt64","getBigUint64","getBindGroupLayout","getBlob","getBookmark","getBoundingClientRect","getBounds","getBoxQuads","getBrowserInfo","getBufferParameter","getBufferSubData","getByteFrequencyData","getByteTimeDomainData","getCSSCanvasContext","getCTM","getCameraImage","getCandidateWindowClientRect","getCanonicalLocales","getCapabilities","getCaptureHandle","getChannelData","getCharNumAtPosition","getCharacteristic","getCharacteristics","getClientCapabilities","getClientExtensionResults","getClientRect","getClientRects","getCoalescedEvents","getCompilationInfo","getComposedRanges","getCompositionAlternatives","getComputedStyle","getComputedTextLength","getComputedTiming","getConfiguration","getConstraints","getContext","getContextAttributes","getContexts","getContributingSources","getCounterValue","getCueAsHTML","getCueById","getCurrent","getCurrentPosition","getCurrentTexture","getCurrentTime","getData","getDatabaseNames","getDate","getDay","getDefaultComputedStyle","getDepthInMeters","getDepthInformation","getDescriptor","getDescriptors","getDestinationInsertionPoints","getDevices","getDirectory","getDirectoryHandle","getDisplayMedia","getDistributedNodes","getEditable","getElementById","getElementsByClassName","getElementsByName","getElementsByTagName","getElementsByTagNameNS","getEnclosureList","getEndPositionOfChar","getEntries","getEntriesByName","getEntriesByType","getError","getExtension","getExtentOfChar","getEyeParameters","getFeature","getFiberRoots","getFile","getFileHandle","getFiles","getFilesAndDirectories","getFingerprints","getFloat16","getFloat32","getFloat64","getFloatFrequencyData","getFloatTimeDomainData","getFloatValue","getFragDataLocation","getFrameData","getFrameId","getFramebufferAttachmentParameter","getFrequencyResponse","getFullYear","getGamepads","getHTML","getHeaderExtensionsToNegotiate","getHighEntropyValues","getHitTestResults","getHitTestResultsForTransientInput","getHours","getIdentityAssertion","getIds","getImageData","getIndexedParameter","getInfo","getInnerHTML","getInstalledRelatedApps","getInt16","getInt32","getInt8","getInterestGroupAdAuctionData","getInternalModuleRanges","getInternalformatParameter","getIntersectionList","getItem","getItems","getJointPose","getKey","getKeyframes","getLastFocused","getLayers","getLayoutMap","getLightEstimate","getLineDash","getLocalCandidates","getLocalParameters","getLocalStreams","getManagedConfiguration","getManifest","getMappedRange","getMarks","getMatchedCSSRules","getMaxGCPauseSinceClear","getMeasures","getMessage","getMetadata","getMilliseconds","getMinutes","getModifierState","getMonth","getName","getNamedItem","getNamedItemNS","getNativeFramebufferScaleFactor","getNegotiatedHeaderExtensions","getNestedConfigs","getNotifications","getNotifier","getNumberOfChars","getOffsetReferenceSpace","getOrInsert","getOrInsertComputed","getOutputTimestamp","getOverrideHistoryNavigationMode","getOverrideStyle","getOwnPropertyDescriptor","getOwnPropertyDescriptors","getOwnPropertyNames","getOwnPropertySymbols","getPackageDirectoryEntry","getParameter","getParameters","getParent","getPathData","getPathSegAtLength","getPathSegmentAtLength","getPermissionWarningsByManifest","getPhotoCapabilities","getPhotoSettings","getPlatformInfo","getPointAtLength","getPopup","getPorts","getPose","getPredictedEvents","getPreference","getPreferenceDefault","getPreferredCanvasFormat","getPresentationAttribute","getPreventDefault","getPrimaryService","getPrimaryServices","getProgramInfoLog","getProgramParameter","getPropertyCSSValue","getPropertyPriority","getPropertyShorthand","getPropertyType","getPropertyValue","getPrototypeOf","getPublicKey","getPublicKeyAlgorithm","getQuery","getQueryParameter","getRGBColorValue","getRandomValues","getRangeAt","getReader","getReceivers","getRectValue","getReflectionCubeMap","getRegistration","getRegistrations","getRemoteCandidates","getRemoteCertificates","getRemoteParameters","getRemoteStreams","getRenderbufferParameter","getResponseHeader","getRoot","getRootNode","getRotationOfChar","getSVGDocument","getSamplerParameter","getScreenCTM","getScreenDetails","getSeconds","getSelectedCandidatePair","getSelection","getSelf","getSenders","getService","getSetCookie","getSettings","getShaderInfoLog","getShaderParameter","getShaderPrecisionFormat","getShaderSource","getSignals","getSimpleDuration","getSiteIcons","getSources","getSpeculativeParserUrls","getStartPositionOfChar","getStartTime","getState","getStats","getStatusForPolicy","getStorageUpdates","getStreamById","getStringValue","getSubStringLength","getSubscription","getSubscriptions","getSupportedConstraints","getSupportedExtensions","getSupportedFormats","getSupportedZoomLevels","getSyncParameter","getSynchronizationSources","getTags","getTargetRanges","getTexParameter","getTextFormats","getTime","getTimezoneOffset","getTiming","getTitle","getTitlebarAreaRect","getTotalLength","getTrackById","getTracks","getTransceivers","getTransform","getTransformFeedbackVarying","getTransformToElement","getTransports","getType","getTypeMapping","getUILanguage","getURL","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getUint16","getUint32","getUint8","getUniform","getUniformBlockIndex","getUniformIndices","getUniformLocation","getUserInfo","getUserMedia","getUserSettings","getVRDisplays","getValues","getVarDate","getVariableValue","getVertexAttrib","getVertexAttribOffset","getVideoPlaybackQuality","getVideoTracks","getViewerPose","getViewport","getViews","getVoices","getWakeLockState","getWriter","getYear","getZoom","getZoomSettings","givenName","global","globalAlpha","globalCompositeOperation","globalPrivacyControl","globalThis","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","go","goBack","goForward","gpu","grabFrame","grad","gradientTransform","gradientUnits","grammars","green","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","gridArea","gridAutoColumns","gridAutoFlow","gridAutoRows","gridColumn","gridColumnEnd","gridColumnGap","gridColumnStart","gridGap","gridRow","gridRowEnd","gridRowGap","gridRowStart","gridTemplate","gridTemplateAreas","gridTemplateColumns","gridTemplateRows","gripSpace","group","groupBy","groupCollapsed","groupEnd","groupId","groups","grow","growable","guestProcessId","guestRenderFrameRoutingId","hadRecentInput","hand","handedness","hangingBaseline","hapticActuators","hardwareConcurrency","has","hasAttribute","hasAttributeNS","hasAttributes","hasBeenActive","hasChildNodes","hasComposition","hasDynamicOffset","hasEnrolledInstrument","hasExtension","hasExternalDisplay","hasFeature","hasFocus","hasIndices","hasInstance","hasLayout","hasOrientation","hasOwn","hasOwnProperty","hasPointerCapture","hasPosition","hasPrivateToken","hasReading","hasRedemptionRecord","hasRegExpGroups","hasStorageAccess","hasUAVisualTransition","hasUnpartitionedCookieAccess","hash","hashChange","head","headers","heading","height","hid","hidden","hide","hideFocus","hidePopover","high","highWaterMark","highlight","highlights","highlightsFromPoint","hint","hints","history","honorificPrefix","honorificSuffix","horizontalOverflow","host","hostCandidate","hostname","href","hrefTranslate","hreflang","hspace","html5TagCheckInerface","htmlFor","htmlText","httpEquiv","httpRequestStatusCode","hwTimestamp","hyphenate-character","hyphenateCharacter","hyphenateLimitChars","hyphens","hypot","i18n","ic","iccId","iceConnectionState","iceGatheringState","iceTransport","icon","iconURL","id","identifier","identity","ideographicBaseline","idle","idpLoginUrl","ignoreBOM","ignoreCase","ignoreDepthValues","image","image-orientation","image-rendering","imageHeight","imageOrientation","imageRendering","imageSizes","imageSmoothingEnabled","imageSmoothingQuality","imageSrcset","imageWidth","images","ime-mode","imeMode","implementation","importExternalTexture","importKey","importNode","importStylesheet","imports","impp","imul","in","in1","in2","inBandMetadataTrackDispatchType","inIncognitoContext","inRange","includes","incognito","incomingBidirectionalStreams","incomingHighWaterMark","incomingMaxAge","incomingUnidirectionalStreams","increaseZoomLevel","incremental","indeterminate","index","indexNames","indexOf","indexedDB","indicate","indices","inert","inertiaDestinationX","inertiaDestinationY","info","inherits","init","initAnimationEvent","initBeforeLoadEvent","initClipboardEvent","initCloseEvent","initCommandEvent","initCompositionEvent","initCustomEvent","initData","initDataType","initDeviceMotionEvent","initDeviceOrientationEvent","initDragEvent","initErrorEvent","initEvent","initFocusEvent","initGestureEvent","initHashChangeEvent","initKeyEvent","initKeyboardEvent","initMSManipulationEvent","initMessageEvent","initMouseEvent","initMouseScrollEvent","initMouseWheelEvent","initMutationEvent","initNSMouseEvent","initOverflowEvent","initPageEvent","initPageTransitionEvent","initPointerEvent","initPopStateEvent","initProgressEvent","initScrollAreaEvent","initSimpleGestureEvent","initStorageEvent","initTextEvent","initTimeEvent","initTouchEvent","initTransitionEvent","initUIEvent","initWebKitAnimationEvent","initWebKitTransitionEvent","initWebKitWheelEvent","initWheelEvent","initialTime","initialValue","initialize","initiatorType","inject","ink","inline-size","inlineSize","inlineVerticalFieldOfView","inner","innerHTML","innerHeight","innerText","innerWidth","input","inputBuffer","inputEncoding","inputMethod","inputMode","inputQuota","inputSource","inputSources","inputType","inputs","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","insertBefore","insertCell","insertDTMF","insertData","insertDebugMarker","insertItemBefore","insertNode","insertRow","insertRule","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","insetBlock","insetBlockEnd","insetBlockStart","insetInline","insetInlineEnd","insetInlineStart","inspect","install","installing","instanceRoot","instantiate","instantiateStreaming","instruments","int16","int32","int8","integrity","interactionCount","interactionId","interactionMode","intercept","interestForElement","interfaceClass","interfaceName","interfaceNumber","interfaceProtocol","interfaceSubclass","interfaces","interimResults","internalSubset","interpretation","intersection","intersectionRatio","intersectionRect","intersectsNode","interval","invalidIteratorState","invalidateFramebuffer","invalidateSubFramebuffer","inverse","invertSelf","invoker","invokerType","is","is2D","isActive","isAllowedFileSchemeAccess","isAllowedIncognitoAccess","isAlternate","isArray","isAutoSelected","isBingCurrentSearchDefault","isBuffer","isCandidateWindowVisible","isChar","isCollapsed","isComposing","isConcatSpreadable","isConditionalMediationAvailable","isConfigSupported","isConnected","isContentEditable","isContentHandlerRegistered","isContextLost","isDefaultNamespace","isDirectory","isDisabled","isDisjointFrom","isEnabled","isEqual","isEqualNode","isError","isExtended","isExtensible","isExternalCTAP2SecurityKeySupported","isFallbackAdapter","isFile","isFinite","isFirstPersonObserver","isFramebuffer","isFrozen","isGenerator","isHTML","isHistoryNavigation","isId","isIdentity","isInjected","isInputPending","isInteger","isInternal","isIntersecting","isLockFree","isMap","isMultiLine","isNaN","isOpen","isPointInFill","isPointInPath","isPointInRange","isPointInStroke","isPrefAlternate","isPresenting","isPrimary","isProgram","isPropertyImplicit","isProtocolHandlerRegistered","isPrototypeOf","isQuery","isRawJSON","isRenderbuffer","isSafeInteger","isSameEntry","isSameNode","isSampler","isScript","isScriptURL","isSealed","isSecureContext","isSessionSupported","isShader","isSubsetOf","isSupersetOf","isSupported","isSync","isTextEdit","isTexture","isTransformFeedback","isTrusted","isTypeSupported","isUserVerifyingPlatformAuthenticatorAvailable","isVertexArray","isView","isVisible","isWellFormed","isochronousTransferIn","isochronousTransferOut","isolation","italics","item","itemId","itemProp","itemRef","itemScope","itemType","itemValue","items","iterateNext","iterationComposite","iterator","javaEnabled","jitterBufferTarget","jobTitle","join","joinAdInterestGroup","jointName","json","justify-content","justify-items","justify-self","justifyContent","justifyItems","justifySelf","k1","k2","k3","k4","kHz","keepalive","kernelMatrix","kernelUnitLengthX","kernelUnitLengthY","kerning","key","keyCode","keyFor","keyIdentifier","keyLightEnabled","keyLocation","keyPath","keyStatuses","keySystem","keyText","keyUsage","keyboard","keys","keytype","kind","knee","knownSources","label","labels","lang","language","languages","largeArcFlag","last","lastChild","lastElementChild","lastError","lastEventId","lastIndex","lastIndexOf","lastInputTime","lastMatch","lastMessageSubject","lastMessageType","lastModified","lastModifiedDate","lastPage","lastParen","lastState","lastStyleSheetSet","latency","latitude","launchQueue","layerName","layerX","layerY","layout","layoutFlow","layoutGrid","layoutGridChar","layoutGridLine","layoutGridMode","layoutGridType","lbound","leaveAdInterestGroup","left","leftContext","leftDegrees","leftMargin","leftProjectionMatrix","leftViewMatrix","length","lengthAdjust","lengthComputable","letter-spacing","letterSpacing","level","lh","lighting-color","lightingColor","limitingConeAngle","limits","line","line-break","line-height","lineAlign","lineBreak","lineCap","lineDashOffset","lineGapOverride","lineHeight","lineJoin","lineNum","lineNumber","linePos","lineTo","lineWidth","linearAcceleration","linearRampToValueAtTime","linearVelocity","lineno","lines","link","linkColor","linkProgram","links","list","list-style","list-style-image","list-style-position","list-style-type","listStyle","listStyleImage","listStylePosition","listStyleType","listener","listeners","load","loadEventEnd","loadEventStart","loadOp","loadTime","loadTimes","loaded","loading","localDescription","localName","localService","localStorage","locale","localeCompare","location","locationbar","lock","locked","lockedFile","locks","lodMaxClamp","lodMinClamp","log","log10","log1p","log2","logicalXDPI","logicalYDPI","login","loglevel","longDesc","longitude","lookupNamespaceURI","lookupPrefix","loop","loopEnd","loopStart","looping","lost","low","lower","lowerBound","lowerOpen","lowsrc","lvb","lvh","lvi","lvmax","lvmin","lvw","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","magFilter","makeXRCompatible","managed","management","manifest","manufacturer","manufacturerName","map","mapAsync","mapState","mappedAtCreation","mapping","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marginBlock","marginBlockEnd","marginBlockStart","marginBottom","marginHeight","marginInline","marginInlineEnd","marginInlineStart","marginLeft","marginRight","marginTop","marginWidth","mark","marker","marker-end","marker-mid","marker-offset","marker-start","markerEnd","markerHeight","markerMid","markerOffset","markerStart","markerUnits","markerWidth","marks","mask","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-position-x","mask-position-y","mask-repeat","mask-size","mask-type","maskClip","maskComposite","maskContentUnits","maskImage","maskMode","maskOrigin","maskPosition","maskPositionX","maskPositionY","maskRepeat","maskSize","maskType","maskUnits","match","matchAll","matchMedia","matchMedium","matchPatterns","matches","math-depth","math-style","mathDepth","mathShift","mathStyle","matrix","matrixTransform","max","max-block-size","max-height","max-inline-size","max-width","maxActions","maxAlternatives","maxAnisotropy","maxBindGroups","maxBindGroupsPlusVertexBuffers","maxBindingsPerBindGroup","maxBlockSize","maxBufferSize","maxByteLength","maxChannelCount","maxChannels","maxColorAttachmentBytesPerSample","maxColorAttachments","maxComputeInvocationsPerWorkgroup","maxComputeWorkgroupSizeX","maxComputeWorkgroupSizeY","maxComputeWorkgroupSizeZ","maxComputeWorkgroupStorageSize","maxComputeWorkgroupsPerDimension","maxConnectionsPerServer","maxDatagramSize","maxDecibels","maxDistance","maxDrawCount","maxDynamicStorageBuffersPerPipelineLayout","maxDynamicUniformBuffersPerPipelineLayout","maxHeight","maxInlineSize","maxInterStageShaderComponents","maxInterStageShaderVariables","maxLayers","maxLength","maxMessageSize","maxPacketLifeTime","maxRetransmits","maxSampledTexturesPerShaderStage","maxSamplersPerShaderStage","maxStorageBufferBindingSize","maxStorageBuffersPerShaderStage","maxStorageTexturesPerShaderStage","maxTextureArrayLayers","maxTextureDimension1D","maxTextureDimension2D","maxTextureDimension3D","maxTouchPoints","maxUniformBufferBindingSize","maxUniformBuffersPerShaderStage","maxValue","maxVertexAttributes","maxVertexBufferArrayStride","maxVertexBuffers","maxWidth","maximumLatency","measure","measureInputUsage","measureText","media","mediaCapabilities","mediaDevices","mediaElement","mediaGroup","mediaKeys","mediaSession","mediaStream","mediaText","meetOrSlice","memory","menubar","menus","menusChild","menusInternal","mergeAttributes","message","messageClass","messageHandlers","messageType","messages","metaKey","metadata","method","methodDetails","methodName","mid","mimeType","mimeTypes","min","min-block-size","min-height","min-inline-size","min-width","minBindingSize","minBlockSize","minDecibels","minFilter","minHeight","minInlineSize","minLength","minStorageBufferOffsetAlignment","minUniformBufferOffsetAlignment","minValue","minWidth","minimumLatency","mipLevel","mipLevelCount","mipmapFilter","miterLimit","mix-blend-mode","mixBlendMode","mm","mobile","mode","model","modify","module","mount","move","moveBefore","moveBy","moveEnd","moveFirst","moveFocusDown","moveFocusLeft","moveFocusRight","moveFocusUp","moveInSuccession","moveNext","moveRow","moveStart","moveTo","moveToBookmark","moveToElementText","moveToPoint","movementX","movementY","mozAdd","mozAnimationStartTime","mozAnon","mozApps","mozAudioCaptured","mozAudioChannelType","mozAutoplayEnabled","mozCancelAnimationFrame","mozCancelFullScreen","mozCancelRequestAnimationFrame","mozCaptureStream","mozCaptureStreamUntilEnded","mozClearDataAt","mozContact","mozContacts","mozCreateFileHandle","mozCurrentTransform","mozCurrentTransformInverse","mozCursor","mozDash","mozDashOffset","mozDecodedFrames","mozExitPointerLock","mozFillRule","mozFragmentEnd","mozFrameDelay","mozFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozGetAll","mozGetAllKeys","mozGetAsFile","mozGetDataAt","mozGetMetadata","mozGetUserMedia","mozHasAudio","mozHasItem","mozHidden","mozImageSmoothingEnabled","mozIndexedDB","mozInnerScreenX","mozInnerScreenY","mozInputSource","mozIsTextField","mozItem","mozItemCount","mozItems","mozLength","mozLockOrientation","mozMatchesSelector","mozMovementX","mozMovementY","mozOpaque","mozOrientation","mozPaintCount","mozPaintedFrames","mozParsedFrames","mozPay","mozPointerLockElement","mozPresentedFrames","mozPreservesPitch","mozPressure","mozPrintCallback","mozRTCIceCandidate","mozRTCPeerConnection","mozRTCSessionDescription","mozRemove","mozRequestAnimationFrame","mozRequestFullScreen","mozRequestPointerLock","mozSetDataAt","mozSetImageElement","mozSourceNode","mozSrcObject","mozSystem","mozTCPSocket","mozTextStyle","mozTypesAt","mozUnlockOrientation","mozUserCancelled","mozVisibilityState","ms","msAnimation","msAnimationDelay","msAnimationDirection","msAnimationDuration","msAnimationFillMode","msAnimationIterationCount","msAnimationName","msAnimationPlayState","msAnimationStartTime","msAnimationTimingFunction","msBackfaceVisibility","msBlockProgression","msCSSOMElementFloatMetrics","msCaching","msCachingEnabled","msCancelRequestAnimationFrame","msCapsLockWarningOff","msClearImmediate","msClose","msContentZoomChaining","msContentZoomFactor","msContentZoomLimit","msContentZoomLimitMax","msContentZoomLimitMin","msContentZoomSnap","msContentZoomSnapPoints","msContentZoomSnapType","msContentZooming","msConvertURL","msCrypto","msDoNotTrack","msElementsFromPoint","msElementsFromRect","msExitFullscreen","msExtendedCode","msFillRule","msFirstPaint","msFlex","msFlexAlign","msFlexDirection","msFlexFlow","msFlexItemAlign","msFlexLinePack","msFlexNegative","msFlexOrder","msFlexPack","msFlexPositive","msFlexPreferredSize","msFlexWrap","msFlowFrom","msFlowInto","msFontFeatureSettings","msFullscreenElement","msFullscreenEnabled","msGetInputContext","msGetRegionContent","msGetUntransformedBounds","msGraphicsTrustStatus","msGridColumn","msGridColumnAlign","msGridColumnSpan","msGridColumns","msGridRow","msGridRowAlign","msGridRowSpan","msGridRows","msHidden","msHighContrastAdjust","msHyphenateLimitChars","msHyphenateLimitLines","msHyphenateLimitZone","msHyphens","msImageSmoothingEnabled","msImeAlign","msIndexedDB","msInterpolationMode","msIsStaticHTML","msKeySystem","msKeys","msLaunchUri","msLockOrientation","msManipulationViewsEnabled","msMatchMedia","msMatchesSelector","msMaxTouchPoints","msOrientation","msOverflowStyle","msPerspective","msPerspectiveOrigin","msPlayToDisabled","msPlayToPreferredSourceUri","msPlayToPrimary","msPointerEnabled","msRegionOverflow","msReleasePointerCapture","msRequestAnimationFrame","msRequestFullscreen","msSaveBlob","msSaveOrOpenBlob","msScrollChaining","msScrollLimit","msScrollLimitXMax","msScrollLimitXMin","msScrollLimitYMax","msScrollLimitYMin","msScrollRails","msScrollSnapPointsX","msScrollSnapPointsY","msScrollSnapType","msScrollSnapX","msScrollSnapY","msScrollTranslation","msSetImmediate","msSetMediaKeys","msSetPointerCapture","msTextCombineHorizontal","msTextSizeAdjust","msToBlob","msTouchAction","msTouchSelect","msTraceAsyncCallbackCompleted","msTraceAsyncCallbackStarting","msTraceAsyncOperationCompleted","msTraceAsyncOperationStarting","msTransform","msTransformOrigin","msTransformStyle","msTransition","msTransitionDelay","msTransitionDuration","msTransitionProperty","msTransitionTimingFunction","msUnlockOrientation","msUpdateAsyncCallbackRelation","msUserSelect","msVisibilityState","msWrapFlow","msWrapMargin","msWrapThrough","msWriteProfilerMark","msZoom","msZoomTo","mt","mul","multiEntry","multiSelectionObj","multiline","multiple","multiply","multiplySelf","multisample","multisampled","mutableFile","muted","n","nacl_arch","name","nameList","nameProp","namedItem","namedRecordset","names","namespaceURI","namespaces","nativeApplication","nativeMap","nativeObjectCreate","nativeSet","nativeWeakMap","naturalHeight","naturalWidth","navigate","navigation","navigationMode","navigationPreload","navigationStart","navigationType","navigator","near","nearestViewportElement","negative","negotiated","netscape","networkState","networkStatus","newScale","newState","newTranslate","newURL","newValue","newValueSpecifiedUnits","newVersion","newhome","next","nextElementSibling","nextHopProtocol","nextNode","nextPage","nextSibling","nickname","noHref","noModule","noResize","noShade","noValidate","noWrap","node","nodeName","nodeType","nodeValue","nonce","normDepthBufferFromNormView","normalize","normalizedPathSegList","normandyAddonStudy","notRestoredReasons","notationName","notations","note","noteGrainOn","noteOff","noteOn","notifications","notify","now","npnNegotiatedProtocol","numOctaves","number","numberOfChannels","numberOfFrames","numberOfInputs","numberOfItems","numberOfOutputs","numberValue","oMatchesSelector","object","object-fit","object-position","objectFit","objectPosition","objectStore","objectStoreNames","objectType","observe","observedAttributes","occlusionQuerySet","of","off","offscreenBuffering","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","offsetAnchor","offsetDistance","offsetHeight","offsetLeft","offsetNode","offsetParent","offsetPath","offsetPosition","offsetRotate","offsetTop","offsetWidth","offsetX","offsetY","ok","oldState","oldURL","oldValue","oldVersion","olderShadowRoot","omnibox","on","onActivated","onAdded","onAttached","onBoundsChanged","onBrowserUpdateAvailable","onClicked","onCommitFiberRoot","onCommitFiberUnmount","onConnect","onConnectExternal","onConnectNative","onCreated","onDetached","onDisabled","onEnabled","onFocusChanged","onHighlighted","onInstalled","onLine","onMessage","onMessageExternal","onMoved","onPerformanceWarning","onPostCommitFiberRoot","onRemoved","onReplaced","onRestartRequired","onStartup","onSubmittedWorkDone","onSuspend","onSuspendCanceled","onUninstalled","onUpdateAvailable","onUpdated","onUserScriptConnect","onUserScriptMessage","onUserSettingsChanged","onZoomChange","onabort","onabsolutedeviceorientation","onactivate","onactive","onaddsourcebuffer","onaddstream","onaddtrack","onafterprint","onafterscriptexecute","onafterupdate","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onappinstalled","onaudioend","onaudioprocess","onaudiostart","onautocomplete","onautocompleteerror","onauxclick","onbeforeactivate","onbeforecopy","onbeforecut","onbeforedeactivate","onbeforeeditfocus","onbeforeinput","onbeforeinstallprompt","onbeforematch","onbeforepaste","onbeforeprint","onbeforescriptexecute","onbeforetoggle","onbeforeunload","onbeforeupdate","onbeforexrselect","onbegin","onblocked","onblur","onbounce","onboundary","onbufferedamountlow","oncached","oncancel","oncandidatewindowhide","oncandidatewindowshow","oncandidatewindowupdate","oncanplay","oncanplaythrough","oncapturehandlechange","once","oncellchange","onchange","oncharacterboundsupdate","oncharacteristicvaluechanged","onchargingchange","onchargingtimechange","onchecking","onclick","onclose","onclosing","oncommand","oncompassneedscalibration","oncomplete","oncompositionend","oncompositionstart","onconnect","onconnecting","onconnectionavailable","onconnectionstatechange","oncontentvisibilityautostatechange","oncontextlost","oncontextmenu","oncontextrestored","oncontrollerchange","oncontrolselect","oncopy","oncuechange","oncurrententrychange","oncurrentscreenchange","oncut","ondataavailable","ondatachannel","ondatasetchanged","ondatasetcomplete","ondblclick","ondeactivate","ondequeue","ondevicechange","ondevicelight","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute","ondeviceproximity","ondischargingtimechange","ondisconnect","ondisplay","ondispose","ondownloading","ondownloadprogress","ondrag","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onencrypted","onend","onended","onenter","onenterpictureinpicture","onerror","onerrorupdate","onexit","onfencedtreeclick","onfilterchange","onfinish","onfocus","onfocusin","onfocusout","onformdata","onfreeze","onfullscreenchange","onfullscreenerror","ongamepadconnected","ongamepaddisconnected","ongatheringstatechange","ongattserverdisconnected","ongeometrychange","ongesturechange","ongestureend","ongesturestart","ongotpointercapture","onhashchange","onhelp","onicecandidate","onicecandidateerror","oniceconnectionstatechange","onicegatheringstatechange","oninactive","oninput","oninputreport","oninputsourceschange","oninvalid","onkeydown","onkeypress","onkeystatuseschange","onkeyup","onlanguagechange","onlayoutcomplete","onleavepictureinpicture","onlevelchange","onload","onloadT","onloadeddata","onloadedmetadata","onloadend","onloading","onloadingdone","onloadingerror","onloadstart","onlosecapture","onlostpointercapture","only","onmanagedconfigurationchange","onmark","onmessage","onmessageerror","onmidimessage","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onmove","onmoveend","onmovestart","onmozfullscreenchange","onmozfullscreenerror","onmozorientationchange","onmozpointerlockchange","onmozpointerlockerror","onmscontentzoom","onmsfullscreenchange","onmsfullscreenerror","onmsgesturechange","onmsgesturedoubletap","onmsgestureend","onmsgesturehold","onmsgesturestart","onmsgesturetap","onmsgotpointercapture","onmsinertiastart","onmslostpointercapture","onmsmanipulationstatechanged","onmsneedkey","onmsorientationchange","onmspointercancel","onmspointerdown","onmspointerenter","onmspointerhover","onmspointerleave","onmspointermove","onmspointerout","onmspointerover","onmspointerup","onmssitemodejumplistitemremoved","onmsthumbnailclick","onmute","onnavigate","onnavigateerror","onnavigatesuccess","onnegotiationneeded","onnomatch","onnoupdate","onobsolete","onoffline","ononline","onopen","onorientationchange","onpagechange","onpagehide","onpagereveal","onpageshow","onpageswap","onpaste","onpause","onpayerdetailchange","onpaymentmethodchange","onplay","onplaying","onpluginstreamstart","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointerlockchange","onpointerlockerror","onpointermove","onpointerout","onpointerover","onpointerrawupdate","onpointerup","onpopstate","onprerenderingchange","onprioritychange","onprocessorerror","onprogress","onpropertychange","onratechange","onreading","onreadystatechange","onreflectionchange","onrejectionhandled","onrelease","onremove","onremovesourcebuffer","onremovestream","onremovetrack","onrepeat","onreset","onresize","onresizeend","onresizestart","onresourcetimingbufferfull","onresult","onresume","onrowenter","onrowexit","onrowsdelete","onrowsinserted","onscreenschange","onscroll","onscrollend","onscrollsnapchange","onscrollsnapchanging","onsearch","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectedcandidatepairchange","onselectend","onselectionchange","onselectstart","onshippingaddresschange","onshippingoptionchange","onshow","onsignalingstatechange","onsinkchange","onslotchange","onsoundend","onsoundstart","onsourceclose","onsourceclosed","onsourceended","onsourceopen","onspeechend","onspeechstart","onsqueeze","onsqueezeend","onsqueezestart","onstalled","onstart","onstatechange","onstop","onstorage","onstoragecommit","onsubmit","onsuccess","onsuspend","onterminate","ontextformatupdate","ontextinput","ontextupdate","ontimeout","ontimeupdate","ontoggle","ontonechange","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontrack","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onuncapturederror","onunhandledrejection","onunload","onunmute","onupdate","onupdateend","onupdatefound","onupdateready","onupdatestart","onupgradeneeded","onuserproximity","onversionchange","onvisibilitychange","onvoiceschanged","onvolumechange","onvrdisplayactivate","onvrdisplayconnect","onvrdisplaydeactivate","onvrdisplaydisconnect","onvrdisplaypresentchange","onwaiting","onwaitingforkey","onwarning","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkitcurrentplaybacktargetiswirelesschanged","onwebkitfullscreenchange","onwebkitfullscreenerror","onwebkitkeyadded","onwebkitkeyerror","onwebkitkeymessage","onwebkitneedkey","onwebkitorientationchange","onwebkitplaybacktargetavailabilitychanged","onwebkitpointerlockchange","onwebkitpointerlockerror","onwebkitresourcetimingbufferfull","onwebkittransitionend","onwheel","onzoom","onzoomlevelchange","opacity","open","openCursor","openDatabase","openKeyCursor","openOptionsPage","openOrClosedShadowRoot","openPopup","opened","opener","opera","operation","operationType","operator","opr","optimum","options","or","order","orderX","orderY","ordered","org","organization","orient","orientAngle","orientType","orientation","orientationX","orientationY","orientationZ","origin","originAgentCluster","originalPolicy","originalTarget","ornaments","orphans","os","oscpu","outerHTML","outerHeight","outerText","outerWidth","outgoingHighWaterMark","outgoingMaxAge","outline","outline-color","outline-offset","outline-style","outline-width","outlineColor","outlineOffset","outlineStyle","outlineWidth","outputBuffer","outputChannelCount","outputLanguage","outputLatency","outputs","overallProgress","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overflowAnchor","overflowBlock","overflowClipMargin","overflowInline","overflowWrap","overflowX","overflowY","overlaysContent","overrideColors","overrideMimeType","oversample","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","overscrollBehavior","overscrollBehaviorBlock","overscrollBehaviorInline","overscrollBehaviorX","overscrollBehaviorY","ownKeys","ownerDocument","ownerElement","ownerNode","ownerRule","ownerSVGElement","owningElement","p1","p2","p3","p4","packetSize","packets","pad","padEnd","padStart","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","paddingBlock","paddingBlockEnd","paddingBlockStart","paddingBottom","paddingInline","paddingInlineEnd","paddingInlineStart","paddingLeft","paddingRight","paddingTop","page","page-break-after","page-break-before","page-break-inside","page-orientation","pageAction","pageBreakAfter","pageBreakBefore","pageBreakInside","pageCount","pageLeft","pageOrientation","pageT","pageTop","pageX","pageXOffset","pageY","pageYOffset","pages","paint-order","paintOrder","paintRequests","paintTime","paintType","paintWorklet","palette","pan","panningModel","parameterData","parameters","parent","parentElement","parentNode","parentRule","parentStyleSheet","parentTextEdit","parentWindow","parse","parseAll","parseCreationOptionsFromJSON","parseFloat","parseFromString","parseHTMLUnsafe","parseInt","parseRequestOptionsFromJSON","part","participants","passOp","passive","password","pasteHTML","path","pathLength","pathSegList","pathSegType","pathSegTypeAsLetter","pathname","pattern","patternContentUnits","patternMismatch","patternTransform","patternUnits","pause","pauseAnimations","pauseDepthSensing","pauseDuration","pauseOnExit","pauseProfilers","pauseTransformFeedback","paused","payerEmail","payerName","payerPhone","paymentManager","pc","pdfViewerEnabled","peerIdentity","pending","pendingLocalDescription","pendingRemoteDescription","percent","performance","periodicSync","permission","permissionState","permissions","persist","persisted","persistentDeviceId","personalbar","perspective","perspective-origin","perspectiveOrigin","phone","phoneticFamilyName","phoneticGivenName","photo","phrase","phrases","pictureInPictureChild","pictureInPictureElement","pictureInPictureEnabled","pictureInPictureWindow","ping","pipeThrough","pipeTo","pitch","pixelBottom","pixelDepth","pixelFormat","pixelHeight","pixelLeft","pixelRight","pixelStorei","pixelTop","pixelUnitToMillimeterX","pixelUnitToMillimeterY","pixelWidth","pkcs11","place-content","place-items","place-self","placeContent","placeItems","placeSelf","placeholder","platform","platformVersion","platforms","play","playEffect","playState","playbackRate","playbackState","playbackTime","played","playoutDelayHint","playsInline","plugins","pluginspage","pname","pointer-events","pointerBeforeReferenceNode","pointerEnabled","pointerEvents","pointerId","pointerLockElement","pointerType","points","pointsAtX","pointsAtY","pointsAtZ","polygonOffset","pop","popDebugGroup","popErrorScope","popover","popoverTargetAction","popoverTargetElement","populateMatrix","popupWindowFeatures","popupWindowName","popupWindowURI","port","port1","port2","ports","posBottom","posHeight","posLeft","posRight","posTop","posWidth","pose","position","position-anchor","position-area","positionAlign","positionAnchor","positionArea","positionTry","positionTryFallbacks","positionVisibility","positionX","positionY","positionZ","postError","postMessage","postTask","postalCode","poster","postscriptName","pow","powerEfficient","powerOff","powerPreference","preMultiplySelf","precision","preferredReflectionFormat","preferredStyleSheetSet","preferredStylesheetSet","prefix","preload","premultipliedAlpha","prepend","prerendering","presentation","presentationArea","presentationStyle","presentationTime","preserveAlpha","preserveAspectRatio","preserveAspectRatioString","preservesPitch","pressed","pressure","prevValue","preventDefault","preventExtensions","preventSilentAccess","previousElementSibling","previousNode","previousPage","previousPriority","previousRect","previousScale","previousSibling","previousTranslate","primaries","primaryKey","primaryLightDirection","primaryLightIntensity","primitive","primitiveType","primitiveUnits","principals","print","print-color-adjust","printColorAdjust","printPreview","priority","privacy","privateKey","privateToken","probablySupportsContext","probeSpace","process","processIceMessage","processLocally","processingEnd","processingStart","processorOptions","product","productId","productName","productSub","profile","profileEnd","profiles","projectionMatrix","promise","promising","prompt","properties","propertyIsEnumerable","propertyName","protectedAudience","protocol","protocolLong","prototype","provider","proxy","pseudoClass","pseudoElement","pt","publicId","publicKey","published","pulse","push","pushDebugGroup","pushErrorScope","pushManager","pushNotification","pushState","put","putImageData","px","quadraticCurveTo","qualifier","quaternion","query","queryCommandEnabled","queryCommandIndeterm","queryCommandState","queryCommandSupported","queryCommandText","queryCommandValue","queryFeatureSupport","queryLocalFonts","queryPermission","querySelector","querySelectorAll","querySet","queue","queueMicrotask","quota","quote","quotes","r","r1","r2","race","rad","radiogroup","radius","radiusX","radiusY","random","randomUUID","range","rangeCount","rangeEnd","rangeMax","rangeMin","rangeOffset","rangeOverflow","rangeParent","rangeStart","rangeUnderflow","rate","ratio","raw","rawId","rawJSON","rawValueToMeters","rcap","rch","read","readAsArrayBuffer","readAsBinaryString","readAsBlob","readAsDataURL","readAsText","readBuffer","readEntries","readOnly","readPixels","readReportRequested","readText","readValue","readable","ready","readyState","reason","reasons","reboot","receiveFeatureReport","receivedAlert","receiver","receivers","recipient","recommendedViewportScale","reconnect","recordNumber","recordsAvailable","recordset","rect","red","redEyeReduction","redirect","redirectCount","redirectEnd","redirectStart","redirected","reduce","reduceRight","reduction","refDistance","refX","refY","referenceNode","referenceSpace","referrer","referrerPolicy","refresh","region","regionAnchorX","regionAnchorY","regionId","regions","register","registerContentHandler","registerElement","registerInternalModuleStart","registerInternalModuleStop","registerProperty","registerProtocolHandler","reject","rel","relList","relatedAddress","relatedNode","relatedPort","relatedTarget","relayProtocol","release","releaseCapture","releaseEvents","releaseInterface","releaseLock","releasePointerCapture","releaseShaderCompiler","released","reliability","reliable","reliableWrite","reload","rem","remainingSpace","remote","remoteDescription","remove","removeAllRanges","removeAttribute","removeAttributeNS","removeAttributeNode","removeBehavior","removeChild","removeCue","removeEntry","removeEventListener","removeFilter","removeImport","removeItem","removeListener","removeNamedItem","removeNamedItemNS","removeNode","removeParameter","removeProperty","removeRange","removeRegion","removeRule","removeSiteSpecificTrackingException","removeSourceBuffer","removeStream","removeTrack","removeVariable","removeWakeLockListener","removeWebWideTrackingException","removed","removedNodes","renderBlockingStatus","renderHeight","renderStart","renderState","renderTime","renderWidth","renderbufferStorage","renderbufferStorageMultisample","renderedBuffer","rendererInterfaces","renderers","renderingMode","renotify","repeat","repetitionCount","replace","replaceAdjacentText","replaceAll","replaceChild","replaceChildren","replaceData","replaceId","replaceItem","replaceNode","replaceState","replaceSync","replaceTrack","replaceWholeText","replaceWith","reportError","reportEvent","reportId","reportOnly","reportValidity","request","requestAdapter","requestAdapterInfo","requestAnimationFrame","requestAutocomplete","requestClose","requestData","requestDevice","requestFrame","requestFullscreen","requestHitTestSource","requestHitTestSourceForTransientInput","requestId","requestIdleCallback","requestLightProbe","requestMIDIAccess","requestMediaKeySystemAccess","requestPermission","requestPictureInPicture","requestPointerLock","requestPort","requestPresent","requestPresenter","requestReferenceSpace","requestSession","requestStart","requestStorageAccess","requestStorageAccessFor","requestSubmit","requestTime","requestUpdateCheck","requestVideoFrameCallback","requestViewportScale","requestWindow","requested","requestingWindow","requireInteraction","required","requiredExtensions","requiredFeatures","requiredLimits","reset","resetLatency","resetPose","resetTransform","resetZoomLevel","resizable","resize","resizeBy","resizeTo","resolve","resolveQuerySet","resolveTarget","resource","respond","respondWithNewView","response","responseBody","responseEnd","responseReady","responseStart","responseStatus","responseText","responseType","responseURL","responseXML","restart","restartAfterDelay","restartIce","restore","restrictTo","result","resultIndex","resultType","results","resume","resumeDepthSensing","resumeProfilers","resumeTransformFeedback","retry","returnType","returnValue","rev","reverse","reversed","revocable","revokeObjectURL","rex","rgbColor","ric","right","rightContext","rightDegrees","rightMargin","rightProjectionMatrix","rightViewMatrix","rlh","role","rolloffFactor","root","rootBounds","rootElement","rootMargin","rotate","rotateAxisAngle","rotateAxisAngleSelf","rotateFromVector","rotateFromVectorSelf","rotateSelf","rotation","rotationAngle","rotationRate","round","roundRect","row-gap","rowGap","rowIndex","rowSpan","rows","rowsPerImage","rtcpTransport","rtt","ruby-align","ruby-position","rubyAlign","rubyOverhang","rubyPosition","rules","run","runAdAuction","runtime","runtimeStyle","rx","ry","s","safari","sameDocument","sample","sampleCount","sampleCoverage","sampleInterval","sampleRate","sampleType","sampler","samplerParameterf","samplerParameteri","sandbox","save","saveAsPDF","saveData","scale","scale3d","scale3dSelf","scaleNonUniform","scaleNonUniformSelf","scaleSelf","scheduler","scheduling","scheme","scissor","scope","scopeName","scoped","screen","screenBrightness","screenEnabled","screenLeft","screenPixelToMillimeterX","screenPixelToMillimeterY","screenState","screenTop","screenX","screenY","screens","scriptURL","scripting","scripts","scroll","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollAmount","scrollBehavior","scrollBy","scrollByLines","scrollByPages","scrollDelay","scrollHeight","scrollIntoView","scrollIntoViewIfNeeded","scrollLeft","scrollLeftMax","scrollMargin","scrollMarginBlock","scrollMarginBlockEnd","scrollMarginBlockStart","scrollMarginBottom","scrollMarginInline","scrollMarginInlineEnd","scrollMarginInlineStart","scrollMarginLeft","scrollMarginRight","scrollMarginTop","scrollMaxX","scrollMaxY","scrollPadding","scrollPaddingBlock","scrollPaddingBlockEnd","scrollPaddingBlockStart","scrollPaddingBottom","scrollPaddingInline","scrollPaddingInlineEnd","scrollPaddingInlineStart","scrollPaddingLeft","scrollPaddingRight","scrollPaddingTop","scrollRestoration","scrollSnapAlign","scrollSnapStop","scrollSnapType","scrollTo","scrollTop","scrollTopMax","scrollWidth","scrollX","scrollY","scrollbar-color","scrollbar-gutter","scrollbar-width","scrollbar3dLightColor","scrollbarArrowColor","scrollbarBaseColor","scrollbarColor","scrollbarDarkShadowColor","scrollbarFaceColor","scrollbarGutter","scrollbarHighlightColor","scrollbarShadowColor","scrollbarTrackColor","scrollbarWidth","scrollbars","scrolling","scrollingElement","sctp","sctpCauseCode","sdp","sdpLineNumber","sdpMLineIndex","sdpMid","seal","search","searchBox","searchBoxJavaBridge_","searchParams","sectionRowIndex","secureConnectionStart","securePaymentConfirmationAvailability","security","seed","seek","seekToNextFrame","seekable","seeking","segments","select","selectAllChildren","selectAlternateInterface","selectAudioOutput","selectConfiguration","selectNode","selectNodeContents","selectNodes","selectSingleNode","selectSubString","selectURL","selected","selectedIndex","selectedOptions","selectedStyleSheetSet","selectedStylesheetSet","selectedTrack","selection","selectionDirection","selectionEnd","selectionStart","selector","selectorText","self","send","sendAsBinary","sendBeacon","sendFeatureReport","sendMessage","sendNativeMessage","sendOrder","sendReport","sender","sentAlert","sentTimestamp","separator","serial","serialNumber","serializable","serializeToString","serverTiming","service","serviceWorker","session","sessionId","sessionStorage","sessions","set","setActionHandler","setActive","setAlpha","setAppBadge","setAttribute","setAttributeNS","setAttributeNode","setAttributeNodeNS","setAttributionReporting","setBadgeBackgroundColor","setBadgeText","setBadgeTextColor","setBaseAndExtent","setBigInt64","setBigUint64","setBindGroup","setBingCurrentSearchDefault","setBlendConstant","setCameraActive","setCapture","setCaptureHandleConfig","setCodecPreferences","setColor","setCompositeOperation","setConfiguration","setConsumer","setCurrentTime","setCustomValidity","setData","setDate","setDragImage","setEnabled","setEnd","setEndAfter","setEndBefore","setEndPoint","setExpires","setFillColor","setFilterRes","setFloat16","setFloat32","setFloat64","setFloatValue","setFocusBehavior","setFormValue","setFromBase64","setFromHex","setFullYear","setHTMLUnsafe","setHeaderExtensionsToNegotiate","setHeaderValue","setHours","setIcon","setIdentityProvider","setImmediate","setIndexBuffer","setInt16","setInt32","setInt8","setInterval","setItem","setKeyframes","setLineCap","setLineDash","setLineJoin","setLineWidth","setLiveSeekableRange","setLocalDescription","setMatrix","setMatrixValue","setMediaKeys","setMicrophoneActive","setMilliseconds","setMinutes","setMiterLimit","setMonth","setNamedItem","setNamedItemNS","setNonUserCodeExceptions","setOrientToAngle","setOrientToAuto","setOrientation","setOverrideHistoryNavigationMode","setPaint","setParameter","setParameters","setPathData","setPeriodicWave","setPipeline","setPointerCapture","setPopup","setPosition","setPositionState","setPreference","setPriority","setPrivateToken","setProperty","setPrototypeOf","setRGBColor","setRGBColorICCColor","setRadius","setRangeText","setRemoteDescription","setReportEventDataForAutomaticBeacons","setRequestHeader","setResizable","setResourceTimingBufferSize","setRotate","setScale","setScissorRect","setSeconds","setSelectionRange","setServerCertificate","setShadow","setSharedStorageContext","setSignals","setSinkId","setSkewX","setSkewY","setStart","setStartAfter","setStartBefore","setStatus","setStdDeviation","setStencilReference","setStreams","setStrictMode","setStringValue","setStrokeColor","setSuggestResult","setTargetAtTime","setTargetValueAtTime","setTime","setTimeout","setTitle","setTransform","setTranslate","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setUint16","setUint32","setUint8","setUninstallURL","setUpdateUrlData","setUri","setValidity","setValueAtTime","setValueCurveAtTime","setVariable","setVelocity","setVersion","setVertexBuffer","setViewport","setYear","setZoom","setZoomSettings","settingName","settingValue","sex","shaderLocation","shaderSource","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","shadowRoot","shadowRootClonable","shadowRootDelegatesFocus","shadowRootMode","shadowRootSerializable","shape","shape-image-threshold","shape-margin","shape-outside","shape-rendering","shapeImageThreshold","shapeMargin","shapeOutside","shapeRendering","share","sharedContext","sharedStorage","sharedStorageWritable","sheet","shift","shiftKey","shiftLeft","shippingAddress","shippingOption","shippingType","show","showDirectoryPicker","showHelp","showModal","showModalDialog","showModelessDialog","showNotification","showOpenFilePicker","showPicker","showPopover","showSaveFilePicker","sidebar","sidebarAction","sign","signal","signalAllAcceptedCredentials","signalCurrentUserDetails","signalUnknownCredential","signalingState","signature","silent","sin","singleNodeValue","sinh","sinkId","sittingToStandingTransform","size","sizeAdjust","sizeToContent","sizeX","sizeZ","sizes","skewX","skewXSelf","skewY","skewYSelf","skipTransition","skipped","slice","slope","slot","slotAssignment","small","smil","smooth","smoothingTimeConstant","snapTargetBlock","snapTargetInline","snapToLines","snapshotItem","snapshotLength","some","sort","sortingCode","source","sourceBuffer","sourceBuffers","sourceCapabilities","sourceCharPosition","sourceElement","sourceFile","sourceFunctionName","sourceIndex","sourceLanguage","sourceMap","sourceURL","sources","spacing","span","speak","speakAs","speaking","species","specified","specularConstant","specularExponent","speechSynthesis","speed","speedOfSound","spellcheck","sphericalHarmonicsCoefficients","splice","split","splitText","spreadMethod","sqrt","src","srcElement","srcFactor","srcFilter","srcObject","srcUrn","srcdoc","srclang","srcset","stack","stackTraceLimit","stacktrace","stageParameters","standalone","standby","start","startContainer","startE","startIce","startLoadTime","startMessages","startNotifications","startOffset","startProfiling","startRendering","startShark","startTime","startViewTransition","startsWith","state","states","stats","status","statusCode","statusMessage","statusText","statusbar","stdDeviationX","stdDeviationY","stencilBack","stencilClearValue","stencilFront","stencilFunc","stencilFuncSeparate","stencilLoadOp","stencilMask","stencilMaskSeparate","stencilOp","stencilOpSeparate","stencilReadMask","stencilReadOnly","stencilStoreOp","stencilWriteMask","step","stepDown","stepMismatch","stepMode","stepUp","sticky","stitchTiles","stop","stop-color","stop-opacity","stopColor","stopImmediatePropagation","stopNotifications","stopOpacity","stopProfiling","stopPropagation","stopShark","stopped","storage","storageArea","storageBuckets","storageName","storageStatus","storageTexture","store","storeOp","storeSiteSpecificTrackingException","storeWebWideTrackingException","stpVersion","stream","streamErrorCode","streams","stretch","strike","string","stringValue","stringify","stripIndexFormat","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeRect","strokeStyle","strokeText","strokeWidth","structuredClone","style","styleAndLayoutStart","styleFloat","styleMap","styleMedia","styleSheet","styleSheetSets","styleSheets","styleset","stylistic","sub","subarray","subgroupMaxSize","subgroupMinSize","subject","submit","submitFrame","submitter","subscribe","substr","substring","substringData","subtle","subtree","suffix","suffixes","sumPrecise","summarize","summarizeStreaming","summary","sup","supported","supportedContentEncodings","supportedEntryTypes","supportedValuesOf","supports","supportsFiber","supportsSession","supportsText","suppressed","surfaceScale","surroundContents","suspend","suspendRedraw","svb","svh","svi","svmax","svmin","svw","swapCache","swapNode","swash","sweepFlag","switchMap","symbols","symmetricDifference","sync","syntax","sysexEnabled","system","systemCode","systemId","systemLanguage","systemXDPI","systemYDPI","tBodies","tFoot","tHead","tab","tab-size","tabId","tabIds","tabIndex","tabSize","table","table-layout","tableLayout","tableValues","tabs","tag","tagName","tagUrn","tags","taintEnabled","take","takePhoto","takeRecords","takeUntil","tan","tangentialPressure","tanh","target","targetAddressSpace","targetElement","targetLanguage","targetRayMode","targetRaySpace","targetTouches","targetURL","targetX","targetY","targets","tcpType","tee","tel","telemetry","terminate","test","texImage2D","texImage3D","texParameterf","texParameteri","texStorage2D","texStorage3D","texSubImage2D","texSubImage3D","text","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","textAlign","textAlignLast","textAnchor","textAutospace","textBaseline","textCombineUpright","textContent","textDecoration","textDecorationBlink","textDecorationColor","textDecorationInset","textDecorationLine","textDecorationLineThrough","textDecorationNone","textDecorationOverline","textDecorationSkipInk","textDecorationStyle","textDecorationThickness","textDecorationUnderline","textEmphasis","textEmphasisColor","textEmphasisPosition","textEmphasisStyle","textIndent","textJustify","textJustifyTrim","textKashida","textKashidaSpace","textLength","textOrientation","textOverflow","textRendering","textShadow","textTracks","textTransform","textUnderlineOffset","textUnderlinePosition","textWrap","textWrapMode","textWrapStyle","texture","theme","then","threadId","threshold","thresholds","throwIfAborted","tiltX","tiltY","time","timeEnd","timeLog","timeOrigin","timeRemaining","timeStamp","timecode","timeline","timelineTime","timeout","timestamp","timestampOffset","timestampWrites","timing","title","titlebarAreaRect","tlsChannelId","to","toArray","toBase64","toBlob","toDataURL","toDateString","toElement","toExponential","toFixed","toFloat32Array","toFloat64Array","toGMTString","toHex","toISOString","toJSON","toLocaleDateString","toLocaleFormat","toLocaleLowerCase","toLocaleString","toLocaleTimeString","toLocaleUpperCase","toLowerCase","toMatrix","toMethod","toPrecision","toPrimitive","toReversed","toSdp","toSorted","toSource","toSpliced","toStaticHTML","toString","toStringTag","toSum","toTemporalInstant","toTimeString","toUTCString","toUpperCase","toWellFormed","toggle","toggleAttribute","toggleLongPressEnabled","togglePopover","toggleReaderMode","token","tone","toneBuffer","tooLong","tooShort","toolbar","top","topMargin","topSites","topology","total","totalFrameDelay","totalFrames","totalFramesDuration","totalVideoFrames","touch-action","touchAction","touched","touches","trace","track","trackVisibility","trackedAnchors","tracks","tran","transaction","transactions","transceiver","transfer","transferControlToOffscreen","transferFromImageBitmap","transferImageBitmap","transferIn","transferOut","transferSize","transferToFixedLength","transferToImageBitmap","transform","transform-box","transform-origin","transform-style","transformBox","transformFeedbackVaryings","transformOrigin","transformPoint","transformString","transformStyle","transformToDocument","transformToFragment","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","transitionBehavior","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","translate","translateSelf","translateStreaming","translationX","translationY","transport","traverseTo","trim","trimEnd","trimLeft","trimRight","trimStart","trueSpeed","trunc","truncate","trustedTypes","try","turn","twist","type","typeDetail","typeMismatch","typeMustMatch","types","u2f","ubound","uint16","uint32","uint8","uint8Clamped","unadjustedMovement","unclippedDepth","unconfigure","undefined","underlineStyle","underlineThickness","unescape","uneval","ungroup","unicode","unicode-bidi","unicodeBidi","unicodeRange","unicodeSets","uniform1f","uniform1fv","uniform1i","uniform1iv","uniform1ui","uniform1uiv","uniform2f","uniform2fv","uniform2i","uniform2iv","uniform2ui","uniform2uiv","uniform3f","uniform3fv","uniform3i","uniform3iv","uniform3ui","uniform3uiv","uniform4f","uniform4fv","uniform4i","uniform4iv","uniform4ui","uniform4uiv","uniformBlockBinding","uniformMatrix2fv","uniformMatrix2x3fv","uniformMatrix2x4fv","uniformMatrix3fv","uniformMatrix3x2fv","uniformMatrix3x4fv","uniformMatrix4fv","uniformMatrix4x2fv","uniformMatrix4x3fv","uninstallSelf","union","unique","uniqueID","uniqueNumber","unit","unitType","units","unloadEventEnd","unloadEventStart","unlock","unmap","unmount","unobserve","unpackColorSpace","unpause","unpauseAnimations","unreadCount","unregister","unregisterContentHandler","unregisterProtocolHandler","unscopables","unselectable","unshift","unsubscribe","unsuspendRedraw","unsuspendRedrawAll","unwatch","unwrapKey","upDegrees","upX","upY","upZ","update","updateAdInterestGroups","updateCallbackDone","updateCharacterBounds","updateCommands","updateControlBounds","updateCurrentEntry","updateIce","updateInkTrailStartPoint","updateInterval","updatePlaybackRate","updateRangeEnd","updateRangeStart","updateRenderState","updateSelection","updateSelectionBounds","updateSettings","updateText","updateTiming","updateViaCache","updateWith","updated","updating","upgrade","upload","uploadTotal","uploaded","upper","upperBound","upperOpen","uri","url","urn","urns","usage","usages","usb","usbVersionMajor","usbVersionMinor","usbVersionSubminor","use","useCurrentView","useMap","useProgram","usedSpace","user-select","userActivation","userAgent","userAgentAllowsProtocol","userAgentData","userChoice","userHandle","userHint","userInitiated","userLanguage","userSelect","userState","userVisibleOnly","username","usernameFragment","utterance","uuid","v8BreakIterator","vAlign","vLink","valid","validate","validateProgram","validationMessage","validity","value","valueAsDate","valueAsNumber","valueAsString","valueInSpecifiedUnits","valueMissing","valueOf","valueText","valueType","values","variable","variant","variationSettings","vb","vector-effect","vectorEffect","velocityAngular","velocityExpansion","velocityX","velocityY","vendor","vendorId","vendorSub","verify","version","vertex","vertexAttrib1f","vertexAttrib1fv","vertexAttrib2f","vertexAttrib2fv","vertexAttrib3f","vertexAttrib3fv","vertexAttrib4f","vertexAttrib4fv","vertexAttribDivisor","vertexAttribDivisorANGLE","vertexAttribI4i","vertexAttribI4iv","vertexAttribI4ui","vertexAttribI4uiv","vertexAttribIPointer","vertexAttribPointer","vertical","vertical-align","verticalAlign","verticalOverflow","vh","vi","vibrate","vibrationActuator","videoBitsPerSecond","videoHeight","videoTracks","videoWidth","view","viewBox","viewBoxString","viewDimension","viewFormats","viewTarget","viewTargetString","viewTransition","viewTransitionClass","viewTransitionName","viewport","viewportAnchorX","viewportAnchorY","viewportElement","views","violatedDirective","virtualKeyboard","virtualKeyboardPolicy","visibility","visibilityState","visible","visibleRect","visualViewport","vlinkColor","vmax","vmin","voice","voiceURI","volume","vrml","vspace","vw","w","wait","waitAsync","waitSync","waiting","wake","wakeLock","wand","warmup","warn","wasAlternateProtocolAvailable","wasClean","wasDiscarded","wasFetchedViaSpdy","wasNpnNegotiated","watch","watchAvailability","watchPosition","webNavigation","webRequest","webdriver","webkitAddKey","webkitAlignContent","webkitAlignItems","webkitAlignSelf","webkitAnimation","webkitAnimationDelay","webkitAnimationDirection","webkitAnimationDuration","webkitAnimationFillMode","webkitAnimationIterationCount","webkitAnimationName","webkitAnimationPlayState","webkitAnimationTimingFunction","webkitAppearance","webkitAudioContext","webkitAudioDecodedByteCount","webkitAudioPannerNode","webkitBackfaceVisibility","webkitBackground","webkitBackgroundAttachment","webkitBackgroundClip","webkitBackgroundColor","webkitBackgroundImage","webkitBackgroundOrigin","webkitBackgroundPosition","webkitBackgroundPositionX","webkitBackgroundPositionY","webkitBackgroundRepeat","webkitBackgroundSize","webkitBackingStorePixelRatio","webkitBorderBottomLeftRadius","webkitBorderBottomRightRadius","webkitBorderImage","webkitBorderImageOutset","webkitBorderImageRepeat","webkitBorderImageSlice","webkitBorderImageSource","webkitBorderImageWidth","webkitBorderRadius","webkitBorderTopLeftRadius","webkitBorderTopRightRadius","webkitBoxAlign","webkitBoxDirection","webkitBoxFlex","webkitBoxOrdinalGroup","webkitBoxOrient","webkitBoxPack","webkitBoxShadow","webkitBoxSizing","webkitCancelAnimationFrame","webkitCancelFullScreen","webkitCancelKeyRequest","webkitCancelRequestAnimationFrame","webkitClearResourceTimings","webkitClipPath","webkitClosedCaptionsVisible","webkitConvertPointFromNodeToPage","webkitConvertPointFromPageToNode","webkitCreateShadowRoot","webkitCurrentFullScreenElement","webkitCurrentPlaybackTargetIsWireless","webkitDecodedFrameCount","webkitDirectionInvertedFromDevice","webkitDisplayingFullscreen","webkitDroppedFrameCount","webkitEnterFullScreen","webkitEnterFullscreen","webkitEntries","webkitExitFullScreen","webkitExitFullscreen","webkitExitPointerLock","webkitFilter","webkitFlex","webkitFlexBasis","webkitFlexDirection","webkitFlexFlow","webkitFlexGrow","webkitFlexShrink","webkitFlexWrap","webkitFontFeatureSettings","webkitFullScreenKeyboardInputAllowed","webkitFullscreenElement","webkitFullscreenEnabled","webkitGenerateKeyRequest","webkitGetAsEntry","webkitGetDatabaseNames","webkitGetEntries","webkitGetEntriesByName","webkitGetEntriesByType","webkitGetFlowByName","webkitGetGamepads","webkitGetImageDataHD","webkitGetNamedFlows","webkitGetRegionFlowRanges","webkitGetUserMedia","webkitHasClosedCaptions","webkitHidden","webkitIDBCursor","webkitIDBDatabase","webkitIDBDatabaseError","webkitIDBDatabaseException","webkitIDBFactory","webkitIDBIndex","webkitIDBKeyRange","webkitIDBObjectStore","webkitIDBRequest","webkitIDBTransaction","webkitImageSmoothingEnabled","webkitIndexedDB","webkitInitMessageEvent","webkitIsFullScreen","webkitJustifyContent","webkitKeys","webkitLineClamp","webkitLineDashOffset","webkitLockOrientation","webkitMask","webkitMaskClip","webkitMaskComposite","webkitMaskImage","webkitMaskOrigin","webkitMaskPosition","webkitMaskPositionX","webkitMaskPositionY","webkitMaskRepeat","webkitMaskSize","webkitMatchesSelector","webkitMediaStream","webkitNotifications","webkitOfflineAudioContext","webkitOrder","webkitOrientation","webkitPeerConnection00","webkitPersistentStorage","webkitPerspective","webkitPerspectiveOrigin","webkitPointerLockElement","webkitPostMessage","webkitPreservesPitch","webkitPutImageDataHD","webkitRTCPeerConnection","webkitRegionOverset","webkitRelativePath","webkitRequestAnimationFrame","webkitRequestFileSystem","webkitRequestFullScreen","webkitRequestFullscreen","webkitRequestPointerLock","webkitResolveLocalFileSystemURL","webkitSetMediaKeys","webkitSetResourceTimingBufferSize","webkitShadowRoot","webkitShowPlaybackTargetPicker","webkitSlice","webkitSpeechGrammar","webkitSpeechGrammarList","webkitSpeechRecognition","webkitSpeechRecognitionError","webkitSpeechRecognitionEvent","webkitStorageInfo","webkitSupportsFullscreen","webkitTemporaryStorage","webkitTextFillColor","webkitTextSecurity","webkitTextSizeAdjust","webkitTextStroke","webkitTextStrokeColor","webkitTextStrokeWidth","webkitTransform","webkitTransformOrigin","webkitTransformStyle","webkitTransition","webkitTransitionDelay","webkitTransitionDuration","webkitTransitionProperty","webkitTransitionTimingFunction","webkitURL","webkitUnlockOrientation","webkitUserSelect","webkitVideoDecodedByteCount","webkitVisibilityState","webkitWirelessVideoPlaybackDisabled","webkitdirectory","webkitdropzone","webstore","weight","wgslLanguageFeatures","whatToShow","wheelDelta","wheelDeltaX","wheelDeltaY","when","whenDefined","which","white-space","white-space-collapse","whiteSpace","whiteSpaceCollapse","wholeText","widows","width","will-change","willChange","willValidate","window","windowAttribution","windowControlsOverlay","windowId","windowIds","windows","with","withCredentials","withResolvers","word-break","word-spacing","word-wrap","wordBreak","wordSpacing","wordWrap","workerCacheLookupStart","workerFinalSourceType","workerMatchedSourceType","workerRouterEvaluationStart","workerStart","worklet","wow64","wrap","wrapKey","writable","writableAuxiliaries","write","writeBuffer","writeMask","writeText","writeTexture","writeTimestamp","writeValue","writeValueWithResponse","writeValueWithoutResponse","writeWithoutResponse","writeln","writing-mode","writingMode","writingSuggestions","x","x1","x2","xChannelSelector","xmlEncoding","xmlStandalone","xmlVersion","xmlbase","xmllang","xmlspace","xor","xr","y","y1","y2","yChannelSelector","yandex","yield","z","z-index","zIndex","zoom","zoomAndPan","zoomLevel","zoomRectScreen"];function find_builtins(i){domprops.forEach(l);var n=["Symbol","Map","Promise","Proxy","Reflect","Set","WeakMap","WeakSet"],o={},s=typeof global=="object"?global:self;n.forEach(function(f){o[f]=s[f]||function(){}}),["null","true","false","NaN","Infinity","-Infinity","undefined"].forEach(l),[Object,Array,Function,Number,String,Boolean,Error,Math,Date,RegExp,o.Symbol,ArrayBuffer,DataView,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,eval,EvalError,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,isFinite,isNaN,JSON,o.Map,parseFloat,parseInt,o.Promise,o.Proxy,RangeError,ReferenceError,o.Reflect,o.Set,SyntaxError,TypeError,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,URIError,o.WeakMap,o.WeakSet].forEach(function(f){Object.getOwnPropertyNames(f).map(l),f.prototype&&Object.getOwnPropertyNames(f.prototype).map(l)});function l(f){i.add(f)}}function reserve_quoted_keys(i,n){function o(s){push_uniq(n,s)}i.walk(new TreeWalker(function(s){s instanceof AST_ObjectKeyVal&&s.quote?o(s.key):s instanceof AST_ObjectProperty&&s.quote?o(s.key.name):s instanceof AST_Sub&&addStrings(s.property,o)}))}function addStrings(i,n){i.walk(new TreeWalker(function(o){return o instanceof AST_Sequence?addStrings(o.tail_node(),n):o instanceof AST_String?n(o.value):o instanceof AST_Conditional&&(addStrings(o.consequent,n),addStrings(o.alternative,n)),!0}))}function mangle_private_properties(i,n){var o=-1,s=new Map,l=n.nth_identifier||base54;return i=i.transform(new TreeTransformer(function(E){E instanceof AST_ClassPrivateProperty||E instanceof AST_PrivateMethod||E instanceof AST_PrivateGetter||E instanceof AST_PrivateSetter||E instanceof AST_PrivateIn?E.key.name=f(E.key.name):E instanceof AST_DotHash&&(E.property=f(E.property))})),i;function f(E){let g=s.get(E);return g||(g=l.get(++o),s.set(E,g)),g}}function find_annotated_props(i){var n=new Set;return walk(i,o=>{o instanceof AST_ClassPrivateProperty||o instanceof AST_PrivateMethod||o instanceof AST_PrivateGetter||o instanceof AST_PrivateSetter||o instanceof AST_DotHash||(o instanceof AST_ObjectKeyVal?typeof o.key=="string"&&has_annotation(o,_MANGLEPROP)&&n.add(o.key):o instanceof AST_ObjectProperty?has_annotation(o,_MANGLEPROP)&&n.add(o.key.name):o instanceof AST_Dot?has_annotation(o,_MANGLEPROP)&&n.add(o.property):o instanceof AST_Sub&&o.property instanceof AST_String&&has_annotation(o,_MANGLEPROP)&&n.add(o.property.value))}),n}function mangle_properties(i,n,o=find_annotated_props(i)){n=defaults(n,{builtins:!1,cache:null,debug:!1,keep_quoted:!1,nth_identifier:base54,only_cache:!1,regex:null,reserved:null,undeclared:!1,only_annotated:!1},!0);var s=n.nth_identifier,l=n.reserved;Array.isArray(l)||(l=[l]);var f=new Set(l);n.builtins||find_builtins(f);var E=-1,g;n.cache?g=n.cache.props:g=new Map;var N=n.only_annotated,x=n.regex&&new RegExp(n.regex),w=n.debug!==!1,R;w&&(R=n.debug===!0?"":n.debug);var k=new Set,B=new Set;g.forEach(L=>B.add(L));var P=!!n.keep_quoted;return i.walk(new TreeWalker(function(L){if(!(L instanceof AST_ClassPrivateProperty||L instanceof AST_PrivateMethod||L instanceof AST_PrivateGetter||L instanceof AST_PrivateSetter||L instanceof AST_DotHash))if(L instanceof AST_ObjectKeyVal)typeof L.key=="string"&&(!P||!L.quote)&&d(L.key);else if(L instanceof AST_ObjectProperty)(!P||!L.quote)&&d(L.key.name);else if(L instanceof AST_Dot){var G=!!n.undeclared;if(!G){for(var p=L;p.expression;)p=p.expression;G=!(p.thedef&&p.thedef.undeclared)}G&&(!P||!L.quote)&&d(L.property)}else L instanceof AST_Sub?P||addStrings(L.property,d):L instanceof AST_Call&&L.expression.print_to_string()=="Object.defineProperty"?addStrings(L.args[1],d):L instanceof AST_Binary&&L.operator==="in"?addStrings(L.left,d):L instanceof AST_String&&has_annotation(L,_KEY)&&d(L.value)})),i.transform(new TreeTransformer(function(L){L instanceof AST_ClassPrivateProperty||L instanceof AST_PrivateMethod||L instanceof AST_PrivateGetter||L instanceof AST_PrivateSetter||L instanceof AST_DotHash||(L instanceof AST_ObjectKeyVal?typeof L.key=="string"&&(!P||!L.quote)&&(L.key=y(L.key)):L instanceof AST_ObjectProperty?(!P||!L.quote)&&(L.computed_key()||(L.key.name=y(L.key.name))):L instanceof AST_Dot?(!P||!L.quote)&&(L.property=y(L.property)):!P&&L instanceof AST_Sub?L.property=F(L.property):L instanceof AST_Call&&L.expression.print_to_string()=="Object.defineProperty"?L.args[1]=F(L.args[1]):L instanceof AST_Binary&&L.operator==="in"?L.left=F(L.left):L instanceof AST_String&&has_annotation(L,_KEY)&&(clear_annotation(L),L.value=y(L.value)))}));function z(L){return B.has(L)||f.has(L)?!1:n.only_cache?g.has(L):!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(L)}function m(L){return N&&!o.has(L)?!1:x&&!x.test(L)?o.has(L):f.has(L)?!1:g.has(L)||k.has(L)}function d(L){z(L)&&k.add(L),m(L)||B.add(L)}function y(L){if(!m(L))return L;var G=g.get(L);if(!G){if(w){var p="_$"+L+"$"+R+"_";z(p)&&(G=p)}if(!G)do G=s.get(++E);while(!z(G));g.set(L,G)}return G}function F(L){return L.transform(new TreeTransformer(function(G){if(G instanceof AST_Sequence){var p=G.expressions.length-1;G.expressions[p]=F(G.expressions[p])}else G instanceof AST_String?(clear_annotation(G),G.value=y(G.value)):G instanceof AST_Conditional&&(G.consequent=F(G.consequent),G.alternative=F(G.alternative));return G}))}}var to_ascii=typeof Buffer<"u"?i=>Buffer.from(i,"base64").toString():i=>decodeURIComponent(escape(atob(i))),to_base64=typeof Buffer<"u"?i=>Buffer.from(i).toString("base64"):i=>btoa(unescape(encodeURIComponent(i)));function read_source_map(i){var n=/(?:^|[^.])\/\/# sourceMappingURL=data:application\/json(;[\w=-]*)?;base64,([+/0-9A-Za-z]*=*)\s*$/.exec(i);return n?to_ascii(n[2]):(console.warn("inline source map not found"),null)}function set_shorthand(i,n,o){n[i]&&o.forEach(function(s){n[s]&&(typeof n[s]!="object"&&(n[s]={}),i in n[s]||(n[s][i]=n[i]))})}function init_cache(i){i&&("props"in i?i.props instanceof Map||(i.props=map_from_object(i.props)):i.props=new Map)}function cache_to_json(i){return{props:map_to_object(i.props)}}function*minify_sync_or_async(i,n,o){n=defaults(n,{compress:{},ecma:void 0,enclose:!1,ie8:!1,keep_classnames:void 0,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:null,format:null,parse:{},rename:void 0,safari10:!1,sourceMap:!1,spidermonkey:!1,timings:!1,toplevel:!1,warnings:!1,wrap:!1},!0);var s=n.timings&&{start:Date.now()};if(n.keep_classnames===void 0&&(n.keep_classnames=n.keep_fnames),n.rename===void 0&&(n.rename=n.compress&&n.mangle),n.output&&n.format)throw new Error("Please only specify either output or format option, preferrably format.");n.format=n.format||n.output||{},set_shorthand("ecma",n,["parse","compress","format"]),set_shorthand("ie8",n,["compress","mangle","format"]),set_shorthand("keep_classnames",n,["compress","mangle"]),set_shorthand("keep_fnames",n,["compress","mangle"]),set_shorthand("module",n,["parse","compress","mangle"]),set_shorthand("safari10",n,["mangle","format"]),set_shorthand("toplevel",n,["compress","mangle"]),set_shorthand("warnings",n,["compress"]);var l;n.mangle&&(n.mangle=defaults(n.mangle,{cache:n.nameCache&&(n.nameCache.vars||{}),eval:!1,ie8:!1,keep_classnames:!1,keep_fnames:!1,module:!1,nth_identifier:base54,properties:!1,reserved:[],safari10:!1,toplevel:!1},!0),n.mangle.properties&&(typeof n.mangle.properties!="object"&&(n.mangle.properties={}),n.mangle.properties.keep_quoted&&(l=n.mangle.properties.reserved,Array.isArray(l)||(l=[]),n.mangle.properties.reserved=l),n.nameCache&&!("cache"in n.mangle.properties)&&(n.mangle.properties.cache=n.nameCache.props||{})),init_cache(n.mangle.cache),init_cache(n.mangle.properties.cache)),n.sourceMap&&(n.sourceMap=defaults(n.sourceMap,{asObject:!1,content:null,filename:null,includeSources:!1,root:null,url:null},!0)),s&&(s.parse=Date.now());var f;if(i instanceof AST_Toplevel)f=i;else{if((typeof i=="string"||n.parse.spidermonkey&&!Array.isArray(i))&&(i=[i]),n.parse=n.parse||{},n.parse.toplevel=null,n.parse.spidermonkey)n.parse.toplevel=AST_Node.from_mozilla_ast(Object.keys(i).reduce(function(k,B){return k?(k.body=k.body.concat(i[B].body),k):i[B]},null));else{delete n.parse.spidermonkey;for(var E in i)if(HOP(i,E)&&(n.parse.filename=E,n.parse.toplevel=parse$1(i[E],n.parse),n.sourceMap&&n.sourceMap.content=="inline")){if(Object.keys(i).length>1)throw new Error("inline source map only works with singular input");n.sourceMap.content=read_source_map(i[E])}}if(n.parse.toplevel===null)throw new Error("no source file given");f=n.parse.toplevel}l&&n.mangle.properties.keep_quoted!=="strict"&&reserve_quoted_keys(f,l);var g;n.mangle&&n.mangle.properties&&(g=find_annotated_props(f)),n.wrap&&(f=f.wrap_commonjs(n.wrap)),n.enclose&&(f=f.wrap_enclose(n.enclose)),s&&(s.rename=Date.now()),s&&(s.compress=Date.now()),n.compress&&(f=new Compressor(n.compress,{mangle_options:n.mangle}).compress(f)),s&&(s.scope=Date.now()),n.mangle&&f.figure_out_scope(n.mangle),s&&(s.mangle=Date.now()),n.mangle&&(f.compute_char_frequency(n.mangle),f.mangle_names(n.mangle),f=mangle_private_properties(f,n.mangle)),s&&(s.properties=Date.now()),n.mangle&&n.mangle.properties&&(f=mangle_properties(f,n.mangle.properties,g)),s&&(s.format=Date.now());var N={};n.format.ast&&(N.ast=f),n.format.spidermonkey&&(N.ast=f.to_mozilla_ast());let x;if(!HOP(n.format,"code")||n.format.code){if(x={...n.format},x.ast||(x._destroy_ast=!0,walk(f,k=>{k instanceof AST_Scope&&(k.variables=void 0,k.enclosed=void 0,k.parent_scope=void 0),k.block_scope&&(k.block_scope.variables=void 0,k.block_scope.enclosed=void 0,k.block_scope.parent_scope=void 0)})),n.sourceMap){if(n.sourceMap.includeSources&&i instanceof AST_Toplevel)throw new Error("original source content unavailable");x.source_map=yield*SourceMap({file:n.sourceMap.filename,orig:n.sourceMap.content,root:n.sourceMap.root,files:n.sourceMap.includeSources?i:null})}delete x.ast,delete x.code,delete x.spidermonkey;var w=OutputStream(x);if(f.print(w),N.code=w.get(),n.sourceMap)if(Object.defineProperty(N,"map",{configurable:!0,enumerable:!0,get(){const k=x.source_map.getEncoded();return N.map=n.sourceMap.asObject?k:JSON.stringify(k)},set(k){Object.defineProperty(N,"map",{value:k,writable:!0})}}),N.decoded_map=x.source_map.getDecoded(),n.sourceMap.url=="inline"){var R=typeof N.map=="object"?JSON.stringify(N.map):N.map;N.code+=`
//# sourceMappingURL=data:application/json;charset=utf-8;base64,`+to_base64(R)}else n.sourceMap.url&&(N.code+=`
//# sourceMappingURL=`+n.sourceMap.url)}return n.nameCache&&n.mangle&&(n.mangle.cache&&(n.nameCache.vars=cache_to_json(n.mangle.cache)),n.mangle.properties&&n.mangle.properties.cache&&(n.nameCache.props=cache_to_json(n.mangle.properties.cache))),x&&x.source_map&&x.source_map.destroy(),s&&(s.end=Date.now(),N.timings={parse:.001*(s.rename-s.parse),rename:.001*(s.compress-s.rename),compress:.001*(s.scope-s.compress),scope:.001*(s.mangle-s.scope),mangle:.001*(s.properties-s.mangle),properties:.001*(s.format-s.properties),format:.001*(s.end-s.format),total:.001*(s.end-s.start)}),N}function minify_sync(i,n,o){const s=minify_sync_or_async(i,n);let l,f;do{if(l&&typeof l.then=="function")throw new Error("minify_sync cannot be used with the legacy source-map module");f=s.next(l),l=f.value}while(!f.done);return f.value}var blockly_compressed$1={exports:{}},blockly_compressed=blockly_compressed$1.exports,hasRequiredBlockly_compressed;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,(function(i,n){(function(o,s){i.exports=s()})(blockly_compressed,function(){var o={},s,l,f,E,g,N,x,w,R,k,B,P,z,m,d,y,F,L,G,p,I,D,V,C,K,X,re,se,Pe,Te,Ae,we,ve,be,Xe,Be,ke,ce,te,ue,me,Le,Qe,Fe,lt,de,De,he,Se,Ue,He,et,tt,ht,nt,st,ot,it,S,ae,j,$e,Ne,Ie,Ve,le,O,H,J,ne,ye,h,v,T,_,c,A,M,Y,q,ee,xe,ze,at,Je,Nt,W,Q,ie,ge,Oe,We,Ye,rt,Ot,Bt,Ft,ii,Et,Sn,rn,kr,wr,No,ud,Do,cd,Lo,ba,Ia,ko,wo,Mo,Mr,dd,Yn,xr,xo,_d,hd,pd,vi,Pt,Fr,Oa,Ci,on,fd,va,Fo,Ca,md,ya,Pr,Td,Po,gd,Bo,Ed,$d,Sd,jn,Ad,Ra,Wt,Uo,Na,Vo,Ho,bd,Da,La,Id,Go,An,Wo,Od,ka,wa,vd,Cd,bn,yd,Br,qn,Jn,pi,Rd,Nd,Dd,Ld,kd,wd,Md,Ma,sn,Zn,xa,xd,Fd,Pd,Bd,Ud,Vd,Hd,Gd,Wd,Fa,Xd,In,Xo,Kd,Qn,Ko,Pa,Ba,zo,Yo,Ua,zd,Va,Ha,Ga,Wa,Xa,Ka,za,Yd,Ur,Ya,jo,qo,yi,ja,qa,Vr,Ja,Za,jd,Jo,Qa,qd,Jd,Zd,Qd,e_,er,el,tl,Hr,il,t_,i_,nl,rl,Gi,ol,sl,n_,r_,o_,s_,al,a_,ll,l_,On,Gr,Zo,Qo,vn,ul,es,cl,Dt,u_,tr,ir,c_,dl,ts,nr,_l,Cn,Wr,hl,pl,d_,__,h_,fl,p_,ml,rr,f_,m_,T_,g_,Xr,Tl,gl,is,ns,E_,Kr,El,zr,$_,S_,an,$l,Ri,A_,b_,Sl,I_,yn,Al,O_,v_,C_,y_,R_,bl,N_,D_,rs,L_,k_,Il,Ni,w_,M_,or,x_,Ol,os,F_,P_,B_,vl,ss,Cl,as,U_,V_,H_,G_,qe,oi,Xt,yt,Di,sr,Ze,Lt,W_,X_,K_,yl,z_,ls,Rl,Nl,Dl,Ll,ar,Y_,j_,q_,lr,kl,J_,us,fi,wl,ur,Ei,Ml,Z_,cr,Q_,ln,cs,Yr,xl,eh,Fl,th,ds,Pl,Bl,Ul,ih,Vl,nh,_s,rh,oh,jr,sh,Hl,hs,ps,fs,ms,Gl,ah,Wl,Ts,gs,lh,Es,uh,Xl,ch,un,Kl,qr,zl,Yl,$s,jl,ql,Jl,Zl,Ql,eu,tu,iu,nu,dh,_h,hh,ph,fh,mh,Th,gh,Eh,ru,ou,su,au,lu,uu,cu,Ss,Jr,du,$h,_u,hu,pu,fu,mu,Tu,gu,Eu,$u,Su,Sh,Ah,Au,bh,Ih,Oh,vh,Ee;s=function(e,t,r,a){if(!(e instanceof Re)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const u=t.toLowerCase();if(!r)throw Error("Can not register a null value");let b=cn[e],U=As[e];if(b||(b=cn[e]=Object.create(null),U=As[e]=Object.create(null)),l(e,r),!a&&b[u]&&b[u]!==r)throw Error('Name "'+u+'" with type "'+e+'" already registered.');b[u]=r,U[u]=t},l=function(e,t){switch(e){case String(Re.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},f=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const r=cn[e];r&&r[t]?(delete cn[e][t],delete As[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},E=function(e,t,r){e=`${e}`.toLowerCase(),t=t.toLowerCase();const a=cn[e];if(!a||!a[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",r)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return a[t]},g=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=cn[e])?!!e[t]:!1},N=function(e,t,r){return E(e,t,r)},x=function(e,t,r){return E(e,t,r)},w=function(e,t,r){e=`${e}`.toLowerCase();var a=cn[e];if(!a){if(a=`Unable to find [${e}] in the registry.`,r)throw Error(`${a} You must require or register a ${e} plugin.`);return console.warn(a),null}if(!t)return a;e=As[e],r=Object.create(null);for(const u of Object.keys(a))r[e[u]]=a[u];return r},R=function(e,t,r){return t=t.plugins[String(e)]||si,typeof t=="function"?t:N(e,t,r)},k=function(e,t){B(),Is=setTimeout(function(){t&&t.handleRightClick(e)},Hm)},B=function(){Is&&(clearTimeout(Is),Is=0)},P=function(){bs=null},z=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&d(e)},m=function(e){return`${e.pointerId}`},d=function(e){const t=m(e);return bs?bs===t:e.type==="pointerdown"?(bs=t,!0):!1},y=function(e,t,r,a,u){function b(Z){(u||z(Z))&&(r?a.call(r,Z):a(Z))}const U=[];if(t in Rn)for(let Z=0;Z<Rn[t].length;Z++){const Ce=Rn[t][Z];e.addEventListener(Ce,b,!1),U.push([e,Ce,b])}else e.addEventListener(t,b,!1),U.push([e,t,b]);return U},F=function(e,t,r,a){function u(U){r?a.call(r,U):a(U)}const b=[];if(t in Rn)for(let U=0;U<Rn[t].length;U++){const Z=Rn[t][U];e.addEventListener(Z,u,!1),b.push([e,Z,u])}else e.addEventListener(t,u,!1),b.push([e,t,u]);return b},L=function(e){const t=e[e.length-1][2];for(;e.length;){const[r,a,u]=e.pop();r.removeEventListener(a,u,!1)}return t},G=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},p=function(e){return e.ctrlKey&&vu?!0:e.button===2},I=function(e,t,r){const a=t.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,r||(r=t.getScreenCTM().inverse()),a.matrixTransform(r)},D=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Ph,y:e.deltaY*Ph};case 2:return{x:e.deltaX*Bh,y:e.deltaY*Bh}}},V=function(){return"blockly-"+(Xm++).toString(36)},C=function(){return Hh.genUid()},K=function(e){return e.type===pe.BLOCK_CREATE},X=function(e){return e.type===pe.BLOCK_DELETE},re=function(e){return e.type===pe.BLOCK_CHANGE},se=function(e){return e.type===pe.BLOCK_FIELD_INTERMEDIATE_CHANGE},Pe=function(e){return e.type===pe.BLOCK_MOVE},Te=function(e){return e.type===pe.CLICK},Ae=function(e){return e.type===pe.BUBBLE_OPEN},we=function(e){return e.type===pe.VIEWPORT_CHANGE},o.setRecordUndo$$module$build$src$core$events$utils=function(e){Zr=e},ve=function(){return Zr},be=function(e){Wh.fireInternal(e)},Xe=function(e){if(ue()){if(!Ki.length)try{requestAnimationFrame(()=>{setTimeout(Be,0)})}catch{setTimeout(Be,0)}ke(e)}},Be=function(){const e=ce(Ki);Ki.length=0;for(const t of e){if(!t.workspaceId)continue;let r;(r=Ne(t.workspaceId))==null||r.fireChangeListener(t)}},ke=function(e){if(re(e)&&e.element==="mutation"){let t;for(t=Ki.length;t>0;t--){const r=Ki[t-1];if(r.group!==e.group||r.workspaceId!==e.workspaceId||!Pe(r)||r.newParentId!==e.blockId)break}Ki.splice(t,0,e)}else Ki.push(e)},ce=function(e){const t=[];for(const r of e)if(e=t[t.length-1],!r.isNull())if(e&&e.workspaceId===r.workspaceId&&e.group===r.group)if(Pe(r)&&Pe(e)&&r.blockId===e.blockId){if(e.newParentId=r.newParentId,e.newInputName=r.newInputName,e.newCoordinate=r.newCoordinate,e.reason||r.reason){let a,u;e.reason=Array.from(new Set(((a=e.reason)!=null?a:[]).concat((u=r.reason)!=null?u:[])))}}else re(r)&&re(e)&&r.blockId===e.blockId&&r.element===e.element&&r.name===e.name?e.newValue=r.newValue:we(r)&&we(e)?(e.viewTop=r.viewTop,e.viewLeft=r.viewLeft,e.scale=r.scale,e.oldScale=r.oldScale):Te(r)&&Ae(e)||t.push(r);else t.push(r);return e=t.filter(r=>!r.isNull())},te=function(){for(let e=0,t;t=Ki[e];e++)t.recordUndo=!1},o.disable$$module$build$src$core$events$utils=function(){yu++},o.enable$$module$build$src$core$events$utils=function(){yu--},ue=function(){return yu===0},o.getGroup$$module$build$src$core$events$utils=function(){return Gh},o.setGroup$$module$build$src$core$events$utils=function(e){Wh.setGroupInternal(e)},me=function(e){Gh=typeof e=="boolean"?e?C():"":e},Le=function(e){const t=[];e=e.getDescendants(!1);for(let r=0,a;a=e[r];r++)t[r]=a.id;return t},Qe=function(e,t){const r=Fe(e.type);if(!r)throw Error("Unknown event type.");return r.fromJson(e,t)},Fe=function(e){const t=N(Re.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},lt=function(e){if((Pe(e)||K(e))&&e.workspaceId){var t=Ne(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const r=Zr;try{Zr=!1;const a=e.getParent();if(a&&!a.hasDisabledReason(Ru)){const u=e.getDescendants(!1);for(let b=0,U;U=u[b];b++)U.setDisabledReason(!1,Ru)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setDisabledReason(!0,Ru),e=e.getNextBlock();while(e)}finally{Zr=r}}}},de=function(e,t,r){e=document.createElementNS(Qr,`${e}`);for(const a in t)e.setAttribute(a,`${t[a]}`);return r&&r.appendChild(e),e},De=function(e,t){return t=t.split(" "),t.every(r=>e.classList.contains(r))?!1:(e.classList.add(...t),!0)},he=function(e,t){e.classList.remove(...t.split(" "))},Se=function(e,t){return t=t.split(" "),t.every(r=>!e.classList.contains(r))?!1:(e.classList.remove(...t),!0)},Ue=function(e,t){return e.classList.contains(t)},He=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},et=function(e,t){const r=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");r?t.insertBefore(e,r):t.appendChild(e)},tt=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},ht=function(){Nu++,$i||($i=Object.create(null))},nt=function(){Nu--,Nu||($i=null)},st=function(e){const t=e.textContent+`
`+e.className.baseVal;var r;return $i&&(r=$i[t])||(r=window.getComputedStyle(e),r=it(e,r.fontSize,r.fontWeight,r.fontFamily),$i&&($i[t]=r)),r},ot=function(e,t,r,a){return it(e,t+"pt",r,a)},it=function(e,t,r,a){const u=e.textContent;e=u+`
`+e.className.baseVal;var b;return $i&&(b=$i[e])||(eo||(b=document.createElement("canvas"),b.className="blocklyComputeCanvas",document.body.appendChild(b),eo=b.getContext("2d")),u&&eo?(eo.font=r+" "+t+" "+a,b=eo.measureText(u).width):b=0,$i&&($i[e]=b)),b},S=function(e,t,r,a){const u=document.createElement("span");u.style.font=r+" "+t+" "+a,u.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(u),t.appendChild(e),document.body.appendChild(t),r={height:0,baseline:0};try{t.style.alignItems="baseline",r.baseline=e.offsetTop-u.offsetTop,t.style.alignItems="flex-end",r.height=e.offsetTop-u.offsetTop}finally{document.body.removeChild(t)}return r},o.getFocusManager$$module$build$src$core$focus_manager=function(){return jt.getFocusManager()},ae=function(e){return e&&typeof e.getFocusableElement=="function"&&typeof e.getFocusableTree=="function"&&typeof e.onNodeFocus=="function"&&typeof e.onNodeBlur=="function"&&typeof e.canBeFocused=="function"},j=function(e){return ae(e)&&typeof e.id=="string"&&typeof e.workspace=="object"&&typeof e.select=="function"&&typeof e.unselect=="function"},$e=function(e,t){for(const r in t)t[r]!==null&&Array.isArray(t[r])?e[r]=$e(e[r]||[],t[r]):e[r]=t[r]!==null&&typeof t[r]=="object"?$e(e[r]||Object.create(null),t[r]):t[r];return e},Ne=function(e){return to[e]||null},Ie=function(){const e=[];for(const t in to)e.push(to[t]);return e},Ve=function(e){to[e.id]=e},le=function(e){delete to[e.id]},O=function(){return Kh},H=function(e){Kh=e},J=function(){const e=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();return e&&j(e)?e:null},ne=function(e){o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)},ye=function(e){const t=J();let r,a,u,b;const U=new(Fe(pe.SELECTED))((r=t?.id)!=null?r:null,(a=e?.id)!=null?a:null,(b=(u=e?.workspace.id)!=null?u:t?.workspace.id)!=null?b:"");be(U)},h=function(){return zh},v=function(e){zh=e},T=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),r=e.getCachedParentSvgSize();var a=t.parentElement;if(a instanceof HTMLElement){var u=a.offsetWidth;a=a.offsetHeight,r.width!==u&&(t.setAttribute("width",u+"px"),e.setCachedParentSvgSize(u,null)),r.height!==a&&(t.setAttribute("height",a+"px"),e.setCachedParentSvgSize(null,a)),e.resize()}},_=function(e,t){const r=Object.create(null),a=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=a.indexOf(e),a.splice(e,a.length-e));for(let u=0,b;b=a[u];u++)r[b.type]?r[b.type]++:r[b.type]=1;return r},c=function(e){return function(){this.jsonInit(e)}},A=function(e){Yh.defineBlocksWithJsonArrayInternal(e)},M=function(e){o.defineBlocks$$module$build$src$core$common(o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let r=0;r<e.length;r++){const a=e[r];if(!a){console.warn(`Block definition #${r} in JSON array is ${a}. Skipping`);continue}const u=a.type;u?t[u]={init:c(a)}:console.warn(`Block definition #${r} in JSON array is missing a type attribute. Skipping.`)}return t},o.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const r=e[t];t in bt&&console.warn(`Block definition "${t}" overwrites previous definition.`),bt[t]=r}},Y=function(e){let t=O();const r=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedTree();for(const a of Ie())if(r===a){t=a;break}!G(e)&&t&&(!t.rendered||t.isFlyout||t.isVisible())&&$t.registry.onKeyDown(t,e)},q=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},ee=function(e){if(ku)throw Error("CSS already injected");wu+=`
`+e},xe=function(e,t){ku||(ku=!0,e&&(e=t.replace(/[\\/]$/,""),t=wu.replace(/<<<PATH>>>/g,e),wu="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},ze=function(e){return qh.getSizeInternal(e)},at=function(e){if(Nt(e,"display")!=="none")return Je(e);const t=e.style,r=t.display,a=t.visibility,u=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const b=e.offsetWidth;return e=e.offsetHeight,t.display=r,t.position=u,t.visibility=a,new ct(b,e)},Je=function(e){return new ct(e.offsetWidth,e.offsetHeight)},Nt=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},W=function(e){const t=new Me(0,0);e=e.getBoundingClientRect();var r=document.documentElement;return r=new Me(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),t.x=e.left+r.x,t.y=e.top+r.y,t},Q=function(){const e=document.body,t=document.documentElement;return new Me(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},ie=function(e){const t=parseFloat(Nt(e,"borderLeftWidth")),r=parseFloat(Nt(e,"borderRightWidth")),a=parseFloat(Nt(e,"borderTopWidth"));return e=parseFloat(Nt(e,"borderBottomWidth")),new ut(a,e,t,r)},ge=function(e,t,r){e=Oe(e,t,r),t.scrollLeft=e.x,t.scrollTop=e.y},Oe=function(e,t,r){var a=W(e),u=W(t),b=ie(t);const U=a.x-u.x-b.left;return a=a.y-u.y-b.top,u=Je(e),e=t.clientWidth-u.width,u=t.clientHeight-u.height,b=t.scrollLeft,t=t.scrollTop,r?(b+=U-e/2,t+=a-u/2):(b+=Math.min(U,Math.max(U-e,0)),t+=Math.min(a,Math.max(a-u,0))),new Me(b,t)},We=function(e){const t=new Me(0,0);var r=e.x&&e.getAttribute("x");const a=e.y&&e.getAttribute("y");return r&&(t.x=parseInt(r)),a&&(t.y=parseInt(a)),(r=(r=e.getAttribute("transform"))&&r.match(Jh))&&(t.x+=Number(r[1]),r[3]&&(t.y+=Number(r[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(Zh))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},Ye=function(e){let t=0,r=0;for(;e;){const a=We(e);if(t+=a.x,r+=a.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new Me(t,r)},rt=function(){const e=Q();return new ut(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Ot=function(){const e=document.documentElement,t=window;return new Me(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},Bt=function(e,t){var r=t.x;t=t.y;const a=e.getInjectionDiv().getBoundingClientRect();return r=new Me(r-a.left,t-a.top),t=e.getOriginOffsetInPixels(),Me.difference(r,t).scale(1/e.scale)},Ft=function(e,t){var r=t.scale(e.scale);t=r.x,r=r.y;const a=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new Me(t+a.left+e.x,r+a.top+e.y)},ii=function(e){({document:Rs=Rs,DOMParser:no=no,XMLSerializer:ro=ro}=e),ys=new no,xu=new ro},o.createElement$$module$build$src$core$utils$xml=function(e){return Rs.createElementNS(Qh,e)},o.createTextNode$$module$build$src$core$utils$xml=function(e){return Rs.createTextNode(e)},o.textToDom$$module$build$src$core$utils$xml=function(e){let t=ys.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=ys.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},Et=function(e){return Sn(xu.serializeToString(e))},Sn=function(e){return e.replace(Ym,t=>`&#${t.charCodeAt(0)};`)},rn=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=Ia(e),e=cd(e)),kr(e),e):null},kr=function(e){const t=e.kind;if(e=e.contents,t&&t!==ep&&t!==Fu)throw Error("Invalid toolbox kind "+t+". Please supply either "+ep+" or "+Fu);if(!e)throw Error("Toolbox must have a contents attribute.")},wr=function(e){return e?e.contents?e.contents:Array.isArray(e)&&e.length>0&&!e[0].nodeType?e:Lo(e):[]},No=function(e){return tp.hasCategoriesInternal(e)},ud=function(e){if(!e)return!1;const t=e.kind;return t?t===Fu:!!e.contents.filter(r=>r.kind.toUpperCase()==="CATEGORY").length},Do=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},cd=function(e){const t={contents:Lo(e)};return e instanceof Node&&ba(e,t),t},Lo=function(e){const t=[];let r=e.childNodes;r||(r=e);for(let a=0,u;u=r[a];a++){if(!u.tagName)continue;e={};const b=u.tagName.toUpperCase();e.kind=b,b==="BLOCK"?e.blockxml=u:u.childNodes&&u.childNodes.length>0&&(e.contents=Lo(u)),ba(u,e),t.push(e)}return t},ba=function(e,t){for(let r=0;r<e.attributes.length;r++){const a=e.attributes[r];a.nodeName.includes("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[a.nodeName.replace("css-","")]=a.value):t[a.nodeName]=a.value}},Ia=function(e){let t=null;if(e)if(typeof e=="string"){if(t=o.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},ko=function(e,t,r,a,u,b){const U=b.scrollbar&&b.scrollbar.canScrollVertically();return e.horizontal===hr.LEFT?(r=u.absoluteMetrics.left+r,U&&b.RTL&&(r+=kt.scrollbarThickness)):(r=u.absoluteMetrics.left+u.viewMetrics.width-t.width-r,U&&!b.RTL&&(r-=kt.scrollbarThickness)),e.vertical===ji.TOP?e=u.absoluteMetrics.top+a:(e=u.absoluteMetrics.top+u.viewMetrics.height-t.height-a,b.scrollbar&&b.scrollbar.canScrollHorizontally()&&(e-=kt.scrollbarThickness)),new ut(e,e+t.height,r,r+t.width)},wo=function(e,t){return{horizontal:t.toolboxMetrics.position===dt.LEFT||e.horizontalLayout&&!e.RTL?hr.RIGHT:hr.LEFT,vertical:t.toolboxMetrics.position===dt.BOTTOM?ji.TOP:ji.BOTTOM}},Mo=function(e,t,r,a){const u=e.left,b=e.right-e.left,U=e.bottom-e.top;for(let Z=0;Z<a.length;Z++){const Ce=a[Z];e.intersects(Ce)&&(e=r===hn.UP?Ce.top-U-t:Ce.bottom+t,e=new ut(e,e+U,u,u+b),Z=-1)}return e},Mr=function(e,t){s(Re.SERIALIZER,e,t)},dd=function(e){f(Re.SERIALIZER,e)},Yn=function(e,{addCoordinates:t=!1,saveIds:r=!0}={}){const a=e.workspace,u=Object.create(null);return u.height=e.getSize().height,u.width=e.getSize().width,r&&(u.id=e.id),t&&(t=e.getRelativeToSurfaceXY(),u.x=a.RTL?a.getWidth()-t.x:t.x,u.y=t.y),e.getText()&&(u.text=e.getText()),e.isCollapsed()&&(u.collapsed=!0),e.isOwnEditable()||(u.editable=!1),e.isOwnMovable()||(u.movable=!1),e.isOwnDeletable()||(u.deletable=!1),u},xr=function(e,t,{recordUndo:r=!1}={}){const a=ve();if(o.setRecordUndo$$module$build$src$core$events$utils(r),r=t.newComment(e.id),e.text!==void 0&&r.setText(e.text),e.x!==void 0||e.y!==void 0){const b=r.getRelativeToSurfaceXY();let U,Z=(U=e.x)!=null?U:b.x;Z=t.RTL?t.getWidth()-Z:Z;var u;t=(u=e.y)!=null?u:b.y,r.moveTo(new Me(Z,t))}if(e.width!==void 0||e.height){u=r.getSize();let b,U;r.setSize(new ct((b=e.width)!=null?b:u.width,(U=e.height)!=null?U:u.height))}return e.collapsed!==void 0&&r.setCollapsed(e.collapsed),e.editable!==void 0&&r.setEditable(e.editable),e.movable!==void 0&&r.setMovable(e.movable),e.deletable!==void 0&&r.setDeletable(e.deletable),o.setRecordUndo$$module$build$src$core$events$utils(a),r},xo=function(e,t){s(Re.PASTER,e,t)},_d=function(e){f(Re.PASTER,e)},hd=function(e){const t=e.workspace,r=e.getRelativeToSurfaceXY(),a=new Me(0,0),u=t.getTopComments(!1).filter(b=>b.id!==e.id).map(b=>b.getRelativeToSurfaceXY());for(;pd(Me.sum(r,a),u);)a.translate(t.RTL?-30:30,30);e.moveTo(Me.sum(r,a))},pd=function(e,t){return t.some(r=>Math.abs(r.x-e.x)<=1&&Math.abs(r.y-e.y)<=1)},vi=function(e,t){e.setAttribute(Jm,t)},Pt=function(e,t,r){Array.isArray(r)&&(r=r.join(" ")),e.setAttribute(qm+t,`${r}`)},Fr=function(e){return e&&typeof e.saveState=="function"&&typeof e.loadState=="function"},Oa=function(e){return va(e),fd()?(Fo(),Promise.resolve()):(pr||(pr=new Promise(t=>{Wu=t,up=window.requestAnimationFrame(()=>{Fo(),t()})})),pr)},Ci=function(){return pr||Promise.resolve()},on=function(e){e||window.cancelAnimationFrame(up),Fo(e),!e&&Wu&&Wu()},fd=function(){return wh},va=function(e){Hu.add(e),Gu.set(e,o.getGroup$$module$build$src$core$events$utils());const t=e.getParent();t?va(t):ws.add(e)},Fo=function(e){const t=e?new Set([e]):new Set([...ws].map(b=>b.workspace)),r=[...ws].filter(md).filter(b=>t.has(b.workspace));for(var a of r)ya(a);for(const b of t)b.resizeContents();for(var u of r)a=u.getRelativeToSurfaceXY(),u.updateComponentLocations(a);for(const b of r)u=o.getGroup$$module$build$src$core$events$utils(),(a=Gu.get(b))&&o.setGroup$$module$build$src$core$events$utils(a),b.bumpNeighbours(),o.setGroup$$module$build$src$core$events$utils(u);for(const b of r)Ca(b);e||(pr=null)},Ca=function(e){ws.delete(e),Hu.delete(e),Gu.delete(e);for(const t of e.getChildren(!1))Ca(t)},md=function(e){return!e.isDisposed()&&!e.getParent()},ya=function(e){if(Hu.has(e)&&e.initialized){for(const t of e.getChildren(!1))ya(t);e.renderEfficiently()}},Pr=function(e,t){pp(e,t)},Td=function(e=hp){pp=e},Po=function(e,t){mp(e,t)},gd=function(e=fp){mp=e},Bo=function(e,t,r){gp(e,t,r)},Ed=function(e=Tp){gp=e},$d=function(e,t){$p(e,t)},Sd=function(e=Ep){$p=e},jn=function(e){return e&&typeof e.getProcedureDef=="function"},Ad=function(e){return e&&typeof e.getProcedureCall=="function"&&typeof e.renameProcedure=="function"},Ra=function(e){return e.getVariableModel!==void 0},Wt=function(e,t,r,a){e=e+" was deprecated in "+t+" and will be deleted in "+r+".",a&&(e+=`
Use `+a+" instead."),Sp.has(e)||(Sp.add(e),console.warn(e))},o.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let r=0;r<e.length;r++){const a=e[r].getVarModels();if(a)for(let u=0;u<a.length;u++){const b=a[u];b.getId()&&t.add(b)}}return Array.from(t.values())},o.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let a=0,u;u=e[a];a++){var r=u.getDeveloperVariables;if(r){r=r();for(let b=0;b<r.length;b++)t.add(r[b])}}return Array.from(t.values())},Uo=function(e){return Na(e,!1)},Na=function(e,t=!0){return bt.variables_set||bt.variables_get||console.warn("There are no variable blocks, but there is a variable category."),t?(Wt("The XML return value of Blockly.Variables.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),bd(e)):(e.registerButtonCallback("CREATE_VARIABLE",function(r){An(r.getTargetWorkspace())}),[{kind:"button",text:"%{BKY_NEW_VARIABLE}",callbackkey:"CREATE_VARIABLE"},...Ho(e,e.getVariableMap().getVariablesOfType(""),!0)])},Vo=function(e){return{VAR:{name:e.getName(),type:e.getType()}}},Ho=function(e,t,r,a="variables_get",u="variables_set"){r&&(r=bt.math_change),e=[];const b=t.slice(-1)[0];return b&&(bt[u]&&e.push({kind:"block",type:u,gap:r?8:24,fields:Vo(b)}),r&&e.push({kind:"block",type:"math_change",gap:bt[a]?20:8,fields:Vo(b),inputs:{DELTA:{shadow:{type:"math_number",fields:{NUM:1}}}}})),bt[a]&&e.push(...t.sort(qn).map(U=>({kind:"block",type:a,gap:8,fields:Vo(U)}))),e},bd=function(e){let t=[];const r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(a){An(a.getTargetWorkspace())}),t.push(r),e=Da(e),t=t.concat(e)},Da=function(e){e=e.getVariableMap().getVariablesOfType("");const t=[];if(e.length>0){var r=e[e.length-1];if(bt.variables_set){var a=o.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","variables_set"),a.setAttribute("gap",bt.math_change?"8":"24"),a.appendChild(bn(r)),t.push(a)}if(bt.math_change&&(a=o.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","math_change"),a.setAttribute("gap",bt.variables_get?"20":"8"),a.appendChild(bn(r)),r=o.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),a.appendChild(r),t.push(a)),bt.variables_get){e.sort(qn);for(let u=0,b;b=e[u];u++)r=o.createElement$$module$build$src$core$utils$xml("block"),r.setAttribute("type","variables_get"),r.setAttribute("gap","8"),r.appendChild(bn(b)),t.push(r)}}return t},La=function(e){return bp.generateUniqueNameInternal(e)},Id=function(e){return Go(zu.charAt(0),e.getVariableMap().getAllVariables().map(t=>t.getName()))},Go=function(e,t){if(!t.length)return e;const r=zu;let a="",u=r.indexOf(e);for(;;){let b=!1;for(let U=0;U<t.length;U++)if(t[U].toLowerCase()===e){b=!0;break}if(!b)break;u++,u===r.length&&(u=0,a=`${Number(a)+1}`),e=r.charAt(u)+a}return e},An=function(e,t,r){function a(b){Wo(o.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,b,function(U){if(U){var Z=ka(U,e);if(Z){if(Z.getType()===u)var Ce=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",Z.getName());else Ce=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Ce=Ce.replace("%1",Z.getName()).replace("%2",Z.getType());Pr(Ce,function(){a(U)})}else e.getVariableMap().createVariable(U,u),t&&t(U)}else t&&t(null)})}const u=r||"";a("")},o.renameVariable$$module$build$src$core$variables=function(e,t,r){function a(u){const b=o.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.getName());Wo(b,u,function(U){if(U){var Z=Od(U,t.getType(),e),Ce=wa(t.getName(),U,e);if(Z||Ce){var je="";Z?je=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",Z.getName()).replace("%2",Z.getType()):Ce&&(je=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",U).replace("%2",Ce)),Pr(je,function(){a(U)})}else e.getVariableMap().renameVariable(t,U),r&&r(U)}else r&&r(null)})}a("")},Wo=function(e,t,r){Bo(e,t,function(a){a&&(a=a.replace(/[\s\xa0]+/g," ").trim(),a===o.Msg$$module$build$src$core$msg.RENAME_VARIABLE||a===o.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(a=null),r(a)})},Od=function(e,t,r){r=r.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let a=0,u;u=r[a];a++)if(u.getName().toLowerCase()===e&&u.getType()!==t)return u;return null},ka=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let r=0,a;a=t[r];r++)if(a.getName().toLowerCase()===e)return a;return null},wa=function(e,t,r){return r.getProcedureMap().getProcedures().length?vd(e,t,r):Cd(e,t,r)},vd=function(e,t,r){e=e.toLowerCase(),t=t.toLowerCase(),r=r.getProcedureMap().getProcedures();for(const u of r){var a=u.getParameters().filter(Ra).map(b=>b.getVariableModel().getName());if(a&&(r=a.some(b=>b.toLowerCase()===e),a=a.some(b=>b.toLowerCase()===t),r&&a))return u.getName()}return null},Cd=function(e,t,r){e=e.toLowerCase(),t=t.toLowerCase(),r=r.getAllBlocks(!1);for(const u of r){if(!jn(u))continue;r=u.getProcedureDef();var a=r[1];const b=a.some(U=>U.toLowerCase()===e);if(a=a.some(U=>U.toLowerCase()===t),b&&a)return r[0]}return null},bn=function(e){const t=o.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.getType()),e=o.createTextNode$$module$build$src$core$utils$xml(e.getName()),t.appendChild(e),t},o.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,r,a){let u=o.getVariable$$module$build$src$core$variables(e,t,r,a);return u||(u=yd(e,t,r,a)),u},o.getVariable$$module$build$src$core$variables=function(e,t,r,a){const u=e.getPotentialVariableMap();let b=null;if(t&&(b=e.getVariableById(t),!b&&u&&(b=u.getVariableById(t)),b))return b;if(r){if(a===void 0)throw Error("Tried to look up a variable by name without a type");b=e.getVariable(r,a),!b&&u&&(b=u.getVariable(r,a))}return b},yd=function(e,t,r,a){const u=e.getVariableMap(),b=e.getPotentialVariableMap();return r||(r=La(e.isFlyout?e.targetWorkspace:e)),b?b.createVariable(r,a,t??void 0):u.createVariable(r,a,t)},Br=function(e,t){e=e.getAllVariables();const r=[];if(t.length!==e.length)for(let a=0;a<e.length;a++){const u=e[a];t.includes(u)||r.push(u)}return r},qn=function(e,t){return e.getName().localeCompare(t.getName(),void 0,{sensitivity:"base"})},Jn=function(e,t){const r=[];e=e.getAllBlocks(!1);for(let a=0;a<e.length;a++){const u=e[a].getVarModels();if(u)for(let b=0;b<u.length;b++)u[b].getId()===t&&r.push(e[a])}return r},o.deleteVariable$$module$build$src$core$variables=function(e,t,r){var a=t.getName();const u=Jn(e,t.getId());for(let b=u.length-1;b>=0;b--){const U=u[b];if(U.type==="procedures_defnoreturn"||U.type==="procedures_defreturn"){r=String(U.getFieldValue("NAME")),a=o.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",a).replace("%2",r),Pr(a);return}U===r&&u.splice(b,1)}r&&u.length||u.length>1?(a=o.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(u.length+(r&&!r.workspace.isFlyout?1:0))).replace("%2",a),Po(a,b=>{b&&t&&e.getVariableMap().deleteVariable(t)})):e.getVariableMap().deleteVariable(t)},pi=function(e,{addCoordinates:t=!1,addInputBlocks:r=!0,addNextBlocks:a=!0,doFullSerialization:u=!0,saveIds:b=!0}={}){if(e.isInsertionMarker())return null;const U={type:e.type,id:b?e.id:void 0};return t&&Nd(e,U),Rd(e,U),Dd(e,U,u),Ld(e,U,u),kd(e,U,u),r&&wd(e,U,u,b),a&&Md(e,U,u,b),U},Rd=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},Nd=function(e,t){const r=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(r.RTL?r.getWidth()-e.x:e.x),t.y=Math.round(e.y)},Dd=function(e,t,r){e.saveExtraState?(e=e.saveExtraState(r),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=Ri(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Ld=function(e,t,r){const a=Object.create(null);for(const u of e.getIcons())Fr(u)&&(e=u.saveState(r))&&(a[u.getType().toString()]=e);Object.keys(a).length&&(t.icons=a)},kd=function(e,t,r){const a=Object.create(null);for(const u of e.getFields())u.isSerializable()&&(a[u.name]=u.saveState(r));Object.keys(a).length&&(t.fields=a)},wd=function(e,t,r,a){const u=Object.create(null);for(let b=0;b<e.inputList.length;b++){const U=e.inputList[b];if(!U.connection)continue;const Z=Ma(U.connection,r,a);Z&&(u[U.name]=Z)}Object.keys(u).length&&(t.inputs=u)},Md=function(e,t,r,a){e.nextConnection&&(e=Ma(e.nextConnection,r,a))&&(t.next=e)},Ma=function(e,t,r){const a=e.getShadowState(!0);if(e=e.targetBlock(),!a&&!e)return null;const u=Object.create(null);return a&&(u.shadow=a),e&&!e.isShadow()&&(u.block=pi(e,{doFullSerialization:t,saveIds:r})),u},sn=function(e,t,{recordUndo:r=!1}={}){return e=Zn(e,t,{recordUndo:r}),t.rendered&&on(),e},Zn=function(e,t,{parentConnection:r,isShadow:a=!1,recordUndo:u=!1}={}){const b=ve();o.setRecordUndo$$module$build$src$core$events$utils(u),(u=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),o.disable$$module$build$src$core$events$utils();const U=t.getAllVariables();let Z;try{Z=xa(e,t,{parentConnection:r,isShadow:a})}finally{o.enable$$module$build$src$core$events$utils()}if(xd(t,U),ue()&&be(new(Fe(pe.BLOCK_CREATE))(Z)),o.setGroup$$module$build$src$core$events$utils(u),o.setRecordUndo$$module$build$src$core$events$utils(b),t.rendered){const Ce=Z;setTimeout(()=>{Ce.disposed||Ce.setConnectionTracking(!0)},1)}return Z},xa=function(e,t,{parentConnection:r,isShadow:a=!1}={}){if(!e.type)throw new Ip(e);const u=t.newBlock(e.type,e.id);return u.setShadow(a),Fd(u,e),Pd(u,e),Bd(u,e),Ud(r,u,e),Vd(u,e),Hd(u,e),Gd(u,e),Wd(u,e),Xd(u,t.rendered),u},xd=function(e,t){if(ue())for(e=Br(e,t),t=0;t<e.length;t++){const r=e[t];be(new(Fe(pe.VAR_CREATE))(r))}},Fd=function(e,t){let r=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const a=e.workspace;r=a.RTL?a.getWidth()-r:r,e.moveBy(r,t)},Pd=function(e,t){if(t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setDisabledReason(!0,mi),Array.isArray(t.disabledReasons))for(const r of t.disabledReasons)e.setDisabledReason(!0,r);t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},Bd=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(o.textToDom$$module$build$src$core$utils$xml(t.extraState)))},Ud=function(e,t,r){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new vp(r);if(e.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var a=t.outputConnection;if(!a)throw new lo("output",t,r)}else if(a=t.previousConnection,!a)throw new lo("previous",t,r);if(!e.connect(a)){const u=t.workspace.connectionChecker;throw new Op(u.getErrorMessage(u.canConnectWithReason(a,e,!1),a,e),e.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,r)}}},Vd=function(e,t){if(t.icons){var r=Object.keys(t.icons);for(const u of r){r=t.icons[u];var a=e.getIcon(u);if(!a){if(a=N(Re.ICON,u,!1),!a)throw new Cp(u,e,t);a=new a(e),e.addIcon(a)}Fr(a)&&a.loadState(r)}}},Hd=function(e,t){if(t.fields){var r=Object.keys(t.fields);for(let a=0;a<r.length;a++){const u=r[a],b=t.fields[u],U=e.getField(u);U?U.loadState(b):console.warn(`Ignoring non-existant field ${u} in block ${e.type}`)}}},Gd=function(e,t){if(t.inputs){var r=Object.keys(t.inputs);for(let a=0;a<r.length;a++){const u=r[a],b=e.getInput(u);if(!b||!b.connection)throw new lo(u,e,t);Fa(b.connection,t.inputs[u])}}},Wd=function(e,t){if(t.next){if(!e.nextConnection)throw new lo("next",e,t);Fa(e.nextConnection,t.next)}},Fa=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&xa(t.block,e.getSourceBlock().workspace,{parentConnection:e})},Xd=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const r of e.getIcons())r.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},In=function(e){return typeof e.bubbleIsVisible=="function"&&typeof e.setBubbleVisible=="function"&&typeof e.getBubble=="function"},Xo=function(e){return e*Math.PI/180},Kd=function(e){return e*180/Math.PI},Qn=function(e,t,r){if(r<e){const a=r;r=e,e=a}return Math.max(e,Math.min(t,r))},Ko=function(){document.querySelector(".blocklyDropDownDiv")||(Rt=document.createElement("div"),Rt.className="blocklyDropDownDiv",Rt.tabIndex=-1,(h()||document.body).appendChild(Rt),co=document.createElement("div"),co.className="blocklyDropDownContent",Rt.appendChild(co),Us=y(co,"keydown",null,Y),Bn=document.createElement("div"),Bn.className="blocklyDropDownArrow",Rt.appendChild(Bn),Rt.style.opacity="0",Rt.style.transition="transform "+Ps+"s, opacity "+Ps+"s")},Pa=function(e){qu=e},Ba=function(){return pn},zo=function(){return co},Yo=function(){Us&&(L(Us),Us=null),Rt.remove(),Ko()},Ua=function(e,t){Rt.style.backgroundColor=e,Rt.style.borderColor=t},zd=function(e,t,r,a,u=!0){return Wa(Ha(t),e,u,r,a)},Va=function(e,t,r,a=!0){return kp=!0,Wa(Ga(e),e,a,t,r)},Ha=function(e){var t=e.getSvgRoot();const r=e.workspace.scale,a=e.height*r;return e=e.width*r,t=W(t),new ut(t.y,t.y+a,t.x,t.x+e)},Ga=function(e){return e=e.getScaledBBox(),new ut(e.top,e.bottom,e.left,e.right)},Wa=function(e,t,r,a,u){const b=e.left+(e.right-e.left)/2,U=e.bottom;e=e.top,u&&(e+=u),u=t.getSourceBlock();let Z=u.workspace;for(;Z.options.parentWorkspace;)Z=Z.options.parentWorkspace;return Pa(Z.getParentSvg().parentNode),Xa(t,u.RTL,b,U,b,e,r,a)},Xa=function(e,t,r,a,u,b,U,Z){return pn=e,Pn=Z||null,Rt.style.direction=t?"rtl":"ltr",e=O(),Dp=e.getRenderer().getClassName(),Lp=e.getTheme().getClassName(),De(Rt,Dp),De(Rt,Lp),r=ja(r,a,u,b),U&&(Bs=o.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(Rt)),r},Ka=function(e,t,r,a){return e=Ur(e,r.left,r.right,a.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+Yu,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},za=function(e,t,r,a){return e=Ur(e,r.left,r.right,a.width),{initialX:e.divX,initialY:t-a.height,finalX:e.divX,finalY:t-a.height-Yu,arrowX:e.arrowX,arrowY:a.height-Rp*2-Fs/2,arrowAtTop:!1,arrowVisible:!0}},Yd=function(e,t,r){return e=Ur(e,t.left,t.right,r.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Ur=function(e,t,r,a){return t=Qn(t,e-a/2,r-a),e=e-Fs/2-t,r=Np,e=Qn(r,e,a-r-Fs),{arrowX:e,divX:t}},Ya=function(){return!!pn},jo=function(e,t){return pn===e?(t?yi():qo(),!0):!1},qo=function(){Rt.style.transform="translate(0, 0)",Rt.style.opacity="0",ju=setTimeout(function(){yi()},Ps*1e3),Pn&&(Pn(),Pn=null)},yi=function(){Ya()&&(ju&&clearTimeout(ju),Pn&&(Pn(),Pn=null),Yo(),pn=null,O().markFocused(),Bs&&(Bs(),Bs=null))},ja=function(e,t,r,a){e=Ju.getPositionMetrics(e,t,r,a),e.arrowVisible?(t=e.arrowX,r=e.arrowY,a=e.arrowAtTop?45:225,Bn.style.display="",Bn.style.transform=`translate(${t}px, ${r}px) rotate(${a}deg)`,Bn.setAttribute("class","blocklyDropDownArrow")):Bn.style.display="none",t=Math.floor(e.initialX),r=Math.floor(e.initialY),a=Math.floor(e.finalX);const u=Math.floor(e.finalY);return Rt.style.left=t+"px",Rt.style.top=r+"px",Rt.style.display="block",Rt.style.opacity="1",Rt.style.transform="translate("+(a-t)+"px,"+(u-r)+"px)",!!e.arrowAtTop},qa=function(){if(pn){var e=pn.getSourceBlock();e=kp?Ga(pn):Ha(e);const t=e.left+(e.right-e.left)/2;ja(t,e.bottom,t,e.top)}else qo()},Vr=function(e){return e.length?e.reduce(function(t,r){return t.length<r.length?t:r}).length:0},Ja=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let r=0;t=t||Vr(e);let a;for(a=0;a<t;a++){for(var u=e[0][a],b=1;b<e.length;b++)if(u!==e[b][a])return r;u===" "&&(r=a+1)}for(u=1;u<e.length;u++)if((b=e[u][a])&&b!==" ")return r;return t},Za=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let r=0;t=t||Vr(e);let a;for(a=0;a<t;a++){for(var u=e[0].substr(-a-1,1),b=1;b<e.length;b++)if(u!==e[b].substr(-a-1,1))return r;u===" "&&(r=a+1)}for(u=1;u<e.length;u++)if((b=e[u].charAt(e[u].length-a-1))&&b!==" ")return r;return t},o.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let r=0;r<e.length;r++)e[r]=jd(e[r],t);return e.join(`
`)},jd=function(e,t){if(e.length<=t)return e;const r=e.trim().split(/\s+/);for(var a=0;a<r.length;a++)r[a].length>t&&(t=r[a].length);var u=-1/0;let b,U=1;do{a=u,b=e,e=[],u=r.length/U;let Z=1;for(let Ce=0;Ce<r.length-1;Ce++)Z<(Ce+1.5)/u?(Z++,e[Ce]=!0):e[Ce]=!1;e=Qa(r,e,t),u=Jo(r,e,t),e=qd(r,e),U++}while(u>a);return b},Jo=function(e,t,r){const a=[0],u=[];for(var b=0;b<e.length;b++)a[a.length-1]+=e[b].length,t[b]===!0?(a.push(0),u.push(e[b].charAt(e[b].length-1))):t[b]===!1&&a[a.length-1]++;for(e=Math.max(...a),t=0,b=0;b<a.length;b++)t-=Math.pow(Math.abs(r-a[b]),1.5)*2,t-=Math.pow(e-a[b],1.5),".?!".includes(u[b])?t+=r/3:",;)]}".includes(u[b])&&(t+=r/4);return a.length>1&&a[a.length-1]<=a[a.length-2]&&(t+=.5),t},Qa=function(e,t,r){let a=Jo(e,t,r),u;for(let b=0;b<t.length-1;b++){if(t[b]===t[b+1])continue;const U=[].concat(t);U[b]=!U[b],U[b+1]=!U[b+1];const Z=Jo(e,U,r);Z>a&&(a=Z,u=U)}return u?Qa(e,u,r):t},qd=function(e,t){const r=[];for(let a=0;a<e.length;a++)r.push(e[a]),t[a]!==void 0&&r.push(t[a]?`
`:" ");return r.join("")},o.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Jd=function(e){Vs=e},Zd=function(){return Vs},Qd=function(){return _o},e_=function(){return Vt},er=function(e){if(e=el(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},el=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},tl=function(){document.querySelector(".blocklyTooltipDiv")||(Vt=document.createElement("div"),Vt.className="blocklyTooltipDiv",(h()||document.body).appendChild(Vt))},Hr=function(e){e.mouseOverWrapper_=F(e,"pointerover",null,t_),e.mouseOutWrapper_=F(e,"pointerout",null,i_),e.addEventListener("pointermove",nl,!1)},il=function(e){e&&(L(e.mouseOverWrapper_),L(e.mouseOutWrapper_),e.removeEventListener("pointermove",nl))},t_=function(e){Tr||(e=el(e.currentTarget),Ti!==e&&(Gi(),ho=null,Ti=e),clearTimeout(Mp))},i_=function(e){Tr||(Mp=setTimeout(function(){ho=Ti=null,Gi()},1),clearTimeout(Un),Un=0)},nl=function(e){if(Ti&&Ti.tooltip&&!Tr)if(_o){const t=Zu-e.pageX;e=Qu-e.pageY,Math.sqrt(t*t+e*e)>xp&&Gi()}else ho!==Ti&&(clearTimeout(Un),Zu=e.pageX,Qu=e.pageY,Un=setTimeout(s_,Fp))},rl=function(){ho=Ti=null,Gi()},Gi=function(){_o&&(_o=!1,Vt&&(Vt.style.display="none")),Un&&(clearTimeout(Un),Un=0)},ol=function(){Gi(),Tr=!0},sl=function(){Tr=!1},n_=function(){Vt&&Ti&&(typeof Vs=="function"?Vs(Vt,Ti):r_())},r_=function(){var e=er(Ti);e=o.wrap$$module$build$src$core$utils$string(e,wp),e=e.split(`
`);for(let t=0;t<e.length;t++){const r=document.createElement("div");r.appendChild(document.createTextNode(e[t])),Vt.appendChild(r)}},o_=function(e){const t=document.documentElement.clientWidth,r=document.documentElement.clientHeight;let a=Zu;a=e?a-(ec+Vt.offsetWidth):a+ec;let u=Qu+tc;return u+Vt.offsetHeight>r+window.scrollY&&(u-=Vt.offsetHeight+2*tc),e?a=Math.max(Hs-window.scrollX,a):a+Vt.offsetWidth>t+window.scrollX-2*Hs&&(a=t-Vt.offsetWidth-2*Hs),{x:a,y:u}},s_=function(){if(!Tr&&(ho=Ti,Vt)){Vt.textContent="",n_();var e=Ti.RTL;Vt.style.direction=e?"rtl":"ltr",Vt.style.display="block",_o=!0;var{x:t,y:r}=o_(e);Vt.style.left=t+"px",Vt.style.top=r+"px"}},al=function(){return ic},a_=function(e){ic=e},ll=function(){return nc},l_=function(e){nc=e},On=function(e){e=`${e}`.toLowerCase().trim();var t=Pp[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var r=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(e=Number(r[1]),t=Number(r[2]),r=Number(r[3]),e>=0&&e<256&&t>=0&&t<256&&r>=0&&r<256)?Gr(e,t,r):null},Gr=function(e,t,r){return t=e<<16|t<<8|r,e<16?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Zo=function(e){return e=On(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},Qo=function(e,t,r){let a=0,u=0,b=0;if(t===0)b=u=a=r;else{const U=Math.floor(e/60),Z=e/60-U;e=r*(1-t);const Ce=r*(1-t*Z);switch(t=r*(1-t*(1-Z)),U){case 1:a=Ce,u=r,b=e;break;case 2:a=e,u=r,b=t;break;case 3:a=e,u=Ce,b=r;break;case 4:a=t,u=e,b=r;break;case 5:a=r,u=e,b=Ce;break;case 6:case 0:a=r,u=t,b=e}}return Gr(Math.floor(a),Math.floor(u),Math.floor(b))},vn=function(e,t,r){return e=On(e),!e||(t=On(t),!t)?null:(e=Zo(e),t=Zo(t),Gr(Math.round(t[0]+r*(e[0]-t[0])),Math.round(t[1]+r*(e[1]-t[1])),Math.round(t[2]+r*(e[2]-t[2]))))},ul=function(e){return Qo(e,ic,nc*255)},es=function(e,t,r){const a=[];var u=e.split("");u.push("");var b=0;e=[];let U=null;for(let je=0;je<u.length;je++){var Z=u[je];if(b===0)if(Z==="%")(b=e.join(""))&&a.push(b),e.length=0,b=1;else if(r&&Z===`
`){const Ct=e.join("");Ct&&a.push(Ct),e.length=0,a.push(Z)}else e.push(Z);else if(b===1)Z==="%"?(e.push(Z),b=0):t&&"0"<=Z&&Z<="9"?(b=2,U=Z,(Z=e.join(""))&&a.push(Z),e.length=0):Z==="{"?b=3:(e.push("%",Z),b=0);else if(b===2)if("0"<=Z&&Z<="9")U+=Z;else{var Ce=void 0;a.push(parseInt((Ce=U)!=null?Ce:"",10)),je--,b=0}else b===3&&(Z===""?(e.splice(0,0,"%{"),je--,b=0):Z!=="}"?e.push(Z):(b=e.join(""),/[A-Z]\w*/i.test(b)?(Z=b.toUpperCase(),(Z=Z.startsWith("BKY_")?Z.substring(4):null)&&Z in o.Msg$$module$build$src$core$msg?(b=o.Msg$$module$build$src$core$msg[Z],typeof b=="string"?Array.prototype.push.apply(a,es(b,t,r)):t?a.push(`${b}`):a.push(b)):a.push("%{"+b+"}")):a.push("%{"+b+"}"),b=e.length=0))}for((t=e.join(""))&&a.push(t),Ce=[],e.length=0,u=0;u<a.length;u++)typeof a[u]!="string"||r&&a[u]===`
`?((t=e.join(""))&&Ce.push(t),e.length=0,Ce.push(a[u])):e.push(a[u]);return(t=e.join(""))&&Ce.push(t),e.length=0,Ce},cl=function(e){return es(e,!0,!0)},Dt=function(e){return typeof e!="string"?e:(e=es(e,!1,!1),e.length?String(e[0]):"")},u_=function(e){let t=!0;const r=o.Msg$$module$build$src$core$msg,a=e.match(/%{BKY_[A-Z]\w*}/gi);if(a)for(let u=0;u<a.length;u++){const b=a[u].toUpperCase();r[b.slice(6,-1)]===void 0&&(console.warn("No message string for "+a[u]+" in "+e),t=!1)}return t},tr=function(e){const t=typeof e=="string"?Dt(e):e;var r=Number(t);if(!isNaN(r)&&0<=r&&r<=360)return{hue:r,hex:Qo(r,al(),ll()*255)};if(r=On(t))return{hue:null,hex:r};throw r='Invalid colour: "'+t+'"',e!==t&&(r+=' (from "'+e+'")'),Error(r)},ir=function(){return ci},c_=function(e){if(ci=e,e===null){let t;(t=document.querySelector("."+rc))==null||t.remove()}},dl=function(){const e=h()||document.body,t=document.querySelector("div."+rc);t?ci=t:(ci=document.createElement("div"),ci.className=rc,ci.tabIndex=-1),y(ci,"keydown",null,Y),e.appendChild(ci)},ts=function(e,t,r,a,u=!0){if(nr(),gr=e,Gs=r,r=ci){if(r.style.direction=t?"rtl":"ltr",r.style.display="block",!a&&e instanceof Tt){let Z;a=(Z=e.getSourceBlock())==null?void 0:Z.workspace}var b;Bp=(b=a)!=null?b:null;var U;e=(U=a)!=null?U:O(),Er=e.getRenderer().getClassName(),$r=e.getTheme().getClassName(),Er&&De(r,Er),$r&&De(r,$r),u&&(Ws=o.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(r))}},nr=function(){if(_l()){gr=null;var e=ci;e&&(e.style.display="none",e.style.left="",e.style.top="",Gs&&(Gs(),Gs=null),e.textContent="",Er&&(Se(e,Er),Er=""),$r&&(Se(e,$r),$r=""),O().markFocused(),Ws&&(Ws(),Ws=null))}},_l=function(){return!!gr},Cn=function(e){gr===e&&nr()},Wr=function(e){let t=Bp===null,r=e;for(;!t&&r;){if(r===e){t=!0;break}r=e.options.parentWorkspace}t&&nr()},hl=function(e,t,r){ci.style.left=e+"px",ci.style.top=t+"px",ci.style.height=r+"px"},pl=function(e,t,r,a){const u=__(e,t,r);e=d_(e,t,r,a),u<0?hl(e,0,r.height+u):hl(e,u,r.height)},d_=function(e,t,r,a){return a?Math.min(Math.max(t.right-r.width,e.left),e.right-r.width):Math.max(Math.min(t.left,e.right-r.width),e.left)},__=function(e,t,r){return t.bottom+r.height>=e.bottom?t.top-r.height:t.bottom},h_=function(e){return!(e==null||!e.repositionForWindowResize)},fl=function(){h_(gr)&&gr.repositionForWindowResize()||nr()},p_=function(){return Xs},ml=function(e){Xs=e},rr=function(e,t,r,a,u){if(ts(Up,r,Tl,a),t.length){u||(e instanceof PointerEvent?u=new Me(e.clientX,e.clientY):(console.warn("Context menu opened with keyboard but no location given"),u=new Me(0,0)));var b=f_(t,r,e,u);Ks=b,m_(b,r,u),setTimeout(function(){b.focus()},1),Xs=null}else Xr()},f_=function(e,t,r,a){const u=new Vu;u.setRole(li.MENU);for(let b=0;b<e.length;b++){const U=e[b];if(U.separator){u.addChild(new lp);continue}const Z=new Ls(U.text);Z.setRightToLeft(t),Z.setRole(li.MENUITEM),u.addChild(Z),Z.setEnabled(U.enabled),U.enabled&&Z.onAction(function(Ce,je){Xr(),requestAnimationFrame(()=>{setTimeout(()=>{U.callback(U.scope,r,je,a)},0)})},{})}return u},m_=function(e,t,r){const a=rt();r=new ut(r.y+a.top,r.y+a.top,r.x+a.left,r.x+a.left),T_(e);const u=e.getSize();t&&(r.left+=u.width,r.right+=u.width,a.left+=u.width,a.right+=u.width),pl(a,r,u,t),e.focus()},T_=function(e){var t=ir();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),De(t,"blocklyContextMenu"),y(t,"contextmenu",null,g_),e.focus()},g_=function(e){e.preventDefault(),e.stopPropagation()},Xr=function(){Cn(Up),Xs=null},Tl=function(){Ks&&(Ks.dispose(),Ks=null)},o.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{o.disable$$module$build$src$core$events$utils();let r;try{r=t instanceof Element?yn(t,e.workspace):Zn(t,e.workspace);const a=e.getRelativeToSurfaceXY();a.x=e.RTL?a.x-o.config$$module$build$src$core$config.snapRadius:a.x+o.config$$module$build$src$core$config.snapRadius,a.y+=o.config$$module$build$src$core$config.snapRadius*2,r.moveBy(a.x,a.y)}finally{o.enable$$module$build$src$core$events$utils()}return ue()&&!r.isShadow()&&be(new(Fe(pe.BLOCK_CREATE))(r)),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(r),r}},gl=function(e,t){return t=I(t,e.getParentSvg(),e.getInverseScreenCTM()),t.x/=e.scale,t.y/=e.scale,t},is=function(e,t,r){t=gl(e,t),Hp.set(e,Me.difference(r,t))},ns=function(e,t){if(t=gl(e,t),e=Hp.get(e),!e)throw Error("Drag not initialized");return Me.sum(e,t)},E_=function(e,t=!1){const r=o.createElement$$module$build$src$core$utils$xml("xml");var a=El(o.allUsedVarModels$$module$build$src$core$variables(e));a.hasChildNodes()&&r.appendChild(a);for(const u of e.getTopComments())r.appendChild(Kr(u,t));for(e=e.getTopBlocks(!0),a=0;a<e.length;a++)r.appendChild(zr(e[a],t));return r},Kr=function(e,t=!1){const r=o.createElement$$module$build$src$core$utils$xml("comment");t||r.setAttribute("id",e.id),t=e.workspace;const a=e.getRelativeToSurfaceXY().clone();return a.x=t.RTL?t.getWidth()-a.x:a.x,r.setAttribute("x",`${a.x}`),r.setAttribute("y",`${a.y}`),r.setAttribute("w",`${e.getSize().width}`),r.setAttribute("h",`${e.getSize().height}`),e.getText()&&(r.textContent=e.getText()),e.isCollapsed()&&r.setAttribute("collapsed","true"),e.isOwnEditable()||r.setAttribute("editable","false"),e.isOwnMovable()||r.setAttribute("movable","false"),e.isOwnDeletable()||r.setAttribute("deletable","false"),r},El=function(e){const t=o.createElement$$module$build$src$core$utils$xml("variables");for(let r=0;r<e.length;r++){const a=e[r],u=o.createElement$$module$build$src$core$utils$xml("variable");u.appendChild(o.createTextNode$$module$build$src$core$utils$xml(a.getName())),a.getType()&&u.setAttribute("type",a.getType()),u.id=a.getId(),t.appendChild(u)}return t},zr=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let r=0;if(e.workspace.RTL&&(r=e.workspace.getWidth()),t=an(e,t),Il(t)){const a=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?r-a.x:a.x))),t.setAttribute("y",String(Math.round(a.y)))}return t},$_=function(e){if(e.isSerializable()){const t=o.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},S_=function(e,t){for(const r of e.getFields())(e=$_(r))&&t.appendChild(e)},an=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?an(t):new DocumentFragment;const r=o.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(r.setAttribute("type",e.type),t||(r.id=e.id),e.mutationToDom){var a=e.mutationToDom();a&&(a.hasChildNodes()||a.hasAttributes())&&r.appendChild(a)}if(S_(e,r),a=e.getCommentText()){var u=e.getIcon(Ut.COMMENT),b=u.getBubbleSize(),U=u.bubbleIsVisible();u=u.getBubbleLocation();var Z=o.createElement$$module$build$src$core$utils$xml("comment");Z.appendChild(o.createTextNode$$module$build$src$core$utils$xml(a)),Z.setAttribute("pinned",`${U}`),Z.setAttribute("h",`${b.height}`),Z.setAttribute("w",`${b.width}`),u&&(Z.setAttribute("x",`${e.workspace.RTL?e.workspace.getWidth()-(u.x+b.width):u.x}`),Z.setAttribute("y",`${u.y}`)),r.appendChild(Z)}for(e.data&&(a=o.createElement$$module$build$src$core$utils$xml("data"),a.appendChild(o.createTextNode$$module$build$src$core$utils$xml(e.data)),r.appendChild(a)),a=0;a<e.inputList.length;a++){b=e.inputList[a];var Ce=void 0;U=!0,b.type!==o.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&b.type!==o.inputTypes$$module$build$src$core$inputs$input_types.END_ROW&&(u=b.connection.targetBlock(),b.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE?Ce=o.createElement$$module$build$src$core$utils$xml("value"):b.type===o.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(Ce=o.createElement$$module$build$src$core$utils$xml("statement")),Z=b.connection.getShadowDom(),!Z||u&&u.isShadow()||Ce.appendChild($l(Z,t)),u&&(u=an(u,t),u.nodeType===zi.ELEMENT_NODE&&(Ce.appendChild(u),U=!1)),Ce.setAttribute("name",b.name),U||r.appendChild(Ce))}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&r.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&r.setAttribute("collapsed","true"),e.isEnabled()||r.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||r.setAttribute("deletable","false"),e.isOwnMovable()||r.setAttribute("movable","false"),e.isOwnEditable()||r.setAttribute("editable","false"),Ce=e.getNextBlock();let je;return Ce&&(a=an(Ce,t),a.nodeType===zi.ELEMENT_NODE&&(je=o.createElement$$module$build$src$core$utils$xml("next"),je.appendChild(a),r.appendChild(je))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||Ce&&Ce.isShadow()||je.appendChild($l(e,t)),r},$l=function(e,t){let r=e=e.cloneNode(!0),a;for(;r;)if(t&&r.nodeName==="shadow"&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;){a=r,r=r.parentNode;let u;a.nodeType===zi.TEXT_NODE&&a.data.trim()===""&&((u=r)==null?void 0:u.firstChild)!==a&&He(a)}r&&(a=r,r=r.nextSibling,a.nodeType===zi.TEXT_NODE&&a.data.trim()===""&&He(a))}return e},Ri=function(e){return Et(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},A_=function(e){e=Ri(e).split("<");let t="";for(let r=1;r<e.length;r++){const a=e[r];a[0]==="/"&&(t=t.substring(2)),e[r]=t+"<"+a,a[0]!=="/"&&a.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},b_=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=o.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},o.domToWorkspace$$module$build$src$core$xml=function(e,t){let r=0;t.RTL&&(r=t.getWidth());const a=[];ht();const u=o.getGroup$$module$build$src$core$events$utils();u||o.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let b=!0;try{for(let U=0,Z;Z=e.childNodes[U];U++){const Ce=Z.nodeName.toLowerCase(),je=Z;if(Ce==="block"||Ce==="shadow"&&!ve()){const Ct=yn(je,t);a.push(Ct.id);let At;const Jt=parseInt((At=je.getAttribute("x"))!=null?At:"10",10);let nn;const Hi=parseInt((nn=je.getAttribute("y"))!=null?nn:"10",10);isNaN(Jt)||isNaN(Hi)||Ct.moveBy(t.RTL?r-Jt:Jt,Hi,["create"]),b=!1}else{if(Ce==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Ce==="comment")Sl(je,t);else if(Ce==="variables"){if(b)Al(je,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");b=!1}}}}finally{o.setGroup$$module$build$src$core$events$utils(u),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&on(),nt()}return be(new(Fe(pe.FINISHED_LOADING))(t)),a},Sl=function(e,t){var r;const a=(r=e.getAttribute("id"))!=null?r:void 0;r=t.rendered?new Ji(t,a):new Js(t,a);var u;r.setText((u=e.textContent)!=null?u:"");var b;u=parseInt((b=e.getAttribute("x"))!=null?b:"",10);let U;b=parseInt((U=e.getAttribute("y"))!=null?U:"",10),isNaN(u)||isNaN(b)||(u=t.RTL?t.getWidth()-u:u,r.moveTo(new Me(u,b)));var Z;t=parseInt((Z=e.getAttribute("w"))!=null?Z:"",10);let Ce;return Z=parseInt((Ce=e.getAttribute("h"))!=null?Ce:"",10),isNaN(t)||isNaN(Z)||r.setSize(new ct(t,Z)),e.getAttribute("collapsed")==="true"&&r.setCollapsed(!0),e.getAttribute("editable")==="false"&&r.setEditable(!1),e.getAttribute("movable")==="false"&&r.setMovable(!1),e.getAttribute("deletable")==="false"&&r.setDeletable(!1),r},I_=function(e,t){if(!t.getBlocksBoundingBox)return o.domToWorkspace$$module$build$src$core$xml(e,t);var r=t.getBlocksBoundingBox();if(e=o.domToWorkspace$$module$build$src$core$xml(e,t),r&&r.top!==r.bottom){var a=r.bottom;r=t.RTL?r.right:r.left;var u=1/0;let b=-1/0,U=1/0;for(let Z=0;Z<e.length;Z++){const Ce=t.getBlockById(e[Z]).getRelativeToSurfaceXY();Ce.y<U&&(U=Ce.y),Ce.x<u&&(u=Ce.x),Ce.x>b&&(b=Ce.x)}for(a=a-U+10,r=t.RTL?r-b:r-u,u=0;u<e.length;u++)t.getBlockById(e[u]).moveBy(r,a,["create"])}return e},o.domToBlock$$module$build$src$core$xml=function(e,t){return e=yn(e,t),t.rendered&&on(),e},yn=function(e,t){o.disable$$module$build$src$core$events$utils();var r=t.getAllVariables();let a;try{if(a=rs(e,t),t.rendered){const u=a,b=a.getDescendants(!1);u.setConnectionTracking(!1);for(let U=b.length-1;U>=0;U--)b[U].initSvg();for(let U=b.length-1;U>=0;U--)b[U].queueRender();setTimeout(function(){u.disposed||u.setConnectionTracking(!0)},1),t.resizeContents()}else{const u=a.getDescendants(!1);for(let b=u.length-1;b>=0;b--)u[b].initModel()}}finally{o.enable$$module$build$src$core$events$utils()}if(ue()){for(e=Br(t,r),t=0;t<e.length;t++)r=e[t],be(new(Fe(pe.VAR_CREATE))(r));be(new(Fe(pe.BLOCK_CREATE))(a))}return a},Al=function(e,t){for(let a=0;a<e.children.length;a++){var r=e.children[a];const u=r.getAttribute("type"),b=r.getAttribute("id");if(r=r.textContent,!r)break;let U;t.getVariableMap().createVariable(r,(U=u)!=null?U:void 0,b)}},O_=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let r=0;r<e.children.length;r++){const a=e.children[r];if(a.nodeType!==zi.TEXT_NODE)switch(a.nodeName.toLowerCase()){case"mutation":t.mutation.push(a);break;case"comment":t.comment.push(a);break;case"data":t.data.push(a);break;case"title":case"field":t.field.push(a);break;case"value":case"statement":t.input.push(a);break;case"next":t.next.push(a);break;default:console.warn("Ignoring unknown tag: "+a.nodeName)}}return t},v_=function(e,t){let r=!1;for(let a=0;a<e.length;a++){const u=e[a];t.domToMutation&&(t.domToMutation(u),t.initSvg&&(r=!0))}return r},C_=function(e,t){for(let r=0;r<e.length;r++){const a=e[r],u=a.textContent,b=a.getAttribute("pinned")==="true";let U;const Z=parseInt((U=a.getAttribute("w"))!=null?U:"50",10);let Ce;const je=parseInt((Ce=a.getAttribute("h"))!=null?Ce:"50",10);let Ct,At=parseInt((Ct=a.getAttribute("x"))!=null?Ct:"",10),Jt;const nn=parseInt((Jt=a.getAttribute("y"))!=null?Jt:"",10);t.setCommentText(u);const Hi=t.getIcon(Ut.COMMENT);isNaN(Z)||isNaN(je)||Hi.setBubbleSize(new ct(Z,je)),Hi.setBubbleVisible(b),setTimeout(()=>{isNaN(At)||isNaN(nn)||(At=t.workspace.RTL?t.workspace.getWidth()-(At+Z):At,Hi.setBubbleLocation(new Me(At,nn))),Hi.setBubbleVisible(b)},1)}},y_=function(e,t){for(let r=0;r<e.length;r++)t.data=e[r].textContent},R_=function(e,t){for(let r=0;r<e.length;r++){const a=e[r],u=a.getAttribute("name");u?L_(t,u,a):console.warn(`Ignoring unnamed field in block ${t.type}`)}},bl=function(e){let t=null,r=null;for(let a=0;a<e.childNodes.length;a++){const u=e.childNodes[a];Il(u)&&(u.nodeName.toLowerCase()==="block"?t=u:u.nodeName.toLowerCase()==="shadow"&&(r=u))}return{childBlockElement:t,childShadowElement:r}},N_=function(e,t,r,a){for(let b=0;b<e.length;b++){var u=e[b];const U=u.getAttribute("name"),Z=U?r.getInput(U):null;if(!Z){console.warn("Ignoring non-existent input "+U+" in block "+a);break}if(u=bl(u),u.childBlockElement){if(!Z.connection)throw TypeError("Input connection does not exist.");rs(u.childBlockElement,t,Z.connection,!1)}if(u.childShadowElement){let Ce;(Ce=Z.connection)==null||Ce.setShadowDom(u.childShadowElement)}}},D_=function(e,t,r){for(let a=0;a<e.length;a++){const u=bl(e[a]);if(u.childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");rs(u.childBlockElement,t,r.nextConnection,!0)}u.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(u.childShadowElement)}},rs=function(e,t,r,a){var u;const b=e.getAttribute("type");if(!b)throw TypeError("Block type unspecified: "+e.outerHTML);var U=(u=e.getAttribute("id"))!=null?u:void 0;u=t.newBlock(b,U),U=O_(e);const Z=v_(U.mutation,u);if(C_(U.comment,u),y_(U.data,u),r)if(a)if(u.previousConnection)r.connect(u.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(u.outputConnection)r.connect(u.outputConnection);else if(u.previousConnection)r.connect(u.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(R_(U.field,u),N_(U.input,t,u,b),D_(U.next,t,u),Z&&u.initSvg(),(t=e.getAttribute("inline"))&&u.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&u.setDisabledReason(t==="true"||t==="disabled",mi),t=e.getAttribute("disabled-reasons"),t!==null)for(var Ce of t.split(","))u.setDisabledReason(!0,decodeURIComponent(Ce));if((Ce=e.getAttribute("deletable"))&&u.setDeletable(Ce==="true"),(Ce=e.getAttribute("movable"))&&u.setMovable(Ce==="true"),(Ce=e.getAttribute("editable"))&&u.setEditable(Ce==="true"),(Ce=e.getAttribute("collapsed"))&&u.setCollapsed(Ce==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=u.getChildren(!1),Ce=0;Ce<e.length;Ce++)if(!e[Ce].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");u.setShadow(!0)}return u},L_=function(e,t,r){const a=e.getField(t);a?a.fromXml(r):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},k_=function(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes[t];if(r.nodeName.toLowerCase()==="next"){e.removeChild(r);break}}},Il=function(e){return e.nodeType===zi.ELEMENT_NODE},Ni=function(e,t){s(Re.FIELD,e,t,!0)},w_=function(e){f(Re.FIELD,e)},o.fromJson$$module$build$src$core$field_registry=function(e){return zp.fromJsonInternal(e)},M_=function(e){const t=x(Re.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},or=function(e){return e&&typeof e=="object"&&"src"in e&&typeof e.src=="string"&&"alt"in e&&typeof e.alt=="string"&&"width"in e&&typeof e.width=="number"&&"height"in e&&typeof e.height=="number"},o.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Sr[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');Sr[e]=t},o.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');o.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},o.registerMutator$$module$build$src$core$extensions=function(e,t,r,a){const u='Error when registering mutator "'+e+'": ';Cl(u,t);const b=vl(t,u);if(r&&typeof r!="function")throw Error(u+'Extension "'+e+'" is not a function');o.register$$module$build$src$core$extensions(e,function(){b&&this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(a||[],this)),this.mixin(t),r&&r.apply(this)})},x_=function(e){Ol(e)?delete Sr[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Ol=function(e){return!!Sr[e]},os=function(e,t,r){const a=Sr[e];if(typeof a!="function")throw Error('Error: Extension "'+e+'" not found.');let u;if(r?F_(e,t):u=as(t),a.apply(t),r)Cl('Error after applying mutator "'+e+'": ',t);else if(!U_(u,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},F_=function(e,t){if(as(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},P_=function(e,t){return ss(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},B_=function(e,t){return ss(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},vl=function(e,t){return ss(e.compose,e.decompose,t+" compose/decompose")},ss=function(e,t,r){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(r+" must be a function");return!0}if(!e&&!t)return!1;throw Error(r+"Must have both or neither functions")},Cl=function(e,t){const r=P_(t,e),a=B_(t,e);if(!r&&!a)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");vl(t,e)},as=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},U_=function(e,t){if(t=as(t),t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(e[r]!==t[r])return!1;return!0},V_=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},o.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const r=[];return function(){r.includes(this.type)||(H_(this,e,t),r.push(this.type)),this.setTooltip((function(){const a=String(this.getFieldValue(e));return Dt(t[a])}).bind(this))}},H_=function(e,t,r){var a=e.getField(t);if(a instanceof qt&&!a.isOptionListDynamic()){a=a.getOptions();for(const u of a)u!==qt.SEPARATOR&&([,a]=u,r[a]===void 0&&console.warn(`No tooltip mapping for value ${a} of field ${t} of block type ${e.type}.`))}},o.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip((function(){const r=this.getField(t);return Dt(e).replace("%1",r?r.getText():"")}).bind(this))}},G_=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},qe=function(e,t){return" "+e+","+t+" "},oi=function(e,t){return" "+e+t.join("")},Xt=function(e,t){return" M "+e+","+t+" "},yt=function(e,t){return" m "+e+","+t+" "},Di=function(e,t){return" l "+e+","+t+" "},sr=function(e){return" l"+e.join("")},Ze=function(e,t){return" "+e+" "+t+" "},Lt=function(e,t,r,a){return e+" "+r+" "+r+" "+t+a},W_=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},X_=function(e,t){let r=null;t=t.outputConnection;const a=t?.getConnectionChecker();for(let u=0,b;b=e.inputList[u];u++){const U=b.connection;let Z;if(U&&((Z=a)!=null&&Z.canConnect(t,U,!1))){if(r)return null;r=U}}return r},K_=function(e,t){let r;for(;r=X_(e,t);)if(e=r.targetBlock(),!e||e.isShadow())return r;return null},yl=function(e){return ae(e)&&typeof e.getType=="function"&&typeof e.initView=="function"&&typeof e.dispose=="function"&&typeof e.getWeight=="function"&&typeof e.getSize=="function"&&typeof e.applyColour=="function"&&typeof e.hideForInsertionMarker=="function"&&typeof e.updateEditable=="function"&&typeof e.updateCollapsed=="function"&&typeof e.isShownWhenCollapsed=="function"&&typeof e.setOffsetInBlock=="function"&&typeof e.onLocationChange=="function"&&typeof e.onClick=="function"},z_=function(e){return yl(e)&&In(e)&&Fr(e)&&typeof e.setText=="function"&&typeof e.getText=="function"&&typeof e.setBubbleSize=="function"&&typeof e.getBubbleSize=="function"&&typeof e.setBubbleLocation=="function"&&typeof e.getBubbleLocation=="function"&&e.getType()===Ut.COMMENT},ls=function(e){if(!(e.getDescendants(!1).length>100)){var t=e.workspace,r=e.getSvgRoot();t.getAudioManager().play("delete");var a=e.getRelativeToSurfaceXY(),u=r.cloneNode(!0);u.setAttribute("transform","translate("+a.x+","+a.y+")");var b;(b=t.getLayerManager())==null||b.appendToAnimationLayer({getSvgRoot:()=>u}),Rl(u,{x:a.x,y:a.y,width:e.width,height:e.height},t.RTL,new Date)}},Rl=function(e,t,r,a){const u=(new Date().getTime()-a.getTime())/150;u>1?He(e):(e.setAttribute("transform","translate("+(t.x+(r?-1:1)*t.width/2*u)+","+(t.y+t.height/2*u)+") scale("+(1-u)+")"),setTimeout(Rl,10,e,t,r,a))},Nl=function(e){var t=e.workspace;const r=t.scale;if(t.getAudioManager().play("click"),!(r<1)){var a=t.getSvgXY(e.getSvgRoot());e.outputConnection?(a.x+=(e.RTL?3:-3)*r,a.y+=13*r):e.previousConnection&&(a.x+=(e.RTL?-23:23)*r,a.y+=3*r);var u=de(_e.CIRCLE,{cx:a.x,cy:a.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=de(_e.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*r},u),t=de(_e.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},u),e.beginElement(),t.beginElement(),setTimeout(()=>{He(u)},150)}},Dl=function(e){if(ar(),e.workspace.getAudioManager().play("disconnect"),!(e.workspace.scale<1)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),To=e,Ll(e,t,new Date,0)}},Ll=function(e,t,r,a){const u=[.66,1,.66,0,-.66,-1,-.66,0];let b="";r.getTime()+200>new Date().getTime()&&(b=`skewX(${Math.round(u[a%u.length]*t)})`,na=setTimeout(Ll,15,e,t,r,a+1)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${b}`)},ar=function(){To&&(na&&(clearTimeout(na),na=null),To.getSvgRoot().setAttribute("transform",To.getTranslation()),To=null)},Y_=function(e,t){e.workspace.RTL&&(t.x=e.workspace.getWidth()-t.x);const r=e.workspace,a=o.config$$module$build$src$core$config.snapRadius,u=Me.difference(t,e.getRelativeToSurfaceXY()),b=new Me(0,0),U=r.getAllBlocks(!1).filter(Z=>Z.id!=e.id).map(Z=>Z.getRelativeToSurfaceXY());for(;j_(Me.sum(t,b),U)||q_(e,Me.sum(u,b),a);)r.RTL?b.translate(-a,a*2):b.translate(a,a*2);e.moveTo(Me.sum(t,b))},j_=function(e,t){return t.some(r=>Math.abs(r.x-e.x)<=1&&Math.abs(r.y-e.y)<=1)},q_=function(e,t,r){return e.getConnections_(!1).some(a=>!!a.closest(r,t).connection)},lr=function(e,t,r){const a=r.getBoundingRectangle(),u=a.right-a.left,b=Qn(t.top,a.top,t.top+t.height-(a.bottom-a.top))-a.top;let U=t.left;return t=t.left+t.width-u,e.RTL?U=Math.min(t,U):t=Math.max(U,t),(e=Qn(U,a.left,t)-a.left)||b?(r.moveBy(e,b,["inbounds"]),!0):!1},kl=function(e){return t=>{var r=e.getMetricsManager();if(r.hasFixedEdges()&&!e.isDragging()){var a;if(Uh.includes((a=t.type)!=null?a:"")){a=r.getScrollMetrics(!0);const u=J_(e,t);u&&(r=o.getGroup$$module$build$src$core$events$utils()||!1,o.setGroup$$module$build$src$core$events$utils(t.group),lr(e,a,u)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),o.setGroup$$module$build$src$core$events$utils(r))}else we(t)&&t.scale&&t.oldScale&&t.scale>t.oldScale&&us(e)}}},J_=function(e,t){let r=null;switch(t.type){case pe.BLOCK_CREATE:case pe.BLOCK_MOVE:(r=e.getBlockById(t.blockId))&&(r=r.getRootBlock());break;case pe.COMMENT_CREATE:case pe.COMMENT_MOVE:case pe.COMMENT_RESIZE:r=e.getCommentById(t.commentId)}return r},us=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var r=e.getTopBoundedElements();for(let a=0,u;u=r[a];a++)lr(e,t,u)}},fi=function(e){return e&&typeof e.isDeletable=="function"&&typeof e.dispose=="function"&&typeof e.setDeleteStyle=="function"},wl=function(e,t){const r=e.getIcons();for(const a of e.inputList){if(!a.isVisible())continue;r.push(...a.fieldRow);let u;if((u=a.connection)!=null&&u.targetBlock())if(e=a.connection.targetBlock(),a.connection.type!==Ke.NEXT_STATEMENT||t)r.push(e);else{let b;(e=(b=e.lastConnectionInStack(!1))==null?void 0:b.getSourceBlock())&&r.push(e)}else{let b;((b=a.connection)==null?void 0:b.type)===Ke.INPUT_VALUE&&r.push(a.connection)}}return r},ur=function(e,t){const r=e.workspace.getTopBoundedElements(!0).filter(u=>ae(u));e=r.indexOf(e instanceof St?e.getRootBlock():e)+t;let a=null;if(e>=0&&e<r.length?a=r[e]:e<0?a=r[r.length-1]:e>=r.length&&(a=r[0]),t<0&&a instanceof St){let u,b;return(b=(u=a.lastConnectionInStack(!1))==null?void 0:u.getSourceBlock())!=null?b:a}return a},Ei=function(e,t){var r;let a;const u=e instanceof St?(a=(r=e.outputConnection)==null?void 0:r.targetBlock())!=null?a:e.getSurroundParent():e.getSourceBlock();return!(u instanceof St)||(r=wl(u,t>0),e=r.indexOf(e),e===-1)?null:(t=e+t,t>=0&&t<r.length?r[t]:null)},Ml=function(e,t){s(Re.ICON,e.toString(),t)},Z_=function(e){f(Re.ICON,e)},cr=function(e){return e&&typeof e.getRelativeToSurfaceXY=="function"&&typeof e.isMovable=="function"&&typeof e.startDrag=="function"&&typeof e.drag=="function"&&typeof e.endDrag=="function"&&typeof e.revertDrag=="function"},Q_=function(e){return e&&typeof e.autoHide=="function"},ln=function(e){return typeof e.getProcedureModel=="function"&&typeof e.doProcedureUpdate=="function"&&typeof e.isProcedureDef=="function"},cs=function(e){return e&&typeof e.startPublishing=="function"&&typeof e.stopPublishing=="function"},Yr=function(e){const t=e.getProcedureMap().getProcedures().filter(a=>!a.getReturnTypes()).map(a=>[a.getName(),a.getParameters().map(u=>u.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(a=>{!ln(a)&&jn(a)&&t.push(a.getProcedureDef())});const r=e.getProcedureMap().getProcedures().filter(a=>!!a.getReturnTypes()).map(a=>[a.getName(),a.getParameters().map(u=>u.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(a=>{!ln(a)&&jn(a)&&r.push(a.getProcedureDef())}),t.sort(xl),r.sort(xl),[t,r]},xl=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},o.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||o.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!eh(e,t.workspace,t);){const r=e.match(/^(.*?)(\d+)$/);e=r?r[1]+(parseInt(r[2])+1):e+"2"}return e},eh=function(e,t,r){return!Fl(e,t,r)},Fl=function(e,t,r){for(const a of t.getAllBlocks(!1))if(a!==r&&jn(a)&&o.Names$$module$build$src$core$names.equals(a.getProcedureDef()[0],e))return!0;r=r&&ln(r)?r?.getProcedureModel():void 0;for(const a of t.getProcedureMap().getProcedures())if(a!==r&&o.Names$$module$build$src$core$names.equals(a.getName(),e))return!0;return!1},o.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new xt;e=e.trim();const r=o.findLegalName$$module$build$src$core$procedures(e,t);ln(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(r);const a=this.getValue();if(a!==e&&a!==r)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const u=e[t];u.renameProcedure&&u.renameProcedure(a,r)}return r},th=function(e){function t(b,U){for(let Ce=0;Ce<b.length;Ce++){var Z=b[Ce][0];const je=b[Ce][1],Ct=o.createElement$$module$build$src$core$utils$xml("block");Ct.setAttribute("type",U),Ct.setAttribute("gap","16");const At=o.createElement$$module$build$src$core$utils$xml("mutation");for(At.setAttribute("name",Z),Ct.appendChild(At),Z=0;Z<je.length;Z++){const Jt=o.createElement$$module$build$src$core$utils$xml("arg");Jt.setAttribute("name",je[Z]),At.appendChild(Jt)}r.push(Ct)}}const r=[];if(bt.procedures_defnoreturn){var a=o.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","procedures_defnoreturn"),a.setAttribute("gap","16");var u=o.createElement$$module$build$src$core$utils$xml("field");u.setAttribute("name","NAME"),u.appendChild(o.createTextNode$$module$build$src$core$utils$xml(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),a.appendChild(u),r.push(a)}return bt.procedures_defreturn&&(a=o.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","procedures_defreturn"),a.setAttribute("gap","16"),u=o.createElement$$module$build$src$core$utils$xml("field"),u.setAttribute("name","NAME"),u.appendChild(o.createTextNode$$module$build$src$core$utils$xml(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),a.appendChild(u),r.push(a)),bt.procedures_ifreturn&&(a=o.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","procedures_ifreturn"),a.setAttribute("gap","16"),r.push(a)),r.length&&r[r.length-1].setAttribute("gap","24"),e=Yr(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),r},ds=function(e){return Pl(e,!1)},Pl=function(e,t=!0){function r(u,b){for(const[U,Z]of u)a.push({kind:"block",type:b,gap:16,extraState:{name:U,params:Z}})}if(t)return Wt("The XML return value of Blockly.Procedures.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),th(e);const a=[];return bt.procedures_defnoreturn&&a.push({kind:"block",type:"procedures_defnoreturn",gap:16,fields:{NAME:o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE}}),bt.procedures_defreturn&&a.push({kind:"block",type:"procedures_defreturn",gap:16,fields:{NAME:o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE}}),bt.procedures_ifreturn&&a.push({kind:"block",type:"procedures_ifreturn",gap:16}),a.length&&(a[a.length-1].gap=24),e=Yr(e),r(e[0],"procedures_callnoreturn"),r(e[1],"procedures_callreturn"),a},Bl=function(e){var t=[],r=e.getBlocksByType("procedures_mutatorarg",!1);for(let b=0,U;U=r[b];b++)t.push(U.getFieldValue("NAME"));r=o.createElement$$module$build$src$core$utils$xml("xml");const a=o.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","procedures_mutatorarg");const u=o.createElement$$module$build$src$core$utils$xml("field");u.setAttribute("name","NAME"),t=Go(o.DEFAULT_ARG$$module$build$src$core$procedures,t),t=o.createTextNode$$module$build$src$core$utils$xml(t),u.appendChild(t),a.appendChild(u),r.appendChild(a),e.updateToolbox(r)},Ul=function(e){if(Ae(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=Ne(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Bl(e),e.addChangeListener(ih))}},ih=function(e){(K(e)||X(e)||re(e)||se(e))&&(e=Ne(e.workspaceId),Bl(e))},Vl=function(e,t){return t.getAllBlocks(!1).filter(r=>nh(r,e)||Ad(r)&&o.Names$$module$build$src$core$names.equals(r.getProcedureCall(),e))},nh=function(e,t){return ln(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&o.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},o.mutateCallers$$module$build$src$core$procedures=function(e){const t=ve();var r=e.getProcedureDef()[0];const a=e.mutationToDom(!0);e=Vl(r,e.workspace);for(let b=0,U;U=e[b];b++){r=(r=U.mutationToDom())&&Et(r),U.domToMutation&&U.domToMutation(a);var u=U.mutationToDom();u=u&&Et(u),r!==u&&(o.setRecordUndo$$module$build$src$core$events$utils(!1),be(new(Fe(pe.BLOCK_CHANGE))(U,"mutation",null,r,u)),o.setRecordUndo$$module$build$src$core$events$utils(t))}},o.getDefinition$$module$build$src$core$procedures=function(e,t){for(const r of t.getAllBlocks(!1))if(ln(r)&&r.isProcedureDef()&&o.Names$$module$build$src$core$names.equals(r.getProcedureModel().getName(),e)||jn(r)&&o.Names$$module$build$src$core$names.equals(r.getProcedureDef()[0],e))return r;return null},_s=function(e){return e.isDynamic},rh=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},oh=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},jr=function(e,t){s(Re.RENDERER,e,t)},sh=function(e){f(Re.RENDERER,e)},Hl=function(e,t,r){return e=new(N(Re.RENDERER,e))(e),e.init(t,r),e},hs=function(e){An(e.getTargetWorkspace(),void 0,"String")},ps=function(e){An(e.getTargetWorkspace(),void 0,"Number")},fs=function(e){An(e.getTargetWorkspace(),void 0,"Colour")},ms=function(e){return Gl(e,!1)},Gl=function(e,t=!0){return bt.variables_set_dynamic||bt.variables_get_dynamic||console.warn("There are no dynamic variable blocks, but there is a dynamic variable category."),t?(Wt("The XML return value of Blockly.VariablesDynamic.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),ah(e)):(e.registerButtonCallback("CREATE_VARIABLE_STRING",hs),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",ps),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",fs),[{kind:"button",text:o.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE,callbackkey:"CREATE_VARIABLE_STRING"},{kind:"button",text:o.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE,callbackkey:"CREATE_VARIABLE_NUMBER"},{kind:"button",text:o.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE,callbackkey:"CREATE_VARIABLE_COLOUR"},...Ho(e,e.getVariableMap().getAllVariables(),!1,"variables_get_dynamic","variables_set_dynamic")])},ah=function(e){let t=[],r=document.createElement("button");return r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(r),r=document.createElement("button"),r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(r),r=document.createElement("button"),r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(r),e.registerButtonCallback("CREATE_VARIABLE_STRING",hs),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",ps),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",fs),e=Wl(e),t=t.concat(e)},Wl=function(e){e=e.getVariableMap().getAllVariables();const t=[];if(e.length>0){if(bt.variables_set_dynamic){var r=e[e.length-1];const a=o.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","variables_set_dynamic"),a.setAttribute("gap","24"),a.appendChild(bn(r)),t.push(a)}if(bt.variables_get_dynamic){e.sort(qn);for(let a=0,u;u=e[a];a++)r=o.createElement$$module$build$src$core$utils$xml("block"),r.setAttribute("type","variables_get_dynamic"),r.setAttribute("gap","8"),r.appendChild(bn(u)),t.push(r)}}return t},Ts=function(e,t){const r=e.toCopyData();return Io=r,Oo=j(e)&&e.workspace instanceof ti?e.workspace:null,Ea=t,r},gs=function(){return Io},lh=function(e){Io=e},Es=function(){return Oo},uh=function(e){Oo=e},Xl=function(){return Ea},ch=function(e){Ea=e},un=function(e,t,r){return e&&t?Kl(e,t,r):Io&&Oo?Kl(Io,Oo,Ea):null},Kl=function(e,t,r){let a;t=t.isMutator?t:(a=t.options.parentWorkspace)!=null?a:t;let u,b;return(b=(u=x(Re.PASTER,e.paster,!1))==null?void 0:u.paste(e,t,r))!=null?b:null},qr=function(e){return e&&typeof e.toCopyData=="function"},zl=function(){$t.registry.register({name:Fi.ESCAPE,preconditionFn(e){return!e.isReadOnly()},callback(e){return e.hideChaff(),!0},keyCodes:[gt.ESC]})},Yl=function(){$t.registry.register({name:Fi.DELETE,preconditionFn(e,t){return t=t.focusedNode,!e.isReadOnly()&&t!=null&&fi(t)&&t.isDeletable()&&!e.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(e,t,r,a){return t.preventDefault(),e=a.focusedNode,e instanceof St?e.checkAndDelete():fi(e)&&e.isDeletable()&&(o.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),o.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[gt.DELETE,gt.BACKSPACE]})},$s=function(e){return qr(e)&&fi(e)&&cr(e)?e.isCopyable?e.isCopyable():e instanceof St||e instanceof Ji?e.isOwnDeletable()&&e.isOwnMovable():e.isDeletable()&&e.isMovable():!1},jl=function(e){return $s(e)&&fi(e)&&e.isDeletable()},ql=function(){const e=$t.registry.createSerializedKey(gt.C,[gt.CTRL]),t=$t.registry.createSerializedKey(gt.C,[gt.META]);$t.registry.register({name:Fi.COPY,preconditionFn(r,a){return a=a.focusedNode,r=r.isFlyout?r.targetWorkspace:r,!!a&&!!r&&!r.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&$s(a)},callback(r,a,u,b){return a.preventDefault(),a=b.focusedNode,!a||!qr(a)||!$s(a)||(r=r.isFlyout?r.targetWorkspace:r,!r)?!1:(a.workspace.isFlyout||r.hideChaff(),r=cr(a)&&a.workspace==r?a.getRelativeToSurfaceXY():void 0,!!Ts(a,r))},keyCodes:[e,t]})},Jl=function(){const e=$t.registry.createSerializedKey(gt.X,[gt.CTRL]),t=$t.registry.createSerializedKey(gt.X,[gt.META]);$t.registry.register({name:Fi.CUT,preconditionFn(r,a){return a=a.focusedNode,!!a&&!r.isReadOnly()&&!r.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&jl(a)},callback(r,a,u,b){return r=b.focusedNode,!r||!jl(r)||!qr(r)?!1:(a=cr(r)?r.getRelativeToSurfaceXY():void 0,a=Ts(r,a),r instanceof St?r.checkAndDelete():fi(r)&&r.dispose(),!!a)},keyCodes:[e,t]})},Zl=function(){const e=$t.registry.createSerializedKey(gt.V,[gt.CTRL]),t=$t.registry.createSerializedKey(gt.V,[gt.META]);$t.registry.register({name:Fi.PASTE,preconditionFn(){var r=Es();return!r||!r.rendered?!1:(r=r.isFlyout?r.targetWorkspace:r,!!gs()&&!!r&&!r.isReadOnly()&&!r.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken())},callback(r,a){if(r=gs(),!r)return!1;var u=Es();if(!u||(u=u.isFlyout?u.targetWorkspace:u,!u||u.isReadOnly()))return!1;if(a instanceof PointerEvent)return a=Bt(u,new Me(a.clientX,a.clientY)),!!un(r,u,a);if(a=Xl(),!a)return!!un(r,u);const{left:b,top:U,width:Z,height:Ce}=u.getMetricsManager().getViewMetrics(!0);return new ut(U,U+Ce,b,b+Z).contains(a.x,a.y)?!!un(r,u):(a=new Me(b+Z/2,U+Ce/2),!!un(r,u,a))},keyCodes:[e,t]})},Ql=function(){const e=$t.registry.createSerializedKey(gt.Z,[gt.CTRL]),t=$t.registry.createSerializedKey(gt.Z,[gt.META]);$t.registry.register({name:Fi.UNDO,preconditionFn(r){return!r.isReadOnly()&&!r.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(r,a){return r.hideChaff(),r.undo(!1),a.preventDefault(),!0},keyCodes:[e,t]})},eu=function(){const e=$t.registry.createSerializedKey(gt.Z,[gt.CTRL,gt.SHIFT]),t=$t.registry.createSerializedKey(gt.Z,[gt.META,gt.SHIFT]),r=$t.registry.createSerializedKey(gt.Y,[gt.CTRL]);$t.registry.register({name:Fi.REDO,preconditionFn(a){return!a.isDragging()&&!a.isReadOnly()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(a,u){return a.hideChaff(),a.undo(!0),u.preventDefault(),!0},keyCodes:[e,t,r]})},tu=function(){zl(),Yl(),ql(),Jl(),Zl(),Ql(),eu()},iu=function(e){const t=e.saveState();return e.getParameters().length&&(t.parameters=e.getParameters().map(r=>r.saveState())),t},nu=function(e,t,r,a){if(e=e.loadState(r,a),!r.parameters)return e;for(const[u,b]of r.parameters.entries())e.insertParameter(t.loadState(b,a),u);return e},dh=function(e){const t=Object.create(null),r=w(Re.SERIALIZER,!0);for(const a in r){let u;const b=(u=r[a])==null?void 0:u.save(e);b&&(t[a]=b)}return t},_h=function(e,t,{recordUndo:r=!1}={}){var a=w(Re.SERIALIZER,!0);if(a){a=Object.entries(a).sort((b,U)=>U[1].priority-b[1].priority);var u=ve();o.setRecordUndo$$module$build$src$core$events$utils(r),(r=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),ht(),t instanceof ti&&t.setResizesEnabled(!1);for(const[,b]of a.reverse()){let U;(U=b)==null||U.clear(t)}for(const[b,U]of a.reverse())if(e[b]){let Z;(Z=U)==null||Z.load(e[b],t)}t instanceof ti&&t.setResizesEnabled(!0),nt(),be(new(Fe(pe.FINISHED_LOADING))(t)),o.setGroup$$module$build$src$core$events$utils(r),o.setRecordUndo$$module$build$src$core$events$utils(u)}},hh=function(e,t){let r=null;r=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var a;if(!document.contains(r)&&document!==((a=r)==null?void 0:a.ownerDocument))throw Error("Error: container is not in current document");e=new ki(t||{}),a=document.createElement("div"),De(a,"injectionDiv"),t!=null&&t.rtl&&De(a,"blocklyRTL"),r.appendChild(a),t=ph(a,e);const u=fh(a,t,e);return mh(u),H(u),T(u),a.addEventListener("focusin",function(){H(u)}),y(a,"keydown",null,Y),u},ph=function(e,t){e.setAttribute("dir","LTR"),xe(t.hasCss,t.pathToMedia);const r=de(_e.SVG,{xmlns:Qr,"xmlns:html":Dn,"xmlns:xlink":ai,version:"1.1",class:"blocklySvg"},e),a=de(_e.DEFS,{},r),u=String(Math.random()).substring(2);return t.gridPattern=$c.createDom(u,t.gridOptions,a,e),r},fh=function(e,t,r){r.parentWorkspace=null,r=new ti(r);const a=r.options;r.scale=a.zoomOptions.startScale,t.appendChild(r.createDom("blocklyMainBackground",e));var u=r.getRenderer().getClassName();return u&&De(e,u),(u=r.getTheme().getClassName())&&De(e,u),!a.hasCategories&&a.languageTree&&(e=r.addFlyout(_e.SVG),et(e,t)),a.hasTrashcan&&r.addTrashcan(),a.zoomOptions&&a.zoomOptions.controls&&r.addZoomControls(),r.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),r.translate(0,0),r.addChangeListener(kl(r)),T(r),dl(),Ko(),tl(),r},mh=function(e){const t=e.options;var r=e.getParentSvg();if(y(r.parentNode,"contextmenu",null,function(a){G(a)||a.preventDefault()}),r=y(window,"resize",null,function(){Gi(),e.hideComponents(!0),qa(),fl(),T(e),us(e)}),e.setResizeHandlerWrapper(r),Th(),t.languageTree){r=e.getToolbox();const a=e.getFlyout(!0);r?r.init():a&&(a.init(e),a.show(t.languageTree),typeof a.scrollToStart=="function"&&a.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new Ec(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&gh(t.pathToMedia,e)},Th=function(){Kf||(y(document,"scroll",null,function(){const e=Ie();for(let t=0,r;r=e[t];t++)r instanceof ti&&r.updateInverseScreenCTM()}),F(document,"touchend",null,B),F(document,"touchcancel",null,B)),Kf=!0},gh=function(e,t){function r(){for(;u.length;){const b=u.pop();b&&L(b)}a.preload()}const a=t.getAudioManager();a.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),a.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),a.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const u=[];u.push(y(document,"pointermove",null,r,!0)),u.push(y(document,"touchstart",null,r,!0))},Eh=function(e){if(!e||!e.isSimpleReporter())return!1;let t;return(t=e.getFields().next().value)==null?void 0:t.isFullBlockField()},ru=function(){_t.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return e.workspace.getUndoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:_t.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},ou=function(){_t.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return e.workspace.getRedoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:_t.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},su=function(){_t.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?e.workspace.getTopBlocks(!1).length>1?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:_t.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},au=function(e,t){function r(b){u--,b.setCollapsed(e),u===0&&o.setGroup$$module$build$src$core$events$utils(!1)}let a=0,u=0;o.setGroup$$module$build$src$core$events$utils(!0);for(let b=0;b<t.length;b++){let U=t[b];for(;U;)u++,setTimeout(r.bind(null,U),a),U=U.getNextBlock(),a+=10}},lu=function(){_t.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let r=e[t];for(;r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}}return"disabled"}return"hidden"},callback(e){au(!0,e.workspace.getTopBlocks(!0))},scopeType:_t.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},uu=function(){_t.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let r=e[t];for(;r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}}return"disabled"}return"hidden"},callback(e){au(!1,e.workspace.getTopBlocks(!0))},scopeType:_t.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},cu=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let r=0;r<e.length;r++)cu(e[r],t)}},Ss=function(e){const t=[];e=e.getTopBlocks(!0);for(let r=0;r<e.length;r++)cu(e[r],t);return t},Jr=function(e,t){t?o.setGroup$$module$build$src$core$events$utils(t):(o.setGroup$$module$build$src$core$events$utils(!0),t=o.getGroup$$module$build$src$core$events$utils());const r=e.shift();r&&(r.isDeadOrDying()?Jr(e,t):(r.dispose(!1,!0),setTimeout(Jr,10,e,t))),o.setGroup$$module$build$src$core$events$utils(!1)},du=function(){_t.registry.register({displayText(e){return e.workspace?(e=Ss(e.workspace).length,e===1?o.Msg$$module$build$src$core$msg.DELETE_BLOCK:o.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&Ss(e.workspace).length>0?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=Ss(e.workspace);t.length<2?Jr(t):Po(o.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(r){r&&Jr(t)})}},scopeType:_t.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},$h=function(){ru(),ou(),su(),lu(),uu(),du()},_u=function(){_t.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var t=e.block.toCopyData();t&&un(t,e.block.workspace)}},scopeType:_t.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},hu=function(){_t.registry.register({displayText(e){return e.block.hasIcon(bi.TYPE)?o.Msg$$module$build$src$core$msg.REMOVE_COMMENT:o.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()||!e.hasIcon(bi.TYPE)&&Eh(e)?"hidden":"enabled"},callback(e){(e=e.block)&&e.hasIcon(bi.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:_t.ScopeType.BLOCK,id:"blockComment",weight:2})},pu=function(){_t.registry.register({displayText(e){return e.block.getInputsInline()?o.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:o.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof Aa||e.inputList[t]instanceof Aa))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:_t.ScopeType.BLOCK,id:"blockInline",weight:3})},fu=function(){_t.registry.register({displayText(e){return e.block.isCollapsed()?o.Msg$$module$build$src$core$msg.EXPAND_BLOCK:o.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:_t.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},mu=function(){_t.registry.register({displayText(e){return e.block.hasDisabledReason(mi)?o.Msg$$module$build$src$core$msg.ENABLE_BLOCK:o.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var t=e.getDisabledReasons();return t=t.size>(t.has(mi)?1:0),e.getInheritedDisabled()||t?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const t=o.getGroup$$module$build$src$core$events$utils();t||o.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(mi),mi),o.setGroup$$module$build$src$core$events$utils(t)},scopeType:_t.ScopeType.BLOCK,id:"blockDisable",weight:5})},Tu=function(){_t.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?o.Msg$$module$build$src$core$msg.DELETE_BLOCK:o.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:_t.ScopeType.BLOCK,id:"blockDelete",weight:6})},gu=function(){_t.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:_t.ScopeType.BLOCK,id:"blockHelp",weight:7})},Eu=function(){_t.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isDeletable()?"enabled":"hidden"},callback(e){o.setGroup$$module$build$src$core$events$utils(!0);let t;(t=e.comment)==null||t.dispose(),o.setGroup$$module$build$src$core$events$utils(!1)},scopeType:_t.ScopeType.COMMENT,id:"commentDelete",weight:6})},$u=function(){_t.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var t=e.comment.toCopyData();t&&un(t,e.comment.workspace)}},scopeType:_t.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},Su=function(){_t.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>{let t;return(t=e.workspace)!=null&&t.isMutator?"hidden":"enabled"},callback:(e,t,r,a)=>{(e=e.workspace)&&(o.setGroup$$module$build$src$core$events$utils(!0),t=new Ji(e),t.setPlaceholderText(o.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),t.moveTo(Bt(e,new Me(a.x,a.y))),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(t),o.setGroup$$module$build$src$core$events$utils(!1))},scopeType:_t.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},Sh=function(){_u(),hu(),pu(),fu(),mu(),Tu(),gu()},Ah=function(){$u(),Eu(),Su()},Au=function(){$h(),Sh()},bh=function(e){return e&&typeof e.paste=="function"},Ih=function(e){return e&&typeof e.getSvgRoot=="function"},Oh=function(e){return e.isSelectable()},vh=function(e){O().hideChaff(e)},Ee=Ee||{},Ee.scope={},Ee.ASSUME_ES5=!1,Ee.ASSUME_ES6=!1,Ee.ASSUME_ES2020=!1,Ee.ASSUME_NO_NATIVE_MAP=!1,Ee.ASSUME_NO_NATIVE_SET=!1,Ee.ISOLATE_POLYFILLS=!1,Ee.FORCE_POLYFILL_PROMISE=!1,Ee.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Ee.INSTRUMENT_ASYNC_CONTEXT=!0,Ee.objectCreate=Ee.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(e){var t=function(){};return t.prototype=e,new t},Ee.defineProperty=Ee.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},Ee.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},Ee.global=Ee.ASSUME_ES2020?globalThis:Ee.getGlobal(this),Ee.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Ee.TRUST_ES6_POLYFILLS=!Ee.ISOLATE_POLYFILLS||Ee.IS_SYMBOL_NATIVE,Ee.polyfills={},Ee.propertyToPolyfillSymbol={},Ee.POLYFILL_PREFIX="$jscp$",Ee.polyfill=function(e,t,r,a){t&&(Ee.ISOLATE_POLYFILLS?Ee.polyfillIsolated(e,t,r,a):Ee.polyfillUnisolated(e,t,r,a))},Ee.polyfillUnisolated=function(e,t,r,a){for(r=Ee.global,e=e.split("."),a=0;a<e.length-1;a++){var u=e[a];if(!(u in r))return;r=r[u]}e=e[e.length-1],a=r[e],t=t(a),t!=a&&t!=null&&Ee.defineProperty(r,e,{configurable:!0,writable:!0,value:t})},Ee.polyfillIsolated=function(e,t,r,a){var u=e.split(".");e=u.length===1,a=u[0],a=!e&&a in Ee.polyfills?Ee.polyfills:Ee.global;for(var b=0;b<u.length-1;b++){var U=u[b];if(!(U in a))return;a=a[U]}u=u[u.length-1],r=Ee.IS_SYMBOL_NATIVE&&r==="es6"?a[u]:null,t=t(r),t!=null&&(e?Ee.defineProperty(Ee.polyfills,u,{configurable:!0,writable:!0,value:t}):t!==r&&(Ee.propertyToPolyfillSymbol[u]===void 0&&(r=Math.random()*1e9>>>0,Ee.propertyToPolyfillSymbol[u]=Ee.IS_SYMBOL_NATIVE?Ee.global.Symbol(u):Ee.POLYFILL_PREFIX+r+"$"+u),Ee.defineProperty(a,Ee.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:t})))},Ee.getConstructImplementation=function(){function e(){function r(){}return Reflect.construct(r,[],function(){}),new r instanceof r}if(Ee.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(e())return Reflect.construct;var t=Reflect.construct;return function(r,a,u){return r=t(r,a),u&&Reflect.setPrototypeOf(r,u.prototype),r}}return function(r,a,u){return u===void 0&&(u=r),u=Ee.objectCreate(u.prototype||Object.prototype),Function.prototype.apply.call(r,u,a)||u}},Ee.construct={valueOf:Ee.getConstructImplementation}.valueOf(),Ee.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch{}return!1},Ee.setPrototypeOf=Ee.ASSUME_ES6||Ee.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:Ee.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,Ee.inherits=function(e,t){if(e.prototype=Ee.objectCreate(t.prototype),e.prototype.constructor=e,Ee.ASSUME_ES6||Ee.setPrototypeOf){var r=Ee.setPrototypeOf;r(e,t)}else for(r in t)if(r!="prototype")if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(t,r);a&&Object.defineProperty(e,r,a)}else e[r]=t[r];e.superClass_=t.prototype},Ee.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},Ee.arrayIterator=function(e){return{next:Ee.arrayIteratorImpl(e)}},Ee.makeIterator=function(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return Ee.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},Ee.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},Ee.arrayFromIterable=function(e){return e instanceof Array?e:Ee.arrayFromIterator(Ee.makeIterator(e))},Ee.generator={},Ee.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},Ee.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},Ee.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},Ee.generator.Context.prototype.stop_=function(){this.isRunning_=!1},Ee.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},Ee.generator.Context.prototype.next_=function(e){this.yieldResult=e},Ee.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},Ee.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},Ee.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},Ee.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},Ee.generator.Context.prototype.yieldAll=function(e,t){e=Ee.makeIterator(e);var r=e.next();if(Ee.generator.ensureIteratorResultIsObject_(r),r.done)this.yieldResult=r.value,this.nextAddress=t;else return this.yieldAllIterator_=e,this.yield(r.value,t)},Ee.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},Ee.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},Ee.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,t!=null&&(this.finallyAddress_=t)},Ee.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},Ee.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},Ee.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},Ee.generator.Context.prototype.enterFinallyBlock=function(e,t,r){r?this.finallyContexts_[r]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},Ee.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();t.jumpTo!=null&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},Ee.generator.Context.prototype.forIn=function(e){return new Ee.generator.Context.PropertyIterator(e)},Ee.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var t in e)this.properties_.push(t);this.properties_.reverse()},Ee.generator.Context.PropertyIterator.prototype.getNext=function(){for(;this.properties_.length>0;){var e=this.properties_.pop();if(e in this.object_)return e}return null},Ee.generator.Engine_=function(e){this.context_=new Ee.generator.Context,this.program_=e},Ee.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},Ee.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(r){return{value:r,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},Ee.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},Ee.generator.Engine_.prototype.yieldAllStep_=function(e,t,r){try{var a=e.call(this.context_.yieldAllIterator_,t);if(Ee.generator.ensureIteratorResultIsObject_(a),!a.done)return this.context_.stop_(),a;var u=a.value}catch(b){return this.context_.yieldAllIterator_=null,this.context_.throw_(b),this.nextStep_()}return this.context_.yieldAllIterator_=null,r.call(this.context_,u),this.nextStep_()},Ee.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},Ee.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},Ee.generator.createGenerator=function(e,t){return t=new Ee.generator.Generator_(new Ee.generator.Engine_(t)),Ee.setPrototypeOf&&e.prototype&&Ee.setPrototypeOf(t,e.prototype),t},Ee.asyncExecutePromiseGenerator=function(e){function t(a){return e.next(a)}function r(a){return e.throw(a)}return new Promise(function(a,u){function b(U){U.done?a(U.value):Promise.resolve(U.value).then(t,r).then(b,u)}b(e.next())})},Ee.asyncExecutePromiseGeneratorFunction=function(e){return Ee.asyncExecutePromiseGenerator(e())},Ee.asyncExecutePromiseGeneratorProgram=function(e){return Ee.asyncExecutePromiseGenerator(new Ee.generator.Generator_(new Ee.generator.Engine_(e)))},Ee.polyfill("globalThis",function(e){return e||Ee.global},"es_2020","es3"),Ee.polyfill("Array.prototype.includes",function(e){return e||function(t,r){var a=this;a instanceof String&&(a=String(a));var u=a.length;for(r=r||0,r<0&&(r=Math.max(r+u,0));r<u;r++){var b=a[r];if(b===t||Object.is(b,t))return!0}return!1}},"es7","es3"),Ee.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new Ee.global.Proxy(e,{get:function(r,a,u){return r==e&&a=="q"&&u==t}}));return t.q===!0}catch{return!1}},Ee.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,Ee.ES6_CONFORMANCE=Ee.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&Ee.checkEs6ConformanceViaProxy(),Ee.initSymbol=function(){},Ee.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},Ee.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Ee.MapEntry=function(){},Ee.polyfill("Set.prototype.difference",function(e){return e||function(t){Ee.checkIsSetInstance(this),Ee.checkIsSetLike(t);var r=Ee.getSmallerAndLargerSets(this,t);t=new Set(this);var a=r.smallerSetIterator;r=r.largerSet;for(var u=a.next();!u.done;)r.has(u.value)&&t.delete(u.value),u=a.next();return t}},"es_next","es6"),Ee.checkIsSetLike=function(e){if(typeof e!="object"||e===null||typeof e.size!="number"||e.size<0||typeof e.keys!="function"||typeof e.has!="function")throw new TypeError("Argument must be set-like")},Ee.checkIsValidIterator=function(e){if(typeof e!="object"||e===null||typeof e.next!="function")throw new TypeError("Invalid iterator.");return e},Ee.getSmallerAndLargerSets=function(e,t){return e.size<=t.size?{smallerSetIterator:e.keys(),largerSet:t}:{smallerSetIterator:Ee.checkIsValidIterator(t.keys()),largerSet:e}},Ee.checkIsSetInstance=function(e){if(!(e instanceof Set))throw new TypeError("Method must be called on an instance of Set.")},Ee.iteratorFromArray=function(e,t){if(Ee.ASSUME_ES6)return e[Symbol.iterator]();e instanceof String&&(e+="");var r=0,a=!1,u={next:function(){if(!a&&r<e.length){var b=r++;return{value:t(b,e[b]),done:!1}}return a=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u},Ee.polyfill("Array.prototype.values",function(e){return e||function(){return Ee.iteratorFromArray(this,function(t,r){return r})}},"es8","es3"),Ee.polyfill("Array.prototype.flatMap",function(e){return e||function(t,r){var a=[];return Array.prototype.forEach.call(this,function(u,b){u=t.call(r,u,b,this),Array.isArray(u)?a.push.apply(a,u):a.push(u)}),a}},"es9","es5"),Ee.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var r=[];return Array.prototype.forEach.call(this,function(a){Array.isArray(a)&&t>0?(a=Array.prototype.flat.call(a,t-1),r.push.apply(r,a)):r.push(a)}),r}},"es9","es5"),Ee.polyfill("Object.entries",function(e){return e||function(t){var r=[],a;for(a in t)Ee.owns(t,a)&&r.push([a,t[a]]);return r}},"es8","es3"),Ee.polyfill("Object.values",function(e){return e||function(t){var r=[],a;for(a in t)Ee.owns(t,a)&&r.push(t[a]);return r}},"es8","es3");var cn=Object.create(null),Vm={typeMap:cn},As=Object.create(null),si="default",Re=class{constructor(e){this.name=e}toString(){return this.name}};Re.CONNECTION_CHECKER=new Re("connectionChecker"),Re.CONNECTION_PREVIEWER=new Re("connectionPreviewer"),Re.CURSOR=new Re("cursor"),Re.EVENT=new Re("event"),Re.FIELD=new Re("field"),Re.INPUT=new Re("input"),Re.RENDERER=new Re("renderer"),Re.TOOLBOX=new Re("toolbox"),Re.THEME=new Re("theme"),Re.TOOLBOX_ITEM=new Re("toolboxItem"),Re.FLYOUTS_VERTICAL_TOOLBOX=new Re("flyoutsVerticalToolbox"),Re.FLYOUTS_HORIZONTAL_TOOLBOX=new Re("flyoutsHorizontalToolbox"),Re.FLYOUT_INFLATER=new Re("flyoutInflater"),Re.METRICS_MANAGER=new Re("metricsManager"),Re.BLOCK_DRAGGER=new Re("blockDragger"),Re.SERIALIZER=new Re("serializer"),Re.ICON=new Re("icon"),Re.PASTER=new Re("paster"),Re.VARIABLE_MODEL=new Re("variableModel"),Re.VARIABLE_MAP=new Re("variableMap");var Wi={DEFAULT:si,TEST_ONLY:Vm};Wi.Type=Re,Wi.getAllItems=w,Wi.getClass=N,Wi.getClassFromOptions=R,Wi.getObject=x,Wi.hasItem=g,Wi.register=s,Wi.unregister=f;var bt=Object.create(null),Hm=750,Ch="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),bs=null,Rn={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Is=0,Nn={TOUCH_ENABLED:Ch,TOUCH_MAP:Rn};Nn.checkTouchIdentifier=d,Nn.clearTouchIdentifier=P,Nn.getTouchIdentifierFromEvent=m,Nn.longStart=k,Nn.longStop=B,Nn.shouldHandleEvent=z;var bu,yh,Rh,Nh,Os,vs,Iu,Dh,Lh,kh;(function(e){function t(a){return r.includes(a.toUpperCase())}bu=e;const r=bu.toUpperCase();yh=t("JavaFX"),Rh=t("WebKit"),Nh=t("Gecko")&&!Rh,Os=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,vs=t("iPad")||t("Macintosh")&&e>0,Iu=t("iPhone")&&!vs,Dh=t("Macintosh"),Lh=vs||Os&&!t("Mobile")||t("Silk"),kh=!Lh&&(Iu||Os)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Gm=bu,wh=yh,Mh=Nh,Ou=Os,Cs=vs,xh=Iu,vu=Dh,Fh=kh,Wm={ANDROID:Ou,GECKO:Mh,IPAD:Cs,IPHONE:xh,JavaFx:wh,MAC:vu,MOBILE:Fh,raw:Gm},Ph=40,Bh=125,Xi={};Xi.bind=F,Xi.conditionalBind=y,Xi.getScrollDeltaPixels=D,Xi.isRightButton=p,Xi.isTargetInput=G,Xi.mouseToSvg=I,Xi.unbind=L;var pe;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.VAR_TYPE_CHANGE="var_type_change",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(pe||(pe={}));var Uh=[pe.BLOCK_CREATE,pe.BLOCK_MOVE,pe.COMMENT_CREATE,pe.COMMENT_MOVE],Vh="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Hh={genUid:()=>{const e=Vh.length,t=[];for(let r=0;r<20;r++)t[r]=Vh.charAt(Math.random()*e);return t.join("")}},Xm=0,Cu={TEST_ONLY:Hh};Cu.genUid=C,Cu.getNextUniqueId=V;var Gh="",Zr=!0,yu=0,Ru="ORPHANED_BLOCK",Ki=[],Wh={FIRE_QUEUE:Ki,enqueueEvent:ke,fireNow:Be,fireInternal:Xe,setGroupInternal:me};o.disable$$module$build$src$core$events$utils,o.enable$$module$build$src$core$events$utils,o.getGroup$$module$build$src$core$events$utils,o.setGroup$$module$build$src$core$events$utils,o.setRecordUndo$$module$build$src$core$events$utils;var Qr="http://www.w3.org/2000/svg",Dn="http://www.w3.org/1999/xhtml",ai="http://www.w3.org/1999/xlink",zi;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(zi||(zi={}));var $i=null,Nu=0,eo=null,Kt={HTML_NS:Dn};Kt.NodeType=zi,Kt.SVG_NS=Qr,Kt.XLINK_NS=ai,Kt.addClass=De,Kt.createSvgElement=de,Kt.getFastTextWidth=ot,Kt.getFastTextWidthWithSizeString=it,Kt.getTextWidth=st,Kt.hasClass=Ue,Kt.insertAfter=et,Kt.measureFontMetrics=S,Kt.removeClass=Se,Kt.removeClasses=he,Kt.removeNode=He,Kt.setCssTransform=tt,Kt.startTextWidthCache=ht,Kt.stopTextWidthCache=nt;var zt=class{static findFocusedNode(e){var t=e.getRootFocusableNode();if(!t.canBeFocused())return null;var r=t.getFocusableElement();return Ue(r,zt.ACTIVE_CLASS_NAME)||Ue(r,zt.PASSIVE_CSS_CLASS_NAME)||(t=r.querySelector(this.ACTIVE_FOCUS_NODE_CSS_SELECTOR),(t instanceof HTMLElement||t instanceof SVGElement)&&(t=zt.findFocusableNodeFor(t,e)))?t:(r=r.querySelector(this.PASSIVE_FOCUS_NODE_CSS_SELECTOR),(r instanceof HTMLElement||r instanceof SVGElement)&&(e=zt.findFocusableNodeFor(r,e))?e:null)}static findFocusableNodeFor(e,t){if(!e.id||e.id==="null"||t.getNestedTrees().map(u=>zt.findFocusableNodeFor(e,u)).findIndex(u=>!!u)!==-1)return null;var r=t.getRootFocusableNode();if(r.canBeFocused()&&e===r.getFocusableElement())return r;var a;return(r=(a=t.lookUpFocusableNode(e.id))!=null?a:null)?r:(a=e.parentElement,!r&&a?zt.findFocusableNodeFor(a,t):null)}};zt.ACTIVE_CLASS_NAME="blocklyActiveFocus",zt.PASSIVE_CSS_CLASS_NAME="blocklyPassiveFocus",zt.ACTIVE_FOCUS_NODE_CSS_SELECTOR=`.${zt.ACTIVE_CLASS_NAME}`,zt.PASSIVE_FOCUS_NODE_CSS_SELECTOR=`.${zt.PASSIVE_CSS_CLASS_NAME}`;var Km=class{constructor(e,t){this.tree=e,this.rootShouldBeAutoTabbable=t}},jt=class{constructor(e){this.previouslyFocusedNode=this.focusedNode=null,this.registeredTrees=[],this.isUpdatingFocusedNode=this.recentlyLostAllFocus=this.lockFocusStateChanges=this.currentlyHoldsEphemeralFocus=!1;const t=r=>{if(!this.isUpdatingFocusedNode){this.recentlyLostAllFocus=!r;var a=null;if(r instanceof HTMLElement||r instanceof SVGElement){for(var u of this.registeredTrees)if(a=zt.findFocusableNodeFor(r,u.tree))break}if(a&&a.canBeFocused()){r=a.getFocusableTree();let b;u=(b=this.focusedNode)==null?void 0:b.getFocusableTree(),a===r.getRootFocusableNode()&&r!==u?this.focusTree(r):this.focusNode(a)}else this.defocusCurrentFocusedNode()}};e("focusin",r=>{r instanceof FocusEvent&&t(document.activeElement)}),e("focusout",r=>{r instanceof FocusEvent&&t(r.relatedTarget)})}registerTree(e,t=!1){if(this.ensureManagerIsUnlocked(),this.isRegistered(e))throw Error(`Attempted to re-register already registered tree: ${e}.`);this.registeredTrees.push(new Km(e,t));const r=e.getRootFocusableNode().getFocusableElement();if(!r.id||r.id==="null")throw Error(`Attempting to register a tree with a root element that has an invalid ID: ${e}.`);t&&(r.tabIndex=0)}isRegistered(e){return!!this.lookUpRegistration(e)}lookUpRegistration(e){let t;return(t=this.registeredTrees.find(r=>r.tree===e))!=null?t:null}unregisterTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to unregister not registered tree: ${e}.`);var t=this.registeredTrees.findIndex(u=>u.tree===e);const r=this.registeredTrees[t];this.registeredTrees.splice(t,1),t=zt.findFocusedNode(e);const a=e.getRootFocusableNode();t&&this.removeHighlight(t),this.focusedNode!==t&&this.focusedNode!==a||this.updateFocusedNode(null),this.removeHighlight(a),r.rootShouldBeAutoTabbable&&e.getRootFocusableNode().getFocusableElement().removeAttribute("tabindex")}getFocusedTree(){let e,t;return(t=(e=this.focusedNode)==null?void 0:e.getFocusableTree())!=null?t:null}getFocusedNode(){return this.focusedNode}focusTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to focus unregistered tree: ${e}.`);const t=zt.findFocusedNode(e),r=e.getRestoredFocusableNode(t);e=e.getRootFocusableNode();let a;this.focusNode((a=r??t)!=null?a:e)}focusNode(e){this.ensureManagerIsUnlocked();const t=!this.currentlyHoldsEphemeralFocus;t&&(this.isUpdatingFocusedNode=!0);var r,a=((r=this.focusedNode)==null?void 0:r.getFocusableElement())!==document.activeElement;if(this.focusedNode!==e||a)if(e.canBeFocused()){if(r=e.getFocusableTree(),!this.isRegistered(r))throw Error(`Attempted to focus unregistered node: ${e}.`);a=e.getFocusableElement(),a.id&&a.id!=="null"||console.warn("Trying to focus a node that has an invalid ID.");var u=zt.findFocusableNodeFor(a,r);a=zt.findFocusedNode(r);var b=e;if(u!==e){b=r.getRestoredFocusableNode(a),e=r.getRootFocusableNode();var U;b=(U=b??a)!=null?U:e}e=this.focusedNode,U=e?.getFocusableTree(),e&&this.passivelyFocusNode(e,r),r=r.getRootFocusableNode(),a&&this.removeHighlight(a),r!==b&&this.removeHighlight(r),this.currentlyHoldsEphemeralFocus||this.activelyFocusNode(b,U??null),this.updateFocusedNode(b)}else console.warn("Trying to focus a node that can't be focused.");t&&(this.isUpdatingFocusedNode=!1)}takeEphemeralFocus(e){if(this.ensureManagerIsUnlocked(),this.currentlyHoldsEphemeralFocus)throw Error(`Attempted to take ephemeral focus when it's already held, with new element: ${e}.`);this.currentlyHoldsEphemeralFocus=!0,this.focusedNode&&this.passivelyFocusNode(this.focusedNode,null),e.focus({preventScroll:!0});let t=!1;return()=>{if(t)throw Error(`Attempted to finish ephemeral focus twice for element: ${e}.`);if(t=!0,this.currentlyHoldsEphemeralFocus=!1,this.focusedNode){this.activelyFocusNode(this.focusedNode,null);const r=this.focusedNode;setTimeout(()=>{!this.focusedNode&&this.previouslyFocusedNode===r&&this.recentlyLostAllFocus&&this.focusNode(r)},0)}}}ephemeralFocusTaken(){return this.currentlyHoldsEphemeralFocus}ensureManagerIsUnlocked(){if(this.lockFocusStateChanges)throw Error("FocusManager state changes cannot happen in a tree/node focus/blur callback.")}updateFocusedNode(e){this.previouslyFocusedNode=this.focusedNode,this.focusedNode=e}defocusCurrentFocusedNode(){this.focusedNode&&!this.currentlyHoldsEphemeralFocus&&(this.passivelyFocusNode(this.focusedNode,null),this.updateFocusedNode(null))}activelyFocusNode(e,t){this.lockFocusStateChanges=!0;const r=e.getFocusableTree(),a=e.getFocusableElement();let u;const b=(u=this.lookUpRegistration(r))==null?void 0:u.rootShouldBeAutoTabbable;r!==t&&(r.onTreeFocus(e,t),b&&(r.getRootFocusableNode().getFocusableElement().tabIndex=-1)),e.onNodeFocus(),this.lockFocusStateChanges=!1,b&&e===r.getRootFocusableNode()||a.hasAttribute("tabindex")||(a.tabIndex=-1),this.setNodeToVisualActiveFocus(e),a.focus({preventScroll:!0})}passivelyFocusNode(e,t){this.lockFocusStateChanges=!0;const r=e.getFocusableTree();if(r!==t){r.onTreeBlur(t);let a;(a=this.lookUpRegistration(r))!=null&&a.rootShouldBeAutoTabbable&&(r.getRootFocusableNode().getFocusableElement().tabIndex=0)}e.onNodeBlur(),this.lockFocusStateChanges=!1,r!==t&&this.setNodeToVisualPassiveFocus(e)}setNodeToVisualActiveFocus(e){e=e.getFocusableElement(),De(e,jt.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Se(e,jt.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}setNodeToVisualPassiveFocus(e){e=e.getFocusableElement(),Se(e,jt.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),De(e,jt.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}removeHighlight(e){e=e.getFocusableElement(),Se(e,jt.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Se(e,jt.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}static getFocusManager(){return jt.focusManager||(jt.focusManager=new jt(document.addEventListener)),jt.focusManager}};jt.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyActiveFocus",jt.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyPassiveFocus",jt.focusManager=null,o.getFocusManager$$module$build$src$core$focus_manager;var Xh={};Xh.deepMerge=$e;var $t=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),t=e.keyCodes,t!=null&&t.length)for(const r of t)this.addKeyMapping(r,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,r){e=`${e}`;const a=this.keyMap.get(e);if(a&&!r)throw Error(`Shortcut named "${t}" collides with shortcuts "${a}"`);a&&r?a.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,r){const a=this.keyMap.get(e);if(!a)return r||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const u=a.indexOf(t);return u>-1?(a.splice(u,1),a.length===0&&this.keyMap.delete(e),!0):(r||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,r]of this.keyMap)e[t]=r;return e}getRegistry(){const e=Object.create(null);for(const[t,r]of this.shortcuts)e[t]=r;return $e(Object.create(null),e)}onKeyDown(e,t){var r=this.serializeKeyEvent(t);if(r=this.getShortcutNamesByKeyCode(r),!r)return!1;for(const a of r){r=this.shortcuts.get(a);let u;if(!r||r.preconditionFn&&!r.preconditionFn(e,{focusedNode:(u=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?u:void 0}))continue;let b,U,Z;if((U=(b=r).callback)!=null&&U.call(b,e,t,r,{focusedNode:(Z=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?Z:void 0}))return!0}return!1}getShortcutNamesByKeyCode(e){let t;return((t=this.keyMap.get(e))==null?void 0:t.slice())||[]}getKeyCodesByShortcutName(e){const t=[];for(const[r,a]of this.keyMap)a.indexOf(e)>-1&&t.push(r);return t}serializeKeyEvent(e){let t="";for(const r in $t.modifierKeys)e.getModifierState(r)&&(t!==""&&(t+="+"),t+=r);return t!==""&&e.keyCode?t+="+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers(e){for(const t of e)if(!(t in $t.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let r="";if(t){this.checkModifiers(t);for(const a in $t.modifierKeys)t.includes($t.modifierKeys[a])&&(r!==""&&(r+="+"),r+=a)}return r!==""&&e?r+="+"+e:e&&(r=`${e}`),r}};$t.registry=new $t,(function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"})($t||($t={}));var to=Object.create(null),Kh,zh,io=[],Yh={defineBlocksWithJsonArrayInternal:M},Ht={TEST_ONLY:Yh};Ht.createBlockDefinitionsFromJsonArray=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Ht.defineBlocks=o.defineBlocks$$module$build$src$core$common,Ht.defineBlocksWithJsonArray=A,Ht.draggingConnections=io,Ht.fireSelectedEvent=ye,Ht.getAllWorkspaces=Ie,Ht.getBlockTypeCounts=_,Ht.getMainWorkspace=O,Ht.getParentContainer=h,Ht.getSelected=J,Ht.getWorkspaceById=Ne,Ht.globalShortcutHandler=Y,Ht.registerWorkspace=Ve,Ht.setMainWorkspace=H,Ht.setParentContainer=v,Ht.setSelected=ne,Ht.svgResize=T,Ht.unregisterWorkpace=le;var dr=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=o.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ve()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,r){return r.isBlank=!1,r.group=e.group||"",r.workspaceId=t.id,r}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=Ne(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},Li=class extends dr{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},Du=class extends Li{constructor(e,t,r){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=pe.CLICK,this.blockId=e?e.id:void 0,this.targetType=r}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Du),t.targetType=e.targetType,t.blockId=e.blockId,t}},Lu;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(Lu||(Lu={})),s(Re.EVENT,pe.CLICK,Du);var jh={};jh.removeElem=q;var Yi=class{constructor(e){this.name=e}toString(){return this.name}};Yi.POSITIONABLE=new Yi("positionable"),Yi.DRAG_TARGET=new Yi("drag_target"),Yi.DELETE_AREA=new Yi("delete_area"),Yi.AUTOHIDEABLE=new Yi("autohideable");var It=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const r=e.component.id;if(!t&&this.componentData.has(r)){var a;throw Error('Plugin "'+r+'" with capabilities "'+((a=this.componentData.get(r))==null?void 0:a.capabilities)+'" already added.')}for(this.componentData.set(r,e),t=[],a=0;a<e.capabilities.length;a++){const u=String(e.capabilities[a]).toLowerCase();if(t.push(u),this.capabilityToComponentIds.has(u)){let b;(b=this.capabilityToComponentIds.get(u))==null||b.push(r)}else this.capabilityToComponentIds.set(u,[r])}this.componentData.get(r).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let r=0;r<t.capabilities.length;r++){const a=String(t.capabilities[r]).toLowerCase();q(this.capabilityToComponentIds.get(a),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var r;(r=this.componentData.get(e))==null||r.capabilities.push(t);var a;(a=this.capabilityToComponentIds.get(t))==null||a.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),q(this.componentData.get(e).capabilities,t),q(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(t)}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const r=[];if(t){const a=[];e.forEach(u=>{a.push(this.componentData.get(u))}),a.sort(function(u,b){return u.weight-b.weight}),a.forEach(function(u){r.push(u.component)})}else e.forEach(a=>{r.push(this.componentData.get(a).component)});return r}};It.Capability=Yi,(function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"})(It||(It={})),It.ComponentWeight;var ku=!1,wu=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyEmboss {
  filter: var(--blocklyEmbossFilter);
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyHighlighted>.blocklyPath {
  filter: var(--blocklyEmbossFilter);
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete,
.blocklyDragging.blocklyDraggingDelete .blocklyField {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabledPattern>.blocklyPath {
  fill: var(--blocklyDisabledPattern);
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableField>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover):not(:focus),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyMenuSeparator {
  background-color: #ccc;
  height: 1px;
  border: 0;
  margin-left: 4px;
  margin-right: 4px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}

.blocklyField {
  cursor: default;
}

.blocklyInputField {
  cursor: text;
}

.blocklyDragging .blocklyField,
.blocklyDragging .blocklyIconGroup {
  cursor: grabbing;
}

.blocklyActiveFocus:is(
  .blocklyFlyout,
  .blocklyWorkspace,
  .blocklyField,
  .blocklyPath,
  .blocklyHighlightedConnectionPath,
  .blocklyComment,
  .blocklyBubble,
  .blocklyIconGroup,
  .blocklyTextarea
) {
  outline: none;
}
`,Mu={};Mu.inject=xe,Mu.register=ee;var Me=class{constructor(e,t){this.x=e,this.y=t}clone(){return new Me(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const r=e.x-t.x;return e=e.y-t.y,Math.sqrt(r*r+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new Me(e.x-t.x,e.y-t.y)}static sum(e,t){return new Me(e.x+t.x,e.y+t.y)}},_e=class{constructor(e){this.tagName=e}toString(){return this.tagName}};_e.ANIMATE=new _e("animate"),_e.CIRCLE=new _e("circle"),_e.CLIPPATH=new _e("clipPath"),_e.DEFS=new _e("defs"),_e.FECOMPOSITE=new _e("feComposite"),_e.FECOMPONENTTRANSFER=new _e("feComponentTransfer"),_e.FEFLOOD=new _e("feFlood"),_e.FEFUNCA=new _e("feFuncA"),_e.FEGAUSSIANBLUR=new _e("feGaussianBlur"),_e.FEPOINTLIGHT=new _e("fePointLight"),_e.FESPECULARLIGHTING=new _e("feSpecularLighting"),_e.FILTER=new _e("filter"),_e.FOREIGNOBJECT=new _e("foreignObject"),_e.G=new _e("g"),_e.IMAGE=new _e("image"),_e.LINE=new _e("line"),_e.PATH=new _e("path"),_e.PATTERN=new _e("pattern"),_e.POLYGON=new _e("polygon"),_e.RECT=new _e("rect"),_e.SVG=new _e("svg"),_e.TEXT=new _e("text"),_e.TSPAN=new _e("tspan");var ut=class{constructor(e,t,r,a){this.top=e,this.bottom=t,this.left=r,this.right=a}static from(e){return new ut(e.y,e.y+e.height,e.x,e.x+e.width)}clone(){return new ut(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}getOrigin(){return new Me(this.left,this.top)}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,t){return e===t?!0:e&&t?e.top===t.top&&e.bottom===t.bottom&&e.left===t.left&&e.right===t.right:!1}static createFromPoint(e,t,r){const a=e.x;return e=e.y,new ut(e,e+r,a,a+t)}},ct=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}static max(e,t){return new ct(Math.max(e.width,t.width),Math.max(e.height,t.height))}static min(e,t){return new ct(Math.min(e.width,t.width),Math.min(e.height,t.height))}},qh={getSizeInternal:at},dn={TEST_ONLY:qh};dn.getBorderBox=ie,dn.getComputedStyle=Nt,dn.getContainerOffsetToScrollInto=Oe,dn.getPageOffset=W,dn.getSize=ze,dn.getViewportPageOffset=Q,dn.scrollIntoContainerView=ge;var Jh=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Zh=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,zm={XY_REGEX:Jh,XY_STYLE_REGEX:Zh},Ln={TEST_ONLY:zm};Ln.getDocumentScroll=Ot,Ln.getInjectionDivXY=Ye,Ln.getRelativeXY=We,Ln.getViewportBBox=rt,Ln.screenToWsCoordinates=Bt,Ln.wsToScreenCoordinates=Ft;var kt=class{constructor(e,t,r,a,u){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new Me(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Me(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=r||!1,this.margin=u!==void 0?u:kt.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),a&&(e+=" "+a),this.outerSvg=de(_e.SVG,{class:e}),a=de(_e.G,{},this.outerSvg),this.svgBackground=de(_e.RECT,{class:"blocklyScrollbarBackground"},a),e=Math.floor((kt.scrollbarThickness-5)/2),this.svgHandle=de(_e.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},a),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),et(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=y(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=y(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=kt.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),L(this.onMouseDownBarWrapper_),L(this.onMouseDownHandleWrapper_),He(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,tt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&kt.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-this.margin*2;this.pair&&(t-=kt.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=kt.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-kt.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var r=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*r,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=r/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-this.margin*2;this.pair&&(t-=kt.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-kt.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var r=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*r,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=r/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),P(),this.cleanUp(),p(e))e.stopPropagation();else{var t=I(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var r=Ye(this.svgHandle);r=this.horizontal?r.x:r.y;var a=this.handlePosition,u=this.handleLength*.95;t<=r?a-=u:t>=r+this.handleLength&&(a+=u),this.setHandlePosition(this.constrainHandlePosition(a)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),p(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=y(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=y(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){P(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(L(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(L(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new Me(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};kt.scrollbarThickness=Ch?25:15,kt.DEFAULT_SCROLLBAR_MARGIN=.5;var ys={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},xu={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Rs,DOMParser:no,XMLSerializer:ro}=globalThis;no&&(ys=new no),ro&&(xu=new ro);var Qh="https://developers.google.com/blockly/xml",Ym=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,_r={NAME_SPACE:Qh};_r.createElement=o.createElement$$module$build$src$core$utils$xml,_r.createTextNode=o.createTextNode$$module$build$src$core$utils$xml,_r.domToText=Et,_r.injectDependencies=ii,_r.textToDom=o.textToDom$$module$build$src$core$utils$xml;var Fu="categoryToolbox",ep="flyoutToolbox",dt;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(dt||(dt={}));var tp={hasCategoriesInternal:ud},_n={};_n.Position=dt,_n.TEST_ONLY=tp,_n.convertFlyoutDefToJsonArray=wr,_n.convertToolboxDefToJson=rn,_n.hasCategories=No,_n.isCategoryCollapsible=Do,_n.parseToolboxTree=Ia;var ji;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(ji||(ji={}));var hr;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(hr||(hr={}));var hn;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(hn||(hn={}));var kn={};kn.bumpDirection=hn,kn.bumpPositionRect=Mo,kn.getCornerOppositeToolbox=wo,kn.getStartPositionRect=ko,kn.horizontalPosition=hr,kn.verticalPosition=ji;var ni={width:96,height:124,url:"sprites.png"},ip=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=de(_e.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:It.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[It.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&He(this.svgGroup);for(const e of this.boundEvents)L(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new ut(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var r=wo(this.workspace,e),a=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(a+=this.LARGE_SPACING+this.HEIGHT),e=ko(r,new ct(this.WIDTH,a),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),r=r.vertical,t=Mo(e,this.MARGIN_VERTICAL,r===ji.TOP?hn.DOWN:hn.UP,t),r===ji.TOP){var u=this.SMALL_SPACING+this.HEIGHT,b;(b=this.zoomInGroup)==null||b.setAttribute("transform","translate(0, "+u+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(u+this.LARGE_SPACING+this.HEIGHT)+")")}else{b=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let Z;(Z=this.zoomInGroup)==null||Z.setAttribute("transform","translate(0, "+b+")"),b=b+this.SMALL_SPACING+this.HEIGHT,(u=this.zoomOutGroup)==null||u.setAttribute("transform","translate(0, "+b+")")}this.top=t.top,this.left=t.left;var U;(U=this.svgGroup)==null||U.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=de(_e.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=de(_e.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);de(_e.RECT,{width:32,height:32},t),de(_e.IMAGE,{width:ni.width,height:ni.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(ai,"xlink:href",this.workspace.options.pathToMedia+ni.url),this.boundEvents.push(y(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=de(_e.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=de(_e.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);de(_e.RECT,{width:32,height:32},t),de(_e.IMAGE,{width:ni.width,height:ni.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(ai,"xlink:href",this.workspace.options.pathToMedia+ni.url),this.boundEvents.push(y(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),P(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=de(_e.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=de(_e.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);de(_e.RECT,{width:32,height:32},t),de(_e.IMAGE,{width:ni.width,height:ni.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(ai,"xlink:href",this.workspace.options.pathToMedia+ni.url),this.boundEvents.push(y(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),P(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(Fe(pe.CLICK))(null,this.workspace.id,"zoom_controls");be(e)}};ee(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var np=100,rp=75,op=50,sp=25,jm={BLOCKS:op,PROCEDURES:rp,VARIABLES:np,WORKSPACE_COMMENTS:sp},Pu={};Pu.register=Mr,Pu.unregister=dd;var ap=class{constructor(){this.priority=sp}save(e){const t=[];for(const r of e.getTopComments())(e=Yn(r,{addCoordinates:!0,saveIds:!0}))&&t.push(e);return t.length?t:null}load(e,t){for(const r of e)xr(r,t,{recordUndo:ve()})}clear(e){for(const t of e.getTopComments())t.dispose()}};Mr("workspaceComments",new ap);var Ns={};Ns.WorkspaceCommentSerializer=ap,Ns.append=xr,Ns.save=Yn;var Bu={};Bu.register=xo,Bu.unregister=_d;var Ds=class{paste(e,t,r){e=e.commentState,r&&(e.x=r.x,e.y=r.y),o.disable$$module$build$src$core$events$utils();let a;try{a=xr(e,t),hd(a)}finally{o.enable$$module$build$src$core$events$utils()}return a?(ue()&&be(new(Fe(pe.COMMENT_CREATE))(a)),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(a),a):null}};Ds.TYPE="workspace-comment",xo(Ds.TYPE,new Ds);var Uu;Uu=28,o.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Uu,connectingSnapRadius:Uu,currentConnectionPreference:8,bumpDelay:250},o.config$$module$build$src$core$config;var qm="aria-",Jm="role",li;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem",e.SEPARATOR="separator",e.STATUS="status"})(li||(li={}));var wt;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin",e.LIVE="live",e.HIDDEN="hidden"})(wt||(wt={}));var oo={};oo.Role=li,oo.State=wt,oo.setRole=vi,oo.setState=Pt;var Ls=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=V(),this.element=e,e.className="blocklyMenuItem "+(this.enabled?"":"blocklyMenuItemDisabled ")+(this.checked?"blocklyMenuItemSelected ":"")+(this.highlight?"blocklyMenuItemHighlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent",this.checkable){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox ",t.appendChild(r)}return r=this.content,typeof this.content=="string"&&(r=document.createTextNode(this.content)),t.appendChild(r),e.appendChild(t),this.roleName&&vi(e,this.roleName),Pt(e,wt.SELECTED,this.checkable&&this.checked||!1),Pt(e,wt.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?De(t,"blocklyMenuItemHighlight"):Se(t,"blocklyMenuItemHighlight"))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(e){this.isEnabled()&&this.actionHandler&&this.actionHandler(this,e)}onAction(e,t){this.actionHandler=e.bind(t)}},Vu=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu",t.tabIndex=0,this.roleName&&vi(t,this.roleName),this.element=t;for(let r=0,a;a=this.menuItems[r];r++)t.appendChild(a.createDom());return this.pointerMoveHandler=y(t,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=y(t,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=y(t,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=y(t,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=y(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&e.focus({preventScroll:!0})}blur(){const e=this.getElement();e&&e.blur()}setRole(e){this.roleName=e}dispose(){this.pointerMoveHandler&&(L(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(L(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(L(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(L(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(L(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){const r=this.getMenuItems();for(let a=0,u;u=r[a];a++)if(u.getElement()===e)return u}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;if(t&&(t.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement();const r=e.getElement();t&&r&&(ge(r,t),Pt(t,wt.ACTIVEDESCENDANT,e.getId()))}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e<0?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let r;const a=this.getMenuItems();for(;r=a[e];){if(r.isEnabled()){this.setHighlighted(r);break}e+=t}}handlePointerMove(e){Math.max(Math.abs(e.movementX),Math.abs(e.movementY))!==0&&(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){var t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const r=new Me(e.clientX,e.clientY);if(Me.distance(t,r)<1)return}(t=this.getMenuItem(e.target))&&t.performAction(e)}handlePointerEnter(e){this.focus()}handlePointerLeave(e){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction(e);break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=ze(e);return t.height=e.scrollHeight,t}getMenuItems(){return this.menuItems.filter(e=>e instanceof Ls)}},lp=class{constructor(){this.element=null}createDom(){return this.element=document.createElement("hr"),this.element.className="blocklyMenuSeparator",vi(this.element,li.SEPARATOR),this.element}dispose(){let e;(e=this.element)==null||e.remove(),this.element=null}},so="_TEMP_COLLAPSED_INPUT",ks="_TEMP_COLLAPSED_FIELD",mi="MANUALLY_DISABLED",Zm={COLLAPSED_FIELD_NAME:ks,COLLAPSED_INPUT_NAME:so,MANUALLY_DISABLED:mi};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(o.inputTypes$$module$build$src$core$inputs$input_types||(o.inputTypes$$module$build$src$core$inputs$input_types={})),o.inputTypes$$module$build$src$core$inputs$input_types;var ws=new Set,Hu=new WeakSet,Gu=new WeakMap,pr=null,Wu=null,up=0,Ms={};Ms.finishQueuedRenders=Ci,Ms.queueRender=Oa,Ms.triggerQueuedRenders=on;var Xu,cp;o.Msg$$module$build$src$core$msg=Object.create(null),Xu=function(e){Object.keys(e).forEach(function(t){o.Msg$$module$build$src$core$msg[t]=e[t]})},cp={Msg:o.Msg$$module$build$src$core$msg,setLocale:Xu};var ao="blocklyToast",dp="blocklyToastMessage",_p="blocklyToastCloseButton",wn=class{static show(e,t){if(t.oncePerSession&&t.id){if(this.shownIds.has(t.id))return;this.shownIds.add(t.id)}this.hide(e);const r=this.createDom(e,t);requestAnimationFrame(()=>{r.style.bottom="2rem"})}static createDom(e,t){const{message:r,duration:a=5,assertiveness:u=wn.Assertiveness.POLITE}=t,b=document.createElement("div");e.getInjectionDiv().appendChild(b),b.dataset.toastId=t.id,b.className=ao,vi(b,li.STATUS),Pt(b,wt.LIVE,u),t=b.appendChild(document.createElement("div")),t.className=dp,t.innerText=r,t=b.appendChild(document.createElement("button")),t.className=_p,Pt(t,wt.LABEL,o.Msg$$module$build$src$core$msg.CLOSE);var U=de(_e.SVG,{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},t);Pt(U,wt.HIDDEN,!0),de(_e.RECT,{x:19.7782,y:2.80762,width:2,height:24,transform:"rotate(45, 19.7782, 2.80762)",fill:"black"},U),de(_e.RECT,{x:2.80762,y:4.22183,width:2,height:24,transform:"rotate(-45, 2.80762, 4.22183)",fill:"black"},U),t.addEventListener("click",()=>{b.remove(),e.markFocused()});let Z;return t=()=>{Z=setTimeout(()=>b.remove(),a*1e3)},U=()=>clearTimeout(Z),b.addEventListener("focusin",U),b.addEventListener("focusout",t),b.addEventListener("mouseenter",U),b.addEventListener("mousemove",U),b.addEventListener("mouseleave",t),t(),b}static hide(e,t){e=e.getInjectionDiv().querySelector(`.${ao}`),e instanceof HTMLElement&&(!t||t===e.dataset.toastId)&&e.remove()}};wn.shownIds=new Set,(function(e){e=e.Assertiveness||(e.Assertiveness={}),e.ASSERTIVE="assertive",e.POLITE="polite"})(wn||(wn={})),ee(`
.${ao} {
  font-size: 1.2rem;
  position: absolute;
  bottom: -10rem;
  right: 2rem;
  padding: 1rem;
  color: black;
  background-color: white;
  border: 2px solid black;
  border-radius: 0.4rem;
  z-index: 999;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  line-height: 1.5;
  transition: bottom 0.3s ease-out;
}

.${ao} .${dp} {
  maxWidth: 18rem;
}

.${ao} .${_p} {
  margin: 0;
  padding: 0.2rem;
  background-color: transparent;
  color: black;
  border: none;
  cursor: pointer;
}
`);var hp=function(e,t){window.alert(e),t&&t()},pp=hp,fp=function(e,t){t(window.confirm(e))},mp=fp,Tp=function(e,t,r){r(window.prompt(e,t))},gp=Tp,Ep=wn.show.bind(wn),$p=Ep,qi={};qi.alert=Pr,qi.confirm=Po,qi.prompt=Bo,qi.setAlert=Td,qi.setConfirm=gd,qi.setPrompt=Ed,qi.setToast=Sd,qi.toast=$d;var Sp=new Set,Ap={};Ap.warn=Wt;var Ku="VARIABLE",zu="ijkmnopqrstuvwxyzabcdefgh",bp={generateUniqueNameInternal:Id},Mt={CATEGORY_NAME:Ku,TEST_ONLY:bp,VAR_LETTER_OPTIONS:zu};Mt.allDeveloperVariables=o.allDeveloperVariables$$module$build$src$core$variables,Mt.allUsedVarModels=o.allUsedVarModels$$module$build$src$core$variables,Mt.compareByName=qn,Mt.createVariableButtonHandler=An,Mt.deleteVariable=o.deleteVariable$$module$build$src$core$variables,Mt.flyoutCategory=Na,Mt.flyoutCategoryBlocks=Da,Mt.generateUniqueName=La,Mt.generateUniqueNameFromOptions=Go,Mt.generateVariableFieldDom=bn,Mt.getAddedVariables=Br,Mt.getOrCreateVariablePackage=o.getOrCreateVariablePackage$$module$build$src$core$variables,Mt.getVariable=o.getVariable$$module$build$src$core$variables,Mt.getVariableUsesById=Jn,Mt.internalFlyoutCategory=Uo,Mt.jsonFlyoutCategoryBlocks=Ho,Mt.nameUsedWithAnyType=ka,Mt.nameUsedWithConflictingParam=wa,Mt.promptName=Wo,Mt.renameVariable=o.renameVariable$$module$build$src$core$variables;var fr=class extends Error{},Ip=class extends fr{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},lo=class extends fr{constructor(e,t,r){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=r}},Op=class extends fr{constructor(e,t,r,a){super(`The block ${r.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=r,this.childState=a}},vp=class extends fr{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},Cp=class extends fr{constructor(e,t,r){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=r}},Mn={};Mn.BadConnectionCheck=Op,Mn.DeserializationError=fr,Mn.MissingBlockType=Ip,Mn.MissingConnection=lo,Mn.RealChildOfShadow=vp,Mn.UnregisteredIcon=Cp;var yp=class{constructor(){this.priority=op}save(e){const t=[];for(const r of e.getTopBlocks(!1))(e=pi(r,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const r of e)sn(r,t,{recordUndo:ve()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Mr("blocks",new yp);var uo={};uo.BlockSerializer=yp,uo.append=sn,uo.appendInternal=Zn,uo.save=pi;var Ut=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};Ut.MUTATOR=new Ut("mutator"),Ut.WARNING=new Ut("warning"),Ut.COMMENT=new Ut("comment");var xn=class extends dr{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new xn),t.blockId=e.blockId,t}},Fn=class extends xn{constructor(e,t,r,a,u){super(e),this.type=pe.BLOCK_CHANGE,e&&(this.element=t,this.name=r||void 0,this.oldValue=a,this.newValue=u)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Fn),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,e.disabledReason!==void 0&&(t.disabledReason=e.disabledReason),t}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const r=t.getIcon(Ut.MUTATOR);switch(r&&In(r)&&r.bubbleIsVisible()&&r.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":var a;t.setDisabledReason(!!e,(a=this.disabledReason)!=null?a:mi);break;case"inline":t.setInputsInline(!!e);break;case"mutation":a=Fn.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(o.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),be(new Fn(t,"mutation",null,a,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Ri(e):""}};s(Re.EVENT,pe.BLOCK_CHANGE,Fn);var xs={};xs.clamp=Qn,xs.toDegrees=Kd,xs.toRadians=Xo;var Fs=16,Rp=1,Np=12,Yu=16,Ps=.25,ju=null,Pn=null,Dp="",Lp="",Rt,co,Bn,qu=null,pn=null,kp=null,Bs=null,Us=null,Ju={getBoundsInfo:function(){const e=W(qu),t=ze(qu);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,r,a){const u=Ju.getBoundsInfo(),b=ze(Rt);return t+b.height<u.bottom?Ka(e,t,u,b):a-b.height>u.top?za(r,a,u,b):t+b.height<document.documentElement.clientHeight?Ka(e,t,u,b):a-b.height>document.documentElement.clientTop?za(r,a,u,b):Yd(e,u,b)}},Zt={ANIMATION_TIME:Ps,ARROW_HORIZONTAL_PADDING:Np,ARROW_SIZE:Fs,BORDER_SIZE:Rp,PADDING_Y:Yu,TEST_ONLY:Ju};Zt.clearContent=Yo,Zt.createDom=Ko,Zt.getContentDiv=zo,Zt.getOwner=Ba,Zt.getPositionX=Ur,Zt.hide=qo,Zt.hideIfOwner=jo,Zt.hideWithoutAnimation=yi,Zt.isVisible=Ya,Zt.repositionForWindowResize=qa,Zt.setBoundsElement=Pa,Zt.setColour=Ua,Zt.show=Xa,Zt.showPositionedByBlock=zd,Zt.showPositionedByField=Va;var mr={};mr.commonWordPrefix=Ja,mr.commonWordSuffix=Za,mr.isNumber=o.isNumber$$module$build$src$core$utils$string,mr.shortestStringLength=Vr,mr.wrap=o.wrap$$module$build$src$core$utils$string;var Vs=void 0,_o=!1,Tr=!1,wp=50,Mp=0,Un=0,Zu=0,Qu=0,Ti=null,ho=null,ec=0,tc=10,xp=10,Fp=750,Hs=5,Vt=null,ui={HOVER_MS:Fp,LIMIT:wp,MARGINS:Hs,OFFSET_X:ec,OFFSET_Y:tc,RADIUS_OK:xp};ui.bindMouseEvents=Hr,ui.block=ol,ui.createDom=tl,ui.dispose=rl,ui.getCustomTooltip=Zd,ui.getDiv=e_,ui.getTooltipOfObject=er,ui.hide=Gi,ui.isVisible=Qd,ui.setCustomTooltip=Jd,ui.unbindMouseEvents=il,ui.unblock=sl;var ic=.45,nc=.65,Pp={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},gi={};gi.blend=vn,gi.getHsvSaturation=al,gi.getHsvValue=ll,gi.hexToRgb=Zo,gi.hsvToHex=Qo,gi.hueToHex=ul,gi.names=Pp,gi.parse=On,gi.rgbToHex=Gr,gi.setHsvSaturation=a_,gi.setHsvValue=l_;var po={};po.checkMessageReferences=u_,po.parseBlockColour=tr,po.replaceMessageReferences=Dt,po.tokenizeInterpolation=cl;var Tt=class{get size_(){return this.size}set size_(e){this.size=e}constructor(e,t,r){this.DEFAULT_VALUE=null,this.name=void 0,this.tooltip=this.validator_=null,this.size=new ct(0,0),this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.id_=null,this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new ct(0,0),e!==Tt.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(Dt(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");if(this.sourceBlock_=e,e.id.includes("_field"))throw Error(`Field ID indicator is contained in block ID. This may cause problems with focus: ${e.id}.`);this.id_=`${e.id}_field_${V()}`}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){if(!this.fieldGroup_){var e=this.id_;if(!e)throw Error("Expected ID to be defined prior to init.");this.fieldGroup_=de(_e.G,{id:e}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour()}}initView(){this.createBorderRect_(),this.createTextElement_(),this.fieldGroup_&&De(this.fieldGroup_,"blocklyField")}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=de(_e.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=de(_e.TEXT,{class:"blocklyText blocklyFieldText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");Hr(e),this.mouseDownWrapper=y(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(Tt),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(Tt,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=o.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),Et(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(o.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){jo(this),Cn(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||He(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(De(e,"blocklyEditableField"),Se(e,"blocklyNonEditableField")):(De(e,"blocklyNonEditableField"),Se(e,"blocklyEditableField")))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Tt.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let r=e*2,a=t.FIELD_TEXT_HEIGHT,u=0;this.textElement_&&(u=st(this.textElement_),r+=u),this.isFullBlockField()||(a=Math.max(a,t.FIELD_BORDER_RECT_HEIGHT)),this.size_=new ct(r,a),this.positionTextElement_(e,u),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var r=this.getConstants(),a=this.size_.height/2,u;this.textElement_.setAttribute("x",String((u=this.getSourceBlock())!=null&&u.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(r.FIELD_TEXT_BASELINE_CENTER?a:a-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_&&(this.render_(),this.isDirty_=!1),this.size_):new ct(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new xt;if(this.isFullBlockField()){var r=this.sourceBlock_.getHeightWidth();const a=t.workspace.scale;e=this.getAbsoluteXY_(),t=(r.width+1)*a,r=(r.height+1)*a,Mh?(e.x+=1.5*a,e.y+=1.5*a):(e.x-=.5*a,e.y-=.5*a)}else r=this.borderRect_.getBoundingClientRect(),e=W(this.borderRect_),t=r.width,r=r.height;return new ut(e.y,e.y+r,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,Tt.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,t=!0){if(e!==null){var r=o.getGroup$$module$build$src$core$events$utils();r||o.setGroup$$module$build$src$core$events$utils(!0);try{const Ce=this.doClassValidation_(e),je=this.processValidation(e,Ce,t);if(!(je instanceof Error)){var a,u=(a=this.getValidator())==null?void 0:a.call(this,je),b=this.processValidation(je,u,t);if(!(b instanceof Error)){var U=this.sourceBlock_;if(!U||!U.disposed){var Z=this.getValue();Z===b?this.doValueUpdate_(b):(this.doValueUpdate_(b),t&&U&&ue()&&be(new(Fe(pe.BLOCK_CHANGE))(U,"field",this.name||null,Z,b)),this.isDirty_&&this.forceRerender())}}}}finally{o.setGroup$$module$build$src$core$events$utils(r)}}}processValidation(e,t,r){return t===null?(this.doValueInvalid_(e,r),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,t){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return er(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return W(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new xt;const r=t.inputList;for(let a=0;a<t.inputList.length;a++){const u=r[a],b=u.fieldRow;for(let U=0;U<b.length;U++)if(b[U]===this){e=u;break}}return e}getFlipRtl(){return!1}onShortcut(e){return!1}getFocusableElement(){if(!this.fieldGroup_)throw Error("This field currently has no representative DOM element.");return this.fieldGroup_}getFocusableTree(){const e=this.getSourceBlock();if(!e)throw new xt;return e.workspace}onNodeFocus(){const e=this.getSourceBlock();e.workspace.scrollBoundsIntoView(e.getBoundingRectangleWithoutChildren())}onNodeBlur(){}canBeFocused(){return!0}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};Tt.NBSP=" ",Tt.SKIP_SETUP=Symbol("SKIP_SETUP");var xt=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},gr=null,Bp=null,Gs=null,rc="blocklyWidgetDiv",Er="",$r="",ci,Ws=null,Si={};Si.createDom=dl,Si.getDiv=ir,Si.hide=nr,Si.hideIfOwner=Cn,Si.hideIfOwnerIsInWorkspace=Wr,Si.isVisible=_l,Si.positionWithAnchor=pl,Si.repositionForWindowResize=fl,Si.show=ts,Si.testOnly_setDiv=c_;var Xs=null,Up={},Ks=null,Vn={};Vn.callbackFactory=o.callbackFactory$$module$build$src$core$contextmenu,Vn.dispose=Tl,Vn.getCurrentBlock=p_,Vn.hide=Xr,Vn.setCurrentBlock=ml,Vn.show=rr;var _t=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let t;return(t=this.registeredItems.get(e))!=null?t:null}getContextMenuOptions(e,t){const r=[];for(const a of this.registeredItems.values()){if(a.scopeType&&(a.scopeType===oc.BLOCK&&!e.block||a.scopeType===oc.COMMENT&&!e.comment||a.scopeType===oc.WORKSPACE&&!e.workspace))continue;let u;if(u={scope:e,weight:a.weight},a.separator)u=Object.assign({},u,{separator:!0});else{const b=a.preconditionFn(e,t);if(b==="hidden")continue;const U=typeof a.displayText=="function"?a.displayText(e):a.displayText;u=Object.assign({},u,{text:U,callback:a.callback,enabled:b==="enabled"})}r.push(u)}return r.sort(function(a,u){return a.weight-u.weight}),r}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",t.COMMENT="comment",e.registry=new e})(_t||(_t={}));var oc=_t.ScopeType,fn=50,zs=100,Qm={BLOCK:fn,BUBBLE:zs},Vp=class{constructor(e){this.comment=e,this.startLoc=null,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.isReadOnly()}startDrag(){this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,fn),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0)}fireDragStartEvent(){const e=new(Fe(pe.COMMENT_DRAG))(this.comment,!0);be(e)}fireDragEndEvent(){const e=new(Fe(pe.COMMENT_DRAG))(this.comment,!1);be(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(Fe(pe.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),be(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},Hp=new WeakMap,Ys=class{constructor(e,t,r,a){this.id=e,this.workspace=t,this.container=r,this.commentView=a}isVisible(){return this.icon.checkVisibility()}getCommentView(){return this.commentView}getSize(e=!1){var t=this.icon.getBBox();return t=ut.from(t),e&&(e=this.getMargin(),t.left-=e,t.top-=e,t.bottom+=e,t.right+=e),t}getMargin(){return(this.container.getBBox().height-this.icon.getBBox().height)/2}getFocusableElement(){return this.icon}getFocusableTree(){return this.workspace}onNodeFocus(){const e=this.getCommentView();var t=e.getRelativeToSurfaceXY();const r=e.getSize();t=new ut(t.y,t.y+r.height,t.x,t.x+r.width),e.workspace.scrollBoundsIntoView(t)}onNodeBlur(){}canBeFocused(){return this.isVisible()}},Gp="_collapse_bar_button",Wp=class extends Ys{constructor(e,t,r,a){super(e,t,r,a),this.id=e,this.workspace=t,this.container=r,this.commentView=a,this.icon=de(_e.IMAGE,{class:"blocklyFoldoutIcon",href:`${this.workspace.options.pathToMedia}foldout-icon.svg`,id:`${this.id}${Gp}`},this.container),this.bindId=y(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){L(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${e}`)}performAction(e){P(),this.getCommentView().bringToFront(),e&&e instanceof PointerEvent&&p(e)?e.stopPropagation():(this.getCommentView().setCollapsed(!this.getCommentView().isCollapsed()),this.workspace.hideChaff(),e?.stopPropagation())}},sc="_comment_textarea_",qs=class{constructor(e,t,r){this.workspace=e,this.onFinishEditing=r,this.textChangeListeners=[],this.text="",this.foreignObject=de(_e.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"}),e=document.createElementNS(Dn,"body"),e.setAttribute("xmlns",Dn),e.className="blocklyMinimalBody",this.textArea=document.createElementNS(Dn,"textarea"),this.textArea.setAttribute("tabindex","-1"),this.textArea.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),De(this.textArea,"blocklyCommentText"),De(this.textArea,"blocklyTextarea"),De(this.textArea,"blocklyText"),e.appendChild(this.textArea),this.foreignObject.appendChild(e),t&&(this.id=t+sc,this.textArea.setAttribute("id",this.id)),y(this.textArea,"change",this,this.onTextChange),y(this.textArea,"pointerdown",this,a=>{a.stopPropagation(),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this),P()}),y(this.textArea,"wheel",this,a=>{a.stopPropagation()}),y(this.textArea,"keydown",this,this.handleKeyDown)}getDom(){return this.foreignObject}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}onTextChange(){const e=this.text;this.text=this.textArea.value;for(let t=this.textChangeListeners.length-1;t>=0;t--)this.textChangeListeners[t](e,this.text)}handleKeyDown(e){(e.key==="Escape"||e.key==="Enter"&&(e.ctrlKey||e.metaKey))&&(this.onFinishEditing&&this.onFinishEditing(),e.stopPropagation())}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}setPlaceholderText(e){this.textArea.placeholder=e}setEditable(e){e?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","true")}updateSize(e,t){this.foreignObject.setAttribute("height",`${e.height-t.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${t.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}getFocusableElement(){return this.textArea}getFocusableTree(){return this.workspace}onNodeFocus(){const e=ut.from(this.foreignObject.getBoundingClientRect());this.workspace.scrollBoundsIntoView(ut.createFromPoint(Bt(this.workspace,e.getOrigin()),e.getWidth(),e.getHeight()))}onNodeBlur(){}canBeFocused(){return!!this.id}},Xp="_delete_bar_button",Kp=class extends Ys{constructor(e,t,r,a){super(e,t,r,a),this.id=e,this.workspace=t,this.container=r,this.commentView=a,this.icon=de(_e.IMAGE,{class:"blocklyDeleteIcon",href:`${this.workspace.options.pathToMedia}delete-icon.svg`,id:`${this.id}${Xp}`},r),this.bindId=y(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){L(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("x","0");const t=this.container.getBBox();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${t.width-this.getSize(!0).getWidth()}`)}performAction(e){P(),e&&e instanceof PointerEvent&&p(e)?e.stopPropagation():(this.getCommentView().dispose(),e?.stopPropagation(),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.workspace))}},fo=class{constructor(e,t){this.workspace=e,this.commentId=t,this.collapsed=!1,this.editable=!0,this.location=new Me(0,0),this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=de(_e.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteButton:this.deleteButton,foldoutButton:this.foldoutButton,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot),this.commentEditor=this.createTextArea(),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let r;(r=e.getLayerManager())==null||r.append(this,fn),this.size=fo.defaultCommentSize,this.setSizeWithoutFiringEvents(this.size),this.moveTo(new Me(0,0))}createHighlightRect(e){return de(_e.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e){e=de(_e.G,{class:"blocklyCommentTopbar"},e);const t=de(_e.RECT,{class:"blocklyCommentTopbarBackground"},e),r=new Kp(this.commentId,this.workspace,e,this),a=new Wp(this.commentId,this.workspace,e,this);this.addDisposeListener(()=>{r.dispose(),a.dispose()});const u=de(_e.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),b=document.createTextNode("");return u.appendChild(b),{topBarGroup:e,topBarBackground:t,deleteButton:r,foldoutButton:a,textPreview:u,textPreviewNode:b}}createTextArea(){const e=new qs(this.workspace,this.commentId,()=>this.svgRoot.focus());return this.svgRoot.appendChild(e.getDom()),e.addTextChangeListener((t,r)=>{this.updateTextPreview(r),this.setSize(this.size)}),e}getEditorFocusableNode(){return this.commentEditor}createResizeHandle(e,t){return e=de(_e.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),y(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const t=this.topBarBackground.getBBox(),r=this.textPreview.getBBox(),a=this.resizeHandle.getBBox();this.size=e=ct.max(e,this.calcMinSize(t)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.commentEditor.updateSize(e,t),this.deleteButton.reposition(),this.foldoutButton.reposition(),this.updateTextPreviewSize(e,t,r),this.updateResizeHandlePosition(e,a)}setSize(e){const t=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(t,this.size)}calcMinSize(e){var t;this.updateTextPreview((t=this.commentEditor.getText())!=null?t:"");let r=t=st(this.textPreview);return this.foldoutButton.isVisible()?r+=this.foldoutButton.getSize(!0).getWidth():t&&(r+=4),this.deleteButton.isVisible()?r+=this.deleteButton.getSize(!0).getWidth():t&&(r+=4),new ct(r,e.height+20)}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextPreviewSize(e,t,r){t=(t.height-r.height)/2;const a=this.foldoutButton.getSize(!0),u=this.deleteButton.getSize(!0);e=e.width-a.getWidth()-u.getWidth(),this.textPreview.setAttribute("x",`${(this.workspace.RTL?-1:1)*a.getWidth()}`),this.textPreview.setAttribute("y",`${t+r.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,t){this.resizeHandle.setAttribute("y",`${e.height-t.height}`),this.resizeHandle.setAttribute("x",`${e.width-t.width}`)}onSizeChange(e,t){for(let r=this.sizeChangeListeners.length-1;r>=0;r--)this.sizeChangeListeners[r](e,t)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),p(e)||(this.preResizeSize=this.getSize(),is(this.workspace,e,new Me(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=y(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=y(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){P(),this.resizePointerUpListener&&(L(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(L(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=ns(this.workspace,e),this.setSizeWithoutFiringEvents(new ct(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?De(this.svgRoot,"blocklyCollapsed"):Se(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;e>=0;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(De(this.svgRoot,"blocklyEditable"),Se(this.svgRoot,"blocklyReadonly")):(Se(this.svgRoot,"blocklyEditable"),De(this.svgRoot,"blocklyReadonly")),this.commentEditor.setEditable(e)}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.commentEditor.getText()}setText(e){this.commentEditor.setText(e)}setPlaceholderText(e){this.commentEditor.setPlaceholderText(e)}addTextChangeListener(e){this.commentEditor.addTextChangeListener(e)}removeTextChangeListener(e){this.commentEditor.removeTextChangeListener(e)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return e.length>=12?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,t=e.childNodes;t[t.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){P(),p(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,He(this.svgRoot);for(let e=this.disposeListeners.length-1;e>=0;e--)this.disposeListeners[e]();this.disposeListeners.length=0,this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}getCommentBarButtons(){return[this.foldoutButton,this.deleteButton]}};fo.defaultCommentSize=new ct(120,100),ee(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklyCommentText.blocklyActiveFocus {
  border-color: #fc3;
  border-width: 2px;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var Js=class{constructor(e,t){this.workspace=e,this.text="",this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new Me(0,0),this.disposing=this.disposed=!1,this.id=t&&!e.getCommentById(t)?t:C(),this.size=fo.defaultCommentSize,e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){ue()&&be(new(Fe(pe.COMMENT_CREATE))(this))}fireDeleteEvent(){ue()&&be(new(Fe(pe.COMMENT_DELETE))(this))}fireChangeEvent(e,t){ue()&&be(new(Fe(pe.COMMENT_CHANGE))(this,e,t))}fireCollapseEvent(e){ue()&&be(new(Fe(pe.COMMENT_COLLAPSE))(this,e))}setText(e){const t=this.text;this.text=e,this.fireChangeEvent(t,e)}getText(){return this.text}setSize(e){const t=new(Fe(pe.COMMENT_RESIZE))(this);this.size=e,t.recordCurrentSizeAsNewSize(),be(t)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnDeletable(){return this.deletable}moveTo(e,t){const r=new(Fe(pe.COMMENT_MOVE))(this);t&&r.setReason(t),this.location=e,r.recordNew(),be(r)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},Ji=class extends Js{constructor(e,t){super(e,t),this.dragStrategy=new Vp(this),this.workspace=e,this.view=new fo(e,this.id),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.view.getSvgRoot().setAttribute("id",this.id),this.addModelUpdateBindings(),y(this.view.getSvgRoot(),"pointerdown",this,this.startGesture)}addModelUpdateBindings(){this.view.addTextChangeListener((e,t)=>{super.setText(t)}),this.view.addSizeChangeListener((e,t)=>{super.setSize(t)}),this.view.addOnCollapseListener(()=>{super.setCollapsed(this.view.isCollapsed())}),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setPlaceholderText(e){this.view.setPlaceholderText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var t,r;const a=(r=(t=this.view)==null?void 0:t.getSize())!=null?r:this.getSize();return this.workspace.RTL?(t=e.x-a.width,r=e.x):(t=e.x,r=e.x+a.width),new ut(e.y,e.y+a.height,t,r)}moveBy(e,t,r){const a=this.getRelativeToSurfaceXY();e=new Me(a.x+e,a.y+t),this.moveTo(e,r)}moveTo(e,t){super.moveTo(e,t),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?De(this.getSvgRoot(),"blocklyDragging"):Se(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0;const e=o.getFocusManager$$module$build$src$core$focus_manager();e.getFocusedNode()===this&&setTimeout(()=>e.focusTree(this.workspace),0),this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const t=this.workspace.getGesture(e);t&&(t.handleCommentStart(e,this),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this))}setDeleteStyle(e){e?De(this.getSvgRoot(),"blocklyDraggingDelete"):Se(this.getSvgRoot(),"blocklyDraggingDelete")}isCopyable(){return this.isOwnMovable()&&this.isOwnDeletable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){De(this.getSvgRoot(),"blocklySelected"),ye(this)}unselect(){Se(this.getSvgRoot(),"blocklySelected"),ye(null)}toCopyData(){return{paster:Ds.TYPE,commentState:Yn(this,{addCoordinates:!0,saveIds:!1})}}showContextMenu(e){const t=_t.registry.getContextMenuOptions({comment:this,focusedNode:this},e);let r;r=e instanceof PointerEvent?new Me(e.clientX,e.clientY):Ft(this.workspace,this.getRelativeToSurfaceXY()).translate(10,10),rr(e,t,this.workspace.RTL,this.workspace,r)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getEditorFocusableNode(){return this.view.getEditorFocusableNode()}getFocusableElement(){return this.getSvgRoot()}getFocusableTree(){return this.workspace}onNodeFocus(){this.select();let e;(e=this.workspace.getLayerManager())==null||e.append(this,fn),this.workspace.scrollBoundsIntoView(this.getBoundingRectangle())}onNodeBlur(){this.unselect()}canBeFocused(){return!0}},Qt={};Qt.appendDomToWorkspace=I_,Qt.blockToDom=an,Qt.blockToDomWithXY=zr,Qt.clearWorkspaceAndLoadFromXml=b_,Qt.deleteNext=k_,Qt.domToBlock=o.domToBlock$$module$build$src$core$xml,Qt.domToBlockInternal=yn,Qt.domToPrettyText=A_,Qt.domToText=Ri,Qt.domToVariables=Al,Qt.domToWorkspace=o.domToWorkspace$$module$build$src$core$xml,Qt.loadWorkspaceComment=Sl,Qt.saveWorkspaceComment=Kr,Qt.variablesToDom=El,Qt.workspaceToDom=E_;var ac=class extends xn{constructor(e){super(e),this.type=pe.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=zr(e),this.ids=Le(e),this.json=pi(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ri(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new ac),t.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!eT(t,this.ids))if(e)sn(this.json,t);else for(e=0;e<this.ids.length;e++){const r=this.ids[e],a=t.getBlockById(r);a?a.dispose(!1):r===this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},eT=function(e,t){return t.map(r=>e.getBlockById(r)).filter(r=>r&&r.isShadow()).length===t.length};s(Re.EVENT,pe.BLOCK_CREATE,ac);var lc=class extends Li{constructor(e,t){super(t),this.type=pe.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new lc),t.themeName=e.themeName,t}};s(Re.EVENT,pe.THEME_CHANGE,lc);var uc=class extends Li{constructor(e,t,r,a,u){super(a),this.type=pe.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=t,this.scale=r,this.oldScale=u}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new uc),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};s(Re.EVENT,pe.VIEWPORT_CHANGE,uc);var zp={fromJsonInternal:M_},Zs={TEST_ONLY:zp};Zs.fromJson=o.fromJson$$module$build$src$core$field_registry,Zs.register=Ni,Zs.unregister=w_;var qt=class extends Tt{constructor(e,t,r){super(Tt.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==Tt.SKIP_SETUP&&(this.setOptions(e),r&&this.configure_(r),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(qt,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=de(_e.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&De(this.borderRect_,"blocklyDropdownRect"),this.fieldGroup_&&(De(this.fieldGroup_,"blocklyField"),De(this.fieldGroup_,"blocklyDropdownField"))}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=de(_e.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?qt.ARROW_CHAR+" ":" "+qt.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=de(_e.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(ai,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new xt;this.dropdownCreate(),this.menu_&&(this.menu_.openingCoords=e&&typeof e.clientX=="number"?new Me(e.clientX,e.clientY):null,Yo(),e=this.menu_.render(zo()),De(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),e=this.sourceBlock_.getColourTertiary(),Ua(t,e)),Va(this,this.dropdownDispose_.bind(this)),zo().style.height=`${this.menu_.getSize().height}px`,this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour())}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new xt;const t=new Vu;t.setRole(li.LISTBOX),this.menu_=t;const r=this.getOptions(!1);this.selectedMenuItem=null;for(let u=0;u<r.length;u++){var a=r[u];if(a===qt.SEPARATOR){t.addChild(new lp);continue}const[b,U]=a;or(b)?(a=new Image(b.width,b.height),a.src=b.src,a.alt=b.alt):a=b,a=new Ls(a,U),a.setRole(li.OPTION),a.setRightToLeft(e.RTL),a.setCheckable(!0),t.addChild(a),a.setChecked(U===this.value_),U===this.value_&&(this.selectedMenuItem=a),a.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){jo(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}setOptions(e){Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],this.setValue(this.selectedOption[1])}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,r;r=e[t];t++)r[1]===this.value_&&(this.selectedOption=r)}applyColour(){const e=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",e.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),e&&this.arrow&&(e.isShadow()?this.arrow.style.fill=e.getColourSecondary():this.arrow.style.fill=e.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];or(e)?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new xt;this.imageElement.style.display="",this.imageElement.setAttributeNS(ai,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const r=Number(e.height);e=Number(e.width);var a=!!this.borderRect_;const u=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,r+qt.IMAGE_Y_PADDING);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let b;b=this.svgArrow?this.positionSVGArrow(e+a,u/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):st(this.arrow),this.size_=new ct(e+b+a*2,u);let U=0;t.RTL?this.imageElement.setAttribute("x",`${a+b}`):(U=e+b,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${a}`)),this.imageElement.setAttribute("y",String(u/2-r/2)),this.positionTextElement_(U+a,e+b)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();De(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const r=st(this.getTextElement());t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let a=0;this.svgArrow&&(a=this.positionSVGArrow(r+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_=new ct(r+a+t*2,e),this.positionTextElement_(t,r)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const r=this.getSourceBlock();if(!r)throw new xt;const a=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,u=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,b=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(r.RTL?a:e+u)+","+t+")"),b+u}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];if(or(e))return e.alt;if(typeof HTMLElement<"u"&&e instanceof HTMLElement){let t,r;return(r=(t=e.title)!=null?t:e.ariaLabel)!=null?r:e.innerText}return typeof e=="string"?e:(console.warn("Can't get text for existing dropdown option. If you're using HTMLElement dropdown options in node, ensure you're using jsdom-global or similar."),null)}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let t=!1;const r=e.map(U=>{if(U===qt.SEPARATOR)return t=!0,U;const[Z,Ce]=U;return typeof Z=="string"?[Dt(Z),Ce]:(t=!0,[or(Z)?Object.assign({},Z,{alt:Dt(Z.alt)}):Z,Ce])});if(t||e.length<2)return{options:r};var a=r.map(([U])=>U),u=Vr(a);e=Ja(a,u);const b=Za(a,u);return!e&&!b||u<=e+b?{options:r}:(u=e?a[0].substring(0,e-1):void 0,a=b?a[0].substr(1-b):void 0,{options:this.applyTrim(r,e,b),prefix:u,suffix:a})}applyTrim(e,t,r){return e.map(([a,u])=>[a.substring(t,a.length-r),u])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let r=0;r<e.length;r++){const a=e[r];Array.isArray(a)||a===qt.SEPARATOR?typeof a[1]!="string"?(t=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option id must be a string.
          Found ${a[1]} in: ${a}`)):!a[0]||typeof a[0]=="string"||or(a[0])||typeof HTMLElement<"u"&&a[0]instanceof HTMLElement||(t=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option must have a string
          label, image description, or HTML element. Found ${a[0]} in: ${a}`)):(t=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option must be an array or
          the string literal 'separator'. Found: ${a}`))}if(t)throw TypeError("Found invalid FieldDropdown options.")}};qt.SEPARATOR="separator",qt.ARROW_CHAR="▾",qt.IMAGE_Y_OFFSET=5,qt.IMAGE_Y_PADDING=qt.IMAGE_Y_OFFSET*2,Ni("field_dropdown",qt);var Hn=class{constructor(e,t,r,a){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=a||Object.create(null),this.fontStyle=Object.create(null),s(Re.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const r=new Hn(e);let a=t.base;if(a){if(typeof a=="string"){let u;a=(u=x(Re.THEME,a))!=null?u:void 0}a instanceof Hn&&($e(r,a),r.name=e)}return $e(r.blockStyles,t.blockStyles),$e(r.categoryStyles,t.categoryStyles),$e(r.componentStyles,t.componentStyles),$e(r.fontStyle,t.fontStyle),t.startHats!==null&&(r.startHats=t.startHats),r}},tT={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},iT={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Qs=new Hn("classic",tT,iT),ki=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,r=!1;var a=!1,u=!1,b=!1,U=!1,Z=!1;const Ce=!!e.readOnly;if(!Ce){var je;t=rn((je=e.toolbox)!=null?je:null),r=No(t),a=e.trashcan,a=a===void 0?r:a,u=e.collapse,u=u===void 0?r:u,b=e.comments,b=b===void 0?r:b,U=e.disable,U=U===void 0?r:U,Z=e.sounds,Z=Z===void 0?!0:Z}je=e.maxTrashcanContents,a?je===void 0&&(je=32):je=0;const Ct=!!e.rtl;let At=e.horizontalLayout;At===void 0&&(At=!1);var Jt=e.toolboxPosition!=="end";Jt=At?Jt?dt.TOP:dt.BOTTOM:Jt===Ct?dt.RIGHT:dt.LEFT;let nn=e.css;nn===void 0&&(nn=!0);let Hi="https://blockly-demo.appspot.com/static/media/";e.media&&(Hi=e.media.endsWith("/")?e.media:e.media+"/");const xm=e.oneBasedIndex,xT=e.renderer||"geras",FT=e.plugins||{};let ad=e.modalInputs;ad===void 0&&(ad=!0),this.RTL=Ct,this.oneBasedIndex=xm===void 0?!0:xm,this.collapse=u,this.comments=b,this.disable=U,this.readOnly=Ce,this.maxBlocks=e.maxBlocks||1/0;let Fm;this.maxInstances=(Fm=e.maxInstances)!=null?Fm:null,this.modalInputs=ad,this.pathToMedia=Hi,this.hasCategories=r,this.moveOptions=ki.parseMoveOptions(e,r),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=a,this.maxTrashcanContents=je,this.hasSounds=Z,this.hasCss=nn,this.horizontalLayout=At,this.languageTree=t,this.gridOptions=ki.parseGridOptions(e),this.zoomOptions=ki.parseZoomOptions(e),this.toolboxPosition=Jt,this.theme=ki.parseThemeOptions(e),this.renderer=xT;let Pm;this.rendererOverrides=(Pm=e.rendererOverrides)!=null?Pm:null;let Bm;this.parentWorkspace=(Bm=e.parentWorkspace)!=null?Bm:null,this.plugins=FT}static parseMoveOptions(e,t){const r=e.move||{},a={};return r.scrollbars===void 0&&e.scrollbars===void 0?a.scrollbars=t:typeof r.scrollbars=="object"?(a.scrollbars={horizontal:!!r.scrollbars.horizontal,vertical:!!r.scrollbars.vertical},a.scrollbars.horizontal&&a.scrollbars.vertical?a.scrollbars=!0:a.scrollbars.horizontal||a.scrollbars.vertical||(a.scrollbars=!1)):a.scrollbars=!!r.scrollbars||!!e.scrollbars,a.wheel=a.scrollbars&&r.wheel!==void 0?!!r.wheel:typeof a.scrollbars=="object",a.drag=a.scrollbars?r.drag===void 0?!0:!!r.drag:!1,a}static parseZoomOptions(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=t.spacing>0&&!!e.snap,t}static parseThemeOptions(e){return e=e.theme||Qs,typeof e=="string"?x(Re.THEME,e):e instanceof Hn?e:Hn.defineTheme(e.name||"builtin"+V(),e)}},Yp=class{constructor(e,t){this.bubble=e,this.workspace=t,this.startLoc=null}isMovable(){return!0}startDrag(){this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,zs),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},di,ft=class{constructor(e,t,r,a,u){this.workspace=e,this.anchor=t,this.ownerRect=r,this.owner=u,this.size=new ct(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new Yp(this,this.workspace),this.id=V(),this.svgRoot=de(_e.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=de(_e.G,{class:"blocklyEmboss"},this.svgRoot),this.tail=de(_e.PATH,{class:"blocklyBubbleTail"},e),this.background=de(_e.RECT,{class:"blocklyDraggable",x:0,y:0,rx:di.BORDER_WIDTH,ry:di.BORDER_WIDTH},e),this.contentContainer=de(_e.G,{},this.svgRoot),this.focusableElement=a??this.svgRoot,this.focusableElement.setAttribute("id",this.id),y(this.background,"pointerdown",this,this.onMouseDown),y(this.focusableElement,"keydown",this,this.onKeyDown)}dispose(){He(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,di.MIN_SIZE),e.height=Math.max(e.height,di.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}onKeyDown(e){e.key==="Escape"&&this.owner&&(this.owner.setBubbleVisible(!1),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.owner))}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new ut(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),r=this.getOptimalRelativeLeft(t),a=this.getOptimalRelativeTop(t);const u={x:r,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},b={x:-this.size.width-30,y:a};a={x:e.getWidth(),y:a};var U={x:r,y:e.getHeight()};r=e.getWidth()<e.getHeight()?a:U,e=e.getWidth()<e.getHeight()?U:a,a=this.getOverlap(u,t),U=this.getOverlap(b,t);const Z=this.getOverlap(r,t);t=this.getOverlap(e,t),t=Math.max(a,U,Z,t),a===t?(this.relativeLeft=u.x,this.relativeTop=u.y):U===t?(this.relativeLeft=b.x,this.relativeTop=b.y):Z===t?(this.relativeLeft=r.x,this.relativeTop=r.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var r=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(r+this.size.width,t.left+t.width)-Math.max(r,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var r=this.anchor.x-t;r-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):r>e.right&&(t=-(e.right-this.anchor.x))}else{r=t+this.anchor.x;const a=r+this.size.width;r<e.left?t=e.left-this.anchor.x:a>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const r=this.anchor.y+t,a=r+this.size.height;return e=this.getWorkspaceViewRect(e),r<e.top?t=e.top-this.anchor.y:a>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let r=e.top+e.height,a=e.left;return e=e.left+e.width,r-=this.getScrollbarThickness(),this.workspace.RTL?a-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new ut(t,r,a,e)}getScrollbarThickness(){return kt.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,r=this.size.height/2,a=-this.relativeLeft,u=-this.relativeTop;if(t===a&&r===u)e.push("M "+t+","+r);else{u-=r,a-=t,this.workspace.RTL&&(a*=-1);var b=Math.sqrt(u*u+a*a),U=Math.acos(a/b);u<0&&(U=2*Math.PI-U);var Z=U+Math.PI/2;Z>Math.PI*2&&(Z-=Math.PI*2);var Ce=Math.sin(Z);const Ct=Math.cos(Z);let At=(this.size.width+this.size.height)/di.TAIL_THICKNESS;At=Math.min(At,this.size.width,this.size.height)/4,Z=1-di.ANCHOR_RADIUS/b,a=t+Z*a,u=r+Z*u,Z=t+At*Ct;const Jt=r+At*Ce;t-=At*Ct,r-=At*Ce,Ce=Xo(this.workspace.RTL?-di.TAIL_ANGLE:di.TAIL_ANGLE),Ce=U+Ce,Ce>Math.PI*2&&(Ce-=Math.PI*2),U=Math.sin(Ce)*b/di.TAIL_BEND,b=Math.cos(Ce)*b/di.TAIL_BEND,e.push("M"+Z+","+Jt),e.push("C"+(Z+b)+","+(Jt+U)+" "+a+","+u+" "+a+","+u),e.push("C"+a+","+u+" "+(t+b)+","+(r+U)+" "+t+","+r)}e.push("z");let je;(je=this.tail)==null||je.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&t?.lastChild!==this.svgRoot?(t?.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Me(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){ye(this)}unselect(){ye(null)}getFocusableElement(){return this.focusableElement}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.bringToFront();var e=this.getRelativeToSurfaceXY();const t=this.getSize();e=new ut(e.y,e.y+t.height,e.x,e.x+t.width),this.workspace.scrollBoundsIntoView(e)}onNodeBlur(){this.unselect()}canBeFocused(){return!0}getOwner(){return this.owner}};di=ft,ft.BORDER_WIDTH=6,ft.DOUBLE_BORDER=di.BORDER_WIDTH*2,ft.MIN_SIZE=di.DOUBLE_BORDER,ft.TAIL_THICKNESS=1,ft.TAIL_ANGLE=20,ft.TAIL_BEND=4,ft.ANCHOR_RADIUS=8;var Zi=class extends ft{constructor(e,t,r,a){super(t,r,a),this.workspace=t,this.anchor=r,this.ownerRect=a,this.autoLayout=!0,t=new ki(e),this.validateWorkspaceOptions(t),this.svgDialog=de(_e.SVG,{x:ft.BORDER_WIDTH,y:ft.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new ki(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(_e.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e?.init(this.miniWorkspace),e?.show(t.languageTree)),De(this.svgRoot,"blocklyMiniWorkspaceBubble"),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let u,b;(u=this.miniWorkspace.getFlyout())==null||(b=u.getWorkspace())==null||b.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress)for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(t.y<20&&e.moveBy(0,20-t.y),e.RTL){let r=-20;const a=this.miniWorkspace.getFlyout();a&&(r-=a.getWidth()),t.x>r&&e.moveBy(r-t.x,0)}else t.x<20&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress){this.autoLayout&&(this.autoLayout=!this.miniWorkspace.keyboardMoveInProgress);var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<Zi.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<Zi.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new ct(t.width+ft.DOUBLE_BORDER,t.height+ft.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+Zi.MARGIN;e=e.height+Zi.MARGIN;const r=this.miniWorkspace.getFlyout();if(r){const a=r.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,a.height+20),t+=r.getWidth()}return new ct(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const r of e.getAllBlocks(!1))r.setStyle(r.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Zi.MINIMUM_VIEW_CHANGE=10,Zi.MARGIN=ft.DOUBLE_BORDER*3;var mo=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new Me(0,0),this.workspaceLocation=new Me(0,0),this.svgRoot=null,this.tooltip=e,this.id=V()}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=de(_e.G,{class:"blocklyIconGroup",id:this.id}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),y(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,Hr(this.svgRoot)}}dispose(){il(this.svgRoot),He(this.svgRoot)}getWeight(){return-1}getSize(){return new ct(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",In(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=Me.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}getFocusableElement(){const e=this.svgRoot;if(!e)throw Error("Attempting to focus uninitialized icon.");return e}getFocusableTree(){return this.sourceBlock.workspace}onNodeFocus(){var e=this.sourceBlock.getBoundingRectangle();e=new ut(e.top+this.offsetInBlock.y,e.top+this.offsetInBlock.y+this.getSize().height,e.left+this.offsetInBlock.x,e.left+this.offsetInBlock.x+this.getSize().width),this.sourceBlock.workspace.scrollBoundsIntoView(e)}onNodeBlur(){}canBeFocused(){return!0}getSourceBlock(){return this.sourceBlock}},ea,ta;ea=17,ta=16,o.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends mo{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),de(_e.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),de(_e.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),de(_e.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),De(this.svgRoot,"blocklyMutatorIcon"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return o.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new ct(ea,ea)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.getColour());let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const t=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){if(t.bubbleIsVisible()!==e){if(yield Ci(),e){t.miniWorkspaceBubble=new Zi(t.getMiniWorkspaceConfig(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour(),t.createRootBlock(),t.addSaveConnectionsListener();let r;(r=t.miniWorkspaceBubble)==null||r.addWorkspaceChangeListener(t.createMiniWorkspaceChangeListener())}else{let r;(r=t.miniWorkspaceBubble)==null||r.dispose(),t.miniWorkspaceBubble=null,t.saveConnectionsListener&&t.sourceBlock.workspace.removeChangeListener(t.saveConnectionsListener),t.saveConnectionsListener=null}be(new(Fe(pe.BUBBLE_OPEN))(t.sourceBlock,e,"mutator"))}})}getBubble(){return this.miniWorkspaceBubble}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(r=>({kind:"block",type:r}))}),t}getAnchorLocation(){const e=ea/2;return Me.sum(this.workspaceLocation,new Me(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new ut(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,r,a,u;e=(u=(t=this.miniWorkspaceBubble)==null||(r=t.getWorkspace())==null||(a=r.getFlyout())==null?void 0:a.getWidth())!=null?u:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+ta):ta,ta)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{o.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||K(e)||re(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=o.getGroup$$module$build$src$core$events$utils();e||o.setGroup$$module$build$src$core$events$utils(!0);var t=Fn.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var r=Fn.getExtraBlockState_(this.sourceBlock);t!==r&&be(new(Fe(pe.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,t,r)),o.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Ut.MUTATOR,o.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,o.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Sr=Object.create(null),nT={allExtensions:Sr};o.register$$module$build$src$core$extensions("parent_tooltip_when_inline",G_);var Ai={TEST_ONLY:nT};Ai.apply=os,Ai.buildTooltipForDropdown=o.buildTooltipForDropdown$$module$build$src$core$extensions,Ai.buildTooltipWithFieldText=o.buildTooltipWithFieldText$$module$build$src$core$extensions,Ai.isRegistered=Ol,Ai.register=o.register$$module$build$src$core$extensions,Ai.registerMixin=o.registerMixin$$module$build$src$core$extensions,Ai.registerMutator=o.registerMutator$$module$build$src$core$extensions,Ai.runAfterPageLoad=V_,Ai.unregister=x_;var gt;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(gt||(gt={}));var Qi={};Qi.arc=Lt,Qi.curve=oi,Qi.line=sr,Qi.lineOnAxis=Ze,Qi.lineTo=Di,Qi.moveBy=yt,Qi.moveTo=Xt,Qi.point=qe;var vt={};vt.Coordinate=Me,vt.KeyCodes=gt,vt.Rect=ut,vt.Size=ct,vt.Svg=_e,vt.aria=oo,vt.array=jh,vt.browserEvents=Xi,vt.colour=gi,vt.deprecation=Ap,vt.dom=Kt,vt.extensions=Ai,vt.idGenerator=Cu,vt.math=xs,vt.object=Xh,vt.parsing=po,vt.string=mr,vt.style=dn,vt.svgMath=Ln,vt.svgPaths=Qi,vt.toolbox=_n,vt.userAgent=Wm,vt.xml=_r;var ia=class extends ft{constructor(e,t,r,a){super(e,t,r,void 0,a),this.workspace=e,this.anchor=t,this.ownerRect=r,this.owner=a,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.sizeChangeListeners=[],this.locationChangeListeners=[],this.DEFAULT_SIZE=new ct(160+ft.DOUBLE_BORDER,80+ft.DOUBLE_BORDER),this.MIN_SIZE=new ct(45+ft.DOUBLE_BORDER,20+ft.DOUBLE_BORDER),this.editable=!0,De(this.svgRoot,"blocklyTextInputBubble"),this.editor=new qs(e,this.id,()=>{o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}),this.contentContainer.appendChild(this.editor.getDom()),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.editor.getText()}setText(e){this.editor.setText(e)}setEditable(e){this.editable=e,this.editor.setEditable(e)}isEditable(){return this.editable}addTextChangeListener(e){this.editor.addTextChangeListener(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}addLocationChangeListener(e){this.locationChangeListeners.push(e)}createResizeHandle(e,t){return e=de(_e.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),y(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const r=e.width-ft.DOUBLE_BORDER,a=e.height-ft.DOUBLE_BORDER;this.editor.updateSize(new ct(r,a),new ct(0,0)),this.editor.getDom().setAttribute("x",`${ft.DOUBLE_BORDER/2}`),this.editor.getDom().setAttribute("y",`${ft.DOUBLE_BORDER/2}`),this.resizeGroup.setAttribute("y",`${a}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-ft.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${r}`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}moveDuringDrag(e){super.moveDuringDrag(e),this.onLocationChange()}setPositionRelativeToAnchor(e,t){super.setPositionRelativeToAnchor(e,t),this.onLocationChange()}positionByRect(e=new ut(0,0,0,0)){super.positionByRect(e),this.onLocationChange()}onResizePointerDown(e){this.bringToFront(),p(e)||(is(this.workspace,e,new Me(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=y(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=y(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){P(),this.resizePointerUpListener&&(L(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(L(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=ns(this.workspace,e),this.setSize(new ct(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}onLocationChange(){for(const e of this.locationChangeListeners)e()}getEditor(){return this.editor}};ee(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var Ke;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Ke||(Ke={}));var Ar=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const r=this.calculateIndexForYPos(t);if(r>=this.connections.length)return-1;t=e.y;let a=r;for(;a>=0&&this.connections[a].y===t;){if(this.connections[a]===e)return a;a--}for(a=r;a<this.connections.length&&this.connections[a].y===t;){if(this.connections[a]===e)return a;a++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,r=this.connections.length;for(;t<r;){const a=Math.floor((t+r)/2);if(this.connections[a].y<e)t=a+1;else if(this.connections[a].y>e)r=a;else{t=a;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function r(je){const Ct=u-a[je].x,At=b-a[je].y;return Math.sqrt(Ct*Ct+At*At)<=t&&Ce.push(a[je]),At<t}const a=this.connections,u=e.x,b=e.y;e=0;let U=a.length-2,Z=U;for(;e<Z;)a[Z].y<b?e=Z:U=Z,Z=Math.floor((e+U)/2);const Ce=[];if(U=e=Z,a.length){for(;e>=0&&r(e);)e--;do U++;while(U<a.length&&r(U))}return Ce}isInYRange(e,t,r){return Math.abs(this.connections[e].y-t)<=r}searchForClosest(e,t,r){if(!this.connections.length)return{connection:null,radius:t};const a=e.y,u=e.x;e.x=u+r.x,e.y=a+r.y;var b=this.calculateIndexForYPos(e.y);r=null;let U=t,Z,Ce=b-1;for(;Ce>=0&&this.isInYRange(Ce,e.y,t);)Z=this.connections[Ce],this.connectionChecker.canConnect(e,Z,!0,U)&&(r=Z,U=Z.distanceFrom(e)),Ce--;for(;b<this.connections.length&&this.isInYRange(b,e.y,t);)Z=this.connections[b],this.connectionChecker.canConnect(e,Z,!0,U)&&(r=Z,U=Z.distanceFrom(e)),b++;return e.x=u,e.y=a,{connection:r,radius:U}}static init(e){const t=[];return t[Ke.INPUT_VALUE]=new Ar(e),t[Ke.OUTPUT_VALUE]=new Ar(e),t[Ke.NEXT_STATEMENT]=new Ar(e),t[Ke.PREVIOUS_STATEMENT]=new Ar(e),t}},cc=class extends Li{constructor(e,t,r){super(r),this.type=pe.SELECTED,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new cc),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};s(Re.EVENT,pe.SELECTED,cc);var dc=class extends xn{constructor(e){if(super(e),this.type=pe.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=zr(e),this.ids=Le(e),this.wasShadow=e.isShadow(),this.oldJson=pi(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Ri(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new dc),t.oldXml=o.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const r=this.ids[e],a=t.getBlockById(r);a?a.dispose(!1):r===this.blockId&&console.warn("Can't delete non-existent block: "+r)}else sn(this.oldJson,t)}};s(Re.EVENT,pe.BLOCK_DELETE,dc);var pt=class{constructor(e,t){if(this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e,e.id.includes("_connection"))throw Error(`Connection ID indicator is contained in block ID. This will cause problems with focus: ${e.id}.`);this.id=`${e.id}_connection_${V()}`}connect_(e){const t=Ke.INPUT_VALUE,r=this.getSourceBlock();var a=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let u;if(this.isConnected()){const U=this.stashShadowState(),Z=this.targetBlock();Z.isShadow()?Z.dispose(!1):(this.disconnectInternal(),u=Z),this.applyShadowState(U)}let b;ue()&&(b=new(Fe(pe.BLOCK_MOVE))(a),b.setReason(["connect"])),W_(this,e),a.setParent(r),b&&(b.recordNew(),be(b)),u&&(e=this.type===t?u.outputConnection:u.previousConnection)&&((a=pt.getConnectionForOrphanedConnection(a,e))?e.connect(a):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Ke.INPUT_VALUE||this.type===Ke.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=o.getGroup$$module$build$src$core$events$utils();t||o.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),o.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:r}=this.getParentAndChildConnections();if(!t||!r)throw Error("Source connection not connected.");const a=o.getGroup$$module$build$src$core$events$utils();a||o.setGroup$$module$build$src$core$events$utils(!0);let u;ue()&&(u=new(Fe(pe.BLOCK_MOVE))(r.getSourceBlock()),u.setReason(["disconnect"]));const b=this.targetConnection;b&&(b.targetConnection=null),this.targetConnection=null,e&&r.getSourceBlock().setParent(null),u&&(u.recordNew(),be(u)),r.getSourceBlock().isShadow()||t.respawnShadow_(),o.setGroup$$module$build$src$core$events$utils(a)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var r;return t=(r=e.getInput(t))==null?void 0:r.connection,r=this.targetBlock(),r&&r!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?an(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?pi(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let r=0;r<t.length;r++)if(t[r].connection===this){e=t[r];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let r=0,a;a=e.inputList[r];r++)if(a.connection===this){t=a;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var t=this.getSourceBlock();const r=this.getShadowState(),a=this.getShadowDom();if(t.isDeadOrDying()||!r&&!a)return null;if(r)return t=Zn(r,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(a){if(t=yn(a,t.workspace),e)if(this.type===Ke.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Ke.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=an(e),this.shadowState=pi(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===Ke.OUTPUT_VALUE)return K_(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const r=t.getConnectionChecker();return e&&r.canConnect(t,e,!1)?e:null}};pt.CAN_CONNECT=0,pt.REASON_SELF_CONNECTION=1,pt.REASON_WRONG_TYPE=2,pt.REASON_TARGET_NULL=3,pt.REASON_CHECKS_FAILED=4,pt.REASON_DIFFERENT_WORKSPACES=5,pt.REASON_SHADOW_PARENT=6,pt.REASON_DRAG_CHECKS_FAILED=7,pt.REASON_PREVIOUS_AND_OUTPUT=8;var jp=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},qp={};qp.DuplicateIconType=jp,(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(o.Align$$module$build$src$core$inputs$align||(o.Align$$module$build$src$core$inputs$align={})),o.Align$$module$build$src$core$inputs$align;var Gn=class extends Tt{constructor(e,t,r){super(Tt.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==Tt.SKIP_SETUP&&(r?this.configure_(r):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&De(this.getTextElement(),this.class),this.fieldGroup_&&De(this.fieldGroup_,"blocklyLabelField")}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&Se(this.textElement_,this.class),e&&De(this.textElement_,e)),this.class=e}static fromJson(e){return new this(Dt(e.text),void 0,e)}};Ni("field_label",Gn),Gn.prototype.DEFAULT_VALUE="";var Jp=30,Wn=[];Wn[Ke.INPUT_VALUE]=Ke.OUTPUT_VALUE,Wn[Ke.OUTPUT_VALUE]=Ke.INPUT_VALUE,Wn[Ke.NEXT_STATEMENT]=Ke.PREVIOUS_STATEMENT,Wn[Ke.PREVIOUS_STATEMENT]=Ke.NEXT_STATEMENT;var _c="RENAME_VARIABLE_ID",hc="DELETE_VARIABLE_ID",Zp=10,Yt=class extends pt{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[Wn[t]],this.offsetInBlock=new Me(0,0),this.trackedState=Yt.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Yt.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,t;(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e,t=!1){if(!this.sourceBlock_.workspace.isDragging()){var r=o.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Zp),a=o.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Zp),u=e.sourceBlock_.getRootBlock(),b=this.sourceBlock_.getRootBlock();if(!u.isInFlyout&&!b.isInFlyout){var U=!0;if(b.isMovable())u.isMovable()&&t&&(a=-a);else if(u.isMovable())U=!1,r=-r,a=-a;else return;t=U?e:this,e=U?this:e,u=U?b:u,u.RTL&&(r=-r),u.moveBy(t.x+r-e.x,t.y+a-e.y,["bump"])}}}moveTo(e,t){let r=!1;return this.trackedState===Yt.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=Yt.TrackedState.TRACKED,r=!0):this.trackedState===Yt.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),r=!0),this.x=e,this.y=t,r}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=Me.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0;const e=this.findHighlightSvg();e&&(e.style.display="")}unhighlight(){this.highlighted=!1;const e=this.findHighlightSvg();e&&(e.style.display="none")}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Yt.TrackedState.TRACKED||!e&&this.trackedState===Yt.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Yt.TrackedState.TRACKED):(this.trackedState===Yt.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Yt.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const r=e[t],a=r.getConnections_(!0);for(let u=0;u<a.length;u++)a[u].setTracking(!1);for(const u of r.getIcons())In(u)&&u.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Ke.INPUT_VALUE&&this.type!==Ke.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let r;t.isCollapsed()?(r=[],t.outputConnection&&r.push(t.outputConnection),t.nextConnection&&r.push(t.nextConnection),t.previousConnection&&r.push(t.previousConnection)):r=t.getConnections_(!0);for(let a=0;a<r.length;a++)e.push(...r[a].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(ve()){const r=o.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(o.setGroup$$module$build$src$core$events$utils(r),this.bumpAwayFrom(e),o.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),o.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:r}=this.getParentAndChildConnections();if(t&&r){var a=o.getGroup$$module$build$src$core$events$utils();a||o.setGroup$$module$build$src$core$events$utils(!0);var u=t.getSourceBlock(),b=r.getSourceBlock();super.disconnectInternal(e),u.queueRender(),b.updateDisabled(),b.queueRender(),b.getSvgRoot().style.display="block",o.setGroup$$module$build$src$core$events$utils(a)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.updateDisabled(),e.updateDisabled(),e.queueRender(),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}showContextMenu(e){const t=_t.registry.getContextMenuOptions({focusedNode:this},e);if(t.length){var r=this.getSourceBlock(),a=r.workspace;if(e instanceof PointerEvent)var u=new Me(e.clientX,e.clientY);else u=new Me(this.x,this.y),u=Ft(a,u).translate(r.RTL?-5:5,5);rr(e,t,r.RTL,a,u)}}getFocusableElement(){const e=this.findHighlightSvg();if(e)return e;throw Error("No highlight SVG found corresponding to this connection.")}getFocusableTree(){return this.getSourceBlock().workspace}onNodeFocus(){this.highlight(),this.getSourceBlock().workspace.scrollBoundsIntoView(this.getSourceBlock().getBoundingRectangleWithoutChildren())}onNodeBlur(){this.unhighlight()}canBeFocused(){return!0}findHighlightSvg(){return document.getElementById(this.id)}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Yt||(Yt={})),Yt.TrackedState;var br=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=o.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,r){if(e<0||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&r)&&(typeof t=="string"&&(t=o.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(t),t.name=r,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,t){for(let r=0,a;a=this.fieldRow[r];r++)if(a.name===e)return a.dispose(),this.fieldRow.splice(r,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let r=0,a;a=this.fieldRow[r];r++)a.setVisible(e);if(this.connection&&this.connection instanceof Yt){e?t=this.connection.startTrackingAll():this.connection.stopTrackingAll();const r=this.connection.targetBlock();r&&(r.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},wi=class extends br{constructor(e,t){super(e,t),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},tn=class extends br{constructor(e,t){super(e,t),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},_i=class extends br{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Ke.NEXT_STATEMENT)}},Qp;o.ValueInput$$module$build$src$core$inputs$value_input=class extends br{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Ke.INPUT_VALUE)}},Qp={},Qp.ValueInput=o.ValueInput$$module$build$src$core$inputs$value_input;var Ir=class{constructor(e,t,r){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=r&&!e.getBlockById(r)?r:C(),e.setBlockById(this.id,this),this.xy=new Me(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,r=bt[t],!r||typeof r!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,r)}e.addTopBlock(this),e.addTypedBlock(this),new.target===Ir&&this.doInit_()}doInit_(){const e=o.getGroup$$module$build$src$core$events$utils();e||o.setGroup$$module$build$src$core$events$utils(!0);const t=ve();try{typeof this.init=="function"&&(o.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),o.setRecordUndo$$module$build$src$core$events$utils(t)),ue()&&be(new(Fe(pe.BLOCK_CREATE))(this))}finally{o.setGroup$$module$build$src$core$events$utils(e),o.setRecordUndo$$module$build$src$core$events$utils(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),ue()&&be(new(Fe(pe.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let t=null,r;(r=this.outputConnection)!=null&&r.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e?.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e?.onFailedConnect(t))}getOnlyValueConnection(){let e=null;for(let t=0;t<this.inputList.length;t++){const r=this.inputList[t].connection;if(r&&r.type===Ke.INPUT_VALUE&&r.targetConnection){if(e)return null;e=r}}return e}unplugFromStack(e){let t=null,r;if((r=this.previousConnection)!=null&&r.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),e){for(e=this.getNextBlock();e&&(e.isShadow()||!e.isMovable());)e=e.getNextBlock();if(e){var a,u,b,U;e=(U=(a=e.previousConnection)==null||(u=a.targetBlock())==null||(b=u.nextConnection)==null?void 0:b.targetConnection)!=null?U:null,e?.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,r;r=this.inputList[t];t++)r.connection&&e.push(r.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const r=t.targetBlock();if(!r||e&&r.isShadow())return t;t=r.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,r;r=this.inputList[t];t++)if(r.connection&&r.connection.targetBlock()===e)return r;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let r=0,a;a=this.inputList[r];r++)if(a.connection){var t=a.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),r=!!t;if(r&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!r&&e)throw Error("Block not connected to new parent.");if(r&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?q(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],r=this.getChildren(e);for(let a,u=0;a=r[u];u++)t.push(...a.getDescendants(e));return t}isDeletable(){return this.deletable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(_(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(const t of this.getFields())t.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||e.fieldRow.length>1)return!1;return!0}getMatchingConnection(e,t){const r=this.getConnections_(!0);if(e=e.getConnections_(!0),r.length!==e.length)throw Error("Connection lists did not match in length.");for(let a=0;a<e.length;a++)if(e[a]===t)return r[a];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return er(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=tr(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(const t of this.getFields())if(t.name===e)return t;return null}*getFields(){for(const e of this.inputList)for(const t of e.fieldRow)yield t}getVars(){const e=[];for(const t of this.getFields())t.referencesVariables()&&e.push(t.getValue());return e}getVarModels(){const e=[];for(const t of this.getFields())if(t.referencesVariables()){const r=this.workspace.getVariableById(t.getValue());r&&e.push(r)}return e}updateVarName(e){for(const t of this.getFields())t.referencesVariables()&&e.getId()===t.getValue()&&t.refreshVariableName()}renameVarById(e,t){for(const r of this.getFields())r.referencesVariables()&&e===r.getValue()&&r.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const r=this.getField(t);if(!r)throw Error('Field "'+t+'" not found.');r.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Ke.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Ke.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Ke.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(be(new(Fe(pe.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof wi&&this.inputList[e]instanceof wi)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof o.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof wi)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof tn)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}setDisabledReason(e,t){e||this.workspace.options.disable||!this.hasDisabledReason(mi)||t==mi||this.setDisabledReason(!1,mi),this.disabledReasons.has(t)!==e&&(e?this.disabledReasons.add(t):this.disabledReasons.delete(t),e=new(Fe(pe.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(t),be(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(be(new(Fe(pe.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let a=2;a<t.length;a++)t[a-2]==="("&&t[a]===")"&&(t[a-2]=t[a-1],t.splice(a-1,2));let r="";return t=t.reduce((a,u)=>(a=a+(r==="("||u===")"?"":" ")+u,r=u[u.length-1],a),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const a of this.inputList)if(a.name!=so){for(const u of a.fieldRow)t.push(u.getText());if(a.connection){const u=a.connection.targetBlock();if(u){var r=a.connection;let b=r.getCheck();!b&&r.targetConnection&&(b=r.targetConnection.getCheck()),(r=!!b&&(b.includes("Boolean")||b.includes("Number")))&&t.push("("),t.push(...u.toTokens(e)),r&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new o.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new _i(e,this))}appendDummyInput(e=""){return this.appendInput(new wi(e,this))}appendEndRowInput(e=""){return this.appendInput(new tn(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=N(Re.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var r=0;e["args"+r];){if(e["message"+r]===void 0)throw Error(t+`args${r} must have a corresponding message (message${r}).`);r++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,t):this.jsonInitColour(e,t),r=0;e["message"+r]!==void 0;)this.interpolate(e["message"+r],e["args"+r]||[],e["implicitAlign"+r]||e["lastDummyAlign"+r],t),r++;if(e.inputsInline!==void 0&&(o.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),o.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(r=Dt(e.tooltip),this.setTooltip(r)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(r=Dt(e.helpUrl),this.setHelpUrl(r)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&os(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)os(e[t],this,!1)}jsonInitColour(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const r in e)this[r]!==void 0&&t.push(r);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate(e,t,r,a){e=cl(e),this.validateTokens(e,t.length),t=this.interpolateArguments(e,t,r),r=[];for(let u=0,b;b=t[u];u++)if(this.isInputKeyword(b.type)){if(e=this.inputFromJson(b,a)){for(let U=0,Z;Z=r[U];U++)e.appendField(Z[0],Z[1]);r.length=0}}else(e=this.fieldFromJson(b))&&r.push([e,b.name])}validateTokens(e,t){const r=[];let a=0;for(let u=0;u<e.length;u++){const b=e[u];if(typeof b=="number"){if(b<1||b>t)throw Error('Block "'+this.type+'": Message index %'+b+" out of range.");if(r[b])throw Error('Block "'+this.type+'": Message index %'+b+" duplicated.");r[b]=!0,a++}}if(a!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments(e,t,r){const a=[];for(let b=0;b<e.length;b++){var u=e[b];if(typeof u=="number"&&(u=t[u-1]),typeof u=="string"){if(u===`
`)u={type:"input_end_row"},r&&(u.align=r);else if(u=this.stringToFieldJson(u),!u)continue}a.push(u)}return(e=a.length)&&!this.isInputKeyword(a[e-1].type)&&(e={type:"input_dummy"},r&&(e.align=r),a.push(e)),a}fieldFromJson(e){const t=o.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):t}inputFromJson(e,t){var r={LEFT:o.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:o.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:o.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:o.Align$$module$build$src$core$inputs$align.CENTRE};let a;switch(e.type){case"input_value":a=this.appendValueInput(e.name);break;case"input_statement":a=this.appendStatementInput(e.name);break;case"input_dummy":a=this.appendDummyInput(e.name);break;case"input_end_row":a=this.appendEndRowInput(e.name);break;default:a=this.appendInputFromRegistry(e.type,e.name)}return a?(e.check&&a.setCheck(e.check),e.align&&(r=r[e.align.toUpperCase()],r===void 0?console.warn(t+"Illegal align value: ",e.align):a.setAlign(r)),a):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||g(Re.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var r=-1,a=t?-1:this.inputList.length;for(let u=0,b;b=this.inputList[u];u++)if(b.name===e){if(r=u,a!==-1)break}else if(t&&b.name===t&&(a=u,r!==-1))break;if(r===-1)throw Error('Named input "'+e+'" not found.');if(a===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(r,a)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const r=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,r)}removeInput(e,t){for(let r=0,a;a=this.inputList[r];r++)if(a.name===e)return a instanceof _i&&this.statementInputCount--,a.dispose(),this.inputList.splice(r,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,r;r=this.inputList[t];t++)if(r.name===e)return r;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(Ut.COMMENT))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let r;const a=(r=(t=this.getIcon(Ut.COMMENT))==null?void 0:t.getText())!=null?r:null;if(a!==e){if(e!==null){if(t=this.getIcon(Ut.COMMENT),!t){if(t=N(Re.ICON,Ut.COMMENT.toString(),!1),!t)throw Error("No comment icon class is registered, so a comment cannot be set");if(t=new t(this),!z_(t))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");t=this.addIcon(t)}o.disable$$module$build$src$core$events$utils(),t.setText(e),o.enable$$module$build$src$core$events$utils()}else this.removeIcon(Ut.COMMENT);be(new(Fe(pe.BLOCK_CHANGE))(this,"comment",null,a,e))}}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new jp(e);return this.icons.push(e),this.icons.sort((t,r)=>t.getWeight()-r.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(r=>!r.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof Ut?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,t,r){if(this.parentBlock_)throw Error("Block has parent");const a=new(Fe(pe.BLOCK_MOVE))(this);r&&a.setReason(r),this.xy.translate(e,t),a.recordNew(),be(a)}makeConnection_(e){return new pt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let r=0,a;a=this.inputList[r];r++)if(a.connection){var t=a.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};Ir.COLLAPSED_INPUT_NAME=so,Ir.COLLAPSED_FIELD_NAME=ks;var na=null,To=null,go={};go.connectionUiEffect=Nl,go.disconnectUiEffect=Dl,go.disconnectUiStop=ar,go.disposeUiEffect=ls;var Eo=class{paste(e,t,r){if(!t.isCapacityAvailable(e.typeCounts))return null;r&&(e.blockState.x=r.x,e.blockState.y=r.y),r=r||new Me(e.blockState.x||0,e.blockState.y||0),o.disable$$module$build$src$core$events$utils();let a;try{a=sn(e.blockState,t),Y_(a,r)}finally{o.enable$$module$build$src$core$events$utils()}if(!a)return a;ue()&&!a.isShadow()&&be(new(Fe(pe.BLOCK_CREATE))(a));const u=a;return Ci().then(()=>o.getFocusManager$$module$build$src$core$focus_manager().focusNode(u)),a}};Eo.TYPE="block",xo(Eo.TYPE,new Eo);var ra={};ra.bumpIntoBounds=lr,ra.bumpIntoBoundsHandler=kl,ra.bumpTopObjectsIntoBounds=us;var ef=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new Me(0,0),this.originalEventGroup="",this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,t;return(t=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?t:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(R(Re.CONNECTION_PREVIEWER,this.workspace.options))(this.block),ht(),this.workspace.setResizesEnabled(!1),ar(),e=this.shouldHealStack(e),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.block)}}shouldHealStack(e){return!!e&&(e.altKey||e.ctrlKey||e.metaKey)}startDraggingShadow(e){const t=this.block.getParent();if(!t)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=Me.difference(t.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),t.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let t,r,a;if(this.startParentConn=(a=(t=this.block.outputConnection)==null?void 0:t.targetConnection)!=null?a:(r=this.block.previousConnection)==null?void 0:r.targetConnection,e){let u;this.startChildConn=(u=this.block.nextConnection)==null?void 0:u.targetConnection}this.block.unplug(e),Dl(this.block)}fireDragStartEvent(){const e=new(Fe(pe.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));be(e)}fireDragEndEvent(){const e=new(Fe(pe.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));be(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(Fe(pe.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),be(e)}}drag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.drag(Me.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,Me.difference(e,this.startLoc))}updateConnectionPreview(e,t){var r=this.connectionCandidate;const a=this.getConnectionCandidate(e,t);if(a){this.connectionCandidate=t=r&&this.currCandidateIsBetter(r,t,a)?r:a;var{local:u,neighbour:b}=t;t=u.type===Ke.OUTPUT_VALUE||u.type===Ke.PREVIOUS_STATEMENT;var U;if(r=b.isConnected()&&!((U=b.targetBlock())!=null&&U.isInsertionMarker()),t&&r&&!this.orphanCanConnectAtEnd(e,b.targetBlock(),u.type)){let Ce;(Ce=this.connectionPreviewer)==null||Ce.previewReplacement(u,b,b.targetBlock())}else{var Z;(Z=this.connectionPreviewer)==null||Z.previewConnection(u,b)}}else{let Ce;(Ce=this.connectionPreviewer)==null||Ce.hidePreview(),this.connectionCandidate=null}}orphanCanConnectAtEnd(e,t,r){return!!pt.getConnectionForOrphanedConnection(e,r===Ke.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,r){const{local:a,neighbour:u}=e;e=new Me(a.x,a.y);const b=new Me(u.x,u.y);return t=Me.distance(Me.sum(e,t),b),r.distance>t-o.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let r=this.getSearchRadius(),a=null;for(const u of e){const{connection:b,radius:U}=u.closest(r,t);b&&(a={local:u,neighbour:b,distance:U},r=U)}return a}getSearchRadius(){return this.connectionCandidate?o.config$$module$build$src$core$config.connectingSnapRadius:o.config$$module$build$src$core$config.snapRadius}getLocalConnections(e){const t=e.getConnections_(!1),r=e.lastConnectionInStack(!0);return r&&r!==e.nextConnection&&t.push(r),t}endDrag(e){if(this.block.isShadow()){let r;(r=this.block.getParent())==null||r.endDrag(e)}else{this.originalEventGroup=o.getGroup$$module$build$src$core$events$utils(),this.fireDragEndEvent(),this.fireMoveEvent(),nt(),ar();var t;if((t=this.connectionPreviewer)==null||t.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let r;(r=this.workspace.getLayerManager())==null||r.moveOffDragLayer(this.block,fn),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep())}}disposeStep(){const e=o.getGroup$$module$build$src$core$events$utils();o.setGroup$$module$build$src$core$events$utils(this.originalEventGroup),this.block.snapToGrid();let t;(t=this.connectionPreviewer)==null||t.dispose(),this.workspace.setResizesEnabled(!0),o.setGroup$$module$build$src$core$events$utils(e)}applyConnections(e){const{local:t,neighbour:r}=e;t.connect(r);const a=t.isSuperior()?r:t,u=this.block.getRootBlock();Ci().then(()=>{Nl(a.getSourceBlock()),setTimeout(()=>{u.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let r;(r=this.block.getParent())==null||r.revertDrag()}else{var e;(e=this.connectionPreviewer)==null||e.hidePreview(),this.connectionCandidate=null;var t;if((t=this.startChildConn)==null||t.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Ke.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Ke.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let r;(r=this.workspace.getLayerManager())==null||r.moveOffDragLayer(this.block,fn),lr(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.block.setDragging(!1),this.dragging=!1}}},tf=class extends ft{constructor(e,t,r,a){super(t,r,a),this.text=e,this.workspace=t,this.anchor=r,this.ownerRect=a,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize(),De(this.svgRoot,"blocklyTextBubble")}getText(){return this.text}setText(e){this.text=e,He(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createTextFragments(t,e),this.workspace.RTL&&this.rightAlignTextFragments(t.getBBox().width,e),t}createParagraph(e){return de(_e.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${ft.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},e)}createTextFragments(e,t){let r=1;return t.split(`
`).map(a=>{const u=de(_e.TEXT,{y:`${r}em`,x:ft.BORDER_WIDTH},e);return a=document.createTextNode(a),u.appendChild(a),r+=1,u})}rightAlignTextFragments(e,t){for(const r of t)r.setAttribute("text-anchor","start"),r.setAttribute("x",`${e+ft.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new ct(e.width+ft.BORDER_WIDTH*2,e.height+ft.BORDER_WIDTH*2),!0)}},pc=17,Mi=class extends mo{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return Mi.TYPE}initView(e){this.svgRoot||(super.initView(e),de(_e.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),de(_e.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),de(_e.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),De(this.svgRoot,"blocklyWarningIcon"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return Mi.WEIGHT}getSize(){return new ct(pc,pc)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let r;return(r=this.textBubble)==null||r.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const t=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){if(t.bubbleIsVisible()!==e){if(yield Ci(),e)t.textBubble=new tf(t.getText(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour();else{let r;(r=t.textBubble)==null||r.dispose(),t.textBubble=null}be(new(Fe(pe.BUBBLE_OPEN))(t.sourceBlock,e,"warning"))}})}getBubble(){return this.textBubble}getAnchorLocation(){const e=pc/2;return Me.sum(this.workspaceLocation,new Me(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new ut(e.y,e.y+e.height,e.x,e.x+e.width)}};Mi.TYPE=Ut.WARNING,Mi.WEIGHT=2;var St=class extends Ir{constructor(e,t,r){if(super(e,t,r),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new Me(0,0),this.dragStrategy=new ef(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=de(_e.G,{}),t&&De(this.svgGroup,t),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,Hr(e),this.svgGroup.setAttribute("data-id",this.id),e.id=V(),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),(e=this.getSvgRoot())&&y(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){this.addSelect(),ye(this)}unselect(){this.removeSelect(),ye(null)}setParent(e){var t=this.parentBlock_;if(e!==t){ht(),super.setParent(e),nt();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var a=this.getRelativeToSurfaceXY(),u=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode(),b,U=this.getSvgRoot().contains((b=u?.getFocusableElement())!=null?b:null);e?(e.getSvgRoot().appendChild(r),U&&u&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(u)):t&&(e=this.workspace.getCanvas().querySelector(".blocklyDragging"),t=e?.parentElement,b=this.workspace.getCanvas(),t===b?b.insertBefore(r,e):(b.appendChild(r),U&&u&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(u)),this.translate(a.x,a.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,r=0,a=this.getSvgRoot();if(a)do{const u=We(a);t+=u.x,r+=u.y,a=a.parentNode}while(a&&!e.hasLayer(a));return new Me(t,r)}moveBy(e,t,r){if(this.parentBlock_)throw Error("Block has parent");const a=ue();let u=null;a&&(u=new(Fe(pe.BLOCK_MOVE))(this),r&&u.setReason(r)),e=new Me(e,t),t=this.getRelativeToSurfaceXY(),e=Me.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),a&&u&&(u.recordNew(),be(u)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new Me(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const r=this.getRelativeToSurfaceXY();this.moveBy(e.x-r.x,e.y-r.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const t=this.getRelativeToSurfaceXY();let r,a;return this.RTL?(r=t.x-e.width,a=t.x):(r=t.x,a=t.x+e.width),new ut(t.y,t.y+e.height,r,a)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}childHasWarning(){const e=this.getChildren(!1);for(const t of e)if(t.getIcon(Mi.TYPE)||t.childHasWarning())return!0;return!1}updateCollapsed(){var e=this.isCollapsed();const t=so,r=ks;for(let u=0,b;b=this.inputList[u];u++)b.name!==t&&b.setVisible(!e);for(var a of this.getIcons())a.updateCollapsed();e?(De(this.svgGroup,"blocklyCollapsed"),this.childHasWarning()&&this.setWarningText(o.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,St.COLLAPSED_WARNING_ID),e=this.toString(Jp),(a=this.getField(r))?a.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new Gn(e),r)):(this.updateDisabled(),this.removeInput(t),Se(this.svgGroup,"blocklyCollapsed"),this.setWarningText(null,St.COLLAPSED_WARNING_ID))}onMouseDown(e){if(!this.workspace.isReadOnly()){var t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(e){return this.workspace.isReadOnly()||!this.contextMenu?null:(e=_t.registry.getContextMenuOptions({block:this,focusedNode:this},e),this.customContextMenu&&this.customContextMenu(e),e)}calculateContextMenuLocation(e){if(e instanceof PointerEvent)return new Me(e.clientX,e.clientY);e=Ft(this.workspace,this.getRelativeToSurfaceXY());let t,r;const a=(t=this.inputList.filter(u=>u.isVisible()).flatMap(u=>u.fieldRow).find(u=>u.isVisible()))==null||(r=t.getSvgRoot())==null?void 0:r.getBoundingClientRect();return new Me(this.RTL?e.x-5:e.x+5,(a&&a.height?a.y+a.height:e.y+this.height)+5)}showContextMenu(e){const t=this.generateContextMenu(e),r=this.calculateContextMenuLocation(e);t&&t.length&&(rr(e,t,this.RTL,this.workspace,r),ml(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(Me.sum(e,t.relativeCoords))}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const r of t.fieldRow)r.onLocationChange(e)}addClass(e){De(this.svgGroup,e)}removeClass(e){Se(this.svgGroup,e)}setDragging(e){(this.dragging=e)?(this.translation="",io.push(...this.getConnections_(!0)),this.addClass("blocklyDragging")):(io.length=0,this.removeClass("blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e?Se(this.svgGroup,"blocklyNotEditable"):De(this.svgGroup,"blocklyNotEditable"),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,t){this.disposing=!0,rl(),Xr();const r=o.getFocusManager$$module$build$src$core$focus_manager();var a,u;if(this.getSvgRoot().contains((u=(a=r.getFocusedNode())==null?void 0:a.getFocusableElement())!=null?u:null)){if(a=this.getParent(),!a){let b;if(u=(b=this.outputConnection)!=null?b:this.previousConnection){let U;a=(U=u.closest(0,new Me(0,0)).connection)==null?void 0:U.getSourceBlock()}}a?r.focusNode(a):setTimeout(()=>r.focusTree(this.workspace),0)}t&&(this.unplug(e),ls(this)),super.dispose(!!e),He(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===this&&this.workspace.cancelCurrentGesture(),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(o.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),o.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(e=!1){return this.isInsertionMarker_?null:{paster:Eo.TYPE,blockState:pi(this,{addCoordinates:!0,addNextBlocks:e,saveIds:!1}),typeCounts:_(this,!0)}}applyColour(){var e,t;for((t=(e=this.pathObject).applyColour)==null||t.call(e,this),e=this.getIcons(),t=0;t<e.length;t++)e[t].applyColour();for(const r of this.getFields())r.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var r of this.warningTextDb.values())clearTimeout(r);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))},100));else if(this.isInFlyout&&(e=null),r=this.getIcon(Mi.TYPE),e){let a=this.getSurroundParent(),u=null;for(;a;)a.isCollapsed()&&(u=a),a=a.getSurroundParent();u&&u.setWarningText(o.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,St.COLLAPSED_WARNING_ID),r?r.addMessage(e,t):this.addIcon(new Mi(this).addMessage(e,t))}else r&&(t?(r.addMessage("",t),r.getText()||this.removeIcon(Mi.TYPE)):this.removeIcon(Mi.TYPE))}setMutator(e){this.removeIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof o.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),t}setDisabledReason(e,t){const r=this.isEnabled();super.setDisabledReason(e,t),this.isEnabled()===r||this.getInheritedDisabled()||this.updateDisabled()}setDeletable(e){super.setDeletable(e),e?Se(this.svgGroup,"blocklyNotDeletable"):De(this.svgGroup,"blocklyNotDeletable")}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_);let t,r;(r=(t=this.pathObject).setStyle)==null||r.call(t,e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_&&Se(this.svgGroup,this.styleName_),t){this.hat=t.hat;let r,a;(a=(r=this.pathObject).setStyle)==null||a.call(r,t),this.colour_=t.colourPrimary,this.style=t,this.applyColour(),De(this.svgGroup,e),this.styleName_=e}else throw Error("Invalid style name: "+e)}getStyle(){return this.style}bringToFront(e=!1){const t=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();let r=this;if(!r.isDeadOrDying()){do{const a=r.getSvgRoot(),u=a.parentNode,b=u.childNodes;if(b[b.length-1]!==a&&u.appendChild(a),e)break;r=r.getParent()}while(r);t&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(t)}}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.queueRender()}setNextStatement(e,t){super.setNextStatement(e,t),this.queueRender()}setOutput(e,t){super.setOutput(e,t),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,t){return e=super.removeInput(e,t),this.queueRender(),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var r=this.inputList[t].connection;r&&(r.setTracking(e),(r=r.targetBlock())&&r.setConnectionTracking(e))}}getConnections_(e){const t=[];if(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)for(let r=0,a;a=this.inputList[r];r++)a.connection&&t.push(a.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new Yt(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let r;(r=t.targetBlock())==null||r.bumpNeighbours()}for(const r of t.neighbours(o.config$$module$build$src$core$config.snapRadius))r.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&r.isConnected()||(t.isSuperior()?r.bumpAwayFrom(t,!1):t.bumpAwayFrom(r,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,t,r){if(e.type===Ke.NEXT_STATEMENT||e.type===Ke.INPUT_VALUE){let a=t.x;t=t.y,a+=r.x-e.getOffsetInBlock().x,t+=r.y-e.getOffsetInBlock().y,this.moveBy(a,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return Oa(this)}render(){this.queueRender(),on()}renderEfficiently(){ht(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),nt()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}getHeightWidth(){let e=this.height,t=this.width;var r=this.getNextBlock();if(r){r=r.getHeightWidth();const a=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=r.height-a,t=Math.max(t,r.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}getDragStrategy(){return this.dragStrategy}setDragStrategy(e){this.dragStrategy=e}isCopyable(){return this.isOwnDeletable()&&this.isOwnMovable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,t){this.dragStrategy.drag(e,t)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},pi(this)),t=new Set(["id","height","width","pinned","enabled"]),r=function(a){for(const u in a)t.has(u)?delete a[u]:typeof a[u]=="object"&&r(a[u])};return r(e),[e]}jsonInit(e){super.jsonInit(e),e.classes&&this.addClass(Array.isArray(e.classes)?e.classes.join(" "):e.classes)}getFocusableElement(){return this.pathObject.svgPath}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.workspace.scrollBoundsIntoView(this.getBoundingRectangleWithoutChildren())}onNodeBlur(){this.unselect()}canBeFocused(){return!0}};St.INLINE=-1,St.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var nf=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},oa=class extends nf{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof St?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(fi(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},Or=class{constructor(e,t){this.element=e,this.type=t}getElement(){return this.element}getType(){return this.type}},fc=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,r=0;return e&&(t=e.getWidth(),r=e.getHeight()),new ct(t,r)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const r=this.getToolboxMetrics(),a=this.getFlyoutMetrics(),u=!!this.workspace_.getToolbox();var b;const U=!((b=this.workspace_.getFlyout())!=null&&b.autoClose);b=u?r.position:a.position;const Z=b===dt.TOP;return b===dt.LEFT&&(u&&(e+=r.width),U&&(e+=a.width)),Z&&(u&&(t+=r.height),U&&(t+=a.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),r=this.getToolboxMetrics(),a=this.getFlyoutMetrics(),u=!!this.workspace_.getToolbox();var b;const U=!((b=this.workspace_.getFlyout())!=null&&b.autoClose);b=u?r.position:a.position;const Z=b===dt.LEFT||b===dt.RIGHT;return(b===dt.TOP||b===dt.BOTTOM)&&(u&&(t.height-=r.height),U&&(t.height-=a.height)),Z&&(u&&(t.width-=r.width),U&&(t.width-=a.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const a={};return r||(a.top=e.top,a.bottom=e.top+e.height),t||(a.left=e.left,a.right=e.left+e.width),a}getPaddedContent_(e,t){const r=t.top+t.height,a=t.left+t.width,u=e.width;e=e.height;const b=u/2,U=e/2;return{top:Math.min(t.top-U,r-e),bottom:Math.max(r+U,t.top+e),left:Math.min(t.left-b,a-u),right:Math.max(a+b,t.left+u)}}getScrollMetrics(e,t,r){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var a=r||this.getContentMetrics();r=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,a),a=r.top!==void 0?r.top:t.top;const u=r.left!==void 0?r.left:t.left;return{top:a/e,left:u/e,width:((r.right!==void 0?r.right:t.right)-u)/e,height:((r.bottom!==void 0?r.bottom:t.bottom)-a)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),a=this.getAbsoluteMetrics(),u=this.getViewMetrics(),b=this.getContentMetrics(),U=this.getScrollMetrics(!1,u,b);return{contentHeight:b.height,contentWidth:b.width,contentTop:b.top,contentLeft:b.left,scrollHeight:U.height,scrollWidth:U.width,scrollTop:U.top,scrollLeft:U.left,viewHeight:u.height,viewWidth:u.width,viewTop:u.top,viewLeft:u.left,absoluteTop:a.top,absoluteLeft:a.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};s(Re.METRICS_MANAGER,si,fc);var rf=class extends fc{constructor(e,t){super(e),this.flyout_=t}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,r){return t=r||this.getContentMetrics(),r=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*r)/e,width:(t.width+t.left+r)/e,top:0,left:0}}},ri=class{constructor(e,t,r,a){this.workspace=e,this.targetWorkspace=t,this.isFlyoutLabel=a,this.height=this.width=0,this.cursorSvg=this.svgText=null,this.text=r.text,this.position=new Me(0,0),this.callbackKey=r.callbackKey||r.callbackkey,this.cssClass=r["web-class"]||null,this.info=r,e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton",this.cssClass&&(e+=" "+this.cssClass),this.id=V(),this.svgGroup=de(_e.G,{id:this.id,class:e},this.workspace.getCanvas());let u;this.isFlyoutLabel||(u=de(_e.RECT,{class:"blocklyFlyoutButtonShadow",rx:ri.BORDER_RADIUS,ry:ri.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=de(_e.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:ri.BORDER_RADIUS,ry:ri.BORDER_RADIUS},this.svgGroup),t=de(_e.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup),r=Dt(this.text),this.workspace.RTL&&(r+="‏"),t.textContent=r,this.isFlyoutLabel&&(this.svgText=t,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill")),a=Nt(t,"fontSize");const b=Nt(t,"fontWeight"),U=Nt(t,"fontFamily");if(this.width=it(t,a,b,U),r=S(r,a,b,U),this.height=this.height||r.height,!this.isFlyoutLabel){this.width+=2*ri.TEXT_MARGIN_X,this.height+=2*ri.TEXT_MARGIN_Y;let Z;(Z=u)==null||Z.setAttribute("width",String(this.width));let Ce;(Ce=u)==null||Ce.setAttribute("height",String(this.height))}e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),t.setAttribute("x",String(this.width/2)),t.setAttribute("y",String(this.height/2-r.height/2+r.baseline)),this.updateTransform(),this.onMouseDownWrapper=y(this.svgGroup,"pointerdown",this,this.onMouseDown),this.onMouseUpWrapper=y(this.svgGroup,"pointerup",this,this.onMouseUp)}createDom(){return this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}moveBy(e,t,r){this.moveTo(this.position.x+e,this.position.y+t)}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getBoundingRectangle(){return new ut(this.position.y,this.position.y+this.height,this.position.x,this.position.x+this.width)}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){L(this.onMouseDownWrapper),L(this.onMouseUpWrapper),this.svgGroup&&He(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}onMouseDown(e){const t=this.targetWorkspace.getGesture(e),r=this.targetWorkspace.getFlyout();t&&r&&t.handleFlyoutStart(e,r)}getSvgRoot(){return this.svgGroup}getFocusableElement(){return this.svgGroup}getFocusableTree(){return this.workspace}onNodeFocus(){var e=this.getPosition();e=new ut(e.y,e.y+this.height,e.x,e.x+this.width),this.workspace.scrollBoundsIntoView(e)}onNodeBlur(){}canBeFocused(){return!0}};ri.TEXT_MARGIN_X=5,ri.TEXT_MARGIN_Y=2,ri.BORDER_RADIUS=4,ee(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var of=class{getFirstChild(e){return null}getParent(e){return e.getWorkspace()}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof ri}},sf=class{constructor(e,t){this.policy=e,this.flyout=t}getFirstChild(e){return null}getParent(e){return this.policy.getParent(e)}getNextSibling(e){const t=this.flyout.getContents();if(!t)return null;let r=t.findIndex(a=>a.getElement()===e);return r===-1?null:(r++,r>=t.length&&(r=0),t[r].getElement())}getPreviousSibling(e){const t=this.flyout.getContents();if(!t)return null;let r=t.findIndex(a=>a.getElement()===e);return r===-1?null:(r--,r<0&&(r=t.length-1),t[r].getElement())}isNavigable(e){return this.policy.isNavigable(e)}isApplicable(e){return this.policy.isApplicable(e)}},sa=class{constructor(e,t){this.gap=e,this.axis=t,this.y=this.x=0}getBoundingRectangle(){switch(this.axis){case"x":return new ut(this.y,this.y,this.x,this.x+this.gap);case"y":return new ut(this.y,this.y+this.gap,this.x,this.x)}}moveBy(e,t,r){this.x+=e,this.y+=t}isNavigable(){return!1}getFocusableElement(){throw Error("Cannot be focused")}getFocusableTree(){throw Error("Cannot be focused")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}},af=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return!1}isApplicable(e){return e instanceof sa}},rT=class{getFirstChild(e){return e.getEditor()}getParent(e){let t;return(t=e.getOwner())!=null?t:null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof ia}},lf=class{getFirstChild(e){return wl(e,!0)[0]}getParent(e){var t;if((t=e.previousConnection)!=null&&t.targetBlock()){if(t=e.getSurroundParent())return t}else{let r;if((r=e.outputConnection)!=null&&r.targetBlock())return e.outputConnection.targetBlock()}return e.workspace}getNextSibling(e){let t;if((t=e.nextConnection)!=null&&t.targetBlock()){let a;return(a=e.nextConnection)==null?void 0:a.targetBlock()}let r;return(r=e.outputConnection)!=null&&r.targetBlock()?Ei(e,1):e.getSurroundParent()?Ei(e.getTopStackBlock(),1):this.getParent(e)instanceof ti?ur(e,1):null}getPreviousSibling(e){let t;if((t=e.previousConnection)!=null&&t.targetBlock()){let a;return(a=e.previousConnection)==null?void 0:a.targetBlock()}let r;return(r=e.outputConnection)!=null&&r.targetBlock()?Ei(e,-1):this.getParent(e)instanceof ti?ur(e,-1):null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof St}},oT=class{getFirstChild(e){return null}getParent(e){return e.getCommentView().workspace.getCommentById(e.getCommentView().commentId)}getNextSibling(e){const t=e.getCommentView().getCommentBarButtons();return e=t.indexOf(e),e>=0&&e+1<t.length?t[e+1]:null}getPreviousSibling(e){const t=e.getCommentView().getCommentBarButtons();return e=t.indexOf(e),e>0?t[e-1]:null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof Ys}},sT=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof qs}},uf=class{getFirstChild(e){return e.getParentInput()?e.targetConnection:null}getParent(e){return e.getSourceBlock()}getNextSibling(e){if(e.getParentInput())return Ei(e,1);if(e.type===Ke.NEXT_STATEMENT){const r=e.targetConnection;var t=e.getSourceBlock();if(!r&&t.getRootBlock().lastConnectionInStack(!1)===e){e=t.workspace.getTopBlocks(!0),t=e.indexOf(t.getRootBlock())+1,t>=e.length&&(t=0),t=e[t];let a;return(a=this.getParentConnection(t))!=null?a:t}return r}return e.getSourceBlock()}getPreviousSibling(e){if(e.getParentInput())return Ei(e,-1);if(e.type===Ke.PREVIOUS_STATEMENT||e.type===Ke.OUTPUT_VALUE){const r=e.targetConnection&&!e.targetConnection.getParentInput()?e.targetConnection:null;var t=e.getSourceBlock();if(!r&&this.getParentConnection(t.getRootBlock())===e){e=t.workspace.getTopBlocks(!0),t=e.indexOf(t.getRootBlock())-1,t<0&&(t=e.length-1),t=e[t];let a;return(a=t.lastConnectionInStack(!1))!=null?a:t}return r}return e.type===Ke.NEXT_STATEMENT?e.getSourceBlock():null}getParentConnection(e){let t;return!e.outputConnection||(t=e.previousConnection)!=null&&t.isConnected()?e.previousConnection:e.outputConnection}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof Yt}},cf=class{getFirstChild(e){return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return Ei(e,1)}getPreviousSibling(e){return Ei(e,-1)}isNavigable(e){let t;return e.canBeFocused()&&e.isVisible()&&(e.isClickable()||e.isCurrentlyEditable())&&!((t=e.getSourceBlock())!=null&&t.isSimpleReporter()&&e.isFullBlockField())&&e.getParentInput().isVisible()}isApplicable(e){return e instanceof Tt}},mc={};mc.register=Ml,mc.unregister=Z_;var Tc=17,df=160,_f=80,bi=class extends mo{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new ct(df,_f),this.bubbleVisiblity=!1}getType(){return bi.TYPE}initView(e){this.svgRoot||(super.initView(e),de(_e.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),de(_e.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),de(_e.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),De(this.svgRoot,"blocklyCommentIcon"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return bi.WEIGHT}getSize(){return new ct(Tc,Tc)}applyColour(){super.applyColour();const e=this.sourceBlock.getColour();let t;(t=this.textInputBubble)==null||t.setColour(e)}updateEditable(){const e=this,t=()=>super.updateEditable;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){t().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){const t=this.workspaceLocation;super.onLocationChange(e),this.bubbleLocation&&(e=Me.difference(this.workspaceLocation,t),this.bubbleLocation=Me.sum(this.bubbleLocation,e)),e=this.getAnchorLocation();let r;(r=this.textInputBubble)==null||r.setAnchorLocation(e)}setText(e){const t=this.text;be(new(Fe(pe.BLOCK_CHANGE))(this.sourceBlock,"comment",null,t,e)),this.text=e;let r;(r=this.textInputBubble)==null||r.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}setBubbleLocation(e){this.bubbleLocation=e;let t;(t=this.textInputBubble)==null||t.moveDuringDrag(e)}getBubbleLocation(){return this.bubbleLocation}saveState(){if(this.text){const e={text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width},t=this.getBubbleLocation();return t&&(e.x=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(t.x+this.bubbleSize.width):t.x,e.y=t.y),e}return null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let r,a;this.bubbleSize=new ct((r=e.width)!=null?r:df,(a=e.height)!=null?a:_f);let u;this.bubbleVisiblity=(u=e.pinned)!=null?u:!1,this.setBubbleVisible(this.bubbleVisiblity);let b=e.x;const U=e.y;Ci().then(()=>{b&&U&&(b=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(b+this.bubbleSize.width):b,this.setBubbleLocation(new Me(b,U)))})}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(be(new(Fe(pe.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}onBubbleLocationChange(){this.textInputBubble&&(this.bubbleLocation=this.textInputBubble.getRelativeToSurfaceXY())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const t=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){t.bubbleVisiblity!==e&&(t.bubbleVisiblity=e,yield Ci(),!t.sourceBlock.rendered||t.sourceBlock.isInFlyout||t.sourceBlock.isInsertionMarker()||(e?(t.sourceBlock.isEditable()?t.showEditableBubble():t.showNonEditableBubble(),t.applyColour()):t.hideBubble(),be(new(Fe(pe.BUBBLE_OPEN))(t.sourceBlock,e,"comment"))))})}getBubble(){return this.textInputBubble}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let t;(t=this.textInputBubble)==null||t.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new ia(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect(),this),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.bubbleLocation&&this.textInputBubble.moveDuringDrag(this.bubbleLocation),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange()),this.textInputBubble.addLocationChangeListener(()=>this.onBubbleLocationChange())}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=Tc/2;return Me.sum(this.workspaceLocation,new Me(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};bi.TYPE=Ut.COMMENT,bi.WEIGHT=3,Ml(bi.TYPE,bi);var aT=class{getFirstChild(e){if(e instanceof o.MutatorIcon$$module$build$src$core$icons$mutator_icon&&e.bubbleIsVisible()&&o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let t,r;return(r=(t=e.getBubble())==null?void 0:t.getWorkspace())!=null?r:null}if(e instanceof bi&&e.bubbleIsVisible()&&o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let t,r;return(r=(t=e.getBubble())==null?void 0:t.getEditor())!=null?r:null}return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return Ei(e,1)}getPreviousSibling(e){return Ei(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof mo}},lT=class{getFirstChild(e){return e.view.getCommentBarButtons()[0]}getParent(e){return e.workspace}getNextSibling(e){return ur(e,1)}getPreviousSibling(e){return ur(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof Ji}},hf=class{getFirstChild(e){return e=e.getTopBlocks(!0),e.length?e[0]:null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()&&!e.isMutator}isApplicable(e){return e instanceof ti}},gc=class{constructor(){this.rules=[new lf,new cf,new uf,new hf,new aT,new lT,new oT,new rT,new sT]}addNavigationPolicy(e){this.rules.push(e)}get(e){return this.rules.find(t=>t.isApplicable(e))}getFirstChild(e){let t;const r=(t=this.get(e))==null?void 0:t.getFirstChild(e);if(!r)return null;let a;return(a=this.get(r))!=null&&a.isNavigable(r)?r:this.getFirstChild(r)||this.getNextSibling(r)}getParent(e){let t;const r=(t=this.get(e))==null?void 0:t.getParent(e);if(!r)return null;let a;return(a=this.get(r))!=null&&a.isNavigable(r)?r:this.getParent(r)}getNextSibling(e){let t;const r=(t=this.get(e))==null?void 0:t.getNextSibling(e);if(!r)return null;let a;return(a=this.get(r))!=null&&a.isNavigable(r)?r:this.getNextSibling(r)}getPreviousSibling(e){let t;const r=(t=this.get(e))==null?void 0:t.getPreviousSibling(e);if(!r)return null;let a;return(a=this.get(r))!=null&&a.isNavigable(r)?r:this.getPreviousSibling(r)}},pf=class extends gc{constructor(e){super(),this.rules.push(new of,new af),this.rules=this.rules.map(t=>new sf(t,e))}},Ec=class{constructor(e,t,r,a,u){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,r=r===void 0?!0:r;const b=t&&r;t&&(this.hScroll=new kt(e,!0,b,a,u)),r&&(this.vScroll=new kt(e,!1,b,a,u)),b&&(this.corner_=de(_e.RECT,{height:kt.scrollbarThickness,width:kt.scrollbarThickness,class:"blocklyScrollbarBackground"}),et(this.corner_,e.getBubbleCanvas()))}dispose(){He(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,r=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(r=!0)):r=t=!0,t||r){try{o.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&r&&this.vScroll.resize(e)}finally{o.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let a;(a=this.corner_)==null||a.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let a;(a=this.corner_)==null||a.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,r){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(r||r===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},vr="sep",ff=class{load(e,t){return e=new sa(0,t.horizontalLayout?"x":"y"),new Or(e,vr)}gapForItem(e,t){let r;return(r=parseInt(String(e.gap)))!=null?r:t}disposeItem(e){}getType(){return vr}};s(Re.FLYOUT_INFLATER,vr,ff);var aa=class extends oa{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.reflowWrapper=null,this.contents=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,this.inflaters=new Map,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new ti(e),this.workspace_.setMetricsManager(new rf(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.workspace_.setNavigator(new pf(this)),this.id=C(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=this.MARGIN*3,this.GAP_Y=this.MARGIN*3}createDom(e){return this.svgGroup_=de(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=de(_e.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Ec(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(y(this.svgGroup_,"wheel",this,this.wheel_)),this.boundEvents.push(y(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:It.ComponentWeight.FLYOUT_WEIGHT,capabilities:[It.Capability.AUTOHIDEABLE,It.Capability.DELETE_AREA,It.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)L(e);this.boundEvents.length=0,this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&He(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const t=e!==this.isVisible();this.visible=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,r,a){let u;(u=this.svgGroup_)==null||u.setAttribute("width",`${e}`);let b;(b=this.svgGroup_)==null||b.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&tt(this.svgGroup_,"translate("+r+"px,"+a+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(r,a),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){this.isVisible()&&(this.setVisible(!1),this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null))}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=wr(e),e=this.createFlyoutInfo(e),on(this.workspace_),this.setContents(e),this.layout_(e),this.horizontalLayout?this.height_=0:this.width_=0,this.reflow(),this.workspace_.setResizesEnabled(!0),this.reflowWrapper=t=>{t.type!==pe.BLOCK_CHANGE&&t.type!==pe.BLOCK_FIELD_INTERMEDIATE_CHANGE||this.reflow()},this.workspace_.addChangeListener(this.reflowWrapper)}createFlyoutInfo(e){const t=[],r=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const a of e)"custom"in a&&(e=this.getDynamicCategoryContents(a.custom),e=wr(e),t.push(...this.createFlyoutInfo(e))),e=a.kind.toLowerCase(),(e=this.getInflaterForType(e))&&(t.push(e.load(a,this)),(e=e.gapForItem(a,r))&&t.push(new Or(new sa(e,this.horizontalLayout?"x":"y"),vr)));return this.normalizeSeparators(t)}normalizeSeparators(e){for(let t=e.length-1;t>0;t--){const r=e[t].getType().toLowerCase(),a=e[t-1].getType().toLowerCase();r===vr&&a===vr&&e.splice(t-1,1)}return e}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}clearOldBlocks(){this.getContents().forEach(t=>{let r;(r=this.getInflaterForType(t.getType()))==null||r.disposeItem(t)});let e;(e=this.workspace_.getPotentialVariableMap())==null||e.clear()}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()&&!this.getTargetWorkspace().isReadOnly()}createBlock(e){let t=null;o.disable$$module$build$src$core$events$utils();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{o.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=Br(this.targetWorkspace,r),ue()){for(o.setGroup$$module$build$src$core$events$utils(!0),r=0;r<e.length;r++){const a=e[r];be(new(Fe(pe.VAR_CREATE))(a))}be(new(Fe(pe.BLOCK_CREATE))(t))}return this.autoClose&&this.hide(),t}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const r=this.serializeBlock(e);return t.setResizesEnabled(!1),t=sn(r,t),this.positionNewBlock(e,t),t}serializeBlock(e){return pi(e)}positionNewBlock(e,t){const r=this.targetWorkspace;var a=r.getOriginOffsetInPixels(),u=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),u=Me.sum(u,e),a=Me.difference(u,a),a.scale(1/r.scale),t.moveTo(new Me(a.x,a.y))}getInflaterForType(e){if(this.inflaters.has(e)){var t;return(t=this.inflaters.get(e))!=null?t:null}return(t=N(Re.FLYOUT_INFLATER,e))?(t=new t,this.inflaters.set(e,t),t):null}getFocusableElement(){throw Error("Flyouts are not directly focusable.")}getFocusableTree(){throw Error("Flyouts are not directly focusable.")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}getRootFocusableNode(){throw Error("Flyouts are not directly focusable.")}getRestoredFocusableNode(e){throw Error("Flyouts are not directly focusable.")}getNestedTrees(){throw Error("Flyouts are not directly focusable.")}lookUpFocusableNode(e){throw Error("Flyouts are not directly focusable.")}onTreeFocus(e,t){}onTreeBlur(e){throw Error("Flyouts are not directly focusable.")}},mf=class{constructor(){this.isActive=!1,this.activeClassName="blocklyKeyboardNavigation"}setIsActive(e=!0){this.isActive=e,this.updateActiveVisualization()}getIsActive(){return this.isActive}updateActiveVisualization(){this.isActive?document.body.classList.add(this.activeClassName):document.body.classList.remove(this.activeClassName)}},la=new mf,Tf=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new Me(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){}endDrag(e){this.drag(e)}drag(e){if(e=Me.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},uT=5,cT=6,ua=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new Me(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new Me(0,0)}dispose(){P(),sl(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)L(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new Me(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(e),B()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=Me.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Me.magnitude(this.currentDragDeltaXY)>(this.flyout?o.config$$module$build$src$core$config.flyoutDragRadius:o.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),o.getGroup$$module$build$src$core$events$utils()||o.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new Tf(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const t=J();t&&cr(t)&&t.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(t,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,t){return new(R(Re.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,t)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,G(e)?this.cancel():(this.gestureHasStarted=!0,ar(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=Ba(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,ol(),p(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&k(e,this),this.mouseDownXY=new Me(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(y(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(y(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(y(document,"pointerup",null,this.handleUp.bind(this),!0)),this.boundEvents.push(y(document,"pointercancel",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&B())}handleMove(e){this.isDragging()&&z(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),B())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!z(e))return;if(this.updateFromEvent(e),B(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?(la.setIsActive(!1),this.dragger.onDragEnd(e,this.currentDragDeltaXY)):this.workspaceDragger?(la.setIsActive(!1),this.workspaceDragger.endDrag(this.currentDragDeltaXY)):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=m(e);this.cachedPoints.set(t,this.getTouchPoint(e));var r=Array.from(this.cachedPoints.keys());r.length===2&&(t=this.cachedPoints.get(r[0]),r=this.cachedPoints.get(r[1]),this.startDistance=Me.distance(t,r),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const t=m(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),r=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),r=Me.distance(r,t)/this.startDistance,this.previousScale>0&&this.previousScale<1/0){if(t=r-this.previousScale,t=t>0?t*uT:t*cT,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const a=this.startWorkspace_,u=I(e,a.getParentSvg(),a.getInverseScreenCTM());a.zoom(u.x,u.y,t)}this.previousScale=r,e.preventDefault()}handleTouchEnd(e){e=m(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),this.cachedPoints.size<2&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new Me(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(B(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startWorkspace_),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),la.setIsActive(!1),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment?this.startBlock&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startBlock):o.getFocusManager$$module$build$src$core$focus_manager().focusNode(t),this.doStart(e)}fireWorkspaceClick(e){be(new(Fe(pe.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}handleCommentStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(t),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.bringBlockToFront(),this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent)}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.flyout.isBlockCreatable(this.targetBlock)){o.getGroup$$module$build$src$core$events$utils()||o.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours(),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(Fe(pe.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),be(e)}this.bringBlockToFront(),o.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){this.fireWorkspaceClick(this.startWorkspace_||this.creatorWorkspace)}bringBlockToFront(){this.targetBlock&&!this.flyout&&(o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),this.targetBlock.bringToFront())}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):(this.targetBlock=e,o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e))}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,t;return(t=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?t:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=Ie();for(let t=0,r;r=e[t];t++)if(r.currentGesture_)return!0;return!1}},$c=class{constructor(e,t){this.pattern=e,this.scale=1;let r;this.spacing=(r=t.spacing)!=null?r:0;let a;this.length=(a=t.length)!=null?a:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let u;this.snapToGrid=(u=t.snap)!=null?u:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let r=t-this.length/2,a=t+this.length/2;t*=e,r*=e,a*=e,this.setLineAttributes(this.line1,e,r,a,t,t),this.setLineAttributes(this.line2,e,t,t,r,a)}setLineAttributes(e,t,r,a,u,b){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${r}`),e.setAttribute("y1",`${u}`),e.setAttribute("x2",`${a}`),e.setAttribute("y2",`${b}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}alignXY(e){var t=this.getSpacing();const r=t/2,a=Math.round(Math.round((e.x-r)/t)*t+r);return t=Math.round(Math.round((e.y-r)/t)*t+r),a===e.x&&t===e.y?e:new Me(a,t)}static createDom(e,t,r,a){e=de(_e.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},r);let u,b;if(((u=t.length)!=null?u:1)>0&&((b=t.spacing)!=null?b:0)>0){de(_e.LINE,{stroke:t.colour},e);let U;(U=t.length)!=null&&U&&de(_e.LINE,{stroke:t.colour},e)}else de(_e.LINE,{},e);return a&&a.style.setProperty("--blocklyGridPattern",`url(#${e.id})`),e}},dT=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(fn),De(e,"blocklyBlockCanvas"),e=this.createLayer(zs),De(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=de(_e.SVG,{class:"blocklyBlockDragSurface",xmlns:Qr,"xmlns:html":Dn,"xmlns:xlink":ai,version:"1.1"});return e.append(t),de(_e.G,{},t)}createAnimationLayer(e){const t=de(_e.SVG,{class:"blocklyAnimationLayer",xmlns:Qr,"xmlns:html":Dn,"xmlns:xlink":ai,version:"1.1"});return e.append(t),de(_e.G,{},t)}appendToAnimationLayer(e){let t;const r=(t=this.dragLayer)==null?void 0:t.getAttribute("transform");if(r){let u;(u=this.animationLayer)==null||u.setAttribute("transform",r)}let a;(a=this.animationLayer)==null||a.appendChild(e.getSvgRoot())}translateLayers(e,t){e=`translate(${e.x}, ${e.y}) scale(${t})`;let r;(r=this.dragLayer)==null||r.setAttribute("transform",e);for(const[,a]of this.layers)a.setAttribute("transform",e)}moveToDragLayer(e){let t;(t=this.dragLayer)==null||t.appendChild(e.getSvgRoot()),e.canBeFocused()&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}moveOffDragLayer(e,t){this.append(e,t),e.canBeFocused()&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}append(e,t){this.layers.has(t)||this.createLayer(t),e=e.getSvgRoot();let r;if(((r=this.layers.get(t))==null?void 0:r.lastChild)!==e){let a;(a=this.layers.get(t))==null||a.appendChild(e)}}createLayer(e){const t=this.workspace.getSvgGroup(),r=de(_e.G,{});let a=!1;const u=[...this.layers].sort((b,U)=>b[0]-U[0]);for(const[b,U]of u)if(e<b){t.insertBefore(r,U),a=!0;break}return a||t.appendChild(r),this.layers.set(e,r),r}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(fn)}getBubbleLayer(){return this.layers.get(zs)}},gf=class{constructor(){this.curNode=this.colour=null,this.type="marker"}getCurNode(){return this.curNode}setCurNode(e){this.curNode=e}dispose(){this.curNode=null}getSourceBlockFromNode(e){return e instanceof St?e:e instanceof Tt||e instanceof Yt?e.getSourceBlock():null}getSourceBlock(){return this.getSourceBlockFromNode(this.getCurNode())}},Sc=class extends gf{constructor(e){super(),this.workspace=e,this.type="cursor",this.potentialNodes=null}next(){var e=this.getCurNode();return e?((e=this.getNextNode(e,t=>{let r;return t instanceof St&&!((r=t.outputConnection)!=null&&r.targetBlock())||t instanceof Ji},!0))&&this.setCurNode(e),e):null}in(){var e=this.getCurNode();return e?((e=this.getNextNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,t=>{let r;return t instanceof St&&!((r=t.outputConnection)!=null&&r.targetBlock())||t instanceof Ji},!0))&&this.setCurNode(e),e):null}out(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}atEndOfLine(){var e=this.getCurNode();if(!e)return!1;const t=this.getNextNode(e,()=>!0,!0);return e=this.getNextNode(e,r=>{let a;return r instanceof St&&!((a=r.outputConnection)!=null&&a.targetBlock())},!0),t===e}getNextNodeImpl(e,t,r=new Set){if(!e||r.has(e))return null;let a=this.workspace.getNavigator().getFirstChild(e)||this.workspace.getNavigator().getNextSibling(e);for(var u=e;u&&!a&&(u=this.workspace.getNavigator().getParent(u),!!u);)a=this.workspace.getNavigator().getNextSibling(u);return t(a)?a:a?(r.add(e),this.getNextNodeImpl(a,t,r)):null}getNextNode(e,t,r){return!e||!r&&this.getLastNode()===e?null:this.getNextNodeImpl(e,t)}getPreviousNodeImpl(e,t,r=new Set){if(!e||r.has(e))return null;const a=this.getRightMostChild(this.workspace.getNavigator().getPreviousSibling(e),e)||this.workspace.getNavigator().getParent(e);return t(a)?a:a?(r.add(e),this.getPreviousNodeImpl(a,t,r)):null}getPreviousNode(e,t,r){return!e||!r&&this.getFirstNode()===e?null:this.getPreviousNodeImpl(e,t)}getRightMostChild(e,t){if(!e)return e;let r=this.workspace.getNavigator().getFirstChild(e);if(!r||r===t)return e;for(e=r;e&&e!==t;e=this.workspace.getNavigator().getNextSibling(r))r=e;return this.getRightMostChild(r,t)}preDelete(e){var t=this.getCurNode();t=t?[t]:[];var r;let a,u;const b=(u=(r=e.previousConnection)==null?void 0:r.targetConnection)!=null?u:(a=e.outputConnection)==null?void 0:a.targetConnection;b&&t.push(b),(r=e.getNextBlock())&&t.push(r),(e=e.getParent())&&t.push(e),t.push(this.workspace),this.potentialNodes=t}postDelete(){const e=this.potentialNodes;if(this.potentialNodes=null,!e)throw Error("must call preDelete first");for(const t of e){let r;if((r=this.getSourceBlockFromNode(t))==null||!r.disposed){this.setCurNode(t);return}}throw Error("no valid nodes in this.potentialNodes")}getCurNode(){return o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()}setCurNode(e){o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}getFirstNode(){return this.workspace.getNavigator().getFirstChild(this.workspace)}getLastNode(){const e=this.getFirstNode();return this.getPreviousNode(e,()=>!0,!0)}};s(Re.CURSOR,si,Sc);var Ac=class{constructor(e){this.workspace=e,this.markers=new Map,this.cursor=new Sc(this.workspace)}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor=e}dispose(){const e=Object.keys(this.markers);for(let t=0,r;r=e[t];t++)this.unregisterMarker(r);this.markers.clear(),this.cursor.dispose()}};Ac.LOCAL_MARKER="local_marker_1";var mn={};mn.CommentIcon=bi,mn.Icon=mo,mn.IconType=Ut,mn.MutatorIcon=o.MutatorIcon$$module$build$src$core$icons$mutator_icon,mn.WarningIcon=Mi,mn.exceptions=qp,mn.registry=mc,o.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.getName():null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=o.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),o.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let r=e;t===o.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(r=e),e=r.toLowerCase();const a=t===o.NameType$$module$build$src$core$names.VARIABLE||t===o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const u=this.db.get(t);return u.has(e)?a+u.get(e):(t=this.getDistinctName(r,t),u.set(e,t.substr(a.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let r=null,a,u;for(;this.dbReverse.has(e+((a=r)!=null?a:""))||this.reservedWords.has(e+((u=r)!=null?u:""));)r=r?r+1:2;let b;return e+=(b=r)!=null?b:"",this.dbReverse.add(e),(t===o.NameType$$module$build$src$core$names.VARIABLE||t===o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=o.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},(function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"})(o.Names$$module$build$src$core$names||(o.Names$$module$build$src$core$names={})),o.NameType$$module$build$src$core$names=o.Names$$module$build$src$core$names.NameType,o.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,o.NameType$$module$build$src$core$names,o.Names$$module$build$src$core$names;var Ef=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),cs(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(cs(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},ca,ei;ca="PROCEDURE",o.DEFAULT_ARG$$module$build$src$core$procedures="x",ei={CATEGORY_NAME:ca,DEFAULT_ARG:o.DEFAULT_ARG$$module$build$src$core$procedures},ei.ObservableProcedureMap=Ef,ei.allProcedures=Yr,ei.findLegalName=o.findLegalName$$module$build$src$core$procedures,ei.flyoutCategory=Pl,ei.getCallers=Vl,ei.getDefinition=o.getDefinition$$module$build$src$core$procedures,ei.internalFlyoutCategory=ds,ei.isNameUsed=Fl,ei.isProcedureBlock=ln,ei.mutateCallers=o.mutateCallers$$module$build$src$core$procedures,ei.mutatorOpenListener=Ul,ei.rename=o.rename$$module$build$src$core$procedures;var _T=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return(e.type&this.FIELD)>=1}isHat(e){return(e.type&this.HAT)>=1}isIcon(e){return(e.type&this.ICON)>=1}isSpacer(e){return(e.type&this.SPACER)>=1}isInRowSpacer(e){return(e.type&this.IN_ROW_SPACER)>=1}isSpacerRow(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isInput(e){return(e.type&this.INPUT)>=1}isExternalInput(e){return(e.type&this.EXTERNAL_VALUE_INPUT)>=1}isInlineInput(e){return(e.type&this.INLINE_INPUT)>=1}isStatementInput(e){return(e.type&this.STATEMENT_INPUT)>=1}isPreviousConnection(e){return(e.type&this.PREVIOUS_CONNECTION)>=1}isNextConnection(e){return(e.type&this.NEXT_CONNECTION)>=1}isPreviousOrNextConnection(e){return this.isPreviousConnection(e)||this.isNextConnection(e)}isRoundCorner(e){return(e.type&this.LEFT_ROUND_CORNER)>=1||(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.LEFT_ROUND_CORNER)>=1}isRightRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftSquareCorner(e){return(e.type&this.LEFT_SQUARE_CORNER)>=1}isRightSquareCorner(e){return(e.type&this.RIGHT_SQUARE_CORNER)>=1}isCorner(e){return(e.type&this.CORNER)>=1}isJaggedEdge(e){return(e.type&this.JAGGED_EDGE)>=1}isRow(e){return(e.type&this.ROW)>=1}isBetweenRowSpacer(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isTopRow(e){return(e.type&this.TOP_ROW)>=1}isBottomRow(e){return(e.type&this.BOTTOM_ROW)>=1}isTopOrBottomRow(e){return this.isTopRow(e)||this.isBottomRow(e)}isInputRow(e){return(e.type&this.INPUT_ROW)>=1}},oe=new _T,xi=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=oe.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},$o=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=oe.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;e>=0;e--){const t=this.elements[e];if(oe.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(oe.isInRowSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;e>=0;e--){const t=this.elements[e];if(oe.isInRowSpacer(t))return t}return null}},bc=class extends $o{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=oe.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,r=0;for(let a=0;a<this.elements.length;a++){const u=this.elements[a];t+=u.width,oe.isSpacer(u)||(oe.isNextConnection(u)?r=Math.max(r,u.height):e=Math.max(e,u.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Xn=class extends xi{constructor(e,t){super(e),this.connectionModel=t,this.type|=oe.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},da=class extends Xn{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=oe.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Ic=class extends da{constructor(e,t){super(e,t),this.height=0,this.type|=oe.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},Oc=class extends xi{constructor(e,t,r){super(e),this.field=t,this.parentInput=r,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=oe.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},$f=class extends xi{constructor(e){super(e),this.type|=oe.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Sf=class extends xi{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.type|=oe.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},hi=class extends xi{constructor(e,t){super(e),this.type|=oe.SPACER|oe.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},vc=class extends da{constructor(e,t){super(e,t),this.type|=oe.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Cc=class extends $o{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=oe.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const r=this.elements[t];this.width+=r.width,oe.isInput(r)&&(oe.isStatementInput(r)?e+=r.connectedBlockWidth:oe.isExternalInput(r)&&r.connectedBlockWidth!==0&&(e+=r.connectedBlockWidth-r.connectionWidth)),oe.isSpacer(r)||(this.height=Math.max(this.height,r.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Af=class extends xi{constructor(e){super(e),this.type|=oe.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},bf=class extends Xn{constructor(e,t){super(e,t),this.type|=oe.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},If=class extends Xn{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=oe.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Of=class extends Xn{constructor(e,t){super(e,t),this.type|=oe.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},So=class extends xi{constructor(e,t){super(e),this.type=(t&&t!=="left"?oe.RIGHT_ROUND_CORNER:oe.LEFT_ROUND_CORNER)|oe.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},yc=class extends $o{constructor(e,t,r){super(e),this.height=t,this.width=r,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type|=oe.SPACER|oe.BETWEEN_ROW_SPACER,this.elements=[new hi(this.constants_,r)]}measure(){}},Ao=class extends xi{constructor(e,t){super(e),this.type=(t&&t!=="left"?oe.RIGHT_SQUARE_CORNER:oe.LEFT_SQUARE_CORNER)|oe.CORNER,this.width=this.height=this.constants_.NO_PADDING}},_a=class extends da{constructor(e,t){super(e,t),this.type|=oe.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Rc=class extends $o{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=oe.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,r=e.getPreviousBlock();return!!e.outputConnection||t||(r?r.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,r=0;for(let a=0;a<this.elements.length;a++){const u=this.elements[a];t+=u.width,oe.isSpacer(u)||(oe.isHat(u)?r=Math.max(r,u.ascenderHeight):e=Math.max(e,u.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},ha=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=yt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const r in t)this.blockStyles[r]=this.validatedBlockStyle_(t[r]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=S("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=tr(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?tr(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?tr(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return vn("#fff",e,.6)||e}generateTertiaryColour_(e){return vn("#fff",e,.3)||e}dispose(){this.embossFilter&&He(this.embossFilter),this.disabledPattern&&He(this.disabledPattern),this.debugFilter&&He(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,r=sr([qe(t,e/4),qe(-t*2,e/2),qe(t,e/4)]);return{height:e,width:t,path:r}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,r=oi("c",[qe(30,-e),qe(70,-e),qe(t,0)]);return{height:e*.75,width:t,path:r}}makePuzzleTab(){function e(b){b=b?-1:1;const U=-b;var Z=r/2;const Ce=Z+2.5,je=Z+.5,Ct=qe(-t,b*Z);return Z=qe(t,b*Z),oi("c",[qe(0,b*Ce),qe(-t,U*je),Ct])+oi("s",[qe(t,U*2.5),Z])}const t=this.TAB_WIDTH,r=this.TAB_HEIGHT,a=e(!0),u=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:r,pathDown:u,pathUp:a}}makeNotch(){function e(U){return sr([qe(U*a,r),qe(U*3,0),qe(U*a,-r)])}const t=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,a=(t-3)/2,u=e(1),b=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:r,pathLeft:u,pathRight:b}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Lt("a","0 0,0",e,qe(-e,e)),r=Lt("a","0 0,0",e,qe(e,e));return{width:e,height:e,pathTop:t,pathBottom:r}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=yt(0,e)+Lt("a","0 0,1",e,qe(e,-e)),r=Lt("a","0 0,1",e,qe(e,e)),a=Lt("a","0 0,1",e,qe(-e,-e)),u=Lt("a","0 0,1",e,qe(-e,e));return{topLeft:t,topRight:r,bottomRight:u,bottomLeft:a,rightHeight:e}}shapeFor(e){switch(e.type){case Ke.INPUT_VALUE:case Ke.OUTPUT_VALUE:return this.PUZZLE_TAB;case Ke.PREVIOUS_STATEMENT:case Ke.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,r,a){this.injectCSS_(t,r),this.defs=de(_e.DEFS,{},e),e=de(_e.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),de(_e.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=de(_e.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),de(_e.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),de(_e.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),de(_e.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=de(_e.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),de(_e.RECT,{width:10,height:10,fill:"#aaa"},e),de(_e.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter(),a&&(a.style.setProperty("--blocklyEmbossFilter",`url(#${this.embossFilterId})`),a.style.setProperty("--blocklyDisabledPattern",`url(#${this.disabledPatternId})`),a.style.setProperty("--blocklyDebugFilter",`url(#${this.debugFilterId})`))}createDebugFilter(){if(!this.debugFilter){const e=de(_e.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=de(_e.FECOMPONENTTRANSFER,{result:"outBlur"},e);de(_e.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),de(_e.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),de(_e.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const r=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=r:(t=document.createElement("style"),t.id=e,e=document.createTextNode(r),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect,`,`${e} .blocklyEditableField>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableField:not(.blocklyEditing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},pa=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=yt(e.xPos,this.info_.startY);for(let r=0,a;a=t[r];r++)oe.isLeftRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:oe.isRightRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:oe.isPreviousConnection(a)?this.outlinePath_+=a.shape.pathLeft:oe.isHat(a)?this.outlinePath_+=this.constants_.START_HAT.path:oe.isSpacer(a)&&(this.outlinePath_+=Ze("h",a.width));this.outlinePath_+=Ze("v",e.height-e.ascenderHeight)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Ze("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const r=_s(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=Ze("H",t.xPos+t.width)+r+Ze("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var r=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+Ze("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var a=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Ze("H",r)+t+Ze("v",a)+this.constants_.INSIDE_CORNERS.pathBottom+Ze("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=Ze("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let r=0,a="";for(let u=t.length-1,b;b=t[u];u--)oe.isNextConnection(b)?a+=b.shape.pathRight:oe.isLeftSquareCorner(b)?a+=Ze("H",e.xPos):oe.isLeftRoundedCorner(b)?a+=this.constants_.OUTSIDE_CORNERS.bottomLeft:oe.isRightRoundedCorner(b)?(a+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):oe.isSpacer(b)&&(a+=Ze("h",b.width*-1));this.outlinePath_+=Ze("V",e.baseline-r),this.outlinePath_+=a}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=_s(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=Ze("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let r=0,a;a=t.elements[r];r++)oe.isInlineInput(a)?this.drawInlineInput_(a):(oe.isIcon(a)||oe.isField(a))&&this.layoutField_(a)}layoutField_(e){const t=e.centerline-e.height/2;let r=e.xPos;var a="";this.info_.RTL&&(r=-(r+e.width),e.flipRtl&&(r+=e.width,a="scale(-1 1)")),oe.isIcon(e)?(a=e.icon,a.setOffsetInBlock(new Me(r,t)),this.info_.isInsertionMarker&&a.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+r+","+t+")"+a),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,r=e.height,a=e.connectionOffsetY,u=e.connectionHeight+a;this.inlinePath_+=Xt(e.xPos+e.connectionWidth,e.centerline-r/2)+Ze("v",a)+e.shape.pathDown+Ze("v",r-u)+Ze("h",t-e.connectionWidth)+Ze("v",-r)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let r=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(r*=-1),e.connectionModel.setOffsetInBlock(r,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let r=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let r=e.xPos+e.width;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,r=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements){if(!(t instanceof Xn))continue;const r=this.drawConnectionHighlightPath(t);r&&(r.style.display=t.highlighted?"":"none")}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===Ke.INPUT_VALUE||t.type===Ke.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const r=t.getSourceBlock();let a,u;return(u=(a=r.pathObject).addConnectionHighlight)==null?void 0:u.call(a,t,e,t.getOffsetInBlock(),r.RTL)}getExpressionConnectionHighlightPath(e){let t="";return _s(e.shape)?t=e.shape.pathDown(e.height):rh(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,yt(0,-e)+Ze("v",e)+t+Ze("v",e)}getStatementConnectionHighlightPath(e){if(!oh(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return yt(-t,0)+Ze("h",t)+e.shape.pathLeft+Ze("h",t)}},bo=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new If(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new Rc(this.constants_),this.bottomRow=new bc(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new Cc(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let r=0,a;a=t[r];r++){const u=new Sf(this.constants_,a);this.isCollapsed&&!a.isShownWhenCollapsed()||e.elements.push(u)}t=void 0;for(let r=0,a;a=this.block_.inputList[r];r++)if(a.isVisible()){this.shouldStartNewRow_(a,t)&&(this.rows.push(e),e=new Cc(this.constants_),this.inputRows.push(e));for(let u=0,b;b=a.fieldRow[u];u++)e.elements.push(new Oc(this.constants_,b,a));this.addInput_(a,e),t=a}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new Af(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let r=this.topRow.hasLeftSquareCorner(this.block_)?Ao:So;this.topRow.elements.push(new r(this.constants_)),t?(e=new $f(this.constants_),this.topRow.elements.push(e)):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Of(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof _i&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?Ao:So,this.topRow.elements.push(new r(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof _i?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Ao(this.constants_)):this.bottomRow.elements.push(new So(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new bf(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Ao(this.constants_,"right")):this.bottomRow.elements.push(new So(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new vc(this.constants_,e)),t.hasInlineInput=!0):e instanceof _i?(t.elements.push(new _a(this.constants_,e)),t.hasStatement=!0):e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Ic(this.constants_,e)),t.hasExternalInput=!0):(e instanceof wi||e instanceof tn)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?t instanceof tn||e instanceof _i||t instanceof _i?!0:e instanceof o.ValueInput$$module$build$src$core$inputs$value_input||e instanceof wi||t instanceof o.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const r=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new hi(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(let a=0;a<r.length-1;a++){t.elements.push(r[a]);const u=this.getInRowSpacing_(r[a],r[a+1]);t.elements.push(new hi(this.constants_,u))}t.elements.push(r[r.length-1]),t.endsWithElemSpacer()&&t.elements.push(new hi(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&oe.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&oe.isInput(e)&&!t){if(oe.isExternalInput(e))return this.constants_.NO_PADDING;if(oe.isInlineInput(e))return this.constants_.LARGE_PADDING;if(oe.isStatementInput(e))return this.constants_.NO_PADDING}return e&&oe.isLeftSquareCorner(e)&&t&&(oe.isPreviousConnection(t)||oe.isNextConnection(t))?t.notchOffset:e&&oe.isLeftRoundedCorner(e)&&t&&(oe.isPreviousConnection(t)||oe.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&oe.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,r=0;for(let u=0,b;b=this.rows[u];u++){if(b.measure(),t=Math.max(t,b.width),b.hasStatement){var a=b.getLastInput();let U,Z;a=b.width-((Z=(U=a)==null?void 0:U.width)!=null?Z:0),e=Math.max(e,a)}r=Math.max(r,b.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let u=0,b;b=this.rows[u];u++)b.hasStatement&&(b.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,r;r=this.rows[t];t++)if(r.hasStatement)this.alignStatementRow_(r);else{var e=r.width;e=this.getDesiredRowWidth_(r)-e,e>0&&this.addAlignmentPadding_(r,e),oe.isTopOrBottomRow(r)&&(r.widthWithConnectedBlocks=r.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const r=e.getFirstSpacer(),a=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===o.Align$$module$build$src$core$inputs$align.LEFT&&a)a.width+=t;else if(e.align===o.Align$$module$build$src$core$inputs$align.CENTRE&&r&&a)r.width+=t/2,a.width+=t/2;else if(e.align===o.Align$$module$build$src$core$inputs$align.RIGHT&&r)r.width+=t;else if(a)a.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var r=e.width-t.width,a=this.statementEdge;r=a-r,r>0&&this.addAlignmentPadding_(e,r),r=e.width,a=this.getDesiredRowWidth_(e),t.width+=a-r,t.height=Math.max(t.height,e.height),e.width+=a-r,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var r=this.getSpacerRowHeight_(e,t);const a=this.getSpacerRowWidth_(e,t);return r=new yc(this.constants_,r,a),e.hasStatement&&(r.followsStatement=!0),t.hasStatement&&(r.precedesStatement=!0),r}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return oe.isSpacer(t)?e.yPos+t.height/2:oe.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,oe.isNextConnection(t)?e+t.height/2:e-t.height/2):oe.isTopRow(e)?oe.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let r=0,a;a=e.elements[r];r++)oe.isSpacer(a)&&(a.height=e.height),a.xPos=t,a.centerline=this.getElemCenterline_(e,a),t+=a.width}finalize_(){let e=0,t=0;for(let r=0,a;a=this.rows[r];r++)a.yPos=t,a.xPos=this.startX,t+=a.height,e=Math.max(e,a.widthWithConnectedBlocks),this.recordElemPositions_(a);if(this.outputConnection&&this.block_.nextConnection){const r=this.block_.nextConnection.targetBlock();r&&(e=Math.max(e,r.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if(((t=this.outputConnection)==null?void 0:t.connectionModel)===e)return this.outputConnection;for(const r of this.rows)for(const a of r.elements)if(a instanceof Xn&&a.connectionModel===e)return a;return null}},fa=class{constructor(e,t,r){this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=r,this.style=t,this.svgRoot=e,this.svgPath=de(_e.PATH,{class:"blocklyPath"},this.svgRoot),this.setClass_("blocklyBlock",!0)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?De(this.svgRoot,e):Se(this.svgRoot,e))}updateHighlighted(e){e?this.setClass_("blocklyHighlighted",!0):this.setClass_("blocklyHighlighted",!1)}updateShadow_(e){e?(this.setClass_("blocklyShadow",!0),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)):this.setClass_("blocklyShadow",!1)}updateDisabled_(e){this.setClass_("blocklyDisabled",e),this.setClass_("blocklyDisabledPattern",e)}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,r,a){return r=`translate(${r.x}, ${r.y})`+(a?" scale(-1 1)":""),(a=this.connectionHighlights.get(e))?(a.setAttribute("d",t),a.setAttribute("transform",r),a):(t=de(_e.PATH,{id:e.id,class:"blocklyHighlightedConnectionPath",style:"display: none;",d:t,transform:r},this.svgRoot),this.connectionHighlights.set(e,t),t)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(He(t),this.connectionHighlights.delete(e))}},ma=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t,r){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName(),r)}refreshDom(e,t,r){const a=this.getConstants();a.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=a.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t,r)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new ha}makeRenderInfo_(e){return new bo(this,e)}makeDrawer_(e,t){return new pa(e,t)}makePathObject(e,t){return new fa(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,r){return!!pt.getConnectionForOrphanedConnection(e,r===Ke.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},mt={};mt.BottomRow=bc,mt.Connection=Xn,mt.ConstantProvider=ha,mt.Drawer=pa,mt.ExternalValueInput=Ic,mt.Field=Oc,mt.Hat=$f,mt.Icon=Sf,mt.InRowSpacer=hi,mt.InlineInput=vc,mt.InputConnection=da,mt.InputRow=Cc,mt.JaggedEdge=Af,mt.Measurable=xi,mt.NextConnection=bf,mt.OutputConnection=If,mt.PathObject=fa,mt.PreviousConnection=Of,mt.RenderInfo=bo,mt.Renderer=ma,mt.RoundCorner=So,mt.Row=$o,mt.SpacerRow=yc,mt.SquareCorner=Ao,mt.StatementInput=_a,mt.TopRow=Rc,mt.Types=oe,mt.init=Hl,mt.register=jr,mt.unregister=sh;var vf=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&Se(e,t),(t=this.theme.getClassName())&&De(e,t));for(let r=0,a;a=this.subscribedWorkspaces[r];r++)a.refreshTheme();for(const[r,a]of this.componentDB)for(const u of a){e=u.element,t=u.propertyName;const b=this.theme&&this.theme.getComponentStyle(r);e.style.setProperty(t,b||"")}for(const r of this.subscribedWorkspaces)r.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!q(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,r){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:r}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(r,t||"")}unsubscribe(e){if(e)for(const[t,r]of this.componentDB){for(let a=r.length-1;a>=0;a--)r[a].element===e&&r.splice(a,1);r.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},Nc="VARIABLE_DYNAMIC",Tn={CATEGORY_NAME:Nc};Tn.flyoutCategory=Gl,Tn.flyoutCategoryBlocks=Wl,Tn.internalFlyoutCategory=ms,Tn.onCreateVariableButtonClick_Colour=fs,Tn.onCreateVariableButtonClick_Number=ps,Tn.onCreateVariableButtonClick_String=hs;var Cf=class{canConnect(e,t,r,a){return this.canConnectWithReason(e,t,r,a)===pt.CAN_CONNECT}canConnectWithReason(e,t,r,a){const u=this.doSafetyChecks(e,t);return u!==pt.CAN_CONNECT?u:this.doTypeChecks(e,t)?r&&!this.doDragChecks(e,t,a||0)?pt.REASON_DRAG_CHECKS_FAILED:pt.CAN_CONNECT:pt.REASON_CHECKS_FAILED}getErrorMessage(e,t,r){switch(e){case pt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case pt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case pt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case pt.REASON_TARGET_NULL:return"Target connection is null.";case pt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+r.getCheck());case pt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case pt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case pt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return pt.REASON_TARGET_NULL;let r,a,u;return e.isSuperior()?(r=e.getSourceBlock(),a=t.getSourceBlock(),u=t):(a=e.getSourceBlock(),r=t.getSourceBlock(),u=e,e=t),r===a?pt.REASON_SELF_CONNECTION:u.type!==Wn[e.type]?pt.REASON_WRONG_TYPE:r.workspace!==a.workspace?pt.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!a.isShadow()?pt.REASON_SHADOW_PARENT:u.type===Ke.OUTPUT_VALUE&&a.previousConnection&&a.previousConnection.isConnected()||u.type===Ke.PREVIOUS_STATEMENT&&a.outputConnection&&a.outputConnection.isConnected()?pt.REASON_PREVIOUS_AND_OUTPUT:pt.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let r=0;r<e.length;r++)if(t.includes(e[r]))return!0;return!1}doDragChecks(e,t,r){if(e.distanceFrom(t)>r||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Ke.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Ke.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Ke.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case Ke.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return!io.includes(t)}canConnectToPrevious_(e,t){return e.targetConnection||io.includes(t)?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};s(Re.CONNECTION_CHECKER,si,Cf);var Cr=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Ef,this.readOnly=!1,this.potentialVariableMap=null,this.id=C(),Ve(this),this.options=e||new ki({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(R(Re.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new(this.getVariableMapClass())(this),this.setIsReadOnly(this.options.readOnly)}dispose(){this.listeners.length=0,this.clear(),le(this)}sortObjects(e,t){const r=a=>({getBoundingRectangle:()=>{const u=a.getRelativeToSurfaceXY();return new ut(u.y,u.y,u.x,u.x)},moveBy:()=>{}});return this.sortByOrigin(r(e),r(t))}sortByOrigin(e,t){const r=Math.sin(Xo(Cr.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getBoundingRectangle().getOrigin(),t=t.getBoundingRectangle().getOrigin(),e.y+r*e.x-(t.y+r*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!q(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&t.length>1&&t.sort(this.sortObjects.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){q(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&e.length>1&&e.sort(this.sortObjects.bind(this)),e.filter(r=>!r.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!q(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&t.length>1&&t.sort(this.sortObjects.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let r=0;r<t.length;r++)e.push(...t[r].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(r=>!r.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=o.getGroup$$module$build$src$core$events$utils();for(e||o.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();o.setGroup$$module$build$src$core$events$utils(e),this.isFlyout||this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){Wt("Blockly.Workspace.renameVariableById","v12","v13","Blockly.Workspace.getVariableMap().renameVariable"),(e=this.variableMap.getVariableById(e))&&this.variableMap.renameVariable(e,t)}createVariable(e,t,r){return Wt("Blockly.Workspace.createVariable","v12","v13","Blockly.Workspace.getVariableMap().createVariable"),this.variableMap.createVariable(e,t??void 0,r??void 0)}getVariableUsesById(e){return Wt("Blockly.Workspace.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),Jn(this,e)}deleteVariableById(e){Wt("Blockly.Workspace.deleteVariableById","v12","v13","Blockly.Workspace.getVariableMap().deleteVariable");const t=this.variableMap.getVariableById(e);t?o.deleteVariable$$module$build$src$core$variables(this,t):console.warn(`Can't delete non-existent variable: ${e}`)}getVariable(e,t){return Wt("Blockly.Workspace.getVariable","v12","v13","Blockly.Workspace.getVariableMap().getVariable"),this.variableMap.getVariable(e,t)}getVariableById(e){return Wt("Blockly.Workspace.getVariableById","v12","v13","Blockly.Workspace.getVariableMap().getVariableById"),this.variableMap.getVariableById(e)}getVariablesOfType(e){return Wt("Blockly.Workspace.getVariablesOfType","v12","v13","Blockly.Workspace.getVariableMap().getVariablesOfType"),this.variableMap.getVariablesOfType(e??"")}getAllVariables(){return Wt("Blockly.Workspace.getAllVariables","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables()}getAllVariableNames(){return Wt("Blockly.Workspace.getAllVariableNames","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables().map(e=>e.getName())}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const r in e){if(e[r]>this.remainingCapacityOfType(r))return!1;t+=e[r]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,r=e?this.undoStack_:this.redoStack_;const a=t.pop();if(a){for(var u=[a];t.length&&a.group&&a.group===t[t.length-1].group;){const b=t.pop();b&&u.push(b)}for(t=0;t<u.length;t++)r.push(u[t]);o.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(r=0;r<u.length;r++)u[r].run(e)}finally{o.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,te()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){q(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&this.MAX_UNDO>=0;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let r=0;r<t.length;r++)if(!t[r].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new(this.getVariableMapClass())(this,!0)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return Ne(e)}static getAll(){return Ie()}getVariableMapClass(){const e=R(Re.VARIABLE_MAP,this.options,!0);if(!e)throw Error("No variable map is registered.");return e}isReadOnly(){return this.readOnly}setIsReadOnly(e){this.readOnly=e,this.options.readOnly=e}};Cr.SCAN_ANGLE=3;var hT=100,yf=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var r=new globalThis.Audio}catch{return}for(let u=0;u<e.length;u++){const b=e[u],U=b.match(/\.(\w+)$/);if(U&&r.canPlayType("audio/"+U[1])){var a=new globalThis.Audio(b);break}}a&&this.sounds.set(t,a)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),Cs||xh)break}}play(e,t){if(!this.muted){var r=this.sounds.get(e);r?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<hT||(this.lastSound=e,r=Cs||Ou?r:r.cloneNode(),r.volume=t===void 0?1:t,r.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},pT=20,ti=class extends Cr{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardMoveInProgress=this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.navigator=new gc,this.metricsManager=new(R(Re.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||ti.setTopLevelWorkspaceMetrics,this.componentManager=new It,this.connectionDBList=Ar.init(this.connectionChecker),this.audioManager=new yf(e.parentWorkspace),this.grid=this.options.gridPattern?new $c(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Ac(this),Mt&&Uo&&this.registerToolboxCategoryCallback(Ku,Uo),Tn&&ms&&this.registerToolboxCategoryCallback(Nc,ms),ei&&ds&&(this.registerToolboxCategoryCallback(ca,ds),this.addChangeListener(Ul)),this.addChangeListener(this.variableChangeCallback.bind(this)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new vf(this,this.options.theme||Qs),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=Hl(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new ct(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}getMarker(e){return this.markerManager.getMarker(e)}getCursor(){return this.markerManager.getCursor()}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=Qs),this.themeManager_.setTheme(e)}refreshTheme(){if(this.svgGroup_){var e=this.options.parentWorkspace===null;this.renderer.refreshDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0)}this.updateBlockStyles(this.getAllBlocks(!1).filter(t=>!!t.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0),e=new(Fe(pe.THEME_CHANGE))(this.getTheme().name,this.id),be(e)}updateBlockStyles(e){for(let t=0,r;r=e[t];t++){const a=r.getStyleName();a&&r.setStyle(a)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let t=0,r=0,a=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(a=this.scale);do{const u=We(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(a=1),t+=u.x*a,r+=u.y*a,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new Me(t,r)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new ct(e.width,e.height)}getOriginOffsetInPixels(){return Ye(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=t??null),this.svgGroup_=de(_e.G,{class:"blocklyWorkspace",id:this.id}),t&&Pt(this.svgGroup_,wt.LABEL,o.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),e&&(this.svgBackground_=de(_e.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="var(--blocklyGridPattern)":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new dT(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(y(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),y(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(R(Re.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=R(Re.CURSOR,this.options))&&this.markerManager.setCursor(new e(this)),e=this.options.parentWorkspace===null,this.renderer.createDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0),o.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!!this.injectionDiv||this.isFlyout),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&He(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&He(e.parentNode)}this.resizeHandlerWrapper&&(L(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null),o.getFocusManager$$module$build$src$core$focus_manager().isRegistered(this)&&o.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}addTrashcan(){this.trashcan=ti.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new ip(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}copyOptionsForFlyout(){return new ki({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,plugins:this.options.plugins,modalInputs:this.options.modalInputs,move:{scrollbars:!0}})}addFlyout(e){const t=this.copyOptionsForFlyout();return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(R(Re.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(R(Re.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox?this.toolbox.position():this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(It.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),r=[];for(let a=0,u;u=e[a];a++){u.position(t,r);const b=u.getBoundingRectangle();b&&r.push(b)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=Ot();Me.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const r=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,r.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,r.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ue()){var e=this.scale,t=-this.scrollY,r=-this.scrollX;if(!(e===this.oldScale&&Math.abs(t-this.oldTop)<1&&Math.abs(r-this.oldLeft)<1)){var a=new(Fe(pe.VIEWPORT_CHANGE))(t,r,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=r,be(a)}}}translate(e,t){let r;(r=this.layerManager)==null||r.translateLayers(new Me(e,t),this.scale);let a;(a=this.grid)==null||a.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let t=e.length-1;t>=0;t--)e[t].queueRender();this.getTopBlocks().flatMap(t=>t.getDescendants(!1)).filter(t=>t.isInsertionMarker()).forEach(t=>t.queueRender())}highlightBlock(e,t){if(t===void 0){for(let r=0,a;a=this.highlightedBlocks[r];r++)a.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):q(this.highlightedBlocks,e),e.setHighlighted(t))}variableChangeCallback(e){switch(e.type){case pe.VAR_CREATE:case pe.VAR_DELETE:case pe.VAR_RENAME:case pe.VAR_TYPE_CHANGE:this.refreshToolboxSelection()}}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}recordDragTargets(){const e=this.componentManager.getComponents(It.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,r;r=e[t];t++){const a=r.getClientRect();a&&this.dragTargetAreas.push({component:r,clientRect:a})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,r;r=this.dragTargetAreas[t];t++)if(r.clientRect.contains(e.clientX,e.clientY))return r.component;return null}onMouseDown(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){is(this,e,t)}moveDrag(e){return ns(this,e)}setKeyboardMoveInProgress(e){this.keyboardMoveInProgress=e}isDragging(){return this.keyboardMoveInProgress||this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(ua.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||r){var a=D(e);if(vu)var u=e.metaKey;t&&(e.ctrlKey||u||!r)?(a=-a.y/50,t=I(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,a)):(t=this.scrollX-a.x,r=this.scrollY-a.y,e.shiftKey&&!a.x&&(t=this.scrollX-a.y,r=this.scrollY),this.scroll(t,r)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new ut(0,0,0,0);const t=e[0].getBoundingRectangle();for(let a=1;a<e.length;a++){var r=e[a];r.isInsertionMarker&&r.isInsertionMarker()||(r=r.getBoundingRectangle(),r.top<t.top&&(t.top=r.top),r.bottom>t.bottom&&(t.bottom=r.bottom),r.left<t.left&&(t.left=r.left),r.right>t.right&&(t.right=r.right))}return t}cleanUp(){this.setResizesEnabled(!1);const e=o.getGroup$$module$build$src$core$events$utils();e||o.setGroup$$module$build$src$core$events$utils(!0);var t=this.getTopBlocks(!0),r=t.filter(U=>U.isMovable());const a=t.filter(U=>!U.isMovable()).map(U=>U.getBoundingRectangle());t=function(U){for(const Z of a)if(U.intersects(Z))return Z;return null};var u=0;const b=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const U of r){for(r=U.getBoundingRectangle(),U.moveBy(-r.left,u-r.top,["cleanup"]),U.snapToGrid(),r=U.getBoundingRectangle(),u=t(r);u!=null;)u=u.top+u.getHeight()+b,U.moveBy(0,u-r.top,["cleanup"]),U.snapToGrid(),r=U.getBoundingRectangle(),u=t(r);u=U.getRelativeToSurfaceXY().y+U.getHeightWidth().height+b}o.setGroup$$module$build$src$core$events$utils(e),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.isReadOnly()&&!this.isFlyout){var t=_t.registry.getContextMenuOptions({workspace:this,focusedNode:this},e);this.configureContextMenu&&this.configureContextMenu(t,e);var r=e instanceof PointerEvent?new Me(e.clientX,e.clientY):Ft(this,new Me(5,5));rr(e,t,this.RTL,this,r)}}updateToolbox(e){if(e=rn(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(No(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(H(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);const a=this.scale*r;if(this.scale!==a){a>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:a<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var u=this.getCanvas().getCTM(),b=this.getParentSvg().createSVGPoint();b.x=e,b.y=t,b=b.matrixTransform(u.inverse()),e=b.x,t=b.y,u=u.translate(e*(1-r),t*(1-r)).scale(r),this.scrollX=u.e,this.scrollY=u.f,this.setScale(a)}}zoomCenter(e){var t=this.getMetrics();let r;this.flyout?(r=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(r=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(r,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var r=this.getBlocksBoundingBox(),a=pT*2,u=r.right-r.left+a;if(r=r.bottom-r.top+a,u){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),r+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),u+=this.flyout.getWidth()/this.scale)),t/=u,e/=r,o.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{o.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){De(this.getCanvas(),"blocklyCanvasTransitioning"),De(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){Se(this.getCanvas(),"blocklyCanvasTransitioning"),Se(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,r=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,r=-r-e.scrollTop,this.scroll(t,r)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var r=e?this.getBlockById(e):null;if(r){e=r.getRelativeToSurfaceXY(),r=t?{height:r.height,width:r.width}:r.getHeightWidth();var a=this.scale;t=(e.x+(this.RTL?-1:1)*r.width/2)*a,e=(e.y+r.height/2)*a,r=this.getMetrics(),this.scroll(-(t-r.viewWidth/2),-(e-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.scale}getAbsoluteScale(){const e=r=>{if(r.isFlyout){let a;const u=(a=r.targetWorkspace)==null?void 0:a.getFlyout();if(u instanceof aa)return u.getFlyoutScale()}return r.getScale()},t=(r,a)=>r.options.parentWorkspace&&r.options.parentWorkspace.getSvgGroup().contains(r.getSvgGroup())?t(r.options.parentWorkspace,a*e(r)):a*e(r);return t(this,1)}scroll(e,t){this.hideChaff(!0);const r=this.getMetrics();e=Math.min(e,-r.scrollLeft),t=Math.min(t,-r.scrollTop);const a=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);e=Math.max(e,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),t=Math.max(t,-a),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+r.scrollLeft),-(t+r.scrollTop),!1),e+=r.absoluteLeft,t+=r.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getTopComments(e=!1){return super.getTopComments(e)}getCommentById(e){return super.getCommentById(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){q(this.topBoundedElements,e)}getTopBoundedElements(e=!1){const t=[].concat(this.topBoundedElements);return e&&t.sort(this.sortByOrigin.bind(this)),t}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){if(this.keyboardMoveInProgress)return e.preventDefault(),e.stopPropagation(),null;const t=e.type==="pointerdown";let r;return t&&((r=this.currentGesture_)!=null&&r.hasStarted())&&(console.warn("Tried to start the same gesture twice."),this.currentGesture_.cancel()),!this.currentGesture_&&t&&(this.currentGesture_=new ua(e,this)),this.currentGesture_}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){Gi(),Wr(this),yi(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(It.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}addClass(e){this.injectionDiv&&De(this.injectionDiv,e)}removeClass(e){this.injectionDiv&&Se(this.injectionDiv,e)}setIsReadOnly(e){super.setIsReadOnly(e),e?this.addClass("blocklyReadOnly"):this.removeClass("blocklyReadOnly")}scrollBoundsIntoView(e,t=10){if(!ua.inProgress()){var r=this.getScale(),a=this.getMetricsManager().getViewMetrics(!0);if(a=new ut(a.top,a.top+a.height,a.left,a.left+a.width),!(e.left>=a.left&&e.top>=a.top&&e.right<=a.right&&e.bottom<=a.bottom)){e=e.clone(),e.top-=t,e.bottom+=t,e.left-=t,e.right+=t;var u=t=0;e.left<a.left?t=this.RTL?Math.min(a.left-e.left,a.right-e.right):a.left-e.left:e.right>a.right&&(t=this.RTL?a.right-e.right:Math.max(a.right-e.right,a.left-e.left)),e.top<a.top?u=a.top-e.top:e.bottom>a.bottom&&(u=Math.max(a.bottom-e.bottom,a.top-e.top)),this.scroll(this.scrollX+t*r,this.scrollY+u*r)}}}getFocusableElement(){return this.svgGroup_}getFocusableTree(){return this.isMutator&&this.options.parentWorkspace||this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(e)return null;let t;if(e=(t=this.targetWorkspace)==null?void 0:t.getFlyout(),this.isFlyout&&e){let a,u;return(u=(a=e.getContents().find(b=>(b=b.getElement(),ae(b)&&b.canBeFocused())))==null?void 0:a.getElement())!=null?u:null}let r;return(r=this.getTopBlocks(!0)[0])!=null?r:null}getNestedTrees(){const e=this.getAllBlocks().map(r=>r.getIcons()).flat().filter(r=>r instanceof o.MutatorIcon$$module$build$src$core$icons$mutator_icon&&r.bubbleIsVisible()).map(r=>{let a;return(a=r.getBubble())==null?void 0:a.getWorkspace()}).filter(r=>!!r),t=this.getFlyout(!0);return t&&e.push(t.getWorkspace()),e}searchForWorkspaceComment(e){for(const t of this.getTopComments())if(t instanceof Ji&&t.canBeFocused()&&t.getFocusableElement().id===e)return t}lookUpFocusableNode(e){var t;const r=(t=this.targetWorkspace)==null?void 0:t.getFlyout();if(this.isFlyout&&r){for(var a of r.getContents())if(t=a.getElement(),ae(t)&&t.canBeFocused()&&t.getFocusableElement().id===e)return t}if(a=e.indexOf("_field_"),t=e.indexOf("_connection_"),a!==-1){var u=e.substring(0,a);if(u=this.getBlockById(u)){for(var b of u.getFields())if(b.canBeFocused()&&b.getFocusableElement().id===e)return b}return null}if(t!==-1){if(u=e.substring(0,t),u=this.getBlockById(u)){for(const Z of u.getConnections_(!0))if(Z.id===e)return Z}return null}if(b=Math.max(e.indexOf(sc),e.indexOf(Gp),e.indexOf(Xp)),b!==-1&&(b=e.substring(0,b),b=this.searchForWorkspaceComment(b))){if(e.indexOf(sc)>-1)return b.getEditorFocusableNode();var U;return(U=b.view.getCommentBarButtons().find(Z=>Z.getFocusableElement().id.includes(e)))!=null?U:null}if((U=this.getAllBlocks(!1).find(Z=>Z.getFocusableElement().id===e))||(U=this.searchForWorkspaceComment(e)))return U;U=this.getAllBlocks().map(Z=>Z.getIcons()).flat();for(u of U){if(u.canBeFocused()&&u.getFocusableElement().id===e)return u;if(In(u)){if((U=u.getBubble())&&U.canBeFocused()&&U.getFocusableElement().id===e)return U;if(U instanceof ia&&U.getEditor().getFocusableElement().id===e)return U.getEditor()}}return null}onTreeFocus(e,t){}onTreeBlur(e){if(this.isFlyout&&this.targetWorkspace&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()){var t=this.targetWorkspace.getToolbox();t&&e===t||Q_(t)&&t.autoHide(!1)}}getNavigator(){return this.navigator}setNavigator(e){this.navigator=e}},yr=class extends dr{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.getWorkspace().id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new yr),t.varId=e.varId,t}},Dc=class extends yr{constructor(e){super(e),this.type=pe.VAR_CREATE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Dc),t.varType=e.varType,t.varName=e.varName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t=t.getVariableMap(),e?t.createVariable(this.varName,this.varType,this.varId):(e=t.getVariableById(this.varId))&&t.deleteVariable(e)}};s(Re.EVENT,pe.VAR_CREATE,Dc);var Rf=class{constructor(e,t,r,a){this.workspace=e,this.name=t,this.type=r||"",this.id=a||C()}getId(){return this.id}getName(){return this.name}setName(e){return this.name=e,this}getType(){return this.type}setType(e){return this.type=e,this}getWorkspace(){return this.workspace}save(){const e={name:this.getName(),id:this.getId()},t=this.getType();return t&&(e.type=t),e}static load(e,t){e=new this(t,e.name,e.type,e.id),t.getVariableMap().addVariable(e),be(new(Fe(pe.VAR_CREATE))(e))}};s(Re.VARIABLE_MODEL,si,Rf);var Lc=class extends yr{constructor(e){super(e),this.type=pe.VAR_DELETE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Lc),t.varType=e.varType,t.varName=e.varName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t=t.getVariableMap(),e?(e=t.getVariableById(this.varId))&&t.deleteVariable(e):t.createVariable(this.varName,this.varType,this.varId)}};s(Re.EVENT,pe.VAR_DELETE,Lc);var kc=class extends yr{constructor(e,t){super(e),this.type=pe.VAR_RENAME,e&&(this.oldName=e.getName(),this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new kc),t.oldName=e.oldName,t.newName=e.newName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");t=t.getVariableMap();const r=t.getVariableById(this.varId);e?r&&t.renameVariable(r,this.newName):r&&t.renameVariable(r,this.oldName)}};s(Re.EVENT,pe.VAR_RENAME,kc);var Nf=class{constructor(e,t=!1){this.workspace=e,this.potentialMap=t,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(const t of e.values())this.deleteVariable(t);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.getName()===t)return e;var r=e.getType();r=this.getVariable(t,r);const a=this.workspace.getAllBlocks(!1);let u="";this.potentialMap||(u=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0);try{r&&r.getId()!==e.getId()?this.renameVariableWithConflict(e,t,r,a):this.renameVariableAndUses(e,t,a)}finally{this.potentialMap||o.setGroup$$module$build$src$core$events$utils(u)}return e}changeVariableType(e,t){const r=e.getType();if(r===t)return e;var a=this.variableMap.get(r);a?.delete(e.getId()),a?.size===0&&this.variableMap.delete(r),e.setType(t);let u;return a=(u=this.variableMap.get(t))!=null?u:new Map,a.set(e.getId(),e),this.variableMap.has(t)||this.variableMap.set(t,a),be(new(Fe(pe.VAR_TYPE_CHANGE))(e,r,t)),e}renameVariableById(e,t){Wt("VariableMap.renameVariableById","v12","v13","VariableMap.renameVariable");const r=this.getVariableById(e);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(r,t)}renameVariableAndUses(e,t,r){for(this.potentialMap||be(new(Fe(pe.VAR_RENAME))(e,t)),e.setName(t),t=0;t<r.length;t++)r[t].updateVarName(e)}renameVariableWithConflict(e,t,r,a){const u=e.getType(),b=r.getName();for(t!==b&&this.renameVariableAndUses(r,t,a),t=0;t<a.length;t++)a[t].renameVarById(e.getId(),r.getId());this.potentialMap||be(new(Fe(pe.VAR_DELETE))(e));let U;(U=this.variableMap.get(u))==null||U.delete(e.getId())}createVariable(e,t,r){var a=this.getVariable(e,t);if(a){if(r&&a.getId()!==r)throw Error('Variable "'+e+'" is already in use and its id is "'+a.getId()+'" which conflicts with the passed in id, "'+r+'".');return a}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');if(a=r||C(),t=t||"",r=R(Re.VARIABLE_MODEL,this.workspace.options,!0),!r)throw Error("No variable model is registered.");a=new r(this.workspace,e,t,a);let u;return e=(u=this.variableMap.get(t))!=null?u:new Map,e.set(a.getId(),a),this.variableMap.has(t)||this.variableMap.set(t,e),this.potentialMap||be(new(Fe(pe.VAR_CREATE))(a)),a}addVariable(e){const t=e.getType();this.variableMap.has(t)||this.variableMap.set(t,new Map);let r;(r=this.variableMap.get(t))==null||r.set(e.getId(),e)}deleteVariable(e){const t=Jn(this.workspace,e.getId());let r="";this.potentialMap||(r=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0);try{for(let u=0;u<t.length;u++)t[u].dispose(!0);const a=this.variableMap.get(e.getType());a&&a.has(e.getId())&&(a.delete(e.getId()),this.potentialMap||be(new(Fe(pe.VAR_DELETE))(e)),a.size===0&&this.variableMap.delete(e.getType()))}finally{this.potentialMap||o.setGroup$$module$build$src$core$events$utils(r)}}deleteVariableById(e){Wt("VariableMap.deleteVariableById","v12","v13","Blockly.Variables.deleteVariable"),(e=this.getVariableById(e))&&o.deleteVariable$$module$build$src$core$variables(this.workspace,e)}getVariable(e,t){if(t=this.variableMap.get(t||""),!t)return null;let r;return(r=[...t.values()].find(a=>o.Names$$module$build$src$core$names.equals(a.getName(),e)))!=null?r:null}getVariableById(e){for(const t of this.variableMap.values())if(t.has(e)){let r;return(r=t.get(e))!=null?r:null}return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?[...e.values()]:[]}getTypes(){return[...this.variableMap.keys()]}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(...t.values());return e}getAllVariableNames(){Wt("VariableMap.getAllVariableNames","v12","v13","Blockly.Variables.getAllVariables");const e=[];for(const t of this.variableMap.values())for(const r of t.values())e.push(r.getName());return e}getVariableUsesById(e){return Wt("VariableMap.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),Jn(this.workspace,e)}};s(Re.VARIABLE_MAP,si,Nf);var wc=class extends Li{constructor(e,t){super(t),this.type=pe.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new wc),t.isOpen=e.isOpen,t}};s(Re.EVENT,pe.TRASHCAN_OPEN,wc);var Df=class extends oa{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,this.workspace.options.maxTrashcanContents<=0||(e=this.workspace.copyOptionsForFlyout(),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===dt.TOP?dt.BOTTOM:dt.TOP,this.flyout=new(R(Re.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===dt.RIGHT?dt.LEFT:dt.RIGHT,this.flyout=new(R(Re.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=de(_e.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=de(_e.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),de(_e.RECT,{width:Rr,height:Ta,y:Nr},e);const r=de(_e.IMAGE,{width:ni.width,x:-Mc,height:ni.height,y:-xc,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return r.setAttributeNS(ai,"xlink:href",this.workspace.options.pathToMedia+ni.url),e=de(_e.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),de(_e.RECT,{width:Rr,height:Nr},e),this.svgLid=de(_e.IMAGE,{width:ni.width,x:-Mc,height:ni.height,y:-xc,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(ai,"xlink:href",this.workspace.options.pathToMedia+ni.url),F(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),F(this.svgGroup,"pointerup",this,this.click),F(r,"pointerover",this,this.mouseOver),F(r,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){if(this.workspace.options.maxTrashcanContents>0){const e=this.flyout.createDom(_e.SVG);De(e,"blocklyTrashcanFlyout"),et(e,this.workspace.getParentSvg()),this.flyout.init(this.workspace)}this.workspace.getComponentManager().addComponent({component:this,weight:It.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[It.Capability.AUTOHIDEABLE,It.Capability.DELETE_AREA,It.Capability.DRAG_TARGET,It.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&He(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(r){return JSON.parse(r)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let r;(r=this.flyout)==null||r.show(e),t.cursor="";let a;(a=this.workspace.scrollbar)==null||a.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var t;(t=this.workspace.scrollbar)==null||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var r=wo(this.workspace,e);e=ko(r,new ct(Rr,Ta+Nr),fT,Lf,e,this.workspace),t=Mo(e,Lf,r.vertical===ji.TOP?hn.DOWN:hn.UP,t),this.top=t.top,this.left=t.left;var a;(a=this.svgGroup)==null||a.setAttribute("transform","translate("+this.left+","+this.top+")");var u;(u=this.flyout)==null||u.position()}}getBoundingRectangle(){return new ut(this.top,this.top+Ta+Nr,this.left,this.left+Rr)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+xc-ga;return e=e.left+Mc-ga,new ut(t,t+Nr+Ta+2*ga,e,e+Rr+2*ga)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=gT;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*wf),t=kf+this.lidOpen*(ET-kf),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&this.lidOpen<1&&(this.lidTask=setTimeout(this.animateLid.bind(this),TT/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===dt.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let r;(r=this.svgLid)==null||r.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:Rr-4)+","+(Nr-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*wf)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(Fe(pe.TRASHCAN_OPEN))(e,this.workspace.id),be(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(this.workspace.options.maxTrashcanContents<=0||!X(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(mT)}}}cleanBlockJson(e){function t(r){if(r){if(delete r.id,delete r.x,delete r.y,delete r.enabled,delete r.disabledReasons,r.icons&&r.icons.comment){var a=r.icons.comment;delete a.height,delete a.width,delete a.pinned}a=r.inputs;for(var u in a){var b=a[u];const U=b.block;b=b.shadow,U&&t(U),b&&t(b)}r.next&&(u=r.next,r=u.block,u=u.shadow,r&&t(r),u&&t(u))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},Rr=47,Ta=44,Nr=16,Lf=20,fT=20,ga=10,Mc=0,xc=32,mT=.1,TT=80,gT=4,kf=.4,ET=.8,wf=45,Io=null,Oo=null,Ea=void 0,Ii={};Ii.BlockPaster=Eo,Ii.copy=Ts,Ii.getLastCopiedData=gs,Ii.getLastCopiedLocation=Xl,Ii.getLastCopiedWorkspace=Es,Ii.paste=un,Ii.registry=Bu,Ii.setLastCopiedData=lh,Ii.setLastCopiedLocation=ch,Ii.setLastCopiedWorkspace=uh;var gn={};gn.CollapseCommentBarButton=Wp,gn.CommentBarButton=Ys,gn.CommentEditor=qs,gn.CommentView=fo,gn.DeleteCommentBarButton=Kp,gn.RenderedWorkspaceComment=Ji,gn.WorkspaceComment=Js;var Fi;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(Fi||(Fi={})),tu();var Pi={};Pi.names=Fi,Pi.registerCopy=ql,Pi.registerCut=Jl,Pi.registerDefaultShortcuts=tu,Pi.registerDelete=Yl,Pi.registerEscape=zl,Pi.registerPaste=Zl,Pi.registerRedo=eu,Pi.registerUndo=Ql;var $T=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=rp}save(e){return e=e.getProcedureMap().getProcedures().map(t=>iu(t)),e.length?e:null}load(e,t){const r=t.getProcedureMap();for(const a of e)r.add(nu(this.procedureModelClass,this.parameterModelClass,a,t))}clear(e){e.getProcedureMap().clear()}},$a={};$a.ProcedureSerializer=$T,$a.loadProcedure=nu,$a.saveProcedure=iu;var Mf=class{constructor(){this.priority=np}save(e){return e=e.getAllVariables().map(t=>t.save()),e.length?e:null}load(e,t){const r=x(Re.VARIABLE_MODEL,si);e.forEach(a=>{r?.load(a,t)})}clear(e){e.getVariableMap().clear()}};Mr("variables",new Mf);var xf={};xf.VariableSerializer=Mf;var Fc={};Fc.load=_h,Fc.save=dh;var ST={blocks:uo,exceptions:Mn,priorities:jm,procedures:$a,registry:Pu,variables:xf,workspaceComments:Ns,workspaces:Fc};"Blockly"in globalThis||(globalThis.Blockly={Msg:cp});var Pc="label",Ff=class{load(e,t){return e=new ri(t.getWorkspace(),t.targetWorkspace,e,!0),e.show(),new Or(e,Pc)}gapForItem(e,t){return t}disposeItem(e){e=e.getElement(),e instanceof ri&&e.dispose()}getType(){return Pc}};s(Re.FLYOUT_INFLATER,Pc,Ff);var Pf=class extends ha{constructor(e){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,e&&(this.GRID_UNIT=e),this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+this.FIELD_BORDER_RECT_Y_PADDING*2}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&He(this.selectedGlowFilter),this.replacementGlowFilter&&He(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,r=oi("c",[qe(25,-e),qe(71,-e),qe(t,0)]);return{height:e*.75,width:t,path:r}}makeHexagonal(){function e(r,a,u){var b=r/2;return b=b>t?t:b,u=u?-1:1,r=(a?-1:1)*r/2,Di(-u*b,r)+Di(u*b,r)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(r){return r/=2,r>t?t:r},height(r){return r},connectionOffsetY(r){return r/2},connectionOffsetX(r){return-r},pathDown(r){return e(r,!1,!1)},pathUp(r){return e(r,!0,!1)},pathRightDown(r){return e(r,!1,!0)},pathRightUp(r){return e(r,!1,!0)}}}makeRounded(){function e(a,u,b){const U=a>r?a-r:0;a=(a>r?r:a)/2;const Z=b===u?"0":"1";return Lt("a","0 0,"+Z,a,qe((b?1:-1)*a,(u?-1:1)*a))+Ze("v",(u?-1:1)*U)+Lt("a","0 0,"+Z,a,qe((b?-1:1)*a,(u?-1:1)*a))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=t*2;return{type:this.SHAPES.ROUND,isDynamic:!0,width(a){return a/=2,a>t?t:a},height(a){return a},connectionOffsetY(a){return a/2},connectionOffsetX(a){return-a},pathDown(a){return e(a,!1,!1)},pathUp(a){return e(a,!0,!1)},pathRightDown(a){return e(a,!1,!0)},pathRightUp(a){return e(a,!1,!0)}}}makeSquared(){function e(r,a,u){r-=t*2;const b=u===a?"0":"1";return Lt("a","0 0,"+b,t,qe((u?1:-1)*t,(a?-1:1)*t))+Ze("v",(a?-1:1)*r)+Lt("a","0 0,"+b,t,qe((u?-1:1)*t,(a?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(r){return t},height(r){return r},connectionOffsetY(r){return r/2},connectionOffsetX(r){return-r},pathDown(r){return e(r,!1,!1)},pathUp(r){return e(r,!0,!1)},pathRightDown(r){return e(r,!1,!0)},pathRightUp(r){return e(r,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Ke.INPUT_VALUE:case Ke.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.includes("Boolean")?this.HEXAGONAL:t&&t.includes("Number")?this.ROUNDED:(t&&t.includes("String"),this.ROUNDED);case Ke.PREVIOUS_STATEMENT:case Ke.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(je){return oi("c",[qe(je*u/2,0),qe(je*u*3/4,U/2),qe(je*u,U)])+sr([qe(je*u,b)])+oi("c",[qe(je*u/4,U/2),qe(je*u/2,U),qe(je*u,U)])+Ze("h",je*a)+oi("c",[qe(je*u/2,0),qe(je*u*3/4,-(U/2)),qe(je*u,-U)])+sr([qe(je*u,-b)])+oi("c",[qe(je*u/4,-(U/2)),qe(je*u/2,-U),qe(je*u,-U)])}const t=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,a=t/3,u=a/3,b=r/2,U=b/2,Z=e(1),Ce=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:r,pathLeft:Z,pathRight:Ce}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=Lt("a","0 0,0",e,qe(-e,e)),r=Lt("a","0 0,1",e,qe(-e,e)),a=Lt("a","0 0,0",e,qe(e,e)),u=Lt("a","0 0,1",e,qe(e,e));return{width:e,height:e,pathTop:t,pathBottom:a,rightWidth:e,rightHeight:e,pathTopRight:r,pathBottomRight:u}}generateSecondaryColour_(e){return vn("#000",e,.15)||e}generateTertiaryColour_(e){return vn("#000",e,.25)||e}createDom(e,t,r,a){super.createDom(e,t,r,a),e=de(_e.DEFS,{},e),t=de(_e.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),de(_e.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),r=de(_e.FECOMPONENTTRANSFER,{result:"outBlur"},t),de(_e.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),de(_e.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),de(_e.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=de(_e.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),de(_e.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=de(_e.FECOMPONENTTRANSFER,{result:"outBlur"},e),de(_e.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),de(_e.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),de(_e.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),de(_e.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e,a&&(a.style.setProperty("--blocklySelectedGlowFilter",`url(#${this.selectedGlowFilterId})`),a.style.setProperty("--blocklyReplacementGlowFilter",`url(#${this.replacementGlowFilterId})`))}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableField>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text,`,`${e} .blocklyNonEditableField>g>text,`,`${e} .blocklyEditableField>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .blocklyMenuItem,`,`${e}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabledPattern > .blocklyOutlinePath {`,"fill: var(--blocklyDisabledPattern)","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}",`${e} .blocklySelected>.blocklyPath.blocklyPathSelected {`,"fill: none;","filter: var(--blocklySelectedGlowFilter);","}",`${e} .blocklyReplaceable>.blocklyPath {`,"filter: var(--blocklyReplacementGlowFilter);","}"]}},Bf=class extends pa{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(e.height<=0)){if(oe.isSpacer(e)){const a=e.precedesStatement;var t=e.followsStatement;if(a||t){const u=this.constants_.INSIDE_CORNERS;var r=u.rightHeight;r=e.height-(a?r:0),t=t?u.pathBottomRight:"",e=r>0?Ze("V",e.yPos+r):"",this.outlinePath_+=t+e+(a?u.pathTopRight:"");return}}this.outlinePath_+=Ze("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=yt(e.xPos,this.info_.startY),this.outlinePath_+=Ze("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Ze("V",e.baseline),this.outlinePath_+=Ze("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=Xt(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-e.connectionWidth*2,r=e.height;return Ze("h",t)+e.shape.pathRightDown(r)+Ze("h",-t)+e.shape.pathUp(r)+"z"}drawStatementInput_(e){var t=e.getLastInput();const r=t.xPos+t.notchOffset+t.shape.width,a=this.constants_.INSIDE_CORNERS,u=t.shape.pathRight+Ze("h",-(t.notchOffset-a.width))+a.pathTop,b=e.height-2*a.height;t=a.pathBottom+Ze("h",t.notchOffset-a.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=Ze("H",r)+u+Ze("v",b)+t+Ze("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===Ke.NEXT_STATEMENT||t.type===Ke.PREVIOUS_STATEMENT||t.type===Ke.OUTPUT_VALUE&&!e.isDynamicShape)return super.drawConnectionHighlightPath(e);e=t.type===Ke.INPUT_VALUE?Xt(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):Xt(e.width,-e.height/2)+e.shape.pathDown(e.height);const r=t.getSourceBlock();let a,u;return(u=(a=r.pathObject).addConnectionHighlight)==null?void 0:u.call(a,t,e,t.getOffsetInBlock(),r.RTL)}},Kn=class extends Tt{constructor(e,t,r,a,u,b,U){if(super(Tt.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",r=Number(Dt(r)),t=Number(Dt(t)),isNaN(r)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(r<=0||t<=0)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new ct(t,r+Kn.Y_PADDING),this.imageHeight=r,typeof u=="function"&&(this.clickHandler=u),e!==Tt.SKIP_SETUP&&(U?this.configure_(U):(this.flipRtl=!!b,this.altText=Dt(a)||""),this.setValue(Dt(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=Dt(e.alt))}initView(){this.imageElement=de(_e.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(ai,"xlink:href",this.value_),this.fieldGroup_&&De(this.fieldGroup_,"blocklyImageField"),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(ai,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}isClickable(){return super.isClickable()&&!!this.clickHandler}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};Kn.Y_PADDING=1,Ni("field_image",Kn),Kn.prototype.DEFAULT_VALUE="";var Sa=14,Dr=class extends Tt{set size_(e){super.size_=e}get size_(){const e=super.size_;return e.width<Sa&&(e.width=Sa),e}constructor(e,t,r){super(Tt.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,e!==Tt.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new xt;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()),this.fieldGroup_&&De(this.fieldGroup_,"blocklyInputField")}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new xt;let t;return this.fullBlockClickTarget_=!((t=this.getConstants())==null||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,t=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&ue()&&this.value_!==e&&t&&be(new(Fe(pe.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new xt;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.getColourTertiary())):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(Se(e,"blocklyInvalidInput"),Pt(e,wt.INVALID,!1)):(De(e,"blocklyInvalidInput"),Pt(e,wt.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new xt;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1,r=!0){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(Fh||Ou||Cs)?this.showPromptEditor():this.showInlineEditor(t,r)}showPromptEditor(){Bo(o.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e,t){const r=this.getSourceBlock();if(!r)throw new xt;ts(this,r.RTL,this.widgetDispose_.bind(this),this.workspace_,t),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new xt;o.setGroup$$module$build$src$core$events$utils(!0);const t=ir();var r=this.getClickTarget_();if(!r)throw Error("A click target has not been set.");De(r,"blocklyEditing"),r=document.createElement("input"),r.className="blocklyHtmlInput",r.setAttribute("spellcheck",this.spellcheck_);const a=this.workspace_.getAbsoluteScale();var u=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";return t.style.fontSize=u,r.style.fontSize=u,u=Dr.BORDERRADIUS*a+"px",this.isFullBlockField()&&(u=this.getScaledBBox(),u=(u.bottom-u.top)/2+"px",e=e.getParent()?e.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),r.style.border=1*a+"px solid "+e,t.style.borderRadius=u,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*a+"px")),r.style.borderRadius=u,t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(r),r}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ue()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(be(new(Fe(pe.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),o.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=ir().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");Se(e,"blocklyEditing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=y(e,"keydown",this,this.onHtmlInputKeyDown_),this.onInputWrapper=y(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(L(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onInputWrapper&&(L(this.onInputWrapper),this.onInputWrapper=null)}onHtmlInputKeyDown_(e){if(e.key==="Enter")Cn(this),yi();else if(e.key==="Escape")this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),Cn(this),yi();else if(e.key==="Tab"){e.preventDefault();var t,r=(t=this.workspace_)==null?void 0:t.getCursor();t=a=>(a instanceof Dr||a instanceof St&&a.isSimpleReporter())&&a!==this.getSourceBlock(),e=e.shiftKey?r?.getPreviousNode(this,t,!1):r?.getNextNode(this,t,!1),e=e instanceof St&&e.isSimpleReporter()?e.getFields().next().value:e,e instanceof Dr&&(Cn(this),yi(),r=e.getSourceBlock(),e.isFullBlockField()&&r&&r instanceof St?o.getFocusManager$$module$build$src$core$focus_manager().focusNode(r):o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e),e.showEditor())}}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ue()&&this.value_!==e&&be(new(Fe(pe.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){Ci().then(()=>{const e=this.getSourceBlock();if(!e)throw new xt;const t=ir(),r=this.getScaledBBox();t.style.width=r.right-r.left+"px",t.style.height=r.bottom-r.top+"px";const a=r.top;t.style.left=`${e.RTL?r.right-t.offsetWidth:r.left}px`,t.style.top=`${a}px`})}repositionForWindowResize(){let e;const t=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return t instanceof St?(lr(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),t)||this.resizeEditor_(),!0):!1}positionTextElement_(e,t){const r=e*2+t;super.positionTextElement_(e+(r<Sa?(Sa-r)/2:0),t)}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};Dr.BORDERRADIUS=4,o.FieldTextInput$$module$build$src$core$field_textinput=class extends Dr{constructor(e,t,r){super(e,t,r)}initView(){super.initView(),this.fieldGroup_&&De(this.fieldGroup_,"blocklyTextInputField")}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(Dt(e.text),void 0,e)}},Ni("field_input",o.FieldTextInput$$module$build$src$core$field_textinput),o.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",o.FieldTextInput$$module$build$src$core$field_textinput;var Uf=class extends bc{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Aa=class extends _a{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},Vf=class extends xi{constructor(e){super(e),this.width=this.height=0,this.type|=oe.getType("RIGHT_CONNECTION")}},Hf=class extends Rc{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},Gf=class extends bo{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new Hf(this.constants_),this.bottomRow=new Uf(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=t.statementInputCount>0,this.rightSide=this.outputConnection?new Vf(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?t instanceof tn||e instanceof _i||t instanceof _i?!0:e instanceof o.ValueInput$$module$build$src$core$inputs$value_input||e instanceof wi||e instanceof tn?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&oe.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&oe.isLeftRoundedCorner(e)&&t&&(oe.isPreviousConnection(t)||oe.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&oe.isLeftSquareCorner(e)&&t&&oe.isHat(t)||e&&oe.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(oe.isTopRow(e)&&oe.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const r=oe.isInputRow(e)&&e.hasStatement,a=oe.isInputRow(t)&&t.hasStatement;return a||r?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),a&&r?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):oe.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):oe.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const r=this.width-this.startX;return oe.isInputRow(e)&&e.hasStatement||oe.isInputRow(t)&&t.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r}getElemCenterline_(e,t){if(e.hasStatement&&!oe.isSpacer(t)&&!oe.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(oe.isInlineInput(t)){const r=t.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return e.yPos+r.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof wi||e instanceof tn)&&t.hasDummyInput&&t.align===o.Align$$module$build$src$core$inputs$align.LEFT&&e.align===o.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof _i){t.elements.push(new Aa(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let r;for(let a=0;a<e.elements.length;a++){const u=e.elements[a];if(oe.isSpacer(u)&&(r=u),oe.isField(u)&&u.parentInput===this.rightAlignedDummyInputs.get(e))break}if(r){r.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let u=2;u<this.rows.length-1;u+=2){var r=this.rows[u-1];const b=this.rows[u];var a=this.rows[u+1];if(r=u===2?!!this.topRow.hasPreviousConnection:!!r.followsStatement,a=u+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!a.precedesStatement,oe.isInputRow(b)&&b.hasStatement){b.measure();let U,Z;t=b.width-((Z=(U=b.getLastInput())==null?void 0:U.width)!=null?Z:0)+e}else if(r&&(u===2||a)&&oe.isInputRow(b)&&!b.hasStatement){a=b.xPos,r=null;for(let U=0;U<b.elements.length;U++){const Z=b.elements[U];oe.isSpacer(Z)&&(r=Z),!(r&&(oe.isField(Z)||oe.isInput(Z))&&a<t)||oe.isField(Z)&&(Z.field instanceof Gn||Z.field instanceof Kn)||(r.width+=t-a),a+=Z.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,r=0;r<this.rows.length;r++){const a=this.rows[r];a.yPos=t,t+=a.height}this.height=t,r=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(r),r=e.width(r),this.outputConnection.height=t,this.outputConnection.width=r,this.outputConnection.startX=r,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(r),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=r,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=r,this.width+=r+e,this.widthWithChildren+=r+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var r=this.rows[t];if(!oe.isInputRow(r))continue;e=r.elements[r.elements.length-2];let a=this.getNegativeSpacing_(r.elements[1]),u=this.getNegativeSpacing_(e);e=a+u;const b=this.constants_.MIN_BLOCK_WIDTH+this.outputConnection.width*2;this.width-e<b&&(e=this.width-b,a=e/2,u=e/2),r.elements.unshift(new hi(this.constants_,-a)),r.elements.push(new hi(this.constants_,-u))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)r=this.rows[t],oe.isTopOrBottomRow(r)&&(r.elements[1].width-=e),r.width-=e,r.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var r=this.outputConnection.shape.type;const a=this.constants_;if(this.inputRows.length>1)return r===a.SHAPES.ROUND?(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=this.height/2>r?r:this.height/2,t-r*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r)))):0;if(oe.isInlineInput(e)){const u=e.connectedBlock;return e=u?u.pathObject.outputShapeType:e.shape.type,e==null||u&&u.outputConnection&&(u.statementInputCount||u.nextConnection)||r===a.SHAPES.HEXAGONAL&&r!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[r][e]}return oe.isField(e)?r===a.SHAPES.ROUND&&e.field instanceof o.FieldTextInput$$module$build$src$core$field_textinput?t-2.75*a.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:oe.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let a=2;a<this.rows.length-1;a+=2){const u=this.rows[a-1],b=this.rows[a],U=this.rows[a+1];var e=a===2,t=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!U.precedesStatement;if(e?this.topRow.hasPreviousConnection:u.followsStatement){var r=b.elements[1];if(r=b.elements.length===3&&r instanceof Oc&&(r.field instanceof Gn||r.field instanceof Kn),!e&&r)u.height-=this.constants_.SMALL_PADDING,U.height-=this.constants_.SMALL_PADDING,b.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)u.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<b.elements.length;t++)if(r=b.elements[t],oe.isInlineInput(r)&&r.connectedBlock&&!r.connectedBlock.isShadow()&&r.connectedBlock.getHeightWidth().height>=40){e=!0;break}e&&(u.height-=this.constants_.SMALL_PADDING,U.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},Wf=class extends fa{constructor(e,t,r){super(e,t,r),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=r}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.getColourTertiary());for(const r of this.outlines.values())r.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.classList.add("blocklyPathSelected"),Se(this.svgPathSelected,jt.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Se(this.svgPathSelected,jt.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME),this.svgPathSelected.removeAttribute("tabindex"),this.svgPathSelected.removeAttribute("id"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,de(_e.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,r;(t=this.outlines.get(e))==null||(r=t.parentNode)==null||r.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Bc=class extends ma{constructor(e){super(e)}makeConstants_(){return new Pf}makeRenderInfo_(e){return new Gf(this,e)}makeDrawer_(e,t){return new Bf(e,t)}makePathObject(e,t){return new Wf(e,t,this.getConstants())}getConstants(){return this.constants_}};jr("zelos",Bc);var Xf=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,r){o.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=r,r.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{o.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){o.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{o.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===Ke.PREVIOUS_STATEMENT||t.type===Ke.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof Bc)}previewMarker(e,t){const r=e.getSourceBlock(),a=this.createInsertionMarker(r),u=this.getMatchingConnection(r,a,e);if(!u)return null;a.queueRender(),on(),u.connect(t);const b={x:t.x-u.x,y:t.y-u.y},U=u.getOffsetInBlock().clone();return Ci().then(()=>{if(!a.isDeadOrDying()){o.disable$$module$build$src$core$events$utils();try{a?.positionNearConnection(u,b,U),a?.getSvgRoot().setAttribute("visibility","visible")}finally{o.enable$$module$build$src$core$events$utils()}}}),u}serializeBlockToInsertionMarker(e){const t=pi(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!t)throw Error(`Failed to serialize source block. ${e.toDevString()}`);return t}createInsertionMarker(e){e=this.serializeBlockToInsertionMarker(e),e=sn(e,this.workspace);for(const t of e.getDescendants(!1))t.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,t,r){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let a=0;a<e.length;a++)if(e[a]===r)return t[a];return null}hidePreview(){o.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{o.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),r=t.outputConnection;let a;if((a=t.previousConnection)!=null&&a.targetConnection||r!=null&&r.targetConnection)t.unplug(!0);else{let u;(u=e.targetBlock())==null||u.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};s(Re.CONNECTION_PREVIEWER,si,Xf);var $n={};$n.Align=o.Align$$module$build$src$core$inputs$align,$n.DummyInput=wi,$n.EndRowInput=tn,$n.Input=br,$n.StatementInput=_i,$n.ValueInput=o.ValueInput$$module$build$src$core$inputs$value_input,$n.inputTypes=o.inputTypes$$module$build$src$core$inputs$input_types;var Kf=!1,zf;o.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=O());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let r=0,a;a=e[r];r++){let u=this.blockToCode(a);Array.isArray(u)&&(u=u[0]),u&&(a.outputConnection&&(u=this.scrubNakedValue(u),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,a)+u),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,a))),t.push(u))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let r=0;r<e.length;r++){const a=e[r].getCommentText();a&&t.push(a)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var r=this.forBlock[e.type];if(typeof r!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(r=r.call(e,e,this),Array.isArray(r)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,r[0],t),r[1]]}if(typeof r=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,e)+r),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,r,t);if(r===null)return"";throw SyntaxError("Invalid code generated: "+r)}valueToCode(e,t,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+e.type);var a=e.getInputTargetBlock(t);if(!a&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(!a||(t=this.blockToCode(a),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${a.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+a.type);if(!e)return"";a=!1;var u=Math.floor(r);const b=Math.floor(t);if(u<=b&&(u!==b||u!==0&&u!==99)){for(a=!0,u=0;u<this.ORDER_OVERRIDES.length;u++)if(this.ORDER_OVERRIDES[u][0]===r&&this.ORDER_OVERRIDES[u][1]===t){a=!1;break}}return a&&(e="("+e+")"),e}statementToCode(e,t){const r=e.getInputTargetBlock(t);if(!r&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(r),typeof e!="string")throw TypeError("Expecting code from statement block: "+(r&&r.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const r=this.nameDB_.getDistinctName(e,o.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=r,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);let a;for(;a!==t;)a=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,o.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,o.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,r){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},zf={},zf.CodeGenerator=o.CodeGenerator$$module$build$src$core$generator;var Uc=class extends aa{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),r=t.getScrollMetrics(),a=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(r.top+(r.height-a.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),r=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===dt.LEFT?e.width:r.width-this.getWidth():this.toolboxPosition_===dt.LEFT?0:r.width:this.toolboxPosition_===dt.LEFT?0:r.width+t.left-this.getWidth()}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height;var t=this.getWidth()-this.CORNER_RADIUS;this.setBackgroundPath(t,e.height-2*this.CORNER_RADIUS),e=this.getX(),t=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,t)}}setBackgroundPath(e,t){const r=this.toolboxPosition_===dt.RIGHT;var a=e+this.CORNER_RADIUS;a=["M "+(r?a:0)+",0"],a.push("h",r?-e:e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",Math.max(0,t)),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",r?e:-e),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=D(e);if(t.y){const r=this.workspace_.getMetricsManager(),a=r.getScrollMetrics();t=r.getViewMetrics().top-a.top+t.y;let u;(u=this.workspace_.scrollbar)==null||u.setY(t),Wr(this.workspace_),yi()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;var t=this.MARGIN;const r=this.RTL?t:t+this.tabWidth_;for(const a of e)a.getElement().moveBy(r,t),t+=a.getElement().getBoundingRectangle().getHeight()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===dt.LEFT?new ut(-1e9,1e9,-1e9,t+e.width):new ut(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((t,r)=>Math.max(t,r.getElement().getBoundingRectangle().getWidth()),0);if(e+=this.MARGIN*1.5+this.tabWidth_,e*=this.workspace_.scale,e+=kt.scrollbarThickness,this.getWidth()!==e){if(this.RTL)for(const t of this.getContents()){const r=t.getElement().getBoundingRectangle().left,a=e/this.workspace_.scale-t.getElement().getBoundingRectangle().getWidth()-this.MARGIN-this.tabWidth_;t.getElement().moveBy(a-r,0)}this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==dt.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};Uc.registryName="verticalFlyout",s(Re.FLYOUTS_VERTICAL_TOOLBOX,si,Uc);var Yf=class extends aa{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),r=t.getScrollMetrics(),a=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(r.left+(r.width-a.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),r=e.getViewMetrics();e=e.getToolboxMetrics();const a=this.toolboxPosition_===dt.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?a?e.height:r.height-this.getHeight():a?0:r.height:a?0:r.height+t.top-this.getHeight()}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,e=e.width-2*this.CORNER_RADIUS;var t=this.getHeight()-this.CORNER_RADIUS;this.setBackgroundPath(e,t),e=this.getX(),t=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,t)}}setBackgroundPath(e,t){const r=this.toolboxPosition_===dt.TOP,a=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(a.push("h",e+2*this.CORNER_RADIUS),a.push("v",t),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",-e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),a.push("h",e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",t),a.push("h",-e-2*this.CORNER_RADIUS)),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=D(e);if(t=t.x||t.y){const r=this.workspace_.getMetricsManager(),a=r.getScrollMetrics();t=r.getViewMetrics().left-a.left+t;let u;(u=this.workspace_.scrollbar)==null||u.setX(t),Wr(this.workspace_),yi()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;const t=this.MARGIN;let r=t+this.tabWidth_;this.RTL&&(e=e.reverse());for(const a of e)e=a.getElement().getBoundingRectangle(),e=this.RTL?r+e.getWidth():r,a.getElement().moveBy(e,t),r+=a.getElement().getBoundingRectangle().getWidth()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===dt.TOP?new ut(-1e9,t+e.height,-1e9,1e9):new ut(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((t,r)=>Math.max(t,r.getElement().getBoundingRectangle().getHeight()),0);e+=this.MARGIN*1.5,e*=this.workspace_.scale,e+=kt.scrollbarThickness,this.getHeight()!==e&&(this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==dt.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets())}};s(Re.FLYOUTS_HORIZONTAL_TOOLBOX,si,Yf);var vo=class extends qt{constructor(e,t,r,a,u){super(Tt.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=vo.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new ct(0,0),e!==Tt.SKIP_SETUP&&(u?this.configure_(u):this.setTypes(r,a),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new xt;this.variable||(e=o.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}initView(){super.initView(),De(this.fieldGroup_,"blocklyVariableField")}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new xt;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new xt;const r=e.getAttribute("id"),a=e.textContent,u=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=o.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,r,a,u),u!==null&&u!==t.getType())throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.getType()+", and does not match variable field that references it: "+Ri(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.getName(),this.variable.getType()&&e.setAttribute("variabletype",this.variable.getType()),e}saveState(e){var t=this.saveLegacyState(vo);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.getName(),t.type=this.variable.getType())),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new xt;this.loadLegacyState(vo,e)||(e=o.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.getName():""}getVariable(){return this.variable}getDefaultType(){return this.defaultType}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new xt;return t=o.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.getType(),this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new xt;this.variable=o.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let r=0;r<t.length;r++)if(e===t[r])return!0;return!1}getVariableTypes(){if(this.variableTypes)return this.variableTypes;if(!this.sourceBlock_||this.sourceBlock_.isDeadOrDying())return[""];let e=this.sourceBlock_.workspace.getVariableMap().getTypes();if(this.sourceBlock_.isInFlyout){const t=this.sourceBlock_.workspace.getPotentialVariableMap();if(!t)return e;e=Array.from(new Set([...e,...t.getTypes()]))}return e}setTypes(e=null,t=""){var r=this.getText();if(Array.isArray(e)){if(e.length===0)throw Error(`'variableTypes' of field variable ${r} was an empty list. If you want to include all variable types, pass 'null' instead.`);r=!1;for(let a=0;a<e.length;a++)e[a]===t&&(r=!0);if(!r)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error(`'variableTypes' was not an array or null in the definition of FieldVariable ${r}`);this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===_c&&this.variable){o.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===hc&&this.variable){e=this.variable.getWorkspace(),o.deleteVariable$$module$build$src$core$variables(e,this.variable,this.sourceBlock_);return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Dt(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];var r=this.getSourceBlock();if(r&&!r.isDeadOrDying()){r=r.workspace;const b=this.getVariableTypes();for(let U=0;U<b.length;U++){const Z=b[U],Ce=r.getVariableMap().getVariablesOfType(Z);if(t=t.concat(Ce),r.isFlyout){var a=void 0,u=void 0;t=t.concat((u=(a=r.getPotentialVariableMap())==null?void 0:a.getVariablesOfType(Z))!=null?u:[])}}}for(t.sort(qn),a=[],u=0;u<t.length;u++)a[u]=[t[u].getName(),t[u].getId()];return a.push([o.Msg$$module$build$src$core$msg.RENAME_VARIABLE,_c]),o.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&a.push([o.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),hc]),a}};Ni("field_variable",vo);var Vc=class extends Dr{constructor(e,t,r,a,u,b){super(Tt.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==Tt.SKIP_SETUP&&(b?this.configure_(b):this.setConstraints(t,r,a),this.setValue(e),u&&this.setValidator(u))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,r){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(r),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.includes("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const r=t.indexOf(".");this.decimalPlaces=r===-1?e?0:null:t.length-r-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return this.min_>-1/0&&(e.min=`${this.min_}`,Pt(e,wt.VALUEMIN,this.min_)),this.max_<1/0&&(e.max=`${this.max_}`,Pt(e,wt.VALUEMAX,this.max_)),e}initView(){super.initView(),this.fieldGroup_&&De(this.fieldGroup_,"blocklyNumberField")}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Ni("field_number",Vc),Vc.prototype.DEFAULT_VALUE=0;var jf=class extends Gn{constructor(e,t,r){super(String(e??""),t,r),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Dt(e.text),void 0,e)}};Ni("field_label_serializable",jf);var zn=class extends Tt{constructor(e,t,r){super(Tt.SKIP_SETUP),this.SERIALIZABLE=!0,this.value_=this.value_,this.checkChar=zn.CHECK_CHAR,e!==Tt.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(zn);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();De(this.fieldGroup_,"blocklyCheckboxField"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||zn.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};zn.CHECK_CHAR="✓",Ni("field_checkbox",zn),zn.prototype.DEFAULT_VALUE=!1;var qf=class{constructor(e,t){this.draggable=e,this.workspace=t,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){o.getGroup$$module$build$src$core$events$utils()||o.setGroup$$module$build$src$core$events$utils(!0),this.draggable.startDrag(e)}onDrag(e,t){this.moveDraggable(e,t),t=this.getRoot(this.draggable),fi(t)&&t.setDeleteStyle(this.wouldDeleteDraggable(e,t)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const t=this.getRoot(this.draggable);if(this.dragTarget!==e){let r;(r=this.dragTarget)==null||r.onDragExit(t),e?.onDragEnter(t)}e?.onDragOver(t),this.dragTarget=e}moveDraggable(e,t){t=this.pixelsToWorkspaceUnits(t),t=Me.sum(this.startLoc,t),this.draggable.drag(t,e)}wouldDeleteDraggable(e,t){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,It.Capability.DELETE_AREA)?e.wouldDelete(t):!1}onDragEnd(e){const t=o.getGroup$$module$build$src$core$events$utils();var r=this.workspace.getDragTarget(e);const a=this.getRoot(this.draggable);if(r){let u;(u=this.dragTarget)==null||u.onDrop(a)}this.shouldReturnToStart(e,a)&&this.draggable.revertDrag(),(r=fi(a)&&this.wouldDeleteDraggable(e,a))&&this.draggable instanceof St&&ls(this.draggable.getRootBlock()),this.draggable.endDrag(e),r&&fi(a)&&(o.setGroup$$module$build$src$core$events$utils(t),a.dispose()),o.setGroup$$module$build$src$core$events$utils(!1),!r&&ae(this.draggable)&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.draggable)}getRoot(e){return e instanceof St?e.getRootBlock():e}shouldReturnToStart(e,t){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(t):!1}pixelsToWorkspaceUnits(e){return e=new Me(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};s(Re.BLOCK_DRAGGER,si,qf);var Co={};Co.BlockDragStrategy=ef,Co.BubbleDragStrategy=Yp,Co.CommentDragStrategy=Vp,Co.Dragger=qf;var Hc=class extends Li{constructor(e,t,r){super(e?e.workspace.id:void 0),this.type=pe.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=t,this.blocks=r)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Hc),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};s(Re.EVENT,pe.BLOCK_DRAG,Hc);var Gc=class extends xn{constructor(e,t,r,a){super(e),this.type=pe.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=t,this.oldValue=r,this.newValue=a)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Gc),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};s(Re.EVENT,pe.BLOCK_FIELD_INTERMEDIATE_CHANGE,Gc);var Wc=class extends xn{constructor(e){super(e),this.type=pe.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Wc),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(r=e.oldCoordinate.split(","),t.oldCoordinate=new Me(Number(r[0]),Number(r[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(r=e.newCoordinate.split(","),t.newCoordinate=new Me(Number(r[0]),Number(r[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const r=t.getParent();return r?(e.parentId=r.id,(t=r.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Me.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var r=t.getBlockById(this.blockId);if(r){var a=e?this.newParentId:this.oldParentId,u=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,a){var b=t.getBlockById(a);if(!b){console.warn("Can't connect to non-existent block: "+a);return}}if(r.getParent()&&r.unplug(),e)u=r.getRelativeToSurfaceXY(),r.moveBy(e.x-u.x,e.y-u.y,this.reason);else{t=r.outputConnection,(!t||r.previousConnection&&r.previousConnection.isConnected())&&(t=r.previousConnection);let U,Z;r=(Z=t)==null?void 0:Z.type,u?(r=b.getInput(u))&&(U=r.connection):r===Ke.PREVIOUS_STATEMENT&&(U=b.nextConnection),U&&t?t.connect(U):console.warn("Can't connect to non-existent input: "+u)}}else console.warn("Can't move non-existent block: "+this.blockId)}};s(Re.EVENT,pe.BLOCK_MOVE,Wc);var Xc=class extends Li{constructor(e,t,r){super(e?e.workspace.id:void 0),this.type=pe.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=r)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Xc),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},Kc;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(Kc||(Kc={})),s(Re.EVENT,pe.BUBBLE_OPEN,Xc);var Bi=class extends dr{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=o.getGroup$$module$build$src$core$events$utils(),this.recordUndo=ve())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Bi),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){const r=e.getEventWorkspace_();if(t){if(!e.json)throw Error("Encountered a comment event without proper json");xr(e.json,r)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=r.getCommentById(e.commentId))?t.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},zc=class extends Bi{constructor(e,t,r){super(e),this.type=pe.COMMENT_CHANGE,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof r>"u"?"":r)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new zc),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var r=e?this.newContents_:this.oldContents_;if(r===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setText(r)}else console.warn("Can't change non-existent comment: "+this.commentId)}};s(Re.EVENT,pe.COMMENT_CHANGE,zc);var Yc=class extends Bi{constructor(e,t){super(e),this.newCollapsed=t,this.type=pe.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Yc),t.newCollapsed=e.newCollapsed,t}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=t.getCommentById(this.commentId))?t.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};s(Re.EVENT,pe.COMMENT_COLLAPSE,Yc);var jc=class extends Bi{constructor(e){super(e),this.type=pe.COMMENT_CREATE,e&&(this.xml=Kr(e),this.json=Yn(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ri(this.xml),e.json=this.json,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new jc),t.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}run(e){Bi.CommentCreateDeleteHelper(this,e)}};s(Re.EVENT,pe.COMMENT_CREATE,jc);var qc=class extends Bi{constructor(e){super(e),this.type=pe.COMMENT_DELETE,e&&(this.xml=Kr(e),this.json=Yn(e,{addCoordinates:!0}))}run(e){Bi.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ri(this.xml),e.json=this.json,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new qc),t.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}};s(Re.EVENT,pe.COMMENT_DELETE,qc);var Jc=class extends Li{constructor(e,t){super(e?e.workspace.id:void 0),this.type=pe.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=t)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Jc),t.isStart=e.isStart,t.commentId=e.commentId,t}};s(Re.EVENT,pe.COMMENT_DRAG,Jc);var Zc=class extends Bi{constructor(e){super(e),this.type=pe.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Zc),r=e.oldCoordinate.split(","),t.oldCoordinate_=new Me(Number(r[0]),Number(r[1])),r=e.newCoordinate.split(","),t.newCoordinate_=new Me(Number(r[0]),Number(r[1])),t}isNull(){return Me.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");t.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};s(Re.EVENT,pe.COMMENT_MOVE,Zc);var Qc=class extends Bi{constructor(e){super(e),this.type=pe.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Qc),t.oldSize=new ct(e.oldWidth,e.oldHeight),t.newSize=new ct(e.newWidth,e.newHeight),t}isNull(){return ct.equals(this.oldSize,this.newSize)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");t.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};s(Re.EVENT,pe.COMMENT_RESIZE,Qc);var ed=class extends Li{constructor(e,t,r){super(r),this.type=pe.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new ed),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};s(Re.EVENT,pe.TOOLBOX_ITEM_SELECT,ed);var id=class extends yr{constructor(e,t,r){super(e),this.oldType=t,this.newType=r,this.type=pe.VAR_TYPE_CHANGE}toJson(){const e=super.toJson();if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");return e.oldType=this.oldType,e.newType=this.newType,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new id),t.oldType=e.oldType,t.newType=e.newType,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");const r=t.getVariableMap().getVariableById(this.varId);r&&(e?t.getVariableMap().changeVariableType(r,this.newType):t.getVariableMap().changeVariableType(r,this.oldType))}};s(Re.EVENT,pe.VAR_TYPE_CHANGE,id);var Jf=class extends dr{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=pe.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};s(Re.EVENT,pe.FINISHED_LOADING,Jf);var Zf,Qf,em,tm,im,nm,rm,om,sm,am,lm,um,cm,dm,_m,hm,pm,fm,mm,Tm,gm,Em,$m,Sm,Ge;o.BLOCK_CHANGE$$module$build$src$core$events$events=pe.BLOCK_CHANGE,o.BLOCK_CREATE$$module$build$src$core$events$events=pe.BLOCK_CREATE,o.BLOCK_DELETE$$module$build$src$core$events$events=pe.BLOCK_DELETE,Zf=pe.BLOCK_DRAG,o.BLOCK_MOVE$$module$build$src$core$events$events=pe.BLOCK_MOVE,Qf=pe.BLOCK_FIELD_INTERMEDIATE_CHANGE,em=pe.BUBBLE_OPEN,tm=pe.BLOCK_CHANGE,im=pe.CLICK,nm=pe.COMMENT_CHANGE,rm=pe.COMMENT_CREATE,om=pe.COMMENT_DELETE,sm=pe.COMMENT_MOVE,am=pe.COMMENT_RESIZE,lm=pe.COMMENT_DRAG,um=pe.BLOCK_CREATE,cm=pe.BLOCK_DELETE,dm=pe.FINISHED_LOADING,_m=pe.BLOCK_MOVE,hm=pe.SELECTED,pm=pe.THEME_CHANGE,fm=pe.TOOLBOX_ITEM_SELECT,mm=pe.TRASHCAN_OPEN,Tm=pe.UI,gm=pe.VAR_CREATE,Em=pe.VAR_DELETE,$m=pe.VAR_RENAME,Sm=pe.VIEWPORT_CHANGE,Ge={},Ge.Abstract=dr,Ge.BLOCK_CHANGE=o.BLOCK_CHANGE$$module$build$src$core$events$events,Ge.BLOCK_CREATE=o.BLOCK_CREATE$$module$build$src$core$events$events,Ge.BLOCK_DELETE=o.BLOCK_DELETE$$module$build$src$core$events$events,Ge.BLOCK_DRAG=Zf,Ge.BLOCK_FIELD_INTERMEDIATE_CHANGE=Qf,Ge.BLOCK_MOVE=o.BLOCK_MOVE$$module$build$src$core$events$events,Ge.BUBBLE_OPEN=em,Ge.BUMP_EVENTS=Uh,Ge.BlockBase=xn,Ge.BlockChange=Fn,Ge.BlockCreate=ac,Ge.BlockDelete=dc,Ge.BlockDrag=Hc,Ge.BlockFieldIntermediateChange=Gc,Ge.BlockMove=Wc,Ge.BubbleOpen=Xc,Ge.BubbleType=Kc,Ge.CHANGE=tm,Ge.CLICK=im,Ge.COMMENT_CHANGE=nm,Ge.COMMENT_CREATE=rm,Ge.COMMENT_DELETE=om,Ge.COMMENT_DRAG=lm,Ge.COMMENT_MOVE=sm,Ge.COMMENT_RESIZE=am,Ge.CREATE=um,Ge.Click=Du,Ge.ClickTarget=Lu,Ge.CommentBase=Bi,Ge.CommentChange=zc,Ge.CommentCollapse=Yc,Ge.CommentCreate=jc,Ge.CommentDelete=qc,Ge.CommentDrag=Jc,Ge.CommentMove=Zc,Ge.CommentResize=Qc,Ge.DELETE=cm,Ge.FINISHED_LOADING=dm,Ge.FinishedLoading=Jf,Ge.MOVE=_m,Ge.SELECTED=hm,Ge.Selected=cc,Ge.THEME_CHANGE=pm,Ge.TOOLBOX_ITEM_SELECT=fm,Ge.TRASHCAN_OPEN=mm,Ge.ThemeChange=lc,Ge.ToolboxItemSelect=ed,Ge.TrashcanOpen=wc,Ge.UI=Tm,Ge.UiBase=Li,Ge.VAR_CREATE=gm,Ge.VAR_DELETE=Em,Ge.VAR_RENAME=$m,Ge.VIEWPORT_CHANGE=Sm,Ge.VarBase=yr,Ge.VarCreate=Dc,Ge.VarDelete=Lc,Ge.VarRename=kc,Ge.VarTypeChange=id,Ge.ViewportChange=uc,Ge.clearPendingUndo=te,Ge.disable=o.disable$$module$build$src$core$events$utils,Ge.disableOrphans=lt,Ge.enable=o.enable$$module$build$src$core$events$utils,Ge.filter=ce,Ge.fire=be,Ge.fromJson=Qe,Ge.get=Fe,Ge.getDescendantIds=Le,Ge.getGroup=o.getGroup$$module$build$src$core$events$utils,Ge.getRecordUndo=ve,Ge.isEnabled=ue,Ge.setGroup=o.setGroup$$module$build$src$core$events$utils,Ge.setRecordUndo=o.setRecordUndo$$module$build$src$core$events$utils;var Ui={};Ui.BottomRow=Uf,Ui.ConstantProvider=Pf,Ui.Drawer=Bf,Ui.PathObject=Wf,Ui.RenderInfo=Gf,Ui.Renderer=Bc,Ui.RightConnectionShape=Vf,Ui.StatementInput=Aa,Ui.TopRow=Hf,Au();var Gt={};Gt.registerCleanup=su,Gt.registerCollapse=lu,Gt.registerCollapseExpandBlock=fu,Gt.registerComment=hu,Gt.registerCommentCreate=Su,Gt.registerCommentDelete=Eu,Gt.registerCommentDuplicate=$u,Gt.registerCommentOptions=Ah,Gt.registerDefaultOptions=Au,Gt.registerDelete=Tu,Gt.registerDeleteAll=du,Gt.registerDisable=mu,Gt.registerDuplicate=_u,Gt.registerExpand=uu,Gt.registerHelp=gu,Gt.registerInline=pu,Gt.registerRedo=ou,Gt.registerUndo=ru;var nd="button",Am=class{load(e,t){return e=new ri(t.getWorkspace(),t.targetWorkspace,e,!1),e.show(),new Or(e,nd)}gapForItem(e,t){return t}disposeItem(e){e=e.getElement(),e instanceof ri&&e.dispose()}getType(){return nd}};s(Re.FLYOUT_INFLATER,nd,Am);var yo={};yo.Bubble=ft,yo.MiniWorkspaceBubble=Zi,yo.TextBubble=tf,yo.TextInputBubble=ia;var AT="WORKSPACE_AT_BLOCK_CAPACITY",rd="block",bm=class{constructor(){this.permanentlyDisabledBlocks=new Set,this.listeners=new Map,this.capacityWrapper=this.filterFlyoutBasedOnCapacity.bind(this)}load(e,t){return this.setFlyout(t),e=this.createBlock(e,t.getWorkspace()),e.isEnabled()?this.updateStateBasedOnCapacity(e):this.permanentlyDisabledBlocks.add(e),e.getDescendants(!1).forEach(r=>r.isInFlyout=!0),this.addBlockListeners(e),new Or(e,rd)}createBlock(e,t){return e.blockxml?(e=typeof e.blockxml=="string"?o.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,t=yn(e,t)):(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[mi]),"x"in e&&delete e.x,"y"in e&&delete e.y,t=Zn(e,t)),t}gapForItem(e,t){let r;return e.gap?r=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?o.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,r=parseInt(e.getAttribute("gap"))),!r||isNaN(r)?t:r}disposeItem(e){e=e.getElement(),e instanceof St&&(this.removeListeners(e.id),e.dispose(!1,!1))}removeListeners(e){let t;((t=this.listeners.get(e))!=null?t:[]).forEach(r=>L(r)),this.listeners.delete(e)}setFlyout(e){if(this.flyout!==e){if(this.flyout){let r;(r=this.flyout.targetWorkspace)==null||r.removeChangeListener(this.capacityWrapper)}this.flyout=e;var t;(t=this.flyout.targetWorkspace)==null||t.addChangeListener(this.capacityWrapper)}}updateStateBasedOnCapacity(e){let t,r;const a=(t=this.flyout)==null||(r=t.targetWorkspace)==null?void 0:r.isCapacityAvailable(_(e));for(;e;)e.setDisabledReason(!a,AT),e=e.getNextBlock()}addBlockListeners(e){const t=[];t.push(y(e.getSvgRoot(),"pointerdown",e,r=>{let a,u;const b=(a=this.flyout)==null||(u=a.targetWorkspace)==null?void 0:u.getGesture(r);b&&this.flyout&&(b.setStartBlock(e),b.handleFlyoutStart(r,this.flyout))})),t.push(F(e.getSvgRoot(),"pointermove",null,()=>{let r,a;!((r=this.flyout)==null||(a=r.targetWorkspace)==null)&&a.isDragging()||e.addSelect()})),t.push(F(e.getSvgRoot(),"pointerleave",null,()=>{let r,a;!((r=this.flyout)==null||(a=r.targetWorkspace)==null)&&a.isDragging()||e.removeSelect()})),this.listeners.set(e.id,t)}filterFlyoutBasedOnCapacity(e){!this.flyout||e&&e.type!==pe.BLOCK_CREATE&&e.type!==pe.BLOCK_DELETE||this.flyout.getWorkspace().getTopBlocks(!1).forEach(t=>{this.permanentlyDisabledBlocks.has(t)||this.updateStateBasedOnCapacity(t)})}getType(){return rd}};s(Re.FLYOUT_INFLATER,rd,bm);var Im=class extends ha{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},Om=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=yt(e.xPos,this.info_.startY);for(let t=0,r;r=e.elements[t];t++)oe.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:oe.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):oe.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:oe.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):oe.isSpacer(r)&&r.width!==0&&(this.steps_+=Ze("H",r.xPos+r.width-this.highlightOffset));this.steps_+=Ze("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Ze("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const r=e.height-t.connectionHeight;this.steps_+=Xt(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Ze("v",r)}else this.steps_+=Xt(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const r=e.height-2*this.insideCornerPaths_.height;this.steps_+=Xt(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Ze("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+Di(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Xt(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Di(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof yc&&e.followsStatement&&(this.steps_+=Ze("H",t)),this.RTL_&&(this.steps_+=Ze("H",t),e.height>this.highlightOffset&&(this.steps_+=Ze("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=Ze("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];oe.isLeftSquareCorner(t)?this.steps_+=Xt(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):oe.isLeftRoundedCorner(t)&&(this.steps_+=Xt(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=Xt(this.info_.startX,e):(this.steps_+=Xt(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=Ze("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,oe.isLeftRoundedCorner(e.elements[0])?this.steps_+=Ze("V",this.outsideCornerPaths_.height):this.steps_+=Ze("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,r=e.xPos+e.connectionWidth;var a=e.centerline-e.height/2;const u=e.width-e.connectionWidth,b=a+t;this.RTL_?(a=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=Xt(r-t,b)+Ze("v",a)+this.puzzleTabPaths_.pathDown(this.RTL_)+Ze("v",e)+Ze("h",u)):this.inlineSteps_+=Xt(e.xPos+e.width+t,b)+Ze("v",e.height)+Ze("h",-u)+Xt(r,a+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},vm=class extends pa{constructor(e,t){super(e,t),this.highlighter_=new Om(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=Ze("H",e.xPos+e.width)+Ze("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let r=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),e.connectionModel.setOffsetInBlock(r,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let r=e.xPos+e.statementEdge+t.notchOffset;r=this.info_.RTL?r*-1:r+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(r,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let r=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,r=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},Cm=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=yt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,r=(1-Math.SQRT1_2)*(e+t)-t,a=yt(r,r)+Lt("a","0 0,0",e,qe(-r-t,e-r)),u=Lt("a","0 0,0",e+t,qe(e+t,e+t)),b=yt(r,-r)+Lt("a","0 0,0",e+t,qe(e-r,r+t));return{width:e+t,height:e,pathTop(U){return U?a:""},pathBottom(U){return U?u:b}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,r=(1-Math.SQRT1_2)*(e-t)+t,a=yt(r,r)+Lt("a","0 0,1",e-t,qe(e-r,-r+t)),u=yt(t,e)+Lt("a","0 0,1",e-t,qe(e,-e+t)),b=-r,U=yt(r,b)+Lt("a","0 0,1",e-t,qe(-r+t,-b-e));return{height:e,topLeft(Z){return Z?a:u},bottomLeft(){return U}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,r=yt(-2,-t+2.5+.9)+Di(e*-.45,-2.1),a=Ze("v",2.5)+yt(-e*.97,2.5)+oi("q",[qe(-e*.05,10),qe(e*.3,9.5)])+yt(e*.67,-1.9)+Ze("v",2.5),u=Ze("v",-1.5)+yt(e*-.92,-.5)+oi("q",[qe(e*-.19,-5.5),qe(0,-11)])+yt(e*.92,1),b=yt(-5,t-.7)+Di(e*.46,-2.1);return{width:e,height:t,pathUp(U){return U?r:u},pathDown(U){return U?a:b}}}makeNotch(){return{pathLeft:Ze("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Di(5.1,2.6)+yt(-10.2,6.8)+Di(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=yt(25,-8.7)+oi("c",[qe(29.7,-6.2),qe(57.2,-.5),qe(75,8.7)]),r=oi("c",[qe(17.8,-9.2),qe(45.3,-14.9),qe(75,-8.7)])+Xt(100.5,e+.5);return{path(a){return a?t:r}}}},ym=class extends vc{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},Rm=class extends _a{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},Nm=class extends bo{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof _i||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new ym(this.constants_,e)),t.hasInlineInput=!0):e instanceof _i?(t.elements.push(new Rm(this.constants_,e)),t.hasStatement=!0):e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Ic(this.constants_,e)),t.hasExternalInput=!0):(e instanceof wi||e instanceof tn)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let r=0,a;a=this.rows[r];r++)a.hasExternalInput&&(e=!0);for(let r=0,a;a=this.rows[r];r++){var t=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new hi(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let u=0;u<t.length-1;u++){a.elements.push(t[u]);const b=this.getInRowSpacing_(t[u],t[u+1]);a.elements.push(new hi(this.constants_,b))}a.elements.push(t[t.length-1]),a.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&a.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),a.elements.push(new hi(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&oe.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&oe.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&oe.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!oe.isInput(e)&&(!t||oe.isStatementInput(t)))return oe.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:oe.isIcon(e)?this.constants_.LARGE_PADDING*2+1:oe.isHat(e)?this.constants_.NO_PADDING:oe.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:oe.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:oe.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(oe.isInput(e)&&!t){if(oe.isExternalInput(e))return this.constants_.NO_PADDING;if(oe.isInlineInput(e))return this.constants_.LARGE_PADDING;if(oe.isStatementInput(e))return this.constants_.NO_PADDING}if(!oe.isInput(e)&&t&&oe.isInput(t)){if(oe.isField(e)&&e.isEditable){if(oe.isInlineInput(t)||oe.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(oe.isInlineInput(t)||oe.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(oe.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(oe.isIcon(e)&&t&&!oe.isInput(t))return this.constants_.LARGE_PADDING;if(oe.isInlineInput(e)&&t&&oe.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(oe.isLeftSquareCorner(e)&&t){if(oe.isHat(t))return this.constants_.NO_PADDING;if(oe.isPreviousConnection(t))return t.notchOffset;if(oe.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(oe.isLeftRoundedCorner(e)&&t){if(oe.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(oe.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return oe.isField(e)&&t&&oe.isField(t)&&e.isEditable===t.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:t&&oe.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return oe.isTopRow(e)&&oe.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:oe.isTopRow(e)||oe.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(oe.isSpacer(t))return e.yPos+t.height/2;if(oe.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,oe.isNextConnection(t)?e+t.height/2:e-t.height/2;if(oe.isTopRow(e))return oe.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let r=e.yPos;return oe.isField(t)||oe.isIcon(t)?(r+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=oe.isInlineInput(t)?r+t.height/2:r+e.height/2,r}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,r=null;for(let a=this.rows.length-1,u;u=this.rows[a];a--)t.set(u,e),oe.isInputRow(u)&&(u.hasStatement&&this.alignStatementRow_(u),r&&r.hasStatement&&u.width<r.width?t.set(u,r.width):e=u.hasStatement?u.width:Math.max(e,u.width),r=u);e=0;for(let a=0,u;u=this.rows[a];a++)u.hasStatement?e=this.getDesiredRowWidth_(u):oe.isSpacer(u)?u.width=Math.max(e,t.get(u)):(r=u.width,e=Math.max(e,t.get(u))-r,e>0&&this.addAlignmentPadding_(u,e),e=u.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let a=0,u;u=this.rows[a];a++){u.yPos=t,u.xPos=this.startX,t+=u.height,e=Math.max(e,u.widthWithConnectedBlocks);var r=t-this.topRow.ascenderHeight;u===this.bottomRow&&r<this.constants_.MIN_BLOCK_HEIGHT&&(r=this.constants_.MIN_BLOCK_HEIGHT-r,this.bottomRow.height+=r,t+=r),this.recordElemPositions_(u)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(r=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,r.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},Dm=class extends fa{constructor(e,t,r){super(e,t,r),this.constants=r,this.colourDark="#000000",this.svgPathDark=de(_e.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=de(_e.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=vn("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){super.updateHighlighted(e),this.svgPathLight.style.display=e?"none":"inline"}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},Lm=class extends ma{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t,r){super.refreshDom(e,t,r),this.getHighlightConstants().init()}makeConstants_(){return new Im}makeRenderInfo_(e){return new Nm(this,e)}makeDrawer_(e,t){return new vm(e,t)}makePathObject(e,t){return new Dm(e,t,this.getConstants())}makeHighlightConstants_(){return new Cm(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};jr("geras",Lm);var Vi={};Vi.ConstantProvider=Im,Vi.Drawer=vm,Vi.HighlightConstantProvider=Cm,Vi.Highlighter=Om,Vi.InlineInput=ym,Vi.PathObject=Dm,Vi.RenderInfo=Nm,Vi.Renderer=Lm,Vi.StatementInput=Rm;var km=class extends bo{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const a=this.rows[t];var r=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new hi(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(let u=0;u<r.length-1;u++){a.elements.push(r[u]);const b=this.getInRowSpacing_(r[u],r[u+1]);a.elements.push(new hi(this.constants_,b))}a.elements.push(r[r.length-1]),a.endsWithElemSpacer()&&(r=this.getInRowSpacing_(r[r.length-1],null),e&&a.hasDummyInput&&(r+=this.constants_.TAB_WIDTH),a.elements.push(new hi(this.constants_,r)))}}}getInRowSpacing_(e,t){if(!e)return t&&oe.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&oe.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&oe.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!oe.isInput(e)&&!t)return oe.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:oe.isIcon(e)?this.constants_.LARGE_PADDING*2+1:oe.isHat(e)?this.constants_.NO_PADDING:oe.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:oe.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:oe.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(oe.isInput(e)&&!t){if(oe.isExternalInput(e))return this.constants_.NO_PADDING;if(oe.isInlineInput(e))return this.constants_.LARGE_PADDING;if(oe.isStatementInput(e))return this.constants_.NO_PADDING}if(!oe.isInput(e)&&t&&oe.isInput(t)){if(oe.isField(e)&&e.isEditable){if(oe.isInlineInput(t)||oe.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(oe.isInlineInput(t)||oe.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(oe.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(oe.isIcon(e)&&t&&!oe.isInput(t))return this.constants_.LARGE_PADDING;if(oe.isInlineInput(e)&&t&&oe.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(oe.isLeftSquareCorner(e)&&t){if(oe.isHat(t))return this.constants_.NO_PADDING;if(oe.isPreviousConnection(t)||oe.isNextConnection(t))return t.notchOffset}return oe.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:oe.isField(e)&&t&&oe.isField(t)&&e.isEditable===t.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:t&&oe.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return oe.isTopRow(e)&&oe.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:oe.isTopRow(e)||oe.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(oe.isSpacer(t))return e.yPos+t.height/2;if(oe.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,oe.isNextConnection(t)?e+t.height/2:e-t.height/2;if(oe.isTopRow(e))return oe.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let r=e.yPos;return r=oe.isField(t)&&e.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):r+e.height/2}finalize_(){let e=0,t=0;for(var r=0;r<this.rows.length;r++){const u=this.rows[r];u.yPos=t,u.xPos=this.startX,t+=u.height,e=Math.max(e,u.widthWithConnectedBlocks);var a=t-this.topRow.ascenderHeight;u===this.bottomRow&&a<this.constants_.MIN_BLOCK_HEIGHT&&(a=this.constants_.MIN_BLOCK_HEIGHT-a,this.bottomRow.height+=a,t+=a),this.recordElemPositions_(u)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(r=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,r.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},wm=class extends ma{constructor(e){super(e)}makeRenderInfo_(e){return new km(this,e)}};jr("thrasos",wm);var od={};od.RenderInfo=km,od.Renderer=wm;var bT={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},IT={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},OT=new Hn("zelos",bT,IT),vT={Classic:Qs,Zelos:OT},sd=class{constructor(e,t,r){this.id_=e.toolboxitemid||V(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}getFocusableElement(){const e=this.getDiv();if(!e)throw Error("Trying to access toolbox item before DOM is initialized.");if(!(e instanceof HTMLElement))throw Error("Toolbox item div is unexpectedly not an HTML element.");return e}getFocusableTree(){return this.parentToolbox_}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}},Oi=class extends sd{constructor(e,t,r){super(e,t,r),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategoryContainer",row:"blocklyToolboxCategory",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyToolboxCategoryIcon",label:"blocklyToolboxCategoryLabel",contents:"blocklyToolboxCategoryGroup",selected:"blocklyToolboxSelected",openicon:"blocklyToolboxCategoryIconOpen",closedicon:"blocklyToolboxCategoryIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const r=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(r)}}parseCategoryDef_(e){this.name_="name"in e?Dt(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),vi(this.htmlDiv_,li.TREEITEM),Pt(this.htmlDiv_,wt.SELECTED,!1),Pt(this.htmlDiv_,wt.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),vi(this.iconDom_,li.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&Pt(this.htmlDiv_,wt.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const t=this.cssConfig_.container;return t&&De(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&De(e,t),t=`${Oi.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&De(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&De(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&De(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Oi.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle(t);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=Dt(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=On(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):ul(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&he(e,t),(t=this.cssConfig_.openicon)&&De(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&he(e,t),(t=this.cssConfig_.closedicon)&&De(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const r=this.parseColour(Oi.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||r,t&&De(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&Se(this.rowDiv_,t);Pt(this.htmlDiv_,wt.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:wr(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){He(this.htmlDiv_)}};Oi.registrationName="category",Oi.nestedPadding=19,Oi.borderWidth=8,Oi.defaultBackgroundColour="#57e",ee(`
.blocklyToolboxCategory:not(.blocklyToolboxSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolbox[layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 5px 1px 0;
}

.blocklyToolbox[dir="RTL"][layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 0 1px 5px;
}

.blocklyToolboxCategory {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategory {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyToolboxCategoryIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyToolboxCategoryIconClosed {
  background-position: -32px -1px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategoryIconClosed {
  background-position: 0 -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: -32px -17px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: 0 -17px;
}

.blocklyToolboxCategoryIconOpen {
  background-position: -16px -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconOpen {
  background-position: -16px -17px;
}

.blocklyToolboxCategoryLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyToolboxCategoryLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxSelected .blocklyToolboxCategoryLabel {
  color: #fff;
}
`),s(Re.TOOLBOX_ITEM,Oi.registrationName,Oi);var Ro=class extends sd{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const t=this.cssConfig_.container;return t&&De(e,t),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){He(this.htmlDiv)}};Ro.registrationName="sep",ee(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolbox[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),s(Re.TOOLBOX_ITEM,Ro.registrationName,Ro);var Lr=class extends Oi{constructor(e,t,r){super(e,t,r),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxCategoryGroup",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let r=0;r<t.length;r++){const a=t[r];!g(Re.TOOLBOX_ITEM,a.kind)||a.kind.toLowerCase()===Ro.registrationName&&e?(this.flyoutItems_.push(a),e=!0):(this.createToolboxItem(a),e=!1)}}}}createToolboxItem(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&Do(e)&&(t=Lr.registrationName),e=new(N(Re.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),vi(this.subcategoriesDiv_,li.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Pt(this.htmlDiv_,wt.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&De(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var r=this.cssConfig_.contents;for(r&&De(t,r),r=0;r<e.length;r++){const a=e[r];a.init();const u=a.getDiv();if(t.appendChild(u),a.getClickTarget){let b;(b=a.getClickTarget())==null||b.setAttribute("id",a.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;(t=this.parentToolbox_.getFlyout())==null||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Pt(this.htmlDiv_,wt.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let r=0;r<t.length;r++)t[r].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Lr.registrationName="collapsibleCategory",s(Re.TOOLBOX_ITEM,Lr.registrationName,Lr);var Mm=class extends oa{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.height_=this.width_=0,this.flyout=null,this.contents=new Map,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_);const r=this.flyout.createDom("svg");De(r,"blocklyToolboxFlyout"),et(r,t),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:It.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[It.Capability.AUTOHIDEABLE,It.Capability.DELETE_AREA,It.Capability.DRAG_TARGET]}),o.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!0)}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return t.id=V(),this.contentsDiv_=this.createContentsContainer_(),vi(this.contentsDiv_,li.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),De(e,"blocklyToolbox"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return De(e,"blocklyToolboxCategoryGroup"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=y(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=y(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(p(e)||e.target===this.HtmlDiv)O().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),O().hideChaff(!0)}P()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext();break;case"ArrowUp":t=this.selectPrevious();break;case"ArrowLeft":t=this.selectParent();break;case"ArrowRight":t=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=e.copyOptionsForFlyout();return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?R(Re.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):R(Re.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e,this.contents.forEach(t=>t.dispose()),this.contents.clear(),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let r=0;r<e.length;r++)this.createToolboxItem(e[r],t);this.contentsDiv_.appendChild(t)}createToolboxItem(e,t){var r=e.kind;r.toUpperCase()==="CATEGORY"&&Do(e)&&(r=Lr.registrationName),(r=N(Re.TOOLBOX_ITEM,r.toLowerCase()))&&(e=new r(e,this),e.init(),this.addToolboxItem_(e),(r=e.getDiv())&&t.appendChild(r),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents.set(e.getId(),e),e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return[...this.contents.values()]}addStyle(e){e&&this.HtmlDiv&&De(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&Se(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,r=t+e.height,a=e.left;return e=a+e.width,this.toolboxPosition===dt.TOP?new ut(-1e7,r,-1e7,1e7):this.toolboxPosition===dt.BOTTOM?new ut(t,1e7,-1e7,1e7):this.toolboxPosition===dt.LEFT?new ut(-1e7,1e7,-1e7,e):new ut(-1e7,1e7,a,1e7)}wouldDelete(e){return e instanceof St?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(fi(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contents.get(e)||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===dt.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===dt.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_;var t=this.HtmlDiv.getBoundingClientRect();const r=this.getFlyout(),a=this.toolboxPosition===dt.LEFT?e.scrollX+t.width+(r!=null&&r.isVisible()?r.getWidth():0):e.scrollX;t=this.toolboxPosition===dt.TOP?e.scrollY+t.height+(r!=null&&r.isVisible()?r.getHeight():0):e.scrollY,e.translate(a,t),T(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){this.contents.forEach(e=>{e.refreshTheme&&e.refreshTheme()})}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!Oh(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),Pt(this.contentsDiv_,wt.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),Pt(this.contentsDiv_,wt.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){(e=this.getToolboxItems()[e])&&this.setSelectedItem(e)}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout.show(t.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,t){const r=e&&e.getName();let a=t&&t.getName();e===t&&(a=null),e=new(Fe(pe.TOOLBOX_ITEM_SELECT))(r,a,this.workspace_.id),be(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let t=e.indexOf(this.selectedItem_)+1;if(t>-1&&t<e.length){let r=e[t];for(;r&&!r.isSelectable();)r=e[++t];if(r&&r.isSelectable())return this.setSelectedItem(r),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let t=e.indexOf(this.selectedItem_)-1;if(t>-1&&t<e.length){let r=e[t];for(;r&&!r.isSelectable();)r=e[--t];if(r&&r.isSelectable())return this.setSelectedItem(r),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose(),this.contents.forEach(e=>e.dispose());for(let e=0;e<this.boundEvents_.length;e++)L(this.boundEvents_[e]);this.boundEvents_=[],this.contents.clear(),this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),He(this.HtmlDiv)),o.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}getFocusableElement(){if(!this.HtmlDiv)throw Error("Toolbox DOM has not yet been created.");return this.HtmlDiv}getFocusableTree(){return this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(!e||e===this){let t;return(t=this.getToolboxItems().find(r=>r.isSelectable()))!=null?t:null}return null}getNestedTrees(){return[]}lookUpFocusableNode(e){return this.getToolboxItemById(e)}onTreeFocus(e,t){e!==this?this.getSelectedItem()!==e&&this.setSelectedItem(e):this.clearSelection()}onTreeBlur(e){let t;e&&e===((t=this.flyout)==null?void 0:t.getWorkspace())||this.autoHide(!1)}};ee(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolbox {
  box-sizing: border-box;
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxCategoryGroup {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxCategoryGroup:focus {
  outline: none;
}
`),s(Re.TOOLBOX,si,Mm);var CT="12.3.1",yT=Ke.INPUT_VALUE,RT=Ke.OUTPUT_VALUE,NT=Ke.NEXT_STATEMENT,DT=Ke.PREVIOUS_STATEMENT,LT=dt.TOP,kT=dt.BOTTOM,wT=dt.LEFT,MT=dt.RIGHT;Cr.prototype.newBlock=function(e,t){return new Ir(this,e,t)},ti.prototype.newBlock=function(e,t){return new St(this,e,t)},Cr.prototype.newComment=function(e){return new Js(this,e)},ti.prototype.newComment=function(e){return new Ji(this,e)},ti.newTrashcan=function(e){return new Df(e)},Zi.prototype.newWorkspaceSvg=function(e){return new ti(e)},o.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Yr(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],o.Names$$module$build$src$core$names.NameType.PROCEDURE)};var fe={};return fe.Block=Ir,fe.BlockFlyoutInflater=bm,fe.BlockNavigationPolicy=lf,fe.BlockSvg=St,fe.Blocks=bt,fe.ButtonFlyoutInflater=Am,fe.COLLAPSED_FIELD_NAME=ks,fe.COLLAPSED_INPUT_NAME=so,fe.COLLAPSE_CHARS=Jp,fe.CodeGenerator=o.CodeGenerator$$module$build$src$core$generator,fe.CollapsibleToolboxCategory=Lr,fe.ComponentManager=It,fe.Connection=pt,fe.ConnectionChecker=Cf,fe.ConnectionDB=Ar,fe.ConnectionNavigationPolicy=uf,fe.ConnectionType=Ke,fe.ContextMenu=Vn,fe.ContextMenuItems=Gt,fe.ContextMenuRegistry=_t,fe.Css=Mu,fe.DELETE_VARIABLE_ID=hc,fe.DeleteArea=oa,fe.DragTarget=nf,fe.DropDownDiv=Zt,fe.Events=Ge,fe.Extensions=Ai,fe.Field=Tt,fe.FieldCheckbox=zn,fe.FieldDropdown=qt,fe.FieldImage=Kn,fe.FieldLabel=Gn,fe.FieldLabelSerializable=jf,fe.FieldNavigationPolicy=cf,fe.FieldNumber=Vc,fe.FieldTextInput=o.FieldTextInput$$module$build$src$core$field_textinput,fe.FieldVariable=vo,fe.Flyout=aa,fe.FlyoutButton=ri,fe.FlyoutButtonNavigationPolicy=of,fe.FlyoutItem=Or,fe.FlyoutMetricsManager=rf,fe.FlyoutNavigationPolicy=sf,fe.FlyoutNavigator=pf,fe.FlyoutSeparator=sa,fe.FlyoutSeparatorNavigationPolicy=af,fe.FocusManager=jt,fe.FocusableTreeTraverser=zt,fe.Generator=o.CodeGenerator$$module$build$src$core$generator,fe.Gesture=ua,fe.Grid=$c,fe.HorizontalFlyout=Yf,fe.INPUT_VALUE=yT,fe.Input=br,fe.InsertionMarkerPreviewer=Xf,fe.KeyboardNavigationController=mf,fe.LabelFlyoutInflater=Ff,fe.LineCursor=Sc,fe.Marker=gf,fe.MarkerManager=Ac,fe.Menu=Vu,fe.MenuItem=Ls,fe.MetricsManager=fc,fe.Msg=o.Msg$$module$build$src$core$msg,fe.NEXT_STATEMENT=NT,fe.Names=o.Names$$module$build$src$core$names,fe.Navigator=gc,fe.OPPOSITE_TYPE=Wn,fe.OUTPUT_VALUE=RT,fe.Options=ki,fe.PREVIOUS_STATEMENT=DT,fe.PROCEDURE_CATEGORY_NAME=ca,fe.Procedures=ei,fe.RENAME_VARIABLE_ID=_c,fe.RenderedConnection=Yt,fe.Scrollbar=kt,fe.ScrollbarPair=Ec,fe.SeparatorFlyoutInflater=ff,fe.ShortcutItems=Pi,fe.ShortcutRegistry=$t,fe.TOOLBOX_AT_BOTTOM=kT,fe.TOOLBOX_AT_LEFT=wT,fe.TOOLBOX_AT_RIGHT=MT,fe.TOOLBOX_AT_TOP=LT,fe.Theme=Hn,fe.ThemeManager=vf,fe.Themes=vT,fe.Toast=wn,fe.Toolbox=Mm,fe.ToolboxCategory=Oi,fe.ToolboxItem=sd,fe.ToolboxSeparator=Ro,fe.Tooltip=ui,fe.Touch=Nn,fe.Trashcan=Df,fe.UnattachedFieldError=xt,fe.VARIABLE_CATEGORY_NAME=Ku,fe.VARIABLE_DYNAMIC_CATEGORY_NAME=Nc,fe.VERSION=CT,fe.VariableMap=Nf,fe.VariableModel=Rf,fe.Variables=Mt,fe.VariablesDynamic=Tn,fe.VerticalFlyout=Uc,fe.WidgetDiv=Si,fe.Workspace=Cr,fe.WorkspaceAudio=yf,fe.WorkspaceDragger=Tf,fe.WorkspaceNavigationPolicy=hf,fe.WorkspaceSvg=ti,fe.Xml=Qt,fe.ZoomControls=ip,fe.blockAnimations=go,fe.blockRendering=mt,fe.browserEvents=Xi,fe.bubbles=yo,fe.bumpObjects=ra,fe.clipboard=Ii,fe.comments=gn,fe.common=Ht,fe.config=o.config$$module$build$src$core$config,fe.constants=Zm,fe.defineBlocksWithJsonArray=A,fe.dialog=qi,fe.dragging=Co,fe.fieldRegistry=Zs,fe.geras=Vi,fe.getFocusManager=o.getFocusManager$$module$build$src$core$focus_manager,fe.getMainWorkspace=O,fe.getSelected=J,fe.hasBubble=In,fe.hideChaff=vh,fe.icons=mn,fe.inject=hh,fe.inputs=$n,fe.isCopyable=qr,fe.isDeletable=fi,fe.isDraggable=cr,fe.isIcon=yl,fe.isObservable=cs,fe.isPaster=bh,fe.isRenderedElement=Ih,fe.isSelectable=j,fe.isSerializable=Fr,fe.isVariableBackedParameterModel=Ra,fe.keyboardNavigationController=la,fe.layers=Qm,fe.navigateBlock=Ei,fe.navigateStacks=ur,fe.procedures=ei,fe.registry=Wi,fe.renderManagement=Ms,fe.serialization=ST,fe.setLocale=Xu,fe.setParentContainer=v,fe.svgResize=T,fe.thrasos=od,fe.uiPosition=kn,fe.utils=vt,fe.zelos=Ui,fe.__namespace__=o,fe})})(blockly_compressed$1)),blockly_compressed$1.exports}var blockly_compressedExports=requireBlockly_compressed();const Blockly=getDefaultExportFromCjs(blockly_compressedExports),{Block,BlockFlyoutInflater,BlockNavigationPolicy,BlockSvg,Blocks,ButtonFlyoutInflater,COLLAPSED_FIELD_NAME,COLLAPSED_INPUT_NAME,COLLAPSE_CHARS,CodeGenerator,CollapsibleToolboxCategory,ComponentManager,Connection,ConnectionChecker,ConnectionDB,ConnectionNavigationPolicy,ConnectionType,ContextMenu,ContextMenuItems,ContextMenuRegistry,Css,DELETE_VARIABLE_ID,DeleteArea,DragTarget,DropDownDiv,Events,Extensions,Field,FieldCheckbox,FieldDropdown,FieldImage,FieldLabel,FieldLabelSerializable,FieldNavigationPolicy,FieldNumber,FieldTextInput,FieldVariable,Flyout,FlyoutButton,FlyoutButtonNavigationPolicy,FlyoutItem,FlyoutMetricsManager,FlyoutNavigationPolicy,FlyoutNavigator,FlyoutSeparator,FlyoutSeparatorNavigationPolicy,FocusManager,FocusableTreeTraverser,Generator,Gesture,Grid,HorizontalFlyout,INPUT_VALUE,Input,InsertionMarkerPreviewer,KeyboardNavigationController,LabelFlyoutInflater,LineCursor,Marker,MarkerManager,Menu,MenuItem,MetricsManager,Msg,NEXT_STATEMENT,Names,Navigator,OPPOSITE_TYPE,OUTPUT_VALUE,Options,PREVIOUS_STATEMENT,PROCEDURE_CATEGORY_NAME,Procedures,RENAME_VARIABLE_ID,RenderedConnection,Scrollbar,ScrollbarPair,SeparatorFlyoutInflater,ShortcutItems,ShortcutRegistry,TOOLBOX_AT_BOTTOM,TOOLBOX_AT_LEFT,TOOLBOX_AT_RIGHT,TOOLBOX_AT_TOP,Theme,ThemeManager,Themes,Toast,Toolbox,ToolboxCategory,ToolboxItem,ToolboxSeparator,Tooltip,Touch,Trashcan,UnattachedFieldError,VARIABLE_CATEGORY_NAME,VARIABLE_DYNAMIC_CATEGORY_NAME,VERSION,VariableMap,VariableModel,Variables,VariablesDynamic,VerticalFlyout,WidgetDiv,Workspace,WorkspaceAudio,WorkspaceDragger,WorkspaceNavigationPolicy,WorkspaceSvg,Xml,ZoomControls,blockAnimations,blockRendering,browserEvents,bubbles,bumpObjects,clipboard,comments,common,config,constants,defineBlocksWithJsonArray,dialog,dragging,fieldRegistry,geras,getFocusManager,getMainWorkspace,getSelected,hasBubble,hideChaff,icons,inject,inputs,isCopyable,isDeletable,isDraggable,isIcon,isObservable,isPaster,isRenderedElement,isSelectable,isSerializable,isVariableBackedParameterModel,keyboardNavigationController,layers,navigateBlock,navigateStacks,procedures:procedures$1,registry,renderManagement,serialization,setLocale,setParentContainer,svgResize,thrasos,uiPosition,utils,zelos}=Blockly,Hats=Theme.defineTheme("hats",{name:"hats",base:Themes.Zelos,startHats:!0,categoryStyles:{json_category:{colour:"#d9534f"},extension_category:{colour:"#6c757d"},advanced_category:{colour:"#ff00ff"},browser_category:{colour:"#ff5722"},scratch_category:{colour:"#6C9BCF"},category_category:{colour:"#8e44ad"}},blockStyles:{json_blocks:{colourPrimary:"#d9534f"},advanced_blocks:{colourPrimary:"#ff00ff"},browser_blocks:{colourPrimary:"#ff5722"},scratch_blocks:{colourPrimary:"#6C9BCF"},category_blocks:{colourPrimary:"#8e44ad"}}}),HatsDark=Theme.defineTheme("hats-dark",{name:"hats-dark",base:Hats,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"#333",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0"},startHats:!0});var blocks_compressed$1={exports:{}},blocks_compressed=blocks_compressed$1.exports,hasRequiredBlocks_compressed;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(blocks_compressed,function(o){var s=o.__namespace__,l=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),f={customContextMenu:function(O){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(J={text:s.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:E(this)},ne=this.getField("VAR").getText(),ne={text:s.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ne),enabled:!0,callback:g(this)},O.unshift(J),O.unshift(ne));else{if(this.type==="variables_get_dynamic")var H="variables_set_dynamic",J=s.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else H="variables_get_dynamic",J=s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ne=this.getField("VAR");H={type:H,fields:{VAR:ne.saveState(!0)}},O.push({enabled:this.workspace.remainingCapacity()>0,text:J.replace("%1",ne.getText()),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,H)})}},onchange:function(O){O=this.getFieldValue("VAR"),O=s.getVariable$$module$build$src$core$variables(this.workspace,O),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(O.getType()):this.getInput("VALUE").connection.setCheck(O.getType())}},E=function(O){return function(){const H=O.workspace,J=O.getField("VAR").getVariable();s.renameVariable$$module$build$src$core$variables(H,J)}},g=function(O){return function(){const H=O.getField("VAR").getVariable();H&&s.deleteVariable$$module$build$src$core$variables(H.getWorkspace(),H,O)}};s.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",f),s.defineBlocks$$module$build$src$core$common(l);var N={blocks:l},x=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),w={customContextMenu:function(O){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(J={text:s.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:R(this)},ne=this.getField("VAR").getText(),ne={text:s.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ne),enabled:!0,callback:k(this)},O.unshift(J),O.unshift(ne));else{if(this.type==="variables_get")var H="variables_set",J=s.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else H="variables_get",J=s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ne=this.getField("VAR");H={type:H,fields:{VAR:ne.saveState(!0)}},O.push({enabled:this.workspace.remainingCapacity()>0,text:J.replace("%1",ne.getText()),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,H)})}}},R=function(O){return function(){const H=O.workspace,J=O.getField("VAR").getVariable();s.renameVariable$$module$build$src$core$variables(H,J)}},k=function(O){return function(){const H=O.getField("VAR").getVariable();H&&s.deleteVariable$$module$build$src$core$variables(H.getWorkspace(),H,O)}};s.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",w),s.defineBlocks$$module$build$src$core$common(x);var B={blocks:x},P=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),z={init:function(){this.WHERE_OPTIONS_1=[[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const O=H=>{const J=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+H]});return J.setValidator(function(ne){const ye=this.getValue();ne=ne==="FROM_START"||ne==="FROM_END",ne!==(ye==="FROM_START"||ye==="FROM_END")&&this.getSourceBlock().updateAt_(H,ne)}),J};this.appendDummyInput("WHERE1_INPUT").appendField(O(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(O(2),"WHERE2"),this.appendDummyInput("AT2"),s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");var H=this.getInput("AT1")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return O.setAttribute("at1",`${H}`),H=this.getInput("AT2")instanceof s.ValueInput$$module$build$src$core$inputs$value_input,O.setAttribute("at2",`${H}`),O},domToMutation:function(O){const H=O.getAttribute("at1")==="true";O=O.getAttribute("at2")==="true",this.updateAt_(1,H),this.updateAt_(2,O)},updateAt_:function(O,H){this.removeInput("AT"+O),this.removeInput("ORDINAL"+O,!0),H?(this.appendValueInput("AT"+O).setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+O).appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+O),O===2&&s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),O===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};P.text_getSubstring=z,P.text_changeCase={init:function(){const O=[[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:O}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},P.text_trim={init:function(){const O=[[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:O}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},P.text_print={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var m={updateType_:function(O){this.outputConnection.setCheck(O==="NUMBER"?"Number":"String")},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");return O.setAttribute("type",this.getFieldValue("TYPE")),O},domToMutation:function(O){this.updateType_(O.getAttribute("type"))}};P.text_prompt_ext=Object.assign({},m,{init:function(){var O=[[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),O=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:O}),O.setValidator(H=>{this.updateType_(H)}),this.appendValueInput("TEXT").appendField(O,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),P.text_prompt=Object.assign({},m,{init:function(){this.mixin(d);var O=[[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),O=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:O}),O.setValidator(H=>{this.updateType_(H)}),this.appendDummyInput().appendField(O,"TYPE").appendField(this.newQuote_(!0)).appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),P.text_count={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},P.text_replace={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},P.text_reverse={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var d={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(O){for(let H=0,J;J=this.inputList[H];H++)for(let ne=0,ye;ye=J.fieldRow[ne];ne++)if(O===ye.name){J.insertFieldAt(ne,this.newQuote_(!0)),J.insertFieldAt(ne+2,this.newQuote_(!1));return}console.warn('field named "'+O+'" not found in '+this.toDevString())},newQuote_:function(O){return O=this.RTL?!O:O,s.fromJson$$module$build$src$core$field_registry({type:"field_image",src:O?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:O?"“":"”"})}},y=function(){this.mixin(d),this.quoteField_("TEXT")},F={itemCount_:0,mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");return O.setAttribute("items",`${this.itemCount_}`),O},domToMutation:function(O){this.itemCount_=parseInt(O.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(O){this.itemCount_=O.itemCount,this.updateShape_()},decompose:function(O){const H=O.newBlock("text_create_join_container");H.initSvg();let J=H.getInput("STACK").connection;for(let ne=0;ne<this.itemCount_;ne++){const ye=O.newBlock("text_create_join_item");ye.initSvg(),J.connect(ye.previousConnection),J=ye.nextConnection}return H},compose:function(O){var H=O.getInputTargetBlock("STACK");for(O=[];H;)H.isInsertionMarker()||O.push(H.valueConnection_),H=H.getNextBlock();for(H=0;H<this.itemCount_;H++){const J=this.getInput("ADD"+H).connection.targetConnection;J&&!O.includes(J)&&J.disconnect()}for(this.itemCount_=O.length,this.updateShape_(),H=0;H<this.itemCount_;H++){let J;(J=O[H])==null||J.reconnect(this,"ADD"+H)}},saveConnections:function(O){O=O.getInputTargetBlock("STACK");let H=0;for(;O;){if(O.isInsertionMarker()){O=O.getNextBlock();continue}const J=this.getInput("ADD"+H);O.valueConnection_=J&&J.connection.targetConnection,O=O.getNextBlock(),H++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var O=0;O<this.itemCount_;O++)if(!this.getInput("ADD"+O)){const H=this.appendValueInput("ADD"+O).setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT);O===0&&H.appendField(s.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(O=this.itemCount_;this.getInput("ADD"+O);O++)this.removeInput("ADD"+O)}},L=function(){this.mixin(d),this.itemCount_=2,this.updateShape_(),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};s.register$$module$build$src$core$extensions("text_append_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var G=function(){this.setTooltip(()=>s.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},p={isAt_:!1,mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");return O.setAttribute("at",`${this.isAt_}`),O},domToMutation:function(O){O=O.getAttribute("at")!=="false",this.updateAt_(O)},updateAt_:function(O){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),O&&(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=O}},I=function(){this.getField("WHERE").setValidator(function(O){O=O==="FROM_START"||O==="FROM_END";const H=this.getSourceBlock();O!==H.isAt_&&H.updateAt_(O)}),this.updateAt_(!0),this.setTooltip(()=>{var O=this.getFieldValue("WHERE");let H=s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(O==="FROM_START"||O==="FROM_END")&&(O=O==="FROM_START"?s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(H+="  "+O.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),H})};s.register$$module$build$src$core$extensions("text_indexOf_tooltip",G),s.register$$module$build$src$core$extensions("text_quotes",y),s.registerMixin$$module$build$src$core$extensions("quote_image_mixin",d),s.registerMutator$$module$build$src$core$extensions("text_join_mutator",F,L),s.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",p,I),s.defineBlocks$$module$build$src$core$common(P);var D={blocks:P},V={},C={setStatements_:function(O){this.hasStatements_!==O&&(O?(this.appendStatementInput("STACK").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=O)},updateParams_:function(){let O="";this.arguments_.length&&(O=s.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),s.disable$$module$build$src$core$events$utils();try{this.setFieldValue(O,"PARAMS")}finally{s.enable$$module$build$src$core$events$utils()}},mutationToDom:function(O){const H=s.createElement$$module$build$src$core$utils$xml("mutation");O&&H.setAttribute("name",this.getFieldValue("NAME"));for(let J=0;J<this.argumentVarModels_.length;J++){const ne=s.createElement$$module$build$src$core$utils$xml("arg"),ye=this.argumentVarModels_[J];ne.setAttribute("name",ye.getName()),ne.setAttribute("varid",ye.getId()),O&&this.paramIds_&&ne.setAttribute("paramId",this.paramIds_[J]),H.appendChild(ne)}return this.hasStatements_||H.setAttribute("statements","false"),H},domToMutation:function(O){this.arguments_=[],this.argumentVarModels_=[];for(let J=0,ne;ne=O.childNodes[J];J++)if(ne.nodeName.toLowerCase()==="arg"){var H=ne;const ye=H.getAttribute("name");H=H.getAttribute("varid")||H.getAttribute("varId"),this.arguments_.push(ye),H=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,H,ye,""),H!==null?this.argumentVarModels_.push(H):console.log(`Failed to create a variable named "${ye}", ignoring.`)}this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(O.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const O=Object.create(null);if(this.argumentVarModels_.length){O.params=[];for(let H=0;H<this.argumentVarModels_.length;H++)O.params.push({name:this.argumentVarModels_[H].getName(),id:this.argumentVarModels_[H].getId()})}return this.hasStatements_||(O.hasStatements=!1),O},loadExtraState:function(O){if(this.arguments_=[],this.argumentVarModels_=[],O.params)for(let J=0;J<O.params.length;J++){var H=O.params[J];H=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,H.id,H.name,""),this.arguments_.push(H.getName()),this.argumentVarModels_.push(H)}this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(O.hasStatements!==!1)},decompose:function(O){const H=s.createElement$$module$build$src$core$utils$xml("block");H.setAttribute("type","procedures_mutatorcontainer");var J=s.createElement$$module$build$src$core$utils$xml("statement");J.setAttribute("name","STACK"),H.appendChild(J);for(let ye=0;ye<this.arguments_.length;ye++){const h=s.createElement$$module$build$src$core$utils$xml("block");h.setAttribute("type","procedures_mutatorarg");var ne=s.createElement$$module$build$src$core$utils$xml("field");ne.setAttribute("name","NAME");const v=s.createTextNode$$module$build$src$core$utils$xml(this.arguments_[ye]);ne.appendChild(v),h.appendChild(ne),ne=s.createElement$$module$build$src$core$utils$xml("next"),h.appendChild(ne),J.appendChild(h),J=ne}return O=s.domToBlock$$module$build$src$core$xml(H,O),this.type==="procedures_defreturn"?O.setFieldValue(this.hasStatements_,"STATEMENTS"):O.removeInput("STATEMENT_INPUT"),s.mutateCallers$$module$build$src$core$procedures(this),O},compose:function(O){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let H=O.getInputTargetBlock("STACK");for(;H&&!H.isInsertionMarker();){var J=H.getFieldValue("NAME");this.arguments_.push(J),J=this.workspace.getVariable(J,""),this.argumentVarModels_.push(J),this.paramIds_.push(H.id),H=H.nextConnection&&H.nextConnection.targetBlock()}if(this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),O=O.getFieldValue("STATEMENTS"),O!==null&&(O=O==="TRUE",this.hasStatements_!==O))if(O){this.setStatements_(!0);var ne;(ne=this.statementConnection_)==null||ne.reconnect(this,"STACK"),this.statementConnection_=null}else ne=this.getInput("STACK").connection,(this.statementConnection_=ne.targetConnection)&&(ne=ne.targetBlock(),ne.unplug(),ne.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(O,H){var J=this.workspace.getVariableById(O);if(J.getType()===""){J=J.getName(),H=this.workspace.getVariableById(H);var ne=!1;for(let ye=0;ye<this.argumentVarModels_.length;ye++)this.argumentVarModels_[ye].getId()===O&&(this.arguments_[ye]=H.getName(),this.argumentVarModels_[ye]=H,ne=!0);ne&&(this.displayRenamedVar_(J,H.getName()),s.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(O){const H=O.getName();let J=!1,ne;for(let ye=0;ye<this.argumentVarModels_.length;ye++)this.argumentVarModels_[ye].getId()===O.getId()&&(ne=this.arguments_[ye],this.arguments_[ye]=H,J=!0);J&&(this.displayRenamedVar_(ne,H),s.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(O,H){this.updateParams_();var J=this.getIcon(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(J&&J.bubbleIsVisible()){J=J.getWorkspace().getAllBlocks(!1);for(let ne=0,ye;ye=J[ne];ne++)ye.type==="procedures_mutatorarg"&&s.Names$$module$build$src$core$names.equals(O,ye.getFieldValue("NAME"))&&ye.setFieldValue(H,"NAME")}},customContextMenu:function(O){if(!this.isInFlyout){var H=this.getFieldValue("NAME"),J={type:this.callType_,extraState:{name:H,params:this.arguments_}};if(O.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",H),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,J)}),!this.isCollapsed())for(H=0;H<this.argumentVarModels_.length;H++){J=this.argumentVarModels_[H];const ne={type:"variables_get",fields:{VAR:{name:J.getName(),id:J.getId(),type:J.getType()}}};O.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",J.getName()),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,ne)})}}}};V.procedures_defnoreturn=Object.assign({},C,{init:function(){var O=s.findLegalName$$module$build$src$core$procedures("",this);O=s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:O}),O.setValidator(s.rename$$module$build$src$core$procedures),O.setSpellcheck(!1),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(O,"NAME").appendField("","PARAMS"),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),V.procedures_defreturn=Object.assign({},C,{init:function(){var O=s.findLegalName$$module$build$src$core$procedures("",this);O=s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:O}),O.setValidator(s.rename$$module$build$src$core$procedures),O.setSpellcheck(!1),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(O,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT).appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var K={init:function(){this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};V.procedures_mutatorcontainer=K;var X=class extends s.FieldTextInput$$module$build$src$core$field_textinput{constructor(){super(...arguments),this.editingInteractively=!1}showEditor_(O){super.showEditor_(O),this.editingInteractively=!0,this.editingVariable=void 0}onFinishEditing_(O){super.onFinishEditing_(O),this.editingInteractively=!1}},re={init:function(){const O=new X(s.DEFAULT_ARG$$module$build$src$core$procedures,this.validator_);this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(O,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1},validator_:function(O){var H=this.getSourceBlock();const J=H.workspace.getRootWorkspace();if(O=O.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!O)return null;const ne=(H.workspace.targetWorkspace||H.workspace).getAllBlocks(!1),ye=O.toLowerCase();for(let h=0;h<ne.length;h++){if(ne[h].id===this.getSourceBlock().id)continue;const v=ne[h].getFieldValue("NAME");if(v&&v.toLowerCase()===ye)return null}return H.isInFlyout||((H=J.getVariable(O,""))&&H.getName()!==O&&J.renameVariableById(H.getId(),O),H||(this.editingInteractively?this.editingVariable?J.renameVariableById(this.editingVariable.getId(),O):this.editingVariable=J.createVariable(O,""):J.createVariable(O,""))),O}};V.procedures_mutatorarg=re;var se="DISABLED_PROCEDURE_DEFINITION",Pe={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(O,H){s.Names$$module$build$src$core$names.equals(O,this.getProcedureCall())&&(this.setFieldValue(H,"NAME"),this.setTooltip((this.outputConnection?s.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:s.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",H)))},setProcedureParameters_:function(O,H){var J=s.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((J=(J=J&&J.getIcon(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&J.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),O.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=H;else{if(H.length!==O.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let ye=0;ye<this.arguments_.length;ye++){var ne=this.getInput("ARG"+ye);ne&&(ne=ne.connection.targetConnection,this.quarkConnections_[this.quarkIds_[ye]]=ne,J&&ne&&!H.includes(this.quarkIds_[ye])&&(ne.disconnect(),ne.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(O),this.argumentVarModels_=[],O=0;O<this.arguments_.length;O++)J=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[O],""),this.argumentVarModels_.push(J);if(this.updateShape_(),this.quarkIds_=H){for(H=0;H<this.arguments_.length;H++)if(O=this.quarkIds_[H],O in this.quarkConnections_){let ye;(ye=this.quarkConnections_[O])!=null&&ye.reconnect(this,"ARG"+H)||delete this.quarkConnections_[O]}}}},updateShape_:function(){for(var O=0;O<this.arguments_.length;O++){var H=this.getField("ARGNAME"+O);if(H){s.disable$$module$build$src$core$events$utils();try{H.setValue(this.arguments_[O])}finally{s.enable$$module$build$src$core$events$utils()}}else H=s.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[O]}),this.appendValueInput("ARG"+O).setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT).appendField(H,"ARGNAME"+O)}for(O=this.arguments_.length;this.getInput("ARG"+O);O++)this.removeInput("ARG"+O);(O=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||O.appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&O.removeField("WITH"))},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");O.setAttribute("name",this.getProcedureCall());for(let H=0;H<this.arguments_.length;H++){const J=s.createElement$$module$build$src$core$utils$xml("arg");J.setAttribute("name",this.arguments_[H]),O.appendChild(J)}return O},domToMutation:function(O){var H=O.getAttribute("name");this.renameProcedure(this.getProcedureCall(),H),H=[];const J=[];for(let ne=0,ye;ye=O.childNodes[ne];ne++)ye.nodeName.toLowerCase()==="arg"&&(H.push(ye.getAttribute("name")),J.push(ye.getAttribute("paramId")));this.setProcedureParameters_(H,J)},saveExtraState:function(){const O=Object.create(null);return O.name=this.getProcedureCall(),this.arguments_.length&&(O.params=this.arguments_),O},loadExtraState:function(O){if(this.renameProcedure(this.getProcedureCall(),O.name),O=O.params){const H=[];H.length=O.length,H.fill(null),this.setProcedureParameters_(O,H)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(O){if(this.workspace&&!this.workspace.isFlyout&&O.recordUndo)if(O.type===s.BLOCK_CREATE$$module$build$src$core$events$events&&O.ids.includes(this.id)){var H=this.getProcedureCall(),J=s.getDefinition$$module$build$src$core$procedures(H,this.workspace);if(!J||J.type===this.defType_&&JSON.stringify(J.getVars())===JSON.stringify(this.arguments_)||(J=null),J)J.isEnabled()||(this.setDisabledReason(!0,se),this.setWarningText(s.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",H)));else{s.setGroup$$module$build$src$core$events$utils(O.group),O=s.createElement$$module$build$src$core$utils$xml("xml"),H=s.createElement$$module$build$src$core$utils$xml("block"),H.setAttribute("type",this.defType_),J=this.getRelativeToSurfaceXY();var ne=J.y+s.config$$module$build$src$core$config.snapRadius*2;H.setAttribute("x",`${J.x+s.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),H.setAttribute("y",`${ne}`),J=this.mutationToDom(),H.appendChild(J),J=s.createElement$$module$build$src$core$utils$xml("field"),J.setAttribute("name","NAME"),ne=this.getProcedureCall();const ye=s.findLegalName$$module$build$src$core$procedures(ne,this);ne!==ye&&this.renameProcedure(ne,ye),J.appendChild(s.createTextNode$$module$build$src$core$utils$xml(ne)),H.appendChild(J),O.appendChild(H),s.domToWorkspace$$module$build$src$core$xml(O,this.workspace),s.setGroup$$module$build$src$core$events$utils(!1)}}else O.type===s.BLOCK_DELETE$$module$build$src$core$events$events?(H=this.getProcedureCall(),s.getDefinition$$module$build$src$core$procedures(H,this.workspace)||(s.setGroup$$module$build$src$core$events$utils(O.group),this.dispose(!0),s.setGroup$$module$build$src$core$events$utils(!1))):O.type===s.BLOCK_CHANGE$$module$build$src$core$events$events&&O.element==="disabled"&&(H=this.getProcedureCall(),(ne=s.getDefinition$$module$build$src$core$procedures(H,this.workspace))&&ne.id===O.blockId&&((J=s.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),s.setGroup$$module$build$src$core$events$utils(O.group),O=ne.isEnabled(),this.setDisabledReason(!O,se),this.setWarningText(O?null:s.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",H)),s.setGroup$$module$build$src$core$events$utils(J)))},customContextMenu:function(O){if(this.workspace.isMovable()){var H=this.getProcedureCall(),J=this.workspace;O.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const ne=s.getDefinition$$module$build$src$core$procedures(H,J);ne&&(J.centerOnBlock(ne.id),s.getFocusManager$$module$build$src$core$focus_manager().focusNode(ne))}})}}};V.procedures_callnoreturn=Object.assign({},Pe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),V.procedures_callreturn=Object.assign({},Pe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var Te="UNPARENTED_IFRETURN",Ae={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");return O.setAttribute("value",String(Number(this.hasReturnValue_))),O},domToMutation:function(O){this.hasReturnValue_=O.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(O){if(!(this.workspace.isDragging&&this.workspace.isDragging()||O.type!==s.BLOCK_MOVE$$module$build$src$core$events$events&&O.type!==s.BLOCK_CREATE$$module$build$src$core$events$events)){O=!1;var H=this;do{if(this.FUNCTION_TYPES.includes(H.type)){O=!0;break}H=H.getSurroundParent()}while(H);if(O?(H.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):H.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{s.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!O,Te)}finally{s.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};V.procedures_ifreturn=Ae,s.defineBlocks$$module$build$src$core$common(V);var we={blocks:V},ve=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),be={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};s.register$$module$build$src$core$extensions("math_op_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("OP",be));var Xe={mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation"),H=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return O.setAttribute("divisor_input",String(H)),O},domToMutation:function(O){O=O.getAttribute("divisor_input")==="true",this.updateShape_(O)},updateShape_:function(O){const H=this.getInput("DIVISOR");O?H||this.appendValueInput("DIVISOR").setCheck("Number"):H&&this.removeInput("DIVISOR")}},Be=function(){this.getField("PROPERTY").setValidator(function(O){O=O==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(O)})};s.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",Xe,Be),s.register$$module$build$src$core$extensions("math_change_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var ke={updateType_:function(O){O==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");return O.setAttribute("op",this.getFieldValue("OP")),O},domToMutation:function(O){if(O=O.getAttribute("op"),O===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(O)}},ce=function(){this.getField("OP").setValidator((function(O){this.updateType_(O)}).bind(this))};s.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",ke,ce),s.defineBlocks$$module$build$src$core$common(ve);var te={blocks:ve},ue=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),me={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};s.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",me));var Le={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};s.register$$module$build$src$core$extensions("controls_flow_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Le));var Qe={customContextMenu:function(O){if(!this.isInFlyout){var H=this.getField("VAR"),J=H.getVariable().getName();this.isCollapsed()||J===null||(H={type:"variables_get",fields:{VAR:H.saveState(!0)}},O.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",J),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,H)}))}}};s.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Qe),s.register$$module$build$src$core$extensions("controls_for_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),s.register$$module$build$src$core$extensions("controls_forEach_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var Fe=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),lt="CONTROL_FLOW_NOT_IN_LOOP",de={getSurroundLoop:function(){let O=this;do{if(Fe.has(O.type))return O;O=O.getSurroundParent()}while(O);return null},onchange:function(O){const H=this.workspace;if(H.isDragging&&!H.isDragging()&&(O.type===s.BLOCK_MOVE$$module$build$src$core$events$events||O.type===s.BLOCK_CREATE$$module$build$src$core$events$events)&&(O=!!this.getSurroundLoop(),this.setWarningText(O?null:s.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{s.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!O,lt)}finally{s.setRecordUndo$$module$build$src$core$events$utils(!0)}}};s.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",de),s.defineBlocks$$module$build$src$core$common(ue);var De={blocks:ue,loopTypes:Fe},he=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Se={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};s.register$$module$build$src$core$extensions("logic_op_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Se));var Ue={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const O=s.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&O.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&O.setAttribute("else","1"),O},domToMutation:function(O){this.elseifCount_=parseInt(O.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(O.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const O=Object.create(null);return this.elseifCount_&&(O.elseIfCount=this.elseifCount_),this.elseCount_&&(O.hasElse=!0),O},loadExtraState:function(O){this.elseifCount_=O.elseIfCount||0,this.elseCount_=O.hasElse?1:0,this.updateShape_()},decompose:function(O){const H=O.newBlock("controls_if_if");H.initSvg();let J=H.nextConnection;for(let ne=1;ne<=this.elseifCount_;ne++){const ye=O.newBlock("controls_if_elseif");ye.initSvg(),J.connect(ye.previousConnection),J=ye.nextConnection}return this.elseCount_&&(O=O.newBlock("controls_if_else"),O.initSvg(),J.connect(O.previousConnection)),H},compose:function(O){O=O.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const H=[null],J=[null];let ne=null;for(;O;){if(!O.isInsertionMarker())switch(O.type){case"controls_if_elseif":this.elseifCount_++,H.push(O.valueConnection_),J.push(O.statementConnection_);break;case"controls_if_else":this.elseCount_++,ne=O.statementConnection_;break;default:throw TypeError("Unknown block type: "+O.type)}O=O.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(H,J,ne)},saveConnections:function(O){O=O.nextConnection.targetBlock();let H=1;for(;O;){if(!O.isInsertionMarker())switch(O.type){case"controls_if_elseif":var J=this.getInput("IF"+H);const ne=this.getInput("DO"+H);O.valueConnection_=J&&J.connection.targetConnection,O.statementConnection_=ne&&ne.connection.targetConnection,H++;break;case"controls_if_else":J=this.getInput("ELSE"),O.statementConnection_=J&&J.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+O.type)}O=O.getNextBlock()}},rebuildShape_:function(){const O=[null],H=[null];let J=null;this.getInput("ELSE")&&(J=this.getInput("ELSE").connection.targetConnection);for(let ne=1;this.getInput("IF"+ne);ne++){const ye=this.getInput("IF"+ne),h=this.getInput("DO"+ne);O.push(ye.connection.targetConnection),H.push(h.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(O,H,J)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var O=1;this.getInput("IF"+O);O++)this.removeInput("IF"+O),this.removeInput("DO"+O);for(O=1;O<=this.elseifCount_;O++)this.appendValueInput("IF"+O).setCheck("Boolean").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+O).appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(O,H,J){for(let ne=1;ne<=this.elseifCount_;ne++){let ye;(ye=O[ne])==null||ye.reconnect(this,"IF"+ne);let h;(h=H[ne])==null||h.reconnect(this,"DO"+ne)}J?.reconnect(this,"ELSE")}};s.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Ue,null,["controls_if_elseif","controls_if_else"]);var He=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};s.register$$module$build$src$core$extensions("controls_if_tooltip",He);var et={onchange:function(O){this.prevBlocks_||(this.prevBlocks_=[null,null]);var H=this.getInputTargetBlock("A");const J=this.getInputTargetBlock("B");H&&J&&!this.workspace.connectionChecker.doTypeChecks(H.outputConnection,J.outputConnection)&&(s.setGroup$$module$build$src$core$events$utils(O.group),O=this.prevBlocks_[0],O!==H&&(H.unplug(),!O||O.isDisposed()||O.isShadow()||this.getInput("A").connection.connect(O.outputConnection)),H=this.prevBlocks_[1],H!==J&&(J.unplug(),!H||H.isDisposed()||H.isShadow()||this.getInput("B").connection.connect(H.outputConnection)),this.bumpNeighbours(),s.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},tt=function(){this.mixin(et)};s.register$$module$build$src$core$extensions("logic_compare",tt);var ht={prevParentConnection_:null,onchange:function(O){const H=this.getInputTargetBlock("THEN"),J=this.getInputTargetBlock("ELSE"),ne=this.outputConnection.targetConnection;if((H||J)&&ne)for(let ye=0;ye<2;ye++){const h=ye===1?H:J;h&&!h.workspace.connectionChecker.doTypeChecks(h.outputConnection,ne)&&(s.setGroup$$module$build$src$core$events$utils(O.group),ne===this.prevParentConnection_?(this.unplug(),ne.getSourceBlock().bumpNeighbours()):(h.unplug(),h.bumpNeighbours()),s.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=ne}};s.registerMixin$$module$build$src$core$extensions("logic_ternary",ht),s.defineBlocks$$module$build$src$core$common(he);var nt={blocks:he},st=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),ot={init:function(){this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");return O.setAttribute("items",String(this.itemCount_)),O},domToMutation:function(O){if(O=O.getAttribute("items"),!O)throw new TypeError("element did not have items");this.itemCount_=parseInt(O,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(O){this.itemCount_=O.itemCount,this.updateShape_()},decompose:function(O){const H=O.newBlock("lists_create_with_container");H.initSvg();let J=H.getInput("STACK").connection;for(let ne=0;ne<this.itemCount_;ne++){const ye=O.newBlock("lists_create_with_item");if(ye.initSvg(),!ye.previousConnection)throw Error("itemBlock has no previousConnection");J.connect(ye.previousConnection),J=ye.nextConnection}return H},compose:function(O){var H=O.getInputTargetBlock("STACK");for(O=[];H;)H.isInsertionMarker()||O.push(H.valueConnection_),H=H.getNextBlock();for(H=0;H<this.itemCount_;H++){const J=this.getInput("ADD"+H).connection.targetConnection;J&&!O.includes(J)&&J.disconnect()}for(this.itemCount_=O.length,this.updateShape_(),H=0;H<this.itemCount_;H++){let J;(J=O[H])==null||J.reconnect(this,"ADD"+H)}},saveConnections:function(O){O=O.getInputTargetBlock("STACK");let H=0;for(;O;){if(O.isInsertionMarker()){O=O.getNextBlock();continue}const J=this.getInput("ADD"+H);let ne;O.valueConnection_=(ne=J)==null?void 0:ne.connection.targetConnection,O=O.getNextBlock(),H++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var O=0;O<this.itemCount_;O++)if(!this.getInput("ADD"+O)){const H=this.appendValueInput("ADD"+O).setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT);O===0&&H.appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(O=this.itemCount_;this.getInput("ADD"+O);O++)this.removeInput("ADD"+O)}};st.lists_create_with=ot;var it={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};st.lists_create_with_container=it;var S={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};st.lists_create_with_item=S;var ae={init:function(){var O=[[s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),O=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:O}),!O)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(O,"END"),this.setInputsInline(!0),this.setTooltip(()=>s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};st.lists_indexOf=ae;var j={init:function(){var O=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),O=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:O}),O.setValidator(function(H){H=H==="REMOVE",this.getSourceBlock().updateStatement_(H)}),this.appendValueInput("VALUE").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(O,"MODE").appendField("","SPACE"),O=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),O.setValidator(function(H){const J=this.getValue();H=H==="FROM_START"||H==="FROM_END",H!==(J==="FROM_START"||J==="FROM_END")&&this.getSourceBlock().updateAt_(H)}),this.appendDummyInput().appendField(O,"WHERE"),this.appendDummyInput("AT"),s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const H=this.getFieldValue("MODE"),J=this.getFieldValue("WHERE");let ne="";switch(H+" "+J){case"GET FROM_START":case"GET FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(J==="FROM_START"||J==="FROM_END")&&(ne+="  "+(J==="FROM_START"?s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ne})},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");O.setAttribute("statement",String(!this.outputConnection));const H=this.getInput("AT")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return O.setAttribute("at",String(H)),O},domToMutation:function(O){const H=O.getAttribute("statement")==="true";this.updateStatement_(H),O=O.getAttribute("at")!=="false",this.updateAt_(O)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(O){O.isStatement?this.updateStatement_(!0):typeof O=="string"&&this.domToMutation(s.textToDom$$module$build$src$core$utils$xml(O))},updateStatement_:function(O){O!==!this.outputConnection&&(this.unplug(!0,!0),O?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(O){this.removeInput("AT"),this.removeInput("ORDINAL",!0),O?(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};st.lists_getIndex=j;var $e={init:function(){var O=[[s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),O=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:O}),this.appendDummyInput().appendField(O,"MODE").appendField("","SPACE"),O=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),O.setValidator(function(H){const J=this.getValue();H=H==="FROM_START"||H==="FROM_END",H!==(J==="FROM_START"||J==="FROM_END")&&this.getSourceBlock().updateAt_(H)}),this.appendDummyInput().appendField(O,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const H=this.getFieldValue("MODE"),J=this.getFieldValue("WHERE");let ne="";switch(H+" "+J){case"SET FROM_START":case"SET FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(J==="FROM_START"||J==="FROM_END")&&(ne+="  "+s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ne})},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation"),H=this.getInput("AT")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return O.setAttribute("at",String(H)),O},domToMutation:function(O){O=O.getAttribute("at")!=="false",this.updateAt_(O)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(O){this.removeInput("AT"),this.removeInput("ORDINAL",!0),O?(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};st.lists_setIndex=$e;var Ne={init:function(){this.WHERE_OPTIONS_1=[[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const O=H=>{const J=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+H]});return J.setValidator(function(ne){const ye=this.getValue();ne=ne==="FROM_START"||ne==="FROM_END",ne!==(ye==="FROM_START"||ye==="FROM_END")&&this.getSourceBlock().updateAt_(H,ne)}),J};this.appendDummyInput("WHERE1_INPUT").appendField(O(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(O(2),"WHERE2"),this.appendDummyInput("AT2"),s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");var H=this.getInput("AT1")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return O.setAttribute("at1",String(H)),H=this.getInput("AT2")instanceof s.ValueInput$$module$build$src$core$inputs$value_input,O.setAttribute("at2",String(H)),O},domToMutation:function(O){const H=O.getAttribute("at1")==="true";O=O.getAttribute("at2")==="true",this.updateAt_(1,H),this.updateAt_(2,O)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(O,H){this.removeInput("AT"+O),this.removeInput("ORDINAL"+O,!0),H?(this.appendValueInput("AT"+O).setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+O).appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+O),O===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};st.lists_getSublist=Ne,st.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},st.lists_split={init:function(){const O=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[s.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!O)throw Error("field_dropdown not found");O.setValidator(H=>{this.updateType_(H)}),this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(O,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(s.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const H=this.getFieldValue("MODE");if(H==="SPLIT")return s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(H==="JOIN")return s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+H)})},updateType_:function(O){if(this.getFieldValue("MODE")!==O){const H=this.getInput("INPUT").connection;H.setShadowDom(null);const J=H.targetBlock();J&&(H.disconnect(),J.isShadow()?J.dispose(!1):this.bumpNeighbours())}O==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const O=s.createElement$$module$build$src$core$utils$xml("mutation");return O.setAttribute("mode",this.getFieldValue("MODE")),O},domToMutation:function(O){this.updateType_(O.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function(O){this.updateType_(O.mode)}},s.defineBlocks$$module$build$src$core$common(st);var Ie={blocks:st},Ve=Object.assign({},st,he,ue,ve,V,P,x,l),le={blocks:Ve,lists:Ie,logic:nt,loops:De,math:te,procedures:we,texts:D,variables:B,variablesDynamic:N};return le.__namespace__=s,le})})(blocks_compressed$1)),blocks_compressed$1.exports}var blocks_compressedExports=requireBlocks_compressed();const libraryBlocks=getDefaultExportFromCjs(blocks_compressedExports),{blocks,lists,logic,loops,math,procedures,texts,variables,variablesDynamic}=libraryBlocks;var en$2={exports:{}},en$1=en$2.exports,hasRequiredEn;function requireEn(){return hasRequiredEn||(hasRequiredEn=1,(function(i,n){(function(o,s){i.exports=s()})(en$1,function(){var o=o||{Msg:Object.create(null)};return o.Msg.ADD_COMMENT="Add Comment",o.Msg.ALT_KEY="Alt",o.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",o.Msg.CHANGE_VALUE_TITLE="Change value:",o.Msg.CHROME_OS="ChromeOS",o.Msg.CLEAN_UP="Clean up Blocks",o.Msg.CLOSE="Close",o.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",o.Msg.COLLAPSE_ALL="Collapse Blocks",o.Msg.COLLAPSE_BLOCK="Collapse Block",o.Msg.COLOUR_BLEND_COLOUR1="colour 1",o.Msg.COLOUR_BLEND_COLOUR2="colour 2",o.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",o.Msg.COLOUR_BLEND_RATIO="ratio",o.Msg.COLOUR_BLEND_TITLE="blend",o.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",o.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",o.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",o.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",o.Msg.COLOUR_RANDOM_TITLE="random colour",o.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",o.Msg.COLOUR_RGB_BLUE="blue",o.Msg.COLOUR_RGB_GREEN="green",o.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",o.Msg.COLOUR_RGB_RED="red",o.Msg.COLOUR_RGB_TITLE="colour with",o.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",o.Msg.COMMAND_KEY="⌘ Command",o.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",o.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",o.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",o.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",o.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",o.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",o.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",o.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",o.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",o.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",o.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",o.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",o.Msg.CONTROLS_IF_MSG_ELSE="else",o.Msg.CONTROLS_IF_MSG_ELSEIF="else if",o.Msg.CONTROLS_IF_MSG_IF="if",o.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",o.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",o.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",o.Msg.CONTROLS_REPEAT_INPUT_DO="do",o.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",o.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",o.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",o.Msg.CONTROL_KEY="Ctrl",o.Msg.COPY_SHORTCUT="Copy",o.Msg.CUT_SHORTCUT="Cut",o.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",o.Msg.DELETE_BLOCK="Delete Block",o.Msg.DELETE_VARIABLE="Delete the '%1' variable",o.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",o.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",o.Msg.DIALOG_CANCEL="Cancel",o.Msg.DIALOG_OK="OK",o.Msg.DISABLE_BLOCK="Disable Block",o.Msg.DUPLICATE_BLOCK="Duplicate",o.Msg.DUPLICATE_COMMENT="Duplicate Comment",o.Msg.EDIT_BLOCK_CONTENTS="Edit Block contents",o.Msg.ENABLE_BLOCK="Enable Block",o.Msg.EXPAND_ALL="Expand Blocks",o.Msg.EXPAND_BLOCK="Expand Block",o.Msg.EXTERNAL_INPUTS="External Inputs",o.Msg.HELP="Help",o.Msg.HELP_PROMPT="Press %1 for help on keyboard controls",o.Msg.INLINE_INPUTS="Inline Inputs",o.Msg.KEYBOARD_NAV_CONSTRAINED_MOVE_HINT="Use the arrow keys to move, then %1 to accept the position",o.Msg.KEYBOARD_NAV_COPIED_HINT="Copied. Press %1 to paste.",o.Msg.KEYBOARD_NAV_CUT_HINT="Cut. Press %1 to paste.",o.Msg.KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT="Hold %1 and use arrow keys to move freely, then %2 to accept the position",o.Msg.LINUX="Linux",o.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",o.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",o.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",o.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",o.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",o.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",o.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",o.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",o.Msg.LISTS_GET_INDEX_FIRST="first",o.Msg.LISTS_GET_INDEX_FROM_END="# from end",o.Msg.LISTS_GET_INDEX_FROM_START="#",o.Msg.LISTS_GET_INDEX_GET="get",o.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",o.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",o.Msg.LISTS_GET_INDEX_LAST="last",o.Msg.LISTS_GET_INDEX_RANDOM="random",o.Msg.LISTS_GET_INDEX_REMOVE="remove",o.Msg.LISTS_GET_INDEX_TAIL="",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",o.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",o.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",o.Msg.LISTS_GET_SUBLIST_END_LAST="to last",o.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",o.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",o.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",o.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",o.Msg.LISTS_GET_SUBLIST_TAIL="",o.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",o.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",o.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",o.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",o.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",o.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",o.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",o.Msg.LISTS_INLIST="in list",o.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",o.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",o.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",o.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",o.Msg.LISTS_LENGTH_TITLE="length of %1",o.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",o.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",o.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",o.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",o.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",o.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",o.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",o.Msg.LISTS_SET_INDEX_INPUT_TO="as",o.Msg.LISTS_SET_INDEX_INSERT="insert at",o.Msg.LISTS_SET_INDEX_SET="set",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",o.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",o.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",o.Msg.LISTS_SORT_ORDER_DESCENDING="descending",o.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",o.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",o.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",o.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",o.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",o.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",o.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",o.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",o.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",o.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",o.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",o.Msg.LOGIC_BOOLEAN_FALSE="false",o.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",o.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",o.Msg.LOGIC_BOOLEAN_TRUE="true",o.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",o.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",o.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",o.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",o.Msg.LOGIC_NEGATE_TITLE="not %1",o.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",o.Msg.LOGIC_NULL="null",o.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",o.Msg.LOGIC_NULL_TOOLTIP="Returns null.",o.Msg.LOGIC_OPERATION_AND="and",o.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",o.Msg.LOGIC_OPERATION_OR="or",o.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",o.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",o.Msg.LOGIC_TERNARY_CONDITION="test",o.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",o.Msg.LOGIC_TERNARY_IF_FALSE="if false",o.Msg.LOGIC_TERNARY_IF_TRUE="if true",o.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",o.Msg.MAC_OS="macOS",o.Msg.MATH_ADDITION_SYMBOL="+",o.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",o.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",o.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",o.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",o.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",o.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",o.Msg.MATH_CHANGE_TITLE="change %1 by %2",o.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",o.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",o.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",o.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",o.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",o.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",o.Msg.MATH_DIVISION_SYMBOL="÷",o.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",o.Msg.MATH_IS_EVEN="is even",o.Msg.MATH_IS_NEGATIVE="is negative",o.Msg.MATH_IS_ODD="is odd",o.Msg.MATH_IS_POSITIVE="is positive",o.Msg.MATH_IS_PRIME="is prime",o.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",o.Msg.MATH_IS_WHOLE="is whole",o.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",o.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",o.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",o.Msg.MATH_MULTIPLICATION_SYMBOL="×",o.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",o.Msg.MATH_NUMBER_TOOLTIP="A number.",o.Msg.MATH_ONLIST_HELPURL="",o.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",o.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",o.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",o.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",o.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",o.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",o.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",o.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",o.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",o.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",o.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",o.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",o.Msg.MATH_POWER_SYMBOL="^",o.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",o.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",o.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",o.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",o.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",o.Msg.MATH_ROUND_OPERATOR_ROUND="round",o.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",o.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",o.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",o.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",o.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",o.Msg.MATH_SINGLE_OP_ROOT="square root",o.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",o.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",o.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",o.Msg.MATH_SUBTRACTION_SYMBOL="-",o.Msg.MATH_TRIG_ACOS="acos",o.Msg.MATH_TRIG_ASIN="asin",o.Msg.MATH_TRIG_ATAN="atan",o.Msg.MATH_TRIG_COS="cos",o.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",o.Msg.MATH_TRIG_SIN="sin",o.Msg.MATH_TRIG_TAN="tan",o.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",o.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",o.Msg.MOVE_BLOCK="Move Block",o.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",o.Msg.NEW_NUMBER_VARIABLE="Create number variable...",o.Msg.NEW_STRING_VARIABLE="Create string variable...",o.Msg.NEW_VARIABLE="Create variable...",o.Msg.NEW_VARIABLE_TITLE="New variable name:",o.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",o.Msg.OPTION_KEY="⌥ Option",o.Msg.ORDINAL_NUMBER_SUFFIX="",o.Msg.PASTE_SHORTCUT="Paste",o.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",o.Msg.PROCEDURES_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",o.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",o.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",o.Msg.PROCEDURES_CREATE_DO="Create '%1'",o.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",o.Msg.PROCEDURES_DEFNORETURN_DO="",o.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",o.Msg.PROCEDURES_DEFNORETURN_TITLE="to",o.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",o.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFRETURN_RETURN="return",o.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",o.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",o.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",o.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",o.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",o.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",o.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",o.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",o.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",o.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",o.Msg.REDO="Redo",o.Msg.REMOVE_COMMENT="Remove Comment",o.Msg.RENAME_VARIABLE="Rename variable...",o.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",o.Msg.SHORTCUTS_CODE_NAVIGATION="Code navigation",o.Msg.SHORTCUTS_EDITING="Editing",o.Msg.SHORTCUTS_GENERAL="General",o.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_APPEND_TITLE="to %1 append text %2",o.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",o.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",o.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",o.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",o.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",o.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",o.Msg.TEXT_CHARAT_FIRST="get first letter",o.Msg.TEXT_CHARAT_FROM_END="get letter # from end",o.Msg.TEXT_CHARAT_FROM_START="get letter #",o.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",o.Msg.TEXT_CHARAT_LAST="get last letter",o.Msg.TEXT_CHARAT_RANDOM="get random letter",o.Msg.TEXT_CHARAT_TAIL="",o.Msg.TEXT_CHARAT_TITLE="in text %1 %2",o.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",o.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",o.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",o.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",o.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",o.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",o.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",o.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",o.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",o.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",o.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",o.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",o.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",o.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",o.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",o.Msg.TEXT_GET_SUBSTRING_TAIL="",o.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",o.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",o.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",o.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",o.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",o.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",o.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",o.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",o.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",o.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",o.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",o.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",o.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_LENGTH_TITLE="length of %1",o.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",o.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",o.Msg.TEXT_PRINT_TITLE="print %1",o.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",o.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",o.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",o.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",o.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",o.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",o.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",o.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",o.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",o.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",o.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",o.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",o.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",o.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",o.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",o.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",o.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",o.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",o.Msg.TODAY="Today",o.Msg.UNDO="Undo",o.Msg.UNKNOWN="Unknown",o.Msg.UNNAMED_KEY="unnamed",o.Msg.VARIABLES_DEFAULT_NAME="item",o.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",o.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",o.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",o.Msg.VARIABLES_SET="set %1 to %2",o.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",o.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",o.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",o.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",o.Msg.WINDOWS="Windows",o.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",o.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",o.Msg.CONTROLS_FOREACH_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_FOR_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=o.Msg.CONTROLS_IF_MSG_ELSEIF,o.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=o.Msg.CONTROLS_IF_MSG_ELSE,o.Msg.CONTROLS_IF_IF_TITLE_IF=o.Msg.CONTROLS_IF_MSG_IF,o.Msg.CONTROLS_IF_MSG_THEN=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.LISTS_CREATE_WITH_ITEM_TITLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.MATH_CHANGE_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.PROCEDURES_DEFRETURN_COMMENT=o.Msg.PROCEDURES_DEFNORETURN_COMMENT,o.Msg.PROCEDURES_DEFRETURN_DO=o.Msg.PROCEDURES_DEFNORETURN_DO,o.Msg.PROCEDURES_DEFRETURN_PROCEDURE=o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,o.Msg.PROCEDURES_DEFRETURN_TITLE=o.Msg.PROCEDURES_DEFNORETURN_TITLE,o.Msg.TEXT_APPEND_VARIABLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.COLOUR_HUE="20",o.Msg.LISTS_HUE="260",o.Msg.LOGIC_HUE="210",o.Msg.LOOPS_HUE="120",o.Msg.MATH_HUE="230",o.Msg.PROCEDURES_HUE="290",o.Msg.TEXTS_HUE="160",o.Msg.VARIABLES_DYNAMIC_HUE="310",o.Msg.VARIABLES_HUE="330",o.Msg})})(en$2)),en$2.exports}var enExports=requireEn();const en=getDefaultExportFromCjs(enExports),{LOGIC_HUE,LOOPS_HUE,MATH_HUE,TEXTS_HUE,LISTS_HUE,COLOUR_HUE,VARIABLES_HUE,VARIABLES_DYNAMIC_HUE,PROCEDURES_HUE,VARIABLES_DEFAULT_NAME,UNNAMED_KEY,TODAY,DUPLICATE_BLOCK,ADD_COMMENT,REMOVE_COMMENT,DUPLICATE_COMMENT,EXTERNAL_INPUTS,INLINE_INPUTS,DELETE_BLOCK,DELETE_X_BLOCKS,DELETE_ALL_BLOCKS,CLEAN_UP,CLOSE,COLLAPSE_BLOCK,COLLAPSE_ALL,EXPAND_BLOCK,EXPAND_ALL,DISABLE_BLOCK,ENABLE_BLOCK,HELP,UNDO,REDO,CHANGE_VALUE_TITLE,RENAME_VARIABLE,RENAME_VARIABLE_TITLE,NEW_VARIABLE,NEW_STRING_VARIABLE,NEW_NUMBER_VARIABLE,NEW_COLOUR_VARIABLE,NEW_VARIABLE_TYPE_TITLE,NEW_VARIABLE_TITLE,VARIABLE_ALREADY_EXISTS,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER,DELETE_VARIABLE_CONFIRMATION,CANNOT_DELETE_VARIABLE_PROCEDURE,DELETE_VARIABLE,COLOUR_PICKER_HELPURL,COLOUR_PICKER_TOOLTIP,COLOUR_RANDOM_HELPURL,COLOUR_RANDOM_TITLE,COLOUR_RANDOM_TOOLTIP,COLOUR_RGB_HELPURL,COLOUR_RGB_TITLE,COLOUR_RGB_RED,COLOUR_RGB_GREEN,COLOUR_RGB_BLUE,COLOUR_RGB_TOOLTIP,COLOUR_BLEND_HELPURL,COLOUR_BLEND_TITLE,COLOUR_BLEND_COLOUR1,COLOUR_BLEND_COLOUR2,COLOUR_BLEND_RATIO,COLOUR_BLEND_TOOLTIP,CONTROLS_REPEAT_HELPURL,CONTROLS_REPEAT_TITLE,CONTROLS_REPEAT_INPUT_DO,CONTROLS_REPEAT_TOOLTIP,CONTROLS_WHILEUNTIL_HELPURL,CONTROLS_WHILEUNTIL_INPUT_DO,CONTROLS_WHILEUNTIL_OPERATOR_WHILE,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL,CONTROLS_FOR_HELPURL,CONTROLS_FOR_TOOLTIP,CONTROLS_FOR_TITLE,CONTROLS_FOR_INPUT_DO,CONTROLS_FOREACH_HELPURL,CONTROLS_FOREACH_TITLE,CONTROLS_FOREACH_INPUT_DO,CONTROLS_FOREACH_TOOLTIP,CONTROLS_FLOW_STATEMENTS_HELPURL,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE,CONTROLS_FLOW_STATEMENTS_WARNING,CONTROLS_IF_HELPURL,CONTROLS_IF_TOOLTIP_1,CONTROLS_IF_TOOLTIP_2,CONTROLS_IF_TOOLTIP_3,CONTROLS_IF_TOOLTIP_4,CONTROLS_IF_MSG_IF,CONTROLS_IF_MSG_ELSEIF,CONTROLS_IF_MSG_ELSE,CONTROLS_IF_MSG_THEN,CONTROLS_IF_IF_TITLE_IF,CONTROLS_IF_IF_TOOLTIP,CONTROLS_IF_ELSEIF_TITLE_ELSEIF,CONTROLS_IF_ELSEIF_TOOLTIP,CONTROLS_IF_ELSE_TITLE_ELSE,CONTROLS_IF_ELSE_TOOLTIP,LOGIC_COMPARE_HELPURL,LOGIC_COMPARE_TOOLTIP_EQ,LOGIC_COMPARE_TOOLTIP_NEQ,LOGIC_COMPARE_TOOLTIP_LT,LOGIC_COMPARE_TOOLTIP_LTE,LOGIC_COMPARE_TOOLTIP_GT,LOGIC_COMPARE_TOOLTIP_GTE,LOGIC_OPERATION_HELPURL,LOGIC_OPERATION_TOOLTIP_AND,LOGIC_OPERATION_AND,LOGIC_OPERATION_TOOLTIP_OR,LOGIC_OPERATION_OR,LOGIC_NEGATE_HELPURL,LOGIC_NEGATE_TITLE,LOGIC_NEGATE_TOOLTIP,LOGIC_BOOLEAN_HELPURL,LOGIC_BOOLEAN_TRUE,LOGIC_BOOLEAN_FALSE,LOGIC_BOOLEAN_TOOLTIP,LOGIC_NULL_HELPURL,LOGIC_NULL,LOGIC_NULL_TOOLTIP,LOGIC_TERNARY_HELPURL,LOGIC_TERNARY_CONDITION,LOGIC_TERNARY_IF_TRUE,LOGIC_TERNARY_IF_FALSE,LOGIC_TERNARY_TOOLTIP,MATH_NUMBER_HELPURL,MATH_NUMBER_TOOLTIP,MATH_ADDITION_SYMBOL,MATH_SUBTRACTION_SYMBOL,MATH_DIVISION_SYMBOL,MATH_MULTIPLICATION_SYMBOL,MATH_POWER_SYMBOL,MATH_TRIG_SIN,MATH_TRIG_COS,MATH_TRIG_TAN,MATH_TRIG_ASIN,MATH_TRIG_ACOS,MATH_TRIG_ATAN,MATH_ARITHMETIC_HELPURL,MATH_ARITHMETIC_TOOLTIP_ADD,MATH_ARITHMETIC_TOOLTIP_MINUS,MATH_ARITHMETIC_TOOLTIP_MULTIPLY,MATH_ARITHMETIC_TOOLTIP_DIVIDE,MATH_ARITHMETIC_TOOLTIP_POWER,MATH_SINGLE_HELPURL,MATH_SINGLE_OP_ROOT,MATH_SINGLE_TOOLTIP_ROOT,MATH_SINGLE_OP_ABSOLUTE,MATH_SINGLE_TOOLTIP_ABS,MATH_SINGLE_TOOLTIP_NEG,MATH_SINGLE_TOOLTIP_LN,MATH_SINGLE_TOOLTIP_LOG10,MATH_SINGLE_TOOLTIP_EXP,MATH_SINGLE_TOOLTIP_POW10,MATH_TRIG_HELPURL,MATH_TRIG_TOOLTIP_SIN,MATH_TRIG_TOOLTIP_COS,MATH_TRIG_TOOLTIP_TAN,MATH_TRIG_TOOLTIP_ASIN,MATH_TRIG_TOOLTIP_ACOS,MATH_TRIG_TOOLTIP_ATAN,MATH_CONSTANT_HELPURL,MATH_CONSTANT_TOOLTIP,MATH_IS_EVEN,MATH_IS_ODD,MATH_IS_PRIME,MATH_IS_WHOLE,MATH_IS_POSITIVE,MATH_IS_NEGATIVE,MATH_IS_DIVISIBLE_BY,MATH_IS_TOOLTIP,MATH_CHANGE_HELPURL,MATH_CHANGE_TITLE,MATH_CHANGE_TITLE_ITEM,MATH_CHANGE_TOOLTIP,MATH_ROUND_HELPURL,MATH_ROUND_TOOLTIP,MATH_ROUND_OPERATOR_ROUND,MATH_ROUND_OPERATOR_ROUNDUP,MATH_ROUND_OPERATOR_ROUNDDOWN,MATH_ONLIST_HELPURL,MATH_ONLIST_OPERATOR_SUM,MATH_ONLIST_TOOLTIP_SUM,MATH_ONLIST_OPERATOR_MIN,MATH_ONLIST_TOOLTIP_MIN,MATH_ONLIST_OPERATOR_MAX,MATH_ONLIST_TOOLTIP_MAX,MATH_ONLIST_OPERATOR_AVERAGE,MATH_ONLIST_TOOLTIP_AVERAGE,MATH_ONLIST_OPERATOR_MEDIAN,MATH_ONLIST_TOOLTIP_MEDIAN,MATH_ONLIST_OPERATOR_MODE,MATH_ONLIST_TOOLTIP_MODE,MATH_ONLIST_OPERATOR_STD_DEV,MATH_ONLIST_TOOLTIP_STD_DEV,MATH_ONLIST_OPERATOR_RANDOM,MATH_ONLIST_TOOLTIP_RANDOM,MATH_MODULO_HELPURL,MATH_MODULO_TITLE,MATH_MODULO_TOOLTIP,MATH_CONSTRAIN_HELPURL,MATH_CONSTRAIN_TITLE,MATH_CONSTRAIN_TOOLTIP,MATH_RANDOM_INT_HELPURL,MATH_RANDOM_INT_TITLE,MATH_RANDOM_INT_TOOLTIP,MATH_RANDOM_FLOAT_HELPURL,MATH_RANDOM_FLOAT_TITLE_RANDOM,MATH_RANDOM_FLOAT_TOOLTIP,MATH_ATAN2_HELPURL,MATH_ATAN2_TITLE,MATH_ATAN2_TOOLTIP,TEXT_TEXT_HELPURL,TEXT_TEXT_TOOLTIP,TEXT_JOIN_HELPURL,TEXT_JOIN_TITLE_CREATEWITH,TEXT_JOIN_TOOLTIP,TEXT_CREATE_JOIN_TITLE_JOIN,TEXT_CREATE_JOIN_TOOLTIP,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM,TEXT_CREATE_JOIN_ITEM_TOOLTIP,TEXT_APPEND_HELPURL,TEXT_APPEND_TITLE,TEXT_APPEND_VARIABLE,TEXT_APPEND_TOOLTIP,TEXT_LENGTH_HELPURL,TEXT_LENGTH_TITLE,TEXT_LENGTH_TOOLTIP,TEXT_ISEMPTY_HELPURL,TEXT_ISEMPTY_TITLE,TEXT_ISEMPTY_TOOLTIP,TEXT_INDEXOF_HELPURL,TEXT_INDEXOF_TOOLTIP,TEXT_INDEXOF_TITLE,TEXT_INDEXOF_OPERATOR_FIRST,TEXT_INDEXOF_OPERATOR_LAST,TEXT_CHARAT_HELPURL,TEXT_CHARAT_TITLE,TEXT_CHARAT_FROM_START,TEXT_CHARAT_FROM_END,TEXT_CHARAT_FIRST,TEXT_CHARAT_LAST,TEXT_CHARAT_RANDOM,TEXT_CHARAT_TAIL,TEXT_CHARAT_TOOLTIP,TEXT_GET_SUBSTRING_TOOLTIP,TEXT_GET_SUBSTRING_HELPURL,TEXT_GET_SUBSTRING_INPUT_IN_TEXT,TEXT_GET_SUBSTRING_START_FROM_START,TEXT_GET_SUBSTRING_START_FROM_END,TEXT_GET_SUBSTRING_START_FIRST,TEXT_GET_SUBSTRING_END_FROM_START,TEXT_GET_SUBSTRING_END_FROM_END,TEXT_GET_SUBSTRING_END_LAST,TEXT_GET_SUBSTRING_TAIL,TEXT_CHANGECASE_HELPURL,TEXT_CHANGECASE_TOOLTIP,TEXT_CHANGECASE_OPERATOR_UPPERCASE,TEXT_CHANGECASE_OPERATOR_LOWERCASE,TEXT_CHANGECASE_OPERATOR_TITLECASE,TEXT_TRIM_HELPURL,TEXT_TRIM_TOOLTIP,TEXT_TRIM_OPERATOR_BOTH,TEXT_TRIM_OPERATOR_LEFT,TEXT_TRIM_OPERATOR_RIGHT,TEXT_PRINT_HELPURL,TEXT_PRINT_TITLE,TEXT_PRINT_TOOLTIP,TEXT_PROMPT_HELPURL,TEXT_PROMPT_TYPE_TEXT,TEXT_PROMPT_TYPE_NUMBER,TEXT_PROMPT_TOOLTIP_NUMBER,TEXT_PROMPT_TOOLTIP_TEXT,TEXT_COUNT_MESSAGE0,TEXT_COUNT_HELPURL,TEXT_COUNT_TOOLTIP,TEXT_REPLACE_MESSAGE0,TEXT_REPLACE_HELPURL,TEXT_REPLACE_TOOLTIP,TEXT_REVERSE_MESSAGE0,TEXT_REVERSE_HELPURL,TEXT_REVERSE_TOOLTIP,LISTS_CREATE_EMPTY_HELPURL,LISTS_CREATE_EMPTY_TITLE,LISTS_CREATE_EMPTY_TOOLTIP,LISTS_CREATE_WITH_HELPURL,LISTS_CREATE_WITH_TOOLTIP,LISTS_CREATE_WITH_INPUT_WITH,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD,LISTS_CREATE_WITH_CONTAINER_TOOLTIP,LISTS_CREATE_WITH_ITEM_TITLE,LISTS_CREATE_WITH_ITEM_TOOLTIP,LISTS_REPEAT_HELPURL,LISTS_REPEAT_TOOLTIP,LISTS_REPEAT_TITLE,LISTS_LENGTH_HELPURL,LISTS_LENGTH_TITLE,LISTS_LENGTH_TOOLTIP,LISTS_ISEMPTY_HELPURL,LISTS_ISEMPTY_TITLE,LISTS_ISEMPTY_TOOLTIP,LISTS_INLIST,LISTS_INDEX_OF_HELPURL,LISTS_INDEX_OF_INPUT_IN_LIST,LISTS_INDEX_OF_FIRST,LISTS_INDEX_OF_LAST,LISTS_INDEX_OF_TOOLTIP,LISTS_GET_INDEX_HELPURL,LISTS_GET_INDEX_GET,LISTS_GET_INDEX_GET_REMOVE,LISTS_GET_INDEX_REMOVE,LISTS_GET_INDEX_FROM_START,LISTS_GET_INDEX_FROM_END,LISTS_GET_INDEX_FIRST,LISTS_GET_INDEX_LAST,LISTS_GET_INDEX_RANDOM,LISTS_GET_INDEX_TAIL,LISTS_GET_INDEX_INPUT_IN_LIST,LISTS_INDEX_FROM_START_TOOLTIP,LISTS_INDEX_FROM_END_TOOLTIP,LISTS_GET_INDEX_TOOLTIP_GET_FROM,LISTS_GET_INDEX_TOOLTIP_GET_FIRST,LISTS_GET_INDEX_TOOLTIP_GET_LAST,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM,LISTS_SET_INDEX_HELPURL,LISTS_SET_INDEX_INPUT_IN_LIST,LISTS_SET_INDEX_SET,LISTS_SET_INDEX_INSERT,LISTS_SET_INDEX_INPUT_TO,LISTS_SET_INDEX_TOOLTIP_SET_FROM,LISTS_SET_INDEX_TOOLTIP_SET_FIRST,LISTS_SET_INDEX_TOOLTIP_SET_LAST,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM,LISTS_GET_SUBLIST_HELPURL,LISTS_GET_SUBLIST_INPUT_IN_LIST,LISTS_GET_SUBLIST_START_FROM_START,LISTS_GET_SUBLIST_START_FROM_END,LISTS_GET_SUBLIST_START_FIRST,LISTS_GET_SUBLIST_END_FROM_START,LISTS_GET_SUBLIST_END_FROM_END,LISTS_GET_SUBLIST_END_LAST,LISTS_GET_SUBLIST_TAIL,LISTS_GET_SUBLIST_TOOLTIP,LISTS_SORT_HELPURL,LISTS_SORT_TITLE,LISTS_SORT_TOOLTIP,LISTS_SORT_ORDER_ASCENDING,LISTS_SORT_ORDER_DESCENDING,LISTS_SORT_TYPE_NUMERIC,LISTS_SORT_TYPE_TEXT,LISTS_SORT_TYPE_IGNORECASE,LISTS_SPLIT_HELPURL,LISTS_SPLIT_LIST_FROM_TEXT,LISTS_SPLIT_TEXT_FROM_LIST,LISTS_SPLIT_WITH_DELIMITER,LISTS_SPLIT_TOOLTIP_SPLIT,LISTS_SPLIT_TOOLTIP_JOIN,LISTS_REVERSE_HELPURL,LISTS_REVERSE_MESSAGE0,LISTS_REVERSE_TOOLTIP,ORDINAL_NUMBER_SUFFIX,VARIABLES_GET_HELPURL,VARIABLES_GET_TOOLTIP,VARIABLES_GET_CREATE_SET,VARIABLES_SET_HELPURL,VARIABLES_SET,VARIABLES_SET_TOOLTIP,VARIABLES_SET_CREATE_GET,PROCEDURES_DEFNORETURN_HELPURL,PROCEDURES_DEFNORETURN_TITLE,PROCEDURES_DEFNORETURN_PROCEDURE,PROCEDURES_BEFORE_PARAMS,PROCEDURES_CALL_BEFORE_PARAMS,PROCEDURES_CALL_DISABLED_DEF_WARNING,PROCEDURES_DEFNORETURN_DO,PROCEDURES_DEFNORETURN_TOOLTIP,PROCEDURES_DEFNORETURN_COMMENT,PROCEDURES_DEFRETURN_HELPURL,PROCEDURES_DEFRETURN_TITLE,PROCEDURES_DEFRETURN_PROCEDURE,PROCEDURES_DEFRETURN_DO,PROCEDURES_DEFRETURN_COMMENT,PROCEDURES_DEFRETURN_RETURN,PROCEDURES_DEFRETURN_TOOLTIP,PROCEDURES_ALLOW_STATEMENTS,PROCEDURES_DEF_DUPLICATE_WARNING,PROCEDURES_CALLNORETURN_HELPURL,PROCEDURES_CALLNORETURN_TOOLTIP,PROCEDURES_CALLRETURN_HELPURL,PROCEDURES_CALLRETURN_TOOLTIP,PROCEDURES_MUTATORCONTAINER_TITLE,PROCEDURES_MUTATORCONTAINER_TOOLTIP,PROCEDURES_MUTATORARG_TITLE,PROCEDURES_MUTATORARG_TOOLTIP,PROCEDURES_HIGHLIGHT_DEF,PROCEDURES_CREATE_DO,PROCEDURES_IFRETURN_TOOLTIP,PROCEDURES_IFRETURN_HELPURL,PROCEDURES_IFRETURN_WARNING,WORKSPACE_COMMENT_DEFAULT_TEXT,WORKSPACE_ARIA_LABEL,COLLAPSED_WARNINGS_WARNING,DIALOG_OK,DIALOG_CANCEL,EDIT_BLOCK_CONTENTS,MOVE_BLOCK,WINDOWS,MAC_OS,CHROME_OS,LINUX,UNKNOWN,CONTROL_KEY,COMMAND_KEY,OPTION_KEY,ALT_KEY,CUT_SHORTCUT,COPY_SHORTCUT,PASTE_SHORTCUT,HELP_PROMPT,SHORTCUTS_GENERAL,SHORTCUTS_EDITING,SHORTCUTS_CODE_NAVIGATION,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT,KEYBOARD_NAV_COPIED_HINT,KEYBOARD_NAV_CUT_HINT}=en,En=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT,ALT_KEY,CANNOT_DELETE_VARIABLE_PROCEDURE,CHANGE_VALUE_TITLE,CHROME_OS,CLEAN_UP,CLOSE,COLLAPSED_WARNINGS_WARNING,COLLAPSE_ALL,COLLAPSE_BLOCK,COLOUR_BLEND_COLOUR1,COLOUR_BLEND_COLOUR2,COLOUR_BLEND_HELPURL,COLOUR_BLEND_RATIO,COLOUR_BLEND_TITLE,COLOUR_BLEND_TOOLTIP,COLOUR_HUE,COLOUR_PICKER_HELPURL,COLOUR_PICKER_TOOLTIP,COLOUR_RANDOM_HELPURL,COLOUR_RANDOM_TITLE,COLOUR_RANDOM_TOOLTIP,COLOUR_RGB_BLUE,COLOUR_RGB_GREEN,COLOUR_RGB_HELPURL,COLOUR_RGB_RED,COLOUR_RGB_TITLE,COLOUR_RGB_TOOLTIP,COMMAND_KEY,CONTROLS_FLOW_STATEMENTS_HELPURL,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE,CONTROLS_FLOW_STATEMENTS_WARNING,CONTROLS_FOREACH_HELPURL,CONTROLS_FOREACH_INPUT_DO,CONTROLS_FOREACH_TITLE,CONTROLS_FOREACH_TOOLTIP,CONTROLS_FOR_HELPURL,CONTROLS_FOR_INPUT_DO,CONTROLS_FOR_TITLE,CONTROLS_FOR_TOOLTIP,CONTROLS_IF_ELSEIF_TITLE_ELSEIF,CONTROLS_IF_ELSEIF_TOOLTIP,CONTROLS_IF_ELSE_TITLE_ELSE,CONTROLS_IF_ELSE_TOOLTIP,CONTROLS_IF_HELPURL,CONTROLS_IF_IF_TITLE_IF,CONTROLS_IF_IF_TOOLTIP,CONTROLS_IF_MSG_ELSE,CONTROLS_IF_MSG_ELSEIF,CONTROLS_IF_MSG_IF,CONTROLS_IF_MSG_THEN,CONTROLS_IF_TOOLTIP_1,CONTROLS_IF_TOOLTIP_2,CONTROLS_IF_TOOLTIP_3,CONTROLS_IF_TOOLTIP_4,CONTROLS_REPEAT_HELPURL,CONTROLS_REPEAT_INPUT_DO,CONTROLS_REPEAT_TITLE,CONTROLS_REPEAT_TOOLTIP,CONTROLS_WHILEUNTIL_HELPURL,CONTROLS_WHILEUNTIL_INPUT_DO,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,CONTROLS_WHILEUNTIL_OPERATOR_WHILE,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,CONTROL_KEY,COPY_SHORTCUT,CUT_SHORTCUT,DELETE_ALL_BLOCKS,DELETE_BLOCK,DELETE_VARIABLE,DELETE_VARIABLE_CONFIRMATION,DELETE_X_BLOCKS,DIALOG_CANCEL,DIALOG_OK,DISABLE_BLOCK,DUPLICATE_BLOCK,DUPLICATE_COMMENT,EDIT_BLOCK_CONTENTS,ENABLE_BLOCK,EXPAND_ALL,EXPAND_BLOCK,EXTERNAL_INPUTS,HELP,HELP_PROMPT,INLINE_INPUTS,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT,KEYBOARD_NAV_COPIED_HINT,KEYBOARD_NAV_CUT_HINT,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT,LINUX,LISTS_CREATE_EMPTY_HELPURL,LISTS_CREATE_EMPTY_TITLE,LISTS_CREATE_EMPTY_TOOLTIP,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD,LISTS_CREATE_WITH_CONTAINER_TOOLTIP,LISTS_CREATE_WITH_HELPURL,LISTS_CREATE_WITH_INPUT_WITH,LISTS_CREATE_WITH_ITEM_TITLE,LISTS_CREATE_WITH_ITEM_TOOLTIP,LISTS_CREATE_WITH_TOOLTIP,LISTS_GET_INDEX_FIRST,LISTS_GET_INDEX_FROM_END,LISTS_GET_INDEX_FROM_START,LISTS_GET_INDEX_GET,LISTS_GET_INDEX_GET_REMOVE,LISTS_GET_INDEX_HELPURL,LISTS_GET_INDEX_INPUT_IN_LIST,LISTS_GET_INDEX_LAST,LISTS_GET_INDEX_RANDOM,LISTS_GET_INDEX_REMOVE,LISTS_GET_INDEX_TAIL,LISTS_GET_INDEX_TOOLTIP_GET_FIRST,LISTS_GET_INDEX_TOOLTIP_GET_FROM,LISTS_GET_INDEX_TOOLTIP_GET_LAST,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM,LISTS_GET_SUBLIST_END_FROM_END,LISTS_GET_SUBLIST_END_FROM_START,LISTS_GET_SUBLIST_END_LAST,LISTS_GET_SUBLIST_HELPURL,LISTS_GET_SUBLIST_INPUT_IN_LIST,LISTS_GET_SUBLIST_START_FIRST,LISTS_GET_SUBLIST_START_FROM_END,LISTS_GET_SUBLIST_START_FROM_START,LISTS_GET_SUBLIST_TAIL,LISTS_GET_SUBLIST_TOOLTIP,LISTS_HUE,LISTS_INDEX_FROM_END_TOOLTIP,LISTS_INDEX_FROM_START_TOOLTIP,LISTS_INDEX_OF_FIRST,LISTS_INDEX_OF_HELPURL,LISTS_INDEX_OF_INPUT_IN_LIST,LISTS_INDEX_OF_LAST,LISTS_INDEX_OF_TOOLTIP,LISTS_INLIST,LISTS_ISEMPTY_HELPURL,LISTS_ISEMPTY_TITLE,LISTS_ISEMPTY_TOOLTIP,LISTS_LENGTH_HELPURL,LISTS_LENGTH_TITLE,LISTS_LENGTH_TOOLTIP,LISTS_REPEAT_HELPURL,LISTS_REPEAT_TITLE,LISTS_REPEAT_TOOLTIP,LISTS_REVERSE_HELPURL,LISTS_REVERSE_MESSAGE0,LISTS_REVERSE_TOOLTIP,LISTS_SET_INDEX_HELPURL,LISTS_SET_INDEX_INPUT_IN_LIST,LISTS_SET_INDEX_INPUT_TO,LISTS_SET_INDEX_INSERT,LISTS_SET_INDEX_SET,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM,LISTS_SET_INDEX_TOOLTIP_SET_FIRST,LISTS_SET_INDEX_TOOLTIP_SET_FROM,LISTS_SET_INDEX_TOOLTIP_SET_LAST,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM,LISTS_SORT_HELPURL,LISTS_SORT_ORDER_ASCENDING,LISTS_SORT_ORDER_DESCENDING,LISTS_SORT_TITLE,LISTS_SORT_TOOLTIP,LISTS_SORT_TYPE_IGNORECASE,LISTS_SORT_TYPE_NUMERIC,LISTS_SORT_TYPE_TEXT,LISTS_SPLIT_HELPURL,LISTS_SPLIT_LIST_FROM_TEXT,LISTS_SPLIT_TEXT_FROM_LIST,LISTS_SPLIT_TOOLTIP_JOIN,LISTS_SPLIT_TOOLTIP_SPLIT,LISTS_SPLIT_WITH_DELIMITER,LOGIC_BOOLEAN_FALSE,LOGIC_BOOLEAN_HELPURL,LOGIC_BOOLEAN_TOOLTIP,LOGIC_BOOLEAN_TRUE,LOGIC_COMPARE_HELPURL,LOGIC_COMPARE_TOOLTIP_EQ,LOGIC_COMPARE_TOOLTIP_GT,LOGIC_COMPARE_TOOLTIP_GTE,LOGIC_COMPARE_TOOLTIP_LT,LOGIC_COMPARE_TOOLTIP_LTE,LOGIC_COMPARE_TOOLTIP_NEQ,LOGIC_HUE,LOGIC_NEGATE_HELPURL,LOGIC_NEGATE_TITLE,LOGIC_NEGATE_TOOLTIP,LOGIC_NULL,LOGIC_NULL_HELPURL,LOGIC_NULL_TOOLTIP,LOGIC_OPERATION_AND,LOGIC_OPERATION_HELPURL,LOGIC_OPERATION_OR,LOGIC_OPERATION_TOOLTIP_AND,LOGIC_OPERATION_TOOLTIP_OR,LOGIC_TERNARY_CONDITION,LOGIC_TERNARY_HELPURL,LOGIC_TERNARY_IF_FALSE,LOGIC_TERNARY_IF_TRUE,LOGIC_TERNARY_TOOLTIP,LOOPS_HUE,MAC_OS,MATH_ADDITION_SYMBOL,MATH_ARITHMETIC_HELPURL,MATH_ARITHMETIC_TOOLTIP_ADD,MATH_ARITHMETIC_TOOLTIP_DIVIDE,MATH_ARITHMETIC_TOOLTIP_MINUS,MATH_ARITHMETIC_TOOLTIP_MULTIPLY,MATH_ARITHMETIC_TOOLTIP_POWER,MATH_ATAN2_HELPURL,MATH_ATAN2_TITLE,MATH_ATAN2_TOOLTIP,MATH_CHANGE_HELPURL,MATH_CHANGE_TITLE,MATH_CHANGE_TITLE_ITEM,MATH_CHANGE_TOOLTIP,MATH_CONSTANT_HELPURL,MATH_CONSTANT_TOOLTIP,MATH_CONSTRAIN_HELPURL,MATH_CONSTRAIN_TITLE,MATH_CONSTRAIN_TOOLTIP,MATH_DIVISION_SYMBOL,MATH_HUE,MATH_IS_DIVISIBLE_BY,MATH_IS_EVEN,MATH_IS_NEGATIVE,MATH_IS_ODD,MATH_IS_POSITIVE,MATH_IS_PRIME,MATH_IS_TOOLTIP,MATH_IS_WHOLE,MATH_MODULO_HELPURL,MATH_MODULO_TITLE,MATH_MODULO_TOOLTIP,MATH_MULTIPLICATION_SYMBOL,MATH_NUMBER_HELPURL,MATH_NUMBER_TOOLTIP,MATH_ONLIST_HELPURL,MATH_ONLIST_OPERATOR_AVERAGE,MATH_ONLIST_OPERATOR_MAX,MATH_ONLIST_OPERATOR_MEDIAN,MATH_ONLIST_OPERATOR_MIN,MATH_ONLIST_OPERATOR_MODE,MATH_ONLIST_OPERATOR_RANDOM,MATH_ONLIST_OPERATOR_STD_DEV,MATH_ONLIST_OPERATOR_SUM,MATH_ONLIST_TOOLTIP_AVERAGE,MATH_ONLIST_TOOLTIP_MAX,MATH_ONLIST_TOOLTIP_MEDIAN,MATH_ONLIST_TOOLTIP_MIN,MATH_ONLIST_TOOLTIP_MODE,MATH_ONLIST_TOOLTIP_RANDOM,MATH_ONLIST_TOOLTIP_STD_DEV,MATH_ONLIST_TOOLTIP_SUM,MATH_POWER_SYMBOL,MATH_RANDOM_FLOAT_HELPURL,MATH_RANDOM_FLOAT_TITLE_RANDOM,MATH_RANDOM_FLOAT_TOOLTIP,MATH_RANDOM_INT_HELPURL,MATH_RANDOM_INT_TITLE,MATH_RANDOM_INT_TOOLTIP,MATH_ROUND_HELPURL,MATH_ROUND_OPERATOR_ROUND,MATH_ROUND_OPERATOR_ROUNDDOWN,MATH_ROUND_OPERATOR_ROUNDUP,MATH_ROUND_TOOLTIP,MATH_SINGLE_HELPURL,MATH_SINGLE_OP_ABSOLUTE,MATH_SINGLE_OP_ROOT,MATH_SINGLE_TOOLTIP_ABS,MATH_SINGLE_TOOLTIP_EXP,MATH_SINGLE_TOOLTIP_LN,MATH_SINGLE_TOOLTIP_LOG10,MATH_SINGLE_TOOLTIP_NEG,MATH_SINGLE_TOOLTIP_POW10,MATH_SINGLE_TOOLTIP_ROOT,MATH_SUBTRACTION_SYMBOL,MATH_TRIG_ACOS,MATH_TRIG_ASIN,MATH_TRIG_ATAN,MATH_TRIG_COS,MATH_TRIG_HELPURL,MATH_TRIG_SIN,MATH_TRIG_TAN,MATH_TRIG_TOOLTIP_ACOS,MATH_TRIG_TOOLTIP_ASIN,MATH_TRIG_TOOLTIP_ATAN,MATH_TRIG_TOOLTIP_COS,MATH_TRIG_TOOLTIP_SIN,MATH_TRIG_TOOLTIP_TAN,MOVE_BLOCK,NEW_COLOUR_VARIABLE,NEW_NUMBER_VARIABLE,NEW_STRING_VARIABLE,NEW_VARIABLE,NEW_VARIABLE_TITLE,NEW_VARIABLE_TYPE_TITLE,OPTION_KEY,ORDINAL_NUMBER_SUFFIX,PASTE_SHORTCUT,PROCEDURES_ALLOW_STATEMENTS,PROCEDURES_BEFORE_PARAMS,PROCEDURES_CALLNORETURN_HELPURL,PROCEDURES_CALLNORETURN_TOOLTIP,PROCEDURES_CALLRETURN_HELPURL,PROCEDURES_CALLRETURN_TOOLTIP,PROCEDURES_CALL_BEFORE_PARAMS,PROCEDURES_CALL_DISABLED_DEF_WARNING,PROCEDURES_CREATE_DO,PROCEDURES_DEFNORETURN_COMMENT,PROCEDURES_DEFNORETURN_DO,PROCEDURES_DEFNORETURN_HELPURL,PROCEDURES_DEFNORETURN_PROCEDURE,PROCEDURES_DEFNORETURN_TITLE,PROCEDURES_DEFNORETURN_TOOLTIP,PROCEDURES_DEFRETURN_COMMENT,PROCEDURES_DEFRETURN_DO,PROCEDURES_DEFRETURN_HELPURL,PROCEDURES_DEFRETURN_PROCEDURE,PROCEDURES_DEFRETURN_RETURN,PROCEDURES_DEFRETURN_TITLE,PROCEDURES_DEFRETURN_TOOLTIP,PROCEDURES_DEF_DUPLICATE_WARNING,PROCEDURES_HIGHLIGHT_DEF,PROCEDURES_HUE,PROCEDURES_IFRETURN_HELPURL,PROCEDURES_IFRETURN_TOOLTIP,PROCEDURES_IFRETURN_WARNING,PROCEDURES_MUTATORARG_TITLE,PROCEDURES_MUTATORARG_TOOLTIP,PROCEDURES_MUTATORCONTAINER_TITLE,PROCEDURES_MUTATORCONTAINER_TOOLTIP,REDO,REMOVE_COMMENT,RENAME_VARIABLE,RENAME_VARIABLE_TITLE,SHORTCUTS_CODE_NAVIGATION,SHORTCUTS_EDITING,SHORTCUTS_GENERAL,TEXTS_HUE,TEXT_APPEND_HELPURL,TEXT_APPEND_TITLE,TEXT_APPEND_TOOLTIP,TEXT_APPEND_VARIABLE,TEXT_CHANGECASE_HELPURL,TEXT_CHANGECASE_OPERATOR_LOWERCASE,TEXT_CHANGECASE_OPERATOR_TITLECASE,TEXT_CHANGECASE_OPERATOR_UPPERCASE,TEXT_CHANGECASE_TOOLTIP,TEXT_CHARAT_FIRST,TEXT_CHARAT_FROM_END,TEXT_CHARAT_FROM_START,TEXT_CHARAT_HELPURL,TEXT_CHARAT_LAST,TEXT_CHARAT_RANDOM,TEXT_CHARAT_TAIL,TEXT_CHARAT_TITLE,TEXT_CHARAT_TOOLTIP,TEXT_COUNT_HELPURL,TEXT_COUNT_MESSAGE0,TEXT_COUNT_TOOLTIP,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM,TEXT_CREATE_JOIN_ITEM_TOOLTIP,TEXT_CREATE_JOIN_TITLE_JOIN,TEXT_CREATE_JOIN_TOOLTIP,TEXT_GET_SUBSTRING_END_FROM_END,TEXT_GET_SUBSTRING_END_FROM_START,TEXT_GET_SUBSTRING_END_LAST,TEXT_GET_SUBSTRING_HELPURL,TEXT_GET_SUBSTRING_INPUT_IN_TEXT,TEXT_GET_SUBSTRING_START_FIRST,TEXT_GET_SUBSTRING_START_FROM_END,TEXT_GET_SUBSTRING_START_FROM_START,TEXT_GET_SUBSTRING_TAIL,TEXT_GET_SUBSTRING_TOOLTIP,TEXT_INDEXOF_HELPURL,TEXT_INDEXOF_OPERATOR_FIRST,TEXT_INDEXOF_OPERATOR_LAST,TEXT_INDEXOF_TITLE,TEXT_INDEXOF_TOOLTIP,TEXT_ISEMPTY_HELPURL,TEXT_ISEMPTY_TITLE,TEXT_ISEMPTY_TOOLTIP,TEXT_JOIN_HELPURL,TEXT_JOIN_TITLE_CREATEWITH,TEXT_JOIN_TOOLTIP,TEXT_LENGTH_HELPURL,TEXT_LENGTH_TITLE,TEXT_LENGTH_TOOLTIP,TEXT_PRINT_HELPURL,TEXT_PRINT_TITLE,TEXT_PRINT_TOOLTIP,TEXT_PROMPT_HELPURL,TEXT_PROMPT_TOOLTIP_NUMBER,TEXT_PROMPT_TOOLTIP_TEXT,TEXT_PROMPT_TYPE_NUMBER,TEXT_PROMPT_TYPE_TEXT,TEXT_REPLACE_HELPURL,TEXT_REPLACE_MESSAGE0,TEXT_REPLACE_TOOLTIP,TEXT_REVERSE_HELPURL,TEXT_REVERSE_MESSAGE0,TEXT_REVERSE_TOOLTIP,TEXT_TEXT_HELPURL,TEXT_TEXT_TOOLTIP,TEXT_TRIM_HELPURL,TEXT_TRIM_OPERATOR_BOTH,TEXT_TRIM_OPERATOR_LEFT,TEXT_TRIM_OPERATOR_RIGHT,TEXT_TRIM_TOOLTIP,TODAY,UNDO,UNKNOWN,UNNAMED_KEY,VARIABLES_DEFAULT_NAME,VARIABLES_DYNAMIC_HUE,VARIABLES_GET_CREATE_SET,VARIABLES_GET_HELPURL,VARIABLES_GET_TOOLTIP,VARIABLES_HUE,VARIABLES_SET,VARIABLES_SET_CREATE_GET,VARIABLES_SET_HELPURL,VARIABLES_SET_TOOLTIP,VARIABLE_ALREADY_EXISTS,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER,WINDOWS,WORKSPACE_ARIA_LABEL,WORKSPACE_COMMENT_DEFAULT_TEXT},Symbol.toStringTag,{value:"Module"}));class ContinuousCategory extends ToolboxCategory{createLabelDom_(n){const o=document.createElement("div");return o.setAttribute("id",this.getId()+".label"),o.textContent=n,o.classList.add(this.cssConfig_.label??""),o}createIconDom_(){const n=document.createElement("div");return n.classList.add("categoryBubble"),n.style.backgroundColor=this.colour_,n}addColourBorder_(){}setSelected(n){!this.rowDiv_||!this.htmlDiv_||(n?(this.rowDiv_.style.backgroundColor="gray",utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected??"")):(this.rowDiv_.style.backgroundColor="",utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected??"")),utils.aria.setState(this.htmlDiv_,utils.aria.State.SELECTED,n))}}class ContinuousToolbox extends Toolbox{init(){super.init(),this.getFlyout().show(this.getInitialFlyoutContents()),this.getWorkspace().addChangeListener(o=>{(o.type===Events.BLOCK_CREATE||o.type===Events.BLOCK_DELETE||o.type===Events.BLOCK_CHANGE)&&this.refreshSelection()})}getFlyout(){return super.getFlyout()}getInitialFlyoutContents(){return this.getToolboxItems().flatMap(this.convertToolboxItemToFlyoutItems)}convertToolboxItemToFlyoutItems(n){let o=[];if(n instanceof ToolboxCategory){o.push({kind:"LABEL",text:n.getName()});let s=n.getContents();typeof s=="string"&&(s=[{custom:s,kind:"CATEGORY"}]),o=o.concat(s)}return o}refreshSelection(){this.getFlyout().isVisible()&&(this.refreshDebouncer&&clearTimeout(this.refreshDebouncer),this.refreshDebouncer=setTimeout(()=>{this.getFlyout().show(this.getInitialFlyoutContents())},100))}updateFlyout_(n,o){o?(this.getFlyout().scrollToCategory(o),this.getFlyout().isVisible()||this.getFlyout().show(this.getInitialFlyoutContents())):this.getFlyout().autoClose&&this.getFlyout().hide()}shouldDeselectItem_(n,o){return!!(n&&n!==o)}getCategoryByName(n){const o=this.getToolboxItems().find(s=>s instanceof ToolboxCategory&&s.isSelectable()&&n===s.getName());return o||null}selectCategoryByName(n){const o=this.getCategoryByName(n);if(!o)return;const s=this.selectedItem_;s&&this.shouldDeselectItem_(s,o)&&this.deselectItem_(s),this.shouldSelectItem_(s,o)&&this.selectItem_(s,o)}getClientRect(){const n=this.getFlyout();return n&&!n.autoClose?n.getClientRect():super.getClientRect()}}class ContinuousFlyoutMetrics extends FlyoutMetricsManager{getScrollMetrics(n,o,s){const l=super.getScrollMetrics(n,o,s),f=s||this.getContentMetrics(n),E=o||this.getViewMetrics(n);return l&&(l.height+=this.flyout_.calculateBottomPadding(f,E)),l}}class RecyclableBlockFlyoutInflater extends BlockFlyoutInflater{constructor(){super(...arguments),this.recyclingEnabled=!1,this.recycledBlocks=new Map}createBlock(n,o){const s=this.getTypeFromDefinition(n);return this.getRecycledBlock(s)??super.createBlock(n,o)}getTypeFromDefinition(n){let o;if(n.blockxml?o=(typeof n.blockxml=="string"?utils.xml.textToDom(n.blockxml):n.blockxml).getAttribute("type"):o=n.type,!o)throw new Error(`Block type is not specified in block definition: ${JSON.stringify(n)}`);return o}recycleBlock(n){const o=n.getRelativeToSurfaceXY();n.moveBy(-o.x,-o.y),this.recycledBlocks.set(n.type,n)}getRecycledBlock(n){const o=this.recycledBlocks.get(n);return this.recycledBlocks.delete(n),o}blockIsRecyclable(n){if(!this.recyclingEnabled)return!1;if(this.recycleEligibilityChecker)return this.recycleEligibilityChecker(n);if(n.mutationToDom||n.domToMutation||n.saveExtraState||n.loadExtraState||!n.isEnabled())return!1;for(const o of n.inputList){for(const s of o.fieldRow)if(s.referencesVariables()||s instanceof FieldDropdown&&s.isOptionListDynamic())return!1;if(o.connection){const s=o.connection.targetBlock();if(s&&!this.blockIsRecyclable(s))return!1}}return!0}disposeItem(n){const o=n.getElement();o instanceof BlockSvg&&this.blockIsRecyclable(o)?(this.removeListeners(o.id),this.recycleBlock(o)):super.disposeItem(n)}emptyRecycledBlocks(){this.recycledBlocks.forEach(n=>n.dispose(!1,!1)),this.recycledBlocks.clear()}}class ContinuousFlyout extends VerticalFlyout{constructor(n){super(n),this.scrollPositions=new Map,this.scrollAnimationFraction=.3,this.autoClose=!1,this.getWorkspace().setMetricsManager(new ContinuousFlyoutMetrics(this.getWorkspace(),this)),this.getWorkspace().addChangeListener(o=>{o.type===Events.VIEWPORT_CHANGE&&this.selectCategoryByScrollPosition(-this.getWorkspace().scrollY)}),this.setRecyclingEnabled(!0)}getParentToolbox(){const n=this.targetWorkspace.getToolbox();return!n||n instanceof ContinuousToolbox?n:(console.warn("Expected a `ContinuousToolbox` instance but did not find one. Make sure `registerContinuousToolbox()` has been called and the continuous toolbox has been injected."),null)}recordScrollPositions(){this.scrollPositions.clear(),this.getContents().filter(this.toolboxItemIsLabel.bind(this)).map(n=>n.getElement()).forEach(n=>{this.scrollPositions.set(n.getButtonText(),Math.max(0,n.getPosition().y-this.GAP_Y/2))})}toolboxItemIsLabel(n){const o=n.getElement();return!!(n.getType()==="label"&&o instanceof FlyoutButton&&o.isLabel()&&this.getParentToolbox()?.getCategoryByName(o.getButtonText()))}getCategoryScrollPosition(n){const o=this.scrollPositions.get(n);return o===void 0&&console.warn(`Scroll position not recorded for category ${n}`),o??null}selectCategoryByScrollPosition(n){if(this.scrollTarget)return;const o=Math.round(n/this.getWorkspace().scale);for(const[s,l]of[...this.scrollPositions.entries()].reverse())if(o>=l){this.getParentToolbox()?.selectCategoryByName(s);return}}scrollTo(n){const o=this.getWorkspace().getMetrics();this.scrollTarget=Math.min(n*this.getWorkspace().scale,o.scrollHeight-o.viewHeight),this.stepScrollAnimation()}scrollToCategory(n){const o=this.scrollPositions.get(n.getName());if(o===void 0){console.warn(`Scroll position not recorded for category ${name}`);return}this.scrollTo(o)}stepScrollAnimation(){if(this.scrollTarget===void 0)return;const n=-this.getWorkspace().scrollY,o=this.scrollTarget-n;if(Math.abs(o)<1){this.getWorkspace().scrollbar?.setY(this.scrollTarget),this.scrollTarget=void 0;return}this.getWorkspace().scrollbar?.setY(n+o*this.scrollAnimationFraction),requestAnimationFrame(this.stepScrollAnimation.bind(this))}wheel_(n){this.scrollTarget||super.wheel_(n)}calculateBottomPadding(n,o){if(this.scrollPositions.size===0)return 0;const s=([...this.scrollPositions.values()].pop()??0)*this.getWorkspace().scale,l=n.height-s;return l<o.height?o.height-l:0}getX(){return this.isVisible()&&this.targetWorkspace.toolboxPosition===this.toolboxPosition_&&this.targetWorkspace.getToolbox()&&this.toolboxPosition_!==utils.toolbox.Position.LEFT?this.targetWorkspace.getMetricsManager().getViewMetrics().width:super.getX()}show(n){super.show(n),this.recordScrollPositions(),this.getWorkspace().resizeContents(),this.getParentToolbox()?.getSelectedItem()||this.selectCategoryByScrollPosition(0),this.getRecyclableInflater().emptyRecycledBlocks()}setBlockIsRecyclable(n){this.getRecyclableInflater().recycleEligibilityChecker=n}setRecyclingEnabled(n){this.getRecyclableInflater().recyclingEnabled=n}getRecyclableInflater(){const n=this.getInflaterForType("block");if(!(n instanceof RecyclableBlockFlyoutInflater))throw new Error("The RecyclableBlockFlyoutInflater is not registered.");return n}}class ContinuousMetrics extends MetricsManager{getViewMetrics(n=!1){const o=n?this.workspace_.scale:1,s=this.getSvgMetrics(),l=this.getToolboxMetrics(),f=this.getFlyoutMetrics(!1),E=l.position;return this.workspace_.getToolbox()&&(E==TOOLBOX_AT_TOP||E==TOOLBOX_AT_BOTTOM?s.height-=l.height+f.height:(E==TOOLBOX_AT_LEFT||E==TOOLBOX_AT_RIGHT)&&(s.width-=l.width+f.width)),{height:s.height/o,width:s.width/o,top:-this.workspace_.scrollY/o,left:-this.workspace_.scrollX/o}}getAbsoluteMetrics(){const n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!1),s=n.position;let l=0;this.workspace_.getToolbox()&&s==TOOLBOX_AT_LEFT&&(l=n.width+o.width);let f=0;return this.workspace_.getToolbox()&&s==TOOLBOX_AT_TOP&&(f=n.height+o.height),{top:f,left:l}}}function registerContinuousToolbox(){registry.register(registry.Type.TOOLBOX_ITEM,ToolboxCategory.registrationName,ContinuousCategory,!0),registry.register(registry.Type.METRICS_MANAGER,"ContinuousMetrics",ContinuousMetrics,!0),registry.register(registry.Type.FLYOUTS_VERTICAL_TOOLBOX,"ContinuousFlyout",ContinuousFlyout,!0),registry.register(registry.Type.TOOLBOX,"ContinuousToolbox",ContinuousToolbox,!0),registry.register(registry.Type.FLYOUT_INFLATER,"block",RecyclableBlockFlyoutInflater,!0),Css.register(`
  .categoryBubble {
    margin: 0 auto 0.125rem;
    border-radius: 100%;
    border: 1px solid;
    width: 1.25rem;
    height: 1.25rem;
  }
  .blocklyToolboxCategory {
    height: initial;
    padding: 3px 0;
  }
  .blocklyTreeRowContentContainer {
    display: flex;
    flex-direction: column;
  }
  .blocklyToolboxCategoryLabel {
    margin: auto;
  }
  .blocklyToolboxCategoryLabel {
    text-align: center;
  }
  `)}const kind="categoryToolbox",contents=[{kind:"search",name:"Search",contents:[]},{kind:"category",name:"Blocks",categorystyle:"scratch_category",contents:[{kind:"block",type:"create_block",gap:8,enabled:!0},{kind:"block",type:"create_input",gap:8,enabled:!0},{kind:"block",type:"input_menu",gap:8,enabled:!0},{kind:"block",type:"create_menu",gap:8,enabled:!0},{kind:"block",type:"create_dynamic_menu",gap:8,enabled:!0},{kind:"block",type:"create_input_menu",gap:8,enabled:!0},{kind:"block",type:"menu_item",gap:8,enabled:!0},{kind:"block",type:"get_input",gap:8,enabled:!0},{kind:"block",type:"return_block",gap:8,enabled:!0},{kind:"block",type:"create_hat",gap:8,enabled:!0},{kind:"block",type:"call_hat",gap:8,enabled:!0},{kind:"block",type:"call_hat_with_args",gap:8,enabled:!0}]},{kind:"category",name:"Category",categorystyle:"category_category",contents:[{kind:"block",type:"order_category",gap:8,enabled:!0},{kind:"block",type:"create_label",gap:8,enabled:!0},{kind:"block",type:"create_button",gap:8,enabled:!0},{kind:"block",type:"use_block",gap:8,enabled:!0},{kind:"block",type:"use_hat",gap:8,enabled:!0}]},{kind:"category",name:"JSON",categorystyle:"json_category",contents:[{kind:"block",type:"json_new",gap:8,enabled:!0,extraState:{itemCount:0}},{kind:"block",type:"json_new",gap:8,enabled:!0},{kind:"block",type:"json_get",gap:8,enabled:!0},{kind:"block",type:"json_set",gap:8,enabled:!0},{kind:"block",type:"json_encode",gap:8,enabled:!0},{kind:"block",type:"json_entries",gap:8,enabled:!0},{kind:"block",type:"json_has_key",gap:8,enabled:!0}]},{kind:"category",name:"Functions",categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"category",name:"Variables",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Text",categorystyle:"text_category",contents:[{kind:"block",type:"text_multiline",gap:8,enabled:!0},{kind:"block",type:"text",gap:8,enabled:!0},{kind:"block",type:"text_join",gap:8,enabled:!0},{kind:"block",type:"text_append",gap:8,enabled:!0},{kind:"block",type:"text_length",gap:8,enabled:!0},{kind:"block",type:"text_isEmpty",gap:8,enabled:!0},{kind:"block",type:"text_indexOf",gap:8,enabled:!0},{kind:"block",type:"text_charAt",gap:8,enabled:!0},{kind:"block",type:"text_getSubstring",gap:8,enabled:!0},{kind:"block",type:"text_changeCase",gap:8,enabled:!0},{kind:"block",type:"text_trim",gap:8,enabled:!0},{kind:"block",type:"text_prompt_ext",gap:8,enabled:!0},{kind:"block",type:"text_prompt",gap:8,enabled:!0},{kind:"block",type:"text_count",gap:8,enabled:!0},{kind:"block",type:"text_replace",gap:8,enabled:!0},{kind:"block",type:"text_reverse",gap:8,enabled:!0},{kind:"block",type:"newline",gap:8,enabled:!0}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_angle",gap:8,enabled:!0},{kind:"block",type:"math_number",gap:8,enabled:!0},{kind:"block",type:"math_arithmetic",gap:8,enabled:!0},{kind:"block",type:"math_single",gap:8,enabled:!0},{kind:"block",type:"math_trig",gap:8,enabled:!0},{kind:"block",type:"math_constant",gap:8,enabled:!0},{kind:"block",type:"math_number_property",gap:8,enabled:!0},{kind:"block",type:"math_round",gap:8,enabled:!0},{kind:"block",type:"math_on_list",gap:8,enabled:!0},{kind:"block",type:"math_modulo",gap:8,enabled:!0},{kind:"block",type:"math_constrain",gap:8,enabled:!0},{kind:"block",type:"math_random_int",gap:8,enabled:!0},{kind:"block",type:"math_random_float",gap:8,enabled:!0},{kind:"block",type:"math_atan2",gap:8,enabled:!0},{kind:"block",type:"math_convert_degrees",gap:8,enabled:!0}]},{kind:"category",name:"Lists",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_with",gap:8,enabled:!0,extraState:{itemCount:0}},{kind:"block",type:"lists_create_with",gap:8,enabled:!0},{kind:"block",type:"lists_repeat",gap:8,enabled:!0},{kind:"block",type:"lists_reverse",gap:8,enabled:!0},{kind:"block",type:"lists_isEmpty",gap:8,enabled:!0},{kind:"block",type:"lists_length",gap:8,enabled:!0},{kind:"block",type:"lists_indexOf",gap:8,enabled:!0},{kind:"block",type:"lists_getIndex",gap:8,enabled:!0},{kind:"block",type:"lists_setIndex",gap:8,enabled:!0},{kind:"block",type:"lists_getSublist",gap:8,enabled:!0},{kind:"block",type:"lists_sort",gap:8,enabled:!0},{kind:"block",type:"lists_split",gap:8,enabled:!0}]},{kind:"category",name:"Controls",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",gap:8,enabled:!0},{kind:"block",type:"controls_repeat",gap:8,enabled:!0},{kind:"block",type:"controls_whileUntil",gap:8,enabled:!0},{kind:"block",type:"controls_for",gap:8,enabled:!0},{kind:"block",type:"controls_forEach",gap:8,enabled:!0},{kind:"block",type:"controls_flow_statements",gap:8,enabled:!0},{kind:"block",type:"controls_wait",gap:8,enabled:!0},{kind:"block",type:"controls_wait_until",gap:8,enabled:!0},{kind:"block",type:"controls_try",gap:8,enabled:!0}]},{kind:"category",name:"Logic",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_boolean",gap:8,enabled:!0},{kind:"block",type:"logic_compare",gap:8,enabled:!0},{kind:"block",type:"logic_operation",gap:8,enabled:!0},{kind:"block",type:"logic_negate",gap:8,enabled:!0},{kind:"block",type:"logic_null",gap:8,enabled:!0},{kind:"block",type:"logic_ternary",gap:8,enabled:!0},{kind:"block",type:"controls_if",gap:8,enabled:!0},{kind:"block",type:"controls_if",extraState:{hasElse:!0}},{kind:"block",type:"controls_if",extraState:{hasElse:!0,elseIfCount:1}},{kind:"block",type:"logic_switch"},{kind:"block",type:"logic_switch",extraState:{hasDefault:!0}},{kind:"block",type:"logic_switch_break"},{kind:"block",type:"logic_switch_expr"},{kind:"block",type:"logic_switch_expr",extraState:{hasDefault:!0}}]},{kind:"category",name:"Color",categorystyle:"colour_category",contents:[{kind:"block",type:"colour_hsv_sliders",gap:8,enabled:!0},{kind:"block",type:"colour_picker",gap:8,enabled:!0},{kind:"block",type:"colour_rgb",gap:8,enabled:!0},{kind:"block",type:"colour_random",gap:8,enabled:!0},{kind:"block",type:"colour_blend",gap:8,enabled:!0}]},{kind:"category",name:"Browser",categorystyle:"browser_category",contents:[{kind:"block",type:"browser_console",gap:8,enabled:!0},{kind:"block",type:"browser_alert",gap:8,enabled:!0},{kind:"block",type:"browser_prompt",gap:8,enabled:!0},{kind:"block",type:"browser_confirm",gap:8,enabled:!0}]},{kind:"category",name:"Advanced",categorystyle:"advanced_category",contents:[{kind:"block",type:"eval",gap:8,enabled:!0},{kind:"block",type:"eval_ret",gap:8,enabled:!0},{kind:"block",type:"raw",gap:8,enabled:!0},{kind:"block",type:"raw_ret",gap:8,enabled:!0}]},{kind:"category",name:"Extensions",categorystyle:"extension_category",contents:[{kind:"button",text:"Load Extension",callbackKey:"Load_Extension"}]},{kind:"sep"}],toolbox={kind,contents};var dist$b={exports:{}};var dist$a=dist$b.exports,hasRequiredDist$5;function requireDist$5(){return hasRequiredDist$5||(hasRequiredDist$5=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(dist$a,o=>(()=>{var s={370:N=>{N.exports=o}},l={},f=(function N(x){var w=l[x];if(w!==void 0)return w.exports;var R=l[x]={exports:{}};return s[x](R,R.exports,N),R.exports})(370);class E{constructor(){this.trigramsToBlocks=new Map}indexBlocks(x){const w=new f.Workspace;x.forEach(R=>{const k=R.type;if(!k||k==="")return;const B=w.newBlock(k);this.indexBlockText(k.replaceAll("_"," "),R),B.inputList.forEach(P=>{P.fieldRow.forEach(z=>{this.indexDropdownOption(z,R),this.indexBlockText(z.getText(),R)})})})}indexDropdownOption(x,w){x instanceof f.FieldDropdown&&x.getOptions(!0).forEach(R=>{typeof R[0]=="string"?this.indexBlockText(R[0],w):"alt"in R[0]&&this.indexBlockText(R[0].alt,w)})}blockTypesMatching(x){return[...this.generateTrigrams(x).map(w=>{var R;return(R=this.trigramsToBlocks.get(w))!==null&&R!==void 0?R:new Set}).reduce((w,R)=>this.getIntersection(w,R)).values()]}indexBlockText(x,w){this.generateTrigrams(x).forEach(R=>{var k;const B=(k=this.trigramsToBlocks.get(R))!==null&&k!==void 0?k:new Set;B.add(w),this.trigramsToBlocks.set(R,B)})}generateTrigrams(x){const w=x.toLowerCase();if(!w)return[];if(w.length<=3)return[w];const R=[];for(let k=0;k<=w.length-3;k++)R.push(w.substring(k,k+3));return R}getIntersection(x,w){return new Set([...x].filter(R=>w.has(R)))}}class g extends f.ToolboxCategory{constructor(x,w,R){super(x,w,R),this.SEARCH_INPUT_ID="toolbox-search-input",this.blockSearcher=new E,this.initBlockSearcher(),this.registerShortcut()}createDom_(){var x;const w=super.createDom_();return this.searchField=document.createElement("input"),this.searchField.id=this.SEARCH_INPUT_ID,this.searchField.type="search",this.searchField.placeholder="Search",this.workspace_.RTL?this.searchField.style.marginRight="8px":this.searchField.style.marginLeft="8px",this.searchField.addEventListener("keyup",R=>{R.key!=="Escape"?this.matchBlocks():this.parentToolbox_.clearSelection()}),(x=this.rowContents_)===null||x===void 0||x.replaceChildren(this.searchField),w}getId(){return this.SEARCH_INPUT_ID}getPosition(){var x;const w=((x=this.workspace_.options.languageTree)===null||x===void 0?void 0:x.contents)||[];for(let R=0;R<w.length;R++)if(w[R].kind===g.SEARCH_CATEGORY_KIND)return R;return-1}registerShortcut(){const x=f.ShortcutRegistry.registry.createSerializedKey(f.utils.KeyCodes.B,[f.utils.KeyCodes.CTRL]);f.ShortcutRegistry.registry.register({name:g.START_SEARCH_SHORTCUT,callback:()=>!(this.getPosition()<0||(f.getFocusManager().focusNode(this),0)),keyCodes:[x]})}getAvailableBlocks(x,w){"contents"in x?x.contents.forEach(R=>{this.getAvailableBlocks(R,w)}):x.kind.toLowerCase()==="block"&&"type"in x&&x.type&&w.add(x)}initBlockSearcher(){var x,w;const R=new Set;(w=(x=this.workspace_.options.languageTree)===null||x===void 0?void 0:x.contents)===null||w===void 0||w.forEach(k=>this.getAvailableBlocks(k,R)),this.blockSearcher.indexBlocks([...R])}getFocusableElement(){if(!this.searchField)throw Error("This field currently has no representative DOM element.");return this.searchField}onNodeFocus(){this.matchBlocks()}onNodeBlur(){this.searchField&&(this.searchField.value="")}matchBlocks(){var x;const w=((x=this.searchField)===null||x===void 0?void 0:x.value)||"";this.flyoutItems_=w?this.blockSearcher.blockTypesMatching(w):[],this.flyoutItems_.length||this.flyoutItems_.push({kind:"label",text:w.length<3?"Type to search for blocks":"No matching blocks found"}),this.parentToolbox_.refreshSelection()}dispose(){super.dispose(),f.ShortcutRegistry.registry.unregister(g.START_SEARCH_SHORTCUT)}}return g.START_SEARCH_SHORTCUT="startSearch",g.SEARCH_CATEGORY_KIND="search",f.registry.register(f.registry.Type.TOOLBOX_ITEM,g.SEARCH_CATEGORY_KIND,g),{}})())})(dist$b)),dist$b.exports}requireDist$5();var dist$9={exports:{}};var dist$8=dist$9.exports,hasRequiredDist$4;function requireDist$4(){return hasRequiredDist$4||(hasRequiredDist$4=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(dist$8,o=>(()=>{var s={370:w=>{w.exports=o}},l={};function f(w){var R=l[w];if(R!==void 0)return R.exports;var k=l[w]={exports:{}};return s[w](k,k.exports,f),k.exports}f.d=(w,R)=>{for(var k in R)f.o(R,k)&&!f.o(w,k)&&Object.defineProperty(w,k,{enumerable:!0,get:R[k]})},f.o=(w,R)=>Object.prototype.hasOwnProperty.call(w,R),f.r=w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})};var E={};f.r(E),f.d(E,{WorkspaceSearch:()=>x});var g=f(370);const N=(function(){let w=!1;return function(){if(w)return;w=!0;const R=document.createElement("style");R.id="blockly-ws-search-style";const k=document.createTextNode(`path.blocklyPath.blockly-ws-search-highlight {
    fill: #000;
  }
  path.blocklyPath.blockly-ws-search-highlight.blockly-ws-search-current {
    fill: grey;
  }
  .blockly-ws-search-close-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=) no-repeat top left;
  }
  .blockly-ws-search-next-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNNy40MSA4LjU5TDEyIDEzLjE3bDQuNTktNC41OEwxOCAxMGwtNiA2LTYtNiAxLjQxLTEuNDF6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PC9zdmc+) no-repeat top left;
  }
  .blockly-ws-search-previous-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNNy40MSAxNS40MUwxMiAxMC44M2w0LjU5IDQuNThMMTggMTRsLTYtNi02IDZ6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==) no-repeat top left;
  }
  .blockly-ws-search {
    background: #fff;
    border: solid lightgrey 0.5px;
    box-shadow: 0px 10px 20px grey;
    justify-content: center;
    padding: 0.25em;
    position: absolute;
    z-index: 70;
  }
  .blockly-ws-search-input input {
    border: none;
  }
  .blockly-ws-search button {
    border: none;
    padding-left: 6px;
    padding-right: 6px;
  }
  .blockly-ws-search-actions {
    display: flex;
  }
  .blockly-ws-search-container {
    display: flex;
  }
  .blockly-ws-search-content {
    display: flex;
  }`);R.appendChild(k),document.head.insertBefore(R,document.head.firstChild)}})();class x{constructor(R){this.workspace=R,this.id="workspaceSearch",this.htmlDiv=null,this.actionDiv=null,this.inputElement=null,this.textInputPlaceholder="Search",this.blocks=[],this.lastHighlighted=null,this.currentBlockIndex=-1,this.searchText="",this.searchOnInput=!0,this.caseSensitive=!1,this.preserveSelected=!0,this.boundEvents=[]}init(){this.workspace.getComponentManager().addComponent({component:this,weight:0,capabilities:[g.ComponentManager.Capability.POSITIONABLE]}),N(),this.createDom(),this.setVisible(!1),this.workspace.resize()}dispose(){for(const R of this.boundEvents)g.browserEvents.unbind(R);this.boundEvents.length=0,this.htmlDiv&&(this.htmlDiv.remove(),this.htmlDiv=null),this.actionDiv=null,this.inputElement=null}createDom(){const R=this.workspace.getInjectionDiv();this.addEvent(R,"keydown",this,y=>this.onWorkspaceKeyDown(y)),this.htmlDiv=document.createElement("div"),g.utils.dom.addClass(this.htmlDiv,"blockly-ws-search");const k=document.createElement("div");g.utils.dom.addClass(k,"blockly-ws-search-container");const B=document.createElement("div");g.utils.dom.addClass(B,"blockly-ws-search-content"),k.appendChild(B);const P=document.createElement("div");g.utils.dom.addClass(P,"blockly-ws-search-input"),this.inputElement=this.createTextInput(),this.addEvent(this.inputElement,"keydown",this,y=>this.onKeyDown(y)),this.addEvent(this.inputElement,"input",this,()=>this.onInput()),this.addEvent(this.inputElement,"click",this,()=>{var y;this.searchAndHighlight(this.searchText,this.preserveSelected),(y=this.inputElement)===null||y===void 0||y.select()}),P.appendChild(this.inputElement),B.appendChild(P),this.actionDiv=document.createElement("div"),g.utils.dom.addClass(this.actionDiv,"blockly-ws-search-actions"),B.appendChild(this.actionDiv);const z=this.createNextBtn();z&&this.addActionBtn(z,()=>this.next());const m=this.createPreviousBtn();m&&this.addActionBtn(m,()=>this.previous());const d=this.createCloseBtn();d&&(this.addBtnListener(d,()=>this.close()),k.appendChild(d)),this.htmlDiv.appendChild(k),R.insertBefore(this.htmlDiv,this.workspace.getParentSvg())}addEvent(R,k,B,P){const z=g.browserEvents.conditionalBind(R,k,B,P);this.boundEvents.push(z)}addActionBtn(R,k){var B;this.addBtnListener(R,k),(B=this.actionDiv)===null||B===void 0||B.appendChild(R)}createTextInput(){const R=document.createElement("input");return R.type="text",R.setAttribute("placeholder",this.textInputPlaceholder),R}createNextBtn(){return this.createBtn("blockly-ws-search-next-btn","Find next")}createPreviousBtn(){return this.createBtn("blockly-ws-search-previous-btn","Find previous")}createCloseBtn(){return this.createBtn("blockly-ws-search-close-btn","Close search bar")}createBtn(R,k){const B=document.createElement("button");return g.utils.dom.addClass(B,R),B.setAttribute("aria-label",k),B}addBtnListener(R,k){this.addEvent(R,"click",this,k),this.addEvent(R,"keydown",this,B=>{B.key==="Enter"?(k(B),B.preventDefault()):B.key==="Escape"&&this.close(),B.stopPropagation()})}getBoundingRectangle(){return null}position(R,k){this.htmlDiv&&(this.workspace.RTL?this.htmlDiv.style.left=R.absoluteMetrics.left+"px":R.toolboxMetrics.position===g.TOOLBOX_AT_RIGHT?this.htmlDiv.style.right=R.toolboxMetrics.width+"px":this.htmlDiv.style.right="0",this.htmlDiv.style.top=R.absoluteMetrics.top+"px")}onInput(){if(this.searchOnInput&&this.inputElement){const R=this.inputElement.value.trim();R!==this.searchText&&this.searchAndHighlight(R,this.preserveSelected)}}onKeyDown(R){if(R.key==="Escape")this.close();else if(R.key==="Enter")if(this.searchOnInput)R.shiftKey?this.previous():this.next();else{if(!this.inputElement)return;const k=this.inputElement.value.trim();k!==this.searchText&&this.searchAndHighlight(k,this.preserveSelected)}}onWorkspaceKeyDown(R){(R.ctrlKey||R.metaKey)&&R.key==="f"&&(this.open(),R.preventDefault(),R.stopPropagation())}previous(){this.setCurrentBlock(this.currentBlockIndex-1)}next(){this.setCurrentBlock(this.currentBlockIndex+1)}setSearchPlaceholder(R){this.textInputPlaceholder=R,this.inputElement&&this.inputElement.setAttribute("placeholder",this.textInputPlaceholder)}setCurrentBlock(R){if(!this.blocks.length)return;let k=this.blocks[this.currentBlockIndex];k&&this.unhighlightCurrentSelection(k),this.currentBlockIndex=(R%this.blocks.length+this.blocks.length)%this.blocks.length,k=this.blocks[this.currentBlockIndex],this.highlightCurrentSelection(k),this.workspace.centerOnBlock(k.id,!1),this.lastHighlighted=k}open(){var R,k;this.setVisible(!0),(R=this.inputElement)===null||R===void 0||R.focus(),(k=this.inputElement)===null||k===void 0||k.select(),this.searchText&&this.searchAndHighlight(this.searchText)}close(){this.setVisible(!1);const R=g.FocusManager.getFocusManager();this.lastHighlighted&&!this.lastHighlighted.isDisposed()?R.focusNode(this.lastHighlighted):R.focusTree(this.workspace),this.clearBlocks(),this.lastHighlighted=null}setVisible(R){this.htmlDiv&&(this.htmlDiv.style.display=R?"flex":"none")}searchAndHighlight(R,k){const B=this.blocks[this.currentBlockIndex];this.searchText=R.trim(),this.clearBlocks(),this.blocks=this.getMatchingBlocks(this.workspace,this.searchText,this.caseSensitive),this.highlightSearchGroup(this.blocks);let P=0;k&&(P=this.blocks.indexOf(B),P=P>-1?P:0),this.setCurrentBlock(P)}getSearchPool(R){return R.getAllBlocks(!0).filter(k=>{const B=k.getSurroundParent();return!B||!B.isCollapsed()})}isBlockMatch(R,k,B){let P="";if(R.isCollapsed())P=R.toString();else{const z=[];R.inputList.forEach(m=>{m.fieldRow.forEach(d=>{z.push(d.getText())})}),P=z.join(" ").trim()}return B||(P=P.toLowerCase()),P.indexOf(k)>-1}getMatchingBlocks(R,k,B){return k?(this.caseSensitive||(k=k.toLowerCase()),this.getSearchPool(R).filter(P=>this.isBlockMatch(P,k,B))):[]}clearBlocks(){this.unhighlightSearchGroup(this.blocks);const R=this.blocks[this.currentBlockIndex];R&&this.unhighlightCurrentSelection(R),this.currentBlockIndex=-1,this.blocks=[]}highlightCurrentSelection(R){const k=R.pathObject.svgPath;g.utils.dom.addClass(k,"blockly-ws-search-current")}unhighlightCurrentSelection(R){const k=R.pathObject.svgPath;g.utils.dom.removeClass(k,"blockly-ws-search-current")}highlightSearchGroup(R){R.forEach(k=>{const B=k.pathObject.svgPath;g.utils.dom.addClass(B,"blockly-ws-search-highlight")})}unhighlightSearchGroup(R){R.forEach(k=>{const B=k.pathObject.svgPath;g.utils.dom.removeClass(B,"blockly-ws-search-highlight")})}}return E})())})(dist$9)),dist$9.exports}var distExports$4=requireDist$4(),javascript_compressed$1={exports:{}},javascript_compressed=javascript_compressed$1.exports,hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(javascript_compressed,function(o){var s=o.__namespace__,l=function(c,A){return["[]",S.ATOMIC]},f=function(c,A){const M=Array(c.itemCount_);for(let Y=0;Y<c.itemCount_;Y++)M[Y]=A.valueToCode(c,"ADD"+Y,S.NONE)||"null";return["["+M.join(", ")+"]",S.ATOMIC]},E=function(c,A){const M=A.provideFunction_("listsRepeat",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),Y=A.valueToCode(c,"ITEM",S.NONE)||"null";return c=A.valueToCode(c,"NUM",S.NONE)||"0",[M+"("+Y+", "+c+")",S.FUNCTION_CALL]},g=function(c,A){return[(A.valueToCode(c,"VALUE",S.MEMBER)||"[]")+".length",S.MEMBER]},N=function(c,A){return["!"+(A.valueToCode(c,"VALUE",S.MEMBER)||"[]")+".length",S.LOGICAL_NOT]},x=function(c,A){const M=c.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",Y=A.valueToCode(c,"FIND",S.NONE)||"''";return A=(A.valueToCode(c,"VALUE",S.MEMBER)||"[]")+"."+M+"("+Y+")",c.workspace.options.oneBasedIndex?[A+" + 1",S.ADDITION]:[A,S.FUNCTION_CALL]},w=function(c,A){const M=c.getFieldValue("MODE")||"GET",Y=c.getFieldValue("WHERE")||"FROM_START";var q=A.valueToCode(c,"VALUE",Y==="RANDOM"?S.NONE:S.MEMBER)||"[]";switch(Y){case"FIRST":if(M==="GET")return[q+"[0]",S.MEMBER];if(M==="GET_REMOVE")return[q+".shift()",S.MEMBER];if(M==="REMOVE")return q+`.shift();
`;break;case"LAST":if(M==="GET")return[q+".slice(-1)[0]",S.MEMBER];if(M==="GET_REMOVE")return[q+".pop()",S.MEMBER];if(M==="REMOVE")return q+`.pop();
`;break;case"FROM_START":if(c=A.getAdjusted(c,"AT"),M==="GET")return[q+"["+c+"]",S.MEMBER];if(M==="GET_REMOVE")return[q+".splice("+c+", 1)[0]",S.FUNCTION_CALL];if(M==="REMOVE")return q+".splice("+c+`, 1);
`;break;case"FROM_END":if(c=A.getAdjusted(c,"AT",1,!0),M==="GET")return[q+".slice("+c+")[0]",S.FUNCTION_CALL];if(M==="GET_REMOVE")return[q+".splice("+c+", 1)[0]",S.FUNCTION_CALL];if(M==="REMOVE")return q+".splice("+c+", 1);";break;case"RANDOM":if(q=A.provideFunction_("listsGetRandomItem",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+q+", "+(M!=="GET")+")",M==="GET"||M==="GET_REMOVE")return[q,S.FUNCTION_CALL];if(M==="REMOVE")return q+`;
`}throw Error("Unhandled combination (lists_getIndex).")},R=function(c,A){function M(){if(Y.match(/^\w+$/))return"";const ze=A.nameDB_.getDistinctName("tmpList",s.NameType$$module$build$src$core$names.VARIABLE),at="var "+ze+" = "+Y+`;
`;return Y=ze,at}let Y=A.valueToCode(c,"LIST",S.MEMBER)||"[]";const q=c.getFieldValue("MODE")||"GET";var ee=c.getFieldValue("WHERE")||"FROM_START";const xe=A.valueToCode(c,"TO",S.ASSIGNMENT)||"null";switch(ee){case"FIRST":if(q==="SET")return Y+"[0] = "+xe+`;
`;if(q==="INSERT")return Y+".unshift("+xe+`);
`;break;case"LAST":if(q==="SET")return M()+(Y+"["+Y+".length - 1] = "+xe+`;
`);if(q==="INSERT")return Y+".push("+xe+`);
`;break;case"FROM_START":if(c=A.getAdjusted(c,"AT"),q==="SET")return Y+"["+c+"] = "+xe+`;
`;if(q==="INSERT")return Y+".splice("+c+", 0, "+xe+`);
`;break;case"FROM_END":if(c=A.getAdjusted(c,"AT",1,!1,S.SUBTRACTION),ee=M(),q==="SET")return ee+(Y+"["+Y+".length - "+c+"] = "+xe+`;
`);if(q==="INSERT")return ee+(Y+".splice("+Y+".length - "+c+", 0, "+xe+`);
`);break;case"RANDOM":if(c=M(),ee=A.nameDB_.getDistinctName("tmpX",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+ee+" = Math.floor(Math.random() * "+Y+`.length);
`,q==="SET")return c+(Y+"["+ee+"] = "+xe+`;
`);if(q==="INSERT")return c+(Y+".splice("+ee+", 0, "+xe+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},k=function(c,A){var M={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},Y=A.valueToCode(c,"LIST",S.MEMBER)||"[]";const q=c.getFieldValue("WHERE1"),ee=c.getFieldValue("WHERE2");if(q==="FIRST"&&ee==="LAST")Y+=".slice(0)";else if(Y.match(/^\w+$/)||q!=="FROM_END"&&ee==="FROM_START"){switch(q){case"FROM_START":M=A.getAdjusted(c,"AT1");break;case"FROM_END":M=A.getAdjusted(c,"AT1",1,!1,S.SUBTRACTION),M=Y+".length - "+M;break;case"FIRST":M="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(ee){case"FROM_START":A=A.getAdjusted(c,"AT2",1);break;case"FROM_END":A=A.getAdjusted(c,"AT2",0,!1,S.SUBTRACTION),A=Y+".length - "+A;break;case"LAST":A=Y+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}Y=Y+".slice("+M+", "+A+")"}else{const xe=A.getAdjusted(c,"AT1");c=A.getAdjusted(c,"AT2"),Y=A.provideFunction_("subsequence"+M[q]+M[ee],`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(sequence${q==="FROM_END"||q==="FROM_START"?", at1":""}${ee==="FROM_END"||ee==="FROM_START"?", at2":""}) {
  var start = ${j("sequence",q,"at1")};
  var end = ${j("sequence",ee,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Y+(q==="FROM_END"||q==="FROM_START"?", "+xe:"")+(ee==="FROM_END"||ee==="FROM_START"?", "+c:"")+")"}return[Y,S.FUNCTION_CALL]},B=function(c,A){const M=A.valueToCode(c,"LIST",S.FUNCTION_CALL)||"[]",Y=c.getFieldValue("DIRECTION")==="1"?1:-1;return c=c.getFieldValue("TYPE"),A=A.provideFunction_("listsGetSortCompare",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[M+".slice().sort("+A+'("'+c+'", '+Y+"))",S.FUNCTION_CALL]},P=function(c,A){let M=A.valueToCode(c,"INPUT",S.MEMBER);if(A=A.valueToCode(c,"DELIM",S.NONE)||"''",c=c.getFieldValue("MODE"),c==="SPLIT")M||(M="''"),c="split";else if(c==="JOIN")M||(M="[]"),c="join";else throw Error("Unknown mode: "+c);return[M+"."+c+"("+A+")",S.FUNCTION_CALL]},z=function(c,A){return[(A.valueToCode(c,"LIST",S.FUNCTION_CALL)||"[]")+".slice().reverse()",S.FUNCTION_CALL]},m=function(c,A){var M=0;let Y="";A.STATEMENT_PREFIX&&(Y+=A.injectId(A.STATEMENT_PREFIX,c));do{const q=A.valueToCode(c,"IF"+M,S.NONE)||"false";let ee=A.statementToCode(c,"DO"+M);A.STATEMENT_SUFFIX&&(ee=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,c),A.INDENT)+ee),Y+=(M>0?" else ":"")+"if ("+q+`) {
`+ee+"}",M++}while(c.getInput("IF"+M));return(c.getInput("ELSE")||A.STATEMENT_SUFFIX)&&(M=c.getInput("ELSE")?A.statementToCode(c,"ELSE"):"",A.STATEMENT_SUFFIX&&(M=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,c),A.INDENT)+M),Y+=` else {
`+M+"}"),Y+`
`},d=function(c,A){const M={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[c.getFieldValue("OP")],Y=M==="=="||M==="!="?S.EQUALITY:S.RELATIONAL,q=A.valueToCode(c,"A",Y)||"0";return c=A.valueToCode(c,"B",Y)||"0",[q+" "+M+" "+c,Y]},y=function(c,A){const M=c.getFieldValue("OP")==="AND"?"&&":"||",Y=M==="&&"?S.LOGICAL_AND:S.LOGICAL_OR;let q=A.valueToCode(c,"A",Y);return c=A.valueToCode(c,"B",Y),q||c?(A=M==="&&"?"true":"false",q||(q=A),c||(c=A)):c=q="false",[q+" "+M+" "+c,Y]},F=function(c,A){const M=S.LOGICAL_NOT;return["!"+(A.valueToCode(c,"BOOL",M)||"true"),M]},L=function(c,A){return[c.getFieldValue("BOOL")==="TRUE"?"true":"false",S.ATOMIC]},G=function(c,A){return["null",S.ATOMIC]},p=function(c,A){const M=A.valueToCode(c,"IF",S.CONDITIONAL)||"false",Y=A.valueToCode(c,"THEN",S.CONDITIONAL)||"null";return c=A.valueToCode(c,"ELSE",S.CONDITIONAL)||"null",[M+" ? "+Y+" : "+c,S.CONDITIONAL]},I=function(c,A){let M;M=c.getField("TIMES")?String(Number(c.getFieldValue("TIMES"))):A.valueToCode(c,"TIMES",S.ASSIGNMENT)||"0";let Y=A.statementToCode(c,"DO");Y=A.addLoopTrap(Y,c),c="";const q=A.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE);let ee=M;return M.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(M)||(ee=A.nameDB_.getDistinctName("repeat_end",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+ee+" = "+M+`;
`),c+("for (var "+q+" = 0; "+q+" < "+ee+"; "+q+`++) {
`+Y+`}
`)},D=function(c,A){const M=c.getFieldValue("MODE")==="UNTIL";let Y=A.valueToCode(c,"BOOL",M?S.LOGICAL_NOT:S.NONE)||"false",q=A.statementToCode(c,"DO");return q=A.addLoopTrap(q,c),M&&(Y="!"+Y),"while ("+Y+`) {
`+q+`}
`},V=function(c,A){var M=A.getVariableName(c.getFieldValue("VAR")),Y=A.valueToCode(c,"FROM",S.ASSIGNMENT)||"0",q=A.valueToCode(c,"TO",S.ASSIGNMENT)||"0";const ee=A.valueToCode(c,"BY",S.ASSIGNMENT)||"1";let xe=A.statementToCode(c,"DO");if(xe=A.addLoopTrap(xe,c),s.isNumber$$module$build$src$core$utils$string(Y)&&s.isNumber$$module$build$src$core$utils$string(q)&&s.isNumber$$module$build$src$core$utils$string(ee))A=Number(Y)<=Number(q),c="for ("+M+" = "+Y+"; "+M+(A?" <= ":" >= ")+q+"; "+M,M=Math.abs(Number(ee)),c=M===1?c+(A?"++":"--"):c+((A?" += ":" -= ")+M),c+=`) {
`+xe+`}
`;else{c="";let ze=Y;Y.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(Y)||(ze=A.nameDB_.getDistinctName(M+"_start",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+ze+" = "+Y+`;
`),Y=q,q.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(q)||(Y=A.nameDB_.getDistinctName(M+"_end",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+Y+" = "+q+`;
`),q=A.nameDB_.getDistinctName(M+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+q+" = ",c=s.isNumber$$module$build$src$core$utils$string(ee)?c+(Math.abs(Number(ee))+`;
`):c+("Math.abs("+ee+`);
`),c+="if ("+ze+" > "+Y+`) {
`,c+=A.INDENT+q+" = -"+q+`;
`,c=c+`}
for (`+(M+" = "+ze+"; "+q+" >= 0 ? "+M+" <= "+Y+" : "+M+" >= "+Y+"; "+M+" += "+q+`) {
`+xe+`}
`)}return c},C=function(c,A){const M=A.getVariableName(c.getFieldValue("VAR"));var Y=A.valueToCode(c,"LIST",S.ASSIGNMENT)||"[]";let q=A.statementToCode(c,"DO");q=A.addLoopTrap(q,c),c="";let ee=Y;return Y.match(/^\w+$/)||(ee=A.nameDB_.getDistinctName(M+"_list",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+ee+" = "+Y+`;
`),Y=A.nameDB_.getDistinctName(M+"_index",s.NameType$$module$build$src$core$names.VARIABLE),q=A.INDENT+M+" = "+ee+"["+Y+`];
`+q,c+("for (var "+Y+" in "+ee+`) {
`+q+`}
`)},K=function(c,A){let M="";if(A.STATEMENT_PREFIX&&(M+=A.injectId(A.STATEMENT_PREFIX,c)),A.STATEMENT_SUFFIX&&(M+=A.injectId(A.STATEMENT_SUFFIX,c)),A.STATEMENT_PREFIX){const Y=c.getSurroundLoop();Y&&!Y.suppressPrefixSuffix&&(M+=A.injectId(A.STATEMENT_PREFIX,Y))}switch(c.getFieldValue("FLOW")){case"BREAK":return M+`break;
`;case"CONTINUE":return M+`continue;
`}throw Error("Unknown flow statement.")},X=function(c,A){return c=Number(c.getFieldValue("NUM")),[String(c),c>=0?S.ATOMIC:S.UNARY_NEGATION]},re=function(c,A){var M={ADD:[" + ",S.ADDITION],MINUS:[" - ",S.SUBTRACTION],MULTIPLY:[" * ",S.MULTIPLICATION],DIVIDE:[" / ",S.DIVISION],POWER:[null,S.NONE]}[c.getFieldValue("OP")];const Y=M[0];M=M[1];const q=A.valueToCode(c,"A",M)||"0";return c=A.valueToCode(c,"B",M)||"0",Y?[q+Y+c,M]:["Math.pow("+q+", "+c+")",S.FUNCTION_CALL]},se=function(c,A){const M=c.getFieldValue("OP");let Y;if(M==="NEG")return c=A.valueToCode(c,"NUM",S.UNARY_NEGATION)||"0",c[0]==="-"&&(c=" "+c),["-"+c,S.UNARY_NEGATION];switch(c=M==="SIN"||M==="COS"||M==="TAN"?A.valueToCode(c,"NUM",S.DIVISION)||"0":A.valueToCode(c,"NUM",S.NONE)||"0",M){case"ABS":Y="Math.abs("+c+")";break;case"ROOT":Y="Math.sqrt("+c+")";break;case"LN":Y="Math.log("+c+")";break;case"EXP":Y="Math.exp("+c+")";break;case"POW10":Y="Math.pow(10,"+c+")";break;case"ROUND":Y="Math.round("+c+")";break;case"ROUNDUP":Y="Math.ceil("+c+")";break;case"ROUNDDOWN":Y="Math.floor("+c+")";break;case"SIN":Y="Math.sin("+c+" / 180 * Math.PI)";break;case"COS":Y="Math.cos("+c+" / 180 * Math.PI)";break;case"TAN":Y="Math.tan("+c+" / 180 * Math.PI)"}if(Y)return[Y,S.FUNCTION_CALL];switch(M){case"LOG10":Y="Math.log("+c+") / Math.log(10)";break;case"ASIN":Y="Math.asin("+c+") / Math.PI * 180";break;case"ACOS":Y="Math.acos("+c+") / Math.PI * 180";break;case"ATAN":Y="Math.atan("+c+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+M)}return[Y,S.DIVISION]},Pe=function(c,A){return{PI:["Math.PI",S.MEMBER],E:["Math.E",S.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",S.DIVISION],SQRT2:["Math.SQRT2",S.MEMBER],SQRT1_2:["Math.SQRT1_2",S.MEMBER],INFINITY:["Infinity",S.ATOMIC]}[c.getFieldValue("CONSTANT")]},Te=function(c,A){var M={EVEN:[" % 2 === 0",S.MODULUS,S.EQUALITY],ODD:[" % 2 === 1",S.MODULUS,S.EQUALITY],WHOLE:[" % 1 === 0",S.MODULUS,S.EQUALITY],POSITIVE:[" > 0",S.RELATIONAL,S.RELATIONAL],NEGATIVE:[" < 0",S.RELATIONAL,S.RELATIONAL],DIVISIBLE_BY:[null,S.MODULUS,S.EQUALITY],PRIME:[null,S.NONE,S.FUNCTION_CALL]};const Y=c.getFieldValue("PROPERTY"),[q,ee,xe]=M[Y];return M=A.valueToCode(c,"NUMBER_TO_CHECK",ee)||"0",Y==="PRIME"?c=A.provideFunction_("mathIsPrime",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+M+")":Y==="DIVISIBLE_BY"?(c=A.valueToCode(c,"DIVISOR",S.MODULUS)||"0",c=M+" % "+c+" === 0"):c=M+q,[c,xe]},Ae=function(c,A){const M=A.valueToCode(c,"DELTA",S.ADDITION)||"0";return c=A.getVariableName(c.getFieldValue("VAR")),c+" = (typeof "+c+" === 'number' ? "+c+" : 0) + "+M+`;
`},we=function(c,A){var M=c.getFieldValue("OP");switch(M){case"SUM":c=A.valueToCode(c,"LIST",S.MEMBER)||"[]",c+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":c=A.valueToCode(c,"LIST",S.NONE)||"[]",c="Math.min.apply(null, "+c+")";break;case"MAX":c=A.valueToCode(c,"LIST",S.NONE)||"[]",c="Math.max.apply(null, "+c+")";break;case"AVERAGE":M=A.provideFunction_("mathMean",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),c=A.valueToCode(c,"LIST",S.NONE)||"[]",c=M+"("+c+")";break;case"MEDIAN":M=A.provideFunction_("mathMedian",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),c=A.valueToCode(c,"LIST",S.NONE)||"[]",c=M+"("+c+")";break;case"MODE":M=A.provideFunction_("mathModes",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),c=A.valueToCode(c,"LIST",S.NONE)||"[]",c=M+"("+c+")";break;case"STD_DEV":M=A.provideFunction_("mathStandardDeviation",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),c=A.valueToCode(c,"LIST",S.NONE)||"[]",c=M+"("+c+")";break;case"RANDOM":M=A.provideFunction_("mathRandomList",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),c=A.valueToCode(c,"LIST",S.NONE)||"[]",c=M+"("+c+")";break;default:throw Error("Unknown operator: "+M)}return[c,S.FUNCTION_CALL]},ve=function(c,A){const M=A.valueToCode(c,"DIVIDEND",S.MODULUS)||"0";return c=A.valueToCode(c,"DIVISOR",S.MODULUS)||"0",[M+" % "+c,S.MODULUS]},be=function(c,A){const M=A.valueToCode(c,"VALUE",S.NONE)||"0",Y=A.valueToCode(c,"LOW",S.NONE)||"0";return c=A.valueToCode(c,"HIGH",S.NONE)||"Infinity",["Math.min(Math.max("+M+", "+Y+"), "+c+")",S.FUNCTION_CALL]},Xe=function(c,A){const M=A.valueToCode(c,"FROM",S.NONE)||"0";return c=A.valueToCode(c,"TO",S.NONE)||"0",[A.provideFunction_("mathRandomInt",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+M+", "+c+")",S.FUNCTION_CALL]},Be=function(c,A){return["Math.random()",S.FUNCTION_CALL]},ke=function(c,A){const M=A.valueToCode(c,"X",S.NONE)||"0";return["Math.atan2("+(A.valueToCode(c,"Y",S.NONE)||"0")+", "+M+") / Math.PI * 180",S.DIVISION]},ce=function(c,A){const M=A.getProcedureName(c.getFieldValue("NAME"));var Y="";A.STATEMENT_PREFIX&&(Y+=A.injectId(A.STATEMENT_PREFIX,c)),A.STATEMENT_SUFFIX&&(Y+=A.injectId(A.STATEMENT_SUFFIX,c)),Y&&(Y=A.prefixLines(Y,A.INDENT));let q="";A.INFINITE_LOOP_TRAP&&(q=A.prefixLines(A.injectId(A.INFINITE_LOOP_TRAP,c),A.INDENT));let ee="";c.getInput("STACK")&&(ee=A.statementToCode(c,"STACK"));let xe="";c.getInput("RETURN")&&(xe=A.valueToCode(c,"RETURN",S.NONE)||"");let ze="";ee&&xe&&(ze=Y),xe&&(xe=A.INDENT+"return "+xe+`;
`);const at=[],Je=c.getVars();for(let Nt=0;Nt<Je.length;Nt++)at[Nt]=A.getVariableName(Je[Nt]);return Y="function "+M+"("+at.join(", ")+`) {
`+Y+q+ee+ze+xe+"}",Y=A.scrub_(c,Y),A.definitions_["%"+M]=Y,null},te=function(c,A){const M=A.getProcedureName(c.getFieldValue("NAME")),Y=[],q=c.getVars();for(let ee=0;ee<q.length;ee++)Y[ee]=A.valueToCode(c,"ARG"+ee,S.NONE)||"null";return[M+"("+Y.join(", ")+")",S.FUNCTION_CALL]},ue=function(c,A){return A.forBlock.procedures_callreturn(c,A)[0]+`;
`},me=function(c,A){let M="if ("+(A.valueToCode(c,"CONDITION",S.NONE)||"false")+`) {
`;return A.STATEMENT_SUFFIX&&(M+=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,c),A.INDENT)),c.hasReturnValue_?(c=A.valueToCode(c,"VALUE",S.NONE)||"null",M+=A.INDENT+"return "+c+`;
`):M+=A.INDENT+`return;
`,M+`}
`},Le=function(c,A){return[A.quote_(c.getFieldValue("TEXT")),S.ATOMIC]},Qe=function(c,A){switch(c.itemCount_){case 0:return["''",S.ATOMIC];case 1:return c=A.valueToCode(c,"ADD0",S.NONE)||"''",H(c);case 2:var M=A.valueToCode(c,"ADD0",S.NONE)||"''";return c=A.valueToCode(c,"ADD1",S.NONE)||"''",[H(M)[0]+" + "+H(c)[0],S.ADDITION];default:M=Array(c.itemCount_);for(let Y=0;Y<c.itemCount_;Y++)M[Y]=A.valueToCode(c,"ADD"+Y,S.NONE)||"''";return["["+M.join(",")+"].join('')",S.FUNCTION_CALL]}},Fe=function(c,A){const M=A.getVariableName(c.getFieldValue("VAR"));return c=A.valueToCode(c,"TEXT",S.NONE)||"''",M+" += "+H(c)[0]+`;
`},lt=function(c,A){return[(A.valueToCode(c,"VALUE",S.MEMBER)||"''")+".length",S.MEMBER]},de=function(c,A){return["!"+(A.valueToCode(c,"VALUE",S.MEMBER)||"''")+".length",S.LOGICAL_NOT]},De=function(c,A){const M=c.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",Y=A.valueToCode(c,"FIND",S.NONE)||"''";return A=(A.valueToCode(c,"VALUE",S.MEMBER)||"''")+"."+M+"("+Y+")",c.workspace.options.oneBasedIndex?[A+" + 1",S.ADDITION]:[A,S.FUNCTION_CALL]},he=function(c,A){const M=c.getFieldValue("WHERE")||"FROM_START",Y=A.valueToCode(c,"VALUE",M==="RANDOM"?S.NONE:S.MEMBER)||"''";switch(M){case"FIRST":return[Y+".charAt(0)",S.FUNCTION_CALL];case"LAST":return[Y+".slice(-1)",S.FUNCTION_CALL];case"FROM_START":return c=A.getAdjusted(c,"AT"),[Y+".charAt("+c+")",S.FUNCTION_CALL];case"FROM_END":return c=A.getAdjusted(c,"AT",1,!0),[Y+".slice("+c+").charAt(0)",S.FUNCTION_CALL];case"RANDOM":return[A.provideFunction_("textRandomLetter",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+Y+")",S.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Se=function(c,A){var M={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const Y=c.getFieldValue("WHERE1"),q=c.getFieldValue("WHERE2");var ee=Y!=="FROM_END"&&Y!=="LAST"&&q!=="FROM_END"&&q!=="LAST",xe=A.valueToCode(c,"STRING",ee?S.MEMBER:S.NONE)||"''";if(Y==="FIRST"&&q==="LAST")return[xe,S.NONE];if(xe.match(/^'?\w+'?$/)||ee){switch(Y){case"FROM_START":M=A.getAdjusted(c,"AT1");break;case"FROM_END":M=A.getAdjusted(c,"AT1",1,!1,S.SUBTRACTION),M=xe+".length - "+M;break;case"FIRST":M="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(q){case"FROM_START":A=A.getAdjusted(c,"AT2",1);break;case"FROM_END":A=A.getAdjusted(c,"AT2",0,!1,S.SUBTRACTION),A=xe+".length - "+A;break;case"LAST":A=xe+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}xe=xe+".slice("+M+", "+A+")"}else ee=A.getAdjusted(c,"AT1"),c=A.getAdjusted(c,"AT2"),xe=A.provideFunction_("subsequence"+M[Y]+M[q],`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(sequence${Y==="FROM_END"||Y==="FROM_START"?", at1":""}${q==="FROM_END"||q==="FROM_START"?", at2":""}) {
  var start = ${J("sequence",Y,"at1")};
  var end = ${J("sequence",q,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+xe+(Y==="FROM_END"||Y==="FROM_START"?", "+ee:"")+(q==="FROM_END"||q==="FROM_START"?", "+c:"")+")";return[xe,S.FUNCTION_CALL]},Ue=function(c,A){const M={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[c.getFieldValue("CASE")];return c=A.valueToCode(c,"TEXT",M?S.MEMBER:S.NONE)||"''",[M?c+M:A.provideFunction_("textToTitleCase",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+c+")",S.FUNCTION_CALL]},He=function(c,A){const M={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[c.getFieldValue("MODE")];return[(A.valueToCode(c,"TEXT",S.MEMBER)||"''")+M,S.FUNCTION_CALL]},et=function(c,A){return"window.alert("+(A.valueToCode(c,"TEXT",S.NONE)||"''")+`);
`},tt=function(c,A){return A="window.prompt("+(c.getField("TEXT")?A.quote_(c.getFieldValue("TEXT")):A.valueToCode(c,"TEXT",S.NONE)||"''")+")",c.getFieldValue("TYPE")==="NUMBER"&&(A="Number("+A+")"),[A,S.FUNCTION_CALL]},ht=function(c,A){const M=A.valueToCode(c,"TEXT",S.NONE)||"''";return c=A.valueToCode(c,"SUB",S.NONE)||"''",[A.provideFunction_("textCount",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+M+", "+c+")",S.FUNCTION_CALL]},nt=function(c,A){const M=A.valueToCode(c,"TEXT",S.NONE)||"''",Y=A.valueToCode(c,"FROM",S.NONE)||"''";return c=A.valueToCode(c,"TO",S.NONE)||"''",[A.provideFunction_("textReplace",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+M+", "+Y+", "+c+")",S.FUNCTION_CALL]},st=function(c,A){return[(A.valueToCode(c,"TEXT",S.MEMBER)||"''")+".split('').reverse().join('')",S.FUNCTION_CALL]},ot=function(c,A){return[A.getVariableName(c.getFieldValue("VAR")),S.ATOMIC]},it=function(c,A){const M=A.valueToCode(c,"VALUE",S.ASSIGNMENT)||"0";return A.getVariableName(c.getFieldValue("VAR"))+" = "+M+`;
`},S;(function(c){c[c.ATOMIC=0]="ATOMIC",c[c.NEW=1.1]="NEW",c[c.MEMBER=1.2]="MEMBER",c[c.FUNCTION_CALL=2]="FUNCTION_CALL",c[c.INCREMENT=3]="INCREMENT",c[c.DECREMENT=3]="DECREMENT",c[c.BITWISE_NOT=4.1]="BITWISE_NOT",c[c.UNARY_PLUS=4.2]="UNARY_PLUS",c[c.UNARY_NEGATION=4.3]="UNARY_NEGATION",c[c.LOGICAL_NOT=4.4]="LOGICAL_NOT",c[c.TYPEOF=4.5]="TYPEOF",c[c.VOID=4.6]="VOID",c[c.DELETE=4.7]="DELETE",c[c.AWAIT=4.8]="AWAIT",c[c.EXPONENTIATION=5]="EXPONENTIATION",c[c.MULTIPLICATION=5.1]="MULTIPLICATION",c[c.DIVISION=5.2]="DIVISION",c[c.MODULUS=5.3]="MODULUS",c[c.SUBTRACTION=6.1]="SUBTRACTION",c[c.ADDITION=6.2]="ADDITION",c[c.BITWISE_SHIFT=7]="BITWISE_SHIFT",c[c.RELATIONAL=8]="RELATIONAL",c[c.IN=8]="IN",c[c.INSTANCEOF=8]="INSTANCEOF",c[c.EQUALITY=9]="EQUALITY",c[c.BITWISE_AND=10]="BITWISE_AND",c[c.BITWISE_XOR=11]="BITWISE_XOR",c[c.BITWISE_OR=12]="BITWISE_OR",c[c.LOGICAL_AND=13]="LOGICAL_AND",c[c.LOGICAL_OR=14]="LOGICAL_OR",c[c.CONDITIONAL=15]="CONDITIONAL",c[c.ASSIGNMENT=16]="ASSIGNMENT",c[c.YIELD=17]="YIELD",c[c.COMMA=18]="COMMA",c[c.NONE=99]="NONE"})(S||(S={}));var ae=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(c="JavaScript"){super(c),this.ORDER_OVERRIDES=[[S.FUNCTION_CALL,S.MEMBER],[S.FUNCTION_CALL,S.FUNCTION_CALL],[S.MEMBER,S.MEMBER],[S.MEMBER,S.FUNCTION_CALL],[S.LOGICAL_NOT,S.LOGICAL_NOT],[S.MULTIPLICATION,S.MULTIPLICATION],[S.ADDITION,S.ADDITION],[S.LOGICAL_AND,S.LOGICAL_AND],[S.LOGICAL_OR,S.LOGICAL_OR]],this.isInitialized=!1;for(const A in S)c=S[A],typeof c!="string"&&(this["ORDER_"+A]=c);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(c){super.init(c),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(c.getVariableMap()),this.nameDB_.populateVariables(c),this.nameDB_.populateProcedures(c);const A=[];var M=s.allDeveloperVariables$$module$build$src$core$variables(c);for(let Y=0;Y<M.length;Y++)A.push(this.nameDB_.getName(M[Y],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(c=s.allUsedVarModels$$module$build$src$core$variables(c),M=0;M<c.length;M++)A.push(this.nameDB_.getName(c[M].getId(),s.NameType$$module$build$src$core$names.VARIABLE));A.length&&(this.definitions_.variables="var "+A.join(", ")+";"),this.isInitialized=!0}finish(c){const A=Object.values(this.definitions_);return super.finish(c),this.isInitialized=!1,this.nameDB_.reset(),A.join(`

`)+`


`+c}scrubNakedValue(c){return c+`;
`}quote_(c){return c=c.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+c+"'"}multiline_quote_(c){return c.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(c,A,M=!1){let Y="";if(!c.outputConnection||!c.outputConnection.targetConnection){var q=c.getCommentText();q&&(q=s.wrap$$module$build$src$core$utils$string(q,this.COMMENT_WRAP-3),Y+=this.prefixLines(q+`
`,"// "));for(let ee=0;ee<c.inputList.length;ee++)c.inputList[ee].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(q=c.inputList[ee].connection.targetBlock())&&(q=this.allNestedComments(q))&&(Y+=this.prefixLines(q,"// "))}return c=c.nextConnection&&c.nextConnection.targetBlock(),M=M?"":this.blockToCode(c),Y+A+M}getAdjusted(c,A,M=0,Y=!1,q=S.NONE){c.workspace.options.oneBasedIndex&&M--;const ee=c.workspace.options.oneBasedIndex?"1":"0";let xe=q;return M>0?xe=S.ADDITION:M<0?xe=S.SUBTRACTION:Y&&(xe=S.UNARY_NEGATION),c=this.valueToCode(c,A,xe)||ee,M===0&&!Y?c:s.isNumber$$module$build$src$core$utils$string(c)?(c=String(Number(c)+M),Y&&(c=String(-Number(c))),c):(M>0?c=`${c} + ${M}`:M<0&&(c=`${c} - ${-M}`),Y&&(c=M?`-(${c})`:`-${c}`),Math.floor(q)>=Math.floor(xe)&&(c=`(${c})`),c)}},j=function(c,A,M){return A==="FIRST"?"0":A==="FROM_END"?c+".length - 1 - "+M:A==="LAST"?c+".length - 1":M},$e={};$e.lists_create_empty=l,$e.lists_create_with=f,$e.lists_getIndex=w,$e.lists_getSublist=k,$e.lists_indexOf=x,$e.lists_isEmpty=N,$e.lists_length=g,$e.lists_repeat=E,$e.lists_reverse=z,$e.lists_setIndex=R,$e.lists_sort=B,$e.lists_split=P;var Ne={};Ne.controls_if=m,Ne.controls_ifelse=m,Ne.logic_boolean=L,Ne.logic_compare=d,Ne.logic_negate=F,Ne.logic_null=G,Ne.logic_operation=y,Ne.logic_ternary=p;var Ie={};Ie.controls_flow_statements=K,Ie.controls_for=V,Ie.controls_forEach=C,Ie.controls_repeat=I,Ie.controls_repeat_ext=I,Ie.controls_whileUntil=D;var Ve={};Ve.math_arithmetic=re,Ve.math_atan2=ke,Ve.math_change=Ae,Ve.math_constant=Pe,Ve.math_constrain=be,Ve.math_modulo=ve,Ve.math_number=X,Ve.math_number_property=Te,Ve.math_on_list=we,Ve.math_random_float=Be,Ve.math_random_int=Xe,Ve.math_round=se,Ve.math_single=se,Ve.math_trig=se;var le={};le.procedures_callnoreturn=ue,le.procedures_callreturn=te,le.procedures_defnoreturn=ce,le.procedures_defreturn=ce,le.procedures_ifreturn=me;var O=/^\s*'([^']|\\')*'\s*$/,H=function(c){return O.test(c)?[c,S.ATOMIC]:["String("+c+")",S.FUNCTION_CALL]},J=function(c,A,M){return A==="FIRST"?"0":A==="FROM_END"?c+".length - 1 - "+M:A==="LAST"?c+".length - 1":M},ne={};ne.text=Le,ne.text_append=Fe,ne.text_changeCase=Ue,ne.text_charAt=he,ne.text_count=ht,ne.text_getSubstring=Se,ne.text_indexOf=De,ne.text_isEmpty=de,ne.text_join=Qe,ne.text_length=lt,ne.text_print=et,ne.text_prompt=tt,ne.text_prompt_ext=tt,ne.text_replace=nt,ne.text_reverse=st,ne.text_trim=He;var ye={};ye.variables_get=ot,ye.variables_set=it;var h={};h.variables_get_dynamic=ot,h.variables_set_dynamic=it;var v=new ae,T=Object.assign({},$e,Ne,Ie,Ve,le,ne,ye,h);for(const c in T)v.forBlock[c]=T[c];var _={};return _.JavascriptGenerator=ae,_.Order=S,_.javascriptGenerator=v,_.__namespace__=s,_})})(javascript_compressed$1)),javascript_compressed$1.exports}var javascript_compressedExports=requireJavascript_compressed();const javascript$1=getDefaultExportFromCjs(javascript_compressedExports),{JavascriptGenerator,Order,javascriptGenerator}=javascript$1;var dist$7={exports:{}};var dist$6=dist$7.exports,hasRequiredDist$3;function requireDist$3(){return hasRequiredDist$3||(hasRequiredDist$3=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(dist$6,o=>(()=>{var s={370:R=>{R.exports=o}},l={};function f(R){var k=l[R];if(k!==void 0)return k.exports;var B=l[R]={exports:{}};return s[R](B,B.exports,f),B.exports}f.d=(R,k)=>{for(var B in k)f.o(k,B)&&!f.o(R,B)&&Object.defineProperty(R,B,{enumerable:!0,get:k[B]})},f.o=(R,k)=>Object.prototype.hasOwnProperty.call(R,k),f.r=R=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(R,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(R,"__esModule",{value:!0})};var E={};f.r(E),f.d(E,{FieldAngle:()=>x,Mode:()=>g,registerFieldAngle:()=>w});var g,N=f(370);class x extends N.FieldNumber{constructor(k,B,P){super(N.Field.SKIP_SETUP),this.clockwise=!1,this.offset=0,this.displayMin=0,this.displayMax=360,this.minorTick=15,this.majorTick=45,this.symbol="°",this.boundEvents=[],this.line=null,this.gauge=null,this.symbolElement=null,k!==N.Field.SKIP_SETUP&&(P?(this.configure_(P),P.min!==void 0&&P.min!==null||this.setMin(x.DEFAULT_MIN),P.max!==void 0&&P.max!==null||this.setMax(x.DEFAULT_MAX),P.precision!==void 0&&P.precision!==null||this.setPrecision(x.DEFAULT_PRECISION)):(this.setMin(x.DEFAULT_MIN),this.setMax(x.DEFAULT_MAX),this.setPrecision(x.DEFAULT_PRECISION)),this.setValue(k),B&&this.setValidator(B))}configure_(k){switch(super.configure_(k),k.mode){case g.COMPASS:this.clockwise=!0,this.offset=90;break;case g.PROTRACTOR:this.clockwise=!1,this.offset=0}if(k.clockwise!==void 0&&(this.clockwise=k.clockwise),k.offset!==void 0&&(this.offset=k.offset),k.displayMin!==void 0&&(this.displayMin=k.displayMin),k.displayMax!==void 0&&(this.displayMax=k.displayMax),k.minorTick!==void 0&&(this.minorTick=k.minorTick),k.majorTick!==void 0&&(this.majorTick=k.majorTick),k.symbol!==void 0&&(this.symbol=k.symbol),this.displayMin>=this.displayMax)throw Error("Display min must be larger than display max");if(this.minorTick<0||this.majorTick<0)throw Error("Ticks cannot be negative")}initView(){super.initView(),this.symbol&&(this.symbolElement=N.utils.dom.createSvgElement(N.utils.Svg.TSPAN,{}),this.symbolElement.appendChild(document.createTextNode(this.symbol)),this.getTextElement().appendChild(this.symbolElement))}render_(){super.render_(),this.updateGraph()}showEditor_(k){const B=N.utils.userAgent.MOBILE||N.utils.userAgent.ANDROID||N.utils.userAgent.IPAD;super.showEditor_(k,B,!1);const P=this.dropdownCreate();N.DropDownDiv.getContentDiv().appendChild(P);const z=this.getSourceBlock();z instanceof N.BlockSvg&&N.DropDownDiv.setColour(z.style.colourPrimary,z.style.colourTertiary),N.DropDownDiv.showPositionedByField(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const k=N.utils.dom.createSvgElement(N.utils.Svg.SVG,{xmlns:N.utils.dom.SVG_NS,"xmlns:html":N.utils.dom.HTML_NS,"xmlns:xlink":N.utils.dom.XLINK_NS,version:"1.1",height:2*x.HALF+"px",width:2*x.HALF+"px"});k.style.touchAction="none";const B=N.utils.dom.createSvgElement(N.utils.Svg.CIRCLE,{cx:x.HALF,cy:x.HALF,r:x.RADIUS,class:"blocklyAngleCircle"},k);this.gauge=N.utils.dom.createSvgElement(N.utils.Svg.PATH,{class:"blocklyAngleGauge"},k),this.line=N.utils.dom.createSvgElement(N.utils.Svg.LINE,{x1:x.HALF,y1:x.HALF,class:"blocklyAngleLine"},k);const P=N.utils.math.toDegrees(this.fieldAngleToRadians(this.min_)),z=N.utils.math.toDegrees(this.fieldAngleToRadians(this.max_)),m=(L,G)=>{let p=Math.ceil(P/L)*L,I=Math.floor(z/L)*L;this.clockwise?p<I&&(p+=360):p>I&&(I+=360),I===p&&(I+=360),p>I&&([p,I]=[I,p]);for(let D=p;D<=I;D+=L)N.utils.dom.createSvgElement(N.utils.Svg.LINE,{x1:x.HALF+x.RADIUS,y1:x.HALF,x2:x.HALF+x.RADIUS-G,y2:x.HALF,class:"blocklyAngleMarks",transform:"rotate("+-D+","+x.HALF+","+x.HALF+")"},k)},d=this.displayMax-this.displayMin,y=360/d*this.minorTick;y&&m(y,5);const F=360/d*this.majorTick;return F&&m(F,10),this.boundEvents.push(N.browserEvents.conditionalBind(k,"click",this,this.hide)),this.boundEvents.push(N.browserEvents.conditionalBind(B,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(N.browserEvents.conditionalBind(B,"pointermove",this,this.onMouseMove_,!0)),k}dropdownDispose(){for(const k of this.boundEvents)N.browserEvents.unbind(k);this.boundEvents.length=0,this.gauge=null,this.line=null}hide(){N.DropDownDiv.hideIfOwner(this),N.WidgetDiv.hide()}onMouseMove_(k){var B,P;const z=(P=(B=this.gauge)===null||B===void 0?void 0:B.ownerSVGElement)===null||P===void 0?void 0:P.getBoundingClientRect();if(!z)return;const m=k.clientX-z.left-x.HALF,d=k.clientY-z.top-x.HALF;let y=Math.atan2(-d,m);isNaN(y)||(y=this.radiansToFieldAngle(y),this.displayMouseOrKeyboardValue(y))}radiansToFieldAngle(k){return k/=2*Math.PI,k-=this.offset/360,this.clockwise&&(k*=-1),(k%=1)<0&&(k+=1),(k*=this.displayMax-this.displayMin)+this.displayMin}fieldAngleToRadians(k){return k-=this.displayMin,k/=this.displayMax-this.displayMin,this.clockwise&&(k*=-1),k+=this.offset/360,(k%=1)>.5&&(k-=1),k<-.5&&(k+=1),k*(2*Math.PI)}displayMouseOrKeyboardValue(k){const B=this.doClassValidation_(k);if(B!==null&&B!==this.value_){const P=this.value_;this.setEditorValue_(B,!1),this.sourceBlock_&&N.Events.isEnabled()&&this.value_!==P&&N.Events.fire(new(N.Events.get(N.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,P,this.value_))}}updateGraph(){if(!this.gauge||!this.line)return;let k=Number(this.getText());if(isNaN(k))return;k=this.fieldAngleToRadians(k);let B=`M ${x.HALF},${x.HALF}`,P=x.HALF,z=x.HALF;if(!isNaN(k)){const m=N.utils.math.toRadians(this.offset),d=Math.cos(m)*x.RADIUS,y=Math.sin(m)*-x.RADIUS;P+=Math.cos(k)*x.RADIUS,z-=Math.sin(k)*x.RADIUS;const F=Number(this.clockwise);let L=Math.abs(Math.floor((k-m)/Math.PI)%2);F&&(L=1-L),B+=` l ${d},${y} A ${x.RADIUS},${x.RADIUS} 0 ${L} ${F} ${P},${z} z`}this.gauge.setAttribute("d",B),this.line.setAttribute("x2",`${P}`),this.line.setAttribute("y2",`${z}`)}onHtmlInputKeyDown_(k){super.onHtmlInputKeyDown_(k);const B=this.getSourceBlock();if(!B)throw new Error("The field has not yet been attached to its input. Call appendField to attach it.");let P=0;switch(k.key){case"ArrowLeft":P=B.RTL?1:-1;break;case"ArrowRight":P=B.RTL?-1:1;break;case"ArrowDown":P=-1;break;case"ArrowUp":P=1}if(P){const z=this.getValue();this.displayMouseOrKeyboardValue(z+P*this.precision_),k.preventDefault(),k.stopPropagation()}}doClassValidation_(k){if(k===null)return null;let B=Number(k);if(isNaN(B)||!isFinite(B))return null;B=this.wrapValue(B),this.precision_&&(B=Math.round(B/this.precision_)*this.precision_),B=Number(B.toFixed(10));const P=this.displayMax-this.displayMin,z=this.max_-this.min_;if(B<this.min_){const m=this.min_-B;B=m<P-m-z?this.min_:this.max_}if(B>this.max_){const m=B-this.max_;B=P-m-z<m?this.min_:this.max_}return B}wrapValue(k){const B=this.displayMax-this.displayMin;for(k%=B;k<this.displayMin;)k+=B;for(;k>=this.displayMax;)k-=B;return k}static fromJson(k){return new this(k.value,void 0,k)}}function w(){N.fieldRegistry.register("field_angle",x)}return x.HALF=50,x.RADIUS=x.HALF-1,x.DEFAULT_PRECISION=15,x.DEFAULT_MIN=0,x.DEFAULT_MAX=360,x.prototype.DEFAULT_VALUE=0,N.Css.register(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),(function(R){R.COMPASS="compass",R.PROTRACTOR="protractor"})(g||(g={})),E})())})(dist$7)),dist$7.exports}var distExports$3=requireDist$3();distExports$3.registerFieldAngle();Blocks.math_angle={init:function(){this.appendDummyInput().appendField(new distExports$3.FieldAngle(90),"Angle"),this.setOutput(!0,"Number"),this.setStyle("math_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.math_angle=function(i){return[i.getFieldValue("Angle"),Order.ATOMIC]};Blocks.math_convert_degrees={init:function(){this.appendValueInput("Degrees").setCheck("Number").appendField(new FieldDropdown([["to degrees","degrees"],["to radians","radians"]]),"to"),this.setOutput(!0,"Number"),this.setStyle("math_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.math_convert_degrees=function(i,n){const o=i.getFieldValue("to"),s=n.valueToCode(i,"Degrees",Order.ATOMIC);let l;return o==="degrees"?l=`(${s}*180/Math.PI)`:l=`(${s}*Math.PI/180)`,[l,Order.ATOMIC]};var dist$5={exports:{}},dart_compressed$1={exports:{}},dart_compressed=dart_compressed$1.exports,hasRequiredDart_compressed;function requireDart_compressed(){return hasRequiredDart_compressed||(hasRequiredDart_compressed=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(dart_compressed,function(o){var s=o.__namespace__,l=function(h,v){return["[]",S.ATOMIC]},f=function(h,v){const T=Array(h.itemCount_);for(let _=0;_<h.itemCount_;_++)T[_]=v.valueToCode(h,"ADD"+_,S.NONE)||"null";return["["+T.join(", ")+"]",S.ATOMIC]},E=function(h,v){const T=v.valueToCode(h,"ITEM",S.NONE)||"null";return["new List.filled("+(v.valueToCode(h,"NUM",S.NONE)||"0")+", "+T+")",S.UNARY_POSTFIX]},g=function(h,v){return[(v.valueToCode(h,"VALUE",S.UNARY_POSTFIX)||"[]")+".length",S.UNARY_POSTFIX]},N=function(h,v){return[(v.valueToCode(h,"VALUE",S.UNARY_POSTFIX)||"[]")+".isEmpty",S.UNARY_POSTFIX]},x=function(h,v){const T=h.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",_=v.valueToCode(h,"FIND",S.NONE)||"''";return v=(v.valueToCode(h,"VALUE",S.UNARY_POSTFIX)||"[]")+"."+T+"("+_+")",h.workspace.options.oneBasedIndex?[v+" + 1",S.ADDITIVE]:[v,S.UNARY_POSTFIX]},w=function(h,v){function T(){const M=v.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),Y="List "+M+" = "+A+`;
`;return A=M,Y}var _=h.getFieldValue("MODE")||"GET";const c=h.getFieldValue("WHERE")||"FROM_START";let A=v.valueToCode(h,"VALUE",c==="RANDOM"||c==="FROM_END"?S.NONE:S.UNARY_POSTFIX)||"[]";if((c!=="RANDOM"||_!=="REMOVE")&&c!=="FROM_END"||A.match(/^\w+$/))switch(c){case"FIRST":if(_==="GET")return[A+".first",S.UNARY_POSTFIX];if(_==="GET_REMOVE")return[A+".removeAt(0)",S.UNARY_POSTFIX];if(_==="REMOVE")return A+`.removeAt(0);
`;break;case"LAST":if(_==="GET")return[A+".last",S.UNARY_POSTFIX];if(_==="GET_REMOVE")return[A+".removeLast()",S.UNARY_POSTFIX];if(_==="REMOVE")return A+`.removeLast();
`;break;case"FROM_START":if(h=v.getAdjusted(h,"AT"),_==="GET")return[A+"["+h+"]",S.UNARY_POSTFIX];if(_==="GET_REMOVE")return[A+".removeAt("+h+")",S.UNARY_POSTFIX];if(_==="REMOVE")return A+".removeAt("+h+`);
`;break;case"FROM_END":if(h=v.getAdjusted(h,"AT",1,!1,S.ADDITIVE),_==="GET")return[A+"["+A+".length - "+h+"]",S.UNARY_POSTFIX];if(_==="GET_REMOVE"||_==="REMOVE"){if(h=A+".removeAt("+A+".length - "+h+")",_==="GET_REMOVE")return[h,S.UNARY_POSTFIX];if(_==="REMOVE")return h+`;
`}break;case"RANDOM":if(v.definitions_.import_dart_math="import 'dart:math' as Math;",_==="REMOVE")return _=v.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),"int "+_+" = new Math.Random().nextInt("+A+`.length);
`+(A+".removeAt("+_+`);
`);if(_==="GET")return[v.provideFunction_("lists_get_random_item",`
dynamic ${v.FUNCTION_NAME_PLACEHOLDER_}(List my_list) {
  int x = new Math.Random().nextInt(my_list.length);
  return my_list[x];
}
`)+"("+A+")",S.UNARY_POSTFIX];if(_==="GET_REMOVE")return[v.provideFunction_("lists_remove_random_item",`
dynamic ${v.FUNCTION_NAME_PLACEHOLDER_}(List my_list) {
  int x = new Math.Random().nextInt(my_list.length);
  return my_list.removeAt(x);
}
`)+"("+A+")",S.UNARY_POSTFIX]}else{if(c==="RANDOM")return v.definitions_.import_dart_math="import 'dart:math' as Math;",_=T(),h=v.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),_+("int "+h+" = new Math.Random().nextInt("+A+`.length);
`)+(A+".removeAt("+h+`);
`);if(_==="REMOVE")return _=v.getAdjusted(h,"AT",1,!1,S.ADDITIVE),T()+(A+".removeAt("+A+".length - "+_+`);
`);if(_==="GET")return _=v.getAdjusted(h,"AT",1),[v.provideFunction_("lists_get_from_end",`
dynamic ${v.FUNCTION_NAME_PLACEHOLDER_}(List my_list, num x) {
  x = my_list.length - x;
  return my_list[x];
}
`)+"("+A+", "+_+")",S.UNARY_POSTFIX];if(_==="GET_REMOVE")return _=v.getAdjusted(h,"AT",1),[v.provideFunction_("lists_remove_from_end",`
dynamic ${v.FUNCTION_NAME_PLACEHOLDER_}(List my_list, num x) {
  x = my_list.length - x;
  return my_list.removeAt(x);
}
`)+"("+A+", "+_+")",S.UNARY_POSTFIX]}throw Error("Unhandled combination (lists_getIndex).")},R=function(h,v){function T(){if(A.match(/^\w+$/))return"";const Y=v.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),q="List "+Y+" = "+A+`;
`;return A=Y,q}const _=h.getFieldValue("MODE")||"GET";var c=h.getFieldValue("WHERE")||"FROM_START";let A=v.valueToCode(h,"LIST",S.UNARY_POSTFIX)||"[]";const M=v.valueToCode(h,"TO",S.ASSIGNMENT)||"null";switch(c){case"FIRST":if(_==="SET")return A+"[0] = "+M+`;
`;if(_==="INSERT")return A+".insert(0, "+M+`);
`;break;case"LAST":if(_==="SET")return T()+(A+"["+A+".length - 1] = "+M+`;
`);if(_==="INSERT")return A+".add("+M+`);
`;break;case"FROM_START":if(h=v.getAdjusted(h,"AT"),_==="SET")return A+"["+h+"] = "+M+`;
`;if(_==="INSERT")return A+".insert("+h+", "+M+`);
`;break;case"FROM_END":if(h=v.getAdjusted(h,"AT",1,!1,S.ADDITIVE),c=T(),_==="SET")return c+(A+"["+A+".length - "+h+"] = "+M+`;
`);if(_==="INSERT")return c+(A+".insert("+A+".length - "+h+", "+M+`);
`);break;case"RANDOM":if(v.definitions_.import_dart_math="import 'dart:math' as Math;",h=T(),c=v.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),h+="int "+c+" = new Math.Random().nextInt("+A+`.length);
`,_==="SET")return h+(A+"["+c+"] = "+M+`;
`);if(_==="INSERT")return h+(A+".insert("+c+", "+M+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},k=function(h,v){const T=v.valueToCode(h,"LIST",S.UNARY_POSTFIX)||"[]";var _=h.getFieldValue("WHERE1");const c=h.getFieldValue("WHERE2");if(T.match(/^\w+$/)||_!=="FROM_END"&&c==="FROM_START"){switch(_){case"FROM_START":_=v.getAdjusted(h,"AT1");break;case"FROM_END":_=v.getAdjusted(h,"AT1",1,!1,S.ADDITIVE),_=T+".length - "+_;break;case"FIRST":_="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":var A=v.getAdjusted(h,"AT2",1);break;case"FROM_END":A=v.getAdjusted(h,"AT2",0,!1,S.ADDITIVE),A=T+".length - "+A;break;case"LAST":break;default:throw Error("Unhandled option (lists_getSublist).")}v=c==="LAST"?T+".sublist("+_+")":T+".sublist("+_+", "+A+")"}else A=v.getAdjusted(h,"AT1"),h=v.getAdjusted(h,"AT2"),v=v.provideFunction_("lists_get_sublist",`
List ${v.FUNCTION_NAME_PLACEHOLDER_}(List list, String where1, num at1, String where2, num at2) {
  int getAt(String where, num at) {
    if (where == 'FROM_END') {
      at = list.length - 1 - at;
    } else if (where == 'FIRST') {
      at = 0;
    } else if (where == 'LAST') {
      at = list.length - 1;
    } else if (where != 'FROM_START') {
      throw 'Unhandled option (lists_getSublist).';
    }
    return at;
  }
  at1 = getAt(where1, at1);
  at2 = getAt(where2, at2) + 1;
  return list.sublist(at1, at2);
}
`)+"("+T+", '"+_+"', "+A+", '"+c+"', "+h+")";return[v,S.UNARY_POSTFIX]},B=function(h,v){const T=v.valueToCode(h,"LIST",S.NONE)||"[]",_=h.getFieldValue("DIRECTION")==="1"?1:-1;return h=h.getFieldValue("TYPE"),[v.provideFunction_("lists_sort",`
List ${v.FUNCTION_NAME_PLACEHOLDER_}(List list, String type, int direction) {
  var compareFuncs = {
    'NUMERIC': (a, b) => (direction * a.compareTo(b)).toInt(),
    'TEXT': (a, b) => direction * a.toString().compareTo(b.toString()),
    'IGNORE_CASE':
      (a, b) => direction *
      a.toString().toLowerCase().compareTo(b.toString().toLowerCase())
  };
  list = new List.from(list);
  var compare = compareFuncs[type];
  list.sort(compare);
  return list;
}
`)+"("+T+', "'+h+'", '+_+")",S.UNARY_POSTFIX]},P=function(h,v){let T=v.valueToCode(h,"INPUT",S.UNARY_POSTFIX);if(v=v.valueToCode(h,"DELIM",S.NONE)||"''",h=h.getFieldValue("MODE"),h==="SPLIT")T||(T="''"),h="split";else if(h==="JOIN")T||(T="[]"),h="join";else throw Error("Unknown mode: "+h);return[T+"."+h+"("+v+")",S.UNARY_POSTFIX]},z=function(h,v){return["new List.from("+(v.valueToCode(h,"LIST",S.NONE)||"[]")+".reversed)",S.UNARY_POSTFIX]},m=function(h,v){let T=0,_="",c,A;v.STATEMENT_PREFIX&&(_+=v.injectId(v.STATEMENT_PREFIX,h));do A=v.valueToCode(h,"IF"+T,S.NONE)||"false",c=v.statementToCode(h,"DO"+T),v.STATEMENT_SUFFIX&&(c=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,h),v.INDENT)+c),_+=(T>0?"else ":"")+"if ("+A+`) {
`+c+"}",T++;while(h.getInput("IF"+T));return(h.getInput("ELSE")||v.STATEMENT_SUFFIX)&&(c=h.getInput("ELSE")?v.statementToCode(h,"ELSE"):"",v.STATEMENT_SUFFIX&&(c=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,h),v.INDENT)+c),_+=` else {
`+c+"}"),_+`
`},d=function(h,v){const T={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[h.getFieldValue("OP")],_=T==="=="||T==="!="?S.EQUALITY:S.RELATIONAL,c=v.valueToCode(h,"A",_)||"0";return h=v.valueToCode(h,"B",_)||"0",[c+" "+T+" "+h,_]},y=function(h,v){const T=h.getFieldValue("OP")==="AND"?"&&":"||",_=T==="&&"?S.LOGICAL_AND:S.LOGICAL_OR;let c=v.valueToCode(h,"A",_);return h=v.valueToCode(h,"B",_),c||h?(v=T==="&&"?"true":"false",c||(c=v),h||(h=v)):h=c="false",[c+" "+T+" "+h,_]},F=function(h,v){const T=S.UNARY_PREFIX;return["!"+(v.valueToCode(h,"BOOL",T)||"true"),T]},L=function(h,v){return[h.getFieldValue("BOOL")==="TRUE"?"true":"false",S.ATOMIC]},G=function(h,v){return["null",S.ATOMIC]},p=function(h,v){const T=v.valueToCode(h,"IF",S.CONDITIONAL)||"false",_=v.valueToCode(h,"THEN",S.CONDITIONAL)||"null";return h=v.valueToCode(h,"ELSE",S.CONDITIONAL)||"null",[T+" ? "+_+" : "+h,S.CONDITIONAL]},I=function(h,v){let T;T=h.getField("TIMES")?String(Number(h.getFieldValue("TIMES"))):v.valueToCode(h,"TIMES",S.ASSIGNMENT)||"0";let _=v.statementToCode(h,"DO");_=v.addLoopTrap(_,h),h="";const c=v.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE);let A=T;return T.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(T)||(A=v.nameDB_.getDistinctName("repeat_end",s.NameType$$module$build$src$core$names.VARIABLE),h+="var "+A+" = "+T+`;
`),h+("for (int "+c+" = 0; "+c+" < "+A+"; "+c+`++) {
`+_+`}
`)},D=function(h,v){const T=h.getFieldValue("MODE")==="UNTIL";let _=v.valueToCode(h,"BOOL",T?S.UNARY_PREFIX:S.NONE)||"false",c=v.statementToCode(h,"DO");return c=v.addLoopTrap(c,h),T&&(_="!"+_),"while ("+_+`) {
`+c+`}
`},V=function(h,v){var T=v.getVariableName(h.getFieldValue("VAR")),_=v.valueToCode(h,"FROM",S.ASSIGNMENT)||"0",c=v.valueToCode(h,"TO",S.ASSIGNMENT)||"0";const A=v.valueToCode(h,"BY",S.ASSIGNMENT)||"1";let M=v.statementToCode(h,"DO");if(M=v.addLoopTrap(M,h),s.isNumber$$module$build$src$core$utils$string(_)&&s.isNumber$$module$build$src$core$utils$string(c)&&s.isNumber$$module$build$src$core$utils$string(A))v=Number(_)<=Number(c),h="for ("+T+" = "+_+"; "+T+(v?" <= ":" >= ")+c+"; "+T,T=Math.abs(Number(A)),h=T===1?h+(v?"++":"--"):h+((v?" += ":" -= ")+T),h+=`) {
`+M+`}
`;else{h="";let Y=_;_.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(_)||(Y=v.nameDB_.getDistinctName(T+"_start",s.NameType$$module$build$src$core$names.VARIABLE),h+="var "+Y+" = "+_+`;
`),_=c,c.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(c)||(_=v.nameDB_.getDistinctName(T+"_end",s.NameType$$module$build$src$core$names.VARIABLE),h+="var "+_+" = "+c+`;
`),c=v.nameDB_.getDistinctName(T+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),h+="num "+c+" = ",h=s.isNumber$$module$build$src$core$utils$string(A)?h+(Math.abs(Number(A))+`;
`):h+("("+A+`).abs();
`),h+="if ("+Y+" > "+_+`) {
`,h+=v.INDENT+c+" = -"+c+`;
`,h=h+`}
for (`+(T+" = "+Y+"; "+c+" >= 0 ? "+T+" <= "+_+" : "+T+" >= "+_+"; "+T+" += "+c+`) {
`+M+`}
`)}return h},C=function(h,v){const T=v.getVariableName(h.getFieldValue("VAR")),_=v.valueToCode(h,"LIST",S.ASSIGNMENT)||"[]";let c=v.statementToCode(h,"DO");return c=v.addLoopTrap(c,h),"for (var "+T+" in "+_+`) {
`+c+`}
`},K=function(h,v){let T="";if(v.STATEMENT_PREFIX&&(T+=v.injectId(v.STATEMENT_PREFIX,h)),v.STATEMENT_SUFFIX&&(T+=v.injectId(v.STATEMENT_SUFFIX,h)),v.STATEMENT_PREFIX){const _=h.getSurroundLoop();_&&!_.suppressPrefixSuffix&&(T+=v.injectId(v.STATEMENT_PREFIX,_))}switch(h.getFieldValue("FLOW")){case"BREAK":return T+`break;
`;case"CONTINUE":return T+`continue;
`}throw Error("Unknown flow statement.")},X=function(h,v){return h=Number(h.getFieldValue("NUM")),h===1/0?["double.infinity",S.UNARY_POSTFIX]:h===-1/0?["-double.infinity",S.UNARY_PREFIX]:[String(h),h<0?S.UNARY_PREFIX:S.ATOMIC]},re=function(h,v){var T={ADD:[" + ",S.ADDITIVE],MINUS:[" - ",S.ADDITIVE],MULTIPLY:[" * ",S.MULTIPLICATIVE],DIVIDE:[" / ",S.MULTIPLICATIVE],POWER:[null,S.NONE]}[h.getFieldValue("OP")];const _=T[0];T=T[1];const c=v.valueToCode(h,"A",T)||"0";return h=v.valueToCode(h,"B",T)||"0",_?[c+_+h,T]:(v.definitions_.import_dart_math="import 'dart:math' as Math;",["Math.pow("+c+", "+h+")",S.UNARY_POSTFIX])},se=function(h,v){const T=h.getFieldValue("OP");let _;if(T==="NEG")return h=v.valueToCode(h,"NUM",S.UNARY_PREFIX)||"0",h[0]==="-"&&(h=" "+h),["-"+h,S.UNARY_PREFIX];switch(v.definitions_.import_dart_math="import 'dart:math' as Math;",h=T==="ABS"||T.substring(0,5)==="ROUND"?v.valueToCode(h,"NUM",S.UNARY_POSTFIX)||"0":T==="SIN"||T==="COS"||T==="TAN"?v.valueToCode(h,"NUM",S.MULTIPLICATIVE)||"0":v.valueToCode(h,"NUM",S.NONE)||"0",T){case"ABS":_=h+".abs()";break;case"ROOT":_="Math.sqrt("+h+")";break;case"LN":_="Math.log("+h+")";break;case"EXP":_="Math.exp("+h+")";break;case"POW10":_="Math.pow(10,"+h+")";break;case"ROUND":_=h+".round()";break;case"ROUNDUP":_=h+".ceil()";break;case"ROUNDDOWN":_=h+".floor()";break;case"SIN":_="Math.sin("+h+" / 180 * Math.pi)";break;case"COS":_="Math.cos("+h+" / 180 * Math.pi)";break;case"TAN":_="Math.tan("+h+" / 180 * Math.pi)"}if(_)return[_,S.UNARY_POSTFIX];switch(T){case"LOG10":_="Math.log("+h+") / Math.log(10)";break;case"ASIN":_="Math.asin("+h+") / Math.pi * 180";break;case"ACOS":_="Math.acos("+h+") / Math.pi * 180";break;case"ATAN":_="Math.atan("+h+") / Math.pi * 180";break;default:throw Error("Unknown math operator: "+T)}return[_,S.MULTIPLICATIVE]},Pe=function(h,v){const T={PI:["Math.pi",S.UNARY_POSTFIX],E:["Math.e",S.UNARY_POSTFIX],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",S.MULTIPLICATIVE],SQRT2:["Math.sqrt2",S.UNARY_POSTFIX],SQRT1_2:["Math.sqrt1_2",S.UNARY_POSTFIX],INFINITY:["double.infinity",S.ATOMIC]};return h=h.getFieldValue("CONSTANT"),h!=="INFINITY"&&(v.definitions_.import_dart_math="import 'dart:math' as Math;"),T[h]},Te=function(h,v){var T={EVEN:[" % 2 == 0",S.MULTIPLICATIVE,S.EQUALITY],ODD:[" % 2 == 1",S.MULTIPLICATIVE,S.EQUALITY],WHOLE:[" % 1 == 0",S.MULTIPLICATIVE,S.EQUALITY],POSITIVE:[" > 0",S.RELATIONAL,S.RELATIONAL],NEGATIVE:[" < 0",S.RELATIONAL,S.RELATIONAL],DIVISIBLE_BY:[null,S.MULTIPLICATIVE,S.EQUALITY],PRIME:[null,S.NONE,S.UNARY_POSTFIX]};const _=h.getFieldValue("PROPERTY"),[c,A,M]=T[_];if(T=v.valueToCode(h,"NUMBER_TO_CHECK",A)||"0",_==="PRIME")v.definitions_.import_dart_math="import 'dart:math' as Math;",h=v.provideFunction_("math_isPrime",`
bool ${v.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is null, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (n == null || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) == 0 || n % (x + 1) == 0) {
      return false;
    }
  }
  return true;
}
`)+"("+T+")";else if(_==="DIVISIBLE_BY"){if(h=v.valueToCode(h,"DIVISOR",S.MULTIPLICATIVE)||"0",h==="0")return["false",S.ATOMIC];h=T+" % "+h+" == 0"}else h=T+c;return[h,M]},Ae=function(h,v){const T=v.valueToCode(h,"DELTA",S.ADDITIVE)||"0";return h=v.getVariableName(h.getFieldValue("VAR")),h+" = ("+h+" is num ? "+h+" : 0) + "+T+`;
`},we=function(h,v){const T=h.getFieldValue("OP");switch(h=v.valueToCode(h,"LIST",S.NONE)||"[]",T){case"SUM":v=v.provideFunction_("math_sum",`
num ${v.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  num sumVal = 0;
  myList.forEach((num entry) {sumVal += entry;});
  return sumVal;
}
`)+"("+h+")";break;case"MIN":v.definitions_.import_dart_math="import 'dart:math' as Math;",v=v.provideFunction_("math_min",`
num ${v.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  if (myList.isEmpty) return null;
  num minVal = myList[0];
  myList.forEach((num entry) {minVal = Math.min(minVal, entry);});
  return minVal;
}
`)+"("+h+")";break;case"MAX":v.definitions_.import_dart_math="import 'dart:math' as Math;",v=v.provideFunction_("math_max",`
num ${v.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  if (myList.isEmpty) return null;
  num maxVal = myList[0];
  myList.forEach((num entry) {maxVal = Math.max(maxVal, entry);});
  return maxVal;
}
`)+"("+h+")";break;case"AVERAGE":v=v.provideFunction_("math_mean",`
num ${v.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only.
  List localList = new List.from(myList);
  localList.removeWhere((a) => a is! num);
  if (localList.isEmpty) return null;
  num sumVal = 0;
  localList.forEach((var entry) {sumVal += entry;});
  return sumVal / localList.length;
}
`)+"("+h+")";break;case"MEDIAN":v=v.provideFunction_("math_median",`
num ${v.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only, then sort, then return middle value
  // or the average of two middle values if list has an even number of elements.
  List localList = new List.from(myList);
  localList.removeWhere((a) => a is! num);
  if (localList.isEmpty) return null;
  localList.sort((a, b) => (a - b));
  int index = localList.length ~/ 2;
  if (localList.length % 2 == 1) {
    return localList[index];
  } else {
    return (localList[index - 1] + localList[index]) / 2;
  }
}
`)+"("+h+")";break;case"MODE":v.definitions_.import_dart_math="import 'dart:math' as Math;",v=v.provideFunction_("math_modes",`
List ${v.FUNCTION_NAME_PLACEHOLDER_}(List values) {
  List modes = [];
  List counts = [];
  int maxCount = 0;
  for (int i = 0; i < values.length; i++) {
    var value = values[i];
    bool found = false;
    int thisCount;
    for (int j = 0; j < counts.length; j++) {
      if (counts[j][0] == value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.add([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (int j = 0; j < counts.length; j++) {
    if (counts[j][1] == maxCount) {
        modes.add(counts[j][0]);
    }
  }
  return modes;
}
`)+"("+h+")";break;case"STD_DEV":v.definitions_.import_dart_math="import 'dart:math' as Math;",v=v.provideFunction_("math_standard_deviation",`
num ${v.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only.
  List numbers = new List.from(myList);
  numbers.removeWhere((a) => a is! num);
  if (numbers.isEmpty) return null;
  num n = numbers.length;
  num sum = 0;
  numbers.forEach((x) => sum += x);
  num mean = sum / n;
  num sumSquare = 0;
  numbers.forEach((x) => sumSquare += Math.pow(x - mean, 2));
  return Math.sqrt(sumSquare / n);
}
`)+"("+h+")";break;case"RANDOM":v.definitions_.import_dart_math="import 'dart:math' as Math;",v=v.provideFunction_("math_random_item",`
dynamic ${v.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  int x = new Math.Random().nextInt(myList.length);
  return myList[x];
}
`)+"("+h+")";break;default:throw Error("Unknown operator: "+T)}return[v,S.UNARY_POSTFIX]},ve=function(h,v){const T=v.valueToCode(h,"DIVIDEND",S.MULTIPLICATIVE)||"0";return h=v.valueToCode(h,"DIVISOR",S.MULTIPLICATIVE)||"0",[T+" % "+h,S.MULTIPLICATIVE]},be=function(h,v){v.definitions_.import_dart_math="import 'dart:math' as Math;";const T=v.valueToCode(h,"VALUE",S.NONE)||"0",_=v.valueToCode(h,"LOW",S.NONE)||"0";return h=v.valueToCode(h,"HIGH",S.NONE)||"double.infinity",["Math.min(Math.max("+T+", "+_+"), "+h+")",S.UNARY_POSTFIX]},Xe=function(h,v){v.definitions_.import_dart_math="import 'dart:math' as Math;";const T=v.valueToCode(h,"FROM",S.NONE)||"0";return h=v.valueToCode(h,"TO",S.NONE)||"0",[v.provideFunction_("math_random_int",`
int ${v.FUNCTION_NAME_PLACEHOLDER_}(num a, num b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    num c = a;
    a = b;
    b = c;
  }
  return new Math.Random().nextInt(b - a + 1) + a;
}
`)+"("+T+", "+h+")",S.UNARY_POSTFIX]},Be=function(h,v){return v.definitions_.import_dart_math="import 'dart:math' as Math;",["new Math.Random().nextDouble()",S.UNARY_POSTFIX]},ke=function(h,v){v.definitions_.import_dart_math="import 'dart:math' as Math;";const T=v.valueToCode(h,"X",S.NONE)||"0";return["Math.atan2("+(v.valueToCode(h,"Y",S.NONE)||"0")+", "+T+") / Math.pi * 180",S.MULTIPLICATIVE]},ce=function(h,v){const T=v.getProcedureName(h.getFieldValue("NAME"));var _="";v.STATEMENT_PREFIX&&(_+=v.injectId(v.STATEMENT_PREFIX,h)),v.STATEMENT_SUFFIX&&(_+=v.injectId(v.STATEMENT_SUFFIX,h)),_&&(_=v.prefixLines(_,v.INDENT));let c="";v.INFINITE_LOOP_TRAP&&(c=v.prefixLines(v.injectId(v.INFINITE_LOOP_TRAP,h),v.INDENT));let A="";h.getInput("STACK")&&(A=v.statementToCode(h,"STACK"));let M="";h.getInput("RETURN")&&(M=v.valueToCode(h,"RETURN",S.NONE)||"");let Y="";A&&M&&(Y=_),M&&(M=v.INDENT+"return "+M+`;
`);const q=M?"dynamic":"void",ee=[],xe=h.getVars();for(let ze=0;ze<xe.length;ze++)ee[ze]=v.getVariableName(xe[ze]);return _=q+" "+T+"("+ee.join(", ")+`) {
`+_+c+A+Y+M+"}",_=v.scrub_(h,_),v.definitions_["%"+T]=_,null},te=function(h,v){const T=v.getProcedureName(h.getFieldValue("NAME")),_=[],c=h.getVars();for(let A=0;A<c.length;A++)_[A]=v.valueToCode(h,"ARG"+A,S.NONE)||"null";return[T+"("+_.join(", ")+")",S.UNARY_POSTFIX]},ue=function(h,v){return v.forBlock.procedures_callreturn(h,v)[0]+`;
`},me=function(h,v){let T="if ("+(v.valueToCode(h,"CONDITION",S.NONE)||"false")+`) {
`;return v.STATEMENT_SUFFIX&&(T+=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,h),v.INDENT)),h.hasReturnValue_?(h=v.valueToCode(h,"VALUE",S.NONE)||"null",T+=v.INDENT+"return "+h+`;
`):T+=v.INDENT+`return;
`,T+`}
`},Le=function(h,v){return[v.quote_(h.getFieldValue("TEXT")),S.ATOMIC]},Qe=function(h,v){switch(h.itemCount_){case 0:return["''",S.ATOMIC];case 1:return[(v.valueToCode(h,"ADD0",S.UNARY_POSTFIX)||"''")+".toString()",S.UNARY_POSTFIX];default:const T=Array(h.itemCount_);for(let _=0;_<h.itemCount_;_++)T[_]=v.valueToCode(h,"ADD"+_,S.NONE)||"''";return["["+T.join(",")+"].join()",S.UNARY_POSTFIX]}},Fe=function(h,v){const T=v.getVariableName(h.getFieldValue("VAR"));return h=v.valueToCode(h,"TEXT",S.NONE)||"''",T+" = ["+T+", "+h+`].join();
`},lt=function(h,v){return[(v.valueToCode(h,"VALUE",S.UNARY_POSTFIX)||"''")+".length",S.UNARY_POSTFIX]},de=function(h,v){return[(v.valueToCode(h,"VALUE",S.UNARY_POSTFIX)||"''")+".isEmpty",S.UNARY_POSTFIX]},De=function(h,v){const T=h.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",_=v.valueToCode(h,"FIND",S.NONE)||"''";return v=(v.valueToCode(h,"VALUE",S.UNARY_POSTFIX)||"''")+"."+T+"("+_+")",h.workspace.options.oneBasedIndex?[v+" + 1",S.ADDITIVE]:[v,S.UNARY_POSTFIX]},he=function(h,v){const T=h.getFieldValue("WHERE")||"FROM_START",_=v.valueToCode(h,"VALUE",T==="FIRST"||T==="FROM_START"?S.UNARY_POSTFIX:S.NONE)||"''";switch(T){case"FIRST":return[_+"[0]",S.UNARY_POSTFIX];case"FROM_START":return h=v.getAdjusted(h,"AT"),[_+"["+h+"]",S.UNARY_POSTFIX];case"LAST":case"FROM_END":return h=T==="LAST"?1:v.getAdjusted(h,"AT",1),[`${v.provideFunction_("text_get_from_end",`
String ${v.FUNCTION_NAME_PLACEHOLDER_}(String text, num x) {
  return text[text.length - x];
}
`)}(${_}, ${h})`,S.UNARY_POSTFIX];case"RANDOM":return v.definitions_.import_dart_math="import 'dart:math' as Math;",[v.provideFunction_("text_random_letter",`
String ${v.FUNCTION_NAME_PLACEHOLDER_}(String text) {
  int x = new Math.Random().nextInt(text.length);
  return text[x];
}
`)+"("+_+")",S.UNARY_POSTFIX]}throw Error("Unhandled option (text_charAt).")},Se=function(h,v){var T=h.getFieldValue("WHERE1");const _=h.getFieldValue("WHERE2"),c=T!=="FROM_END"&&_==="FROM_START",A=v.valueToCode(h,"STRING",c?S.UNARY_POSTFIX:S.NONE)||"''";if(T==="FIRST"&&_==="LAST")return[A,S.NONE];if(A.match(/^'?\w+'?$/)||c){switch(T){case"FROM_START":T=v.getAdjusted(h,"AT1");break;case"FROM_END":T=v.getAdjusted(h,"AT1",1,!1,S.ADDITIVE),T=A+".length - "+T;break;case"FIRST":T="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(_){case"FROM_START":var M=v.getAdjusted(h,"AT2",1);break;case"FROM_END":M=v.getAdjusted(h,"AT2",0,!1,S.ADDITIVE),M=A+".length - "+M;break;case"LAST":break;default:throw Error("Unhandled option (text_getSubstring).")}v=_==="LAST"?A+".substring("+T+")":A+".substring("+T+", "+M+")"}else M=v.getAdjusted(h,"AT1"),h=v.getAdjusted(h,"AT2"),v=v.provideFunction_("text_get_substring",`
String ${v.FUNCTION_NAME_PLACEHOLDER_}(String text, String where1, num at1, String where2, num at2) {
  int getAt(String where, num at) {
    if (where == 'FROM_END') {
      at = text.length - 1 - at;
    } else if (where == 'FIRST') {
      at = 0;
    } else if (where == 'LAST') {
      at = text.length - 1;
    } else if (where != 'FROM_START') {
      throw 'Unhandled option (text_getSubstring).';
    }
    return at;
  }
  at1 = getAt(where1, at1);
  at2 = getAt(where2, at2) + 1;
  return text.substring(at1, at2);
}
`)+"("+A+", '"+T+"', "+M+", '"+_+"', "+h+")";return[v,S.UNARY_POSTFIX]},Ue=function(h,v){const T={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[h.getFieldValue("CASE")];return h=v.valueToCode(h,"TEXT",T?S.UNARY_POSTFIX:S.NONE)||"''",[T?h+T:v.provideFunction_("text_toTitleCase",`
String ${v.FUNCTION_NAME_PLACEHOLDER_}(String str) {
  RegExp exp = new RegExp(r'\\b');
  List<String> list = str.split(exp);
  final title = new StringBuffer();
  for (String part in list) {
    if (part.length > 0) {
      title.write(part[0].toUpperCase());
      if (part.length > 0) {
        title.write(part.substring(1).toLowerCase());
      }
    }
  }
  return title.toString();
}
`)+"("+h+")",S.UNARY_POSTFIX]},He=function(h,v){const T={LEFT:".replaceFirst(new RegExp(r'^\\s+'), '')",RIGHT:".replaceFirst(new RegExp(r'\\s+$'), '')",BOTH:".trim()"}[h.getFieldValue("MODE")];return[(v.valueToCode(h,"TEXT",S.UNARY_POSTFIX)||"''")+T,S.UNARY_POSTFIX]},et=function(h,v){return"print("+(v.valueToCode(h,"TEXT",S.NONE)||"''")+`);
`},tt=function(h,v){v.definitions_.import_dart_html="import 'dart:html' as Html;";let T="Html.window.prompt("+(h.getField("TEXT")?v.quote_(h.getFieldValue("TEXT")):v.valueToCode(h,"TEXT",S.NONE)||"''")+", '')";return h.getFieldValue("TYPE")==="NUMBER"&&(v.definitions_.import_dart_math="import 'dart:math' as Math;",T="Math.parseDouble("+T+")"),[T,S.UNARY_POSTFIX]},ht=function(h,v){const T=v.valueToCode(h,"TEXT",S.NONE)||"''";return h=v.valueToCode(h,"SUB",S.NONE)||"''",[v.provideFunction_("text_count",`
int ${v.FUNCTION_NAME_PLACEHOLDER_}(String haystack, String needle) {
  if (needle.length == 0) {
    return haystack.length + 1;
  }
  int index = 0;
  int count = 0;
  while (index != -1) {
    index = haystack.indexOf(needle, index);
    if (index != -1) {
      count++;
     index += needle.length;
    }
  }
  return count;
}
`)+"("+T+", "+h+")",S.UNARY_POSTFIX]},nt=function(h,v){const T=v.valueToCode(h,"TEXT",S.UNARY_POSTFIX)||"''",_=v.valueToCode(h,"FROM",S.NONE)||"''";return h=v.valueToCode(h,"TO",S.NONE)||"''",[T+".replaceAll("+_+", "+h+")",S.UNARY_POSTFIX]},st=function(h,v){return["new String.fromCharCodes("+(v.valueToCode(h,"TEXT",S.UNARY_POSTFIX)||"''")+".runes.toList().reversed)",S.UNARY_PREFIX]},ot=function(h,v){return[v.getVariableName(h.getFieldValue("VAR")),S.ATOMIC]},it=function(h,v){const T=v.valueToCode(h,"VALUE",S.ASSIGNMENT)||"0";return v.getVariableName(h.getFieldValue("VAR"))+" = "+T+`;
`},S;(function(h){h[h.ATOMIC=0]="ATOMIC",h[h.UNARY_POSTFIX=1]="UNARY_POSTFIX",h[h.UNARY_PREFIX=2]="UNARY_PREFIX",h[h.MULTIPLICATIVE=3]="MULTIPLICATIVE",h[h.ADDITIVE=4]="ADDITIVE",h[h.SHIFT=5]="SHIFT",h[h.BITWISE_AND=6]="BITWISE_AND",h[h.BITWISE_XOR=7]="BITWISE_XOR",h[h.BITWISE_OR=8]="BITWISE_OR",h[h.RELATIONAL=9]="RELATIONAL",h[h.EQUALITY=10]="EQUALITY",h[h.LOGICAL_AND=11]="LOGICAL_AND",h[h.LOGICAL_OR=12]="LOGICAL_OR",h[h.IF_NULL=13]="IF_NULL",h[h.CONDITIONAL=14]="CONDITIONAL",h[h.CASCADE=15]="CASCADE",h[h.ASSIGNMENT=16]="ASSIGNMENT",h[h.NONE=99]="NONE"})(S||(S={}));var ae=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(h="Dart"){super(h),this.isInitialized=!1;for(const v in S)h=S[v],typeof h!="string"&&(this["ORDER_"+v]=h);this.addReservedWords("assert,break,case,catch,class,const,continue,default,do,else,enum,extends,false,final,finally,for,if,in,is,new,null,rethrow,return,super,switch,this,throw,true,try,var,void,while,with,print,identityHashCode,identical,BidirectionalIterator,Comparable,double,Function,int,Invocation,Iterable,Iterator,List,Map,Match,num,Pattern,RegExp,Set,StackTrace,String,StringSink,Type,bool,DateTime,Deprecated,Duration,Expando,Null,Object,RuneIterator,Runes,Stopwatch,StringBuffer,Symbol,Uri,Comparator,AbstractClassInstantiationError,ArgumentError,AssertionError,CastError,ConcurrentModificationError,CyclicInitializationError,Error,Exception,FallThroughError,FormatException,IntegerDivisionByZeroException,NoSuchMethodError,NullThrownError,OutOfMemoryError,RangeError,StackOverflowError,StateError,TypeError,UnimplementedError,UnsupportedError")}init(h){super.init(h),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(h.getVariableMap()),this.nameDB_.populateVariables(h),this.nameDB_.populateProcedures(h);const v=[];var T=s.allDeveloperVariables$$module$build$src$core$variables(h);for(let _=0;_<T.length;_++)v.push(this.nameDB_.getName(T[_],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(h=s.allUsedVarModels$$module$build$src$core$variables(h),T=0;T<h.length;T++)v.push(this.nameDB_.getName(h[T].getId(),s.NameType$$module$build$src$core$names.VARIABLE));v.length&&(this.definitions_.variables="var "+v.join(", ")+";"),this.isInitialized=!0}finish(h){h&&(h=this.prefixLines(h,this.INDENT)),h=`main() {
`+h+"}";const v=[],T=[];for(let _ in this.definitions_){const c=this.definitions_[_];c.match(/^import\s/)?v.push(c):T.push(c)}return h=super.finish(h),this.isInitialized=!1,this.nameDB_.reset(),(v.join(`
`)+`

`+T.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+h}scrubNakedValue(h){return h+`;
`}quote_(h){return h=h.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/\$/g,"\\$").replace(/'/g,"\\'"),"'"+h+"'"}multiline_quote_(h){return h.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)}scrub_(h,v,T=!1){let _="";if(!h.outputConnection||!h.outputConnection.targetConnection){var c=h.getCommentText();c&&(c=s.wrap$$module$build$src$core$utils$string(c,this.COMMENT_WRAP-3),_=h.getProcedureDef?_+this.prefixLines(c+`
`,"/// "):_+this.prefixLines(c+`
`,"// "));for(let A=0;A<h.inputList.length;A++)h.inputList[A].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(c=h.inputList[A].connection.targetBlock())&&(c=this.allNestedComments(c))&&(_+=this.prefixLines(c,"// "))}return h=h.nextConnection&&h.nextConnection.targetBlock(),T=T?"":this.blockToCode(h),_+v+T}getAdjusted(h,v,T=0,_=!1,c=S.NONE){h.workspace.options.oneBasedIndex&&T--;const A=h.workspace.options.oneBasedIndex?"1":"0";let M=c;return T?M=S.ADDITIVE:_&&(M=S.UNARY_PREFIX),h=this.valueToCode(h,v,M)||A,T===0&&!_?h:s.isNumber$$module$build$src$core$utils$string(h)?(h=String(Number(h)+T),_&&(h=String(-Number(h))),h):(T>0?h=`${h} + ${T}`:T<0&&(h=`${h} - ${-T}`),_&&(h=T?`-(${h})`:`-${h}`),Math.floor(c)>=Math.floor(M)&&(h=`(${h})`),h)}},j={};j.lists_create_empty=l,j.lists_create_with=f,j.lists_getIndex=w,j.lists_getSublist=k,j.lists_indexOf=x,j.lists_isEmpty=N,j.lists_length=g,j.lists_repeat=E,j.lists_reverse=z,j.lists_setIndex=R,j.lists_sort=B,j.lists_split=P;var $e={};$e.controls_if=m,$e.controls_ifelse=m,$e.logic_boolean=L,$e.logic_compare=d,$e.logic_negate=F,$e.logic_null=G,$e.logic_operation=y,$e.logic_ternary=p;var Ne={};Ne.controls_flow_statements=K,Ne.controls_for=V,Ne.controls_forEach=C,Ne.controls_repeat=I,Ne.controls_repeat_ext=I,Ne.controls_whileUntil=D;var Ie={};Ie.math_arithmetic=re,Ie.math_atan2=ke,Ie.math_change=Ae,Ie.math_constant=Pe,Ie.math_constrain=be,Ie.math_modulo=ve,Ie.math_number=X,Ie.math_number_property=Te,Ie.math_on_list=we,Ie.math_random_float=Be,Ie.math_random_int=Xe,Ie.math_round=se,Ie.math_single=se,Ie.math_trig=se;var Ve={};Ve.procedures_callnoreturn=ue,Ve.procedures_callreturn=te,Ve.procedures_defnoreturn=ce,Ve.procedures_defreturn=ce,Ve.procedures_ifreturn=me;var le={};le.text=Le,le.text_append=Fe,le.text_changeCase=Ue,le.text_charAt=he,le.text_count=ht,le.text_getSubstring=Se,le.text_indexOf=De,le.text_isEmpty=de,le.text_join=Qe,le.text_length=lt,le.text_print=et,le.text_prompt=tt,le.text_prompt_ext=tt,le.text_replace=nt,le.text_reverse=st,le.text_trim=He;var O={};O.variables_get=ot,O.variables_set=it;var H={};H.variables_get_dynamic=ot,H.variables_set_dynamic=it;var J=new ae;J.addReservedWords("Html,Math");var ne=Object.assign({},j,$e,Ne,Ie,Ve,le,O,H);for(const h in ne)J.forBlock[h]=ne[h];var ye={};return ye.DartGenerator=ae,ye.Order=S,ye.dartGenerator=J,ye.__namespace__=s,ye})})(dart_compressed$1)),dart_compressed$1.exports}var lua_compressed$1={exports:{}},lua_compressed=lua_compressed$1.exports,hasRequiredLua_compressed;function requireLua_compressed(){return hasRequiredLua_compressed||(hasRequiredLua_compressed=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(lua_compressed,function(o){var s=o.__namespace__,l=function(_,c){return["{}",ae.HIGH]},f=function(_,c){const A=Array(_.itemCount_);for(let M=0;M<_.itemCount_;M++)A[M]=c.valueToCode(_,"ADD"+M,ae.NONE)||"nil";return["{"+A.join(", ")+"}",ae.HIGH]},E=function(_,c){const A=c.provideFunction_("create_list_repeated",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(item, count)
  local t = {}
  for i = 1, count do
    table.insert(t, item)
  end
  return t
end
  `),M=c.valueToCode(_,"ITEM",ae.NONE)||"nil";return _=c.valueToCode(_,"NUM",ae.NONE)||"0",[A+"("+M+", "+_+")",ae.HIGH]},g=function(_,c){return["#"+(c.valueToCode(_,"VALUE",ae.UNARY)||"{}"),ae.UNARY]},N=function(_,c){return["#"+(c.valueToCode(_,"VALUE",ae.UNARY)||"{}")+" == 0",ae.RELATIONAL]},x=function(_,c){const A=c.valueToCode(_,"FIND",ae.NONE)||"''",M=c.valueToCode(_,"VALUE",ae.NONE)||"{}";return[(_.getFieldValue("END")==="FIRST"?c.provideFunction_("first_index",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t, elem)
  for k, v in ipairs(t) do
    if v == elem then
      return k
    end
  end
  return 0
end
`):c.provideFunction_("last_index",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t, elem)
  for i = #t, 1, -1 do
    if t[i] == elem then
      return i
    end
  end
  return 0
end
`))+"("+M+", "+A+")",ae.HIGH]},w=function(_,c){var A=_.getFieldValue("MODE")||"GET",M=_.getFieldValue("WHERE")||"FROM_START";const Y=c.valueToCode(_,"VALUE",ae.HIGH)||"({})";return M!=="LAST"&&M!=="FROM_END"&&M!=="RANDOM"||Y.match(/^\w+$/)?(c=c.valueToCode(_,"AT",A==="GET"&&M==="FROM_END"?ae.ADDITIVE:ae.NONE)||"1",c=$e(Y,M,c),A==="GET"?[Y+"["+c+"]",ae.HIGH]:(M="table.remove("+Y+", "+c+")",A==="GET_REMOVE"?[M,ae.HIGH]:M+`
`)):A==="REMOVE"?(A=c.valueToCode(_,"AT",M==="FROM_END"?ae.ADDITIVE:ae.NONE)||"1",c=c.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),A=$e(c,M,A),c+" = "+Y+`
table.remove(`+c+", "+A+`)
`):(_=c.valueToCode(_,"AT",ae.NONE)||"1",[(A==="GET"?c.provideFunction_("list_get_"+M.toLowerCase(),["function "+c.FUNCTION_NAME_PLACEHOLDER_+"(t"+(M==="FROM_END"||M==="FROM_START"?", at)":")"),"  return t["+$e("t",M,"at")+"]","end"]):c.provideFunction_("list_remove_"+M.toLowerCase(),["function "+c.FUNCTION_NAME_PLACEHOLDER_+"(t"+(M==="FROM_END"||M==="FROM_START"?", at)":")"),"  return table.remove(t, "+$e("t",M,"at")+")","end"]))+"("+Y+(M==="FROM_END"||M==="FROM_START"?", "+_:"")+")",ae.HIGH])},R=function(_,c){let A=c.valueToCode(_,"LIST",ae.HIGH)||"{}";const M=_.getFieldValue("MODE")||"SET",Y=_.getFieldValue("WHERE")||"FROM_START",q=c.valueToCode(_,"AT",ae.ADDITIVE)||"1";_=c.valueToCode(_,"TO",ae.NONE)||"Nil";let ee="";return Y!=="LAST"&&Y!=="FROM_END"&&Y!=="RANDOM"||A.match(/^\w+$/)||(c=c.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),ee=c+" = "+A+`
`,A=c),ee=M==="SET"?ee+(A+"["+$e(A,Y,q)+"] = "+_):ee+("table.insert("+A+", "+($e(A,Y,q)+(Y==="LAST"?" + 1":""))+", "+_+")"),ee+`
`},k=function(_,c){const A=c.valueToCode(_,"LIST",ae.NONE)||"{}",M=_.getFieldValue("WHERE1"),Y=_.getFieldValue("WHERE2"),q=c.valueToCode(_,"AT1",ae.NONE)||"1";_=c.valueToCode(_,"AT2",ae.NONE)||"1";const ee=M==="FROM_END"||M==="FROM_START"?", at1":"",xe=Y==="FROM_END"||Y==="FROM_START"?", at2":"";return[c.provideFunction_("list_sublist_"+M.toLowerCase()+"_"+Y.toLowerCase(),`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(source${ee}${xe})
  local t = {}
  local start = ${$e("source",M,"at1")}
  local finish = ${$e("source",Y,"at2")}
  for i = start, finish do
    table.insert(t, source[i])
  end
  return t
end
`)+"("+A+(M==="FROM_END"||M==="FROM_START"?", "+q:"")+(Y==="FROM_END"||Y==="FROM_START"?", "+_:"")+")",ae.HIGH]},B=function(_,c){const A=c.valueToCode(_,"LIST",ae.NONE)||"{}",M=_.getFieldValue("DIRECTION")==="1"?1:-1;return _=_.getFieldValue("TYPE"),[c.provideFunction_("list_sort",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(list, typev, direction)
  local t = {}
  for n,v in pairs(list) do table.insert(t, v) end
  local compareFuncs = {
    NUMERIC = function(a, b)
      return (tonumber(tostring(a)) or 0)
          < (tonumber(tostring(b)) or 0) end,
    TEXT = function(a, b)
      return tostring(a) < tostring(b) end,
    IGNORE_CASE = function(a, b)
      return string.lower(tostring(a)) < string.lower(tostring(b)) end
  }
  local compareTemp = compareFuncs[typev]
  local compare = compareTemp
  if direction == -1
  then compare = function(a, b) return compareTemp(b, a) end
  end
  table.sort(t, compare)
  return t
end
`)+"("+A+',"'+_+'", '+M+")",ae.HIGH]},P=function(_,c){let A=c.valueToCode(_,"INPUT",ae.NONE);const M=c.valueToCode(_,"DELIM",ae.NONE)||"''";if(_=_.getFieldValue("MODE"),_==="SPLIT")A||(A="''"),c=c.provideFunction_("list_string_split",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(input, delim)
  local t = {}
  local pos = 1
  while true do
    next_delim = string.find(input, delim, pos)
    if next_delim == nil then
      table.insert(t, string.sub(input, pos))
      break
    else
      table.insert(t, string.sub(input, pos, next_delim-1))
      pos = next_delim + #delim
    end
  end
  return t
end
`);else if(_==="JOIN")A||(A="{}"),c="table.concat";else throw Error("Unknown mode: "+_);return[c+"("+A+", "+M+")",ae.HIGH]},z=function(_,c){return _=c.valueToCode(_,"LIST",ae.NONE)||"{}",[c.provideFunction_("list_reverse",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(input)
  local reversed = {}
  for i = #input, 1, -1 do
    table.insert(reversed, input[i])
  end
  return reversed
end
`)+"("+_+")",ae.HIGH]},m=function(_,c){var A=0;let M="";c.STATEMENT_PREFIX&&(M+=c.injectId(c.STATEMENT_PREFIX,_));do{const Y=c.valueToCode(_,"IF"+A,ae.NONE)||"false";let q=c.statementToCode(_,"DO"+A);c.STATEMENT_SUFFIX&&(q=c.prefixLines(c.injectId(c.STATEMENT_SUFFIX,_),c.INDENT)+q),M+=(A>0?"else":"")+"if "+Y+` then
`+q,A++}while(_.getInput("IF"+A));return(_.getInput("ELSE")||c.STATEMENT_SUFFIX)&&(A=_.getInput("ELSE")?c.statementToCode(_,"ELSE"):"",c.STATEMENT_SUFFIX&&(A=c.prefixLines(c.injectId(c.STATEMENT_SUFFIX,_),c.INDENT)+A),M+=`else
`+A),M+`end
`},d=function(_,c){const A={EQ:"==",NEQ:"~=",LT:"<",LTE:"<=",GT:">",GTE:">="}[_.getFieldValue("OP")],M=c.valueToCode(_,"A",ae.RELATIONAL)||"0";return _=c.valueToCode(_,"B",ae.RELATIONAL)||"0",[M+" "+A+" "+_,ae.RELATIONAL]},y=function(_,c){const A=_.getFieldValue("OP")==="AND"?"and":"or",M=A==="and"?ae.AND:ae.OR;let Y=c.valueToCode(_,"A",M);return _=c.valueToCode(_,"B",M),Y||_?(c=A==="and"?"true":"false",Y||(Y=c),_||(_=c)):_=Y="false",[Y+" "+A+" "+_,M]},F=function(_,c){return["not "+(c.valueToCode(_,"BOOL",ae.UNARY)||"true"),ae.UNARY]},L=function(_,c){return[_.getFieldValue("BOOL")==="TRUE"?"true":"false",ae.ATOMIC]},G=function(_,c){return["nil",ae.ATOMIC]},p=function(_,c){const A=c.valueToCode(_,"IF",ae.AND)||"false",M=c.valueToCode(_,"THEN",ae.AND)||"nil";return _=c.valueToCode(_,"ELSE",ae.OR)||"nil",[A+" and "+M+" or "+_,ae.OR]},I=function(_,c){return _.includes(Ve)?_+c+`::continue::
`:_},D=function(_,c){let A;A=_.getField("TIMES")?String(Number(_.getFieldValue("TIMES"))):c.valueToCode(_,"TIMES",ae.NONE)||"0",A=s.isNumber$$module$build$src$core$utils$string(A)?parseInt(A,10):"math.floor("+A+")";let M=c.statementToCode(_,"DO");return M=c.addLoopTrap(M,_),M=I(M,c.INDENT),"for "+c.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE)+" = 1, "+A+` do
`+M+`end
`},V=function(_,c){const A=_.getFieldValue("MODE")==="UNTIL";let M=c.valueToCode(_,"BOOL",A?ae.UNARY:ae.NONE)||"false",Y=c.statementToCode(_,"DO");return Y=c.addLoopTrap(Y,_),Y=I(Y,c.INDENT),A&&(M="not "+M),"while "+M+` do
`+Y+`end
`},C=function(_,c){const A=c.getVariableName(_.getFieldValue("VAR")),M=c.valueToCode(_,"FROM",ae.NONE)||"0",Y=c.valueToCode(_,"TO",ae.NONE)||"0",q=c.valueToCode(_,"BY",ae.NONE)||"1";let ee=c.statementToCode(_,"DO");ee=c.addLoopTrap(ee,_),ee=I(ee,c.INDENT),_="";let xe;return s.isNumber$$module$build$src$core$utils$string(M)&&s.isNumber$$module$build$src$core$utils$string(Y)&&s.isNumber$$module$build$src$core$utils$string(q)?xe=(Number(M)<=Number(Y)?"":"-")+Math.abs(Number(q)):(_="",xe=c.nameDB_.getDistinctName(A+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),_+=xe+" = ",_=s.isNumber$$module$build$src$core$utils$string(q)?_+(Math.abs(q)+`
`):_+("math.abs("+q+`)
`),_=_+("if ("+M+") > ("+Y+`) then
`)+(c.INDENT+xe+" = -"+xe+`
`),_+=`end
`),_+("for "+A+" = "+M+", "+Y+", "+xe)+(` do
`+ee+`end
`)},K=function(_,c){const A=c.getVariableName(_.getFieldValue("VAR")),M=c.valueToCode(_,"LIST",ae.NONE)||"{}";let Y=c.statementToCode(_,"DO");return Y=c.addLoopTrap(Y,_),Y=I(Y,c.INDENT),"for _, "+A+" in ipairs("+M+`) do 
`+Y+`end
`},X=function(_,c){let A="";if(c.STATEMENT_PREFIX&&(A+=c.injectId(c.STATEMENT_PREFIX,_)),c.STATEMENT_SUFFIX&&(A+=c.injectId(c.STATEMENT_SUFFIX,_)),c.STATEMENT_PREFIX){const M=_.getSurroundLoop();M&&!M.suppressPrefixSuffix&&(A+=c.injectId(c.STATEMENT_PREFIX,M))}switch(_.getFieldValue("FLOW")){case"BREAK":return A+`break
`;case"CONTINUE":return A+Ve}throw Error("Unknown flow statement.")},re=function(_,c){return _=Number(_.getFieldValue("NUM")),[String(_),_<0?ae.UNARY:ae.ATOMIC]},se=function(_,c){var A={ADD:[" + ",ae.ADDITIVE],MINUS:[" - ",ae.ADDITIVE],MULTIPLY:[" * ",ae.MULTIPLICATIVE],DIVIDE:[" / ",ae.MULTIPLICATIVE],POWER:[" ^ ",ae.EXPONENTIATION]}[_.getFieldValue("OP")];const M=A[0];A=A[1];const Y=c.valueToCode(_,"A",A)||"0";return _=c.valueToCode(_,"B",A)||"0",[Y+M+_,A]},Pe=function(_,c){var A=_.getFieldValue("OP");if(A==="NEG")return _=c.valueToCode(_,"NUM",ae.UNARY)||"0",["-"+_,ae.UNARY];if(A==="POW10")return _=c.valueToCode(_,"NUM",ae.EXPONENTIATION)||"0",["10 ^ "+_,ae.EXPONENTIATION];switch(_=A==="ROUND"?c.valueToCode(_,"NUM",ae.ADDITIVE)||"0":c.valueToCode(_,"NUM",ae.NONE)||"0",A){case"ABS":A="math.abs("+_+")";break;case"ROOT":A="math.sqrt("+_+")";break;case"LN":A="math.log("+_+")";break;case"LOG10":A="math.log("+_+", 10)";break;case"EXP":A="math.exp("+_+")";break;case"ROUND":A="math.floor("+_+" + .5)";break;case"ROUNDUP":A="math.ceil("+_+")";break;case"ROUNDDOWN":A="math.floor("+_+")";break;case"SIN":A="math.sin(math.rad("+_+"))";break;case"COS":A="math.cos(math.rad("+_+"))";break;case"TAN":A="math.tan(math.rad("+_+"))";break;case"ASIN":A="math.deg(math.asin("+_+"))";break;case"ACOS":A="math.deg(math.acos("+_+"))";break;case"ATAN":A="math.deg(math.atan("+_+"))";break;default:throw Error("Unknown math operator: "+A)}return[A,ae.HIGH]},Te=function(_,c){return{PI:["math.pi",ae.HIGH],E:["math.exp(1)",ae.HIGH],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",ae.MULTIPLICATIVE],SQRT2:["math.sqrt(2)",ae.HIGH],SQRT1_2:["math.sqrt(1 / 2)",ae.HIGH],INFINITY:["math.huge",ae.HIGH]}[_.getFieldValue("CONSTANT")]},Ae=function(_,c){var A={EVEN:[" % 2 == 0",ae.MULTIPLICATIVE,ae.RELATIONAL],ODD:[" % 2 == 1",ae.MULTIPLICATIVE,ae.RELATIONAL],WHOLE:[" % 1 == 0",ae.MULTIPLICATIVE,ae.RELATIONAL],POSITIVE:[" > 0",ae.RELATIONAL,ae.RELATIONAL],NEGATIVE:[" < 0",ae.RELATIONAL,ae.RELATIONAL],DIVISIBLE_BY:[null,ae.MULTIPLICATIVE,ae.RELATIONAL],PRIME:[null,ae.NONE,ae.HIGH]};const M=_.getFieldValue("PROPERTY"),[Y,q,ee]=A[M];if(A=c.valueToCode(_,"NUMBER_TO_CHECK",q)||"0",M==="PRIME")_=c.provideFunction_("math_isPrime",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(n)
  -- https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if n == 2 or n == 3 then
    return true
  end
  -- False if n is NaN, negative, is 1, or not whole.
  -- And false if n is divisible by 2 or 3.
  if not(n > 1) or n % 1 ~= 0 or n % 2 == 0 or n % 3 == 0 then
    return false
  end
  -- Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x = 6, math.sqrt(n) + 1.5, 6 do
    if n % (x - 1) == 0 or n % (x + 1) == 0 then
      return false
    end
  end
  return true
end
`)+"("+A+")";else if(M==="DIVISIBLE_BY"){if(_=c.valueToCode(_,"DIVISOR",ae.MULTIPLICATIVE)||"0",_==="0")return["nil",ae.ATOMIC];_=A+" % "+_+" == 0"}else _=A+Y;return[_,ee]},we=function(_,c){const A=c.valueToCode(_,"DELTA",ae.ADDITIVE)||"0";return _=c.getVariableName(_.getFieldValue("VAR")),_+" = "+_+" + "+A+`
`},ve=function(_,c){function A(){return c.provideFunction_("math_sum",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  local result = 0
  for _, v in ipairs(t) do
    result = result + v
  end
  return result
end
`)}var M=_.getFieldValue("OP");switch(_=c.valueToCode(_,"LIST",ae.NONE)||"{}",M){case"SUM":M=A();break;case"MIN":M=c.provideFunction_("math_min",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  if #t == 0 then
    return 0
  end
  local result = math.huge
  for _, v in ipairs(t) do
    if v < result then
      result = v
    end
  end
  return result
end
`);break;case"AVERAGE":M=c.provideFunction_("math_average",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  if #t == 0 then
    return 0
  end
  return ${A()}(t) / #t
end
`);break;case"MAX":M=c.provideFunction_("math_max",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  if #t == 0 then
    return 0
  end
  local result = -math.huge
  for _, v in ipairs(t) do
    if v > result then
      result = v
    end
  end
  return result
end
`);break;case"MEDIAN":M=c.provideFunction_("math_median",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  -- Source: http://lua-users.org/wiki/SimpleStats
  if #t == 0 then
    return 0
  end
  local temp = {}
  for _, v in ipairs(t) do
    if type(v) == 'number' then
      table.insert(temp, v)
    end
  end
  table.sort(temp)
  if #temp % 2 == 0 then
    return (temp[#temp / 2] + temp[(#temp / 2) + 1]) / 2
  else
    return temp[math.ceil(#temp / 2)]
  end
end
`);break;case"MODE":M=c.provideFunction_("math_modes",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  -- Source: http://lua-users.org/wiki/SimpleStats
  local counts = {}
  for _, v in ipairs(t) do
    if counts[v] == nil then
      counts[v] = 1
    else
      counts[v] = counts[v] + 1
    end
  end
  local biggestCount = 0
  for _, v  in pairs(counts) do
    if v > biggestCount then
      biggestCount = v
    end
  end
  local temp = {}
  for k, v in pairs(counts) do
    if v == biggestCount then
      table.insert(temp, k)
    end
  end
  return temp
end
`);break;case"STD_DEV":M=c.provideFunction_("math_standard_deviation",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  local m
  local vm
  local total = 0
  local count = 0
  local result
  m = #t == 0 and 0 or ${A()}(t) / #t
  for _, v in ipairs(t) do
    if type(v) == 'number' then
      vm = v - m
      total = total + (vm * vm)
      count = count + 1
    end
  end
  result = math.sqrt(total / (count-1))
  return result
end
`);break;case"RANDOM":M=c.provideFunction_("math_random_list",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  if #t == 0 then
    return nil
  end
  return t[math.random(#t)]
end
`);break;default:throw Error("Unknown operator: "+M)}return[M+"("+_+")",ae.HIGH]},be=function(_,c){const A=c.valueToCode(_,"DIVIDEND",ae.MULTIPLICATIVE)||"0";return _=c.valueToCode(_,"DIVISOR",ae.MULTIPLICATIVE)||"0",[A+" % "+_,ae.MULTIPLICATIVE]},Xe=function(_,c){const A=c.valueToCode(_,"VALUE",ae.NONE)||"0",M=c.valueToCode(_,"LOW",ae.NONE)||"-math.huge";return _=c.valueToCode(_,"HIGH",ae.NONE)||"math.huge",["math.min(math.max("+A+", "+M+"), "+_+")",ae.HIGH]},Be=function(_,c){const A=c.valueToCode(_,"FROM",ae.NONE)||"0";return _=c.valueToCode(_,"TO",ae.NONE)||"0",["math.random("+A+", "+_+")",ae.HIGH]},ke=function(_,c){return["math.random()",ae.HIGH]},ce=function(_,c){const A=c.valueToCode(_,"X",ae.NONE)||"0";return["math.deg(math.atan2("+(c.valueToCode(_,"Y",ae.NONE)||"0")+", "+A+"))",ae.HIGH]},te=function(_,c){const A=c.getProcedureName(_.getFieldValue("NAME"));var M="";c.STATEMENT_PREFIX&&(M+=c.injectId(c.STATEMENT_PREFIX,_)),c.STATEMENT_SUFFIX&&(M+=c.injectId(c.STATEMENT_SUFFIX,_)),M&&(M=c.prefixLines(M,c.INDENT));let Y="";c.INFINITE_LOOP_TRAP&&(Y=c.prefixLines(c.injectId(c.INFINITE_LOOP_TRAP,_),c.INDENT));let q="";_.getInput("STACK")&&(q=c.statementToCode(_,"STACK"));let ee="";_.getInput("RETURN")&&(ee=c.valueToCode(_,"RETURN",ae.NONE)||"");let xe="";q&&ee&&(xe=M),ee?ee=c.INDENT+"return "+ee+`
`:q||(q="");const ze=[],at=_.getVars();for(let Je=0;Je<at.length;Je++)ze[Je]=c.getVariableName(at[Je]);return M="function "+A+"("+ze.join(", ")+`)
`+M+Y+q+xe+ee+`end
`,M=c.scrub_(_,M),c.definitions_["%"+A]=M,null},ue=function(_,c){const A=c.getProcedureName(_.getFieldValue("NAME")),M=[],Y=_.getVars();for(let q=0;q<Y.length;q++)M[q]=c.valueToCode(_,"ARG"+q,ae.NONE)||"nil";return[A+"("+M.join(", ")+")",ae.HIGH]},me=function(_,c){return c.forBlock.procedures_callreturn(_,c)[0]+`
`},Le=function(_,c){let A="if "+(c.valueToCode(_,"CONDITION",ae.NONE)||"false")+` then
`;return c.STATEMENT_SUFFIX&&(A+=c.prefixLines(c.injectId(c.STATEMENT_SUFFIX,_),c.INDENT)),_.hasReturnValue_?(_=c.valueToCode(_,"VALUE",ae.NONE)||"nil",A+=c.INDENT+"return "+_+`
`):A+=c.INDENT+`return
`,A+`end
`},Qe=function(_,c){return[c.quote_(_.getFieldValue("TEXT")),ae.ATOMIC]},Fe=function(_,c){if(_.itemCount_===0)return["''",ae.ATOMIC];if(_.itemCount_===1)return["tostring("+(c.valueToCode(_,"ADD0",ae.NONE)||"''")+")",ae.HIGH];if(_.itemCount_===2){var A=c.valueToCode(_,"ADD0",ae.CONCATENATION)||"''";return _=c.valueToCode(_,"ADD1",ae.CONCATENATION)||"''",[A+" .. "+_,ae.CONCATENATION]}A=[];for(let M=0;M<_.itemCount_;M++)A[M]=c.valueToCode(_,"ADD"+M,ae.NONE)||"''";return["table.concat({"+A.join(", ")+"})",ae.HIGH]},lt=function(_,c){const A=c.getVariableName(_.getFieldValue("VAR"));return _=c.valueToCode(_,"TEXT",ae.CONCATENATION)||"''",A+" = "+A+" .. "+_+`
`},de=function(_,c){return["#"+(c.valueToCode(_,"VALUE",ae.UNARY)||"''"),ae.UNARY]},De=function(_,c){return["#"+(c.valueToCode(_,"VALUE",ae.UNARY)||"''")+" == 0",ae.RELATIONAL]},he=function(_,c){const A=c.valueToCode(_,"FIND",ae.NONE)||"''",M=c.valueToCode(_,"VALUE",ae.NONE)||"''";return[(_.getFieldValue("END")==="FIRST"?c.provideFunction_("firstIndexOf",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str, substr)
  local i = string.find(str, substr, 1, true)
  if i == nil then
    return 0
  end
  return i
end
`):c.provideFunction_("lastIndexOf",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str, substr)
  local i = string.find(string.reverse(str), string.reverse(substr), 1, true)
  if i then
    return #str + 2 - i - #substr
  end
  return 0
end
`))+"("+M+", "+A+")",ae.HIGH]},Se=function(_,c){var A=_.getFieldValue("WHERE")||"FROM_START";const M=c.valueToCode(_,"VALUE",ae.NONE)||"''";if(A==="RANDOM")c=c.provideFunction_("text_random_letter",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str)
  local index = math.random(string.len(str))
  return string.sub(str, index, index)
end
`)+"("+M+")";else{if(A==="FIRST")A="1";else if(A==="LAST")A="-1";else if(_=c.valueToCode(_,"AT",A==="FROM_END"?ae.UNARY:ae.NONE)||"1",A==="FROM_START")A=_;else if(A==="FROM_END")A="-"+_;else throw Error("Unhandled option (text_charAt).");c=A.match(/^-?\w*$/)?"string.sub("+M+", "+A+", "+A+")":c.provideFunction_("text_char_at",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str, index)
  return string.sub(str, index, index)
end
`)+"("+M+", "+A+")"}return[c,ae.HIGH]},Ue=function(_,c){const A=c.valueToCode(_,"STRING",ae.NONE)||"''";var M=_.getFieldValue("WHERE1"),Y=c.valueToCode(_,"AT1",M==="FROM_END"?ae.UNARY:ae.NONE)||"1";if(M==="FIRST")M=1;else if(M==="FROM_START")M=Y;else if(M==="FROM_END")M="-"+Y;else throw Error("Unhandled option (text_getSubstring)");if(Y=_.getFieldValue("WHERE2"),_=c.valueToCode(_,"AT2",Y==="FROM_END"?ae.UNARY:ae.NONE)||"1",Y==="LAST")_=-1;else if(Y!=="FROM_START")if(Y==="FROM_END")_="-"+_;else throw Error("Unhandled option (text_getSubstring)");return["string.sub("+A+", "+M+", "+_+")",ae.HIGH]},He=function(_,c){const A=_.getFieldValue("CASE");_=c.valueToCode(_,"TEXT",ae.NONE)||"''";let M;return A==="UPPERCASE"?M="string.upper":A==="LOWERCASE"?M="string.lower":A==="TITLECASE"&&(M=c.provideFunction_("text_titlecase",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str)
  local buf = {}
  local inWord = false
  for i = 1, #str do
    local c = string.sub(str, i, i)
    if inWord then
      table.insert(buf, string.lower(c))
      if string.find(c, "%s") then
        inWord = false
      end
    else
      table.insert(buf, string.upper(c))
      inWord = true
    end
  end
  return table.concat(buf)
end
`)),[M+"("+_+")",ae.HIGH]},et=function(_,c){const A={LEFT:"^%s*(,-)",RIGHT:"(.-)%s*$",BOTH:"^%s*(.-)%s*$"}[_.getFieldValue("MODE")];return["string.gsub("+(c.valueToCode(_,"TEXT",ae.NONE)||"''")+', "'+A+'", "%1")',ae.HIGH]},tt=function(_,c){return"print("+(c.valueToCode(_,"TEXT",ae.NONE)||"''")+`)
`},ht=function(_,c){let A;return A=_.getField("TEXT")?c.quote_(_.getFieldValue("TEXT")):c.valueToCode(_,"TEXT",ae.NONE)||"''",c=c.provideFunction_("text_prompt",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(msg)
  io.write(msg)
  io.flush()
  return io.read()
end
`)+"("+A+")",_.getFieldValue("TYPE")==="NUMBER"&&(c="tonumber("+c+", 10)"),[c,ae.HIGH]},nt=function(_,c){const A=c.valueToCode(_,"TEXT",ae.NONE)||"''";return _=c.valueToCode(_,"SUB",ae.NONE)||"''",[c.provideFunction_("text_count",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle)
  if #needle == 0 then
    return #haystack + 1
  end
  local i = 1
  local count = 0
  while true do
    i = string.find(haystack, needle, i, true)
    if i == nil then
      break
    end
    count = count + 1
    i = i + #needle
  end
  return count
end
`)+"("+A+", "+_+")",ae.HIGH]},st=function(_,c){const A=c.valueToCode(_,"TEXT",ae.NONE)||"''",M=c.valueToCode(_,"FROM",ae.NONE)||"''";return _=c.valueToCode(_,"TO",ae.NONE)||"''",[c.provideFunction_("text_replace",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement)
  local buf = {}
  local i = 1
  while i <= #haystack do
    if string.sub(haystack, i, i + #needle - 1) == needle then
      for j = 1, #replacement do
        table.insert(buf, string.sub(replacement, j, j))
      end
      i = i + #needle
    else
      table.insert(buf, string.sub(haystack, i, i))
      i = i + 1
    end
  end
  return table.concat(buf)
end
`)+"("+A+", "+M+", "+_+")",ae.HIGH]},ot=function(_,c){return["string.reverse("+(c.valueToCode(_,"TEXT",ae.NONE)||"''")+")",ae.HIGH]},it=function(_,c){return[c.getVariableName(_.getFieldValue("VAR")),ae.ATOMIC]},S=function(_,c){const A=c.valueToCode(_,"VALUE",ae.NONE)||"0";return c.getVariableName(_.getFieldValue("VAR"))+" = "+A+`
`},ae;(function(_){_[_.ATOMIC=0]="ATOMIC",_[_.HIGH=1]="HIGH",_[_.EXPONENTIATION=2]="EXPONENTIATION",_[_.UNARY=3]="UNARY",_[_.MULTIPLICATIVE=4]="MULTIPLICATIVE",_[_.ADDITIVE=5]="ADDITIVE",_[_.CONCATENATION=6]="CONCATENATION",_[_.RELATIONAL=7]="RELATIONAL",_[_.AND=8]="AND",_[_.OR=9]="OR",_[_.NONE=99]="NONE"})(ae||(ae={}));var j=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(_="Lua"){super(_),this.isInitialized=!1;for(const c in ae)_=ae[c],typeof _!="string"&&(this["ORDER_"+c]=_);this.addReservedWords("_,__inext,assert,bit,colors,colours,coroutine,disk,dofile,error,fs,fetfenv,getmetatable,gps,help,io,ipairs,keys,loadfile,loadstring,math,native,next,os,paintutils,pairs,parallel,pcall,peripheral,print,printError,rawequal,rawget,rawset,read,rednet,redstone,rs,select,setfenv,setmetatable,sleep,string,table,term,textutils,tonumber,tostring,turtle,type,unpack,vector,write,xpcall,_VERSION,__indext,HTTP,and,break,do,else,elseif,end,false,for,function,if,in,local,nil,not,or,repeat,return,then,true,until,while,add,sub,mul,div,mod,pow,unm,concat,len,eq,lt,le,index,newindex,call,assert,collectgarbage,dofile,error,_G,getmetatable,inpairs,load,loadfile,next,pairs,pcall,print,rawequal,rawget,rawlen,rawset,select,setmetatable,tonumber,tostring,type,_VERSION,xpcall,require,package,string,table,math,bit32,io,file,os,debug")}init(_){super.init(_),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(_.getVariableMap()),this.nameDB_.populateVariables(_),this.nameDB_.populateProcedures(_),this.isInitialized=!0}finish(_){const c=Object.values(this.definitions_);return _=super.finish(_),this.isInitialized=!1,this.nameDB_.reset(),c.join(`

`)+`


`+_}scrubNakedValue(_){return"local _ = "+_+`
`}quote_(_){return _=_.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+_+"'"}multiline_quote_(_){return _.split(/\n/g).map(this.quote_).join(` .. '\\n' ..
`)}scrub_(_,c,A=!1){let M="";if(!_.outputConnection||!_.outputConnection.targetConnection){var Y=_.getCommentText();Y&&(Y=s.wrap$$module$build$src$core$utils$string(Y,this.COMMENT_WRAP-3),M+=this.prefixLines(Y,"-- ")+`
`);for(let q=0;q<_.inputList.length;q++)_.inputList[q].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Y=_.inputList[q].connection.targetBlock())&&(Y=this.allNestedComments(Y))&&(M+=this.prefixLines(Y,"-- "))}return _=_.nextConnection&&_.nextConnection.targetBlock(),A=A?"":this.blockToCode(_),M+c+A}},$e=function(_,c,A){return c==="FIRST"?"1":c==="FROM_END"?"#"+_+" + 1 - "+A:c==="LAST"?"#"+_:c==="RANDOM"?"math.random(#"+_+")":A},Ne={};Ne.lists_create_empty=l,Ne.lists_create_with=f,Ne.lists_getIndex=w,Ne.lists_getSublist=k,Ne.lists_indexOf=x,Ne.lists_isEmpty=N,Ne.lists_length=g,Ne.lists_repeat=E,Ne.lists_reverse=z,Ne.lists_setIndex=R,Ne.lists_sort=B,Ne.lists_split=P;var Ie={};Ie.controls_if=m,Ie.controls_ifelse=m,Ie.logic_boolean=L,Ie.logic_compare=d,Ie.logic_negate=F,Ie.logic_null=G,Ie.logic_operation=y,Ie.logic_ternary=p;var Ve=`goto continue
`,le={};le.controls_flow_statements=X,le.controls_for=C,le.controls_forEach=K,le.controls_repeat=D,le.controls_repeat_ext=D,le.controls_whileUntil=V;var O={};O.math_arithmetic=se,O.math_atan2=ce,O.math_change=we,O.math_constant=Te,O.math_constrain=Xe,O.math_modulo=be,O.math_number=re,O.math_number_property=Ae,O.math_on_list=ve,O.math_random_float=ke,O.math_random_int=Be,O.math_round=Pe,O.math_single=Pe,O.math_trig=Pe;var H={};H.procedures_callnoreturn=me,H.procedures_callreturn=ue,H.procedures_defnoreturn=te,H.procedures_defreturn=te,H.procedures_ifreturn=Le;var J={};J.text=Qe,J.text_append=lt,J.text_changeCase=He,J.text_charAt=Se,J.text_count=nt,J.text_getSubstring=Ue,J.text_indexOf=he,J.text_isEmpty=De,J.text_join=Fe,J.text_length=de,J.text_print=tt,J.text_prompt=ht,J.text_prompt_ext=ht,J.text_replace=st,J.text_reverse=ot,J.text_trim=et;var ne={};ne.variables_get=it,ne.variables_set=S;var ye={};ye.variables_get_dynamic=it,ye.variables_set_dynamic=S;var h=new j,v=Object.assign({},Ne,Ie,le,O,H,J,ne,ye);for(const _ in v)h.forBlock[_]=v[_];var T={};return T.LuaGenerator=j,T.Order=ae,T.luaGenerator=h,T.__namespace__=s,T})})(lua_compressed$1)),lua_compressed$1.exports}var php_compressed$1={exports:{}},php_compressed=php_compressed$1.exports,hasRequiredPhp_compressed;function requirePhp_compressed(){return hasRequiredPhp_compressed||(hasRequiredPhp_compressed=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(php_compressed,function(o){var s=o.__namespace__,l=function(h,v){return["array()",S.FUNCTION_CALL]},f=function(h,v){const T=Array(h.itemCount_);for(let _=0;_<h.itemCount_;_++)T[_]=v.valueToCode(h,"ADD"+_,S.NONE)||"null";return["array("+T.join(", ")+")",S.FUNCTION_CALL]},E=function(h,v){const T=v.provideFunction_("lists_repeat",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($value, $count) {
  $array = array();
  for ($index = 0; $index < $count; $index++) {
    $array[] = $value;
  }
  return $array;
}
`),_=v.valueToCode(h,"ITEM",S.NONE)||"null";return h=v.valueToCode(h,"NUM",S.NONE)||"0",[T+"("+_+", "+h+")",S.FUNCTION_CALL]},g=function(h,v){const T=v.provideFunction_("length",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($value) {
  if (is_string($value)) {
    return strlen($value);
  } else {
    return count($value);
  }
}
`);return h=v.valueToCode(h,"VALUE",S.NONE)||"''",[T+"("+h+")",S.FUNCTION_CALL]},N=function(h,v){return["empty("+(v.valueToCode(h,"VALUE",S.FUNCTION_CALL)||"array()")+")",S.FUNCTION_CALL]},x=function(h,v){const T=v.valueToCode(h,"FIND",S.NONE)||"''",_=v.valueToCode(h,"VALUE",S.MEMBER)||"[]";let c=" -1",A="";return h.workspace.options.oneBasedIndex&&(c=" 0",A=" + 1"),[(h.getFieldValue("END")==="FIRST"?v.provideFunction_("indexOf",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($haystack, $needle) {
  for ($index = 0; $index < count($haystack); $index++) {
    if ($haystack[$index] == $needle) return $index${A};
  }
  return ${c};
}
`):v.provideFunction_("lastIndexOf",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($haystack, $needle) {
  $last = ${c};
  for ($index = 0; $index < count($haystack); $index++) {
    if ($haystack[$index] == $needle) $last = $index${A};
  }
  return $last;
}
`))+"("+_+", "+T+")",S.FUNCTION_CALL]},w=function(h,v){var T=h.getFieldValue("MODE")||"GET";switch(h.getFieldValue("WHERE")||"FROM_START"){case"FIRST":if(T==="GET")return[(v.valueToCode(h,"VALUE",S.MEMBER)||"array()")+"[0]",S.MEMBER];if(T==="GET_REMOVE")return["array_shift("+(v.valueToCode(h,"VALUE",S.NONE)||"array()")+")",S.FUNCTION_CALL];if(T==="REMOVE")return"array_shift("+(v.valueToCode(h,"VALUE",S.NONE)||"array()")+`);
`;break;case"LAST":if(T==="GET")return["end("+(v.valueToCode(h,"VALUE",S.NONE)||"array()")+")",S.FUNCTION_CALL];if(T==="GET_REMOVE")return["array_pop("+(v.valueToCode(h,"VALUE",S.NONE)||"array()")+")",S.FUNCTION_CALL];if(T==="REMOVE")return"array_pop("+(v.valueToCode(h,"VALUE",S.NONE)||"array()")+`);
`;break;case"FROM_START":var _=v.getAdjusted(h,"AT");if(T==="GET")return[(v.valueToCode(h,"VALUE",S.MEMBER)||"array()")+"["+_+"]",S.MEMBER];if(T==="GET_REMOVE")return["array_splice("+(v.valueToCode(h,"VALUE",S.NONE)||"array()")+", "+_+", 1)[0]",S.FUNCTION_CALL];if(T==="REMOVE")return"array_splice("+(v.valueToCode(h,"VALUE",S.NONE)||"array()")+", "+_+`, 1);
`;break;case"FROM_END":if(T==="GET")return T=v.valueToCode(h,"VALUE",S.NONE)||"array()",v=v.getAdjusted(h,"AT",1,!0),["array_slice("+T+", "+v+", 1)[0]",S.FUNCTION_CALL];if(T==="GET_REMOVE"||T==="REMOVE"){if(_=v.valueToCode(h,"VALUE",S.NONE)||"array()",v=v.getAdjusted(h,"AT",1,!1,S.SUBTRACTION),v="array_splice("+_+", count("+_+") - "+v+", 1)[0]",T==="GET_REMOVE")return[v,S.FUNCTION_CALL];if(T==="REMOVE")return v+`;
`}break;case"RANDOM":if(h=v.valueToCode(h,"VALUE",S.NONE)||"array()",T==="GET")return[v.provideFunction_("lists_get_random_item",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($list) {
  return $list[rand(0,count($list)-1)];
}
`)+"("+h+")",S.FUNCTION_CALL];if(T==="GET_REMOVE")return[v.provideFunction_("lists_get_remove_random_item",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(&$list) {
  $x = rand(0,count($list)-1);
  unset($list[$x]);
  return array_values($list);
}
`)+"("+h+")",S.FUNCTION_CALL];if(T==="REMOVE")return v.provideFunction_("lists_remove_random_item",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(&$list) {
  unset($list[rand(0,count($list)-1)]);
}
`)+"("+h+`);
`}throw Error("Unhandled combination (lists_getIndex).")},R=function(h,v){const T=h.getFieldValue("MODE")||"GET";var _=h.getFieldValue("WHERE")||"FROM_START";const c=v.valueToCode(h,"TO",S.ASSIGNMENT)||"null";switch(_){case"FIRST":if(T==="SET")return(v.valueToCode(h,"LIST",S.MEMBER)||"array()")+"[0] = "+c+`;
`;if(T==="INSERT")return"array_unshift("+(v.valueToCode(h,"LIST",S.NONE)||"array()")+", "+c+`);
`;break;case"LAST":if(h=v.valueToCode(h,"LIST",S.NONE)||"array()",T==="SET")return v.provideFunction_("lists_set_last_item",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(&$list, $value) {
  $list[count($list) - 1] = $value;
}
`)+"("+h+", "+c+`);
`;if(T==="INSERT")return"array_push("+h+", "+c+`);
`;break;case"FROM_START":if(_=v.getAdjusted(h,"AT"),T==="SET")return(v.valueToCode(h,"LIST",S.MEMBER)||"array()")+"["+_+"] = "+c+`;
`;if(T==="INSERT")return"array_splice("+(v.valueToCode(h,"LIST",S.NONE)||"array()")+", "+_+", 0, "+c+`);
`;break;case"FROM_END":if(_=v.valueToCode(h,"LIST",S.NONE)||"array()",h=v.getAdjusted(h,"AT",1),T==="SET")return v.provideFunction_("lists_set_from_end",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(&$list, $at, $value) {
  $list[count($list) - $at] = $value;
}
`)+"("+_+", "+h+", "+c+`);
`;if(T==="INSERT")return v.provideFunction_("lists_insert_from_end",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(&$list, $at, $value) {
  return array_splice($list, count($list) - $at, 0, $value);
}
`)+"("+_+", "+h+", "+c+`);
`;break;case"RANDOM":if(h=v.valueToCode(h,"LIST",S.REFERENCE)||"array()",h.match(/^\$\w+$/))_="";else{_=v.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE);var A=_+" = &"+h+`;
`;h=_,_=A}if(v=v.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),_+=v+" = rand(0, count("+h+`)-1);
`,T==="SET")return _+(h+"["+v+"] = "+c+`;
`);if(T==="INSERT")return _+("array_splice("+h+", "+v+", 0, "+c+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},k=function(h,v){var T=v.valueToCode(h,"LIST",S.NONE)||"array()",_=h.getFieldValue("WHERE1");const c=h.getFieldValue("WHERE2");if(_!=="FIRST"||c!=="LAST")if(T.match(/^\$\w+$/)||_!=="FROM_END"&&c==="FROM_START"){switch(_){case"FROM_START":_=v.getAdjusted(h,"AT1");break;case"FROM_END":_=v.getAdjusted(h,"AT1",1,!1,S.SUBTRACTION),_="count("+T+") - "+_;break;case"FIRST":_="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":v=v.getAdjusted(h,"AT2",0,!1,S.SUBTRACTION),v+=" - ",v=s.isNumber$$module$build$src$core$utils$string(String(_))||String(_).match(/^\(.+\)$/)?v+_:v+("("+_+")"),v+=" + 1";break;case"FROM_END":v=v.getAdjusted(h,"AT2",0,!1,S.SUBTRACTION),v="count("+T+") - "+v+" - ",v=s.isNumber$$module$build$src$core$utils$string(String(_))||String(_).match(/^\(.+\)$/)?v+_:v+("("+_+")");break;case"LAST":v="count("+T+") - ",v=s.isNumber$$module$build$src$core$utils$string(String(_))||String(_).match(/^\(.+\)$/)?v+_:v+("("+_+")");break;default:throw Error("Unhandled option (lists_getSublist).")}T="array_slice("+T+", "+_+", "+v+")"}else{const A=v.getAdjusted(h,"AT1");h=v.getAdjusted(h,"AT2"),T=v.provideFunction_("lists_get_sublist",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($list, $where1, $at1, $where2, $at2) {
  if ($where1 == 'FROM_END') {
    $at1 = count($list) - 1 - $at1;
  } else if ($where1 == 'FIRST') {
    $at1 = 0;
  } else if ($where1 != 'FROM_START') {
    throw new Exception('Unhandled option (lists_get_sublist).');
  }
  $length = 0;
  if ($where2 == 'FROM_START') {
    $length = $at2 - $at1 + 1;
  } else if ($where2 == 'FROM_END') {
    $length = count($list) - $at1 - $at2;
  } else if ($where2 == 'LAST') {
    $length = count($list) - $at1;
  } else {
    throw new Exception('Unhandled option (lists_get_sublist).');
  }
  return array_slice($list, $at1, $length);
}
`)+"("+T+", '"+_+"', "+A+", '"+c+"', "+h+")"}return[T,S.FUNCTION_CALL]},B=function(h,v){const T=v.valueToCode(h,"LIST",S.NONE)||"array()",_=h.getFieldValue("DIRECTION")==="1"?1:-1;return h=h.getFieldValue("TYPE"),[v.provideFunction_("lists_sort",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($list, $type, $direction) {
  $sortCmpFuncs = array(
    'NUMERIC' => 'strnatcasecmp',
    'TEXT' => 'strcmp',
    'IGNORE_CASE' => 'strcasecmp'
  );
  $sortCmp = $sortCmpFuncs[$type];
  $list2 = $list;
  usort($list2, $sortCmp);
  if ($direction == -1) {
    $list2 = array_reverse($list2);
  }
  return $list2;
}
`)+"("+T+', "'+h+'", '+_+")",S.FUNCTION_CALL]},P=function(h,v){let T=v.valueToCode(h,"INPUT",S.NONE);if(v=v.valueToCode(h,"DELIM",S.NONE)||"''",h=h.getFieldValue("MODE"),h==="SPLIT")T||(T="''"),h="explode";else if(h==="JOIN")T||(T="array()"),h="implode";else throw Error("Unknown mode: "+h);return[h+"("+v+", "+T+")",S.FUNCTION_CALL]},z=function(h,v){return["array_reverse("+(v.valueToCode(h,"LIST",S.NONE)||"[]")+")",S.FUNCTION_CALL]},m=function(h,v){let T=0,_="",c,A;v.STATEMENT_PREFIX&&(_+=v.injectId(v.STATEMENT_PREFIX,h));do A=v.valueToCode(h,"IF"+T,S.NONE)||"false",c=v.statementToCode(h,"DO"+T),v.STATEMENT_SUFFIX&&(c=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,h),v.INDENT)+c),_+=(T>0?" else ":"")+"if ("+A+`) {
`+c+"}",T++;while(h.getInput("IF"+T));return(h.getInput("ELSE")||v.STATEMENT_SUFFIX)&&(c=h.getInput("ELSE")?v.statementToCode(h,"ELSE"):"",v.STATEMENT_SUFFIX&&(c=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,h),v.INDENT)+c),_+=` else {
`+c+"}"),_+`
`},d=function(h,v){const T={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[h.getFieldValue("OP")],_=T==="=="||T==="!="?S.EQUALITY:S.RELATIONAL,c=v.valueToCode(h,"A",_)||"0";return h=v.valueToCode(h,"B",_)||"0",[c+" "+T+" "+h,_]},y=function(h,v){const T=h.getFieldValue("OP")==="AND"?"&&":"||",_=T==="&&"?S.LOGICAL_AND:S.LOGICAL_OR;let c=v.valueToCode(h,"A",_);return h=v.valueToCode(h,"B",_),c||h?(v=T==="&&"?"true":"false",c||(c=v),h||(h=v)):h=c="false",[c+" "+T+" "+h,_]},F=function(h,v){const T=S.LOGICAL_NOT;return["!"+(v.valueToCode(h,"BOOL",T)||"true"),T]},L=function(h,v){return[h.getFieldValue("BOOL")==="TRUE"?"true":"false",S.ATOMIC]},G=function(h,v){return["null",S.ATOMIC]},p=function(h,v){const T=v.valueToCode(h,"IF",S.CONDITIONAL)||"false",_=v.valueToCode(h,"THEN",S.CONDITIONAL)||"null";return h=v.valueToCode(h,"ELSE",S.CONDITIONAL)||"null",[T+" ? "+_+" : "+h,S.CONDITIONAL]},I=function(h,v){let T;T=h.getField("TIMES")?String(Number(h.getFieldValue("TIMES"))):v.valueToCode(h,"TIMES",S.ASSIGNMENT)||"0";let _=v.statementToCode(h,"DO");_=v.addLoopTrap(_,h),h="";const c=v.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE);let A=T;return T.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(T)||(A=v.nameDB_.getDistinctName("repeat_end",s.NameType$$module$build$src$core$names.VARIABLE),h+=A+" = "+T+`;
`),h+("for ("+c+" = 0; "+c+" < "+A+"; "+c+`++) {
`+_+`}
`)},D=function(h,v){const T=h.getFieldValue("MODE")==="UNTIL";let _=v.valueToCode(h,"BOOL",T?S.LOGICAL_NOT:S.NONE)||"false",c=v.statementToCode(h,"DO");return c=v.addLoopTrap(c,h),T&&(_="!"+_),"while ("+_+`) {
`+c+`}
`},V=function(h,v){var T=v.getVariableName(h.getFieldValue("VAR")),_=v.valueToCode(h,"FROM",S.ASSIGNMENT)||"0",c=v.valueToCode(h,"TO",S.ASSIGNMENT)||"0";const A=v.valueToCode(h,"BY",S.ASSIGNMENT)||"1";let M=v.statementToCode(h,"DO");if(M=v.addLoopTrap(M,h),s.isNumber$$module$build$src$core$utils$string(_)&&s.isNumber$$module$build$src$core$utils$string(c)&&s.isNumber$$module$build$src$core$utils$string(A))v=Number(_)<=Number(c),h="for ("+T+" = "+_+"; "+T+(v?" <= ":" >= ")+c+"; "+T,T=Math.abs(Number(A)),h=T===1?h+(v?"++":"--"):h+((v?" += ":" -= ")+T),h+=`) {
`+M+`}
`;else{h="";let Y=_;_.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(_)||(Y=v.nameDB_.getDistinctName(T+"_start",s.NameType$$module$build$src$core$names.VARIABLE),h+=Y+" = "+_+`;
`),_=c,c.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(c)||(_=v.nameDB_.getDistinctName(T+"_end",s.NameType$$module$build$src$core$names.VARIABLE),h+=_+" = "+c+`;
`),c=v.nameDB_.getDistinctName(T+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),h+=c+" = ",h=s.isNumber$$module$build$src$core$utils$string(A)?h+(Math.abs(Number(A))+`;
`):h+("abs("+A+`);
`),h+="if ("+Y+" > "+_+`) {
`,h+=v.INDENT+c+" = -"+c+`;
`,h=h+`}
for (`+(T+" = "+Y+"; "+c+" >= 0 ? "+T+" <= "+_+" : "+T+" >= "+_+"; "+T+" += "+c+`) {
`+M+`}
`)}return h},C=function(h,v){const T=v.getVariableName(h.getFieldValue("VAR")),_=v.valueToCode(h,"LIST",S.ASSIGNMENT)||"[]";let c=v.statementToCode(h,"DO");return c=v.addLoopTrap(c,h),"foreach ("+_+" as "+T+`) {
`+c+`}
`},K=function(h,v){let T="";if(v.STATEMENT_PREFIX&&(T+=v.injectId(v.STATEMENT_PREFIX,h)),v.STATEMENT_SUFFIX&&(T+=v.injectId(v.STATEMENT_SUFFIX,h)),v.STATEMENT_PREFIX){const _=h.getSurroundLoop();_&&!_.suppressPrefixSuffix&&(T+=v.injectId(v.STATEMENT_PREFIX,_))}switch(h.getFieldValue("FLOW")){case"BREAK":return T+`break;
`;case"CONTINUE":return T+`continue;
`}throw Error("Unknown flow statement.")},X=function(h,v){return h=Number(h.getFieldValue("NUM")),h===1/0?["INF",S.ATOMIC]:h===-1/0?["-INF",S.UNARY_NEGATION]:[String(h),h>=0?S.ATOMIC:S.UNARY_NEGATION]},re=function(h,v){var T={ADD:[" + ",S.ADDITION],MINUS:[" - ",S.SUBTRACTION],MULTIPLY:[" * ",S.MULTIPLICATION],DIVIDE:[" / ",S.DIVISION],POWER:[" ** ",S.POWER]}[h.getFieldValue("OP")];const _=T[0];T=T[1];const c=v.valueToCode(h,"A",T)||"0";return h=v.valueToCode(h,"B",T)||"0",[c+_+h,T]},se=function(h,v){const T=h.getFieldValue("OP");let _;if(T==="NEG")return h=v.valueToCode(h,"NUM",S.UNARY_NEGATION)||"0",h[0]==="-"&&(h=" "+h),["-"+h,S.UNARY_NEGATION];switch(h=T==="SIN"||T==="COS"||T==="TAN"?v.valueToCode(h,"NUM",S.DIVISION)||"0":v.valueToCode(h,"NUM",S.NONE)||"0",T){case"ABS":_="abs("+h+")";break;case"ROOT":_="sqrt("+h+")";break;case"LN":_="log("+h+")";break;case"EXP":_="exp("+h+")";break;case"POW10":_="pow(10,"+h+")";break;case"ROUND":_="round("+h+")";break;case"ROUNDUP":_="ceil("+h+")";break;case"ROUNDDOWN":_="floor("+h+")";break;case"SIN":_="sin("+h+" / 180 * pi())";break;case"COS":_="cos("+h+" / 180 * pi())";break;case"TAN":_="tan("+h+" / 180 * pi())"}if(_)return[_,S.FUNCTION_CALL];switch(T){case"LOG10":_="log("+h+") / log(10)";break;case"ASIN":_="asin("+h+") / pi() * 180";break;case"ACOS":_="acos("+h+") / pi() * 180";break;case"ATAN":_="atan("+h+") / pi() * 180";break;default:throw Error("Unknown math operator: "+T)}return[_,S.DIVISION]},Pe=function(h,v){return{PI:["M_PI",S.ATOMIC],E:["M_E",S.ATOMIC],GOLDEN_RATIO:["(1 + sqrt(5)) / 2",S.DIVISION],SQRT2:["M_SQRT2",S.ATOMIC],SQRT1_2:["M_SQRT1_2",S.ATOMIC],INFINITY:["INF",S.ATOMIC]}[h.getFieldValue("CONSTANT")]},Te=function(h,v){var T={EVEN:[""," % 2 == 0",S.MODULUS,S.EQUALITY],ODD:[""," % 2 == 1",S.MODULUS,S.EQUALITY],WHOLE:["is_int(",")",S.NONE,S.FUNCTION_CALL],POSITIVE:[""," > 0",S.RELATIONAL,S.RELATIONAL],NEGATIVE:[""," < 0",S.RELATIONAL,S.RELATIONAL],DIVISIBLE_BY:[null,null,S.MODULUS,S.EQUALITY],PRIME:[null,null,S.NONE,S.FUNCTION_CALL]};const _=h.getFieldValue("PROPERTY"),[c,A,M,Y]=T[_];if(T=v.valueToCode(h,"NUMBER_TO_CHECK",M)||"0",_==="PRIME")h=v.provideFunction_("math_isPrime",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if ($n == 2 || $n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (!is_numeric($n) || $n <= 1 || $n % 1 != 0 || $n % 2 == 0 || $n % 3 == 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for ($x = 6; $x <= sqrt($n) + 1; $x += 6) {
    if ($n % ($x - 1) == 0 || $n % ($x + 1) == 0) {
      return false;
    }
  }
  return true;
}
`)+"("+T+")";else if(_==="DIVISIBLE_BY"){if(h=v.valueToCode(h,"DIVISOR",S.MODULUS)||"0",h==="0")return["false",S.ATOMIC];h=T+" % "+h+" == 0"}else h=c+T+A;return[h,Y]},Ae=function(h,v){const T=v.valueToCode(h,"DELTA",S.ADDITION)||"0";return v.getVariableName(h.getFieldValue("VAR"))+" += "+T+`;
`},we=function(h,v){var T=h.getFieldValue("OP");switch(T){case"SUM":h=v.valueToCode(h,"LIST",S.FUNCTION_CALL)||"array()",h="array_sum("+h+")";break;case"MIN":h=v.valueToCode(h,"LIST",S.FUNCTION_CALL)||"array()",h="min("+h+")";break;case"MAX":h=v.valueToCode(h,"LIST",S.FUNCTION_CALL)||"array()",h="max("+h+")";break;case"AVERAGE":T=v.provideFunction_("math_mean",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($myList) {
  return array_sum($myList) / count($myList);
}
`),h=v.valueToCode(h,"LIST",S.NONE)||"array()",h=T+"("+h+")";break;case"MEDIAN":T=v.provideFunction_("math_median",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($arr) {
  sort($arr,SORT_NUMERIC);
  return (count($arr) % 2) ? $arr[floor(count($arr) / 2)] :
      ($arr[floor(count($arr) / 2)] + $arr[floor(count($arr) / 2) - 1]) / 2;
}
`),h=v.valueToCode(h,"LIST",S.NONE)||"[]",h=T+"("+h+")";break;case"MODE":T=v.provideFunction_("math_modes",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($values) {
  if (empty($values)) return array();
  $counts = array_count_values($values);
  arsort($counts); // Sort counts in descending order
  $modes = array_keys($counts, current($counts), true);
  return $modes;
}
`),h=v.valueToCode(h,"LIST",S.NONE)||"[]",h=T+"("+h+")";break;case"STD_DEV":T=v.provideFunction_("math_standard_deviation",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($numbers) {
  $n = count($numbers);
  if (!$n) return null;
  $mean = array_sum($numbers) / count($numbers);
  foreach($numbers as $key => $num) $devs[$key] = pow($num - $mean, 2);
  return sqrt(array_sum($devs) / (count($devs) - 1));
}
`),h=v.valueToCode(h,"LIST",S.NONE)||"[]",h=T+"("+h+")";break;case"RANDOM":T=v.provideFunction_("math_random_list",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($list) {
  $x = rand(0, count($list)-1);
  return $list[$x];
}
`),h=v.valueToCode(h,"LIST",S.NONE)||"[]",h=T+"("+h+")";break;default:throw Error("Unknown operator: "+T)}return[h,S.FUNCTION_CALL]},ve=function(h,v){const T=v.valueToCode(h,"DIVIDEND",S.MODULUS)||"0";return h=v.valueToCode(h,"DIVISOR",S.MODULUS)||"0",[T+" % "+h,S.MODULUS]},be=function(h,v){const T=v.valueToCode(h,"VALUE",S.NONE)||"0",_=v.valueToCode(h,"LOW",S.NONE)||"0";return h=v.valueToCode(h,"HIGH",S.NONE)||"Infinity",["min(max("+T+", "+_+"), "+h+")",S.FUNCTION_CALL]},Xe=function(h,v){const T=v.valueToCode(h,"FROM",S.NONE)||"0";return h=v.valueToCode(h,"TO",S.NONE)||"0",[v.provideFunction_("math_random_int",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($a, $b) {
  if ($a > $b) {
    return rand($b, $a);
  }
  return rand($a, $b);
}
`)+"("+T+", "+h+")",S.FUNCTION_CALL]},Be=function(h,v){return["(float)rand()/(float)getrandmax()",S.FUNCTION_CALL]},ke=function(h,v){const T=v.valueToCode(h,"X",S.NONE)||"0";return["atan2("+(v.valueToCode(h,"Y",S.NONE)||"0")+", "+T+") / pi() * 180",S.DIVISION]},ce=function(h,v){var T=[],_=h.workspace,c=s.allUsedVarModels$$module$build$src$core$variables(_)||[];for(var A of c)c=A.getName(),h.getVars().includes(c)||T.push(v.getVariableName(c));for(_=s.allDeveloperVariables$$module$build$src$core$variables(_),A=0;A<_.length;A++)T.push(v.nameDB_.getName(_[A],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));_=T.length?v.INDENT+"global "+T.join(", ")+`;
`:"",T=v.getProcedureName(h.getFieldValue("NAME")),A="",v.STATEMENT_PREFIX&&(A+=v.injectId(v.STATEMENT_PREFIX,h)),v.STATEMENT_SUFFIX&&(A+=v.injectId(v.STATEMENT_SUFFIX,h)),A&&(A=v.prefixLines(A,v.INDENT)),c="",v.INFINITE_LOOP_TRAP&&(c=v.prefixLines(v.injectId(v.INFINITE_LOOP_TRAP,h),v.INDENT));let M="";h.getInput("STACK")&&(M=v.statementToCode(h,"STACK"));let Y="";h.getInput("RETURN")&&(Y=v.valueToCode(h,"RETURN",S.NONE)||"");let q="";M&&Y&&(q=A),Y&&(Y=v.INDENT+"return "+Y+`;
`);const ee=[],xe=h.getVars();for(let ze=0;ze<xe.length;ze++)ee[ze]=v.getVariableName(xe[ze]);return _="function "+T+"("+ee.join(", ")+`) {
`+_+A+c+M+q+Y+"}",_=v.scrub_(h,_),v.definitions_["%"+T]=_,null},te=function(h,v){const T=v.getProcedureName(h.getFieldValue("NAME")),_=[],c=h.getVars();for(let A=0;A<c.length;A++)_[A]=v.valueToCode(h,"ARG"+A,S.NONE)||"null";return[T+"("+_.join(", ")+")",S.FUNCTION_CALL]},ue=function(h,v){return v.forBlock.procedures_callreturn(h,v)[0]+`;
`},me=function(h,v){let T="if ("+(v.valueToCode(h,"CONDITION",S.NONE)||"false")+`) {
`;return v.STATEMENT_SUFFIX&&(T+=v.prefixLines(v.injectId(v.STATEMENT_SUFFIX,h),v.INDENT)),h.hasReturnValue_?(h=v.valueToCode(h,"VALUE",S.NONE)||"null",T+=v.INDENT+"return "+h+`;
`):T+=v.INDENT+`return;
`,T+`}
`},Le=function(h,v){return[v.quote_(h.getFieldValue("TEXT")),S.ATOMIC]},Qe=function(h,v){if(h.itemCount_===0)return["''",S.ATOMIC];if(h.itemCount_===1)return[v.valueToCode(h,"ADD0",S.NONE)||"''",S.NONE];if(h.itemCount_===2){var T=v.valueToCode(h,"ADD0",S.STRING_CONCAT)||"''";return h=v.valueToCode(h,"ADD1",S.STRING_CONCAT)||"''",[T+" . "+h,S.STRING_CONCAT]}T=Array(h.itemCount_);for(let _=0;_<h.itemCount_;_++)T[_]=v.valueToCode(h,"ADD"+_,S.NONE)||"''";return["implode('', array("+T.join(",")+"))",S.FUNCTION_CALL]},Fe=function(h,v){const T=v.getVariableName(h.getFieldValue("VAR"));return h=v.valueToCode(h,"TEXT",S.ASSIGNMENT)||"''",T+" .= "+h+`;
`},lt=function(h,v){const T=v.provideFunction_("length",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($value) {
  if (is_string($value)) {
    return strlen($value);
  }
  return count($value);
}
`);return h=v.valueToCode(h,"VALUE",S.NONE)||"''",[T+"("+h+")",S.FUNCTION_CALL]},de=function(h,v){return["empty("+(v.valueToCode(h,"VALUE",S.NONE)||"''")+")",S.FUNCTION_CALL]},De=function(h,v){const T=h.getFieldValue("END")==="FIRST"?"strpos":"strrpos",_=v.valueToCode(h,"FIND",S.NONE)||"''",c=v.valueToCode(h,"VALUE",S.NONE)||"''";let A=" -1",M="";return h.workspace.options.oneBasedIndex&&(A=" 0",M=" + 1"),[v.provideFunction_(h.getFieldValue("END")==="FIRST"?"text_indexOf":"text_lastIndexOf",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($text, $search) {
  $pos = ${T}($text, $search);
  return $pos === false ? ${A} : $pos${M};
}
`)+"("+c+", "+_+")",S.FUNCTION_CALL]},he=function(h,v){const T=h.getFieldValue("WHERE")||"FROM_START",_=v.valueToCode(h,"VALUE",S.NONE)||"''";switch(T){case"FIRST":return["substr("+_+", 0, 1)",S.FUNCTION_CALL];case"LAST":return["substr("+_+", -1)",S.FUNCTION_CALL];case"FROM_START":return h=v.getAdjusted(h,"AT"),["substr("+_+", "+h+", 1)",S.FUNCTION_CALL];case"FROM_END":return h=v.getAdjusted(h,"AT",1,!0),["substr("+_+", "+h+", 1)",S.FUNCTION_CALL];case"RANDOM":return[v.provideFunction_("text_random_letter",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($text) {
  return $text[rand(0, strlen($text) - 1)];
}
`)+"("+_+")",S.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Se=function(h,v){const T=h.getFieldValue("WHERE1"),_=h.getFieldValue("WHERE2"),c=v.valueToCode(h,"STRING",S.NONE)||"''";if(T==="FIRST"&&_==="LAST")return[c,S.NONE];const A=v.getAdjusted(h,"AT1");return h=v.getAdjusted(h,"AT2"),[v.provideFunction_("text_get_substring",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($text, $where1, $at1, $where2, $at2) {
  if ($where1 == 'FROM_END') {
    $at1 = strlen($text) - 1 - $at1;
  } else if ($where1 == 'FIRST') {
    $at1 = 0;
  } else if ($where1 != 'FROM_START') {
    throw new Exception('Unhandled option (text_get_substring).');
  }
  $length = 0;
  if ($where2 == 'FROM_START') {
    $length = $at2 - $at1 + 1;
  } else if ($where2 == 'FROM_END') {
    $length = strlen($text) - $at1 - $at2;
  } else if ($where2 == 'LAST') {
    $length = strlen($text) - $at1;
  } else {
    throw new Exception('Unhandled option (text_get_substring).');
  }
  return substr($text, $at1, $length);
}
`)+"("+c+", '"+T+"', "+A+", '"+_+"', "+h+")",S.FUNCTION_CALL]},Ue=function(h,v){v=v.valueToCode(h,"TEXT",S.NONE)||"''";let T;return h.getFieldValue("CASE")==="UPPERCASE"?T="strtoupper("+v+")":h.getFieldValue("CASE")==="LOWERCASE"?T="strtolower("+v+")":h.getFieldValue("CASE")==="TITLECASE"&&(T="ucwords(strtolower("+v+"))"),[T,S.FUNCTION_CALL]},He=function(h,v){const T={LEFT:"ltrim",RIGHT:"rtrim",BOTH:"trim"}[h.getFieldValue("MODE")];return h=v.valueToCode(h,"TEXT",S.NONE)||"''",[T+"("+h+")",S.FUNCTION_CALL]},et=function(h,v){return"print("+(v.valueToCode(h,"TEXT",S.NONE)||"''")+`);
`},tt=function(h,v){return v="readline("+(h.getField("TEXT")?v.quote_(h.getFieldValue("TEXT")):v.valueToCode(h,"TEXT",S.NONE)||"''")+")",h.getFieldValue("TYPE")==="NUMBER"&&(v="floatval("+v+")"),[v,S.FUNCTION_CALL]},ht=function(h,v){const T=v.valueToCode(h,"TEXT",S.NONE)||"''";return h=v.valueToCode(h,"SUB",S.NONE)||"''",["strlen("+h+") === 0 ? strlen("+T+") + 1 : substr_count("+T+", "+h+")",S.CONDITIONAL]},nt=function(h,v){const T=v.valueToCode(h,"TEXT",S.NONE)||"''",_=v.valueToCode(h,"FROM",S.NONE)||"''";return h=v.valueToCode(h,"TO",S.NONE)||"''",["str_replace("+_+", "+h+", "+T+")",S.FUNCTION_CALL]},st=function(h,v){return["strrev("+(v.valueToCode(h,"TEXT",S.NONE)||"''")+")",S.FUNCTION_CALL]},ot=function(h,v){return[v.getVariableName(h.getFieldValue("VAR")),S.ATOMIC]},it=function(h,v){const T=v.valueToCode(h,"VALUE",S.ASSIGNMENT)||"0";return v.getVariableName(h.getFieldValue("VAR"))+" = "+T+`;
`},S;(function(h){h[h.ATOMIC=0]="ATOMIC",h[h.CLONE=1]="CLONE",h[h.NEW=1]="NEW",h[h.MEMBER=2.1]="MEMBER",h[h.FUNCTION_CALL=2.2]="FUNCTION_CALL",h[h.POWER=3]="POWER",h[h.INCREMENT=4]="INCREMENT",h[h.DECREMENT=4]="DECREMENT",h[h.BITWISE_NOT=4]="BITWISE_NOT",h[h.CAST=4]="CAST",h[h.SUPPRESS_ERROR=4]="SUPPRESS_ERROR",h[h.INSTANCEOF=5]="INSTANCEOF",h[h.LOGICAL_NOT=6]="LOGICAL_NOT",h[h.UNARY_PLUS=7.1]="UNARY_PLUS",h[h.UNARY_NEGATION=7.2]="UNARY_NEGATION",h[h.MULTIPLICATION=8.1]="MULTIPLICATION",h[h.DIVISION=8.2]="DIVISION",h[h.MODULUS=8.3]="MODULUS",h[h.ADDITION=9.1]="ADDITION",h[h.SUBTRACTION=9.2]="SUBTRACTION",h[h.STRING_CONCAT=9.3]="STRING_CONCAT",h[h.BITWISE_SHIFT=10]="BITWISE_SHIFT",h[h.RELATIONAL=11]="RELATIONAL",h[h.EQUALITY=12]="EQUALITY",h[h.REFERENCE=13]="REFERENCE",h[h.BITWISE_AND=13]="BITWISE_AND",h[h.BITWISE_XOR=14]="BITWISE_XOR",h[h.BITWISE_OR=15]="BITWISE_OR",h[h.LOGICAL_AND=16]="LOGICAL_AND",h[h.LOGICAL_OR=17]="LOGICAL_OR",h[h.IF_NULL=18]="IF_NULL",h[h.CONDITIONAL=19]="CONDITIONAL",h[h.ASSIGNMENT=20]="ASSIGNMENT",h[h.LOGICAL_AND_WEAK=21]="LOGICAL_AND_WEAK",h[h.LOGICAL_XOR=22]="LOGICAL_XOR",h[h.LOGICAL_OR_WEAK=23]="LOGICAL_OR_WEAK",h[h.NONE=99]="NONE"})(S||(S={}));var ae=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(h="PHP"){super(h),this.ORDER_OVERRIDES=[[S.MEMBER,S.FUNCTION_CALL],[S.MEMBER,S.MEMBER],[S.LOGICAL_NOT,S.LOGICAL_NOT],[S.MULTIPLICATION,S.MULTIPLICATION],[S.ADDITION,S.ADDITION],[S.LOGICAL_AND,S.LOGICAL_AND],[S.LOGICAL_OR,S.LOGICAL_OR]],this.isInitialized=!1;for(const v in S)h=S[v],typeof h!="string"&&(this["ORDER_"+v]=h);this.addReservedWords("__halt_compiler,abstract,and,array,as,break,callable,case,catch,class,clone,const,continue,declare,default,die,do,echo,else,elseif,empty,enddeclare,endfor,endforeach,endif,endswitch,endwhile,eval,exit,extends,final,for,foreach,function,global,goto,if,implements,include,include_once,instanceof,insteadof,interface,isset,list,namespace,new,or,print,private,protected,public,require,require_once,return,static,switch,throw,trait,try,unset,use,var,while,xor,PHP_VERSION,PHP_MAJOR_VERSION,PHP_MINOR_VERSION,PHP_RELEASE_VERSION,PHP_VERSION_ID,PHP_EXTRA_VERSION,PHP_ZTS,PHP_DEBUG,PHP_MAXPATHLEN,PHP_OS,PHP_SAPI,PHP_EOL,PHP_INT_MAX,PHP_INT_SIZE,DEFAULT_INCLUDE_PATH,PEAR_INSTALL_DIR,PEAR_EXTENSION_DIR,PHP_EXTENSION_DIR,PHP_PREFIX,PHP_BINDIR,PHP_BINARY,PHP_MANDIR,PHP_LIBDIR,PHP_DATADIR,PHP_SYSCONFDIR,PHP_LOCALSTATEDIR,PHP_CONFIG_FILE_PATH,PHP_CONFIG_FILE_SCAN_DIR,PHP_SHLIB_SUFFIX,E_ERROR,E_WARNING,E_PARSE,E_NOTICE,E_CORE_ERROR,E_CORE_WARNING,E_COMPILE_ERROR,E_COMPILE_WARNING,E_USER_ERROR,E_USER_WARNING,E_USER_NOTICE,E_DEPRECATED,E_USER_DEPRECATED,E_ALL,E_STRICT,__COMPILER_HALT_OFFSET__,TRUE,FALSE,NULL,__CLASS__,__DIR__,__FILE__,__FUNCTION__,__LINE__,__METHOD__,__NAMESPACE__,__TRAIT__")}init(h){super.init(h),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_,"$"),this.nameDB_.setVariableMap(h.getVariableMap()),this.nameDB_.populateVariables(h),this.nameDB_.populateProcedures(h),this.isInitialized=!0}finish(h){const v=Object.values(this.definitions_);return h=super.finish(h),this.isInitialized=!1,this.nameDB_.reset(),v.join(`

`)+`


`+h}scrubNakedValue(h){return h+`;
`}quote_(h){return h=h.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+h+"'"}multiline_quote_(h){return h.split(/\n/g).map(this.quote_).join(` . "\\n" .
`)}scrub_(h,v,T=!1){let _="";if(!h.outputConnection||!h.outputConnection.targetConnection){var c=h.getCommentText();c&&(c=s.wrap$$module$build$src$core$utils$string(c,this.COMMENT_WRAP-3),_+=this.prefixLines(c,"// ")+`
`);for(let A=0;A<h.inputList.length;A++)h.inputList[A].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(c=h.inputList[A].connection.targetBlock())&&(c=this.allNestedComments(c))&&(_+=this.prefixLines(c,"// "))}return h=h.nextConnection&&h.nextConnection.targetBlock(),T=T?"":this.blockToCode(h),_+v+T}getAdjusted(h,v,T=0,_=!1,c=S.NONE){h.workspace.options.oneBasedIndex&&T--;let A=h.workspace.options.oneBasedIndex?"1":"0",M=c;return T>0?M=S.ADDITION:T<0?M=S.SUBTRACTION:_&&(M=S.UNARY_NEGATION),h=this.valueToCode(h,v,M)||A,T===0&&!_?h:s.isNumber$$module$build$src$core$utils$string(h)?(h=String(Number(h)+T),_&&(h=String(-Number(h))),h):(T>0?h=`${h} + ${T}`:T<0&&(h=`${h} - ${-T}`),_&&(h=T?`-(${h})`:`-${h}`),Math.floor(c)>=Math.floor(M)&&(h=`(${h})`),h)}},j={};j.lists_create_empty=l,j.lists_create_with=f,j.lists_getIndex=w,j.lists_getSublist=k,j.lists_indexOf=x,j.lists_isEmpty=N,j.lists_length=g,j.lists_repeat=E,j.lists_reverse=z,j.lists_setIndex=R,j.lists_sort=B,j.lists_split=P;var $e={};$e.controls_if=m,$e.controls_ifelse=m,$e.logic_boolean=L,$e.logic_compare=d,$e.logic_negate=F,$e.logic_null=G,$e.logic_operation=y,$e.logic_ternary=p;var Ne={};Ne.controls_flow_statements=K,Ne.controls_for=V,Ne.controls_forEach=C,Ne.controls_repeat=I,Ne.controls_repeat_ext=I,Ne.controls_whileUntil=D;var Ie={};Ie.math_arithmetic=re,Ie.math_atan2=ke,Ie.math_change=Ae,Ie.math_constant=Pe,Ie.math_constrain=be,Ie.math_modulo=ve,Ie.math_number=X,Ie.math_number_property=Te,Ie.math_on_list=we,Ie.math_random_float=Be,Ie.math_random_int=Xe,Ie.math_round=se,Ie.math_single=se,Ie.math_trig=se;var Ve={};Ve.procedures_callnoreturn=ue,Ve.procedures_callreturn=te,Ve.procedures_defnoreturn=ce,Ve.procedures_defreturn=ce,Ve.procedures_ifreturn=me;var le={};le.text=Le,le.text_append=Fe,le.text_changeCase=Ue,le.text_charAt=he,le.text_count=ht,le.text_getSubstring=Se,le.text_indexOf=De,le.text_isEmpty=de,le.text_join=Qe,le.text_length=lt,le.text_print=et,le.text_prompt=tt,le.text_prompt_ext=tt,le.text_replace=nt,le.text_reverse=st,le.text_trim=He;var O={};O.variables_get=ot,O.variables_set=it;var H={};H.variables_get_dynamic=ot,H.variables_set_dynamic=it;var J=new ae,ne=Object.assign({},j,$e,Ne,Ie,Ve,le,O,H);for(const h in ne)J.forBlock[h]=ne[h];var ye={};return ye.Order=S,ye.PhpGenerator=ae,ye.phpGenerator=J,ye.__namespace__=s,ye})})(php_compressed$1)),php_compressed$1.exports}var python_compressed$1={exports:{}},python_compressed=python_compressed$1.exports,hasRequiredPython_compressed;function requirePython_compressed(){return hasRequiredPython_compressed||(hasRequiredPython_compressed=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed())})(python_compressed,function(o){var s=o.__namespace__,l=function(T,_){return["[]",S.ATOMIC]},f=function(T,_){const c=Array(T.itemCount_);for(let A=0;A<T.itemCount_;A++)c[A]=_.valueToCode(T,"ADD"+A,S.NONE)||"None";return["["+c.join(", ")+"]",S.ATOMIC]},E=function(T,_){const c=_.valueToCode(T,"ITEM",S.NONE)||"None";return T=_.valueToCode(T,"NUM",S.MULTIPLICATIVE)||"0",["["+c+"] * "+T,S.MULTIPLICATIVE]},g=function(T,_){return["len("+(_.valueToCode(T,"VALUE",S.NONE)||"[]")+")",S.FUNCTION_CALL]},N=function(T,_){return["not len("+(_.valueToCode(T,"VALUE",S.NONE)||"[]")+")",S.LOGICAL_NOT]},x=function(T,_){const c=_.valueToCode(T,"FIND",S.NONE)||"[]",A=_.valueToCode(T,"VALUE",S.NONE)||"''";let M=" -1",Y="",q=" - 1";return T.workspace.options.oneBasedIndex&&(M=" 0",Y=" + 1",q=""),[(T.getFieldValue("END")==="FIRST"?_.provideFunction_("first_index",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = my_list.index(elem)${Y}
  except: index =${M}
  return index
`):_.provideFunction_("last_index",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = len(my_list) - my_list[::-1].index(elem)${q}
  except: index =${M}
  return index
`))+"("+A+", "+c+")",S.FUNCTION_CALL]},w=function(T,_){const c=T.getFieldValue("MODE")||"GET",A=T.getFieldValue("WHERE")||"FROM_START";var M=_.valueToCode(T,"VALUE",A==="RANDOM"?S.NONE:S.MEMBER)||"[]";switch(A){case"FIRST":if(c==="GET")return[M+"[0]",S.MEMBER];if(c==="GET_REMOVE")return[M+".pop(0)",S.FUNCTION_CALL];if(c==="REMOVE")return M+`.pop(0)
`;break;case"LAST":if(c==="GET")return[M+"[-1]",S.MEMBER];if(c==="GET_REMOVE")return[M+".pop()",S.FUNCTION_CALL];if(c==="REMOVE")return M+`.pop()
`;break;case"FROM_START":if(T=_.getAdjustedInt(T,"AT"),c==="GET")return[M+"["+T+"]",S.MEMBER];if(c==="GET_REMOVE")return[M+".pop("+T+")",S.FUNCTION_CALL];if(c==="REMOVE")return M+".pop("+T+`)
`;break;case"FROM_END":if(T=_.getAdjustedInt(T,"AT",1,!0),c==="GET")return[M+"["+T+"]",S.MEMBER];if(c==="GET_REMOVE")return[M+".pop("+T+")",S.FUNCTION_CALL];if(c==="REMOVE")return M+".pop("+T+`)
`;break;case"RANDOM":if(_.definitions_.import_random="import random",c==="GET")return["random.choice("+M+")",S.FUNCTION_CALL];if(M=_.provideFunction_("lists_remove_random_item",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(myList):
  x = int(random.random() * len(myList))
  return myList.pop(x)
`)+"("+M+")",c==="GET_REMOVE")return[M,S.FUNCTION_CALL];if(c==="REMOVE")return M+`
`}throw Error("Unhandled combination (lists_getIndex).")},R=function(T,_){let c=_.valueToCode(T,"LIST",S.MEMBER)||"[]";const A=T.getFieldValue("MODE")||"GET";var M=T.getFieldValue("WHERE")||"FROM_START";const Y=_.valueToCode(T,"TO",S.NONE)||"None";switch(M){case"FIRST":if(A==="SET")return c+"[0] = "+Y+`
`;if(A==="INSERT")return c+".insert(0, "+Y+`)
`;break;case"LAST":if(A==="SET")return c+"[-1] = "+Y+`
`;if(A==="INSERT")return c+".append("+Y+`)
`;break;case"FROM_START":if(_=_.getAdjustedInt(T,"AT"),A==="SET")return c+"["+_+"] = "+Y+`
`;if(A==="INSERT")return c+".insert("+_+", "+Y+`)
`;break;case"FROM_END":if(_=_.getAdjustedInt(T,"AT",1,!0),A==="SET")return c+"["+_+"] = "+Y+`
`;if(A==="INSERT")return c+".insert("+_+", "+Y+`)
`;break;case"RANDOM":if(_.definitions_.import_random="import random",c.match(/^\w+$/)?T="":(T=_.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),M=T+" = "+c+`
`,c=T,T=M),_=_.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),T+=_+" = int(random.random() * len("+c+`))
`,A==="SET")return T+(c+"["+_+"] = "+Y+`
`);if(A==="INSERT")return T+(c+".insert("+_+", "+Y+`)
`)}throw Error("Unhandled combination (lists_setIndex).")},k=function(T,_){const c=_.valueToCode(T,"LIST",S.MEMBER)||"[]";var A=T.getFieldValue("WHERE1");const M=T.getFieldValue("WHERE2");switch(A){case"FROM_START":A=_.getAdjustedInt(T,"AT1"),A===0&&(A="");break;case"FROM_END":A=_.getAdjustedInt(T,"AT1",1,!0);break;case"FIRST":A="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(M){case"FROM_START":T=_.getAdjustedInt(T,"AT2",1);break;case"FROM_END":T=_.getAdjustedInt(T,"AT2",0,!0),s.isNumber$$module$build$src$core$utils$string(String(T))?T===0&&(T=""):(_.definitions_.import_sys="import sys",T+=" or sys.maxsize");break;case"LAST":T="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[c+"["+A+" : "+T+"]",S.MEMBER]},B=function(T,_){const c=_.valueToCode(T,"LIST",S.NONE)||"[]",A=T.getFieldValue("TYPE");return T=T.getFieldValue("DIRECTION")==="1"?"False":"True",[_.provideFunction_("lists_sort",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):
  def try_float(s):
    try:
      return float(s)
    except:
      return 0
  key_funcs = {
    "NUMERIC": try_float,
    "TEXT": str,
    "IGNORE_CASE": lambda s: str(s).lower()
  }
  key_func = key_funcs[type]
  list_cpy = list(my_list)
  return sorted(list_cpy, key=key_func, reverse=reverse)
`)+"("+c+', "'+A+'", '+T+")",S.FUNCTION_CALL]},P=function(T,_){var c=T.getFieldValue("MODE");if(c==="SPLIT")c=_.valueToCode(T,"INPUT",S.MEMBER)||"''",T=_.valueToCode(T,"DELIM",S.NONE),T=c+".split("+T+")";else if(c==="JOIN")c=_.valueToCode(T,"INPUT",S.NONE)||"[]",T=(_.valueToCode(T,"DELIM",S.MEMBER)||"''")+".join("+c+")";else throw Error("Unknown mode: "+c);return[T,S.FUNCTION_CALL]},z=function(T,_){return["list(reversed("+(_.valueToCode(T,"LIST",S.NONE)||"[]")+"))",S.FUNCTION_CALL]},m=function(T,_){let c=0,A="",M,Y;_.STATEMENT_PREFIX&&(A+=_.injectId(_.STATEMENT_PREFIX,T));do Y=_.valueToCode(T,"IF"+c,S.NONE)||"False",M=_.statementToCode(T,"DO"+c)||_.PASS,_.STATEMENT_SUFFIX&&(M=_.prefixLines(_.injectId(_.STATEMENT_SUFFIX,T),_.INDENT)+M),A+=(c===0?"if ":"elif ")+Y+`:
`+M,c++;while(T.getInput("IF"+c));return(T.getInput("ELSE")||_.STATEMENT_SUFFIX)&&(M=T.getInput("ELSE")&&_.statementToCode(T,"ELSE")||_.PASS,_.STATEMENT_SUFFIX&&(M=_.prefixLines(_.injectId(_.STATEMENT_SUFFIX,T),_.INDENT)+M),A+=`else:
`+M),A},d=function(T,_){const c={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[T.getFieldValue("OP")],A=S.RELATIONAL,M=_.valueToCode(T,"A",A)||"0";return T=_.valueToCode(T,"B",A)||"0",[M+" "+c+" "+T,A]},y=function(T,_){const c=T.getFieldValue("OP")==="AND"?"and":"or",A=c==="and"?S.LOGICAL_AND:S.LOGICAL_OR;let M=_.valueToCode(T,"A",A);return T=_.valueToCode(T,"B",A),M||T?(_=c==="and"?"True":"False",M||(M=_),T||(T=_)):T=M="False",[M+" "+c+" "+T,A]},F=function(T,_){return["not "+(_.valueToCode(T,"BOOL",S.LOGICAL_NOT)||"True"),S.LOGICAL_NOT]},L=function(T,_){return[T.getFieldValue("BOOL")==="TRUE"?"True":"False",S.ATOMIC]},G=function(T,_){return["None",S.ATOMIC]},p=function(T,_){const c=_.valueToCode(T,"IF",S.CONDITIONAL)||"False",A=_.valueToCode(T,"THEN",S.CONDITIONAL)||"None";return T=_.valueToCode(T,"ELSE",S.CONDITIONAL)||"None",[A+" if "+c+" else "+T,S.CONDITIONAL]},I=function(T,_){let c;c=T.getField("TIMES")?String(parseInt(T.getFieldValue("TIMES"),10)):_.valueToCode(T,"TIMES",S.NONE)||"0",c=s.isNumber$$module$build$src$core$utils$string(c)?parseInt(c,10):"int("+c+")";let A=_.statementToCode(T,"DO");return A=_.addLoopTrap(A,T)||_.PASS,"for "+_.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE)+" in range("+c+`):
`+A},D=function(T,_){const c=T.getFieldValue("MODE")==="UNTIL";let A=_.valueToCode(T,"BOOL",c?S.LOGICAL_NOT:S.NONE)||"False",M=_.statementToCode(T,"DO");return M=_.addLoopTrap(M,T)||_.PASS,c&&(A="not "+A),"while "+A+`:
`+M},V=function(T,_){const c=_.getVariableName(T.getFieldValue("VAR"));var A=_.valueToCode(T,"FROM",S.NONE)||"0",M=_.valueToCode(T,"TO",S.NONE)||"0",Y=_.valueToCode(T,"BY",S.NONE)||"1";let q=_.statementToCode(T,"DO");q=_.addLoopTrap(q,T)||_.PASS;let ee="";T=function(){return _.provideFunction_("upRange",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start <= stop:
    yield start
    start += abs(step)
`)};const xe=function(){return _.provideFunction_("downRange",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start >= stop:
    yield start
    start -= abs(step)
`)};if(s.isNumber$$module$build$src$core$utils$string(A)&&s.isNumber$$module$build$src$core$utils$string(M)&&s.isNumber$$module$build$src$core$utils$string(Y))A=Number(A),M=Number(M),Y=Math.abs(Number(Y)),A%1===0&&M%1===0&&Y%1===0?(A<=M?(M++,T=A===0&&Y===1?M:A+", "+M,Y!==1&&(T+=", "+Y)):(M--,T=A+", "+M+", -"+Y),T="range("+T+")"):(T=A<M?T():xe(),T+="("+A+", "+M+", "+Y+")");else{const ze=function(at,Je){return s.isNumber$$module$build$src$core$utils$string(at)?at=String(Number(at)):at.match(/^\w+$/)||(Je=_.nameDB_.getDistinctName(c+Je,s.NameType$$module$build$src$core$names.VARIABLE),ee+=Je+" = "+at+`
`,at=Je),at};A=ze(A,"_start"),M=ze(M,"_end"),Y=ze(Y,"_inc"),typeof A=="number"&&typeof M=="number"?(T=A<M?T():xe(),T+="("+A+", "+M+", "+Y+")"):T="("+A+" <= "+M+") and "+T()+"("+A+", "+M+", "+Y+") or "+xe()+"("+A+", "+M+", "+Y+")"}return ee+="for "+c+" in "+T+`:
`+q},C=function(T,_){const c=_.getVariableName(T.getFieldValue("VAR")),A=_.valueToCode(T,"LIST",S.RELATIONAL)||"[]";let M=_.statementToCode(T,"DO");return M=_.addLoopTrap(M,T)||_.PASS,"for "+c+" in "+A+`:
`+M},K=function(T,_){let c="";if(_.STATEMENT_PREFIX&&(c+=_.injectId(_.STATEMENT_PREFIX,T)),_.STATEMENT_SUFFIX&&(c+=_.injectId(_.STATEMENT_SUFFIX,T)),_.STATEMENT_PREFIX){const A=T.getSurroundLoop();A&&!A.suppressPrefixSuffix&&(c+=_.injectId(_.STATEMENT_PREFIX,A))}switch(T.getFieldValue("FLOW")){case"BREAK":return c+`break
`;case"CONTINUE":return c+`continue
`}throw Error("Unknown flow statement.")},X=function(T,_){return T=Number(T.getFieldValue("NUM")),T===1/0?['float("inf")',S.FUNCTION_CALL]:T===-1/0?['-float("inf")',S.UNARY_SIGN]:[String(T),T<0?S.UNARY_SIGN:S.ATOMIC]},re=function(T,_){var c={ADD:[" + ",S.ADDITIVE],MINUS:[" - ",S.ADDITIVE],MULTIPLY:[" * ",S.MULTIPLICATIVE],DIVIDE:[" / ",S.MULTIPLICATIVE],POWER:[" ** ",S.EXPONENTIATION]}[T.getFieldValue("OP")];const A=c[0];c=c[1];const M=_.valueToCode(T,"A",c)||"0";return T=_.valueToCode(T,"B",c)||"0",[M+A+T,c]},se=function(T,_){const c=T.getFieldValue("OP");let A;if(c==="NEG")return A=_.valueToCode(T,"NUM",S.UNARY_SIGN)||"0",["-"+A,S.UNARY_SIGN];switch(_.definitions_.import_math="import math",T=c==="SIN"||c==="COS"||c==="TAN"?_.valueToCode(T,"NUM",S.MULTIPLICATIVE)||"0":_.valueToCode(T,"NUM",S.NONE)||"0",c){case"ABS":A="math.fabs("+T+")";break;case"ROOT":A="math.sqrt("+T+")";break;case"LN":A="math.log("+T+")";break;case"LOG10":A="math.log10("+T+")";break;case"EXP":A="math.exp("+T+")";break;case"POW10":A="math.pow(10,"+T+")";break;case"ROUND":A="round("+T+")";break;case"ROUNDUP":A="math.ceil("+T+")";break;case"ROUNDDOWN":A="math.floor("+T+")";break;case"SIN":A="math.sin("+T+" / 180.0 * math.pi)";break;case"COS":A="math.cos("+T+" / 180.0 * math.pi)";break;case"TAN":A="math.tan("+T+" / 180.0 * math.pi)"}if(A)return[A,S.FUNCTION_CALL];switch(c){case"ASIN":A="math.asin("+T+") / math.pi * 180";break;case"ACOS":A="math.acos("+T+") / math.pi * 180";break;case"ATAN":A="math.atan("+T+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+c)}return[A,S.MULTIPLICATIVE]},Pe=function(T,_){const c={PI:["math.pi",S.MEMBER],E:["math.e",S.MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",S.MULTIPLICATIVE],SQRT2:["math.sqrt(2)",S.MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",S.MEMBER],INFINITY:["float('inf')",S.ATOMIC]};return T=T.getFieldValue("CONSTANT"),T!=="INFINITY"&&(_.definitions_.import_math="import math"),c[T]},Te=function(T,_){var c={EVEN:[" % 2 == 0",S.MULTIPLICATIVE,S.RELATIONAL],ODD:[" % 2 == 1",S.MULTIPLICATIVE,S.RELATIONAL],WHOLE:[" % 1 == 0",S.MULTIPLICATIVE,S.RELATIONAL],POSITIVE:[" > 0",S.RELATIONAL,S.RELATIONAL],NEGATIVE:[" < 0",S.RELATIONAL,S.RELATIONAL],DIVISIBLE_BY:[null,S.MULTIPLICATIVE,S.RELATIONAL],PRIME:[null,S.NONE,S.FUNCTION_CALL]};const A=T.getFieldValue("PROPERTY"),[M,Y,q]=c[A];if(c=_.valueToCode(T,"NUMBER_TO_CHECK",Y)||"0",A==="PRIME")_.definitions_.import_math="import math",_.definitions_.from_numbers_import_Number="from numbers import Number",T=_.provideFunction_("math_isPrime",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(n):
  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  # If n is not a number but a string, try parsing it.
  if not isinstance(n, Number):
    try:
      n = float(n)
    except:
      return False
  if n == 2 or n == 3:
    return True
  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.
  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:
    return False
  # Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x in range(6, int(math.sqrt(n)) + 2, 6):
    if n % (x - 1) == 0 or n % (x + 1) == 0:
      return False
  return True
`)+"("+c+")";else if(A==="DIVISIBLE_BY"){if(T=_.valueToCode(T,"DIVISOR",S.MULTIPLICATIVE)||"0",T==="0")return["False",S.ATOMIC];T=c+" % "+T+" == 0"}else T=c+M;return[T,q]},Ae=function(T,_){_.definitions_.from_numbers_import_Number="from numbers import Number";const c=_.valueToCode(T,"DELTA",S.ADDITIVE)||"0";return T=_.getVariableName(T.getFieldValue("VAR")),T+" = ("+T+" if isinstance("+T+", Number) else 0) + "+c+`
`},we=function(T,_){const c=T.getFieldValue("OP");switch(T=_.valueToCode(T,"LIST",S.NONE)||"[]",c){case"SUM":_="sum("+T+")";break;case"MIN":_="min("+T+")";break;case"MAX":_="max("+T+")";break;case"AVERAGE":_.definitions_.from_numbers_import_Number="from numbers import Number",_=_.provideFunction_("math_mean",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = [e for e in myList if isinstance(e, Number)]
  if not localList: return
  return float(sum(localList)) / len(localList)
`)+"("+T+")";break;case"MEDIAN":_.definitions_.from_numbers_import_Number="from numbers import Number",_=_.provideFunction_("math_median",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = sorted([e for e in myList if isinstance(e, Number)])
  if not localList: return
  if len(localList) % 2 == 0:
    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0
  else:
    return localList[(len(localList) - 1) // 2]
`)+"("+T+")";break;case"MODE":_=_.provideFunction_("math_modes",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(some_list):
  modes = []
  # Using a lists of [item, count] to keep count rather than dict
  # to avoid "unhashable" errors when the counted item is itself a list or dict.
  counts = []
  maxCount = 1
  for item in some_list:
    found = False
    for count in counts:
      if count[0] == item:
        count[1] += 1
        maxCount = max(maxCount, count[1])
        found = True
    if not found:
      counts.append([item, 1])
  for counted_item, item_count in counts:
    if item_count == maxCount:
      modes.append(counted_item)
  return modes
`)+"("+T+")";break;case"STD_DEV":_.definitions_.import_math="import math",_=_.provideFunction_("math_standard_deviation",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(numbers):
  n = len(numbers)
  if n == 0: return
  mean = float(sum(numbers)) / n
  variance = sum((x - mean) ** 2 for x in numbers) / n
  return math.sqrt(variance)
`)+"("+T+")";break;case"RANDOM":_.definitions_.import_random="import random",_="random.choice("+T+")";break;default:throw Error("Unknown operator: "+c)}return[_,S.FUNCTION_CALL]},ve=function(T,_){const c=_.valueToCode(T,"DIVIDEND",S.MULTIPLICATIVE)||"0";return T=_.valueToCode(T,"DIVISOR",S.MULTIPLICATIVE)||"0",[c+" % "+T,S.MULTIPLICATIVE]},be=function(T,_){const c=_.valueToCode(T,"VALUE",S.NONE)||"0",A=_.valueToCode(T,"LOW",S.NONE)||"0";return T=_.valueToCode(T,"HIGH",S.NONE)||"float('inf')",["min(max("+c+", "+A+"), "+T+")",S.FUNCTION_CALL]},Xe=function(T,_){_.definitions_.import_random="import random";const c=_.valueToCode(T,"FROM",S.NONE)||"0";return T=_.valueToCode(T,"TO",S.NONE)||"0",["random.randint("+c+", "+T+")",S.FUNCTION_CALL]},Be=function(T,_){return _.definitions_.import_random="import random",["random.random()",S.FUNCTION_CALL]},ke=function(T,_){_.definitions_.import_math="import math";const c=_.valueToCode(T,"X",S.NONE)||"0";return["math.atan2("+(_.valueToCode(T,"Y",S.NONE)||"0")+", "+c+") / math.pi * 180",S.MULTIPLICATIVE]},ce=function(T,_){var c=[],A=T.workspace,M=s.allUsedVarModels$$module$build$src$core$variables(A)||[];for(var Y of M)M=Y.getName(),T.getVars().includes(M)||c.push(_.getVariableName(M));for(A=s.allDeveloperVariables$$module$build$src$core$variables(A),Y=0;Y<A.length;Y++)c.push(_.nameDB_.getName(A[Y],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));A=c.length?_.INDENT+"global "+c.join(", ")+`
`:"",c=_.getProcedureName(T.getFieldValue("NAME")),Y="",_.STATEMENT_PREFIX&&(Y+=_.injectId(_.STATEMENT_PREFIX,T)),_.STATEMENT_SUFFIX&&(Y+=_.injectId(_.STATEMENT_SUFFIX,T)),Y&&(Y=_.prefixLines(Y,_.INDENT)),M="",_.INFINITE_LOOP_TRAP&&(M=_.prefixLines(_.injectId(_.INFINITE_LOOP_TRAP,T),_.INDENT));let q="";T.getInput("STACK")&&(q=_.statementToCode(T,"STACK"));let ee="";T.getInput("RETURN")&&(ee=_.valueToCode(T,"RETURN",S.NONE)||"");let xe="";q&&ee&&(xe=Y),ee?ee=_.INDENT+"return "+ee+`
`:q||(q=_.PASS);const ze=[],at=T.getVars();for(let Je=0;Je<at.length;Je++)ze[Je]=_.getVariableName(at[Je]);return A="def "+c+"("+ze.join(", ")+`):
`+A+Y+M+q+xe+ee,A=_.scrub_(T,A),_.definitions_["%"+c]=A,null},te=function(T,_){const c=_.getProcedureName(T.getFieldValue("NAME")),A=[],M=T.getVars();for(let Y=0;Y<M.length;Y++)A[Y]=_.valueToCode(T,"ARG"+Y,S.NONE)||"None";return[c+"("+A.join(", ")+")",S.FUNCTION_CALL]},ue=function(T,_){return _.forBlock.procedures_callreturn(T,_)[0]+`
`},me=function(T,_){let c="if "+(_.valueToCode(T,"CONDITION",S.NONE)||"False")+`:
`;return _.STATEMENT_SUFFIX&&(c+=_.prefixLines(_.injectId(_.STATEMENT_SUFFIX,T),_.INDENT)),T.hasReturnValue_?(T=_.valueToCode(T,"VALUE",S.NONE)||"None",c+=_.INDENT+"return "+T+`
`):c+=_.INDENT+`return
`,c},Le=function(T,_){return[_.quote_(T.getFieldValue("TEXT")),S.ATOMIC]},Qe=function(T,_){switch(T.itemCount_){case 0:return["''",S.ATOMIC];case 1:return T=_.valueToCode(T,"ADD0",S.NONE)||"''",O(T);case 2:var c=_.valueToCode(T,"ADD0",S.NONE)||"''";return T=_.valueToCode(T,"ADD1",S.NONE)||"''",[O(c)[0]+" + "+O(T)[0],S.ADDITIVE];default:c=[];for(let A=0;A<T.itemCount_;A++)c[A]=_.valueToCode(T,"ADD"+A,S.NONE)||"''";return T=_.nameDB_.getDistinctName("x",s.NameType$$module$build$src$core$names.VARIABLE),["''.join([str("+T+") for "+T+" in ["+c.join(", ")+"]])",S.FUNCTION_CALL]}},Fe=function(T,_){const c=_.getVariableName(T.getFieldValue("VAR"));return T=_.valueToCode(T,"TEXT",S.NONE)||"''",c+" = str("+c+") + "+O(T)[0]+`
`},lt=function(T,_){return["len("+(_.valueToCode(T,"VALUE",S.NONE)||"''")+")",S.FUNCTION_CALL]},de=function(T,_){return["not len("+(_.valueToCode(T,"VALUE",S.NONE)||"''")+")",S.LOGICAL_NOT]},De=function(T,_){const c=T.getFieldValue("END")==="FIRST"?"find":"rfind",A=_.valueToCode(T,"FIND",S.NONE)||"''";return _=(_.valueToCode(T,"VALUE",S.MEMBER)||"''")+"."+c+"("+A+")",T.workspace.options.oneBasedIndex?[_+" + 1",S.ADDITIVE]:[_,S.FUNCTION_CALL]},he=function(T,_){const c=T.getFieldValue("WHERE")||"FROM_START",A=_.valueToCode(T,"VALUE",c==="RANDOM"?S.NONE:S.MEMBER)||"''";switch(c){case"FIRST":return[A+"[0]",S.MEMBER];case"LAST":return[A+"[-1]",S.MEMBER];case"FROM_START":return T=_.getAdjustedInt(T,"AT"),[A+"["+T+"]",S.MEMBER];case"FROM_END":return T=_.getAdjustedInt(T,"AT",1,!0),[A+"["+T+"]",S.MEMBER];case"RANDOM":return _.definitions_.import_random="import random",[_.provideFunction_("text_random_letter",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(text):
  x = int(random.random() * len(text))
  return text[x]
`)+"("+A+")",S.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Se=function(T,_){var c=T.getFieldValue("WHERE1");const A=T.getFieldValue("WHERE2"),M=_.valueToCode(T,"STRING",S.MEMBER)||"''";switch(c){case"FROM_START":c=_.getAdjustedInt(T,"AT1"),c===0&&(c="");break;case"FROM_END":c=_.getAdjustedInt(T,"AT1",1,!0);break;case"FIRST":c="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(A){case"FROM_START":T=_.getAdjustedInt(T,"AT2",1);break;case"FROM_END":T=_.getAdjustedInt(T,"AT2",0,!0),s.isNumber$$module$build$src$core$utils$string(String(T))?T===0&&(T=""):(_.definitions_.import_sys="import sys",T+=" or sys.maxsize");break;case"LAST":T="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[M+"["+c+" : "+T+"]",S.MEMBER]},Ue=function(T,_){const c={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[T.getFieldValue("CASE")];return[(_.valueToCode(T,"TEXT",S.MEMBER)||"''")+c,S.FUNCTION_CALL]},He=function(T,_){const c={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[T.getFieldValue("MODE")];return[(_.valueToCode(T,"TEXT",S.MEMBER)||"''")+c,S.FUNCTION_CALL]},et=function(T,_){return"print("+(_.valueToCode(T,"TEXT",S.NONE)||"''")+`)
`},tt=function(T,_){var c=_.provideFunction_("text_prompt",`
def ${_.FUNCTION_NAME_PLACEHOLDER_}(msg):
  try:
    return raw_input(msg)
  except NameError:
    return input(msg)
`);return _=T.getField("TEXT")?_.quote_(T.getFieldValue("TEXT")):_.valueToCode(T,"TEXT",S.NONE)||"''",c=c+"("+_+")",T.getFieldValue("TYPE")==="NUMBER"&&(c="float("+c+")"),[c,S.FUNCTION_CALL]},ht=function(T,_){const c=_.valueToCode(T,"TEXT",S.MEMBER)||"''";return T=_.valueToCode(T,"SUB",S.NONE)||"''",[c+".count("+T+")",S.FUNCTION_CALL]},nt=function(T,_){const c=_.valueToCode(T,"TEXT",S.MEMBER)||"''",A=_.valueToCode(T,"FROM",S.NONE)||"''";return T=_.valueToCode(T,"TO",S.NONE)||"''",[c+".replace("+A+", "+T+")",S.MEMBER]},st=function(T,_){return[(_.valueToCode(T,"TEXT",S.MEMBER)||"''")+"[::-1]",S.MEMBER]},ot=function(T,_){return[_.getVariableName(T.getFieldValue("VAR")),S.ATOMIC]},it=function(T,_){const c=_.valueToCode(T,"VALUE",S.NONE)||"0";return _.getVariableName(T.getFieldValue("VAR"))+" = "+c+`
`},S;(function(T){T[T.ATOMIC=0]="ATOMIC",T[T.COLLECTION=1]="COLLECTION",T[T.STRING_CONVERSION=1]="STRING_CONVERSION",T[T.MEMBER=2.1]="MEMBER",T[T.FUNCTION_CALL=2.2]="FUNCTION_CALL",T[T.EXPONENTIATION=3]="EXPONENTIATION",T[T.UNARY_SIGN=4]="UNARY_SIGN",T[T.BITWISE_NOT=4]="BITWISE_NOT",T[T.MULTIPLICATIVE=5]="MULTIPLICATIVE",T[T.ADDITIVE=6]="ADDITIVE",T[T.BITWISE_SHIFT=7]="BITWISE_SHIFT",T[T.BITWISE_AND=8]="BITWISE_AND",T[T.BITWISE_XOR=9]="BITWISE_XOR",T[T.BITWISE_OR=10]="BITWISE_OR",T[T.RELATIONAL=11]="RELATIONAL",T[T.LOGICAL_NOT=12]="LOGICAL_NOT",T[T.LOGICAL_AND=13]="LOGICAL_AND",T[T.LOGICAL_OR=14]="LOGICAL_OR",T[T.CONDITIONAL=15]="CONDITIONAL",T[T.LAMBDA=16]="LAMBDA",T[T.NONE=99]="NONE"})(S||(S={}));var ae=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(T="Python"){super(T),this.ORDER_OVERRIDES=[[S.FUNCTION_CALL,S.MEMBER],[S.FUNCTION_CALL,S.FUNCTION_CALL],[S.MEMBER,S.MEMBER],[S.MEMBER,S.FUNCTION_CALL],[S.LOGICAL_NOT,S.LOGICAL_NOT],[S.LOGICAL_AND,S.LOGICAL_AND],[S.LOGICAL_OR,S.LOGICAL_OR]],this.PASS="",this.isInitialized=!1;for(const _ in S)T=S[_],typeof T!="string"&&(this["ORDER_"+_]=T);this.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip")}init(T){super.init(T),this.PASS=this.INDENT+`pass
`,this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(T.getVariableMap()),this.nameDB_.populateVariables(T),this.nameDB_.populateProcedures(T);const _=[];var c=s.allDeveloperVariables$$module$build$src$core$variables(T);for(let A=0;A<c.length;A++)_.push(this.nameDB_.getName(c[A],s.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE)+" = None");for(T=s.allUsedVarModels$$module$build$src$core$variables(T),c=0;c<T.length;c++)_.push(this.getVariableName(T[c].getId())+" = None");this.definitions_.variables=_.join(`
`),this.isInitialized=!0}finish(T){const _=[],c=[];for(let A in this.definitions_){const M=this.definitions_[A];M.match(/^(from\s+\S+\s+)?import\s+\S+/)?_.push(M):c.push(M)}return T=super.finish(T),this.isInitialized=!1,this.nameDB_.reset(),(_.join(`
`)+`

`+c.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+T}scrubNakedValue(T){return T+`
`}quote_(T){T=T.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`);let _="'";return T.includes("'")&&(T.includes('"')?T=T.replace(/'/g,"\\'"):_='"'),_+T+_}multiline_quote_(T){return T.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)}scrub_(T,_,c=!1){let A="";if(!T.outputConnection||!T.outputConnection.targetConnection){var M=T.getCommentText();M&&(M=s.wrap$$module$build$src$core$utils$string(M,this.COMMENT_WRAP-3),A+=this.prefixLines(M+`
`,"# "));for(let Y=0;Y<T.inputList.length;Y++)T.inputList[Y].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(M=T.inputList[Y].connection.targetBlock())&&(M=this.allNestedComments(M))&&(A+=this.prefixLines(M,"# "))}return T=T.nextConnection&&T.nextConnection.targetBlock(),c=c?"":this.blockToCode(T),A+_+c}getAdjustedInt(T,_,c=0,A=!1){T.workspace.options.oneBasedIndex&&c--;const M=T.workspace.options.oneBasedIndex?"1":"0";return T=this.valueToCode(T,_,c?S.ADDITIVE:S.NONE)||M,s.isNumber$$module$build$src$core$utils$string(T)?(T=parseInt(T,10)+c,A&&(T=-T)):(T=c>0?"int("+T+" + "+c+")":c<0?"int("+T+" - "+-c+")":"int("+T+")",A&&(T="-"+T)),T}},j={};j.lists_create_empty=l,j.lists_create_with=f,j.lists_getIndex=w,j.lists_getSublist=k,j.lists_indexOf=x,j.lists_isEmpty=N,j.lists_length=g,j.lists_repeat=E,j.lists_reverse=z,j.lists_setIndex=R,j.lists_sort=B,j.lists_split=P;var $e={};$e.controls_if=m,$e.controls_ifelse=m,$e.logic_boolean=L,$e.logic_compare=d,$e.logic_negate=F,$e.logic_null=G,$e.logic_operation=y,$e.logic_ternary=p;var Ne={};Ne.controls_flow_statements=K,Ne.controls_for=V,Ne.controls_forEach=C,Ne.controls_repeat=I,Ne.controls_repeat_ext=I,Ne.controls_whileUntil=D;var Ie={};Ie.math_arithmetic=re,Ie.math_atan2=ke,Ie.math_change=Ae,Ie.math_constant=Pe,Ie.math_constrain=be,Ie.math_modulo=ve,Ie.math_number=X,Ie.math_number_property=Te,Ie.math_on_list=we,Ie.math_random_float=Be,Ie.math_random_int=Xe,Ie.math_round=se,Ie.math_single=se,Ie.math_trig=se;var Ve={};Ve.procedures_callnoreturn=ue,Ve.procedures_callreturn=te,Ve.procedures_defnoreturn=ce,Ve.procedures_defreturn=ce,Ve.procedures_ifreturn=me;var le=/^\s*'([^']|\\')*'\s*$/,O=function(T){return le.test(T)?[T,S.ATOMIC]:["str("+T+")",S.FUNCTION_CALL]},H={};H.text=Le,H.text_append=Fe,H.text_changeCase=Ue,H.text_charAt=he,H.text_count=ht,H.text_getSubstring=Se,H.text_indexOf=De,H.text_isEmpty=de,H.text_join=Qe,H.text_length=lt,H.text_print=et,H.text_prompt=tt,H.text_prompt_ext=tt,H.text_replace=nt,H.text_reverse=st,H.text_trim=He;var J={};J.variables_get=ot,J.variables_set=it;var ne={};ne.variables_get_dynamic=ot,ne.variables_set_dynamic=it;var ye=new ae;ye.addReservedWords("math,random,Number");var h=Object.assign({},j,$e,Ne,Ie,Ve,H,J,ne);for(const T in h)ye.forBlock[T]=h[T];var v={};return v.Order=S,v.PythonGenerator=ae,v.pythonGenerator=ye,v.__namespace__=s,v})})(python_compressed$1)),python_compressed$1.exports}var dist$4=dist$5.exports,hasRequiredDist$2;function requireDist$2(){return hasRequiredDist$2||(hasRequiredDist$2=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed(),requireJavascript_compressed(),requireDart_compressed(),requireLua_compressed(),requirePhp_compressed(),requirePython_compressed())})(dist$4,(o,s,l,f,E,g)=>(()=>{var N={127:Te=>{Te.exports=s},157:Te=>{Te.exports=f},370:Te=>{Te.exports=o},379:Te=>{Te.exports=l},537:Te=>{Te.exports=E},557:Te=>{Te.exports=g}},x={};function w(Te){var Ae=x[Te];if(Ae!==void 0)return Ae.exports;var we=x[Te]={exports:{}};return N[Te](we,we.exports,w),we.exports}w.d=(Te,Ae)=>{for(var we in Ae)w.o(Ae,we)&&!w.o(Te,we)&&Object.defineProperty(Te,we,{enumerable:!0,get:Ae[we]})},w.o=(Te,Ae)=>Object.prototype.hasOwnProperty.call(Te,Ae),w.r=Te=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Te,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Te,"__esModule",{value:!0})};var R={};w.r(R),w.d(R,{FieldMultilineInput:()=>F,installAllBlocks:()=>Pe,registerFieldMultilineInput:()=>L,textMultiline:()=>k});var k={};w.r(k),w.d(k,{BLOCK_NAME:()=>G,blockDefinition:()=>re,installBlock:()=>se,toDart:()=>D,toJavascript:()=>I,toLua:()=>V,toPhp:()=>C,toPython:()=>K});var B=w(370),P=w(127),z=w(379),m=w(157),d=w(537),y=w(557);class F extends B.FieldTextInput{constructor(Ae,we,ve){super(B.Field.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,Ae!==B.Field.SKIP_SETUP&&(ve&&this.configure_(ve),this.setValue(Ae),we&&this.setValidator(we))}configure_(Ae){super.configure_(Ae),Ae.maxLines&&this.setMaxLines(Ae.maxLines)}toXml(Ae){return Ae.textContent=this.getValue().replace(/\n/g,"&#10;"),Ae}fromXml(Ae){this.setValue(Ae.textContent.replace(/&#10;/g,`
`))}saveState(){const Ae=this.saveLegacyState(F);return Ae!==null?Ae:this.getValue()}loadState(Ae){this.loadLegacyState(B.Field,Ae)||this.setValue(Ae)}initView(){this.createBorderRect_(),this.textGroup=B.utils.dom.createSvgElement(B.utils.Svg.G,{class:"blocklyEditableField"},this.fieldGroup_)}getDisplayText_(){const Ae=this.getSourceBlock();if(!Ae)throw new Error("The field has not yet been attached to its input. Call appendField to attach it.");let we=this.getText();if(!we)return B.Field.NBSP;const ve=we.split(`
`);we="";const be=this.isOverflowedY_?this.maxLines_:ve.length;for(let Xe=0;Xe<be;Xe++){let Be=ve[Xe];Be.length>this.maxDisplayLength?Be=Be.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&Xe===be-1&&(Be=Be.substring(0,Be.length-3)+"..."),Be=Be.replace(/\s/g,B.Field.NBSP),we+=Be,Xe!==be-1&&(we+=`
`)}return Ae.RTL&&(we+="‏"),we}doValueUpdate_(Ae){super.doValueUpdate_(Ae),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){const Ae=this.getSourceBlock();if(!Ae)throw new Error("The field has not yet been attached to its input. Call appendField to attach it.");let we;const ve=this.textGroup;for(;we=ve.firstChild;)ve.removeChild(we);const be=this.getConstants();if(!be)throw Error("Constants not found");const Xe=this.getDisplayText_().split(`
`);let Be=0;for(let ke=0;ke<Xe.length;ke++){const ce=be.FIELD_TEXT_HEIGHT+be.FIELD_BORDER_RECT_Y_PADDING;B.utils.dom.createSvgElement(B.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:be.FIELD_BORDER_RECT_X_PADDING,y:Be+be.FIELD_BORDER_RECT_Y_PADDING,dy:be.FIELD_TEXT_BASELINE},ve).appendChild(document.createTextNode(Xe[ke])),Be+=ce}if(this.isBeingEdited_){const ke=this.htmlInput_;this.isOverflowedY_?B.utils.dom.addClass(ke,"blocklyHtmlTextAreaInputOverflowedY"):B.utils.dom.removeClass(ke,"blocklyHtmlTextAreaInputOverflowedY")}if(this.updateSize_(),this.isBeingEdited_){Ae.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_();const ke=this.htmlInput_;this.isTextValid_?(B.utils.dom.removeClass(ke,"blocklyInvalidInput"),B.utils.aria.setState(ke,B.utils.aria.State.INVALID,!1)):(B.utils.dom.addClass(ke,"blocklyInvalidInput"),B.utils.aria.setState(ke,B.utils.aria.State.INVALID,!0))}}updateSize_(){const Ae=this.getConstants();if(!Ae)throw Error("Constants not found");const we=this.textGroup.childNodes;Ae.FIELD_TEXT_FONTSIZE,Ae.FIELD_TEXT_FONTWEIGHT,Ae.FIELD_TEXT_FONTFAMILY;let ve=0,be=0;for(let Xe=0;Xe<we.length;Xe++){const Be=we[Xe],ke=B.utils.dom.getTextWidth(Be);ke>ve&&(ve=ke),be+=Ae.FIELD_TEXT_HEIGHT+(Xe>0?Ae.FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){const Xe=String(this.value_).split(`
`),Be=B.utils.dom.createSvgElement(B.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});for(let ce=0;ce<Xe.length;ce++){Xe[ce].length>this.maxDisplayLength&&(Xe[ce]=Xe[ce].substring(0,this.maxDisplayLength)),Be.textContent=Xe[ce];const te=B.utils.dom.getTextWidth(Be);te>ve&&(ve=te)}const ke=this.htmlInput_;ve+=ke.offsetWidth-ke.clientWidth}this.borderRect_&&(be+=2*Ae.FIELD_BORDER_RECT_Y_PADDING,ve+=2*Ae.FIELD_BORDER_RECT_X_PADDING+1,this.borderRect_.setAttribute("width",`${ve}`),this.borderRect_.setAttribute("height",`${be}`)),this.size_.width=ve,this.size_.height=be,this.positionBorderRect_()}showEditor_(Ae,we){super.showEditor_(Ae,we),this.forceRerender()}widgetCreate_(){const Ae=B.WidgetDiv.getDiv(),we=this.workspace_.getScale(),ve=this.getConstants();if(!ve)throw Error("Constants not found");const be=document.createElement("textarea");be.className="blocklyHtmlInput blocklyHtmlTextAreaInput",be.setAttribute("spellcheck",String(this.spellcheck_));const Xe=ve.FIELD_TEXT_FONTSIZE*we+"pt";Ae.style.fontSize=Xe,be.style.fontSize=Xe;const Be=B.FieldTextInput.BORDERRADIUS*we+"px";be.style.borderRadius=Be;const ke=ve.FIELD_BORDER_RECT_X_PADDING*we,ce=ve.FIELD_BORDER_RECT_Y_PADDING*we/2;be.style.padding=ce+"px "+ke+"px "+ce+"px "+ke+"px";const te=ve.FIELD_TEXT_HEIGHT+ve.FIELD_BORDER_RECT_Y_PADDING;return be.style.lineHeight=te*we+"px",Ae.appendChild(be),be.value=be.defaultValue=this.getEditorText_(this.value_),be.setAttribute("data-untyped-default-value",String(this.value_)),be.setAttribute("data-old-value",""),B.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(be),be}setMaxLines(Ae){typeof Ae=="number"&&Ae>0&&Ae!==this.maxLines_&&(this.maxLines_=Ae,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(Ae){Ae.key!=="Enter"&&super.onHtmlInputKeyDown_(Ae)}static fromJson(Ae){return new this(B.utils.parsing.replaceMessageReferences(Ae.text),void 0,Ae)}}function L(){B.fieldRegistry.register("field_multilinetext",F)}B.Css.register(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);const G="text_multiline",p={type:G,message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]};function I(Te,Ae){const we=Ae.multiline_quote_(Te.getFieldValue("TEXT")),ve=we.indexOf("+")!==-1?P.Order.ADDITION:P.Order.ATOMIC;return[we,ve]}function D(Te,Ae){const we=Ae.multiline_quote_(Te.getFieldValue("TEXT")),ve=we.indexOf("+")!==-1?z.Order.ADDITIVE:z.Order.ATOMIC;return[we,ve]}function V(Te,Ae){const we=Ae.multiline_quote_(Te.getFieldValue("TEXT")),ve=we.indexOf("..")!==-1?m.Order.CONCATENATION:m.Order.ATOMIC;return[we,ve]}function C(Te,Ae){const we=Ae.multiline_quote_(Te.getFieldValue("TEXT")),ve=we.indexOf(".")!==-1?d.Order.STRING_CONCAT:d.Order.ATOMIC;return[we,ve]}function K(Te,Ae){const we=Ae.multiline_quote_(Te.getFieldValue("TEXT")),ve=we.indexOf("+")!==-1?y.Order.ADDITIVE:y.Order.ATOMIC;return[we,ve]}const X=B.common.createBlockDefinitionsFromJsonArray([p]),re=X[G];function se(Te={}){L(),B.common.defineBlocks(X),Te.javascript&&(Te.javascript.forBlock[G]=I),Te.dart&&(Te.dart.forBlock[G]=D),Te.lua&&(Te.lua.forBlock[G]=V),Te.php&&(Te.php.forBlock[G]=C),Te.python&&(Te.python.forBlock[G]=K)}const Pe=se;return R})())})(dist$5)),dist$5.exports}var distExports$2=requireDist$2();distExports$2.textMultiline.installBlock({javascript:javascriptGenerator});Blocks.newline={init:function(){this.appendDummyInput().appendField("new line"),this.setOutput(!0,"String"),this.setStyle("text_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.newline=function(){return['"\\n"',Order.ATOMIC]};var dist$3={exports:{}};var dist$2=dist$3.exports,hasRequiredDist$1;function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed(),requireJavascript_compressed(),requireDart_compressed(),requireLua_compressed(),requirePhp_compressed(),requirePython_compressed())})(dist$2,(o,s,l,f,E,g)=>(()=>{var N={127:k=>{k.exports=s},157:k=>{k.exports=f},370:k=>{k.exports=o},379:k=>{k.exports=l},537:k=>{k.exports=E},557:k=>{k.exports=g},594:function(k,B,P){var z;z=(m,d,y,F,L,G)=>(()=>{var p={127:C=>{C.exports=d},157:C=>{C.exports=F},370:C=>{C.exports=m},379:C=>{C.exports=y},462:function(C,K,X){var re;re=se=>(()=>{var Pe={370:ke=>{ke.exports=se}},Te={};function Ae(ke){var ce=Te[ke];if(ce!==void 0)return ce.exports;var te=Te[ke]={exports:{}};return Pe[ke](te,te.exports,Ae),te.exports}Ae.d=(ke,ce)=>{for(var te in ce)Ae.o(ce,te)&&!Ae.o(ke,te)&&Object.defineProperty(ke,te,{enumerable:!0,get:ce[te]})},Ae.o=(ke,ce)=>Object.prototype.hasOwnProperty.call(ke,ce),Ae.r=ke=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ke,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ke,"__esModule",{value:!0})};var we={};Ae.r(we),Ae.d(we,{FieldGridDropdown:()=>Be});var ve=Ae(370);class be{constructor(ce,te,ue,me){this.value=ue,this.selected=!1,this.selectionCallback=me,this.element=document.createElement("button"),this.element.id=ve.utils.idGenerator.getNextUniqueId(),this.element.className="blocklyFieldGridItem",this.clickHandler=ve.browserEvents.conditionalBind(this.element,"click",this,this.onClick,!0),ce.appendChild(this.element);const Le=typeof te=="string"?document.createTextNode(te):te;this.element.appendChild(Le),ve.utils.aria.setRole(this.element,ve.utils.aria.Role.GRIDCELL)}dispose(){this.selectionCallback=null,this.element.remove(),this.clickHandler&&(ve.browserEvents.unbind(this.clickHandler),this.clickHandler=null)}getId(){return this.element.id}getValue(){return this.value}isSelected(){return this.selected}setSelected(ce){this.selected=ce,ve.utils.aria.setState(this.element,ve.utils.aria.State.SELECTED,this.selected),this.element.classList.toggle("blocklyFieldGridItemSelected",this.selected),this.isSelected()&&this.focus()}onClick(){var ce;this.setSelected(!0),(ce=this.selectionCallback)===null||ce===void 0||ce.call(this,this)}focus(){this.element.focus({preventScroll:!0});const ce=this.element.offsetParent;if(!ce)return;const te=this.element.offsetTop,ue=ce.scrollTop,me=this.getInterItemSpacing();te<ue?ce.scrollTo(0,te-me):te+this.element.offsetHeight>ue+ce.clientHeight&&ce.scrollBy(0,te+this.element.clientHeight-(ue+ce.clientHeight)+me)}getInterItemSpacing(){const ce=this.element.closest(".blocklyFieldGrid");if(!ce)return 0;const te=[...ce.querySelectorAll(".blocklyFieldGridItem")];if(!te.length)return 0;const ue=te[0].offsetTop,me=te[0].offsetHeight;for(const Le of te)if(Le.offsetTop!==ue)return Le.offsetTop-me-ue;return 0}}class Xe{constructor(ce,te,ue,me,Le){if(this.columns=ue,this.rtl=me,this.itemIndices=new Map,this.items=new Array,this.keyDownHandler=null,this.pointerMoveHandler=null,this.selectionCallback=Le,this.root=document.createElement("div"),this.root.className="blocklyFieldGrid",this.root.tabIndex=0,ve.utils.aria.setRole(this.root,ve.utils.aria.Role.GRID),ce.appendChild(this.root),this.populateItems(te),this.keyDownHandler=ve.browserEvents.conditionalBind(this.root,"keydown",this,this.onKeyDown),this.pointerMoveHandler=ve.browserEvents.conditionalBind(this.root,"pointermove",this,this.onPointerMove,!0),!(ue>=1))throw new Error(`Number of columns must be >= 1; got ${ue}`);this.columns=ue,this.root.style.setProperty("--grid-columns",`${this.columns}`)}populateItems(ce){let te=document.createElement("div");for(const[ue,me]of ce.entries()){if(me===ve.FieldDropdown.SEPARATOR)continue;ue%this.columns===0&&(te=document.createElement("div"),te.className="blocklyFieldGridRow",ve.utils.aria.setRole(te,ve.utils.aria.Role.ROW),this.root.appendChild(te));const[Le,Qe]=me,Fe=(()=>{if((de=Le)&&typeof de=="object"&&"src"in de&&typeof de.src=="string"&&"alt"in de&&typeof de.alt=="string"&&"width"in de&&typeof de.width=="number"&&"height"in de&&typeof de.height=="number"){const De=new Image(Le.width,Le.height);return De.src=Le.src,De.alt=Le.alt||"",De}var de;return Le})(),lt=new be(te,Fe,Qe,de=>{var De;this.setSelectedValue(de.getValue()),(De=this.selectionCallback)===null||De===void 0||De.call(this,de)});this.itemIndices.set(lt.getId(),this.itemIndices.size),this.items.push(lt)}}dispose(){this.selectionCallback=void 0;for(const ce of this.items)ce.dispose();this.itemIndices.clear(),this.items.length=0,this.keyDownHandler&&(ve.browserEvents.unbind(this.keyDownHandler),this.keyDownHandler=null),this.pointerMoveHandler&&(ve.browserEvents.unbind(this.pointerMoveHandler),this.pointerMoveHandler=null),this.root.remove()}onKeyDown(ce){if(!(!this.items.length||ce.shiftKey||ce.ctrlKey||ce.metaKey||ce.altKey)){switch(ce.key){case"ArrowUp":this.moveFocus(-1*this.columns,!0);break;case"ArrowDown":this.moveFocus(this.columns,!0);break;case"ArrowLeft":this.moveFocus(-1*(this.rtl?-1:1),!0);break;case"ArrowRight":this.moveFocus(1*(this.rtl?-1:1),!0);break;case"PageUp":case"Home":this.moveFocus(0,!1);break;case"PageDown":case"End":this.moveFocus(this.items.length-1,!1);break;case"Enter":case"Space":return void ce.stopPropagation();default:return}ce.preventDefault(),ce.stopPropagation()}}onPointerMove(ce){if(!ce.movementX&&!ce.movementY||!(ce.target instanceof Element))return;const te=ce.target.closest(".blocklyFieldGridItem");if(!te)return;const ue=te.id,me=this.itemIndices.get(ue);me!==void 0&&this.moveFocus(me,!1)}setSelectedValue(ce){for(const[te,ue]of this.items.entries()){const me=ue.getValue()===ce;ue.setSelected(me),me&&this.moveFocus(te,!1)}}moveFocus(ce,te){let ue=ce;if(te){const Le=this.getFocusedItem();if(!Le)return;ue+=this.indexOfItem(Le)}const me=this.itemAtIndex(ue);me&&(me.focus(),ve.utils.aria.setState(this.root,ve.utils.aria.State.ACTIVEDESCENDANT,me.getId()))}indexOfItem(ce){var te;return(te=this.itemIndices.get(ce.getId()))!==null&&te!==void 0?te:-1}itemAtIndex(ce){return this.items[ce]}getFocusedItem(){var ce;const te=(ce=this.root.querySelector(".blocklyFieldGridItem:focus"))!==null&&ce!==void 0?ce:this.root.querySelector(".blocklyFieldGridItem");if(!te||!te.id)return;const ue=this.itemIndices.get(te.id);return ue!==void 0?this.itemAtIndex(ue):void 0}}class Be extends ve.FieldDropdown{constructor(ce,te,ue){super(ce,te,ue),this.columns=3,ue?.columns&&this.setColumns(parseInt(`${ue.columns}`)),ue&&ue.primaryColour&&(this.primaryColour=ue.primaryColour),ue&&ue.borderColour&&(this.borderColour=ue.borderColour)}static fromJson(ce){if(!ce.options)throw new Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(ce.options,void 0,ce)}setColumns(ce){var te;!isNaN(ce)&&ce>=1&&(this.columns=ce,ve.DropDownDiv.getOwner()===this&&ve.DropDownDiv.isVisible()&&((te=this.grid)===null||te===void 0||te.dispose(),this.showEditor_()))}showEditor_(ce){var te;ve.DropDownDiv.clearContent();const ue=!!(!((te=this.getSourceBlock())===null||te===void 0)&&te.workspace.RTL);this.grid=new Xe(ve.DropDownDiv.getContentDiv(),this.getOptions(!1),this.columns,ue,Qe=>{ve.DropDownDiv.hideIfOwner(this),this.setValue(Qe.getValue())}),ve.DropDownDiv.getContentDiv().classList.add("blocklyFieldGridContainer");const me=this.getColours();me&&me.border&&ve.DropDownDiv.setColour(me.primary,me.border),ve.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));const Le=this.getValue();Le&&this.grid.setSelectedValue(Le)}doValueUpdate_(ce){var te;super.doValueUpdate_(ce),(te=this.grid)===null||te===void 0||te.setSelectedValue(ce)}getColours(){var ce,te;if(this.primaryColour&&this.borderColour)return{primary:this.primaryColour,border:this.borderColour};const ue=this.getSourceBlock();if(!(ue instanceof ve.BlockSvg))return;const me=ue.isShadow()?ue.getParent():ue;return me?{primary:(ce=this.primaryColour)!==null&&ce!==void 0?ce:me.getColour(),border:(te=this.borderColour)!==null&&te!==void 0?te:me.getColourTertiary()}:void 0}}return ve.fieldRegistry.register("field_grid_dropdown",Be),ve.Css.register(`
   .blocklyFieldGridContainer {
     padding: 7px;
     overflow: auto;
   }
   
  .blocklyFieldGrid {
    display: grid;
    grid-gap: 7px;
    grid-template-columns: repeat(var(--grid-columns), min-content);
  }

 .blocklyFieldGrid .blocklyFieldGridItem {
   border: 1px solid rgba(1, 1, 1, 0.5);
   border-radius: 4px;
   color: white;
   min-width: auto;
   background: none;
   white-space: nowrap;
   cursor: pointer;
   padding: 6px 15px;
 }
 
 .blocklyFieldGrid .blocklyFieldGridRow {
   display: contents;
 }
 
 .blocklyFieldGrid .blocklyFieldGridItem.blocklyFieldGridItemSelected {
   background-color: rgba(1, 1, 1, 0.25);
 }

 .blocklyFieldGrid .blocklyFieldGridItem:focus {
   box-shadow: 0 0 0 4px hsla(0, 0%, 100%, .2);
   outline: none;
 }
 `),we})(),C.exports=re(X(370))},537:C=>{C.exports=L},557:C=>{C.exports=G}},I={};function D(C){var K=I[C];if(K!==void 0)return K.exports;var X=I[C]={exports:{}};return p[C].call(X.exports,X,X.exports,D),X.exports}D.d=(C,K)=>{for(var X in K)D.o(K,X)&&!D.o(C,X)&&Object.defineProperty(C,X,{enumerable:!0,get:K[X]})},D.o=(C,K)=>Object.prototype.hasOwnProperty.call(C,K),D.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var V={};return(()=>{D.r(V),D.d(V,{FieldColour:()=>Ae,colourBlend:()=>re,colourPicker:()=>C,colourRandom:()=>K,colourRgb:()=>X,installAllBlocks:()=>Y,registerFieldColour:()=>ve});var C={};D.r(C),D.d(C,{BLOCK_NAME:()=>te,blockDefinition:()=>De,installBlock:()=>he,toDart:()=>Le,toJavascript:()=>me,toLua:()=>Qe,toPhp:()=>Fe,toPython:()=>lt});var K={};D.r(K),D.d(K,{BLOCK_NAME:()=>Se,blockDefinition:()=>ot,installBlock:()=>it,toDart:()=>et,toJavascript:()=>He,toLua:()=>tt,toPhp:()=>ht,toPython:()=>nt});var X={};D.r(X),D.d(X,{BLOCK_NAME:()=>S,blockDefinition:()=>O,installBlock:()=>H,toDart:()=>$e,toJavascript:()=>j,toLua:()=>Ne,toPhp:()=>Ie,toPython:()=>Ve});var re={};D.r(re),D.d(re,{BLOCK_NAME:()=>J,blockDefinition:()=>A,installBlock:()=>M,toDart:()=>h,toJavascript:()=>ye,toLua:()=>v,toPhp:()=>T,toPython:()=>_});var se=D(370),Pe=D(462);const Te=["#ffffff","#cccccc","#c0c0c0","#999999","#666666","#333333","#000000","#ffcccc","#ff6666","#ff0000","#cc0000","#990000","#660000","#330000","#ffcc99","#ff9966","#ff9900","#ff6600","#cc6600","#993300","#663300","#ffff99","#ffff66","#ffcc66","#ffcc33","#cc9933","#996633","#663333","#ffffcc","#ffff33","#ffff00","#ffcc00","#999900","#666600","#333300","#99ff99","#66ff99","#33ff33","#33cc00","#009900","#006600","#003300","#99ffff","#33ffff","#66cccc","#00cccc","#339999","#336666","#003333","#ccffff","#66ffff","#33ccff","#3366ff","#3333ff","#000099","#000066","#ccccff","#9999ff","#6666cc","#6633ff","#6600cc","#333399","#330099","#ffccff","#ff99ff","#cc66cc","#cc33cc","#993399","#663366","#330033"];class Ae extends Pe.FieldGridDropdown{constructor(ee,xe,ze){var at,Je;super(we((at=ze?.colourOptions)!==null&&at!==void 0?at:Te),xe,Object.assign(Object.assign({},ze),{columns:(Je=ze?.columns)!==null&&Je!==void 0?Je:7})),this.isDirty_=!1,ee!==se.Field.SKIP_SETUP&&this.setValue(ee)}trimOptions(ee){return{options:ee}}configure_(ee){super.configure_(ee),ee.colourOptions&&this.setColours(ee.colourOptions,ee.colourTitles)}initView(){const ee=this.getConstants();if(!ee)throw Error("Constants not found");this.size_=new se.utils.Size(ee.FIELD_COLOUR_DEFAULT_WIDTH,ee.FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}showEditor_(ee){super.showEditor_(ee),se.DropDownDiv.getContentDiv().classList.add("blocklyFieldColour"),se.DropDownDiv.repositionForWindowResize()}isFullBlockField(){if(!this.getSourceBlock())throw new se.UnattachedFieldError;const ee=this.getConstants();return this.blockIsSimpleReporter()&&!!ee?.FIELD_COLOUR_FULL_BLOCK}blockIsSimpleReporter(){const ee=this.getSourceBlock();if(!ee)throw new se.UnattachedFieldError;if(!ee.outputConnection)return!1;for(const xe of ee.inputList)if(xe.connection||xe.fieldRow.length>1)return!1;return!0}applyColour(){const ee=this.getSourceBlock();if(!ee)throw new se.UnattachedFieldError;if(!this.fieldGroup_)return;const xe=this.borderRect_;if(!xe)throw new Error("The border rect has not been initialized");this.isFullBlockField()?(xe.style.display="none",ee.pathObject.svgPath.setAttribute("fill",this.getValue()),ee.pathObject.svgPath.setAttribute("stroke","#fff")):(xe.style.display="block",xe.style.fill=this.getValue())}getSize(){var ee;return!((ee=this.getConstants())===null||ee===void 0)&&ee.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){this.updateSize_();const ee=this.getSourceBlock();if(!ee)throw new se.UnattachedFieldError;ee.applyColour()}updateSize_(ee){const xe=this.getConstants();if(!xe)return;let ze,at;this.isFullBlockField()?(ze=2*(ee??0),at=xe.FIELD_TEXT_HEIGHT):(ze=xe.FIELD_COLOUR_DEFAULT_WIDTH,at=xe.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=at,this.size_.width=ze,this.positionBorderRect_()}doClassValidation_(ee){return typeof ee!="string"?null:se.utils.colour.parse(ee)}getText(){let ee=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(ee)&&(ee="#"+ee[1]+ee[3]+ee[5]),ee}setColours(ee,xe){const ze=we(ee,xe);return this.setOptions(ze),this}static fromJson(ee){return new this(ee.colour,void 0,ee)}}function we(q,ee){return q.map((xe,ze)=>{const at=document.createElement("div");return at.className="blocklyColourSwatch",at.style.backgroundColor=xe,ee&&ze<ee.length&&(at.title=ee[ze]),[at,xe]})}function ve(){se.fieldRegistry.register("field_colour",Ae)}Ae.prototype.DEFAULT_VALUE="#ffffff",se.Css.register(`
.blocklyFieldColour .blocklyFieldGridItemSelected,
.blocklyFieldGridItemSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}

.blocklyColourSwatch {
  width: 20px;
  height: 20px;
}

.blocklyGridContainer {
  padding: 0px;
}

.blocklyFieldColour .blocklyFieldGrid {
  grid-gap: 0px;
  row-gap: 4px;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyGridItem {
  border-radius: 0;
  padding: 0;
  border: 0.5px solid #888;
  cursor: pointer;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyFieldGridItem {
  border: 0.5px solid #888;
  padding: 0;
  margin: 0;
  border-radius: 0;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyFieldGridItem:focus {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
  border-radius: 0;
  outline: none;
}
`);var be=D(127),Xe=D(379),Be=D(157),ke=D(537),ce=D(557);const te="colour_picker",ue={type:te,message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]};function me(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),be.Order.ATOMIC]}function Le(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),Xe.Order.ATOMIC]}function Qe(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),Be.Order.ATOMIC]}function Fe(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),ke.Order.ATOMIC]}function lt(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),ce.Order.ATOMIC]}const de=se.common.createBlockDefinitionsFromJsonArray([ue]),De=de[te];function he(q={}){ve(),se.common.defineBlocks(de),q.javascript&&(q.javascript.forBlock[te]=me),q.dart&&(q.dart.forBlock[te]=Le),q.lua&&(q.lua.forBlock[te]=Qe),q.php&&(q.php.forBlock[te]=Fe),q.python&&(q.python.forBlock[te]=lt)}const Se="colour_random",Ue={type:Se,message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"};function He(q,ee){return[ee.provideFunction_("colourRandom",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * 0x1000000);
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",be.Order.FUNCTION_CALL]}function et(q,ee){return ee.definitions_.import_dart_math="import 'dart:math' as Math;",[ee.provideFunction_("colour_random",`
String ${ee.FUNCTION_NAME_PLACEHOLDER_}() {
  String hex = '0123456789abcdef';
  var rnd = new Math.Random();
  return '#\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}'
      '\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}'
      '\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}';
}
`)+"()",Xe.Order.UNARY_POSTFIX]}function tt(q,ee){return['string.format("#%06x", math.random(0, 2^24 - 1))',Be.Order.HIGH]}function ht(q,ee){return[ee.provideFunction_("colour_random",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}() {
  return '#' . str_pad(dechex(mt_rand(0, 0xFFFFFF)), 6, '0', STR_PAD_LEFT);
}
`)+"()",ke.Order.FUNCTION_CALL]}function nt(q,ee){return ee.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",ce.Order.FUNCTION_CALL]}const st=se.common.createBlockDefinitionsFromJsonArray([Ue]),ot=st[Se];function it(q={}){ve(),se.common.defineBlocks(st),q.javascript&&(q.javascript.forBlock[Se]=He),q.dart&&(q.dart.forBlock[Se]=et),q.lua&&(q.lua.forBlock[Se]=tt),q.php&&(q.php.forBlock[Se]=ht),q.python&&(q.python.forBlock[Se]=nt)}const S="colour_rgb",ae={type:S,message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"};function j(q,ee){const xe=ee.valueToCode(q,"RED",be.Order.NONE)||0,ze=ee.valueToCode(q,"GREEN",be.Order.NONE)||0,at=ee.valueToCode(q,"BLUE",be.Order.NONE)||0;return[`${ee.provideFunction_("colourRgb",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)}(${xe}, ${ze}, ${at})`,be.Order.FUNCTION_CALL]}function $e(q,ee){const xe=ee.valueToCode(q,"RED",Xe.Order.NONE)||0,ze=ee.valueToCode(q,"GREEN",Xe.Order.NONE)||0,at=ee.valueToCode(q,"BLUE",Xe.Order.NONE)||0;return ee.definitions_.import_dart_math="import 'dart:math' as Math;",[`${ee.provideFunction_("colour_rgb",`
String ${ee.FUNCTION_NAME_PLACEHOLDER_}(num r, num g, num b) {
  num rn = (Math.max(Math.min(r, 100), 0) * 2.55).round();
  String rs = rn.toInt().toRadixString(16);
  rs = '0$rs';
  rs = rs.substring(rs.length - 2);
  num gn = (Math.max(Math.min(g, 100), 0) * 2.55).round();
  String gs = gn.toInt().toRadixString(16);
  gs = '0$gs';
  gs = gs.substring(gs.length - 2);
  num bn = (Math.max(Math.min(b, 100), 0) * 2.55).round();
  String bs = bn.toInt().toRadixString(16);
  bs = '0$bs';
  bs = bs.substring(bs.length - 2);
  return '#$rs$gs$bs';
}
`)}(${xe}, ${ze}, ${at})`,Xe.Order.UNARY_POSTFIX]}function Ne(q,ee){return[`${ee.provideFunction_("colour_rgb",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}(r, g, b)
  r = math.floor(math.min(100, math.max(0, r)) * 2.55 + .5)
  g = math.floor(math.min(100, math.max(0, g)) * 2.55 + .5)
  b = math.floor(math.min(100, math.max(0, b)) * 2.55 + .5)
  return string.format("#%02x%02x%02x", r, g, b)
end
`)}(${ee.valueToCode(q,"RED",Be.Order.NONE)||0}, ${ee.valueToCode(q,"GREEN",Be.Order.NONE)||0}, ${ee.valueToCode(q,"BLUE",Be.Order.NONE)||0})`,Be.Order.HIGH]}function Ie(q,ee){const xe=ee.valueToCode(q,"RED",ke.Order.NONE)||0,ze=ee.valueToCode(q,"GREEN",ke.Order.NONE)||0,at=ee.valueToCode(q,"BLUE",ke.Order.NONE)||0;return[`${ee.provideFunction_("colour_rgb",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}($r, $g, $b) {
  $r = round(max(min($r, 100), 0) * 2.55);
  $g = round(max(min($g, 100), 0) * 2.55);
  $b = round(max(min($b, 100), 0) * 2.55);
  $hex = '#';
  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);
  return $hex;
}
`)}(${xe}, ${ze}, ${at})`,ke.Order.FUNCTION_CALL]}function Ve(q,ee){return[ee.provideFunction_("colour_rgb",`
def ${ee.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`)+"("+(ee.valueToCode(q,"RED",ce.Order.NONE)||0)+", "+(ee.valueToCode(q,"GREEN",ce.Order.NONE)||0)+", "+(ee.valueToCode(q,"BLUE",ce.Order.NONE)||0)+")",ce.Order.FUNCTION_CALL]}const le=se.common.createBlockDefinitionsFromJsonArray([ae]),O=le[S];function H(q={}){ve(),se.common.defineBlocks(le),q.javascript&&(q.javascript.forBlock[S]=j),q.dart&&(q.dart.forBlock[S]=$e,q.dart.addReservedWords("Math")),q.lua&&(q.lua.forBlock[S]=Ne),q.php&&(q.php.forBlock[S]=Ie),q.python&&(q.python.forBlock[S]=Ve)}const J="colour_blend",ne={type:J,message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"};function ye(q,ee){const xe=ee.valueToCode(q,"COLOUR1",be.Order.NONE)||"'#000000'",ze=ee.valueToCode(q,"COLOUR2",be.Order.NONE)||"'#000000'",at=ee.valueToCode(q,"RATIO",be.Order.NONE)||.5;return[`${ee.provideFunction_("colourBlend",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)}(${xe}, ${ze}, ${at})`,be.Order.FUNCTION_CALL]}function h(q,ee){const xe=ee.valueToCode(q,"COLOUR1",Xe.Order.NONE)||"'#000000'",ze=ee.valueToCode(q,"COLOUR2",Xe.Order.NONE)||"'#000000'",at=ee.valueToCode(q,"RATIO",Xe.Order.NONE)||.5;return ee.definitions_.import_dart_math="import 'dart:math' as Math;",[`${ee.provideFunction_("colour_blend",`
String ${ee.FUNCTION_NAME_PLACEHOLDER_}(String c1, String c2, num ratio) {
  ratio = Math.max(Math.min(ratio, 1), 0);
  int r1 = int.parse('0x\${c1.substring(1, 3)}');
  int g1 = int.parse('0x\${c1.substring(3, 5)}');
  int b1 = int.parse('0x\${c1.substring(5, 7)}');
  int r2 = int.parse('0x\${c2.substring(1, 3)}');
  int g2 = int.parse('0x\${c2.substring(3, 5)}');
  int b2 = int.parse('0x\${c2.substring(5, 7)}');
  num rn = (r1 * (1 - ratio) + r2 * ratio).round();
  String rs = rn.toInt().toRadixString(16);
  num gn = (g1 * (1 - ratio) + g2 * ratio).round();
  String gs = gn.toInt().toRadixString(16);
  num bn = (b1 * (1 - ratio) + b2 * ratio).round();
  String bs = bn.toInt().toRadixString(16);
  rs = '0$rs';
  rs = rs.substring(rs.length - 2);
  gs = '0$gs';
  gs = gs.substring(gs.length - 2);
  bs = '0$bs';
  bs = bs.substring(bs.length - 2);
  return '#$rs$gs$bs';
}
`)}(${xe}, ${ze}, ${at})`,Xe.Order.UNARY_POSTFIX]}function v(q,ee){return[`${ee.provideFunction_("colour_blend",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio)
  local r1 = tonumber(string.sub(colour1, 2, 3), 16)
  local r2 = tonumber(string.sub(colour2, 2, 3), 16)
  local g1 = tonumber(string.sub(colour1, 4, 5), 16)
  local g2 = tonumber(string.sub(colour2, 4, 5), 16)
  local b1 = tonumber(string.sub(colour1, 6, 7), 16)
  local b2 = tonumber(string.sub(colour2, 6, 7), 16)
  local ratio = math.min(1, math.max(0, ratio))
  local r = math.floor(r1 * (1 - ratio) + r2 * ratio + .5)
  local g = math.floor(g1 * (1 - ratio) + g2 * ratio + .5)
  local b = math.floor(b1 * (1 - ratio) + b2 * ratio + .5)
  return string.format("#%02x%02x%02x", r, g, b)
end
`)}(${ee.valueToCode(q,"COLOUR1",Be.Order.NONE)||"'#000000'"}, ${ee.valueToCode(q,"COLOUR2",Be.Order.NONE)||"'#000000'"}, ${ee.valueToCode(q,"RATIO",Be.Order.NONE)||0})`,Be.Order.HIGH]}function T(q,ee){const xe=ee.valueToCode(q,"COLOUR1",ke.Order.NONE)||"'#000000'",ze=ee.valueToCode(q,"COLOUR2",ke.Order.NONE)||"'#000000'",at=ee.valueToCode(q,"RATIO",ke.Order.NONE)||.5;return[`${ee.provideFunction_("colour_blend",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}($c1, $c2, $ratio) {
  $ratio = max(min($ratio, 1), 0);
  $r1 = hexdec(substr($c1, 1, 2));
  $g1 = hexdec(substr($c1, 3, 2));
  $b1 = hexdec(substr($c1, 5, 2));
  $r2 = hexdec(substr($c2, 1, 2));
  $g2 = hexdec(substr($c2, 3, 2));
  $b2 = hexdec(substr($c2, 5, 2));
  $r = round($r1 * (1 - $ratio) + $r2 * $ratio);
  $g = round($g1 * (1 - $ratio) + $g2 * $ratio);
  $b = round($b1 * (1 - $ratio) + $b2 * $ratio);
  $hex = '#';
  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);
  return $hex;
}
`)}(${xe}, ${ze}, ${at})`,ke.Order.FUNCTION_CALL]}function _(q,ee){return[`${ee.provideFunction_("colour_blend",`
def ${ee.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`)}(${ee.valueToCode(q,"COLOUR1",ce.Order.NONE)||"'#000000'"}, ${ee.valueToCode(q,"COLOUR2",ce.Order.NONE)||"'#000000'"}, ${ee.valueToCode(q,"RATIO",ce.Order.NONE)||0})`,ce.Order.FUNCTION_CALL]}const c=se.common.createBlockDefinitionsFromJsonArray([ne]),A=c[J];function M(q={}){ve(),se.common.defineBlocks(c),q.javascript&&(q.javascript.forBlock[J]=ye),q.dart&&(q.dart.forBlock[J]=h,q.dart.addReservedWords("Math")),q.lua&&(q.lua.forBlock[J]=v),q.php&&(q.php.forBlock[J]=T),q.python&&(q.python.forBlock[J]=_)}function Y(q={}){he(q),H(q),it(q),M(q)}})(),V})(),k.exports=z(P(370),P(127),P(379),P(157),P(537),P(557))}},x={};function w(k){var B=x[k];if(B!==void 0)return B.exports;var P=x[k]={exports:{}};return N[k].call(P.exports,P,P.exports,w),P.exports}w.d=(k,B)=>{for(var P in B)w.o(B,P)&&!w.o(k,P)&&Object.defineProperty(k,P,{enumerable:!0,get:B[P]})},w.o=(k,B)=>Object.prototype.hasOwnProperty.call(k,B),w.r=k=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})};var R={};return(()=>{w.r(R),w.d(R,{FieldColourHsvSliders:()=>z});var k=w(370),B=w(594);class P{constructor(d=0,y=0,F=0){this.r=d,this.g=y,this.b=F}static componentToHex(d){return d<=0?"00":d>=1?"ff":("0"+(255*d+.5>>>0).toString(16)).slice(-2)}toHex(){return"#"+P.componentToHex(this.r)+P.componentToHex(this.g)+P.componentToHex(this.b)}loadFromHex(d){return this.r=parseInt(d.slice(1,3),16)/255,this.g=parseInt(d.slice(3,5),16)/255,this.b=parseInt(d.slice(5,7),16)/255,this}loadFromHsv(d){const y=6*(d.h-Math.floor(d.h));return this.r=d.v*(1-d.s*Math.max(0,Math.min(1,2-Math.abs(y-3)))),this.g=d.v*(1-d.s*Math.max(0,Math.min(1,Math.abs(y-2)-1))),this.b=d.v*(1-d.s*Math.max(0,Math.min(1,Math.abs(y-4)-1))),this}}class z extends B.FieldColour{constructor(){super(...arguments),this.valueWhenEditorWasOpened=null,this.hsvBoundEvents=[],this.hueReadout=null,this.hueSlider=null,this.saturationReadout=null,this.saturationSlider=null,this.brightnessReadout=null,this.brightnessSlider=null,this.dropdownContainer=null}showEditor_(){if(this.createDropdownSliders(),!this.dropdownContainer||!this.hueSlider)throw new Error("Failed to initialize the HSV sliders.");k.DropDownDiv.getContentDiv().appendChild(this.dropdownContainer),k.DropDownDiv.showPositionedByField(this,this.dropdownDisposeSliders.bind(this)),this.valueWhenEditorWasOpened=this.value_,this.hueSlider.focus({preventScroll:!0})}static createLabelInContainer(d,y){const F=document.createElement("div"),L=document.createElement("span"),G=document.createElement("span");return F.classList.add("fieldColourSliderLabel"),L.textContent=d,F.appendChild(L),F.appendChild(G),y.appendChild(F),G}static createSliderInContainer(d,y,F){const L=document.createElement("input");return L.classList.add("fieldColourSlider"),L.type="range",L.min=String(0),L.max=String(d),L.step=String(y),F.appendChild(L),L}createDropdownSliders(){const d=document.createElement("div");if(d.classList.add("fieldColourSliderContainer"),this.hueReadout=z.createLabelInContainer("Hue",d),this.hueSlider=z.createSliderInContainer(z.HUE_SLIDER_MAX,2,d),this.saturationReadout=z.createLabelInContainer("Saturation",d),this.saturationSlider=z.createSliderInContainer(z.SATURATION_SLIDER_MAX,1,d),this.brightnessReadout=z.createLabelInContainer("Brightness",d),this.brightnessSlider=z.createSliderInContainer(z.BRIGHTNESS_SLIDER_MAX,1,d),this.hsvBoundEvents.push(k.browserEvents.conditionalBind(this.hueSlider,"input",this,this.onSliderChange)),this.hsvBoundEvents.push(k.browserEvents.conditionalBind(this.saturationSlider,"input",this,this.onSliderChange)),this.hsvBoundEvents.push(k.browserEvents.conditionalBind(this.brightnessSlider,"input",this,this.onSliderChange)),window.EyeDropper){const y=document.createElement("button");y.classList.add("fieldColourEyedropper"),d.appendChild(document.createElement("hr")),d.appendChild(y),this.hsvBoundEvents.push(k.browserEvents.conditionalBind(y,"click",this,this.onEyedropperEvent))}this.dropdownContainer=d,this.updateSliderValues()}dropdownDisposeSliders(){for(const d of this.hsvBoundEvents)k.browserEvents.unbind(d);this.hsvBoundEvents.length=0,this.hueReadout=null,this.hueSlider=null,this.saturationReadout=null,this.saturationSlider=null,this.brightnessReadout=null,this.brightnessSlider=null,this.dropdownContainer=null,this.sourceBlock_&&k.Events.isEnabled()&&this.valueWhenEditorWasOpened!==null&&this.valueWhenEditorWasOpened!==this.value_&&(k.Events.fire(new(k.Events.get(k.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened,this.value_)),this.valueWhenEditorWasOpened=null)}static hsvToHex(d,y,F){return z.helperHsv.h=d,z.helperHsv.s=y,z.helperHsv.v=F,z.helperRgb.loadFromHsv(z.helperHsv).toHex()}onSliderChange(d){if(!this.hueSlider||!this.saturationSlider||!this.brightnessSlider)throw new Error("The HSV sliders are missing.");const y=parseFloat(this.hueSlider.value)/z.HUE_SLIDER_MAX,F=parseFloat(this.saturationSlider.value)/z.SATURATION_SLIDER_MAX,L=parseFloat(this.brightnessSlider.value)/z.BRIGHTNESS_SLIDER_MAX;this.setIntermediateValue(z.hsvToHex(y,F,L)),this.renderSliders()}onEyedropperEvent(d){window.EyeDropper&&new window.EyeDropper().open().then(y=>{this.setIntermediateValue(y.sRGBHex),this.updateSliderValues()})}setIntermediateValue(d){const y=this.value_;this.setValue(d,!1),this.sourceBlock_&&k.Events.isEnabled()&&this.value_!==y&&k.Events.fire(new(k.Events.get(k.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,y,this.value_))}renderSliders(){if(!(this.hueSlider&&this.hueReadout&&this.saturationSlider&&this.saturationReadout&&this.brightnessSlider&&this.brightnessReadout))throw new Error("The HSV sliders are missing.");this.hueReadout.textContent=this.hueSlider.value,this.saturationReadout.textContent=this.saturationSlider.value,this.brightnessReadout.textContent=this.brightnessSlider.value;const d=parseFloat(this.hueSlider.value)/z.HUE_SLIDER_MAX,y=parseFloat(this.saturationSlider.value)/z.SATURATION_SLIDER_MAX,F=parseFloat(this.brightnessSlider.value)/z.BRIGHTNESS_SLIDER_MAX;let L="linear-gradient(to right, ";L+=z.hsvToHex(0,y,F)+` ${z.THUMB_RADIUS}px, `,L+=z.hsvToHex(1/6,y,F)+", ",L+=z.hsvToHex(2/6,y,F)+", ",L+=z.hsvToHex(.5,y,F)+", ",L+=z.hsvToHex(4/6,y,F)+", ",L+=z.hsvToHex(5/6,y,F)+", ",L+=z.hsvToHex(1,y,F)+` calc(100% - ${z.THUMB_RADIUS}px))`,this.hueSlider.style.setProperty("--slider-track-background",L);let G="linear-gradient(to right, ";G+=z.hsvToHex(d,0,F)+` ${z.THUMB_RADIUS}px, `,G+=z.hsvToHex(d,1,F)+` calc(100% - ${z.THUMB_RADIUS}px))`,this.saturationSlider.style.setProperty("--slider-track-background",G);let p="linear-gradient(to right, ";p+=z.hsvToHex(d,y,0)+` ${z.THUMB_RADIUS}px, `,p+=z.hsvToHex(d,y,1)+` calc(100% - ${z.THUMB_RADIUS}px))`,this.brightnessSlider.style.setProperty("--slider-track-background",p)}updateSliderValues(){var d;if(!this.hueSlider||!this.saturationSlider||!this.brightnessSlider)return;const y=z.helperHsv.loadFromRgb(z.helperRgb.loadFromHex((d=this.getValue())!==null&&d!==void 0?d:""));this.hueSlider.value=String(y.h*z.HUE_SLIDER_MAX),this.saturationSlider.value=String(y.s*z.SATURATION_SLIDER_MAX),this.brightnessSlider.value=String(y.v*z.BRIGHTNESS_SLIDER_MAX),this.renderSliders()}}z.HUE_SLIDER_MAX=360,z.SATURATION_SLIDER_MAX=100,z.BRIGHTNESS_SLIDER_MAX=100,z.THUMB_RADIUS=12,z.helperHsv=new class{constructor(m=0,d=0,y=0){this.h=m,this.s=d,this.v=y}loadFromRgb(m){const d=Math.max(Math.max(m.r,m.g),m.b),y=Math.min(Math.min(m.r,m.g),m.b);if(this.v=d,y===d)return this.h=0,this.s=0,this;const F=d-y;let L;return this.s=F/d,L=m.r===d?(m.g-m.b)/F:m.g===d?2+(m.b-m.r)/F:4+(m.r-m.g)/F,L/=6,this.h=L-Math.floor(L),this}copy(m){return this.h=m.h,this.s=m.s,this.v=m.v,this}},z.helperRgb=new P,k.fieldRegistry.register("field_colour_hsv_sliders",z),k.Css.register(`
.fieldColourSliderContainer {
  padding: 4px;
  font-family: Roboto, Arial, sans-serif;
  color: #5c5c5c;
}
.fieldColourSliderContainer hr {
  border: none;
  border-top: 1px solid #bbb;
}
.fieldColourSliderLabel {
  display: flex;
  justify-content: space-between;
}
.fieldColourEyedropper {
  appearance: none;
  position: relative;
  border: none;
  border-radius: 4px;
  background: transparent;
  font: inherit;
  color: inherit;
  cursor: pointer;
  width: 100%;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}
.fieldColourEyedropper:hover {
  background: rgba(0,0,0,0.1)
}
.fieldColourEyedropper input {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
.fieldColourEyedropper::before {
  content: "Eyedropper";
}
.fieldColourEyedropper::after {
  content: "";
  margin-left: 8px;
  width: 24px;
  height: 24px;
  background: currentColor;
  pointer-events: none;
  -webkit-mask-image: var(--customize-dial-symbol);
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-image: var(--customize-dial-symbol);
  mask-repeat: no-repeat;
  mask-position: center;
  --customize-dial-symbol: url('data:image/svg+xml,    <svg xmlns="http://www.w3.org/2000/svg"          width="24px" height="24px"          viewBox="0 0 24 24">       <path stroke="black" strokewidth="1.414" fill="none"             d="m 13 8 L 6 15 Q 3 18 2 21 Q 0 23 .5 23.5 Q 1 24 3 22                 Q 6 21 9 18 L 16 11"/>       <path fill="black"             d="m 12 7 Q 11 6 12 5 Q 13 4 14 5 Q 15 6 16 5 Q 20 -1 22.5 1.5                 Q 25 4 19 8 Q 18 9 19 10 Q 20 11 19 12 Q 18 13 17 12"/>     </svg>');
}
.fieldColourSlider {
  -webkit-appearance: none;
  width: 150px;
  height: 24px;
  margin: 4px 8px 24px 8px;
  padding: 0;
}
.fieldColourSlider:last-child {
  margin-bottom: 4px;
}
.fieldColourSlider:focus {
  outline: none;
}
/* Webkit */
.fieldColourSlider::-webkit-slider-runnable-track {
  background: var(--slider-track-background);
  border-radius: 8px;
  height: 16px;
}
.fieldColourSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(0,0,0,.15);
  cursor: pointer;
  width: ${2*z.THUMB_RADIUS}px;
  height: ${2*z.THUMB_RADIUS}px;
  margin-top: -4px;
}
/* Firefox */
.fieldColourSlider::-moz-range-track {
  background: var(--slider-track-background);
  border-radius: 8px;
  height: 16px;
}
.fieldColourSlider::-moz-range-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(0,0,0,.15);
  cursor: pointer;
  width: ${2*z.THUMB_RADIUS}px;
  height: ${2*z.THUMB_RADIUS}px;
}
.fieldColourSlider::-moz-focus-outer {
  /* override the focus border style */
  border: 0;
}
/* IE */
.fieldColourSlider::-ms-track {
  background: var(--slider-track-background);
  border-radius: 12px;
  width: 100%;
  height: 24px;
  /* remove default tick marks */
  color: transparent;
}
.fieldColourSlider::-ms-fill-lower  {
  background: transparent;
}
.fieldColourSlider::-ms-fill-upper  {
  background: transparent;
}
.fieldColourSlider::-ms-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(0,0,0,.15);
  cursor: pointer;
  width: ${2*z.THUMB_RADIUS}px;
  height: ${2*z.THUMB_RADIUS}px;
}
`)})(),R})())})(dist$3)),dist$3.exports}var distExports$1=requireDist$1(),dist$1={exports:{}};var dist=dist$1.exports,hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(i,n){(function(o,s){i.exports=s(requireBlockly_compressed(),requireJavascript_compressed(),requireDart_compressed(),requireLua_compressed(),requirePhp_compressed(),requirePython_compressed())})(dist,(o,s,l,f,E,g)=>(()=>{var N={127:k=>{k.exports=s},157:k=>{k.exports=f},370:k=>{k.exports=o},379:k=>{k.exports=l},462:function(k,B,P){var z;z=m=>(()=>{var d={370:V=>{V.exports=m}},y={};function F(V){var C=y[V];if(C!==void 0)return C.exports;var K=y[V]={exports:{}};return d[V](K,K.exports,F),K.exports}F.d=(V,C)=>{for(var K in C)F.o(C,K)&&!F.o(V,K)&&Object.defineProperty(V,K,{enumerable:!0,get:C[K]})},F.o=(V,C)=>Object.prototype.hasOwnProperty.call(V,C),F.r=V=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(V,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(V,"__esModule",{value:!0})};var L={};F.r(L),F.d(L,{FieldGridDropdown:()=>D});var G=F(370);class p{constructor(C,K,X,re){this.value=X,this.selected=!1,this.selectionCallback=re,this.element=document.createElement("button"),this.element.id=G.utils.idGenerator.getNextUniqueId(),this.element.className="blocklyFieldGridItem",this.clickHandler=G.browserEvents.conditionalBind(this.element,"click",this,this.onClick,!0),C.appendChild(this.element);const se=typeof K=="string"?document.createTextNode(K):K;this.element.appendChild(se),G.utils.aria.setRole(this.element,G.utils.aria.Role.GRIDCELL)}dispose(){this.selectionCallback=null,this.element.remove(),this.clickHandler&&(G.browserEvents.unbind(this.clickHandler),this.clickHandler=null)}getId(){return this.element.id}getValue(){return this.value}isSelected(){return this.selected}setSelected(C){this.selected=C,G.utils.aria.setState(this.element,G.utils.aria.State.SELECTED,this.selected),this.element.classList.toggle("blocklyFieldGridItemSelected",this.selected),this.isSelected()&&this.focus()}onClick(){var C;this.setSelected(!0),(C=this.selectionCallback)===null||C===void 0||C.call(this,this)}focus(){this.element.focus({preventScroll:!0});const C=this.element.offsetParent;if(!C)return;const K=this.element.offsetTop,X=C.scrollTop,re=this.getInterItemSpacing();K<X?C.scrollTo(0,K-re):K+this.element.offsetHeight>X+C.clientHeight&&C.scrollBy(0,K+this.element.clientHeight-(X+C.clientHeight)+re)}getInterItemSpacing(){const C=this.element.closest(".blocklyFieldGrid");if(!C)return 0;const K=[...C.querySelectorAll(".blocklyFieldGridItem")];if(!K.length)return 0;const X=K[0].offsetTop,re=K[0].offsetHeight;for(const se of K)if(se.offsetTop!==X)return se.offsetTop-re-X;return 0}}class I{constructor(C,K,X,re,se){if(this.columns=X,this.rtl=re,this.itemIndices=new Map,this.items=new Array,this.keyDownHandler=null,this.pointerMoveHandler=null,this.selectionCallback=se,this.root=document.createElement("div"),this.root.className="blocklyFieldGrid",this.root.tabIndex=0,G.utils.aria.setRole(this.root,G.utils.aria.Role.GRID),C.appendChild(this.root),this.populateItems(K),this.keyDownHandler=G.browserEvents.conditionalBind(this.root,"keydown",this,this.onKeyDown),this.pointerMoveHandler=G.browserEvents.conditionalBind(this.root,"pointermove",this,this.onPointerMove,!0),!(X>=1))throw new Error(`Number of columns must be >= 1; got ${X}`);this.columns=X,this.root.style.setProperty("--grid-columns",`${this.columns}`)}populateItems(C){let K=document.createElement("div");for(const[X,re]of C.entries()){if(re===G.FieldDropdown.SEPARATOR)continue;X%this.columns===0&&(K=document.createElement("div"),K.className="blocklyFieldGridRow",G.utils.aria.setRole(K,G.utils.aria.Role.ROW),this.root.appendChild(K));const[se,Pe]=re,Te=(()=>{if((we=se)&&typeof we=="object"&&"src"in we&&typeof we.src=="string"&&"alt"in we&&typeof we.alt=="string"&&"width"in we&&typeof we.width=="number"&&"height"in we&&typeof we.height=="number"){const ve=new Image(se.width,se.height);return ve.src=se.src,ve.alt=se.alt||"",ve}var we;return se})(),Ae=new p(K,Te,Pe,we=>{var ve;this.setSelectedValue(we.getValue()),(ve=this.selectionCallback)===null||ve===void 0||ve.call(this,we)});this.itemIndices.set(Ae.getId(),this.itemIndices.size),this.items.push(Ae)}}dispose(){this.selectionCallback=void 0;for(const C of this.items)C.dispose();this.itemIndices.clear(),this.items.length=0,this.keyDownHandler&&(G.browserEvents.unbind(this.keyDownHandler),this.keyDownHandler=null),this.pointerMoveHandler&&(G.browserEvents.unbind(this.pointerMoveHandler),this.pointerMoveHandler=null),this.root.remove()}onKeyDown(C){if(!(!this.items.length||C.shiftKey||C.ctrlKey||C.metaKey||C.altKey)){switch(C.key){case"ArrowUp":this.moveFocus(-1*this.columns,!0);break;case"ArrowDown":this.moveFocus(this.columns,!0);break;case"ArrowLeft":this.moveFocus(-1*(this.rtl?-1:1),!0);break;case"ArrowRight":this.moveFocus(1*(this.rtl?-1:1),!0);break;case"PageUp":case"Home":this.moveFocus(0,!1);break;case"PageDown":case"End":this.moveFocus(this.items.length-1,!1);break;case"Enter":case"Space":return void C.stopPropagation();default:return}C.preventDefault(),C.stopPropagation()}}onPointerMove(C){if(!C.movementX&&!C.movementY||!(C.target instanceof Element))return;const K=C.target.closest(".blocklyFieldGridItem");if(!K)return;const X=K.id,re=this.itemIndices.get(X);re!==void 0&&this.moveFocus(re,!1)}setSelectedValue(C){for(const[K,X]of this.items.entries()){const re=X.getValue()===C;X.setSelected(re),re&&this.moveFocus(K,!1)}}moveFocus(C,K){let X=C;if(K){const se=this.getFocusedItem();if(!se)return;X+=this.indexOfItem(se)}const re=this.itemAtIndex(X);re&&(re.focus(),G.utils.aria.setState(this.root,G.utils.aria.State.ACTIVEDESCENDANT,re.getId()))}indexOfItem(C){var K;return(K=this.itemIndices.get(C.getId()))!==null&&K!==void 0?K:-1}itemAtIndex(C){return this.items[C]}getFocusedItem(){var C;const K=(C=this.root.querySelector(".blocklyFieldGridItem:focus"))!==null&&C!==void 0?C:this.root.querySelector(".blocklyFieldGridItem");if(!K||!K.id)return;const X=this.itemIndices.get(K.id);return X!==void 0?this.itemAtIndex(X):void 0}}class D extends G.FieldDropdown{constructor(C,K,X){super(C,K,X),this.columns=3,X?.columns&&this.setColumns(parseInt(`${X.columns}`)),X&&X.primaryColour&&(this.primaryColour=X.primaryColour),X&&X.borderColour&&(this.borderColour=X.borderColour)}static fromJson(C){if(!C.options)throw new Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(C.options,void 0,C)}setColumns(C){var K;!isNaN(C)&&C>=1&&(this.columns=C,G.DropDownDiv.getOwner()===this&&G.DropDownDiv.isVisible()&&((K=this.grid)===null||K===void 0||K.dispose(),this.showEditor_()))}showEditor_(C){var K;G.DropDownDiv.clearContent();const X=!!(!((K=this.getSourceBlock())===null||K===void 0)&&K.workspace.RTL);this.grid=new I(G.DropDownDiv.getContentDiv(),this.getOptions(!1),this.columns,X,Pe=>{G.DropDownDiv.hideIfOwner(this),this.setValue(Pe.getValue())}),G.DropDownDiv.getContentDiv().classList.add("blocklyFieldGridContainer");const re=this.getColours();re&&re.border&&G.DropDownDiv.setColour(re.primary,re.border),G.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));const se=this.getValue();se&&this.grid.setSelectedValue(se)}doValueUpdate_(C){var K;super.doValueUpdate_(C),(K=this.grid)===null||K===void 0||K.setSelectedValue(C)}getColours(){var C,K;if(this.primaryColour&&this.borderColour)return{primary:this.primaryColour,border:this.borderColour};const X=this.getSourceBlock();if(!(X instanceof G.BlockSvg))return;const re=X.isShadow()?X.getParent():X;return re?{primary:(C=this.primaryColour)!==null&&C!==void 0?C:re.getColour(),border:(K=this.borderColour)!==null&&K!==void 0?K:re.getColourTertiary()}:void 0}}return G.fieldRegistry.register("field_grid_dropdown",D),G.Css.register(`
   .blocklyFieldGridContainer {
     padding: 7px;
     overflow: auto;
   }
   
  .blocklyFieldGrid {
    display: grid;
    grid-gap: 7px;
    grid-template-columns: repeat(var(--grid-columns), min-content);
  }

 .blocklyFieldGrid .blocklyFieldGridItem {
   border: 1px solid rgba(1, 1, 1, 0.5);
   border-radius: 4px;
   color: white;
   min-width: auto;
   background: none;
   white-space: nowrap;
   cursor: pointer;
   padding: 6px 15px;
 }
 
 .blocklyFieldGrid .blocklyFieldGridRow {
   display: contents;
 }
 
 .blocklyFieldGrid .blocklyFieldGridItem.blocklyFieldGridItemSelected {
   background-color: rgba(1, 1, 1, 0.25);
 }

 .blocklyFieldGrid .blocklyFieldGridItem:focus {
   box-shadow: 0 0 0 4px hsla(0, 0%, 100%, .2);
   outline: none;
 }
 `),L})(),k.exports=z(P(370))},537:k=>{k.exports=E},557:k=>{k.exports=g}},x={};function w(k){var B=x[k];if(B!==void 0)return B.exports;var P=x[k]={exports:{}};return N[k].call(P.exports,P,P.exports,w),P.exports}w.d=(k,B)=>{for(var P in B)w.o(B,P)&&!w.o(k,P)&&Object.defineProperty(k,P,{enumerable:!0,get:B[P]})},w.o=(k,B)=>Object.prototype.hasOwnProperty.call(k,B),w.r=k=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})};var R={};return(()=>{w.r(R),w.d(R,{FieldColour:()=>F,colourBlend:()=>z,colourPicker:()=>k,colourRandom:()=>B,colourRgb:()=>P,installAllBlocks:()=>Ve,registerFieldColour:()=>G});var k={};w.r(k),w.d(k,{BLOCK_NAME:()=>K,blockDefinition:()=>ve,installBlock:()=>be,toDart:()=>se,toJavascript:()=>re,toLua:()=>Pe,toPhp:()=>Te,toPython:()=>Ae});var B={};w.r(B),w.d(B,{BLOCK_NAME:()=>Xe,blockDefinition:()=>Qe,installBlock:()=>Fe,toDart:()=>ce,toJavascript:()=>ke,toLua:()=>te,toPhp:()=>ue,toPython:()=>me});var P={};w.r(P),w.d(P,{BLOCK_NAME:()=>lt,blockDefinition:()=>tt,installBlock:()=>ht,toDart:()=>he,toJavascript:()=>De,toLua:()=>Se,toPhp:()=>Ue,toPython:()=>He});var z={};w.r(z),w.d(z,{BLOCK_NAME:()=>nt,blockDefinition:()=>Ne,installBlock:()=>Ie,toDart:()=>it,toJavascript:()=>ot,toLua:()=>S,toPhp:()=>ae,toPython:()=>j});var m=w(370),d=w(462);const y=["#ffffff","#cccccc","#c0c0c0","#999999","#666666","#333333","#000000","#ffcccc","#ff6666","#ff0000","#cc0000","#990000","#660000","#330000","#ffcc99","#ff9966","#ff9900","#ff6600","#cc6600","#993300","#663300","#ffff99","#ffff66","#ffcc66","#ffcc33","#cc9933","#996633","#663333","#ffffcc","#ffff33","#ffff00","#ffcc00","#999900","#666600","#333300","#99ff99","#66ff99","#33ff33","#33cc00","#009900","#006600","#003300","#99ffff","#33ffff","#66cccc","#00cccc","#339999","#336666","#003333","#ccffff","#66ffff","#33ccff","#3366ff","#3333ff","#000099","#000066","#ccccff","#9999ff","#6666cc","#6633ff","#6600cc","#333399","#330099","#ffccff","#ff99ff","#cc66cc","#cc33cc","#993399","#663366","#330033"];class F extends d.FieldGridDropdown{constructor(O,H,J){var ne,ye;super(L((ne=J?.colourOptions)!==null&&ne!==void 0?ne:y),H,Object.assign(Object.assign({},J),{columns:(ye=J?.columns)!==null&&ye!==void 0?ye:7})),this.isDirty_=!1,O!==m.Field.SKIP_SETUP&&this.setValue(O)}trimOptions(O){return{options:O}}configure_(O){super.configure_(O),O.colourOptions&&this.setColours(O.colourOptions,O.colourTitles)}initView(){const O=this.getConstants();if(!O)throw Error("Constants not found");this.size_=new m.utils.Size(O.FIELD_COLOUR_DEFAULT_WIDTH,O.FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}showEditor_(O){super.showEditor_(O),m.DropDownDiv.getContentDiv().classList.add("blocklyFieldColour"),m.DropDownDiv.repositionForWindowResize()}isFullBlockField(){if(!this.getSourceBlock())throw new m.UnattachedFieldError;const O=this.getConstants();return this.blockIsSimpleReporter()&&!!O?.FIELD_COLOUR_FULL_BLOCK}blockIsSimpleReporter(){const O=this.getSourceBlock();if(!O)throw new m.UnattachedFieldError;if(!O.outputConnection)return!1;for(const H of O.inputList)if(H.connection||H.fieldRow.length>1)return!1;return!0}applyColour(){const O=this.getSourceBlock();if(!O)throw new m.UnattachedFieldError;if(!this.fieldGroup_)return;const H=this.borderRect_;if(!H)throw new Error("The border rect has not been initialized");this.isFullBlockField()?(H.style.display="none",O.pathObject.svgPath.setAttribute("fill",this.getValue()),O.pathObject.svgPath.setAttribute("stroke","#fff")):(H.style.display="block",H.style.fill=this.getValue())}getSize(){var O;return!((O=this.getConstants())===null||O===void 0)&&O.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){this.updateSize_();const O=this.getSourceBlock();if(!O)throw new m.UnattachedFieldError;O.applyColour()}updateSize_(O){const H=this.getConstants();if(!H)return;let J,ne;this.isFullBlockField()?(J=2*(O??0),ne=H.FIELD_TEXT_HEIGHT):(J=H.FIELD_COLOUR_DEFAULT_WIDTH,ne=H.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=ne,this.size_.width=J,this.positionBorderRect_()}doClassValidation_(O){return typeof O!="string"?null:m.utils.colour.parse(O)}getText(){let O=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(O)&&(O="#"+O[1]+O[3]+O[5]),O}setColours(O,H){const J=L(O,H);return this.setOptions(J),this}static fromJson(O){return new this(O.colour,void 0,O)}}function L(le,O){return le.map((H,J)=>{const ne=document.createElement("div");return ne.className="blocklyColourSwatch",ne.style.backgroundColor=H,O&&J<O.length&&(ne.title=O[J]),[ne,H]})}function G(){m.fieldRegistry.register("field_colour",F)}F.prototype.DEFAULT_VALUE="#ffffff",m.Css.register(`
.blocklyFieldColour .blocklyFieldGridItemSelected,
.blocklyFieldGridItemSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}

.blocklyColourSwatch {
  width: 20px;
  height: 20px;
}

.blocklyGridContainer {
  padding: 0px;
}

.blocklyFieldColour .blocklyFieldGrid {
  grid-gap: 0px;
  row-gap: 4px;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyGridItem {
  border-radius: 0;
  padding: 0;
  border: 0.5px solid #888;
  cursor: pointer;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyFieldGridItem {
  border: 0.5px solid #888;
  padding: 0;
  margin: 0;
  border-radius: 0;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyFieldGridItem:focus {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
  border-radius: 0;
  outline: none;
}
`);var p=w(127),I=w(379),D=w(157),V=w(537),C=w(557);const K="colour_picker",X={type:K,message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]};function re(le,O){return[O.quote_(le.getFieldValue("COLOUR")),p.Order.ATOMIC]}function se(le,O){return[O.quote_(le.getFieldValue("COLOUR")),I.Order.ATOMIC]}function Pe(le,O){return[O.quote_(le.getFieldValue("COLOUR")),D.Order.ATOMIC]}function Te(le,O){return[O.quote_(le.getFieldValue("COLOUR")),V.Order.ATOMIC]}function Ae(le,O){return[O.quote_(le.getFieldValue("COLOUR")),C.Order.ATOMIC]}const we=m.common.createBlockDefinitionsFromJsonArray([X]),ve=we[K];function be(le={}){G(),m.common.defineBlocks(we),le.javascript&&(le.javascript.forBlock[K]=re),le.dart&&(le.dart.forBlock[K]=se),le.lua&&(le.lua.forBlock[K]=Pe),le.php&&(le.php.forBlock[K]=Te),le.python&&(le.python.forBlock[K]=Ae)}const Xe="colour_random",Be={type:Xe,message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"};function ke(le,O){return[O.provideFunction_("colourRandom",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * 0x1000000);
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",p.Order.FUNCTION_CALL]}function ce(le,O){return O.definitions_.import_dart_math="import 'dart:math' as Math;",[O.provideFunction_("colour_random",`
String ${O.FUNCTION_NAME_PLACEHOLDER_}() {
  String hex = '0123456789abcdef';
  var rnd = new Math.Random();
  return '#\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}'
      '\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}'
      '\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}';
}
`)+"()",I.Order.UNARY_POSTFIX]}function te(le,O){return['string.format("#%06x", math.random(0, 2^24 - 1))',D.Order.HIGH]}function ue(le,O){return[O.provideFunction_("colour_random",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}() {
  return '#' . str_pad(dechex(mt_rand(0, 0xFFFFFF)), 6, '0', STR_PAD_LEFT);
}
`)+"()",V.Order.FUNCTION_CALL]}function me(le,O){return O.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",C.Order.FUNCTION_CALL]}const Le=m.common.createBlockDefinitionsFromJsonArray([Be]),Qe=Le[Xe];function Fe(le={}){G(),m.common.defineBlocks(Le),le.javascript&&(le.javascript.forBlock[Xe]=ke),le.dart&&(le.dart.forBlock[Xe]=ce),le.lua&&(le.lua.forBlock[Xe]=te),le.php&&(le.php.forBlock[Xe]=ue),le.python&&(le.python.forBlock[Xe]=me)}const lt="colour_rgb",de={type:lt,message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"};function De(le,O){const H=O.valueToCode(le,"RED",p.Order.NONE)||0,J=O.valueToCode(le,"GREEN",p.Order.NONE)||0,ne=O.valueToCode(le,"BLUE",p.Order.NONE)||0;return[`${O.provideFunction_("colourRgb",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)}(${H}, ${J}, ${ne})`,p.Order.FUNCTION_CALL]}function he(le,O){const H=O.valueToCode(le,"RED",I.Order.NONE)||0,J=O.valueToCode(le,"GREEN",I.Order.NONE)||0,ne=O.valueToCode(le,"BLUE",I.Order.NONE)||0;return O.definitions_.import_dart_math="import 'dart:math' as Math;",[`${O.provideFunction_("colour_rgb",`
String ${O.FUNCTION_NAME_PLACEHOLDER_}(num r, num g, num b) {
  num rn = (Math.max(Math.min(r, 100), 0) * 2.55).round();
  String rs = rn.toInt().toRadixString(16);
  rs = '0$rs';
  rs = rs.substring(rs.length - 2);
  num gn = (Math.max(Math.min(g, 100), 0) * 2.55).round();
  String gs = gn.toInt().toRadixString(16);
  gs = '0$gs';
  gs = gs.substring(gs.length - 2);
  num bn = (Math.max(Math.min(b, 100), 0) * 2.55).round();
  String bs = bn.toInt().toRadixString(16);
  bs = '0$bs';
  bs = bs.substring(bs.length - 2);
  return '#$rs$gs$bs';
}
`)}(${H}, ${J}, ${ne})`,I.Order.UNARY_POSTFIX]}function Se(le,O){return[`${O.provideFunction_("colour_rgb",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(r, g, b)
  r = math.floor(math.min(100, math.max(0, r)) * 2.55 + .5)
  g = math.floor(math.min(100, math.max(0, g)) * 2.55 + .5)
  b = math.floor(math.min(100, math.max(0, b)) * 2.55 + .5)
  return string.format("#%02x%02x%02x", r, g, b)
end
`)}(${O.valueToCode(le,"RED",D.Order.NONE)||0}, ${O.valueToCode(le,"GREEN",D.Order.NONE)||0}, ${O.valueToCode(le,"BLUE",D.Order.NONE)||0})`,D.Order.HIGH]}function Ue(le,O){const H=O.valueToCode(le,"RED",V.Order.NONE)||0,J=O.valueToCode(le,"GREEN",V.Order.NONE)||0,ne=O.valueToCode(le,"BLUE",V.Order.NONE)||0;return[`${O.provideFunction_("colour_rgb",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}($r, $g, $b) {
  $r = round(max(min($r, 100), 0) * 2.55);
  $g = round(max(min($g, 100), 0) * 2.55);
  $b = round(max(min($b, 100), 0) * 2.55);
  $hex = '#';
  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);
  return $hex;
}
`)}(${H}, ${J}, ${ne})`,V.Order.FUNCTION_CALL]}function He(le,O){return[O.provideFunction_("colour_rgb",`
def ${O.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`)+"("+(O.valueToCode(le,"RED",C.Order.NONE)||0)+", "+(O.valueToCode(le,"GREEN",C.Order.NONE)||0)+", "+(O.valueToCode(le,"BLUE",C.Order.NONE)||0)+")",C.Order.FUNCTION_CALL]}const et=m.common.createBlockDefinitionsFromJsonArray([de]),tt=et[lt];function ht(le={}){G(),m.common.defineBlocks(et),le.javascript&&(le.javascript.forBlock[lt]=De),le.dart&&(le.dart.forBlock[lt]=he,le.dart.addReservedWords("Math")),le.lua&&(le.lua.forBlock[lt]=Se),le.php&&(le.php.forBlock[lt]=Ue),le.python&&(le.python.forBlock[lt]=He)}const nt="colour_blend",st={type:nt,message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"};function ot(le,O){const H=O.valueToCode(le,"COLOUR1",p.Order.NONE)||"'#000000'",J=O.valueToCode(le,"COLOUR2",p.Order.NONE)||"'#000000'",ne=O.valueToCode(le,"RATIO",p.Order.NONE)||.5;return[`${O.provideFunction_("colourBlend",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)}(${H}, ${J}, ${ne})`,p.Order.FUNCTION_CALL]}function it(le,O){const H=O.valueToCode(le,"COLOUR1",I.Order.NONE)||"'#000000'",J=O.valueToCode(le,"COLOUR2",I.Order.NONE)||"'#000000'",ne=O.valueToCode(le,"RATIO",I.Order.NONE)||.5;return O.definitions_.import_dart_math="import 'dart:math' as Math;",[`${O.provideFunction_("colour_blend",`
String ${O.FUNCTION_NAME_PLACEHOLDER_}(String c1, String c2, num ratio) {
  ratio = Math.max(Math.min(ratio, 1), 0);
  int r1 = int.parse('0x\${c1.substring(1, 3)}');
  int g1 = int.parse('0x\${c1.substring(3, 5)}');
  int b1 = int.parse('0x\${c1.substring(5, 7)}');
  int r2 = int.parse('0x\${c2.substring(1, 3)}');
  int g2 = int.parse('0x\${c2.substring(3, 5)}');
  int b2 = int.parse('0x\${c2.substring(5, 7)}');
  num rn = (r1 * (1 - ratio) + r2 * ratio).round();
  String rs = rn.toInt().toRadixString(16);
  num gn = (g1 * (1 - ratio) + g2 * ratio).round();
  String gs = gn.toInt().toRadixString(16);
  num bn = (b1 * (1 - ratio) + b2 * ratio).round();
  String bs = bn.toInt().toRadixString(16);
  rs = '0$rs';
  rs = rs.substring(rs.length - 2);
  gs = '0$gs';
  gs = gs.substring(gs.length - 2);
  bs = '0$bs';
  bs = bs.substring(bs.length - 2);
  return '#$rs$gs$bs';
}
`)}(${H}, ${J}, ${ne})`,I.Order.UNARY_POSTFIX]}function S(le,O){return[`${O.provideFunction_("colour_blend",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio)
  local r1 = tonumber(string.sub(colour1, 2, 3), 16)
  local r2 = tonumber(string.sub(colour2, 2, 3), 16)
  local g1 = tonumber(string.sub(colour1, 4, 5), 16)
  local g2 = tonumber(string.sub(colour2, 4, 5), 16)
  local b1 = tonumber(string.sub(colour1, 6, 7), 16)
  local b2 = tonumber(string.sub(colour2, 6, 7), 16)
  local ratio = math.min(1, math.max(0, ratio))
  local r = math.floor(r1 * (1 - ratio) + r2 * ratio + .5)
  local g = math.floor(g1 * (1 - ratio) + g2 * ratio + .5)
  local b = math.floor(b1 * (1 - ratio) + b2 * ratio + .5)
  return string.format("#%02x%02x%02x", r, g, b)
end
`)}(${O.valueToCode(le,"COLOUR1",D.Order.NONE)||"'#000000'"}, ${O.valueToCode(le,"COLOUR2",D.Order.NONE)||"'#000000'"}, ${O.valueToCode(le,"RATIO",D.Order.NONE)||0})`,D.Order.HIGH]}function ae(le,O){const H=O.valueToCode(le,"COLOUR1",V.Order.NONE)||"'#000000'",J=O.valueToCode(le,"COLOUR2",V.Order.NONE)||"'#000000'",ne=O.valueToCode(le,"RATIO",V.Order.NONE)||.5;return[`${O.provideFunction_("colour_blend",`
function ${O.FUNCTION_NAME_PLACEHOLDER_}($c1, $c2, $ratio) {
  $ratio = max(min($ratio, 1), 0);
  $r1 = hexdec(substr($c1, 1, 2));
  $g1 = hexdec(substr($c1, 3, 2));
  $b1 = hexdec(substr($c1, 5, 2));
  $r2 = hexdec(substr($c2, 1, 2));
  $g2 = hexdec(substr($c2, 3, 2));
  $b2 = hexdec(substr($c2, 5, 2));
  $r = round($r1 * (1 - $ratio) + $r2 * $ratio);
  $g = round($g1 * (1 - $ratio) + $g2 * $ratio);
  $b = round($b1 * (1 - $ratio) + $b2 * $ratio);
  $hex = '#';
  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);
  return $hex;
}
`)}(${H}, ${J}, ${ne})`,V.Order.FUNCTION_CALL]}function j(le,O){return[`${O.provideFunction_("colour_blend",`
def ${O.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`)}(${O.valueToCode(le,"COLOUR1",C.Order.NONE)||"'#000000'"}, ${O.valueToCode(le,"COLOUR2",C.Order.NONE)||"'#000000'"}, ${O.valueToCode(le,"RATIO",C.Order.NONE)||0})`,C.Order.FUNCTION_CALL]}const $e=m.common.createBlockDefinitionsFromJsonArray([st]),Ne=$e[nt];function Ie(le={}){G(),m.common.defineBlocks($e),le.javascript&&(le.javascript.forBlock[nt]=ot),le.dart&&(le.dart.forBlock[nt]=it,le.dart.addReservedWords("Math")),le.lua&&(le.lua.forBlock[nt]=S),le.php&&(le.php.forBlock[nt]=ae),le.python&&(le.python.forBlock[nt]=j)}function Ve(le={}){be(le),ht(le),Fe(le),Ie(le)}})(),R})())})(dist$1)),dist$1.exports}var distExports=requireDist();Blocks.colour_hsv_sliders={init:function(){this.appendDummyInput().appendField("hsv ").appendField(new distExports$1.FieldColourHsvSliders("#ff0000"),"COLOUR"),this.setOutput(!0,"Colour"),this.setStyle("colour_blocks")}};javascriptGenerator.forBlock.colour_hsv_sliders=function(i,n){return[n.quote_(i.getFieldValue("COLOUR")),Order.ATOMIC]};distExports.installAllBlocks({javascript:javascriptGenerator});Blocks.controls_wait={init:function(){this.appendValueInput("millis").setCheck("Number").appendField("wait"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("loop_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.controls_wait=function(i,n){return`(await ((m) => {
        return new Promise((r) => setTimeout(() => r(), m));
    })(${n.valueToCode(i,"millis",Order.ATOMIC)}));
`};Blocks.controls_try={init:function(){this.appendStatementInput("stmt").setCheck(null).appendField("try"),this.setInputsInline(!1),this.setOutput(!0,"Boolean"),this.setStyle("loop_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.controls_try=function(i,n){return[`(await( async() => {
        try {
            ${n.statementToCode(i,"stmt")}
            return true;
        } catch(e) {
            return false;
        }
    })())`,Order.ATOMIC]};Blocks.controls_wait_until={init:function(){this.appendValueInput("bool").setCheck("Boolean").appendField("wait until"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("loop_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.controls_wait_until=function(i,n){return`await new Promise(r => {
        async function loop() {
            if (${n.valueToCode(i,"bool",Order.ATOMIC)}) {
                r()
                return;
            }
            setTimeout(loop, 50)
        }
        setTimeout(loop)
    });`};Blocks.json_new={init:function(){this.itemCount_=3,this.setOutput(!0,"Object"),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks"),this.setMutator(new icons.MutatorIcon(["json_kv_mutator"],this)),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(i){this.itemCount_=i.itemCount??3,this.updateShape_()},updateShape_:function(){let i=0;for(;this.getInput(`V${i}`);)this.removeInput(`V${i}`),this.removeInput(`K${i}`),this.removeInput(`A${i}`),i++;this.removeInput("Cont",!0),this.itemCount_===0&&this.appendDummyInput("Cont").appendField(new FieldLabelSerializable("Empty JSON Object"),"Block");for(let n=0;n<this.itemCount_;n++)this.appendValueInput(`K${n}`).setAlign(inputs.Align.RIGHT).setCheck("String"),this.appendValueInput(`V${n}`).appendField(":"),this.appendEndRowInput(`A${n}`);this.itemCount_>0&&this.getInput("K0")?.appendField("JSON from")},decompose:function(i){const n=i.newBlock("json_new_container");n.initSvg();let o=n.getInput("STACK").connection;for(let s=0;s<this.itemCount_;s++){const l=i.newBlock("json_kv_mutator");l.initSvg(),o.connect(l.previousConnection),o=l.nextConnection}return n},compose:function(i){let n=i.getInputTargetBlock("STACK");const o=[],s=[];for(;n;)o.push(n.valueConnection_??null),s.push(n.keyConnection_??null),n=n.nextConnection?.targetBlock()??null;this.itemCount_=o.length,this.updateShape_();for(let l=0;l<o.length;l++)o[l]&&this.getInput(`V${l}`).connection.connect(o[l]),s[l]&&this.getInput(`K${l}`).connection.connect(s[l])},saveConnections:function(i){let n=i.getInputTargetBlock("STACK"),o=0;for(;n;){const s=this.getInput(`V${o}`);n.valueConnection_=s?.connection?.targetConnection??null;{const l=this.getInput(`K${o}`);n.keyConnection_=l?.connection?.targetConnection??null}o++,n=n.nextConnection?.targetBlock()??null}}};Blocks.json_new_container={init:function(){this.appendDummyInput("NAME").appendField(new FieldLabelSerializable("JSON"),"Block"),this.appendStatementInput("STACK"),this.setTooltip(""),this.setHelpUrl(""),this.setMovable(!1),this.setStyle("json_blocks")}};Blocks.json_kv_mutator={init:function(){this.appendDummyInput("NAME").appendField("Key"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};javascriptGenerator.forBlock.json_new=function(i,n){let o="({";for(let s=0;s<i.itemCount_;s++){const l=n.valueToCode(i,`K${s}`,Order.ATOMIC),f=n.valueToCode(i,`V${s}`,Order.ATOMIC);o+=`${l}: ${f},`}return o+="})",[o,Order.ATOMIC]};Blocks.json_get={init:function(){this.appendValueInput("JSON").setCheck("Object").appendField("In JSON"),this.appendValueInput("KEY").setCheck("String").appendField("get"),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};javascriptGenerator.forBlock.json_get=function(i,n){const o=n.valueToCode(i,"JSON",Order.ATOMIC),s=n.valueToCode(i,"KEY",Order.ATOMIC);return[`(${o}[${s}])`,Order.ATOMIC]};Blocks.json_set={init:function(){this.appendValueInput("JSON").setCheck("Object").appendField("In JSON"),this.appendValueInput("KEY").setCheck("String").appendField("set"),this.appendValueInput("VALUE").appendField("to"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};javascriptGenerator.forBlock.json_set=function(i,n){const o=n.valueToCode(i,"JSON",Order.ATOMIC),s=n.valueToCode(i,"KEY",Order.ATOMIC),l=n.valueToCode(i,"VALUE",Order.ATOMIC);return`${o}[${s}]=${l};`};Blocks.json_encode={init:function(){this.appendDummyInput().appendField("JSON").appendField(new FieldDropdown([["parse","parse"],["stringify","stringify"]],i=>(i==="parse"?this.setOutput(!0,"Object"):this.setOutput(!0,"string"),i)),"FUN"),this.appendValueInput("JSON").setCheck("Object"),this.setInputsInline(!0),this.setOutput(!0,"Object"),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};javascriptGenerator.forBlock.json_encode=function(i,n){const o=n.valueToCode(i,"JSON",Order.ATOMIC);return[`(JSON.${i.getFieldValue("FUN")}(${o}))`,Order.ATOMIC]};Blocks.json_entries={init:function(){this.appendDummyInput().appendField("Get").appendField(new FieldDropdown([["keys","keys"],["values","values"],["entries","entries"]]),"FUN"),this.appendValueInput("JSON").setCheck("Object").appendField("from"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};javascriptGenerator.forBlock.json_entries=function(i,n){const o=n.valueToCode(i,"JSON",Order.ATOMIC);return[`(Object.${i.getFieldValue("FUN")}(${o}))`,Order.ATOMIC]};Blocks.json_has_key={init:function(){this.appendValueInput("KEY").setCheck("String").appendField("Does key"),this.appendValueInput("OBJ").setCheck("Object").appendField("exist in"),this.setOutput(!0,"Boolean"),this.setInputsInline(!0),this.setStyle("json_blocks")}};javascriptGenerator.forBlock.json_has_key=function(i,n){const o=n.valueToCode(i,"OBJ",Order.ATOMIC);return[`(${i.getFieldValue("KEY")} in ${o})`,Order.ATOMIC]};Blocks.logic_compare={init:function(){this.appendValueInput("A"),this.appendValueInput("B").appendField(new FieldDropdown([["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"],["≡","FEQ"],["≢","NFEQ"]]),"OP"),this.setStyle("logic_blocks"),this.setInputsInline(!0),this.setOutput(!0,"Boolean"),this.setHelpUrl(Msg.LOGIC_COMPARE_HELPURL)}};javascriptGenerator.forBlock.logic_compare=function(i,n){const s={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">=",FEQ:"===",NFEQ:"!=="}[i.getFieldValue("OP")],l=s==="=="||s==="!="||s==="==="||s==="!=="?Order.EQUALITY:Order.RELATIONAL,f=n.valueToCode(i,"A",l)||"0",E=n.valueToCode(i,"B",l)||"0";return[f+" "+s+" "+E,l]};Blocks.logic_switch_case_mutator={init:function(){this.appendDummyInput().appendField("case"),this.setStyle("logic_blocks"),this.setPreviousStatement(!0),this.setNextStatement(!0)}};Blocks.logic_switch_default_mutator={init:function(){this.appendDummyInput().appendField("default"),this.setStyle("logic_blocks"),this.setPreviousStatement(!0)}};Blocks.logic_switch_container_mutator={init:function(){this.appendStatementInput("STACK").appendField("Switch"),this.setMovable(!1),this.setStyle("logic_blocks")}};Blocks.logic_switch={init:function(){this.hasDefault_=!1,this.itemCount_=1,this.appendValueInput("VALUE").appendField("switch"),this.setStyle("logic_blocks"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setMutator(new icons.MutatorIcon(["logic_switch_case_mutator","logic_switch_default_mutator"],this)),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_,hasDefault:this.hasDefault_}},loadExtraState:function(i){this.itemCount_=i.itemCount??1,this.hasDefault_=i.hasDefault??!1,this.updateShape_()},updateShape_(){let i=0;for(;this.getInput(`C${i}`);)this.removeInput(`C${i}`),this.removeInput(`S${i}`),i++;this.removeInput("D",!0),this.removeInput("DI",!0);for(let n=0;n<this.itemCount_;n++)this.appendValueInput(`C${n}`).appendField("case").setAlign(inputs.Align.RIGHT),this.appendStatementInput(`S${n}`);this.hasDefault_&&(this.appendDummyInput("DI").appendField("default").setAlign(inputs.Align.RIGHT),this.appendStatementInput("D"))},decompose:function(i){const n=i.newBlock("logic_switch_container_mutator");n.initSvg();let o=n.getInput("STACK").connection;for(let s=0;s<this.itemCount_;s++){const l=i.newBlock("logic_switch_case_mutator");l.initSvg(),o.connect(l.previousConnection),o=l.nextConnection}if(this.hasDefault_){const s=i.newBlock("logic_switch_default_mutator");s.initSvg(),o.connect(s.previousConnection),o=s.nextConnection}return n},compose:function(i){let n=i.getInputTargetBlock("STACK");const o=[],s=[];let l=null;for(this.hasDefault_=!1;n;){if(n.type==="logic_switch_default_mutator"){this.hasDefault_=!0,l=n.defaultConnection_??null;break}o.push(n.caseConnection_??null),s.push(n.statementConnection_??null),n=n.nextConnection?.targetBlock()??null}this.itemCount_=o.length,this.updateShape_();for(let f=0;f<o.length;f++)o[f]&&this.getInput(`C${f}`).connection.connect(o[f]),s[f]&&this.getInput(`S${f}`).connection.connect(s[f]);l&&this.getInput("D").connection.connect(l)},saveConnections:function(i){let n=i.getInputTargetBlock("STACK"),o=0;for(;n;){if(n.type==="logic_switch_default_mutator"){const l=this.getInput("D");n.defaultConnection_=l?.connection?.targetConnection??null;break}const s=this.getInput(`C${o}`);n.caseConnection_=s?.connection?.targetConnection??null;{const l=this.getInput(`S${o}`);n.statementConnection_=l?.connection?.targetConnection??null}o++,n=n.nextConnection?.targetBlock()??null}}};javascriptGenerator.forBlock.logic_switch=function(i,n){let s=`switch(${n.valueToCode(i,"VALUE",Order.ATOMIC)}) {`;for(let l=0;l<i.itemCount_;l++){const f=n.valueToCode(i,"C"+l,Order.ATOMIC),E=n.statementToCode(i,"S"+l);s+=`case (${f}): {
                ${E}
            }
            `}if(i.hasDefault_){const l=n.statementToCode(i,"D");s+=`default: {
                ${l}
            }
            `}return s+="}",s};Blocks.logic_switch_expr={init:function(){this.hasDefault_=!1,this.itemCount_=1,this.appendValueInput("VALUE").appendField("switch"),this.appendEndRowInput(),this.setStyle("logic_blocks"),this.setOutput(!0),this.setInputsInline(!0),this.setMutator(new icons.MutatorIcon(["logic_switch_case_mutator","logic_switch_default_mutator"],this)),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_,hasDefault:this.hasDefault_}},loadExtraState:function(i){this.itemCount_=i.itemCount??1,this.hasDefault_=i.hasDefault??!1,this.updateShape_()},updateShape_(){let i=0;for(;this.getInput(`C${i}`);)this.removeInput(`C${i}`),this.removeInput(`S${i}`),this.removeInput(`A${i}`),i++;this.removeInput("D",!0);for(let n=0;n<this.itemCount_;n++)this.appendValueInput(`C${n}`).appendField("case").setAlign(inputs.Align.RIGHT),this.appendValueInput(`S${n}`).setAlign(inputs.Align.RIGHT).appendField(":"),this.appendEndRowInput(`A${n}`);this.hasDefault_&&this.appendValueInput("D").appendField("default").setAlign(inputs.Align.RIGHT)},decompose:function(i){const n=i.newBlock("logic_switch_container_mutator");n.initSvg();let o=n.getInput("STACK").connection;for(let s=0;s<this.itemCount_;s++){const l=i.newBlock("logic_switch_case_mutator");l.initSvg(),o.connect(l.previousConnection),o=l.nextConnection}if(this.hasDefault_){const s=i.newBlock("logic_switch_default_mutator");s.initSvg(),o.connect(s.previousConnection),o=s.nextConnection}return n},compose:function(i){let n=i.getInputTargetBlock("STACK");const o=[],s=[];let l=null;for(this.hasDefault_=!1;n;){if(n.type==="logic_switch_default_mutator"){this.hasDefault_=!0,l=n.defaultConnection_??null;break}o.push(n.caseConnection_??null),s.push(n.statementConnection_??null),n=n.nextConnection?.targetBlock()??null}this.itemCount_=o.length,this.updateShape_();for(let f=0;f<o.length;f++)o[f]&&this.getInput(`C${f}`).connection.connect(o[f]),s[f]&&this.getInput(`S${f}`).connection.connect(s[f]);l&&this.getInput("D").connection.connect(l)},saveConnections:function(i){let n=i.getInputTargetBlock("STACK"),o=0;for(;n;){if(n.type==="logic_switch_default_mutator"){const l=this.getInput("D");n.defaultConnection_=l?.connection?.targetConnection??null;break}const s=this.getInput(`C${o}`);n.caseConnection_=s?.connection?.targetConnection??null;{const l=this.getInput(`S${o}`);n.statementConnection_=l?.connection?.targetConnection??null}o++,n=n.nextConnection?.targetBlock()??null}}};javascriptGenerator.forBlock.logic_switch_expr=function(i,n){let s=`(await (async ()=>{switch(${n.valueToCode(i,"VALUE",Order.ATOMIC)}) {`;for(let l=0;l<i.itemCount_;l++){const f=n.valueToCode(i,"C"+l,Order.ATOMIC),E=n.valueToCode(i,"S"+l,Order.ATOMIC);s+=`case (${f}): {
                         return ${E};
                     }
                     `}if(i.hasDefault_){const l=n.valueToCode(i,"D",Order.ATOMIC);s+=`default: {
                         return ${l}
                     }
                     `}return s+="}})())",s};Blocks.logic_switch_break={init:function(){this.appendDummyInput().appendField("break"),this.setStyle("logic_blocks"),this.setPreviousStatement(!0)}};javascriptGenerator.forBlock.logic_switch_break=function(){return`break;
`};Blocks.logic_boolean={init:function(){this.appendDummyInput().appendField(new FieldDropdown([[Msg.LOGIC_BOOLEAN_TRUE,"TRUE"],[Msg.LOGIC_BOOLEAN_FALSE,"FALSE"],["random","RANDOM"]]),"BOOL"),this.setOutput(!0,"Boolean"),this.setStyle("logic_blocks"),this.setTooltip(Msg.LOGIC_BOOLEAN_TOOLTIP),this.setHelpUrl(Msg.LOGIC_BOOLEAN_HELPURL)}};javascriptGenerator.forBlock.logic_boolean=function(i,n){const o=i.getFieldValue("BOOL");return o==="RANDOM"?["(Math.round(Math.random()) === 1)",Order.ATOMIC]:[o==="TRUE"?"true":"false",Order.ATOMIC]};Blocks.eval={init:function(){this.appendValueInput("eval").setCheck("String").appendField("eval"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("advanced_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.eval=function(i,n){return`eval(${n.valueToCode(i,"eval",Order.ATOMIC)});
`};Blocks.eval_ret={init:function(){this.appendValueInput("eval").setCheck("String").appendField("eval"),this.setOutput(!0,null),this.setStyle("advanced_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.eval_ret=function(i,n){return[`eval(${n.valueToCode(i,"eval",Order.ATOMIC)})`,Order.ATOMIC]};Blocks.raw={init:function(){this.appendDummyInput().appendField("raw").appendField(new distExports$2.FieldMultilineInput,"raw"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("advanced_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.raw=function(i){return i.getFieldValue("raw")};Blocks.raw_ret={init:function(){this.appendDummyInput().appendField("raw").appendField(new distExports$2.FieldMultilineInput,"raw"),this.setOutput(!0,null),this.setStyle("advanced_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.raw_ret=function(i){return[i.getFieldValue("raw"),Order.ATOMIC]};Blocks.inline_function_a={init:function(){this.appendDummyInput().appendField("inline function"),this.appendStatementInput("statement").setCheck(null),this.setStyle("procedure_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.inline_function_a=function(i,n){return`(await (async () => {
        ${n.statementToCode(i,"statement")}
    })());
`};Blocks.inline_function_b={init:function(){this.appendDummyInput().appendField("inline function"),this.appendStatementInput("statement").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("procedure_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.inline_function_b=function(i,n){return`(await (async () => {
        ${n.statementToCode(i,"statement")}
    })());
`};Blocks.inline_function_c={init:function(){this.appendDummyInput().appendField("inline function"),this.appendStatementInput("statement").setCheck(null),this.setOutput(!0,null),this.setStyle("procedure_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.inline_function_c=function(i,n){return[`(await (async () => {
        ${n.statementToCode(i,"statement")}
    })())`,Order.ATOMIC]};Blocks.return_block_function={init:function(){this.appendValueInput("value").setCheck(null).appendField("return"),this.setPreviousStatement(!0,null),this.setStyle("procedure_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.return_block_function=function(i,n){return`return ${n.valueToCode(i,"value",Order.ATOMIC)};`};function procedures_defreturn(i,n){const o=n.getProcedureName(i.getFieldValue("NAME"));let s="";n.STATEMENT_PREFIX&&(s+=n.injectId(n.STATEMENT_PREFIX,i)),n.STATEMENT_SUFFIX&&(s+=n.injectId(n.STATEMENT_SUFFIX,i)),s&&(s=n.prefixLines(s,n.INDENT));let l="";n.INFINITE_LOOP_TRAP&&(l=n.prefixLines(n.injectId(n.INFINITE_LOOP_TRAP,i),n.INDENT));let f="";i.getInput("STACK")&&(f=n.statementToCode(i,"STACK"));let E="";i.getInput("RETURN")&&(E=n.valueToCode(i,"RETURN",Order.NONE)||"");let g="";f&&E&&(g=s),E&&(E=n.INDENT+"return "+E+`;
`);const N=[],x=i.getVars();for(let R=0;R<x.length;R++)N[R]=n.getVariableName(x[R]);let w="async function "+o+"("+N.join(", ")+`) {
`+s+l+f+g+E+"}";return w=n.scrub_(i,w),n.definitions_["%"+o]=w,null}javascriptGenerator.forBlock.procedures_defreturn=procedures_defreturn;javascriptGenerator.forBlock.procedures_defnoreturn=procedures_defreturn;Blocks.browser_console={init:function(){this.appendValueInput("VALUE").appendField("console").appendField(new FieldDropdown([["log","log"],["warn","warn"],["error","error"],["info","info"]]),"FUN"),this.setStyle("browser_blocks"),this.setPreviousStatement(!0),this.setNextStatement(!0)}};javascriptGenerator.forBlock.browser_console=function(i,n){const o=i.getFieldValue("FUN"),s=n.valueToCode(i,"VALUE",Order.ATOMIC);return`console.${o}(${s});
`};Blocks.browser_alert={init:function(){this.appendValueInput("alert").setCheck("String").appendField("alert"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("browser_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.browser_alert=function(i,n){return`alert(${n.valueToCode(i,"alert",Order.ATOMIC)});
`};Blocks.browser_confirm={init:function(){this.appendValueInput("val").setCheck("String").appendField("confirm"),this.setOutput(!0,"Boolean"),this.setStyle("browser_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.browser_confirm=function(i,n){return[`confirm(${n.valueToCode(i,"val",Order.ATOMIC)})`,Order.ATOMIC]};Blocks.browser_prompt={init:function(){this.appendValueInput("val").setCheck("String").appendField("prompt"),this.setOutput(!0,"String"),this.setStyle("browser_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.browser_prompt=function(i,n){return[`prompt(${n.valueToCode(i,"val",Order.ATOMIC)})`,Order.ATOMIC]};const DATA=new class{end="";very_end="";menus=0;extensions={};get Extension_ID_DEFAULT(){return this.Extension_ID||"extensionid"}get Extension_ID(){return $("#ExtensionID").value()}set Extension_ID(i){$("#ExtensionID").value(i)}get Extension_Name_DEFAULT(){return this.Extension_Name||"Extension Name"}get Extension_Name(){return $("#ExtensionName").value()}set Extension_Name(i){$("#ExtensionName").value(i)}get Extension_Color(){return $("#extcolor").value()}set Extension_Color(i){$("#extcolor").value(i)}get Force_Unsandboxed(){return $("#unsandboxed").checked()}set Force_Unsandboxed(i){$("#unsandboxed").checked(i)}};Blocks.create_block={init:function(){this.appendDummyInput().setAlign(inputs.Align.CENTRE).appendField("Create Block"),this.appendDummyInput().appendField("ID").appendField(new FieldTextInput("ID"),"ID"),this.appendDummyInput().appendField("Text").appendField(new FieldTextInput("Text"),"Text"),this.appendDummyInput().appendField("Show monitor").appendField(new FieldCheckbox("TRUE"),"Show"),this.appendDummyInput().appendField("type").appendField(new FieldDropdown([["block","Block"],["reporter","Reporter"],["boolean","boolean"]]),"type"),this.appendDummyInput().setAlign(inputs.Align.CENTRE).appendField("Inputs"),this.appendStatementInput("Inputs").setCheck(null),this.appendDummyInput().setAlign(inputs.Align.CENTRE).appendField("function"),this.appendStatementInput("Function").setCheck(null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.create_block=function(i,n){const o=`${DATA.Extension_ID_DEFAULT}_Block_${i.getFieldValue("ID")}`,s=i.getFieldValue("Text"),l=i.getFieldValue("Show")=="TRUE",f=i.getFieldValue("type"),E=n.statementToCode(i,"Inputs"),g=n.statementToCode(i,"Function");var N="";switch(f){case"Block":N="COMMAND";break;case"Reporter":N="REPORTER";break;case"boolean":N="BOOLEAN";break}return`
    blocks.push({
        opcode: "${o}",
        blockType: Scratch.BlockType.${N},
        text: "${s}",
        arguments: {
            ${E}
        },
        disableMonitor: ${!l}
    });
    Extension.prototype["${o}"] = async function(args, util) {
        ${g}
    };
    `};Blocks.get_input={init:function(){this.appendDummyInput().appendField("get Input").appendField(new FieldTextInput("inputID"),"ID"),this.setOutput(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.get_input=function(i){return[`args["${i.getFieldValue("ID")}"]`,Order.ATOMIC]};Blocks.create_hat={init:function(){this.appendDummyInput().appendField("Create Hat"),this.appendDummyInput().appendField("ID").appendField(new FieldTextInput("ID"),"ID"),this.appendDummyInput().appendField("Text").appendField(new FieldTextInput("Text"),"Text"),this.appendDummyInput().appendField("Inputs"),this.appendStatementInput("Inputs").setCheck(null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.create_hat=function(i,n){const o=`${DATA.Extension_ID_DEFAULT}_Hat_${i.getFieldValue("ID")}`,s=i.getFieldValue("Text"),l=n.statementToCode(i,"Inputs");return`blocks.push({
        blockType: Scratch.BlockType.EVENT,
        opcode: "${o}",
        text: "${s}",
        arguments: {
            ${l}
        },
        isEdgeActivated: false
    })`};Blocks.call_hat={init:function(){this.appendDummyInput().appendField("Call Hat").appendField(new FieldTextInput("ID"),"ID"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.call_hat=function(i){const n=`${DATA.Extension_ID_DEFAULT}_Hat_${i.getFieldValue("ID")}`;if(i.getTopStackBlock().type==="create_block")var o=`util.startHats('${DATA.Extension_ID_DEFAULT}_${n}');
`;else var o=`Scratch.vm.runtime.startHats('${DATA.Extension_ID_DEFAULT}_${n}');
`;return o};Blocks.call_hat_with_args={init:function(){this.appendDummyInput().appendField("Call Hat").appendField(new FieldTextInput("ID"),"ID"),this.appendValueInput("Args").setCheck("Object").appendField("with Args"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.call_hat_with_args=function(i,n){const o=`${DATA.Extension_ID_DEFAULT}_Hat_${i.getFieldValue("ID")}`,s=n.valueToCode(i,"Args",Order.ATOMIC);if(i.getTopStackBlock().type==="create_block")var l=`util.startHats('${DATA.Extension_ID_DEFAULT}_${o}', ${s});
`;else var l=`Scratch.vm.runtime.startHats('${DATA.Extension_ID_DEFAULT}_${o}', ${s});
`;return l};Blocks.create_input={init:function(){this.appendDummyInput().setAlign(inputs.Align.CENTRE).appendField("Create Input"),this.appendDummyInput().appendField("ID").appendField(new FieldTextInput("ID"),"ID"),this.appendDummyInput().appendField("type").appendField(new FieldDropdown([["string","String"],["number","Number"],["boolean","Boolean"],["empty","Empty"],["color","Color"],["costume","Costume"],["sound","Sound"],["angle","Angle"],["note","Note"],["matrix","Matrix"]]),"Type"),this.appendDummyInput().appendField("default text").appendField(new FieldTextInput(""),"_default"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.create_input=function(i){const n=i.getFieldValue("ID"),o=i.getFieldValue("Type"),s=i.getFieldValue("_default");return`"${n}": {
        type: Scratch.ArgumentType.${(()=>{switch(o){case"String":return"STRING";case"Number":return"NUMBER";case"Boolean":return"BOOLEAN";case"Empty":return"empty";case"Color":return"COLOR";case"Costume":return"COSTUME";case"Sound":return"SOUND";case"Angle":return"ANGLE";case"Note":return"NOTE";case"Matrix":return"MATRIX"}})()},
        defaultValue: \`${s}\`
    },
`};Blocks.input_menu={init:function(){this.appendDummyInput().appendField("Create Input Menu"),this.appendDummyInput().appendField("ID").appendField(new FieldTextInput("ID"),"ID"),this.appendDummyInput().appendField("Accept Reporters").appendField(new FieldCheckbox("TRUE"),"REPORTERS"),this.appendValueInput("MENU").setCheck("Array").appendField("menu"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.input_menu=function(i,n){const o=i.getFieldValue("ID"),s=i.getFieldValue("REPORTERS")==="TRUE",l=n.valueToCode(i,"MENU",Order.ATOMIC),f=`"${o}": {
        type: Scratch.ArgumentType.STRING,
        menu: "${DATA.Extension_ID_DEFAULT}_menu_${DATA.menus}",
    },
`;return DATA.end+=`
    menus["${DATA.Extension_ID_DEFAULT}_menu_${DATA.menus}"] = {
        acceptReporters: ${s},
        items: ${l},
    };
    
`,DATA.menus++,f};Blocks.create_menu={init:function(){this.appendDummyInput().setAlign(inputs.Align.CENTRE).appendField("Create Menu"),this.appendDummyInput().appendField("ID").appendField(new FieldTextInput("ID"),"ID"),this.appendDummyInput().appendField("Accept Reporters").appendField(new FieldCheckbox("TRUE"),"REPORTERS"),this.appendValueInput("MENU").setCheck("Array").appendField("menu"),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.create_menu=function(i,n){const o=i.getFieldValue("ID"),s=i.getFieldValue("REPORTERS")==="TRUE",l=n.valueToCode(i,"MENU",Order.ATOMIC);return`menus["${DATA.Extension_ID_DEFAULT}_customMenu_${o}"] = {
        acceptReporters: ${s},
        items: ${l},
    };`};Blocks.create_input_menu={init:function(){this.appendDummyInput().appendField("create Input from menu"),this.appendDummyInput().appendField("ID").appendField(new FieldTextInput("ID"),"ID"),this.appendDummyInput().appendField("Menu ID").appendField(new FieldTextInput("MenuID"),"MenuID"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.create_input_menu=function(i){const n=i.getFieldValue("ID"),o=i.getFieldValue("MenuID");return`"${n}": {
        type: Scratch.ArgumentType.STRING,
        menu: "${DATA.Extension_ID_DEFAULT}_customMenu_${o}",
    },
`};Blocks.create_dynamic_menu={init:function(){this.appendDummyInput().setAlign(inputs.Align.CENTRE).appendField("Create Dynamic Menu"),this.appendDummyInput().appendField("ID").appendField(new FieldTextInput("ID"),"ID"),this.appendDummyInput().appendField("Accept Reporters").appendField(new FieldCheckbox("TRUE"),"Accept"),this.appendStatementInput("Function").setCheck(null).appendField("Function"),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.create_dynamic_menu=function(i,n){const o=i.getFieldValue("ID"),s=i.getFieldValue("Accept")==="TRUE",l=n.statementToCode(i,"Function");return`
    menus["${DATA.Extension_ID_DEFAULT}_customMenu_${o}"] = {
        acceptReporters: ${s},
        items: "${DATA.Extension_ID_DEFAULT}_customMenu_${o}_func",
    };
    Extension.prototype["${DATA.Extension_ID_DEFAULT}_customMenu_${o}_func"] = async function() {
        ${l}
    };
    `};Blocks.menu_item={init:function(){this.appendDummyInput().appendField("menu item text:").appendField(new FieldTextInput("text"),"TEXT").appendField(" value:").appendField(new FieldTextInput("value"),"VALUE"),this.setOutput(!0,"Object"),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.menu_item=function(i){const n=i.getFieldValue("TEXT"),o=i.getFieldValue("VALUE");return[`{text:"${n}", value: "${o}"}`,Order.ATOMIC]};Blocks.return_block={init:function(){this.appendValueInput("value").setCheck(null).appendField("return"),this.setPreviousStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.return_block=function(i,n){return`return ${n.valueToCode(i,"value",Order.NONE)};`};Blocks.create_label={init:function(){this.appendDummyInput().appendField("create label with text").appendField(new FieldTextInput("text"),"text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.create_label=function(i){const n=i.getFieldValue("text"),o="label_"+crypto.randomUUID();return DATA.end+=`
    blocks.push({
        opcode: "${o}",
        blockType: Scratch.BlockType.LABEL,
        text: "${n}",
    });
    `,`"${o}", `};Blocks.create_button={init:function(){this.appendDummyInput().appendField("create button"),this.appendDummyInput().appendField("text").appendField(new FieldTextInput("text"),"text"),this.appendStatementInput("on_click").setCheck(null).appendField("on click"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.create_button=function(i,n){const o=i.getFieldValue("text"),s=n.statementToCode(i,"on_click"),l="button_"+crypto.randomUUID();return DATA.end+=`
    blocks.push({
        opcode: "${l}",
        func: "${l}",
        blockType: Scratch.BlockType.BUTTON,
        text: "${o}",
      });
      Extension.prototype["${l}"] = async function(util) {
        ${s}
      };`,`"${l}", `};Blocks.order_category={init:function(){this.appendDummyInput().appendField("Order Category"),this.appendStatementInput("types").setCheck(null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.order_category=function(i,n){const o=n.statementToCode(i,"types");return DATA.very_end+=`
    (() => {
    const temp = [
        ${o}
    ];
    blocks.sort((a, b) => {
        a = temp.indexOf(a.opcode);
        b = temp.indexOf(b.opcode);
        if(a === -1) {
          if(b === -1) {
            return 0;
          } else {
            return 1;
          }
        } else if(b === -1) {
          return -1;
        }
        return a - b;
      })
})();`,""};Blocks.use_block={init:function(){this.appendDummyInput().appendField("use block id:").appendField(new FieldTextInput("id"),"id"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.use_block=function(i){const n=i.getFieldValue("id");return`"${DATA.Extension_ID_DEFAULT}_Block_${n}",`};Blocks.use_hat={init:function(){this.appendDummyInput().appendField("use hat id:").appendField(new FieldTextInput("id"),"id"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};javascriptGenerator.forBlock.use_hat=function(i){const n=i.getFieldValue("id");return`"${DATA.Extension_ID_DEFAULT}_Hat_${n}",`};var js={exports:{}},src={},javascript={exports:{}},beautifier$2={},output={},hasRequiredOutput;function requireOutput(){if(hasRequiredOutput)return output;hasRequiredOutput=1;function i(s){this.__parent=s,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}i.prototype.clone_empty=function(){var s=new i(this.__parent);return s.set_indent(this.__indent_count,this.__alignment_count),s},i.prototype.item=function(s){return s<0?this.__items[this.__items.length+s]:this.__items[s]},i.prototype.has_match=function(s){for(var l=this.__items.length-1;l>=0;l--)if(this.__items[l].match(s))return!0;return!1},i.prototype.set_indent=function(s,l){this.is_empty()&&(this.__indent_count=s||0,this.__alignment_count=l||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},i.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},i.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},i.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var s=this.__parent.current_line;return s.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),s.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),s.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,s.__items[0]===" "&&(s.__items.splice(0,1),s.__character_count-=1),!0}return!1},i.prototype.is_empty=function(){return this.__items.length===0},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(s){this.__items.push(s);var l=s.lastIndexOf(`
`);l!==-1?this.__character_count=s.length-l:this.__character_count+=s.length},i.prototype.pop=function(){var s=null;return this.is_empty()||(s=this.__items.pop(),this.__character_count-=s.length),s},i.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},i.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},i.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var s="";return this.is_empty()?this.__parent.indent_empty_lines&&(s=this.__parent.get_indent_string(this.__indent_count)):(s=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),s+=this.__items.join("")),s};function n(s,l){this.__cache=[""],this.__indent_size=s.indent_size,this.__indent_string=s.indent_char,s.indent_with_tabs||(this.__indent_string=new Array(s.indent_size+1).join(s.indent_char)),l=l||"",s.indent_level>0&&(l=new Array(s.indent_level+1).join(this.__indent_string)),this.__base_string=l,this.__base_string_length=l.length}n.prototype.get_indent_size=function(s,l){var f=this.__base_string_length;return l=l||0,s<0&&(f=0),f+=s*this.__indent_size,f+=l,f},n.prototype.get_indent_string=function(s,l){var f=this.__base_string;return l=l||0,s<0&&(s=0,f=""),l+=s*this.__indent_size,this.__ensure_cache(l),f+=this.__cache[l],f},n.prototype.__ensure_cache=function(s){for(;s>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var s=this.__cache.length,l=0,f="";this.__indent_size&&s>=this.__indent_size&&(l=Math.floor(s/this.__indent_size),s-=l*this.__indent_size,f=new Array(l+1).join(this.__indent_string)),s&&(f+=new Array(s+1).join(" ")),this.__cache.push(f)};function o(s,l){this.__indent_cache=new n(s,l),this.raw=!1,this._end_with_newline=s.end_with_newline,this.indent_size=s.indent_size,this.wrap_line_length=s.wrap_line_length,this.indent_empty_lines=s.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new i(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}return o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(s,l){return this.__indent_cache.get_indent_string(s,l)},o.prototype.get_indent_size=function(s,l){return this.__indent_cache.get_indent_size(s,l)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(s){return this.is_empty()||!s&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(s){this.trim(!0);var l=this.current_line.pop();l&&(l[l.length-1]===`
`&&(l=l.replace(/\n+$/g,"")),this.current_line.push(l)),this._end_with_newline&&this.__add_outputline();var f=this.__lines.join(`
`);return s!==`
`&&(f=f.replace(/[\n]/g,s)),f},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(s,l){return s=s||0,l=l||0,this.next_line.set_indent(s,l),this.__lines.length>1?(this.current_line.set_indent(s,l),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(s){for(var l=0;l<s.newlines;l++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(s.whitespace_before),this.current_line.push(s.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(s){this.__add_space_before_token(),this.current_line.push(s),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(s){for(var l=this.__lines.length;s<l;)this.__lines[s]._remove_indent(),s++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(s){for(s=s===void 0?!1:s,this.current_line.trim();s&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(s,l){for(var f=this.__lines.length-2;f>=0;){var E=this.__lines[f];if(E.is_empty())break;if(E.item(0).indexOf(s)!==0&&E.item(-1)!==l){this.__lines.splice(f+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}f--}},output.Output=o,output}var token={},hasRequiredToken;function requireToken(){if(hasRequiredToken)return token;hasRequiredToken=1;function i(n,o,s,l){this.type=n,this.text=o,this.comments_before=null,this.newlines=s||0,this.whitespace_before=l||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}return token.Token=i,token}var acorn={},hasRequiredAcorn;function requireAcorn(){return hasRequiredAcorn||(hasRequiredAcorn=1,(function(i){var n="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",o="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",s="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",l="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",f="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",E="(?:"+f+"|["+n+s+"])",g="(?:"+f+"|["+o+s+l+"])*";i.identifier=new RegExp(E+g,"g"),i.identifierStart=new RegExp(E),i.identifierMatch=new RegExp("(?:"+f+"|["+o+s+l+"])+"),i.newline=/[\n\r\u2028\u2029]/,i.lineBreak=new RegExp(`\r
|`+i.newline.source),i.allLineBreaks=new RegExp(i.lineBreak.source,"g")})(acorn)),acorn}var options$3={},options$2={},hasRequiredOptions$3;function requireOptions$3(){if(hasRequiredOptions$3)return options$2;hasRequiredOptions$3=1;function i(s,l){this.raw_options=n(s,l),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","angular","django","erb","handlebars","php","smarty"],["auto"])}i.prototype._get_array=function(s,l){var f=this.raw_options[s],E=l||[];return typeof f=="object"?f!==null&&typeof f.concat=="function"&&(E=f.concat()):typeof f=="string"&&(E=f.split(/[^a-zA-Z0-9_\/\-]+/)),E},i.prototype._get_boolean=function(s,l){var f=this.raw_options[s],E=f===void 0?!!l:!!f;return E},i.prototype._get_characters=function(s,l){var f=this.raw_options[s],E=l||"";return typeof f=="string"&&(E=f.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),E},i.prototype._get_number=function(s,l){var f=this.raw_options[s];l=parseInt(l,10),isNaN(l)&&(l=0);var E=parseInt(f,10);return isNaN(E)&&(E=l),E},i.prototype._get_selection=function(s,l,f){var E=this._get_selection_list(s,l,f);if(E.length!==1)throw new Error("Invalid Option Value: The option '"+s+`' can only be one of the following values:
`+l+`
You passed in: '`+this.raw_options[s]+"'");return E[0]},i.prototype._get_selection_list=function(s,l,f){if(!l||l.length===0)throw new Error("Selection list cannot be empty.");if(f=f||[l[0]],!this._is_valid_selection(f,l))throw new Error("Invalid Default Value!");var E=this._get_array(s,f);if(!this._is_valid_selection(E,l))throw new Error("Invalid Option Value: The option '"+s+`' can contain only the following values:
`+l+`
You passed in: '`+this.raw_options[s]+"'");return E},i.prototype._is_valid_selection=function(s,l){return s.length&&l.length&&!s.some(function(f){return l.indexOf(f)===-1})};function n(s,l){var f={};s=o(s);var E;for(E in s)E!==l&&(f[E]=s[E]);if(l&&s[l])for(E in s[l])f[E]=s[l][E];return f}function o(s){var l={},f;for(f in s){var E=f.replace(/-/g,"_");l[E]=s[f]}return l}return options$2.Options=i,options$2.normalizeOpts=o,options$2.mergeOpts=n,options$2}var hasRequiredOptions$2;function requireOptions$2(){if(hasRequiredOptions$2)return options$3;hasRequiredOptions$2=1;var i=requireOptions$3().Options,n=["before-newline","after-newline","preserve-newline"];function o(s){i.call(this,s,"js");var l=this.raw_options.brace_style||null;l==="expand-strict"?this.raw_options.brace_style="expand":l==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var f=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var E=0;E<f.length;E++)f[E]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=f[E];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",n),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}return o.prototype=new i,options$3.Options=o,options$3}var tokenizer$2={},inputscanner={},hasRequiredInputscanner;function requireInputscanner(){if(hasRequiredInputscanner)return inputscanner;hasRequiredInputscanner=1;var i=RegExp.prototype.hasOwnProperty("sticky");function n(o){this.__input=o||"",this.__input_length=this.__input.length,this.__position=0}return n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var o=null;return this.hasNext()&&(o=this.__input.charAt(this.__position),this.__position+=1),o},n.prototype.peek=function(o){var s=null;return o=o||0,o+=this.__position,o>=0&&o<this.__input_length&&(s=this.__input.charAt(o)),s},n.prototype.__match=function(o,s){o.lastIndex=s;var l=o.exec(this.__input);return l&&!(i&&o.sticky)&&l.index!==s&&(l=null),l},n.prototype.test=function(o,s){return s=s||0,s+=this.__position,s>=0&&s<this.__input_length?!!this.__match(o,s):!1},n.prototype.testChar=function(o,s){var l=this.peek(s);return o.lastIndex=0,l!==null&&o.test(l)},n.prototype.match=function(o){var s=this.__match(o,this.__position);return s?this.__position+=s[0].length:s=null,s},n.prototype.read=function(o,s,l){var f="",E;return o&&(E=this.match(o),E&&(f+=E[0])),s&&(E||!o)&&(f+=this.readUntil(s,l)),f},n.prototype.readUntil=function(o,s){var l="",f=this.__position;o.lastIndex=this.__position;var E=o.exec(this.__input);return E?(f=E.index,s&&(f+=E[0].length)):f=this.__input_length,l=this.__input.substring(this.__position,f),this.__position=f,l},n.prototype.readUntilAfter=function(o){return this.readUntil(o,!0)},n.prototype.get_regexp=function(o,s){var l=null,f="g";return s&&i&&(f="y"),typeof o=="string"&&o!==""?l=new RegExp(o,f):o&&(l=new RegExp(o.source,f)),l},n.prototype.get_literal_regexp=function(o){return RegExp(o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},n.prototype.peekUntilAfter=function(o){var s=this.__position,l=this.readUntilAfter(o);return this.__position=s,l},n.prototype.lookBack=function(o){var s=this.__position-1;return s>=o.length&&this.__input.substring(s-o.length,s).toLowerCase()===o},inputscanner.InputScanner=n,inputscanner}var tokenizer$1={},tokenstream={},hasRequiredTokenstream;function requireTokenstream(){if(hasRequiredTokenstream)return tokenstream;hasRequiredTokenstream=1;function i(n){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=n}return i.prototype.restart=function(){this.__position=0},i.prototype.isEmpty=function(){return this.__tokens_length===0},i.prototype.hasNext=function(){return this.__position<this.__tokens_length},i.prototype.next=function(){var n=null;return this.hasNext()&&(n=this.__tokens[this.__position],this.__position+=1),n},i.prototype.peek=function(n){var o=null;return n=n||0,n+=this.__position,n>=0&&n<this.__tokens_length&&(o=this.__tokens[n]),o},i.prototype.add=function(n){this.__parent_token&&(n.parent=this.__parent_token),this.__tokens.push(n),this.__tokens_length+=1},tokenstream.TokenStream=i,tokenstream}var whitespacepattern={},pattern={},hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1;function i(n,o){this._input=n,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,o&&(this._starting_pattern=this._input.get_regexp(o._starting_pattern,!0),this._match_pattern=this._input.get_regexp(o._match_pattern,!0),this._until_pattern=this._input.get_regexp(o._until_pattern),this._until_after=o._until_after)}return i.prototype.read=function(){var n=this._input.read(this._starting_pattern);return(!this._starting_pattern||n)&&(n+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),n},i.prototype.read_match=function(){return this._input.match(this._match_pattern)},i.prototype.until_after=function(n){var o=this._create();return o._until_after=!0,o._until_pattern=this._input.get_regexp(n),o._update(),o},i.prototype.until=function(n){var o=this._create();return o._until_after=!1,o._until_pattern=this._input.get_regexp(n),o._update(),o},i.prototype.starting_with=function(n){var o=this._create();return o._starting_pattern=this._input.get_regexp(n,!0),o._update(),o},i.prototype.matching=function(n){var o=this._create();return o._match_pattern=this._input.get_regexp(n,!0),o._update(),o},i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){},pattern.Pattern=i,pattern}var hasRequiredWhitespacepattern;function requireWhitespacepattern(){if(hasRequiredWhitespacepattern)return whitespacepattern;hasRequiredWhitespacepattern=1;var i=requirePattern().Pattern;function n(o,s){i.call(this,o,s),s?this._line_regexp=this._input.get_regexp(s._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}return n.prototype=new i,n.prototype.__set_whitespace_patterns=function(o,s){o+="\\t ",s+="\\n\\r",this._match_pattern=this._input.get_regexp("["+o+s+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+s+"]")},n.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var o=this._input.read(this._match_pattern);if(o===" ")this.whitespace_before_token=" ";else if(o){var s=this.__split(this._newline_regexp,o);this.newline_count=s.length-1,this.whitespace_before_token=s[this.newline_count]}return o},n.prototype.matching=function(o,s){var l=this._create();return l.__set_whitespace_patterns(o,s),l._update(),l},n.prototype._create=function(){return new n(this._input,this)},n.prototype.__split=function(o,s){o.lastIndex=0;for(var l=0,f=[],E=o.exec(s);E;)f.push(s.substring(l,E.index)),l=E.index+E[0].length,E=o.exec(s);return l<s.length?f.push(s.substring(l,s.length)):f.push(""),f},whitespacepattern.WhitespacePattern=n,whitespacepattern}var hasRequiredTokenizer$2;function requireTokenizer$2(){if(hasRequiredTokenizer$2)return tokenizer$1;hasRequiredTokenizer$2=1;var i=requireInputscanner().InputScanner,n=requireToken().Token,o=requireTokenstream().TokenStream,s=requireWhitespacepattern().WhitespacePattern,l={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},f=function(E,g){this._input=new i(E),this._options=g||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};return f.prototype.tokenize=function(){this._input.restart(),this.__tokens=new o,this._reset();for(var E,g=new n(l.START,""),N=null,x=[],w=new o;g.type!==l.EOF;){for(E=this._get_next_token(g,N);this._is_comment(E);)w.add(E),E=this._get_next_token(g,N);w.isEmpty()||(E.comments_before=w,w=new o),E.parent=N,this._is_opening(E)?(x.push(N),N=E):N&&this._is_closing(E,N)&&(E.opened=N,N.closed=E,N=x.pop(),E.parent=N),E.previous=g,g.next=E,this.__tokens.add(E),g=E}return this.__tokens},f.prototype._is_first_token=function(){return this.__tokens.isEmpty()},f.prototype._reset=function(){},f.prototype._get_next_token=function(E,g){this._readWhitespace();var N=this._input.read(/.+/g);return N?this._create_token(l.RAW,N):this._create_token(l.EOF,"")},f.prototype._is_comment=function(E){return!1},f.prototype._is_opening=function(E){return!1},f.prototype._is_closing=function(E,g){return!1},f.prototype._create_token=function(E,g){var N=new n(E,g,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return N},f.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},tokenizer$1.Tokenizer=f,tokenizer$1.TOKEN=l,tokenizer$1}var directives={},hasRequiredDirectives;function requireDirectives(){if(hasRequiredDirectives)return directives;hasRequiredDirectives=1;function i(n,o){n=typeof n=="string"?n:n.source,o=typeof o=="string"?o:o.source,this.__directives_block_pattern=new RegExp(n+/ beautify( \w+[:]\w+)+ /.source+o,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(n+/\sbeautify\signore:end\s/.source+o,"g")}return i.prototype.get_directives=function(n){if(!n.match(this.__directives_block_pattern))return null;var o={};this.__directive_pattern.lastIndex=0;for(var s=this.__directive_pattern.exec(n);s;)o[s[1]]=s[2],s=this.__directive_pattern.exec(n);return o},i.prototype.readIgnored=function(n){return n.readUntilAfter(this.__directives_end_ignore_pattern)},directives.Directives=i,directives}var templatablepattern={},hasRequiredTemplatablepattern;function requireTemplatablepattern(){if(hasRequiredTemplatablepattern)return templatablepattern;hasRequiredTemplatablepattern=1;var i=requirePattern().Pattern,n={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1,angular:!1};function o(s,l){i.call(this,s,l),this.__template_pattern=null,this._disabled=Object.assign({},n),this._excluded=Object.assign({},n),l&&(this.__template_pattern=this._input.get_regexp(l.__template_pattern),this._excluded=Object.assign(this._excluded,l._excluded),this._disabled=Object.assign(this._disabled,l._disabled));var f=new i(s);this.__patterns={handlebars_comment:f.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:f.starting_with(/{{{/).until_after(/}}}/),handlebars:f.starting_with(/{{/).until_after(/}}/),php:f.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:f.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:f.starting_with(/{%/).until_after(/%}/),django_value:f.starting_with(/{{/).until_after(/}}/),django_comment:f.starting_with(/{#/).until_after(/#}/),smarty:f.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:f.starting_with(/{\*/).until_after(/\*}/),smarty_literal:f.starting_with(/{literal}/).until_after(/{\/literal}/)}}return o.prototype=new i,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(s){var l=this._create();return l._disabled[s]=!0,l._update(),l},o.prototype.read_options=function(s){var l=this._create();for(var f in n)l._disabled[f]=s.templating.indexOf(f)===-1;return l._update(),l},o.prototype.exclude=function(s){var l=this._create();return l._excluded[s]=!0,l._update(),l},o.prototype.read=function(){var s="";this._match_pattern?s=this._input.read(this._starting_pattern):s=this._input.read(this._starting_pattern,this.__template_pattern);for(var l=this._read_template();l;)this._match_pattern?l+=this._input.read(this._match_pattern):l+=this._input.readUntil(this.__template_pattern),s+=l,l=this._read_template();return this._until_after&&(s+=this._input.readUntilAfter(this._until_pattern)),s},o.prototype.__set_templated_pattern=function(){var s=[];this._disabled.php||s.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||s.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.angular||s.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||s.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(s.push(this.__patterns.django._starting_pattern.source),s.push(this.__patterns.django_value._starting_pattern.source),s.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||s.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&s.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+s.join("|")+")")},o.prototype._read_template=function(){var s="",l=this._input.peek();if(l==="<"){var f=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&f==="?"&&(s=s||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&f==="%"&&(s=s||this.__patterns.erb.read())}else l==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(s=s||this.__patterns.handlebars_comment.read(),s=s||this.__patterns.handlebars_unescaped.read(),s=s||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(s=s||this.__patterns.django_value.read()),this._excluded.django||(s=s||this.__patterns.django_comment.read(),s=s||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(s=s||this.__patterns.smarty_comment.read(),s=s||this.__patterns.smarty_literal.read(),s=s||this.__patterns.smarty.read()));return s},templatablepattern.TemplatablePattern=o,templatablepattern}var hasRequiredTokenizer$1;function requireTokenizer$1(){if(hasRequiredTokenizer$1)return tokenizer$2;hasRequiredTokenizer$1=1;var i=requireInputscanner().InputScanner,n=requireTokenizer$2().Tokenizer,o=requireTokenizer$2().TOKEN,s=requireDirectives().Directives,l=requireAcorn(),f=requirePattern().Pattern,E=requireTemplatablepattern().TemplatablePattern;function g(p,I){return I.indexOf(p)!==-1}var N={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:o.START,RAW:o.RAW,EOF:o.EOF},x=new s(/\/\*/,/\*\//),w=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,R=/[0-9]/,k=/[^\d\.]/,B=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),P=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";P=P.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),P="\\?\\.(?!\\d) "+P,P=P.replace(/ /g,"|");var z=new RegExp(P),m="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),d=m.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),y=new RegExp("^(?:"+d.join("|")+")$"),F,L=function(p,I){n.call(this,p,I),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var D=new f(this._input),V=new E(this._input).read_options(this._options);this.__patterns={template:V,identifier:V.starting_with(l.identifier).matching(l.identifierMatch),number:D.matching(w),punct:D.matching(z),comment:D.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:D.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:D.matching(/<!--/),html_comment_end:D.matching(/-->/),include:D.starting_with(/#include/).until_after(l.lineBreak),shebang:D.starting_with(/#!/).until_after(l.lineBreak),xml:D.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:V.until(/['\\\n\r\u2028\u2029]/),double_quote:V.until(/["\\\n\r\u2028\u2029]/),template_text:V.until(/[`\\$]/),template_expression:V.until(/[`}\\]/)}};L.prototype=new n,L.prototype._is_comment=function(p){return p.type===N.COMMENT||p.type===N.BLOCK_COMMENT||p.type===N.UNKNOWN},L.prototype._is_opening=function(p){return p.type===N.START_BLOCK||p.type===N.START_EXPR},L.prototype._is_closing=function(p,I){return(p.type===N.END_BLOCK||p.type===N.END_EXPR)&&I&&(p.text==="]"&&I.text==="["||p.text===")"&&I.text==="("||p.text==="}"&&I.text==="{")},L.prototype._reset=function(){F=!1},L.prototype._get_next_token=function(p,I){var D=null;this._readWhitespace();var V=this._input.peek();return V===null?this._create_token(N.EOF,""):(D=D||this._read_non_javascript(V),D=D||this._read_string(V),D=D||this._read_pair(V,this._input.peek(1)),D=D||this._read_word(p),D=D||this._read_singles(V),D=D||this._read_comment(V),D=D||this._read_regexp(V,p),D=D||this._read_xml(V,p),D=D||this._read_punctuation(),D=D||this._create_token(N.UNKNOWN,this._input.next()),D)},L.prototype._read_word=function(p){var I;if(I=this.__patterns.identifier.read(),I!=="")return I=I.replace(l.allLineBreaks,`
`),!(p.type===N.DOT||p.type===N.RESERVED&&(p.text==="set"||p.text==="get"))&&y.test(I)?(I==="in"||I==="of")&&(p.type===N.WORD||p.type===N.STRING)?this._create_token(N.OPERATOR,I):this._create_token(N.RESERVED,I):this._create_token(N.WORD,I);if(I=this.__patterns.number.read(),I!=="")return this._create_token(N.WORD,I)},L.prototype._read_singles=function(p){var I=null;return p==="("||p==="["?I=this._create_token(N.START_EXPR,p):p===")"||p==="]"?I=this._create_token(N.END_EXPR,p):p==="{"?I=this._create_token(N.START_BLOCK,p):p==="}"?I=this._create_token(N.END_BLOCK,p):p===";"?I=this._create_token(N.SEMICOLON,p):p==="."&&k.test(this._input.peek(1))?I=this._create_token(N.DOT,p):p===","&&(I=this._create_token(N.COMMA,p)),I&&this._input.next(),I},L.prototype._read_pair=function(p,I){var D=null;return p==="#"&&I==="{"&&(D=this._create_token(N.START_BLOCK,p+I)),D&&(this._input.next(),this._input.next()),D},L.prototype._read_punctuation=function(){var p=this.__patterns.punct.read();if(p!=="")return p==="="?this._create_token(N.EQUALS,p):p==="?."?this._create_token(N.DOT,p):this._create_token(N.OPERATOR,p)},L.prototype._read_non_javascript=function(p){var I="";if(p==="#"){if(this._is_first_token()&&(I=this.__patterns.shebang.read(),I))return this._create_token(N.UNKNOWN,I.trim()+`
`);if(I=this.__patterns.include.read(),I)return this._create_token(N.UNKNOWN,I.trim()+`
`);p=this._input.next();var D="#";if(this._input.hasNext()&&this._input.testChar(R)){do p=this._input.next(),D+=p;while(this._input.hasNext()&&p!=="#"&&p!=="=");return p==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(D+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(D+="{}",this._input.next(),this._input.next())),this._create_token(N.WORD,D)}this._input.back()}else if(p==="<"&&this._is_first_token()){if(I=this.__patterns.html_comment_start.read(),I){for(;this._input.hasNext()&&!this._input.testChar(l.newline);)I+=this._input.next();return F=!0,this._create_token(N.COMMENT,I)}}else if(F&&p==="-"&&(I=this.__patterns.html_comment_end.read(),I))return F=!1,this._create_token(N.COMMENT,I);return null},L.prototype._read_comment=function(p){var I=null;if(p==="/"){var D="";if(this._input.peek(1)==="*"){D=this.__patterns.block_comment.read();var V=x.get_directives(D);V&&V.ignore==="start"&&(D+=x.readIgnored(this._input)),D=D.replace(l.allLineBreaks,`
`),I=this._create_token(N.BLOCK_COMMENT,D),I.directives=V}else this._input.peek(1)==="/"&&(D=this.__patterns.comment.read(),I=this._create_token(N.COMMENT,D))}return I},L.prototype._read_string=function(p){if(p==="`"||p==="'"||p==='"'){var I=this._input.next();return this.has_char_escapes=!1,p==="`"?I+=this._read_string_recursive("`",!0,"${"):I+=this._read_string_recursive(p),this.has_char_escapes&&this._options.unescape_strings&&(I=G(I)),this._input.peek()===p&&(I+=this._input.next()),I=I.replace(l.allLineBreaks,`
`),this._create_token(N.STRING,I)}return null},L.prototype._allow_regexp_or_xml=function(p){return p.type===N.RESERVED&&g(p.text,["return","case","throw","else","do","typeof","yield"])||p.type===N.END_EXPR&&p.text===")"&&p.opened.previous.type===N.RESERVED&&g(p.opened.previous.text,["if","while","for"])||g(p.type,[N.COMMENT,N.START_EXPR,N.START_BLOCK,N.START,N.END_BLOCK,N.OPERATOR,N.EQUALS,N.EOF,N.SEMICOLON,N.COMMA])},L.prototype._read_regexp=function(p,I){if(p==="/"&&this._allow_regexp_or_xml(I)){for(var D=this._input.next(),V=!1,C=!1;this._input.hasNext()&&(V||C||this._input.peek()!==p)&&!this._input.testChar(l.newline);)D+=this._input.peek(),V?V=!1:(V=this._input.peek()==="\\",this._input.peek()==="["?C=!0:this._input.peek()==="]"&&(C=!1)),this._input.next();return this._input.peek()===p&&(D+=this._input.next(),D+=this._input.read(l.identifier)),this._create_token(N.STRING,D)}return null},L.prototype._read_xml=function(p,I){if(this._options.e4x&&p==="<"&&this._allow_regexp_or_xml(I)){var D="",V=this.__patterns.xml.read_match();if(V){for(var C=V[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),K=C.indexOf("{")===0,X=0;V;){var re=!!V[1],se=V[2],Pe=!!V[V.length-1]||se.slice(0,8)==="![CDATA[";if(!Pe&&(se===C||K&&se.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(re?--X:++X),D+=V[0],X<=0)break;V=this.__patterns.xml.read_match()}return V||(D+=this._input.match(/[\s\S]*/g)[0]),D=D.replace(l.allLineBreaks,`
`),this._create_token(N.STRING,D)}}return null};function G(p){for(var I="",D=0,V=new i(p),C=null;V.hasNext();)if(C=V.match(/([\s]|[^\\]|\\\\)+/g),C&&(I+=C[0]),V.peek()==="\\"){if(V.next(),V.peek()==="x")C=V.match(/x([0-9A-Fa-f]{2})/g);else if(V.peek()==="u")C=V.match(/u([0-9A-Fa-f]{4})/g),C||(C=V.match(/u\{([0-9A-Fa-f]+)\}/g));else{I+="\\",V.hasNext()&&(I+=V.next());continue}if(!C||(D=parseInt(C[1],16),D>126&&D<=255&&C[0].indexOf("x")===0))return p;D>=0&&D<32||D>1114111?I+="\\"+C[0]:D===34||D===39||D===92?I+="\\"+String.fromCharCode(D):I+=String.fromCharCode(D)}return I}return L.prototype._read_string_recursive=function(p,I,D){var V,C;p==="'"?C=this.__patterns.single_quote:p==='"'?C=this.__patterns.double_quote:p==="`"?C=this.__patterns.template_text:p==="}"&&(C=this.__patterns.template_expression);for(var K=C.read(),X="";this._input.hasNext();){if(X=this._input.next(),X===p||!I&&l.newline.test(X)){this._input.back();break}else X==="\\"&&this._input.hasNext()?(V=this._input.peek(),V==="x"||V==="u"?this.has_char_escapes=!0:V==="\r"&&this._input.peek(1)===`
`&&this._input.next(),X+=this._input.next()):D&&(D==="${"&&X==="$"&&this._input.peek()==="{"&&(X+=this._input.next()),D===X&&(p==="`"?X+=this._read_string_recursive("}",I,"`"):X+=this._read_string_recursive("`",I,"${"),this._input.hasNext()&&(X+=this._input.next())));X+=C.read(),K+=X}return K},tokenizer$2.Tokenizer=L,tokenizer$2.TOKEN=N,tokenizer$2.positionable_operators=B.slice(),tokenizer$2.line_starters=m.slice(),tokenizer$2}var hasRequiredBeautifier$2;function requireBeautifier$2(){if(hasRequiredBeautifier$2)return beautifier$2;hasRequiredBeautifier$2=1;var i=requireOutput().Output,n=requireToken().Token,o=requireAcorn(),s=requireOptions$2().Options,l=requireTokenizer$1().Tokenizer,f=requireTokenizer$1().line_starters,E=requireTokenizer$1().positionable_operators,g=requireTokenizer$1().TOKEN;function N(C,K){return K.indexOf(C)!==-1}function x(C){return C.replace(/^\s+/g,"")}function w(C){for(var K={},X=0;X<C.length;X++)K[C[X].replace(/-/g,"_")]=C[X];return K}function R(C,K){return C&&C.type===g.RESERVED&&C.text===K}function k(C,K){return C&&C.type===g.RESERVED&&N(C.text,K)}var B=["case","return","do","if","throw","else","await","break","continue","async"],P=["before-newline","after-newline","preserve-newline"],z=w(P),m=[z.before_newline,z.preserve_newline],d={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function y(C,K){K.multiline_frame||K.mode===d.ForInitializer||K.mode===d.Conditional||C.remove_indent(K.start_line_index)}function F(C){C=C.replace(o.allLineBreaks,`
`);for(var K=[],X=C.indexOf(`
`);X!==-1;)K.push(C.substring(0,X)),C=C.substring(X+1),X=C.indexOf(`
`);return C.length&&K.push(C),K}function L(C){return C===d.ArrayLiteral}function G(C){return N(C,[d.Expression,d.ForInitializer,d.Conditional])}function p(C,K){for(var X=0;X<C.length;X++){var re=C[X].trim();if(re.charAt(0)!==K)return!1}return!0}function I(C,K){for(var X=0,re=C.length,se;X<re;X++)if(se=C[X],se&&se.indexOf(K)!==0)return!1;return!0}function D(C,K){K=K||{},this._source_text=C||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new s(K)}D.prototype.create_flags=function(C,K){var X=0;C&&(X=C.indentation_level,!this._output.just_added_newline()&&C.line_indent_level>X&&(X=C.line_indent_level));var re={mode:K,parent:C,last_token:C?C.last_token:new n(g.START_BLOCK,""),last_word:C?C.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:X,alignment:0,line_indent_level:C?C.line_indent_level:X,start_line_index:this._output.get_line_number(),ternary_depth:0};return re},D.prototype._reset=function(C){var K=C.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new i(this._options,K),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(d.BlockStatement);var X=new l(C,this._options);return this._tokens=X.tokenize(),C},D.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var C,K=this._reset(this._source_text),X=this._options.eol;this._options.eol==="auto"&&(X=`
`,K&&o.lineBreak.test(K||"")&&(X=K.match(o.lineBreak)[0]));for(var re=this._tokens.next();re;)this.handle_token(re),this._last_last_text=this._flags.last_token.text,this._flags.last_token=re,re=this._tokens.next();return C=this._output.get_code(X),C},D.prototype.handle_token=function(C,K){C.type===g.START_EXPR?this.handle_start_expr(C):C.type===g.END_EXPR?this.handle_end_expr(C):C.type===g.START_BLOCK?this.handle_start_block(C):C.type===g.END_BLOCK?this.handle_end_block(C):C.type===g.WORD?this.handle_word(C):C.type===g.RESERVED?this.handle_word(C):C.type===g.SEMICOLON?this.handle_semicolon(C):C.type===g.STRING?this.handle_string(C):C.type===g.EQUALS?this.handle_equals(C):C.type===g.OPERATOR?this.handle_operator(C):C.type===g.COMMA?this.handle_comma(C):C.type===g.BLOCK_COMMENT?this.handle_block_comment(C,K):C.type===g.COMMENT?this.handle_comment(C,K):C.type===g.DOT?this.handle_dot(C):C.type===g.EOF?this.handle_eof(C):C.type===g.UNKNOWN?this.handle_unknown(C,K):this.handle_unknown(C,K)},D.prototype.handle_whitespace_and_comments=function(C,K){var X=C.newlines,re=this._options.keep_array_indentation&&L(this._flags.mode);if(C.comments_before)for(var se=C.comments_before.next();se;)this.handle_whitespace_and_comments(se,K),this.handle_token(se,K),se=C.comments_before.next();if(re)for(var Pe=0;Pe<X;Pe+=1)this.print_newline(Pe>0,K);else if(this._options.max_preserve_newlines&&X>this._options.max_preserve_newlines&&(X=this._options.max_preserve_newlines),this._options.preserve_newlines&&X>1){this.print_newline(!1,K);for(var Te=1;Te<X;Te+=1)this.print_newline(!0,K)}};var V=["async","break","continue","return","throw","yield"];return D.prototype.allow_wrap_or_preserved_newline=function(C,K){if(K=K===void 0?!1:K,!this._output.just_added_newline()){var X=this._options.preserve_newlines&&C.newlines||K,re=N(this._flags.last_token.text,E)||N(C.text,E);if(re){var se=N(this._flags.last_token.text,E)&&N(this._options.operator_position,m)||N(C.text,E);X=X&&se}if(X)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(k(this._flags.last_token,V))return;this._output.set_wrap_point()}}},D.prototype.print_newline=function(C,K){if(!K&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==g.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var X=this._tokens.peek();this._flags.mode===d.Statement&&!(this._flags.if_block&&R(X,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(C)&&(this._flags.multiline_frame=!0)},D.prototype.print_token_line_indentation=function(C){this._output.just_added_newline()&&(this._options.keep_array_indentation&&C.newlines&&(C.text==="["||L(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(C.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},D.prototype.print_token=function(C){if(this._output.raw){this._output.add_raw_token(C);return}if(this._options.comma_first&&C.previous&&C.previous.type===g.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var K=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(K),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(C),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(C),this._output.non_breaking_space=!0,this._output.add_token(C.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)},D.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},D.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},D.prototype.set_mode=function(C){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,C),this._flags=this.create_flags(this._previous_flags,C),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},D.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===d.Statement&&y(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},D.prototype.start_of_object_property=function(){return this._flags.parent.mode===d.ObjectLiteral&&this._flags.mode===d.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||k(this._flags.last_token,["get","set"]))},D.prototype.start_of_statement=function(C){var K=!1;return K=K||k(this._flags.last_token,["var","let","const"])&&C.type===g.WORD,K=K||R(this._flags.last_token,"do"),K=K||!(this._flags.parent.mode===d.ObjectLiteral&&this._flags.mode===d.Statement)&&k(this._flags.last_token,V)&&!C.newlines,K=K||R(this._flags.last_token,"else")&&!(R(C,"if")&&!C.comments_before),K=K||this._flags.last_token.type===g.END_EXPR&&(this._previous_flags.mode===d.ForInitializer||this._previous_flags.mode===d.Conditional),K=K||this._flags.last_token.type===g.WORD&&this._flags.mode===d.BlockStatement&&!this._flags.in_case&&!(C.text==="--"||C.text==="++")&&this._last_last_text!=="function"&&C.type!==g.WORD&&C.type!==g.RESERVED,K=K||this._flags.mode===d.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||k(this._flags.last_token,["get","set"])),K?(this.set_mode(d.Statement),this.indent(),this.handle_whitespace_and_comments(C,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(C,k(C,["do","for","if","while"])),!0):!1},D.prototype.handle_start_expr=function(C){this.start_of_statement(C)||this.handle_whitespace_and_comments(C);var K=d.Expression;if(C.text==="["){if(this._flags.last_token.type===g.WORD||this._flags.last_token.text===")"){k(this._flags.last_token,f)&&(this._output.space_before_token=!0),this.print_token(C),this.set_mode(K),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}K=d.ArrayLiteral,L(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),N(this._flags.last_token.type,[g.START_EXPR,g.END_EXPR,g.WORD,g.OPERATOR,g.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===g.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,K=d.ForInitializer):N(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,K=d.Conditional):N(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&C.whitespace_before===""?this._output.space_before_token=!1:(N(this._flags.last_token.text,f)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===g.EQUALS||this._flags.last_token.type===g.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(C);else if(this._flags.last_token.type===g.WORD){this._output.space_before_token=!1;var X=this._tokens.peek(-3);if(this._options.space_after_named_function&&X){var re=this._tokens.peek(-4);k(X,["async","function"])||X.text==="*"&&k(re,["async","function"])?this._output.space_before_token=!0:this._flags.mode===d.ObjectLiteral?(X.text==="{"||X.text===","||X.text==="*"&&(re.text==="{"||re.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(C);(this._flags.last_token.type===g.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(N(this._last_last_text,["function","yield"])||this._flags.mode===d.ObjectLiteral&&N(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===g.START_BLOCK?this.print_newline():(this._flags.last_token.type===g.END_EXPR||this._flags.last_token.type===g.START_EXPR||this._flags.last_token.type===g.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===g.COMMA)&&this.allow_wrap_or_preserved_newline(C,C.newlines),this.print_token(C),this.set_mode(K),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},D.prototype.handle_end_expr=function(C){for(;this._flags.mode===d.Statement;)this.restore_mode();this.handle_whitespace_and_comments(C),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(C,C.text==="]"&&L(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===g.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(C),this.restore_mode(),y(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===d.Conditional&&(this._previous_flags.mode=d.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},D.prototype.handle_start_block=function(C){this.handle_whitespace_and_comments(C);var K=this._tokens.peek(),X=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===g.END_EXPR?(this.set_mode(d.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(d.BlockStatement):X&&(N(X.text,[":",","])&&N(K.type,[g.STRING,g.WORD,g.RESERVED])||N(K.text,["get","set","..."])&&N(X.type,[g.WORD,g.RESERVED]))?N(this._last_last_text,["class","interface"])&&!N(X.text,[":",","])?this.set_mode(d.BlockStatement):this.set_mode(d.ObjectLiteral):this._flags.last_token.type===g.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(d.BlockStatement):N(this._flags.last_token.type,[g.EQUALS,g.START_EXPR,g.COMMA,g.OPERATOR])||k(this._flags.last_token,["return","throw","import","default"])?this.set_mode(d.ObjectLiteral):this.set_mode(d.BlockStatement),this._flags.last_token&&k(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var re=!K.comments_before&&K.text==="}",se=re&&this._flags.last_word==="function"&&this._flags.last_token.type===g.END_EXPR;if(this._options.brace_preserve_inline){var Pe=0,Te=null;this._flags.inline_frame=!0;do if(Pe+=1,Te=this._tokens.peek(Pe-1),Te.newlines){this._flags.inline_frame=!1;break}while(Te.type!==g.EOF&&!(Te.type===g.END_BLOCK&&Te.opened===C))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&C.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==g.OPERATOR&&(se||this._flags.last_token.type===g.EQUALS||k(this._flags.last_token,B)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(L(this._previous_flags.mode)&&(this._flags.last_token.type===g.START_EXPR||this._flags.last_token.type===g.COMMA)&&((this._flags.last_token.type===g.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===g.COMMA||this._flags.last_token.type===g.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(C),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==g.OPERATOR&&this._flags.last_token.type!==g.START_EXPR&&(N(this._flags.last_token.type,[g.START_BLOCK,g.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(C),this.indent(),!re&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()},D.prototype.handle_end_block=function(C){for(this.handle_whitespace_and_comments(C);this._flags.mode===d.Statement;)this.restore_mode();var K=this._flags.last_token.type===g.START_BLOCK;this._flags.inline_frame&&!K?this._output.space_before_token=!0:this._options.brace_style==="expand"?K||this.print_newline():K||(L(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(C)},D.prototype.handle_word=function(C){if(C.type===g.RESERVED){if(N(C.text,["set","get"])&&this._flags.mode!==d.ObjectLiteral)C.type=g.WORD;else if(C.text==="import"&&N(this._tokens.peek().text,["(","."]))C.type=g.WORD;else if(N(C.text,["as","from"])&&!this._flags.import_block)C.type=g.WORD;else if(this._flags.mode===d.ObjectLiteral){var K=this._tokens.peek();K.text===":"&&(C.type=g.WORD)}}if(this.start_of_statement(C)?k(this._flags.last_token,["var","let","const"])&&C.type===g.WORD&&(this._flags.declaration_statement=!0):C.newlines&&!G(this._flags.mode)&&(this._flags.last_token.type!==g.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==g.EQUALS&&(this._options.preserve_newlines||!k(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(C),this.print_newline()):this.handle_whitespace_and_comments(C),this._flags.do_block&&!this._flags.do_while)if(R(C,"while")){this._output.space_before_token=!0,this.print_token(C),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&R(C,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===d.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&k(C,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(C),this._flags.in_case=!0;return}if((this._flags.last_token.type===g.COMMA||this._flags.last_token.type===g.START_EXPR||this._flags.last_token.type===g.EQUALS||this._flags.last_token.type===g.OPERATOR)&&!this.start_of_object_property()&&!(N(this._flags.last_token.text,["+","-"])&&this._last_last_text===":"&&this._flags.parent.mode===d.ObjectLiteral)&&this.allow_wrap_or_preserved_newline(C),R(C,"function")){(N(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(N(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===g.OPERATOR))&&!this._output.just_added_blankline()&&!C.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===g.RESERVED||this._flags.last_token.type===g.WORD?k(this._flags.last_token,["get","set","new","export"])||k(this._flags.last_token,V)?this._output.space_before_token=!0:R(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===g.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(G(this._flags.mode)||L(this._flags.mode))||this.print_newline(),this.print_token(C),this._flags.last_word=C.text;return}var X="NONE";if(this._flags.last_token.type===g.END_BLOCK?this._previous_flags.inline_frame?X="SPACE":k(C,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&C.newlines?X="NEWLINE":(X="SPACE",this._output.space_before_token=!0):X="NEWLINE":this._flags.last_token.type===g.SEMICOLON&&this._flags.mode===d.BlockStatement?X="NEWLINE":this._flags.last_token.type===g.SEMICOLON&&G(this._flags.mode)?X="SPACE":this._flags.last_token.type===g.STRING?X="NEWLINE":this._flags.last_token.type===g.RESERVED||this._flags.last_token.type===g.WORD||this._flags.last_token.text==="*"&&(N(this._last_last_text,["function","yield"])||this._flags.mode===d.ObjectLiteral&&N(this._last_last_text,["{",","]))?X="SPACE":this._flags.last_token.type===g.START_BLOCK?this._flags.inline_frame?X="SPACE":X="NEWLINE":this._flags.last_token.type===g.END_EXPR&&(this._output.space_before_token=!0,X="NEWLINE"),k(C,f)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?X="SPACE":X="NEWLINE"),k(C,["else","catch","finally"]))if((!(this._flags.last_token.type===g.END_BLOCK&&this._previous_flags.mode===d.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&C.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var re=this._output.current_line;re.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else X==="NEWLINE"?k(this._flags.last_token,B)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&k(C,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==g.END_EXPR?(this._flags.last_token.type!==g.START_EXPR||!k(C,["var","let","const"]))&&this._flags.last_token.text!==":"&&(R(C,"if")&&R(C.previous,"else")?this._output.space_before_token=!0:this.print_newline()):k(C,f)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&L(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():X==="SPACE"&&(this._output.space_before_token=!0);C.previous&&(C.previous.type===g.WORD||C.previous.type===g.RESERVED)&&(this._output.space_before_token=!0),this.print_token(C),this._flags.last_word=C.text,C.type===g.RESERVED&&(C.text==="do"?this._flags.do_block=!0:C.text==="if"?this._flags.if_block=!0:C.text==="import"?this._flags.import_block=!0:this._flags.import_block&&R(C,"from")&&(this._flags.import_block=!1))},D.prototype.handle_semicolon=function(C){this.start_of_statement(C)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(C);for(var K=this._tokens.peek();this._flags.mode===d.Statement&&!(this._flags.if_block&&R(K,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(C)},D.prototype.handle_string=function(C){C.text.startsWith("`")&&C.newlines===0&&C.whitespace_before===""&&(C.previous.text===")"||this._flags.last_token.type===g.WORD)||(this.start_of_statement(C)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(C),this._flags.last_token.type===g.RESERVED||this._flags.last_token.type===g.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===g.COMMA||this._flags.last_token.type===g.START_EXPR||this._flags.last_token.type===g.EQUALS||this._flags.last_token.type===g.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(C):C.text.startsWith("`")&&this._flags.last_token.type===g.END_EXPR&&(C.previous.text==="]"||C.previous.text===")")&&C.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(C)},D.prototype.handle_equals=function(C){this.start_of_statement(C)||this.handle_whitespace_and_comments(C),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(C),this._output.space_before_token=!0},D.prototype.handle_comma=function(C){this.handle_whitespace_and_comments(C,!0),this.print_token(C),this._output.space_before_token=!0,this._flags.declaration_statement?(G(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(C)):this._flags.mode===d.ObjectLiteral||this._flags.mode===d.Statement&&this._flags.parent.mode===d.ObjectLiteral?(this._flags.mode===d.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(C)},D.prototype.handle_operator=function(C){var K=C.text==="*"&&(k(this._flags.last_token,["function","yield"])||N(this._flags.last_token.type,[g.START_BLOCK,g.COMMA,g.END_BLOCK,g.SEMICOLON])),X=N(C.text,["-","+"])&&(N(this._flags.last_token.type,[g.START_BLOCK,g.START_EXPR,g.EQUALS,g.OPERATOR])||N(this._flags.last_token.text,f)||this._flags.last_token.text===",");if(!this.start_of_statement(C)){var re=!K;this.handle_whitespace_and_comments(C,re)}if(C.text==="*"&&this._flags.last_token.type===g.DOT){this.print_token(C);return}if(C.text==="::"){this.print_token(C);return}if(N(C.text,["-","+"])&&this.start_of_object_property()){this.print_token(C);return}if(this._flags.last_token.type===g.OPERATOR&&N(this._options.operator_position,m)&&this.allow_wrap_or_preserved_newline(C),C.text===":"&&this._flags.in_case){this.print_token(C),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==g.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var se=!0,Pe=!0,Te=!1;if(C.text===":"?this._flags.ternary_depth===0?se=!1:(this._flags.ternary_depth-=1,Te=!0):C.text==="?"&&(this._flags.ternary_depth+=1),!X&&!K&&this._options.preserve_newlines&&N(C.text,E)){var Ae=C.text===":",we=Ae&&Te,ve=Ae&&!Te;switch(this._options.operator_position){case z.before_newline:this._output.space_before_token=!ve,this.print_token(C),(!Ae||we)&&this.allow_wrap_or_preserved_newline(C),this._output.space_before_token=!0;return;case z.after_newline:this._output.space_before_token=!0,!Ae||we?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(C):this._output.space_before_token=!1,this.print_token(C),this._output.space_before_token=!0;return;case z.preserve_newline:ve||this.allow_wrap_or_preserved_newline(C),se=!(this._output.just_added_newline()||ve),this._output.space_before_token=se,this.print_token(C),this._output.space_before_token=!0;return}}if(K){this.allow_wrap_or_preserved_newline(C),se=!1;var be=this._tokens.peek();Pe=be&&N(be.type,[g.WORD,g.RESERVED])}else if(C.text==="...")this.allow_wrap_or_preserved_newline(C),se=this._flags.last_token.type===g.START_BLOCK,Pe=!1;else if(N(C.text,["--","++","!","~"])||X){if((this._flags.last_token.type===g.COMMA||this._flags.last_token.type===g.START_EXPR)&&this.allow_wrap_or_preserved_newline(C),se=!1,Pe=!1,C.newlines&&(C.text==="--"||C.text==="++"||C.text==="~")){var Xe=k(this._flags.last_token,B)&&C.newlines;Xe&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(Xe,!0)}this._flags.last_token.text===";"&&G(this._flags.mode)&&(se=!0),this._flags.last_token.type===g.RESERVED?se=!0:this._flags.last_token.type===g.END_EXPR?se=!(this._flags.last_token.text==="]"&&(C.text==="--"||C.text==="++")):this._flags.last_token.type===g.OPERATOR&&(se=N(C.text,["--","-","++","+"])&&N(this._flags.last_token.text,["--","-","++","+"]),N(C.text,["+","-"])&&N(this._flags.last_token.text,["--","++"])&&(Pe=!0)),(this._flags.mode===d.BlockStatement&&!this._flags.inline_frame||this._flags.mode===d.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||se,this.print_token(C),this._output.space_before_token=Pe},D.prototype.handle_block_comment=function(C,K){if(this._output.raw){this._output.add_raw_token(C),C.directives&&C.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(C.directives){this.print_newline(!1,K),this.print_token(C),C.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!o.newline.test(C.text)&&!C.newlines){this._output.space_before_token=!0,this.print_token(C),this._output.space_before_token=!0;return}else this.print_block_commment(C,K)},D.prototype.print_block_commment=function(C,K){var X=F(C.text),re,se=!1,Pe=!1,Te=C.whitespace_before,Ae=Te.length;if(this.print_newline(!1,K),this.print_token_line_indentation(C),this._output.add_token(X[0]),this.print_newline(!1,K),X.length>1){for(X=X.slice(1),se=p(X,"*"),Pe=I(X,Te),se&&(this._flags.alignment=1),re=0;re<X.length;re++)se?(this.print_token_line_indentation(C),this._output.add_token(x(X[re]))):Pe&&X[re]?(this.print_token_line_indentation(C),this._output.add_token(X[re].substring(Ae))):(this._output.current_line.set_indent(-1),this._output.add_token(X[re])),this.print_newline(!1,K);this._flags.alignment=0}},D.prototype.handle_comment=function(C,K){C.newlines?this.print_newline(!1,K):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(C),this.print_newline(!1,K)},D.prototype.handle_dot=function(C){this.start_of_statement(C)||this.handle_whitespace_and_comments(C,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),k(this._flags.last_token,B)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(C,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(C)},D.prototype.handle_unknown=function(C,K){this.print_token(C),C.text[C.text.length-1]===`
`&&this.print_newline(!1,K)},D.prototype.handle_eof=function(C){for(;this._flags.mode===d.Statement;)this.restore_mode();this.handle_whitespace_and_comments(C)},beautifier$2.Beautifier=D,beautifier$2}var hasRequiredJavascript;function requireJavascript(){if(hasRequiredJavascript)return javascript.exports;hasRequiredJavascript=1;var i=requireBeautifier$2().Beautifier,n=requireOptions$2().Options;function o(s,l){var f=new i(s,l);return f.beautify()}return javascript.exports=o,javascript.exports.defaultOptions=function(){return new n},javascript.exports}var css={exports:{}},beautifier$1={},options$1={},hasRequiredOptions$1;function requireOptions$1(){if(hasRequiredOptions$1)return options$1;hasRequiredOptions$1=1;var i=requireOptions$3().Options;function n(o){i.call(this,o,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var s=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||s;var l=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var f=0;f<l.length;f++)l[f]!=="expand"?this.brace_style="collapse":this.brace_style=l[f]}return n.prototype=new i,options$1.Options=n,options$1}var hasRequiredBeautifier$1;function requireBeautifier$1(){if(hasRequiredBeautifier$1)return beautifier$1;hasRequiredBeautifier$1=1;var i=requireOptions$1().Options,n=requireOutput().Output,o=requireInputscanner().InputScanner,s=requireDirectives().Directives,l=new s(/\/\*/,/\*\//),f=/\r\n|[\r\n]/,E=/\r\n|[\r\n]/g,g=/\s/,N=/(?:\s|\n)+/g,x=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,w=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function R(k,B){this._source_text=k||"",this._options=new i(B),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}return R.prototype.eatString=function(k){var B="";for(this._ch=this._input.next();this._ch;){if(B+=this._ch,this._ch==="\\")B+=this._input.next();else if(k.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return B},R.prototype.eatWhitespace=function(k){for(var B=g.test(this._input.peek()),P=0;g.test(this._input.peek());)this._ch=this._input.next(),k&&this._ch===`
`&&(P===0||P<this._options.max_preserve_newlines)&&(P++,this._output.add_new_line(!0));return B},R.prototype.foundNestedPseudoClass=function(){for(var k=0,B=1,P=this._input.peek(B);P;){if(P==="{")return!0;if(P==="(")k+=1;else if(P===")"){if(k===0)return!1;k-=1}else if(P===";"||P==="}")return!1;B++,P=this._input.peek(B)}return!1},R.prototype.print_string=function(k){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(k)},R.prototype.preserveSingleSpace=function(k){k&&(this._output.space_before_token=!0)},R.prototype.indent=function(){this._indentLevel++},R.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},R.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var k=this._source_text,B=this._options.eol;B==="auto"&&(B=`
`,k&&f.test(k||"")&&(B=k.match(f)[0])),k=k.replace(E,`
`);var P=k.match(/^[\t ]*/)[0];this._output=new n(this._options,P),this._input=new o(k),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var z=0,m=!1,d=!1,y=!1,F=!1,L=!1,G=this._ch,p=!1,I,D,V;I=this._input.read(N),D=I!=="",V=G,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),G=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var C=this._input.read(x),K=l.get_directives(C);K&&K.ignore==="start"&&(C+=l.readIgnored(this._input)),this.print_string(C),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(w)),this.eatWhitespace(!0);else if(this._ch==="$"){this.preserveSingleSpace(D),this.print_string(this._ch);var X=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);X.match(/[ :]$/)&&(X=this.eatString(": ").replace(/\s+$/,""),this.print_string(X),this._output.space_before_token=!0),z===0&&X.indexOf(":")!==-1&&(d=!0,this.indent())}else if(this._ch==="@")if(this.preserveSingleSpace(D),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var re=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);re.match(/[ :]$/)&&(re=this.eatString(": ").replace(/\s+$/,""),this.print_string(re),this._output.space_before_token=!0),z===0&&re.indexOf(":")!==-1?(d=!0,this.indent()):re in this.NESTED_AT_RULE?(this._nestedLevel+=1,re in this.CONDITIONAL_GROUP_RULE&&(y=!0)):z===0&&!d&&(F=!0)}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(D),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")d&&(d=!1,this.outdent()),F=!1,y?(y=!1,m=this._indentLevel>=this._nestedLevel):m=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&m&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(V==="("?this._output.space_before_token=!1:V!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),V==="{"&&this._output.trim(!0),d&&(this.outdent(),d=!1),this.print_string(this._ch),m=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var se=0;se<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;se++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[se])){p=!0;break}(m||y)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!F&&z===0?(this.print_string(":"),d||(d=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var Pe=V==='"'||V==="'";this.preserveSingleSpace(Pe||D),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")p=!1,z===0?(d&&(this.outdent(),d=!1),F=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),z++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),z&&(z--,this.outdent()));else{var Te=!1;this._input.lookBack("with")&&(Te=!0),this.preserveSingleSpace(D||Te),this.print_string(this._ch),d&&V==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),L=!0):(this.eatWhitespace(),z++,this.indent())}else if(this._ch===")")z&&(z--,this.outdent()),L&&this._input.peek()===";"&&this._options.selector_separator_newline&&(L=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!d||L)&&z===0&&!F?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!d&&z===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&g.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(D),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),g.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var Ae=V==='"'||V==="'";this.preserveSingleSpace(Ae||D),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&p&&this._output.add_new_line()}var we=this._output.get_code(B);return we},beautifier$1.Beautifier=R,beautifier$1}var hasRequiredCss;function requireCss(){if(hasRequiredCss)return css.exports;hasRequiredCss=1;var i=requireBeautifier$1().Beautifier,n=requireOptions$1().Options;function o(s,l){var f=new i(s,l);return f.beautify()}return css.exports=o,css.exports.defaultOptions=function(){return new n},css.exports}var html={exports:{}},beautifier={},options={},hasRequiredOptions;function requireOptions(){if(hasRequiredOptions)return options;hasRequiredOptions=1;var i=requireOptions$3().Options;function n(o){i.call(this,o,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}return n.prototype=new i,options.Options=n,options}var tokenizer={},hasRequiredTokenizer;function requireTokenizer(){if(hasRequiredTokenizer)return tokenizer;hasRequiredTokenizer=1;var i=requireTokenizer$2().Tokenizer,n=requireTokenizer$2().TOKEN,o=requireDirectives().Directives,s=requireTemplatablepattern().TemplatablePattern,l=requirePattern().Pattern,f={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",CONTROL_FLOW_OPEN:"TK_CONTROL_FLOW_OPEN",CONTROL_FLOW_CLOSE:"TK_CONTROL_FLOW_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:n.START,RAW:n.RAW,EOF:n.EOF},E=new o(/<\!--/,/-->/),g=function(N,x){i.call(this,N,x),this._current_tag_name="";var w=new s(this._input).read_options(this._options),R=new l(this._input);if(this.__patterns={word:w.until(/[\n\r\t <]/),word_control_flow_close_excluded:w.until(/[\n\r\t <}]/),single_quote:w.until_after(/'/),double_quote:w.until_after(/"/),attribute:w.until(/[\n\r\t =>]|\/>/),element_name:w.until(/[\n\r\t >\/]/),angular_control_flow_start:R.matching(/\@[a-zA-Z]+[^({]*[({]/),handlebars_comment:R.starting_with(/{{!--/).until_after(/--}}/),handlebars:R.starting_with(/{{/).until_after(/}}/),handlebars_open:R.until(/[\n\r\t }]/),handlebars_raw_close:R.until(/}}/),comment:R.starting_with(/<!--/).until_after(/-->/),cdata:R.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:R.starting_with(/<!\[/).until_after(/]>/),processing:R.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"),this.__patterns.word_control_flow_close_excluded=this.__patterns.word_control_flow_close_excluded.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var k=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=R.matching(k).until_after(k)}};return g.prototype=new i,g.prototype._is_comment=function(N){return!1},g.prototype._is_opening=function(N){return N.type===f.TAG_OPEN||N.type===f.CONTROL_FLOW_OPEN},g.prototype._is_closing=function(N,x){return N.type===f.TAG_CLOSE&&x&&((N.text===">"||N.text==="/>")&&x.text[0]==="<"||N.text==="}}"&&x.text[0]==="{"&&x.text[1]==="{")||N.type===f.CONTROL_FLOW_CLOSE&&N.text==="}"&&x.text.endsWith("{")},g.prototype._reset=function(){this._current_tag_name=""},g.prototype._get_next_token=function(N,x){var w=null;this._readWhitespace();var R=this._input.peek();return R===null?this._create_token(f.EOF,""):(w=w||this._read_open_handlebars(R,x),w=w||this._read_attribute(R,N,x),w=w||this._read_close(R,x),w=w||this._read_script_and_style(R,N),w=w||this._read_control_flows(R,x),w=w||this._read_raw_content(R,N,x),w=w||this._read_content_word(R,x),w=w||this._read_comment_or_cdata(R),w=w||this._read_processing(R),w=w||this._read_open(R,x),w=w||this._create_token(f.UNKNOWN,this._input.next()),w)},g.prototype._read_comment_or_cdata=function(N){var x=null,w=null,R=null;if(N==="<"){var k=this._input.peek(1);k==="!"&&(w=this.__patterns.comment.read(),w?(R=E.get_directives(w),R&&R.ignore==="start"&&(w+=E.readIgnored(this._input))):w=this.__patterns.cdata.read()),w&&(x=this._create_token(f.COMMENT,w),x.directives=R)}return x},g.prototype._read_processing=function(N){var x=null,w=null,R=null;if(N==="<"){var k=this._input.peek(1);(k==="!"||k==="?")&&(w=this.__patterns.conditional_comment.read(),w=w||this.__patterns.processing.read()),w&&(x=this._create_token(f.COMMENT,w),x.directives=R)}return x},g.prototype._read_open=function(N,x){var w=null,R=null;return(!x||x.type===f.CONTROL_FLOW_OPEN)&&N==="<"&&(w=this._input.next(),this._input.peek()==="/"&&(w+=this._input.next()),w+=this.__patterns.element_name.read(),R=this._create_token(f.TAG_OPEN,w)),R},g.prototype._read_open_handlebars=function(N,x){var w=null,R=null;return(!x||x.type===f.CONTROL_FLOW_OPEN)&&(this._options.templating.includes("angular")||this._options.indent_handlebars)&&N==="{"&&this._input.peek(1)==="{"&&(this._options.indent_handlebars&&this._input.peek(2)==="!"?(w=this.__patterns.handlebars_comment.read(),w=w||this.__patterns.handlebars.read(),R=this._create_token(f.COMMENT,w)):(w=this.__patterns.handlebars_open.read(),R=this._create_token(f.TAG_OPEN,w))),R},g.prototype._read_control_flows=function(N,x){var w="",R=null;if(!this._options.templating.includes("angular"))return R;if(N==="@"){if(w=this.__patterns.angular_control_flow_start.read(),w==="")return R;for(var k=w.endsWith("(")?1:0,B=0;!(w.endsWith("{")&&k===B);){var P=this._input.next();if(P===null)break;P==="("?k++:P===")"&&B++,w+=P}R=this._create_token(f.CONTROL_FLOW_OPEN,w)}else N==="}"&&x&&x.type===f.CONTROL_FLOW_OPEN&&(w=this._input.next(),R=this._create_token(f.CONTROL_FLOW_CLOSE,w));return R},g.prototype._read_close=function(N,x){var w=null,R=null;return x&&x.type===f.TAG_OPEN&&(x.text[0]==="<"&&(N===">"||N==="/"&&this._input.peek(1)===">")?(w=this._input.next(),N==="/"&&(w+=this._input.next()),R=this._create_token(f.TAG_CLOSE,w)):x.text[0]==="{"&&N==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),R=this._create_token(f.TAG_CLOSE,"}}"))),R},g.prototype._read_attribute=function(N,x,w){var R=null,k="";if(w&&w.text[0]==="<")if(N==="=")R=this._create_token(f.EQUALS,this._input.next());else if(N==='"'||N==="'"){var B=this._input.next();N==='"'?B+=this.__patterns.double_quote.read():B+=this.__patterns.single_quote.read(),R=this._create_token(f.VALUE,B)}else k=this.__patterns.attribute.read(),k&&(x.type===f.EQUALS?R=this._create_token(f.VALUE,k):R=this._create_token(f.ATTRIBUTE,k));return R},g.prototype._is_content_unformatted=function(N){return this._options.void_elements.indexOf(N)===-1&&(this._options.content_unformatted.indexOf(N)!==-1||this._options.unformatted.indexOf(N)!==-1)},g.prototype._read_raw_content=function(N,x,w){var R="";if(w&&w.text[0]==="{")R=this.__patterns.handlebars_raw_close.read();else if(x.type===f.TAG_CLOSE&&x.opened.text[0]==="<"&&x.text[0]!=="/"){var k=x.opened.text.substr(1).toLowerCase();this._is_content_unformatted(k)&&(R=this._input.readUntil(new RegExp("</"+k+"[\\n\\r\\t ]*?>","ig")))}return R?this._create_token(f.TEXT,R):null},g.prototype._read_script_and_style=function(N,x){if(x.type===f.TAG_CLOSE&&x.opened.text[0]==="<"&&x.text[0]!=="/"){var w=x.opened.text.substr(1).toLowerCase();if(w==="script"||w==="style"){var R=this._read_comment_or_cdata(N);if(R)return R.type=f.TEXT,R;var k=this._input.readUntil(new RegExp("</"+w+"[\\n\\r\\t ]*?>","ig"));if(k)return this._create_token(f.TEXT,k)}}return null},g.prototype._read_content_word=function(N,x){var w="";return this._options.unformatted_content_delimiter&&N===this._options.unformatted_content_delimiter[0]&&(w=this.__patterns.unformatted_content_delimiter.read()),w||(w=x&&x.type===f.CONTROL_FLOW_OPEN?this.__patterns.word_control_flow_close_excluded.read():this.__patterns.word.read()),w?this._create_token(f.TEXT,w):null},tokenizer.Tokenizer=g,tokenizer.TOKEN=f,tokenizer}var hasRequiredBeautifier;function requireBeautifier(){if(hasRequiredBeautifier)return beautifier;hasRequiredBeautifier=1;var i=requireOptions().Options,n=requireOutput().Output,o=requireTokenizer().Tokenizer,s=requireTokenizer().TOKEN,l=/\r\n|[\r\n]/,f=/\r\n|[\r\n]/g,E=function(m,d){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=m.max_preserve_newlines,this.preserve_newlines=m.preserve_newlines,this._output=new n(m,d)};E.prototype.current_line_has_match=function(m){return this._output.current_line.has_match(m)},E.prototype.set_space_before_token=function(m,d){this._output.space_before_token=m,this._output.non_breaking_space=d},E.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},E.prototype.add_raw_token=function(m){this._output.add_raw_token(m)},E.prototype.print_preserved_newlines=function(m){var d=0;m.type!==s.TEXT&&m.previous.type!==s.TEXT&&(d=m.newlines?1:0),this.preserve_newlines&&(d=m.newlines<this.max_preserve_newlines+1?m.newlines:this.max_preserve_newlines+1);for(var y=0;y<d;y++)this.print_newline(y>0);return d!==0},E.prototype.traverse_whitespace=function(m){return m.whitespace_before||m.newlines?(this.print_preserved_newlines(m)||(this._output.space_before_token=!0),!0):!1},E.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},E.prototype.print_newline=function(m){this._output.add_new_line(m)},E.prototype.print_token=function(m){m.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(m.text))},E.prototype.indent=function(){this.indent_level++},E.prototype.deindent=function(){this.indent_level>0&&(this.indent_level--,this._output.set_indent(this.indent_level,this.alignment_size))},E.prototype.get_full_indent=function(m){return m=this.indent_level+(m||0),m<1?"":this._output.get_indent_string(m)};var g=function(m){for(var d=null,y=m.next;y.type!==s.EOF&&m.closed!==y;){if(y.type===s.ATTRIBUTE&&y.text==="type"){y.next&&y.next.type===s.EQUALS&&y.next.next&&y.next.next.type===s.VALUE&&(d=y.next.next.text);break}y=y.next}return d},N=function(m,d){var y=null,F=null;return d.closed?(m==="script"?y="text/javascript":m==="style"&&(y="text/css"),y=g(d)||y,y.search("text/css")>-1?F="css":y.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?F="javascript":y.search(/(text|application|dojo)\/(x-)?(html)/)>-1?F="html":y.search(/test\/null/)>-1&&(F="null"),F):null};function x(m,d){return d.indexOf(m)!==-1}function w(m,d,y){this.parent=m||null,this.tag=d?d.tag_name:"",this.indent_level=y||0,this.parser_token=d||null}function R(m){this._printer=m,this._current_frame=null}R.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},R.prototype.record_tag=function(m){var d=new w(this._current_frame,m,this._printer.indent_level);this._current_frame=d},R.prototype._try_pop_frame=function(m){var d=null;return m&&(d=m.parser_token,this._printer.indent_level=m.indent_level,this._current_frame=m.parent),d},R.prototype._get_frame=function(m,d){for(var y=this._current_frame;y&&m.indexOf(y.tag)===-1;){if(d&&d.indexOf(y.tag)!==-1){y=null;break}y=y.parent}return y},R.prototype.try_pop=function(m,d){var y=this._get_frame([m],d);return this._try_pop_frame(y)},R.prototype.indent_to_tag=function(m){var d=this._get_frame(m);d&&(this._printer.indent_level=d.indent_level)};function k(m,d,y,F){this._source_text=m||"",d=d||{},this._js_beautify=y,this._css_beautify=F,this._tag_stack=null;var L=new i(d,"html");this._options=L,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}k.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var m=this._source_text,d=this._options.eol;this._options.eol==="auto"&&(d=`
`,m&&l.test(m)&&(d=m.match(l)[0])),m=m.replace(f,`
`);var y=m.match(/^[\t ]*/)[0],F={text:"",type:""},L=new B(this._options),G=new E(this._options,y),p=new o(m,this._options).tokenize();this._tag_stack=new R(G);for(var I=null,D=p.next();D.type!==s.EOF;)D.type===s.TAG_OPEN||D.type===s.COMMENT?(I=this._handle_tag_open(G,D,L,F,p),L=I):D.type===s.ATTRIBUTE||D.type===s.EQUALS||D.type===s.VALUE||D.type===s.TEXT&&!L.tag_complete?I=this._handle_inside_tag(G,D,L,F):D.type===s.TAG_CLOSE?I=this._handle_tag_close(G,D,L):D.type===s.TEXT?I=this._handle_text(G,D,L):D.type===s.CONTROL_FLOW_OPEN?I=this._handle_control_flow_open(G,D):D.type===s.CONTROL_FLOW_CLOSE?I=this._handle_control_flow_close(G,D):G.add_raw_token(D),F=I,D=p.next();var V=G._output.get_code(d);return V},k.prototype._handle_control_flow_open=function(m,d){var y={text:d.text,type:d.type};return m.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),d.newlines?m.print_preserved_newlines(d):m.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),m.print_token(d),m.indent(),y},k.prototype._handle_control_flow_close=function(m,d){var y={text:d.text,type:d.type};return m.deindent(),d.newlines?m.print_preserved_newlines(d):m.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),m.print_token(d),y},k.prototype._handle_tag_close=function(m,d,y){var F={text:d.text,type:d.type};return m.alignment_size=0,y.tag_complete=!0,m.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),y.is_unformatted?m.add_raw_token(d):(y.tag_start_char==="<"&&(m.set_space_before_token(d.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&y.has_wrapped_attrs&&m.print_newline(!1)),m.print_token(d)),y.indent_content&&!(y.is_unformatted||y.is_content_unformatted)&&(m.indent(),y.indent_content=!1),!y.is_inline_element&&!(y.is_unformatted||y.is_content_unformatted)&&m.set_wrap_point(),F},k.prototype._handle_inside_tag=function(m,d,y,F){var L=y.has_wrapped_attrs,G={text:d.text,type:d.type};return m.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),y.is_unformatted?m.add_raw_token(d):y.tag_start_char==="{"&&d.type===s.TEXT?m.print_preserved_newlines(d)?(d.newlines=0,m.add_raw_token(d)):m.print_token(d):(d.type===s.ATTRIBUTE?m.set_space_before_token(!0):(d.type===s.EQUALS||d.type===s.VALUE&&d.previous.type===s.EQUALS)&&m.set_space_before_token(!1),d.type===s.ATTRIBUTE&&y.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(m.traverse_whitespace(d),L=L||d.newlines!==0),this._is_wrap_attributes_force&&y.attr_count>=this._options.wrap_attributes_min_attrs&&(F.type!==s.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(m.print_newline(!1),L=!0)),m.print_token(d),L=L||m.previous_token_wrapped(),y.has_wrapped_attrs=L),G},k.prototype._handle_text=function(m,d,y){var F={text:d.text,type:"TK_CONTENT"};return y.custom_beautifier_name?this._print_custom_beatifier_text(m,d,y):y.is_unformatted||y.is_content_unformatted?m.add_raw_token(d):(m.traverse_whitespace(d),m.print_token(d)),F},k.prototype._print_custom_beatifier_text=function(m,d,y){var F=this;if(d.text!==""){var L=d.text,G,p=1,I="",D="";y.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?G=this._js_beautify:y.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?G=this._css_beautify:y.custom_beautifier_name==="html"&&(G=function(se,Pe){var Te=new k(se,Pe,F._js_beautify,F._css_beautify);return Te.beautify()}),this._options.indent_scripts==="keep"?p=0:this._options.indent_scripts==="separate"&&(p=-m.indent_level);var V=m.get_full_indent(p);if(L=L.replace(/\n[ \t]*$/,""),y.custom_beautifier_name!=="html"&&L[0]==="<"&&L.match(/^(<!--|<!\[CDATA\[)/)){var C=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(L);if(!C){m.add_raw_token(d);return}I=V+C[1]+`
`,L=C[4],C[5]&&(D=V+C[5]),L=L.replace(/\n[ \t]*$/,""),(C[2]||C[3].indexOf(`
`)!==-1)&&(C=C[3].match(/[ \t]+$/),C&&(d.whitespace_before=C[0]))}if(L)if(G){var K=function(){this.eol=`
`};K.prototype=this._options.raw_options;var X=new K;L=G(V+L,X)}else{var re=d.whitespace_before;re&&(L=L.replace(new RegExp(`
(`+re+")?","g"),`
`)),L=V+L.replace(/\n/g,`
`+V)}I&&(L?L=I+L+`
`+D:L=I+D),m.print_newline(!1),L&&(d.text=L,d.whitespace_before="",d.newlines=0,m.add_raw_token(d),m.print_newline(!0))}},k.prototype._handle_tag_open=function(m,d,y,F,L){var G=this._get_tag_open_token(d);if((y.is_unformatted||y.is_content_unformatted)&&!y.is_empty_element&&d.type===s.TAG_OPEN&&!G.is_start_tag?(m.add_raw_token(d),G.start_tag_token=this._tag_stack.try_pop(G.tag_name)):(m.traverse_whitespace(d),this._set_tag_position(m,d,G,y,F),G.is_inline_element||m.set_wrap_point(),m.print_token(d)),G.is_start_tag&&this._is_wrap_attributes_force){var p=0,I;do I=L.peek(p),I.type===s.ATTRIBUTE&&(G.attr_count+=1),p+=1;while(I.type!==s.EOF&&I.type!==s.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(G.alignment_size=d.text.length+1),!G.tag_complete&&!G.is_unformatted&&(m.alignment_size=G.alignment_size),G};var B=function(m,d,y){if(this.parent=d||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!y)this.tag_complete=!0;else{var F;this.tag_start_char=y.text[0],this.text=y.text,this.tag_start_char==="<"?(F=y.text.match(/^<([^\s>]*)/),this.tag_check=F?F[1]:""):(F=y.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=F?F[1]:"",(y.text.startsWith("{{#>")||y.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&y.next!==null?this.tag_check=y.next.text.split(" ")[0]:this.tag_check=y.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),y.type===s.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||y.closed&&y.closed.text==="/>";var L=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(L=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(!m.indent_handlebars||this.text.length<3||/[^#\^]/.test(this.text.charAt(L)))}};k.prototype._get_tag_open_token=function(m){var d=new B(this._options,this._tag_stack.get_parser_token(),m);return d.alignment_size=this._options.wrap_attributes_indent_size,d.is_end_tag=d.is_end_tag||x(d.tag_check,this._options.void_elements),d.is_empty_element=d.tag_complete||d.is_start_tag&&d.is_end_tag,d.is_unformatted=!d.tag_complete&&x(d.tag_check,this._options.unformatted),d.is_content_unformatted=!d.is_empty_element&&x(d.tag_check,this._options.content_unformatted),d.is_inline_element=x(d.tag_name,this._options.inline)||this._options.inline_custom_elements&&d.tag_name.includes("-")||d.tag_start_char==="{",d},k.prototype._set_tag_position=function(m,d,y,F,L){if(y.is_empty_element||(y.is_end_tag?y.start_tag_token=this._tag_stack.try_pop(y.tag_name):(this._do_optional_end_element(y)&&(y.is_inline_element||m.print_newline(!1)),this._tag_stack.record_tag(y),(y.tag_name==="script"||y.tag_name==="style")&&!(y.is_unformatted||y.is_content_unformatted)&&(y.custom_beautifier_name=N(y.tag_check,d)))),x(y.tag_check,this._options.extra_liners)&&(m.print_newline(!1),m._output.just_added_blankline()||m.print_newline(!0)),y.is_empty_element){if(y.tag_start_char==="{"&&y.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),y.indent_content=!0;var G=m.current_line_has_match(/{{#if/);G||m.print_newline(!1)}y.tag_name==="!--"&&L.type===s.TAG_CLOSE&&F.is_end_tag&&y.text.indexOf(`
`)===-1||(y.is_inline_element||y.is_unformatted||m.print_newline(!1),this._calcluate_parent_multiline(m,y))}else if(y.is_end_tag){var p=!1;p=y.start_tag_token&&y.start_tag_token.multiline_content,p=p||!y.is_inline_element&&!(F.is_inline_element||F.is_unformatted)&&!(L.type===s.TAG_CLOSE&&y.start_tag_token===F)&&L.type!=="TK_CONTENT",(y.is_content_unformatted||y.is_unformatted)&&(p=!1),p&&m.print_newline(!1)}else y.indent_content=!y.custom_beautifier_name,y.tag_start_char==="<"&&(y.tag_name==="html"?y.indent_content=this._options.indent_inner_html:y.tag_name==="head"?y.indent_content=this._options.indent_head_inner_html:y.tag_name==="body"&&(y.indent_content=this._options.indent_body_inner_html)),!(y.is_inline_element||y.is_unformatted)&&(L.type!=="TK_CONTENT"||y.is_content_unformatted)&&m.print_newline(!1),this._calcluate_parent_multiline(m,y)},k.prototype._calcluate_parent_multiline=function(m,d){d.parent&&m._output.just_added_newline()&&!((d.is_inline_element||d.is_unformatted)&&d.parent.is_inline_element)&&(d.parent.multiline_content=!0)};var P=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],z=["a","audio","del","ins","map","noscript","video"];return k.prototype._do_optional_end_element=function(m){var d=null;if(!(m.is_empty_element||!m.is_start_tag||!m.parent)){if(m.tag_name==="body")d=d||this._tag_stack.try_pop("head");else if(m.tag_name==="li")d=d||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if(m.tag_name==="dd"||m.tag_name==="dt")d=d||this._tag_stack.try_pop("dt",["dl"]),d=d||this._tag_stack.try_pop("dd",["dl"]);else if(m.parent.tag_name==="p"&&P.indexOf(m.tag_name)!==-1){var y=m.parent.parent;(!y||z.indexOf(y.tag_name)===-1)&&(d=d||this._tag_stack.try_pop("p"))}else m.tag_name==="rp"||m.tag_name==="rt"?(d=d||this._tag_stack.try_pop("rt",["ruby","rtc"]),d=d||this._tag_stack.try_pop("rp",["ruby","rtc"])):m.tag_name==="optgroup"?d=d||this._tag_stack.try_pop("optgroup",["select"]):m.tag_name==="option"?d=d||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):m.tag_name==="colgroup"?d=d||this._tag_stack.try_pop("caption",["table"]):m.tag_name==="thead"?(d=d||this._tag_stack.try_pop("caption",["table"]),d=d||this._tag_stack.try_pop("colgroup",["table"])):m.tag_name==="tbody"||m.tag_name==="tfoot"?(d=d||this._tag_stack.try_pop("caption",["table"]),d=d||this._tag_stack.try_pop("colgroup",["table"]),d=d||this._tag_stack.try_pop("thead",["table"]),d=d||this._tag_stack.try_pop("tbody",["table"])):m.tag_name==="tr"?(d=d||this._tag_stack.try_pop("caption",["table"]),d=d||this._tag_stack.try_pop("colgroup",["table"]),d=d||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(m.tag_name==="th"||m.tag_name==="td")&&(d=d||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),d=d||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return m.parent=this._tag_stack.get_parser_token(),d}},beautifier.Beautifier=k,beautifier}var hasRequiredHtml;function requireHtml(){if(hasRequiredHtml)return html.exports;hasRequiredHtml=1;var i=requireBeautifier().Beautifier,n=requireOptions().Options;function o(s,l,f,E){var g=new i(s,l,f,E);return g.beautify()}return html.exports=o,html.exports.defaultOptions=function(){return new n},html.exports}var hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var i=requireJavascript(),n=requireCss(),o=requireHtml();function s(l,f,E,g){return E=E||i,g=g||n,o(l,f,E,g)}return s.defaultOptions=o.defaultOptions,src.js=i,src.css=n,src.html=s,src}var hasRequiredJs;function requireJs(){return hasRequiredJs||(hasRequiredJs=1,(function(i){function n(o,s,l){var f=function(E,g){return o.js_beautify(E,g)};return f.js=o.js_beautify,f.css=s.css_beautify,f.html=l.html_beautify,f.js_beautify=o.js_beautify,f.css_beautify=s.css_beautify,f.html_beautify=l.html_beautify,f}(function(o){var s=requireSrc();s.js_beautify=s.js,s.css_beautify=s.css,s.html_beautify=s.html,o.exports=n(s,s,s)})(i)})(js)),js.exports}var jsExports=requireJs();function run(toolbox,workspace,code,catid){eval(code)}const defaultimg=""+new URL("default.png",import.meta.url).href;async function ExtensionGallery(i){const n=$("#extensionGallery"),o=$.create("div").css({display:"flex","flex-wrap":"wrap","justify-content":"center",gap:"10px"});n.child(o);async function s(w,R){const k=`https://raw.githubusercontent.com/PenguinBuilder/ExtensionGallery/refs/heads/main/${w.name}/${R}`,B=await fetch(k);return B.ok?[!0,await B.text()]:[!1,null]}async function l(w,R){const k=`https://raw.githubusercontent.com/PenguinBuilder/ExtensionGallery/refs/heads/main/${w.name}/${R}`;return(await fetch(k)).ok?[!0,k]:[!1,null]}function f(w,R,k,B,P){return $.create("sl-card").child([$.create("img").props({slot:"image",src:w}),$.create("strong").text(R),$.create("br"),$.create("div").text(k).css({"overflow-y":"auto",display:"block",height:"3em"}),$.create("br"),$.create("small").text(`by: ${B}`),$.create("div").props({slot:"footer"}).child($.create("sl-button").props({variant:"primary"}).text("Load Extension").click(P))]).css({width:"300px"})}const E="https://api.github.com/repos/chickencuber/PenguinBuilder_ExtensionGallery/contents?cache="+Date.now(),g=["extensions.d.ts","tsconfig.json","README.md","example"],N=(await(await fetch(E)).json())?.filter?.(w=>!g.includes(w.name))||[{name:"from_file"},{name:"from_url"}];function x(w){const R=f(w.image??defaultimg,w.options.display_name,w.options.description,w.options.creator,async()=>{let k=w.index,B=w.name;if(w.options.loader){const[P,z]=await new Function("$",w.index)($);k=P,B=z}B="e_"+B,k=minify_sync(k).code,DATA.extensions[B]=k,i(k,B),n.elt.hide()});o.child(R)}for(const w of N){const R={};R.name=w.name;const[k,B]=await s(w,"options.json"),[P,z]=await s(w,"index.js"),[m,d]=await l(w,"image.png");if(!k||!P)continue;m&&(R.image=d);let y;R.options={};try{y=JSON.parse(B)}catch{continue}if(!("creator"in y)||!("potential-danger"in y)||!("display-name"in y)||!("description"in y))continue;R.options.creator=y.creator,R.options.potential_danger=y["potential-danger"],R.options.display_name=y["display-name"],R.options.description=y.description,R.options.WIP=y.WIP??!1,R.options.loader=y.loader??!1,R.index=z;const F=new URLSearchParams(location.search.toLowerCase());R.options.WIP&&!F.has("wip")||x(R)}return function(){n.elt.show()}}$("#ExtensionID").on("input",function(){this.value=this.value.toLowerCase().replaceAll(/[^a-z0-9]/g,"")});setLocale(En);registerContinuousToolbox();ContextMenuItems.registerCommentOptions();const workspace=inject("block-editor",{plugins:{toolbox:ContinuousToolbox,flyoutsVerticalToolbox:ContinuousFlyout,metricsManager:ContinuousMetrics},renderer:"zelos",toolbox,theme:Hats});workspace.registerToolboxCategoryCallback("PROCEDURE",function(i){const n=[{kind:"block",type:"inline_function_a",gap:8,enabled:!0},{kind:"block",type:"inline_function_b",gap:8,enabled:!0},{kind:"block",type:"inline_function_c",gap:8,enabled:!0},{kind:"block",type:"return_block_function",gap:8,enabled:!0}];return[...Procedures.flyoutCategory(i,!1),...n]});function notify(i,{variant:n="primary",icon:o="info-circle",duration:s=3e3,closable:l=!0,header:f=""}={}){const E=$.create("sl-alert").props({variant:n,duration:s,closable:l?"":null,countdown:"rtl"});E.child($.create("sl-icon").props({name:o})),E.child([$.create("strong").text(f).css({"margin-left":"10px"}),$.create("br")]),E.child($.from(document.createTextNode(i))),$.body().child(E),setTimeout(()=>E.elt.toast(),100)}FileHandle(()=>{const i={workspace:serialization.workspaces.save(workspace),extension_color:DATA.Extension_Color,force_unsandboxed:DATA.Force_Unsandboxed,extensions:DATA.extensions};return DATA.Extension_ID!==""&&(i.extension_id=DATA.Extension_ID),DATA.Extension_Name!==""&&(i.extension_name=DATA.Extension_Name),[i,DATA.Extension_ID_DEFAULT]},i=>{DATA.Force_Unsandboxed=i.force_unsandboxed,DATA.Extension_Color=i.extension_color,DATA.Extension_ID=i.extension_id||"",DATA.Extension_Name=i.extension_name||"";for(const o of Object.keys(DATA.extensions)){const s=toolbox.contents.findIndex(l=>l.id==o);toolbox.contents.splice(s)}workspace.updateToolbox(toolbox),workspace.refreshToolboxSelection(),DATA.extensions={},serialization.workspaces.load(i.workspace,workspace);const n=i.extensions??{};for(const[o,s]of Object.entries(n))DATA.extensions[o]=s,run(toolbox,workspace,s)});themeSelector(()=>workspace.setTheme(Hats),()=>workspace.setTheme(HatsDark));{const i=Names.prototype.getName;Names.prototype.getName=function(n,o){return DATA.Extension_ID_DEFAULT+"_"+i.call(this,n,o)}}function getCode(i=!1){DATA.end="",DATA.very_end="",DATA.menus=0;const n=`
    // Made with PenguinBuilder ${$("#version").text()}
    // use PenguinBuilder at "https://penguinbuilder.github.io"
    (async function(Scratch) {
        const blocks = [];
        const menus = {};

        ${DATA.Force_Unsandboxed?`if (!Scratch.extensions.unsandboxed) {
            throw new Error('${DATA.Extension_Name_DEFAULT} must run unsandboxed');
        }`:""}

        class Extension {
            getInfo() {
                return {
                    "id": "${DATA.Extension_ID_DEFAULT}",
                    "name": "${DATA.Extension_Name_DEFAULT}",
                    "color1": "${DATA.Extension_Color}",
                    "blocks": blocks,
                    "menus": menus,
                }
            }
        }
        
`+javascriptGenerator.workspaceToCode(workspace)+`

        ${DATA.end}
        ${DATA.very_end}
        Scratch.extensions.register(new Extension());
    })(Scratch);
    `;return i?minify_sync(n).code:jsExports.js_beautify(n,{indent_size:4,max_preserve_newlines:2})}$("#test").click(()=>{const i=getCode(!0);if(exists()){const n=encodeURI("data:application/javascript;base64,"+btoa(i));window.open("https://studio.penguinmod.com/editor.html?extension="+n)}});function exists(){return workspace.getTopBlocks(!1).filter(n=>n.isEnabled()).length===0?(notify("You can't export when the workspace is empty",{header:"Failed Export",variant:"danger",icon:"exclamation-octagon"}),!1):$("#ExtensionID").is(":invalid")?(notify("The ExtensionID is invalid",{header:"Failed Export",variant:"danger",icon:"exclamation-octagon"}),!1):!0}$("#export").click(async()=>{if(!exists())return;const n=await(await window.showSaveFilePicker({suggestedName:DATA.Extension_ID_DEFAULT+".js",types:[{description:"PenguinBuilder Save",accept:{"application/javascript":[".js"]}}]})).createWritable();await n.write(getCode()),await n.close()});workspace.setScale(.7);workspace.addChangeListener(Events.disableOrphans);const workspaceSearch=new distExports$4.WorkspaceSearch(workspace);workspaceSearch.init();const showDialog=await ExtensionGallery(run.bind(null,toolbox,workspace));workspace.registerButtonCallback("Load_Extension",()=>{showDialog()});

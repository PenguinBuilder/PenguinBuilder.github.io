import{$ as Kt,t as eC}from"./theme-selector.js";var RI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Dg={exports:{}},NI;function tC(){return NI||(NI=1,(function(i){var n=(function(){var o=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",p={};function E(R,M){if(!p[R]){p[R]={};for(var L=0;L<R.length;L++)p[R][R.charAt(L)]=L}return p[R][M]}var $={compressToBase64:function(R){if(R==null)return"";var M=$._compress(R,6,function(L){return s.charAt(L)});switch(M.length%4){default:case 0:return M;case 1:return M+"===";case 2:return M+"==";case 3:return M+"="}},decompressFromBase64:function(R){return R==null?"":R==""?null:$._decompress(R.length,32,function(M){return E(s,R.charAt(M))})},compressToUTF16:function(R){return R==null?"":$._compress(R,15,function(M){return o(M+32)})+" "},decompressFromUTF16:function(R){return R==null?"":R==""?null:$._decompress(R.length,16384,function(M){return R.charCodeAt(M)-32})},compressToUint8Array:function(R){for(var M=$.compress(R),L=new Uint8Array(M.length*2),y=0,N=M.length;y<N;y++){var P=M.charCodeAt(y);L[y*2]=P>>>8,L[y*2+1]=P%256}return L},decompressFromUint8Array:function(R){if(R==null)return $.decompress(R);for(var M=new Array(R.length/2),L=0,y=M.length;L<y;L++)M[L]=R[L*2]*256+R[L*2+1];var N=[];return M.forEach(function(P){N.push(o(P))}),$.decompress(N.join(""))},compressToEncodedURIComponent:function(R){return R==null?"":$._compress(R,6,function(M){return l.charAt(M)})},decompressFromEncodedURIComponent:function(R){return R==null?"":R==""?null:(R=R.replace(/ /g,"+"),$._decompress(R.length,32,function(M){return E(l,R.charAt(M))}))},compress:function(R){return $._compress(R,16,function(M){return o(M)})},_compress:function(R,M,L){if(R==null)return"";var y,N,P={},F={},K="",g="",d="",C=2,x=3,k=2,H=[],f=0,I=0,D;for(D=0;D<R.length;D+=1)if(K=R.charAt(D),Object.prototype.hasOwnProperty.call(P,K)||(P[K]=x++,F[K]=!0),g=d+K,Object.prototype.hasOwnProperty.call(P,g))d=g;else{if(Object.prototype.hasOwnProperty.call(F,d)){if(d.charCodeAt(0)<256){for(y=0;y<k;y++)f=f<<1,I==M-1?(I=0,H.push(L(f)),f=0):I++;for(N=d.charCodeAt(0),y=0;y<8;y++)f=f<<1|N&1,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=N>>1}else{for(N=1,y=0;y<k;y++)f=f<<1|N,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=0;for(N=d.charCodeAt(0),y=0;y<16;y++)f=f<<1|N&1,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=N>>1}C--,C==0&&(C=Math.pow(2,k),k++),delete F[d]}else for(N=P[d],y=0;y<k;y++)f=f<<1|N&1,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=N>>1;C--,C==0&&(C=Math.pow(2,k),k++),P[g]=x++,d=String(K)}if(d!==""){if(Object.prototype.hasOwnProperty.call(F,d)){if(d.charCodeAt(0)<256){for(y=0;y<k;y++)f=f<<1,I==M-1?(I=0,H.push(L(f)),f=0):I++;for(N=d.charCodeAt(0),y=0;y<8;y++)f=f<<1|N&1,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=N>>1}else{for(N=1,y=0;y<k;y++)f=f<<1|N,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=0;for(N=d.charCodeAt(0),y=0;y<16;y++)f=f<<1|N&1,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=N>>1}C--,C==0&&(C=Math.pow(2,k),k++),delete F[d]}else for(N=P[d],y=0;y<k;y++)f=f<<1|N&1,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=N>>1;C--,C==0&&(C=Math.pow(2,k),k++)}for(N=2,y=0;y<k;y++)f=f<<1|N&1,I==M-1?(I=0,H.push(L(f)),f=0):I++,N=N>>1;for(;;)if(f=f<<1,I==M-1){H.push(L(f));break}else I++;return H.join("")},decompress:function(R){return R==null?"":R==""?null:$._decompress(R.length,32768,function(M){return R.charCodeAt(M)})},_decompress:function(R,M,L){var y=[],N=4,P=4,F=3,K="",g=[],d,C,x,k,H,f,I,D={val:L(0),position:M,index:1};for(d=0;d<3;d+=1)y[d]=d;for(x=0,H=Math.pow(2,2),f=1;f!=H;)k=D.val&D.position,D.position>>=1,D.position==0&&(D.position=M,D.val=L(D.index++)),x|=(k>0?1:0)*f,f<<=1;switch(x){case 0:for(x=0,H=Math.pow(2,8),f=1;f!=H;)k=D.val&D.position,D.position>>=1,D.position==0&&(D.position=M,D.val=L(D.index++)),x|=(k>0?1:0)*f,f<<=1;I=o(x);break;case 1:for(x=0,H=Math.pow(2,16),f=1;f!=H;)k=D.val&D.position,D.position>>=1,D.position==0&&(D.position=M,D.val=L(D.index++)),x|=(k>0?1:0)*f,f<<=1;I=o(x);break;case 2:return""}for(y[3]=I,C=I,g.push(I);;){if(D.index>R)return"";for(x=0,H=Math.pow(2,F),f=1;f!=H;)k=D.val&D.position,D.position>>=1,D.position==0&&(D.position=M,D.val=L(D.index++)),x|=(k>0?1:0)*f,f<<=1;switch(I=x){case 0:for(x=0,H=Math.pow(2,8),f=1;f!=H;)k=D.val&D.position,D.position>>=1,D.position==0&&(D.position=M,D.val=L(D.index++)),x|=(k>0?1:0)*f,f<<=1;y[P++]=o(x),I=P-1,N--;break;case 1:for(x=0,H=Math.pow(2,16),f=1;f!=H;)k=D.val&D.position,D.position>>=1,D.position==0&&(D.position=M,D.val=L(D.index++)),x|=(k>0?1:0)*f,f<<=1;y[P++]=o(x),I=P-1,N--;break;case 2:return g.join("")}if(N==0&&(N=Math.pow(2,F),F++),y[I])K=y[I];else if(I===P)K=C+C.charAt(0);else return null;g.push(K),y[P++]=C+K.charAt(0),N--,C=K,N==0&&(N=Math.pow(2,F),F++)}}};return $})();i!=null?i.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(Dg)),Dg.exports}var DI=tC();function iC(i,n){function o($){return DI.compressToUTF16(JSON.stringify($))}function s($){return JSON.parse(DI.decompressFromUTF16($))}async function l(){const[$,R]=i(),M=await window.showSaveFilePicker({suggestedName:R+".pb",types:[{description:"PenguinBuilder Save",accept:{"application/octet-stream":[".pb"]}}]});p=M;const L=await M.createWritable();await L.write(o($)),await L.close()}let p;async function E(){if(p===void 0){await l();return}const $=await p.createWritable();await $.write(o(i()[0])),await $.close()}Kt("#save-as").click(l),Kt("#save").click(E),Kt("html").on("keydown",async $=>{($.ctrlKey||$.metaKey)&&$.key=="s"&&(await E(),$.preventDefault())}),Kt("#open").click(async()=>{const[$]=await window.showOpenFilePicker({multiple:!1,types:[{description:"PenguinBuilder Save",accept:{"application/octet-stream":[".pb"]}}]});p=$;const M=await(await $.getFile()).text(),L=s(M);n(L)})}function El(i){return i.split("")}function nm(i,n){return n.includes(i)}class nC extends Error{constructor(n,o){super(),this.name="DefaultsError",this.message=n,this.defs=o}}function po(i,n,o){i===!0?i={}:i!=null&&typeof i=="object"&&(i={...i});const s=i||{};if(o){for(const l in s)if(Rn(s,l)&&!Rn(n,l))throw new nC("`"+l+"` is not a supported option",n)}for(const l in n)if(Rn(n,l))if(!i||!Rn(i,l))s[l]=n[l];else if(l==="ecma"){let p=i[l]|0;p>5&&p<2015&&(p+=2009),s[l]=p}else s[l]=i&&Rn(i,l)?i[l]:n[l];return s}function Yn(){}function xt(){return!1}function on(){return!0}function da(){return this}function ms(){return null}var ti=(function(){function i(o,s,l=!0){const p=[];for(let E=0;E<o.length;++E){let R=o[E].transform(s,l);R instanceof He?p.push(R):R instanceof n&&p.push(...R.v)}return p}i.splice=function(o){return new n(o)},i.skip={};function n(o){this.v=o}return i})();function j(i,n,o){return o||(o={}),n&&(o.start||(o.start=n.start),o.end||(o.end=n.end)),new i(o)}function Ai(i){return j(ut,i,{operator:"void",expression:j(Tt,i,{value:0})})}function Qs(i,n){i.includes(n)||i.push(n)}function dh(i,n){return i.replace(/{(.+?)}/g,function(o,s){return n&&n[s]})}function al(i,n){for(var o=i.length;--o>=0;)i[o]===n&&i.splice(o,1)}function kI(i,n){if(i.length<2)return i.slice();function o(l,p){for(var E=[],$=0,R=0,M=0;$<l.length&&R<p.length;)n(l[$],p[R])<=0?E[M++]=l[$++]:E[M++]=p[R++];return $<l.length&&E.push.apply(E,l.slice($)),R<p.length&&E.push.apply(E,p.slice(R)),E}function s(l){if(l.length<=1)return l;var p=Math.floor(l.length/2),E=l.slice(0,p),$=l.slice(p);return E=s(E),$=s($),o(E,$)}return s(i)}function Vt(i){return Array.isArray(i)||(i=i.split(" ")),new Set(i.sort())}function Md(i,n,o){i.has(n)?i.get(n).push(o):i.set(n,[o])}function rC(i){var n=new Map;for(var o in i)Rn(i,o)&&o.charAt(0)==="$"&&n.set(o.substr(1),i[o]);return n}function oC(i){var n=Object.create(null);return i.forEach(function(o,s){n["$"+s]=o}),n}function Rn(i,n){return Object.prototype.hasOwnProperty.call(i,n)}function ll(i,n){return i===!0||i instanceof RegExp&&i.test(n)}var sC={"\0":"0","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Oh(i){return i.replace(/[\0\n\r\u2028\u2029]/g,function(n,o){var s=i[o-1]=="\\"&&(i[o-2]!="\\"||/(?:^|[^\\])(?:\\{2})*$/.test(i.slice(0,o-1)));return(s?"":"\\")+sC[n]})}const aC=/^[\\/|\0\s\w^$.[\]()]*$/,jv=i=>aC.test(i),lC="dgimsuyv";function uC(i){const n=new Set(i.split(""));let o="";for(const s of lC)n.has(s)&&(o+=s,n.delete(s));return n.size&&n.forEach(s=>{o+=s}),o}function Nn(i,n){return i._annotations&n}function Eu(i,n){i._annotations|=n}function LI(i,n){i._annotations&=-9}var Cu="",yu=new Map,hh="break case catch class const continue debugger default delete do else export extends finally for function if in instanceof let new return switch throw try typeof var void while with",_h="false null true",Du="enum import super this "+_h+" "+hh,gs="implements interface package private protected public static "+Du,rm="return new delete throw else case yield await";hh=Vt(hh);Du=Vt(Du);rm=Vt(rm);_h=Vt(_h);gs=Vt(gs);var cC=Vt(El("+-*&%=<>!?|~^")),qv=/^0x[0-9a-f]+$/i,Jv=/^0[0-7]+$/,dC=/^0o[0-7]+$/i,hC=/^0b[01]+$/i,_C=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,pC=/^(0[xob])?[0-9a-f]+n$/i,kg=/in(?:stanceof)?/y,wI=Vt(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","**","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","||=","&&=","??=","/=","*=","**=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","??","||"]),MI=Vt(El(`  
\r	\f\v​           \u2028\u2029  　\uFEFF`)),xd=Vt(El(`
\r\u2028\u2029`)),fC=Vt(El(";]),:")),gC=Vt(El("[{(,;:")),mC=Vt(El("[]{}(),;:")),ph={ID_Start:/[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/(?:[$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF])+/};function xo(i,n){if(fh(i.charCodeAt(n))){if(om(i.charCodeAt(n+1)))return i.charAt(n)+i.charAt(n+1)}else if(om(i.charCodeAt(n))&&fh(i.charCodeAt(n-1)))return i.charAt(n-1)+i.charAt(n);return i.charAt(n)}function $C(i,n){return fh(i.charCodeAt(n))?65536+(i.charCodeAt(n)-55296<<10)+i.charCodeAt(n+1)-56320:i.charCodeAt(n)}function EC(i){for(var n=0,o=0;o<i.length;o++)fh(i.charCodeAt(o))&&om(i.charCodeAt(o+1))&&(n++,o++);return i.length-n}function TC(i){return i>65535?(i-=65536,String.fromCharCode((i>>10)+55296)+String.fromCharCode(i%1024+56320)):String.fromCharCode(i)}function fh(i){return i>=55296&&i<=56319}function om(i){return i>=56320&&i<=57343}function xI(i){return i>=48&&i<=57}function Fd(i){return ph.ID_Start.test(i)}function tl(i){return ph.ID_Continue.test(i)}const Zv=/^[a-z_$][a-z0-9_$]*$/i;function Ch(i){return Zv.test(i)}function FI(i,n){if(Zv.test(i))return!0;if(!n&&/[\ud800-\udfff]/.test(i))return!1;var o=ph.ID_Start.exec(i);return!o||o.index!==0?!1:(i=i.slice(o[0].length),i?(o=ph.ID_Continue.exec(i),!!o&&o[0].length===i.length):!0)}function PI(i,n=!0){if(!n&&i.includes("e"))return NaN;if(qv.test(i))return parseInt(i.substr(2),16);if(Jv.test(i))return parseInt(i.substr(1),8);if(dC.test(i))return parseInt(i.substr(2),8);if(hC.test(i))return parseInt(i.substr(2),2);if(_C.test(i))return parseFloat(i);var o=parseFloat(i);if(o==i)return o}class Qv extends Error{constructor(n,o,s,l,p){super(),this.name="SyntaxError",this.message=n,this.filename=o,this.line=s,this.col=l,this.pos=p}}function gh(i,n,o,s,l){throw new Qv(i,n,o,s,l)}function tn(i,n,o){return i.type==n&&(o==null||i.value==o)}var Lg={};function bC(i,n,o,s){var l={text:i,filename:n,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,brace_counter:0,template_braces:[],comments_before:[],directives:{},directive_stack:[]};function p(){return xo(l.text,l.pos)}function E(){if(!(l.text.charCodeAt(l.pos+1)===46))return!1;const ue=l.text.charCodeAt(l.pos+2);return ue<48||ue>57}function $(te,ue){var ge=xo(l.text,l.pos++);if(te&&!ge)throw Lg;return xd.has(ge)?(l.newline_before=l.newline_before||!ue,++l.line,l.col=0,ge=="\r"&&p()==`
`&&(++l.pos,ge=`
`)):(ge.length>1&&(++l.pos,++l.col),++l.col),ge}function R(te){for(;te--;)$()}function M(te){return l.text.substr(l.pos,te.length)==te}function L(){for(var te=l.text,ue=l.pos,ge=l.text.length;ue<ge;++ue){var we=te[ue];if(xd.has(we))return ue}return-1}function y(te,ue){var ge=l.text.indexOf(te,l.pos);if(ge==-1)throw Lg;return ge}function N(){l.tokline=l.line,l.tokcol=l.col,l.tokpos=l.pos}var P=!1,F=null;function K(te,ue,ge){l.regex_allowed=te=="operator"&&!eA.has(ue)||te=="keyword"&&rm.has(ue)||te=="punc"&&gC.has(ue)||te=="arrow",te=="punc"&&(ue=="."||ue=="?.")?P=!0:ge||(P=!1);const we=l.tokline,st=l.tokcol,Be=l.tokpos,Rt=l.newline_before,de=n;let Le=[],_e=[];ge||(Le=l.comments_before,_e=l.comments_before=[]),l.newline_before=!1;const be=new sm(te,ue,we,st,Be,Rt,Le,_e,de);return ge||(F=be),be}function g(){for(;MI.has(p());)$()}function d(){for(var te=l.pos,ue=!1;te<l.text.length;){var ge=xo(l.text,te);if(xd.has(ge))return{char:ge,pos:te};if(ue)ge=="*"&&xo(l.text,te+1)=="/"?(te+=2,ue=!1):te++;else if(MI.has(ge))te++;else{if(ge=="/"){var we=xo(l.text,te+1);if(we=="/")return te=L(),{char:xo(l.text,te),pos:te};if(we=="*"){ue=!0,te+=2;continue}}return{char:ge,pos:te}}}return{char:null,pos:te}}function C(te,ue){if(te=="\\")return!0;if(Fd(te)){if(kg.lastIndex=ue,kg.test(l.text)){var ge=xo(l.text,kg.lastIndex);if(!tl(ge)&&ge!="\\")return!1}return!0}return!1}function x(te){for(var ue="",ge,we=0;(ge=p())&&te(ge,we++);)ue+=$();return ue}function k(te){gh(te,n,l.tokline,l.tokcol,l.tokpos)}function H(te){var ue=!1,ge=!1,we=!1,st=te==".",Be=!1,Rt=!1,de=x(function(_e,be){if(Be)return!1;var We=_e.charCodeAt(0);switch(We){case 95:return Rt=!0;case 98:case 66:return we=!0;case 111:case 79:case 120:case 88:return we?!1:we=!0;case 101:case 69:return we?!0:ue?!1:ue=ge=!0;case 45:return ge||be==0&&!te;case 43:return ge;case(ge=!1,46):return!st&&!we&&!ue?st=!0:!1;case 110:return Be=!0,!0}return We>=48&&We<=57||We>=97&&We<=102||We>=65&&We<=70});if(te&&(de=te+de),Cu=de,Jv.test(de)&&ce.has_directive("use strict")&&k("Legacy octal literals are not allowed in strict mode"),Rt&&(de.endsWith("_")?k("Numeric separators are not allowed at the end of numeric literals"):de.includes("__")&&k("Only one underscore is allowed as numeric separator"),de=de.replace(/_/g,"")),Be){const _e=de.slice(0,-1),be=qv.test(_e),We=PI(_e,be);if(!st&&pC.test(de)&&!isNaN(We))return K("big_int",_e);k("Invalid or unexpected token")}var Le=PI(de);if(isNaN(Le))k("Invalid syntax: "+de);else return K("num",Le)}function f(te){return te>="0"&&te<="7"}function I(te,ue,ge){var we=$(!0,te);switch(we.charCodeAt(0)){case 110:return`
`;case 114:return"\r";case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 120:return String.fromCharCode(U(2,ue));case 117:if(p()=="{"){for($(!0),p()==="}"&&k("Expecting hex-character between {}");p()=="0";)$(!0);var st,Be=y("}")-l.pos;return(Be>6||(st=U(Be,ue))>1114111)&&k("Unicode reference out of bounds"),$(!0),TC(st)}return String.fromCharCode(U(4,ue));case 10:return"";case 13:if(p()==`
`)return $(!0,te),""}return f(we)?(ge&&ue&&(we==="0"&&!f(p())||k("Octal escape sequences are not allowed in template strings")),D(we,ue)):we}function D(te,ue){var ge=p();return ge>="0"&&ge<="7"&&(te+=$(!0),te[0]<="3"&&(ge=p())>="0"&&ge<="7"&&(te+=$(!0))),te==="0"?"\0":(te.length>0&&ce.has_directive("use strict")&&ue&&k("Legacy octal escape sequences are not allowed in strict mode"),String.fromCharCode(parseInt(te,8)))}function U(te,ue){for(var ge=0;te>0;--te){if(!ue&&isNaN(parseInt(p(),16)))return parseInt(ge,16)||"";var we=$(!0);isNaN(parseInt(we,16))&&k("Invalid hex-character pattern in string"),ge+=we}return parseInt(ge,16)}var O=Me("Unterminated string constant",function(){const te=l.pos;for(var ue=$(),ge=[];;){var we=$(!0,!0);if(we=="\\")we=I(!0,!0);else if(we=="\r"||we==`
`)k("Unterminated string constant");else if(we==ue)break;ge.push(we)}var st=K("string",ge.join(""));return Cu=l.text.slice(te,l.pos),st.quote=ue,st}),X=Me("Unterminated template",function(te){te&&l.template_braces.push(l.brace_counter);var ue="",ge="",we,st;for($(!0,!0);(we=$(!0,!0))!="`";){if(we=="\r")p()==`
`&&++l.pos,we=`
`;else if(we=="$"&&p()=="{")return $(!0,!0),l.brace_counter++,st=K(te?"template_head":"template_cont",ue),yu.set(st,ge),st.template_end=!1,st;if(ge+=we,we=="\\"){var Be=l.pos,Rt=F&&(F.type==="name"||F.type==="punc"&&(F.value===")"||F.value==="]"));we=I(!0,!Rt,!0),ge+=l.text.substr(Be,l.pos-Be)}ue+=we}return l.template_braces.pop(),st=K(te?"template_head":"template_cont",ue),yu.set(st,ge),st.template_end=!0,st});function W(te){var ue=l.regex_allowed,ge=L(),we;return ge==-1?(we=l.text.substr(l.pos),l.pos=l.text.length):(we=l.text.substring(l.pos,ge),l.pos=ge),l.col=l.tokcol+(l.pos-l.tokpos),l.comments_before.push(K(te,we,!0)),l.regex_allowed=ue,ce}var re=Me("Unterminated multiline comment",function(){var te=l.regex_allowed,ue=y("*/",!0),ge=l.text.substring(l.pos,ue).replace(/\r\n|\r|\u2028|\u2029/g,`
`);return R(EC(ge)+2),l.comments_before.push(K("comment2",ge,!0)),l.newline_before=l.newline_before||ge.includes(`
`),l.regex_allowed=te,ce}),se=function(){let te=l.pos,ue=te-1,ge="c";for(;(ge=l.text.charAt(++ue))&&(ge>="a"&&ge<="z"||ge>="A"&&ge<="Z"););return ue>te+1&&ge&&ge!=="\\"&&!tl(ge)&&ge<="~"?(l.pos+=ue-te,l.col+=ue-te,l.text.slice(te,l.pos)):Ue()},Ue=Me("Unterminated identifier name",function(){var te=[],ue,ge=!1,we=function(){return ge=!0,$(),p()!=="u"&&k("Expecting UnicodeEscapeSequence -- uXXXX or u{XXXX}"),I(!1,!0)};if((ue=p())==="\\")ue=we(),Fd(ue)||k("First identifier char is an invalid identifier char");else if(Fd(ue))$();else return"";for(te.push(ue);(ue=p())!=null;){if((ue=p())==="\\")ue=we(),tl(ue)||k("Invalid escaped identifier char");else{if(!tl(ue))break;$()}te.push(ue)}const st=te.join("");return Du.has(st)&&ge&&k("Escaped characters are not allowed in keywords"),st}),me=Me("Unterminated regular expression",function(te){for(var ue=!1,ge,we=!1;ge=$(!0);)if(xd.has(ge))k("Unexpected line terminator");else if(ue)/^[\u0000-\u007F]$/.test(ge)?te+="\\"+ge:te+=ge,ue=!1;else if(ge=="[")we=!0,te+=ge;else if(ge=="]"&&we)we=!1,te+=ge;else{if(ge=="/"&&!we)break;ge=="\\"?ue=!0:te+=ge}const st=se();return K("regexp","/"+te+"/"+st)});function Se(te){function ue(ge){if(!p())return ge;var we=ge+p();return wI.has(we)?($(),ue(we)):ge}return K("operator",ue(te||$()))}function xe(){switch($(),p()){case"/":return $(),W("comment1");case"*":return $(),re()}return l.regex_allowed?me(""):Se("/")}function Ce(){return $(),p()===">"?($(),K("arrow","=>")):Se("=")}function Ie(){return $(),xI(p().charCodeAt(0))?H("."):p()==="."?($(),$(),K("expand","...")):K("punc",".")}function je(){var te=se();return P?K("name",te):_h.has(te)?K("atom",te):hh.has(te)?wI.has(te)?K("operator",te):K("keyword",te):K("name",te)}function Ve(){return $(),K("privatename",se())}function Me(te,ue){return function(ge){try{return ue(ge)}catch(we){if(we===Lg)k(te);else throw we}}}function ce(te){if(te!=null)return me(te);for(s&&l.pos==0&&M("#!")&&(N(),R(2),W("comment5"));;){if(g(),N(),o){if(M("<!--")){R(4),W("comment3");continue}if(M("-->")&&l.newline_before){R(3),W("comment4");continue}}var ue=p();if(!ue)return K("eof");var ge=ue.charCodeAt(0);switch(ge){case 34:case 39:return O();case 46:return Ie();case 47:{var we=xe();if(we===ce)continue;return we}case 61:return Ce();case 63:{if(!E())break;return $(),$(),K("punc","?.")}case 96:return X(!0);case 123:l.brace_counter++;break;case 125:if(l.brace_counter--,l.template_braces.length>0&&l.template_braces[l.template_braces.length-1]===l.brace_counter)return X(!1);break}if(xI(ge))return H();if(mC.has(ue))return K("punc",$());if(cC.has(ue))return Se();if(ge==92||Fd(ue))return je();if(ge==35)return Ve();break}k("Unexpected character '"+ue+"'")}return ce.next=$,ce.peek=p,ce.context=function(te){return te&&(l=te),l},ce.add_directive=function(te){l.directive_stack[l.directive_stack.length-1].push(te),l.directives[te]===void 0?l.directives[te]=1:l.directives[te]++},ce.push_directives_stack=function(){l.directive_stack.push([])},ce.pop_directives_stack=function(){for(var te=l.directive_stack[l.directive_stack.length-1],ue=0;ue<te.length;ue++)l.directives[te[ue]]--;l.directive_stack.pop()},ce.has_directive=function(te){return l.directives[te]>0},ce.peek_next_token_start_or_newline=d,ce.ch_starts_binding_identifier=C,ce}var SC=Vt(["typeof","void","delete","--","++","!","~","-","+"]),eA=Vt(["--","++"]),IC=Vt(["=","+=","-=","??=","&&=","||=","/=","*=","**=","%=",">>=","<<=",">>>=","|=","^=","&="]),vC=Vt(["??=","&&=","||="]),hr=(function(i,n){for(var o=0;o<i.length;++o)for(const s of i[o])n[s]=o+1;return n})([["||"],["??"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),AC=Vt(["atom","num","big_int","string","regexp","name"]);function ku(i,n){const o=new WeakMap;n=po(n,{bare_returns:!1,ecma:null,expression:!1,filename:null,html5_comments:!0,module:!1,shebang:!0,strict:!1,toplevel:null},!0);var s={input:typeof i=="string"?bC(i,n.filename,n.html5_comments,n.shebang):i,token:null,prev:null,peeked:null,in_function:0,in_async:-1,in_generator:-1,in_directives:!0,in_loop:0,labels:[]};s.token=E();function l(G,Q){return tn(s.token,G,Q)}function p(){return s.peeked||(s.peeked=s.input())}function E(){return s.prev=s.token,s.peeked||p(),s.token=s.peeked,s.peeked=null,s.in_directives=s.in_directives&&(s.token.type=="string"||l("punc",";")),s.token}function $(){return s.prev}function R(G,Q,ie,$e){var Ae=s.input.context();gh(G,Ae.filename,Q??Ae.tokline,ie??Ae.tokcol,$e??Ae.tokpos)}function M(G,Q){R(Q,G.line,G.col)}function L(G){G==null&&(G=s.token),M(G,"Unexpected token: "+G.type+" ("+G.value+")")}function y(G,Q){if(l(G,Q))return E();M(s.token,"Unexpected token "+s.token.type+" «"+s.token.value+"», expected "+G+" «"+Q+"»")}function N(G){return y("punc",G)}function P(G){return G.nlb||!G.comments_before.every(Q=>!Q.nlb)}function F(){return!n.strict&&(l("eof")||l("punc","}")||P(s.token))}function K(){return s.in_generator===s.in_function}function g(){return s.in_async===s.in_function}function d(){return s.in_async===s.in_function||s.in_function===0&&s.input.has_directive("use strict")}function C(G){l("punc",";")?E():!G&&!F()&&L()}function x(){N("(");var G=it(!0);return N(")"),G}function k(G){return function(...ie){const $e=s.token,Ae=G(...ie);return Ae.start=$e,Ae.end=$(),Ae}}function H(){(l("operator","/")||l("operator","/="))&&(s.peeked=null,s.token=s.input(s.token.value.substr(1)))}var f=k(function G(Q,ie,$e){switch(H(),s.token.type){case"string":if(s.in_directives){var Ae=p();!Cu.includes("\\")&&(tn(Ae,"punc",";")||tn(Ae,"punc","}")||P(Ae)||tn(Ae,"eof"))?s.input.add_directive(s.token.value):s.in_directives=!1}var Ye=s.in_directives,Ze=D();return Ye&&Ze.body instanceof wt?new Dn(Ze.body):Ze;case"template_head":case"num":case"big_int":case"regexp":case"operator":case"atom":return D();case"name":if(s.token.value=="async"&&tn(p(),"keyword","function"))return E(),E(),ie&&R("functions are not allowed as the body of a loop"),Ue(fi,!1,!0,Q);if(s.token.value=="import"&&!tn(p(),"punc","(")&&!tn(p(),"punc",".")){E();var ft=Y();return C(),ft}if(s.token.value=="using"&&tn(p(),"name")&&!P(p())){E();var ft=de();return C(),ft}if(s.token.value=="await"&&d()&&tn(p(),"name","using")&&!P(p())){var bi=s.input.peek_next_token_start_or_newline();if(s.input.ch_starts_binding_identifier(bi.char,bi.pos)){E();var ft=Le();return C(),ft}}return tn(p(),"punc",":")?I():D();case"privatename":return s.in_class||R("Private field must be used in an enclosing class"),D();case"punc":switch(s.token.value){case"{":return new bt({start:s.token,body:te(),end:$()});case"[":case"(":return D();case";":return s.in_directives=!1,E(),new qt;default:L()}case"keyword":switch(s.token.value){case"break":return E(),U(fr);case"continue":return E(),U(Es);case"debugger":return E(),C(),new Po;case"do":E();var ji=wi(G);y("keyword","while");var Hi=x();return C(!0),new $o({body:ji,condition:Hi});case"while":return E(),new Bo({condition:x(),body:wi(function(){return G(!1,!0)})});case"for":return E(),O();case"class":return E(),ie&&R("classes are not allowed as the body of a loop"),$e&&R("classes are not allowed as the body of an if"),Et(Or,Q);case"function":return E(),ie&&R("functions are not allowed as the body of a loop"),Ue(fi,!1,!1,Q);case"if":return E(),ce();case"return":s.in_function==0&&!n.bare_returns&&R("'return' outside of function"),E();var Ln=null;return l("punc",";")?E():F()||(Ln=it(!0),C()),new _i({value:Ln});case"switch":return E(),new gn({expression:x(),body:wi(ue)});case"throw":E(),P(s.token)&&R("Illegal newline after 'throw'");var Ln=it(!0);return C(),new Lu({value:Ln});case"try":return E(),ge();case"var":E();var ft=st();return C(),ft;case"let":E();var ft=Be();return C(),ft;case"const":E();var ft=Rt();return C(),ft;case"with":return s.input.has_directive("use strict")&&R("Strict mode may not include a with statement"),E(),new Zn({expression:x(),body:G()});case"export":if(!tn(p(),"punc","(")){E();var ft=le();return l("punc",";")&&C(),ft}}}L()});function I(){var G=Ne(Pu);G.name==="await"&&g()&&M(s.prev,"await cannot be used as label inside async function"),s.labels.some(ie=>ie.name===G.name)&&R("Label "+G.name+" defined twice"),N(":"),s.labels.push(G);var Q=f();return s.labels.pop(),Q instanceof pr||G.references.forEach(function(ie){ie instanceof Es&&(ie=ie.label.start,R("Continue label `"+G.name+"` refers to non-IterationStatement.",ie.line,ie.col,ie.pos))}),new $n({body:Q,label:G})}function D(G){return new rt({body:(G=it(!0),C(),G)})}function U(G){var Q=null,ie;F()||(Q=Ne(_m,!0)),Q!=null?(ie=s.labels.find(Ae=>Ae.name===Q.name),ie||R("Undefined label "+Q.name),Q.thedef=ie):s.in_loop==0&&R(G.TYPE+" not inside a loop or switch"),C();var $e=new G({label:Q});return ie&&ie.references.push($e),$e}function O(){var G="`for await` invalid in this context",Q=s.token;Q.type=="name"&&Q.value=="await"?(d()||M(Q,G),E()):Q=!1,N("(");var ie=null;if(l("punc",";"))Q&&M(Q,G);else{ie=l("keyword","var")?(E(),st(!0)):l("keyword","let")?(E(),Be(!0)):l("keyword","const")?(E(),Rt(!0)):l("name","using")&&tn(p(),"name")&&(p().value!="of"||s.input.peek_next_token_start_or_newline().char=="=")?(E(),de(!0)):l("name","await")&&d()&&tn(p(),"name","using")?(E(),Le(!0)):it(!0,!0);var $e=l("operator","in"),Ae=l("name","of");if(Q&&!Ae&&M(Q,G),$e||Ae)return ie instanceof Un?(ie.definitions.length>1&&M(ie.start,"Only one variable declaration allowed in for..in loop"),$e&&ie instanceof qn&&M(ie.start,"Invalid using declaration in for..in loop")):ee(ie)||(ie=Pe(ie))instanceof jt||M(ie.start,"Invalid left-hand side in for..in loop"),E(),$e?re(ie):W(ie,!!Q)}return X(ie)}function X(G){N(";");var Q=l("punc",";")?null:it(!0);N(";");var ie=l("punc",")")?null:it(!0);return N(")"),new Oi({init:G,condition:Q,step:ie,body:wi(function(){return f(!1,!0)})})}function W(G,Q){var ie=G instanceof Un?G.definitions[0].name:null,$e=it(!0);return N(")"),new $s({await:Q,init:G,name:ie,object:$e,body:wi(function(){return f(!1,!0)})})}function re(G){var Q=it(!0);return N(")"),new sn({init:G,object:Q,body:wi(function(){return f(!1,!0)})})}var se=function(G,Q,ie){P(s.token)&&R("Unexpected newline before arrow (=>)"),y("arrow","=>");var $e=je(l("punc","{"),!1,ie);return new di({start:G,end:$e.end,async:ie,argnames:Q,body:$e})},Ue=function(G,Q,ie,$e){var Ae=G===fi;l("operator","*")&&(Q=!0,E());var Ye=l("name")?Ne(Ae?To:Kr):null;Ae&&!Ye&&($e?G=ii:L()),Ye&&G!==Uo&&!(Ye instanceof Wi)&&L($());var Ze=[],ft=je(!0,Q,ie,Ye,Ze);return new G({start:Ze.start,end:ft.end,is_generator:Q,async:ie,name:Ye,argnames:Ze,body:ft})};class me{constructor(Q,ie,$e=!1){this.is_parameter=Q,this.duplicates_ok=$e,this.parameters=new Set,this.duplicate=null,this.default_assignment=!1,this.spread=!1,this.strict_mode=!!ie}add_parameter(Q){if(this.parameters.has(Q.value))this.duplicate===null&&(this.duplicate=Q),this.check_strict();else if(this.parameters.add(Q.value),this.is_parameter)switch(Q.value){case"arguments":case"eval":case"yield":this.strict_mode&&M(Q,"Unexpected "+Q.value+" identifier as parameter inside strict mode");break;default:Du.has(Q.value)&&L()}}mark_default_assignment(Q){this.default_assignment===!1&&(this.default_assignment=Q)}mark_spread(Q){this.spread===!1&&(this.spread=Q)}mark_strict_mode(){this.strict_mode=!0}is_strict(){return this.default_assignment!==!1||this.spread!==!1||this.strict_mode}check_strict(){this.is_strict()&&this.duplicate!==null&&!this.duplicates_ok&&M(this.duplicate,"Parameter "+this.duplicate.value+" was used already")}}function Se(G){var Q=new me(!0,s.input.has_directive("use strict"));for(N("(");!l("punc",")");){var ie=xe(Q);if(G.push(ie),l("punc",")")||N(","),ie instanceof Nt)break}E()}function xe(G,Q){var ie,$e=!1;return G===void 0&&(G=new me(!0,s.input.has_directive("use strict"))),l("expand","...")&&($e=s.token,G.mark_spread(s.token),E()),ie=Ce(G,Q),l("operator","=")&&$e===!1&&(G.mark_default_assignment(s.token),E(),ie=new fn({start:ie.start,left:ie,operator:"=",right:it(!1),end:s.token})),$e!==!1&&(l("punc",")")||L(),ie=new Nt({start:$e,expression:ie,end:$e})),G.check_strict(),ie}function Ce(G,Q){var ie=[],$e=!0,Ae=!1,Ye,Ze=s.token;if(G===void 0){const Ln=s.input.has_directive("use strict"),ai=Q===Wo;G=new me(!1,Ln,ai)}if(Q=Q===void 0?Xi:Q,l("punc","[")){for(E();!l("punc","]");){if($e?$e=!1:N(","),l("expand","...")&&(Ae=!0,Ye=s.token,G.mark_spread(s.token),E()),l("punc"))switch(s.token.value){case",":ie.push(new Pn({start:s.token,end:s.token}));continue;case"]":break;case"[":case"{":ie.push(Ce(G,Q));break;default:L()}else l("name")?(G.add_parameter(s.token),ie.push(Ne(Q))):R("Invalid function parameter");l("operator","=")&&Ae===!1&&(G.mark_default_assignment(s.token),E(),ie[ie.length-1]=new fn({start:ie[ie.length-1].start,left:ie[ie.length-1],operator:"=",right:it(!1),end:s.token})),Ae&&(l("punc","]")||R("Rest element must be last element"),ie[ie.length-1]=new Nt({start:Ye,expression:ie[ie.length-1],end:Ye}))}return N("]"),G.check_strict(),new jt({start:Ze,names:ie,is_array:!0,end:$()})}else if(l("punc","{")){for(E();!l("punc","}");){if($e?$e=!1:N(","),l("expand","...")&&(Ae=!0,Ye=s.token,G.mark_spread(s.token),E()),l("name")&&(tn(p(),"punc")||tn(p(),"operator"))&&[",","}","="].includes(p().value)){G.add_parameter(s.token);var ft=$(),bi=Ne(Q);Ae?ie.push(new Nt({start:Ye,expression:bi,end:bi.end})):ie.push(new Zt({start:ft,key:bi.name,value:bi,end:bi.end}))}else{if(l("punc","}"))continue;var ji=s.token,Hi=v();Hi===null?L($()):$().type==="name"&&!l("punc",":")?ie.push(new Zt({start:$(),key:Hi,value:new Q({start:$(),name:Hi,end:$()}),end:$()})):(N(":"),ie.push(new Zt({start:ji,quote:ji.quote,key:Hi,value:Ce(G,Q),end:$()})))}Ae?l("punc","}")||R("Rest element must be last element"):l("operator","=")&&(G.mark_default_assignment(s.token),E(),ie[ie.length-1].value=new fn({start:ie[ie.length-1].value.start,left:ie[ie.length-1].value,operator:"=",right:it(!1),end:s.token}))}return N("}"),G.check_strict(),new jt({start:Ze,names:ie,is_array:!1,end:$()})}else{if(l("name"))return G.add_parameter(s.token),Ne(Q);R("Invalid function parameter")}}function Ie(G,Q){var ie,$e,Ae,Ye=[];for(N("(");!l("punc",")");)ie&&L(ie),l("expand","...")?(ie=s.token,Q&&($e=s.token),E(),Ye.push(new Nt({start:$(),expression:it(),end:s.token}))):Ye.push(it()),l("punc",")")||(N(","),l("punc",")")&&(Ae=$(),Q&&($e=Ae)));return N(")"),G&&l("arrow","=>")?ie&&Ae&&L(Ae):$e&&L($e),Ye}function je(G,Q,ie,$e,Ae){var Ye=s.in_loop,Ze=s.labels,ft=s.in_generator,bi=s.in_async;if(++s.in_function,Q&&(s.in_generator=s.in_function),ie&&(s.in_async=s.in_function),Ae&&Se(Ae),G&&(s.in_directives=!0),s.in_loop=0,s.labels=[],G){s.input.push_directives_stack();var ji=te();$e&&ne($e),Ae&&Ae.forEach(ne),s.input.pop_directives_stack()}else var ji=[new _i({start:s.token,value:it(!1),end:s.token})];return--s.in_function,s.in_loop=Ye,s.labels=Ze,s.in_generator=ft,s.in_async=bi,ji}function Ve(){return d()||R("Unexpected await expression outside async function",s.prev.line,s.prev.col,s.prev.pos),new Qn({start:$(),end:s.token,expression:c(!0)})}function Me(){var G=s.token,Q=!1,ie=!0;return F()||l("punc")&&fC.has(s.token.value)||l("template_cont")?ie=!1:l("operator","*")&&(Q=!0,E()),new er({start:G,is_star:Q,expression:ie?it():null,end:$()})}function ce(){var G=x(),Q=f(!1,!1,!0),ie=null;return l("keyword","else")&&(E(),ie=f(!1,!1,!0)),new Yt({condition:G,body:Q,alternative:ie})}function te(){N("{");for(var G=[];!l("punc","}");)l("eof")&&L(),G.push(f());return E(),G}function ue(){N("{");for(var G=[],Q=null,ie=null,$e;!l("punc","}");)l("eof")&&L(),l("keyword","case")?(ie&&(ie.end=$()),Q=[],ie=new Hr({start:($e=s.token,E(),$e),expression:it(!0),body:Q}),G.push(ie),N(":")):l("keyword","default")?(ie&&(ie.end=$()),Q=[],ie=new _a({start:($e=s.token,E(),N(":"),$e),body:Q}),G.push(ie)):(Q||L(),Q.push(f()));return ie&&(ie.end=$()),E(),G}function ge(){var G,Q=null,ie=null;if(G=new Rh({start:s.token,body:te(),end:$()}),l("keyword","catch")){var $e=s.token;if(E(),l("punc","{"))var Ae=null;else{N("(");var Ae=xe(void 0,Rr);N(")")}Q=new Eo({start:$e,argname:Ae,body:te(),end:$()})}if(l("keyword","finally")){var $e=s.token;E(),ie=new dl({start:$e,body:te(),end:$()})}return!Q&&!ie&&R("Missing catch/finally blocks"),new nr({body:G,bcatch:Q,bfinally:ie})}function we(G,Q){for(var ie=[],$e;;){var Ae=Q==="var"?Wo:Q==="const"?Ts:Q==="let"?_l:Q==="using"||Q==="await using"?bs:null,Ye=Q==="using"||Q==="await using"?mh:vi;if(l("punc","{")||l("punc","[")?$e=new Ye({start:s.token,name:Ce(void 0,Ae),value:l("operator","=")?(y("operator","="),it(!1,G)):null,end:$()}):($e=new Ye({start:s.token,name:Ne(Ae),value:l("operator","=")?(E(),it(!1,G)):!G&&(Q==="const"||Q==="using"||Q==="await using")?R("Missing initializer in "+Q+" declaration"):null,end:$()}),$e.name.name=="import"&&R("Unexpected token: import")),ie.push($e),!l("punc",","))break;E()}return ie}var st=function(G){return new Ei({start:$(),definitions:we(G,"var"),end:$()})},Be=function(G){return new oa({start:$(),definitions:we(G,"let"),end:$()})},Rt=function(G){return new sa({start:$(),definitions:we(G,"const"),end:$()})},de=function(G){return new qn({start:$(),await:!1,definitions:we(G,"using"),end:$()})},Le=function(G){return new qn({start:$(),await:!0,definitions:(E(),we(G,"await using")),end:$()})},_e=function(G){var Q=s.token;if(y("operator","new"),l("punc","."))return E(),y("name","target"),m(new hl({start:Q,end:$()}),G);var ie=Ke(!1),$e;l("punc","(")?(E(),$e=ct(")",!0)):$e=[];var Ae=new yn({start:Q,expression:ie,args:$e,end:$()});return A(Ae),m(Ae,G)};function be(){var G=s.token,Q;switch(G.type){case"name":Q=J(Ge);break;case"num":Q=new Tt({start:G,end:G,value:G.value,raw:Cu});break;case"big_int":Q=new Dr({start:G,end:G,value:G.value,raw:Cu});break;case"string":Q=new wt({start:G,end:G,value:G.value,quote:G.quote}),A(Q);break;case"regexp":const[ie,$e,Ae]=G.value.match(/^\/(.*)\/(\w*)$/);Q=new Vn({start:G,end:G,value:{source:$e,flags:Ae}});break;case"atom":switch(G.value){case"false":Q=new Ko({start:G,end:G});break;case"true":Q=new Jn({start:G,end:G});break;case"null":Q=new Fn({start:G,end:G});break}break}return E(),Q}function We(G,Q){var ie=function($e,Ae){return Ae?new fn({start:$e.start,left:$e,operator:"=",right:Ae,end:Ae.end}):$e};if(G instanceof Wt)return ie(new jt({start:G.start,end:G.end,is_array:!1,names:G.properties.map($e=>We($e))}),Q);if(G instanceof Zt)return G.value=We(G.value),ie(G,Q);if(G instanceof Pn)return G;if(G instanceof jt)return G.names=G.names.map($e=>We($e)),ie(G,Q);if(G instanceof Ge)return ie(new Xi({name:G.name,start:G.start,end:G.end}),Q);if(G instanceof Nt)return G.expression=We(G.expression),ie(G,Q);if(G instanceof Ut)return ie(new jt({start:G.start,end:G.end,is_array:!0,names:G.elements.map($e=>We($e))}),Q);if(G instanceof Ot)return ie(We(G.left,G.right),Q);if(G instanceof fn)return G.left=We(G.left),G;R("Invalid function parameter",G.start.line,G.start.col)}var Ke=function(G,Q){if(l("operator","new"))return _e(G);if(l("name","import")&&tn(p(),"punc","."))return Te(G);var ie=s.token,$e,Ae=l("name","async")&&($e=p()).value!="["&&$e.type!="arrow"&&be();if(l("punc")){switch(s.token.value){case"(":if(Ae&&!G)break;var Ye=Ie(Q,!Ae);if(Q&&l("arrow","=>"))return se(ie,Ye.map(ai=>We(ai)),!!Ae);var Ze=Ae?new Qe({expression:Ae,args:Ye}):At(ie,Ye);if(Ze.start){const ai=ie.comments_before.length;if(o.set(ie,ai),Ze.start.comments_before.unshift(...ie.comments_before),ie.comments_before=Ze.start.comments_before,ai==0&&ie.comments_before.length>0){var ft=ie.comments_before[0];ft.nlb||(ft.nlb=ie.nlb,ie.nlb=!1)}ie.comments_after=Ze.start.comments_after}Ze.start=ie;var bi=$();return Ze.end&&(bi.comments_before=Ze.end.comments_before,Ze.end.comments_after.push(...bi.comments_after),bi.comments_after=Ze.end.comments_after),Ze.end=bi,Ze instanceof Qe&&A(Ze),m(Ze,G);case"[":return m(Ht(),G);case"{":return m(St(),G)}Ae||L()}if(Q&&l("name")&&tn(p(),"arrow")){var ji=new Xi({name:s.token.value,start:ie,end:ie});return E(),se(ie,[ji],!!Ae)}if(l("keyword","function")){E();var Hi=Ue(ii,!1,!!Ae);return Hi.start=ie,Hi.end=$(),m(Hi,G)}if(Ae)return m(Ae,G);if(l("keyword","class")){E();var Ln=Et(go);return Ln.start=ie,Ln.end=$(),m(Ln,G)}if(l("template_head"))return m(at(),G);if(AC.has(s.token.type))return m(be(),G);L()};function at(){var G=[],Q=s.token;for(G.push(new fo({start:s.token,raw:yu.get(s.token),value:s.token.value,end:s.token}));!s.token.template_end;)E(),H(),G.push(it(!0)),G.push(new fo({start:s.token,raw:yu.get(s.token),value:s.token.value,end:s.token}));return E(),new mn({start:Q,segments:G,end:s.token})}function ct(G,Q,ie){for(var $e=!0,Ae=[];!l("punc",G)&&($e?$e=!1:N(","),!(Q&&l("punc",G)));)l("punc",",")&&ie?Ae.push(new Pn({start:s.token,end:s.token})):l("expand","...")?(E(),Ae.push(new Nt({start:$(),expression:it(),end:s.token}))):Ae.push(it(!1));return E(),Ae}var Ht=k(function(){return N("["),new Ut({elements:ct("]",!n.strict,!0)})}),pt=k((G,Q)=>Ue(Uo,G,Q)),St=k(function(){var Q=s.token,ie=!0,$e=[];for(N("{");!l("punc","}")&&(ie?ie=!1:N(","),!(!n.strict&&l("punc","}")));){if(Q=s.token,Q.type=="expand"){E(),$e.push(new Nt({start:Q,expression:it(!1),end:$()}));continue}l("privatename")&&R("private fields are not allowed in an object");var Ae=v(),Ye;if(l("punc",":"))Ae===null?L($()):(E(),Ye=it(!1));else{var Ze=dt(Ae,Q);if(Ze){$e.push(Ze);continue}Ye=new Ge({start:$(),name:Ae,end:$()})}l("operator","=")&&(E(),Ye=new Ot({start:Q,left:Ye,operator:"=",right:it(!1),logical:!1,end:$()}));const ft=new Zt({start:Q,quote:Q.quote,key:Ae,value:Ye,end:$()});$e.push(A(ft))}return E(),new Wt({properties:$e})});function Et(G,Q){var ie,$e,Ae,Ye,Ze=[];s.input.push_directives_stack(),s.input.add_directive("use strict"),s.token.type=="name"&&s.token.value!="extends"&&(Ae=Ne(G===Or?Nh:Dh)),G===Or&&!Ae&&(Q?G=go:L()),s.token.value=="extends"&&(E(),Ye=it(!0)),N("{");const ft=s.in_class;for(s.in_class=!0;l("punc",";");)E();for(;!l("punc","}");)for(ie=s.token,$e=dt(v(),ie,!0),$e||L(),Ze.push($e);l("punc",";");)E();return s.in_class=ft,s.input.pop_directives_stack(),E(),new G({start:ie,name:Ae,extends:Ye,properties:Ze,end:$()})}function dt(G,Q,ie){const $e=(ai,As)=>typeof ai=="string"?new As({start:Q,name:ai,end:$()}):(ai===null&&L(),ai);var Ae=$().type==="privatename";const Ye=()=>!l("punc","(")&&!l("punc",",")&&!l("punc","}")&&!l("punc",";")&&!l("operator","=")&&!Ae;var Ze=!1,ft=!1,bi=!1,ji=null;if(ie&&G==="static"&&Ye()){const ai=T();if(ai!=null)return ai;ft=!0,G=v()}G==="async"&&Ye()&&(Ze=!0,G=v()),$().type==="operator"&&$().value==="*"&&(bi=!0,G=v()),(G==="get"||G==="set")&&Ye()&&(ji=G,G=v()),!Ae&&$().type==="privatename"&&(Ae=!0);const Hi=$();if(ji!=null)if(Ae){const ai=ji==="get"?tr:$r;return A(new ai({start:Q,static:ft,key:$e(G,nn),value:pt(),end:$()}))}else{const ai=ji==="get"?yr:Gr;return G=$e(G,nn),A(new ai({start:Q,static:ft,key:G,quote:G instanceof nn?Hi.quote:void 0,value:pt(),end:$()}))}if(l("punc","(")){G=$e(G,nn);const ai=Ae?Xn:an;var Ln=new ai({start:Q,static:ft,key:G,quote:G instanceof nn?Hi.quote:void 0,value:pt(bi,Ze),end:$()});return A(Ln)}if(ie){const ai=Ae?pl:Xo,As=Ae?Kn:ir,jo=$e(G,ai),Il=jo instanceof Xo?Hi.quote:void 0;if(l("operator","="))return E(),A(new As({start:Q,static:ft,quote:Il,key:jo,value:it(!1),end:$()}));if(l("name")||l("privatename")||l("punc","[")||l("operator","*")||l("punc",";")||l("punc","}")||l("string")||l("num")||l("big_int"))return A(new As({start:Q,static:ft,quote:Il,key:jo,end:$()}))}}function T(){if(!l("punc","{"))return null;const G=s.token,Q=[];for(E();!l("punc","}");)Q.push(f());return E(),new En({start:G,body:Q,end:$()})}function ae(){return(l("keyword","with")||l("name","assert"))&&!P(s.token)?(E(),St()):null}function Y(){var G=$(),Q,ie;l("name")&&(Q=Ne(hs)),l("punc",",")&&E(),ie=Xe(!0),(ie||Q)&&y("name","from");var $e=s.token;$e.type!=="string"&&L(),E();const Ae=ae();return new gr({start:G,imported_name:Q,imported_names:ie,module_name:new wt({start:$e,value:$e.value,quote:$e.quote,end:$e}),attributes:Ae,end:s.token})}function Te(G){var Q=s.token;return y("name","import"),y("punc","."),y("name","meta"),m(new Go({start:Q,end:$()}),G)}function ke(G){function Q(ft,bi){return new ft({name:v(),quote:bi||void 0,start:$(),end:$()})}var ie=G?ul:_s,$e=G?hs:ta,Ae=s.token,Ye,Ze;return G?Ye=Q(ie,Ae.quote):Ze=Q($e,Ae.quote),l("name","as")?(E(),G?Ze=Q($e):Ye=Q(ie,s.token.quote)):G?Ze=new $e(Ye):Ye=new ie(Ze),new Br({start:Ae,foreign_name:Ye,name:Ze,end:$()})}function ve(G,Q){var ie=G?ul:_s,$e=G?hs:ta,Ae=s.token,Ye,Ze,ft=$();return G?Ye=Q:Ze=Q,Ye=Ye||new $e({start:Ae,name:"*",end:ft}),Ze=Ze||new ie({start:Ae,name:"*",end:ft}),new Br({start:Ae,foreign_name:Ze,name:Ye,end:ft})}function Xe(G){var Q;if(l("punc","{")){for(E(),Q=[];!l("punc","}");)Q.push(ke(G)),l("punc",",")&&E();E()}else if(l("operator","*")){var ie;E(),l("name","as")&&(E(),ie=G?Ne(hs):_(_s)),Q=[ve(G,ie)]}return Q}function le(){var G=s.token,Q,ie;if(l("keyword","default"))Q=!0,E();else if(ie=Xe(!1))if(l("name","from")){E();var $e=s.token;$e.type!=="string"&&L(),E();const ft=ae();return new ki({start:G,is_default:Q,exported_names:ie,module_name:new wt({start:$e,value:$e.value,quote:$e.quote,end:$e}),end:$(),attributes:ft})}else return new ki({start:G,is_default:Q,exported_names:ie,end:$()});var Ae,Ye,Ze;return l("punc","{")||Q&&(l("keyword","class")||l("keyword","function"))&&tn(p(),"punc")?(Ye=it(!1),C()):(Ae=f(Q))instanceof In&&Q?L(Ae.start):Ae instanceof In||Ae instanceof fi||Ae instanceof Or?Ze=Ae:Ae instanceof go||Ae instanceof ii?Ye=Ae:Ae instanceof rt?Ye=Ae.body:L(Ae.start),new ki({start:G,is_default:Q,exported_value:Ye,exported_definition:Ze,end:$(),attributes:null})}function v(){var G=s.token;switch(G.type){case"punc":if(G.value==="["){E();var Q=it(!1);return N("]"),Q}else L(G);case"operator":if(G.value==="*")return E(),null;["delete","in","instanceof","new","typeof","void"].includes(G.value)||L(G);case"name":case"privatename":case"string":case"keyword":case"atom":return E(),G.value;case"num":case"big_int":return E(),""+G.value;default:L(G)}}function V(){var G=s.token;return G.type!="name"&&G.type!="privatename"&&L(),E(),G.value}function J(G){var Q=s.token.value;return new(Q=="this"?ln:Q=="super"?fl:G)({name:String(Q),start:s.token,end:s.token})}function ne(G){var Q=G.name;K()&&Q=="yield"&&M(G.start,"Yield cannot be used as identifier inside generators"),s.input.has_directive("use strict")&&(Q=="yield"&&M(G.start,"Unexpected yield identifier inside strict mode"),G instanceof Wi&&(Q=="arguments"||Q=="eval")&&M(G.start,"Unexpected "+Q+" in strict mode"))}function Ne(G,Q){if(!l("name"))return Q||R("Name expected"),null;var ie=J(G);return ne(ie),E(),ie}function _(G){if(!l("name")){l("string")||R("Name or string expected");var Q=s.token,ie=new G({start:Q,end:Q,name:Q.value,quote:Q.quote});return E(),ie}var $e=J(G);return ne($e),E(),$e}function A(G,Q=G.start){var ie=Q.comments_before;const $e=o.get(Q);for(var Ae=$e??ie.length;--Ae>=0;){var Ye=ie[Ae];if(/[@#]__/.test(Ye.value)){if(/[@#]__PURE__/.test(Ye.value)){Eu(G,fm);break}if(/[@#]__INLINE__/.test(Ye.value)){Eu(G,zd);break}if(/[@#]__NOINLINE__/.test(Ye.value)){Eu(G,aa);break}if(/[@#]__KEY__/.test(Ye.value)){Eu(G,am);break}if(/[@#]__MANGLE_PROP__/.test(Ye.value)){Eu(G,vu);break}}}return G}var m=function(G,Q,ie){var $e=G.start;if(l("punc",".")){E(),l("privatename")&&!s.in_class&&R("Private field must be used in an enclosing class");const Ze=l("privatename")?mr:ni;return A(m(new Ze({start:$e,expression:G,optional:!1,property:V(),end:$()}),Q,ie))}if(l("punc","[")){E();var Ae=it(!0);return N("]"),A(m(new Li({start:$e,expression:G,optional:!1,property:Ae,end:$()}),Q,ie))}if(Q&&l("punc","(")){E();var Ye=new Qe({start:$e,expression:G,optional:!1,args:h(),end:$()});return A(Ye),m(Ye,!0,ie)}if(l("punc","?.")){E();let Ze;if(Q&&l("punc","(")){E();const ft=new Qe({start:$e,optional:!0,expression:G,args:h(),end:$()});A(ft),Ze=m(ft,!0,!0)}else if(l("name")||l("privatename")){l("privatename")&&!s.in_class&&R("Private field must be used in an enclosing class");const ft=l("privatename")?mr:ni;Ze=A(m(new ft({start:$e,expression:G,optional:!0,property:V(),end:$()}),Q,!0))}else if(l("punc","[")){E();const ft=it(!0);N("]"),Ze=A(m(new Li({start:$e,expression:G,optional:!0,property:ft,end:$()}),Q,!0))}return Ze||L(),Ze instanceof Ci?Ze:new Ci({start:$e,expression:Ze,end:$()})}return l("template_head")?(ie&&L(),m(new Cr({start:$e,prefix:G,template_string:at(),end:$()}),Q)):G};function h(){for(var G=[];!l("punc",")");)l("expand","...")?(E(),G.push(new Nt({start:$(),expression:it(!1),end:$()}))):G.push(it(!1)),l("punc",")")||N(",");return E(),G}var c=function(G,Q){var ie=s.token;if(ie.type=="name"&&ie.value=="await"&&d())return E(),Ve();if(l("operator")&&SC.has(ie.value)){E(),H();var $e=b(ut,ie,c(G));return $e.start=ie,$e.end=$(),$e}for(var Ae=Ke(G,Q);l("operator")&&eA.has(s.token.value)&&!P(s.token);)Ae instanceof di&&L(),Ae=b(Yo,s.token,Ae),Ae.start=ie,Ae.end=s.token,E();return Ae};function b(G,Q,ie){var $e=Q.value;switch($e){case"++":case"--":ee(ie)||R("Invalid use of "+$e+" operator",Q.line,Q.col,Q.pos);break;case"delete":ie instanceof Ge&&s.input.has_directive("use strict")&&R("Calling delete on expression not allowed in strict mode",ie.start.line,ie.start.col,ie.start.pos);break}return new G({operator:$e,expression:ie})}var w=function(G,Q,ie){var $e=l("operator")?s.token.value:null;$e=="in"&&ie&&($e=null),$e=="**"&&G instanceof ut&&!tn(G.start,"punc","(")&&G.operator!=="--"&&G.operator!=="++"&&L(G.start);var Ae=$e!=null?hr[$e]:null;if(Ae!=null&&(Ae>Q||$e==="**"&&Q===Ae)){E();var Ye=z(ie,Ae,!0);return w(new Oe({start:G.start,left:G,operator:$e,right:Ye,end:Ye.end}),Q,ie)}return G};function z(G,Q,ie,$e){if(!G&&Q<hr.in&&l("privatename")){s.in_class||R("Private field must be used in an enclosing class");const Ae=s.token,Ye=new pl({start:Ae,name:Ae.value,end:Ae});E(),y("operator","in");const Ze=new Ar({start:Ae,key:Ye,value:z(G,hr.in,!0),end:$()});return w(Ze,0,G)}else return w(c(ie,$e),Q,G)}var q=function(G){var Q=s.token,ie=z(G,0,!0,!0);if(l("operator","?")){E();var $e=it(!1);return N(":"),new It({start:Q,condition:ie,consequent:$e,alternative:it(!1,G),end:$()})}return ie};function ee(G){return G instanceof lt||G instanceof Ge}function Pe(G){if(G instanceof Wt)G=new jt({start:G.start,names:G.properties.map(Pe),is_array:!1,end:G.end});else if(G instanceof Ut){for(var Q=[],ie=0;ie<G.elements.length;ie++)G.elements[ie]instanceof Nt&&(ie+1!==G.elements.length&&M(G.elements[ie].start,"Spread must the be last element in destructuring array"),G.elements[ie].expression=Pe(G.elements[ie].expression)),Q.push(Pe(G.elements[ie]));G=new jt({start:G.start,names:Q,is_array:!0,end:G.end})}else G instanceof Ti?G.value=Pe(G.value):G instanceof Ot&&(G=new fn({start:G.start,left:G.left,operator:"=",right:G.right,end:G.end}));return G}var Je=function(G){H();var Q=s.token;if(Q.type=="name"&&Q.value=="yield"){if(K())return E(),Me();s.input.has_directive("use strict")&&M(s.token,"Unexpected yield identifier inside strict mode")}var ie=q(G),$e=s.token.value;if(l("operator")&&IC.has($e)){if(ee(ie)||(ie=Pe(ie))instanceof jt)return E(),new Ot({start:Q,left:ie,operator:$e,right:Je(G),logical:vC.has($e),end:$()});R("Invalid assignment")}return ie},At=function(G,Q){if(Q.length===1)return Q[0];if(Q.length>1)return new Ct({start:G,expressions:Q,end:p()});R("Invalid parenthesized expression")},it=function(G,Q){for(var ie=s.token,$e=[];$e.push(Je(Q)),!(!G||!l("punc",","));)E(),G=!0;return At(ie,$e)};function wi(G){++s.in_loop;var Q=G();return--s.in_loop,Q}return n.expression?it(!0):(function(){var Q=s.token,ie=[];for(s.input.push_directives_stack(),n.module&&s.input.add_directive("use strict");!l("eof");)ie.push(f());s.input.pop_directives_stack();var $e=$(),Ae=n.toplevel;return Ae?(Ae.body=Ae.body.concat(ie),Ae.end=$e):Ae=new si({start:Q,body:ie,end:$e}),yu=new Map,Ae})()}function Re(i,n,o,s,l=He){n?n=n.split(/\s+/):n=[];var p=n;l&&l.PROPS&&(n=n.concat(l.PROPS));const E=l&&Object.create(l.prototype);if(E&&(o.prototype=E,o.BASE=l),l&&l.SUBCLASSES.push(o),o.prototype.CTOR=o,o.prototype.constructor=o,o.PROPS=n||null,o.SELF_PROPS=p,o.SUBCLASSES=[],i&&(o.prototype.TYPE=o.TYPE=i),s)for(let $ in s)Rn(s,$)&&($[0]==="$"?o[$.substr(1)]=s[$]:o.prototype[$]=s[$]);return o.DEFMETHOD=function($,R){this.prototype[$]=R},o}const Pd=(i,n)=>!!(i.flags&n),Bd=(i,n,o)=>{o?i.flags|=n:i.flags&=~n},BI=1,UI=2,VI=4,HI=8;class sm{constructor(n,o,s,l,p,E,$,R,M){this.flags=E?1:0,this.type=n,this.value=o,this.line=s,this.col=l,this.pos=p,this.comments_before=$,this.comments_after=R,this.file=M,Object.seal(this)}[Symbol.for("nodejs.util.inspect.custom")](n,o){const s=E=>o.stylize(E,"special"),l=typeof this.value=="string"&&this.value.includes("`")?"'":"`",p=`${l}${this.value}${l}`;return`${s("[AST_Token")} ${p} at ${this.line}:${this.col}${s("]")}`}get nlb(){return Pd(this,BI)}set nlb(n){Bd(this,BI,n)}get quote(){return Pd(this,VI)?Pd(this,UI)?"'":'"':""}set quote(n){Bd(this,UI,n==="'"),Bd(this,VI,!!n)}get template_end(){return Pd(this,HI)}set template_end(n){Bd(this,HI,n)}}var He=Re("Node","start end",function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{_clone:function(i){if(i){var n=this.clone();return n.transform(new Gn(function(o){if(o!==n)return o.clone(!0)}))}return new this.CTOR(this)},clone:function(i){return this._clone(i)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},_walk:function(i){return i._visit(this)},walk:function(i){return this._walk(i)},_children_backwards:()=>{}},null),Yi=Re("Statement",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class of all statements"}),Po=Re("Debugger",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Represents a debugger statement"},Yi),Dn=Re("Directive","value quote",function(n){n&&(this.value=n.value,this.quote=n.quote,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:'Represents a directive, like "use strict";',$propdoc:{value:"[string] The value of this directive as a plain string (it's not an AST_String!)",quote:"[string] the original quote character"}},Yi),rt=Re("SimpleStatement","body",function(n){n&&(this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_walk:function(i){return i._visit(this,function(){this.body._walk(i)})},_children_backwards(i){i(this.body)}},Yi);function ha(i,n){const o=i.body;for(var s=0,l=o.length;s<l;s++)o[s]._walk(n)}function hm(i){var n=this._clone(i);return this.block_scope&&(n.block_scope=this.block_scope.clone()),n}var Di=Re("Block","body block_scope",function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements",block_scope:"[AST_Scope] the block scope"},_walk:function(i){return i._visit(this,function(){ha(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n])},clone:hm},Yi),bt=Re("BlockStatement",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A block statement"},Di),qt=Re("EmptyStatement",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The empty statement (empty block or simply a semicolon)"},Yi),ea=Re("StatementWithBody","body",function(n){n&&(this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"}},Yi),$n=Re("LabeledStatement","label",function(n){n&&(this.label=n.label,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_walk:function(i){return i._visit(this,function(){this.label._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),i(this.label)},clone:function(i){var n=this._clone(i);if(i){var o=n.label,s=this.label;n.walk(new Zi(function(l){l instanceof Vr&&l.label&&l.label.thedef===s&&(l.label.thedef=o,o.references.push(l))}))}return n}},ea),pr=Re("IterationStatement","block_scope",function(n){n&&(this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Internal class.  All loops inherit from it.",$propdoc:{block_scope:"[AST_Scope] the block scope for this iteration statement."},clone:hm},ea),yh=Re("DWLoop","condition",function(n){n&&(this.condition=n.condition,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"}},pr),$o=Re("Do",null,function(n){n&&(this.condition=n.condition,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `do` statement",_walk:function(i){return i._visit(this,function(){this.body._walk(i),this.condition._walk(i)})},_children_backwards(i){i(this.condition),i(this.body)}},yh),Bo=Re("While",null,function(n){n&&(this.condition=n.condition,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `while` statement",_walk:function(i){return i._visit(this,function(){this.condition._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),i(this.condition)}},yh),Oi=Re("For","init condition step",function(n){n&&(this.init=n.init,this.condition=n.condition,this.step=n.step,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_walk:function(i){return i._visit(this,function(){this.init&&this.init._walk(i),this.condition&&this.condition._walk(i),this.step&&this.step._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),this.step&&i(this.step),this.condition&&i(this.condition),this.init&&i(this.init)}},pr),sn=Re("ForIn","init object",function(n){n&&(this.init=n.init,this.object=n.object,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `for ... in` statement",$propdoc:{init:"[AST_Node] the `for/in` initialization code",object:"[AST_Node] the object that we're looping through"},_walk:function(i){return i._visit(this,function(){this.init._walk(i),this.object._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),this.object&&i(this.object),this.init&&i(this.init)}},pr),$s=Re("ForOf","await",function(n){n&&(this.await=n.await,this.init=n.init,this.object=n.object,this.block_scope=n.block_scope,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `for ... of` statement"},sn),Zn=Re("With","expression",function(n){n&&(this.expression=n.expression,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i),this.body._walk(i)})},_children_backwards(i){i(this.body),i(this.expression)}},ea),ht=Re("Scope","variables uses_with uses_eval parent_scope enclosed cname",function(n){n&&(this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{variables:"[Map/S] a map of name -> SymbolDef for all variables/functions defined in this scope",uses_with:"[boolean/S] tells whether this scope uses the `with` statement",uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",parent_scope:"[AST_Scope?/S] link to the parent scope",enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",cname:"[integer/S] current index for mangling variables (used internally by the mangler)"},get_defun_scope:function(){for(var i=this;i.is_block_scope();)i=i.parent_scope;return i},clone:function(i,n){var o=this._clone(i);return i&&this.variables&&n&&!this._block_scope?o.figure_out_scope({},{toplevel:n,parent_scope:this.parent_scope}):(this.variables&&(o.variables=new Map(this.variables)),this.enclosed&&(o.enclosed=this.enclosed.slice()),this._block_scope&&(o._block_scope=this._block_scope)),o},pinned:function(){return this.uses_eval||this.uses_with}},Di),si=Re("Toplevel","globals",function(n){n&&(this.globals=n.globals,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The toplevel scope",$propdoc:{globals:"[Map/S] a map of name -> SymbolDef for all undeclared names"},wrap_commonjs:function(i){var n=this.body,o="(function(exports){'$ORIG';})(typeof "+i+"=='undefined'?("+i+"={}):"+i+");";return o=ku(o),o=o.transform(new Gn(function(s){if(s instanceof Dn&&s.value=="$ORIG")return ti.splice(n)})),o},wrap_enclose:function(i){typeof i!="string"&&(i="");var n=i.indexOf(":");n<0&&(n=i.length);var o=this.body;return ku(["(function(",i.slice(0,n),'){"$ORIG"})(',i.slice(n+1),")"].join("")).transform(new Gn(function(s){if(s instanceof Dn&&s.value=="$ORIG")return ti.splice(o)}))}},ht),Nt=Re("Expansion","expression",function(n){n&&(this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An expandible argument, such as ...rest, a splat, such as [1,2,...all], or an expansion in a variable declaration, such as var [first, ...rest] = list",$propdoc:{expression:"[AST_Node] the thing to be expanded"},_walk:function(i){return i._visit(this,function(){this.expression.walk(i)})},_children_backwards(i){i(this.expression)}}),ot=Re("Lambda","name argnames uses_arguments is_generator async",function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for functions",$propdoc:{name:"[AST_SymbolDeclaration?] the name of this function",argnames:"[AST_SymbolFunarg|AST_Destructuring|AST_Expansion|AST_DefaultAssign*] array of function arguments, destructurings, or expanding arguments",uses_arguments:"[boolean/S] tells whether this function accesses the arguments array",is_generator:"[boolean] is this a generator method",async:"[boolean] is this method async"},args_as_names:function(){for(var i=[],n=0;n<this.argnames.length;n++)this.argnames[n]instanceof jt?i.push(...this.argnames[n].all_symbols()):i.push(this.argnames[n]);return i},_walk:function(i){return i._visit(this,function(){this.name&&this.name._walk(i);for(var n=this.argnames,o=0,s=n.length;o<s;o++)n[o]._walk(i);ha(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n]);for(n=this.argnames.length;n--;)i(this.argnames[n]);this.name&&i(this.name)},is_braceless(){return this.body[0]instanceof _i&&this.body[0].value},length_property(){let i=0;for(const n of this.argnames)(n instanceof Xi||n instanceof jt)&&i++;return i}},ht),Uo=Re("Accessor",null,function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A setter/getter function.  The `name` property is always null."},ot),ii=Re("Function",null,function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A function expression"},ot),di=Re("Arrow",null,function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An ES6 Arrow function ((a) => b)"},ot),fi=Re("Defun",null,function(n){n&&(this.name=n.name,this.argnames=n.argnames,this.uses_arguments=n.uses_arguments,this.is_generator=n.is_generator,this.async=n.async,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A function definition"},ot),jt=Re("Destructuring","names is_array",function(n){n&&(this.names=n.names,this.is_array=n.is_array,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A destructuring of several names. Used in destructuring assignment and with destructuring function argument names",$propdoc:{names:"[AST_Node*] Array of properties or elements",is_array:"[Boolean] Whether the destructuring represents an object or array"},_walk:function(i){return i._visit(this,function(){this.names.forEach(function(n){n._walk(i)})})},_children_backwards(i){let n=this.names.length;for(;n--;)i(this.names[n])},all_symbols:function(){var i=[];return Ki(this,n=>{if(n instanceof Wi&&i.push(n),n instanceof ot)return!0}),i}}),Cr=Re("PrefixedTemplateString","template_string prefix",function(n){n&&(this.template_string=n.template_string,this.prefix=n.prefix,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A templatestring with a prefix, such as String.raw`foobarbaz`",$propdoc:{template_string:"[AST_TemplateString] The template string",prefix:"[AST_Node] The prefix, which will get called."},_walk:function(i){return i._visit(this,function(){this.prefix._walk(i),this.template_string._walk(i)})},_children_backwards(i){i(this.template_string),i(this.prefix)}}),mn=Re("TemplateString","segments",function(n){n&&(this.segments=n.segments,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A template string literal",$propdoc:{segments:"[AST_Node*] One or more segments, starting with AST_TemplateSegment. AST_Node may follow AST_TemplateSegment, but each AST_Node must be followed by AST_TemplateSegment."},_walk:function(i){return i._visit(this,function(){this.segments.forEach(function(n){n._walk(i)})})},_children_backwards(i){let n=this.segments.length;for(;n--;)i(this.segments[n])}}),fo=Re("TemplateSegment","value raw",function(n){n&&(this.value=n.value,this.raw=n.raw,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A segment of a template string literal",$propdoc:{value:"Content of the segment",raw:"Raw source of the segment"}}),Fu=Re("Jump",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)"},Yi),xn=Re("Exit","value",function(n){n&&(this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_walk:function(i){return i._visit(this,this.value&&function(){this.value._walk(i)})},_children_backwards(i){this.value&&i(this.value)}},Fu),_i=Re("Return",null,function(n){n&&(this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `return` statement"},xn),Lu=Re("Throw",null,function(n){n&&(this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `throw` statement"},xn),Vr=Re("LoopControl","label",function(n){n&&(this.label=n.label,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_walk:function(i){return i._visit(this,this.label&&function(){this.label._walk(i)})},_children_backwards(i){this.label&&i(this.label)}},Fu),fr=Re("Break",null,function(n){n&&(this.label=n.label,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `break` statement"},Vr),Es=Re("Continue",null,function(n){n&&(this.label=n.label,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `continue` statement"},Vr),Qn=Re("Await","expression",function(n){n&&(this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An `await` statement",$propdoc:{expression:"[AST_Node] the mandatory expression being awaited"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}}),er=Re("Yield","expression is_star",function(n){n&&(this.expression=n.expression,this.is_star=n.is_star,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `yield` statement",$propdoc:{expression:"[AST_Node?] the value returned or thrown by this statement; could be null (representing undefined) but only when is_star is set to false",is_star:"[Boolean] Whether this is a yield or yield* statement"},_walk:function(i){return i._visit(this,this.expression&&function(){this.expression._walk(i)})},_children_backwards(i){this.expression&&i(this.expression)}}),Yt=Re("If","condition alternative",function(n){n&&(this.condition=n.condition,this.alternative=n.alternative,this.body=n.body,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_walk:function(i){return i._visit(this,function(){this.condition._walk(i),this.body._walk(i),this.alternative&&this.alternative._walk(i)})},_children_backwards(i){this.alternative&&i(this.alternative),i(this.body),i(this.condition)}},ea),gn=Re("Switch","expression",function(n){n&&(this.expression=n.expression,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i),ha(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n]);i(this.expression)}},Di),Vo=Re("SwitchBranch",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for `switch` branches"},Di),_a=Re("Default",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `default` switch branch"},Vo),Hr=Re("Case","expression",function(n){n&&(this.expression=n.expression,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i),ha(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n]);i(this.expression)}},Vo),nr=Re("Try","body bcatch bfinally",function(n){n&&(this.body=n.body,this.bcatch=n.bcatch,this.bfinally=n.bfinally,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `try` statement",$propdoc:{body:"[AST_TryBlock] the try block",bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_walk:function(i){return i._visit(this,function(){this.body._walk(i),this.bcatch&&this.bcatch._walk(i),this.bfinally&&this.bfinally._walk(i)})},_children_backwards(i){this.bfinally&&i(this.bfinally),this.bcatch&&i(this.bcatch),i(this.body)}},Yi),Rh=Re("TryBlock",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `try` block of a try statement"},Di),Eo=Re("Catch","argname",function(n){n&&(this.argname=n.argname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[AST_SymbolCatch|AST_Destructuring|AST_Expansion|AST_DefaultAssign] symbol for the exception"},_walk:function(i){return i._visit(this,function(){this.argname&&this.argname._walk(i),ha(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n]);this.argname&&i(this.argname)}},Di),dl=Re("Finally",null,function(n){n&&(this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},Di),Un=Re("DefinitionsLike","definitions",function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for variable definitions and `using`",$propdoc:{definitions:"[AST_VarDef*|AST_UsingDef*] array of variable definitions"},_walk:function(i){return i._visit(this,function(){for(var n=this.definitions,o=0,s=n.length;o<s;o++)n[o]._walk(i)})},_children_backwards(i){let n=this.definitions.length;for(;n--;)i(this.definitions[n])}},Yi),In=Re("Definitions",null,function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for `var` or `const` nodes (variable declarations/initializations)"},Un),Ei=Re("Var",null,function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `var` statement"},In),oa=Re("Let",null,function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `let` statement"},In),sa=Re("Const",null,function(n){n&&(this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `const` statement"},In),qn=Re("Using","await",function(n){n&&(this.await=n.await,this.definitions=n.definitions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `using` statement",$propdoc:{await:"[boolean] Whether it's `await using`"}},Un),Ho=Re("VarDefLike","name value",function(n){n&&(this.name=n.name,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A name=value pair in a variable definition statement or `using`",$propdoc:{name:"[AST_Destructuring|AST_SymbolDeclaration] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_walk:function(i){return i._visit(this,function(){this.name._walk(i),this.value&&this.value._walk(i)})},_children_backwards(i){this.value&&i(this.value),i(this.name)},declarations_as_names(){return this.name instanceof Wi?[this.name]:this.name.all_symbols()}}),vi=Re("VarDef",null,function(n){n&&(this.name=n.name,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A variable declaration; only appears in a AST_Definitions node"},Ho),mh=Re("UsingDef",null,function(n){n&&(this.name=n.name,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Like VarDef but specific to AST_Using"},Ho),Br=Re("NameMapping","foreign_name name",function(n){n&&(this.foreign_name=n.foreign_name,this.name=n.name,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The part of the export/import statement that declare names from a module.",$propdoc:{foreign_name:"[AST_SymbolExportForeign|AST_SymbolImportForeign] The name being exported/imported (as specified in the module)",name:"[AST_SymbolExport|AST_SymbolImport] The name as it is visible to this module."},_walk:function(i){return i._visit(this,function(){this.foreign_name._walk(i),this.name._walk(i)})},_children_backwards(i){i(this.name),i(this.foreign_name)}}),gr=Re("Import","imported_name imported_names module_name attributes",function(n){n&&(this.imported_name=n.imported_name,this.imported_names=n.imported_names,this.module_name=n.module_name,this.attributes=n.attributes,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An `import` statement",$propdoc:{imported_name:"[AST_SymbolImport] The name of the variable holding the module's default export.",imported_names:"[AST_NameMapping*] The names of non-default imported variables",module_name:"[AST_String] String literal describing where this module came from",attributes:"[AST_Object?] The import attributes (with {...})"},_walk:function(i){return i._visit(this,function(){this.imported_name&&this.imported_name._walk(i),this.imported_names&&this.imported_names.forEach(function(n){n._walk(i)}),this.module_name._walk(i)})},_children_backwards(i){if(i(this.module_name),this.imported_names){let n=this.imported_names.length;for(;n--;)i(this.imported_names[n])}this.imported_name&&i(this.imported_name)}}),Go=Re("ImportMeta",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A reference to import.meta"}),ki=Re("Export","exported_definition exported_value is_default exported_names module_name attributes",function(n){n&&(this.exported_definition=n.exported_definition,this.exported_value=n.exported_value,this.is_default=n.is_default,this.exported_names=n.exported_names,this.module_name=n.module_name,this.attributes=n.attributes,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An `export` statement",$propdoc:{exported_definition:"[AST_Defun|AST_Definitions|AST_DefClass?] An exported definition",exported_value:"[AST_Node?] An exported value",exported_names:"[AST_NameMapping*?] List of exported names",module_name:"[AST_String?] Name of the file to load exports from",is_default:"[Boolean] Whether this is the default exported value of this module",attributes:"[AST_Object?] The import attributes"},_walk:function(i){return i._visit(this,function(){this.exported_definition&&this.exported_definition._walk(i),this.exported_value&&this.exported_value._walk(i),this.exported_names&&this.exported_names.forEach(function(n){n._walk(i)}),this.module_name&&this.module_name._walk(i)})},_children_backwards(i){if(this.module_name&&i(this.module_name),this.exported_names){let n=this.exported_names.length;for(;n--;)i(this.exported_names[n])}this.exported_value&&i(this.exported_value),this.exported_definition&&i(this.exported_definition)}},Yi),Qe=Re("Call","expression args optional _annotations",function(n){n&&(this.expression=n.expression,this.args=n.args,this.optional=n.optional,this._annotations=n._annotations,this.start=n.start,this.end=n.end,this.initialize()),this.flags=0},{$documentation:"A function call expression",$propdoc:{expression:"[AST_Node] expression to invoke as function",args:"[AST_Node*] array of arguments",optional:"[boolean] whether this is an optional call (IE ?.() )",_annotations:"[number] bitfield containing information about the call"},initialize(){this._annotations==null&&(this._annotations=0)},_walk(i){return i._visit(this,function(){for(var n=this.args,o=0,s=n.length;o<s;o++)n[o]._walk(i);this.expression._walk(i)})},_children_backwards(i){let n=this.args.length;for(;n--;)i(this.args[n]);i(this.expression)}}),yn=Re("New",null,function(n){n&&(this.expression=n.expression,this.args=n.args,this.optional=n.optional,this._annotations=n._annotations,this.start=n.start,this.end=n.end,this.initialize()),this.flags=0},{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties"},Qe),Ct=Re("Sequence","expressions",function(n){n&&(this.expressions=n.expressions,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},_walk:function(i){return i._visit(this,function(){this.expressions.forEach(function(n){n._walk(i)})})},_children_backwards(i){let n=this.expressions.length;for(;n--;)i(this.expressions[n])}}),lt=Re("PropAccess","expression property optional",function(n){n&&(this.expression=n.expression,this.property=n.property,this.optional=n.optional,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",property:"[AST_Node|string] the property to access.  For AST_Dot & AST_DotHash this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",optional:"[boolean] whether this is an optional property access (IE ?.)"}}),ni=Re("Dot","quote",function(n){n&&(this.quote=n.quote,this.expression=n.expression,this.property=n.property,this.optional=n.optional,this._annotations=n._annotations,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A dotted property access expression",$propdoc:{quote:"[string] the original quote character when transformed from AST_Sub"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}},lt),mr=Re("DotHash","",function(n){n&&(this.expression=n.expression,this.property=n.property,this.optional=n.optional,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A dotted property access to a private property",_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}},lt),Li=Re("Sub",null,function(n){n&&(this.expression=n.expression,this.property=n.property,this.optional=n.optional,this._annotations=n._annotations,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:'Index-style property access, i.e. `a["foo"]`',_walk:function(i){return i._visit(this,function(){this.expression._walk(i),this.property._walk(i)})},_children_backwards(i){i(this.property),i(this.expression)}},lt),Ci=Re("Chain","expression",function(n){n&&(this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A chain expression like a?.b?.(c)?.[d]",$propdoc:{expression:"[AST_Call|AST_Dot|AST_DotHash|AST_Sub] chain element."},_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}}),Jt=Re("Unary","operator expression",function(n){n&&(this.operator=n.operator,this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_walk:function(i){return i._visit(this,function(){this.expression._walk(i)})},_children_backwards(i){i(this.expression)}}),ut=Re("UnaryPrefix",null,function(n){n&&(this.operator=n.operator,this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},Jt),Yo=Re("UnaryPostfix",null,function(n){n&&(this.operator=n.operator,this.expression=n.expression,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Unary postfix expression, i.e. `i++`"},Jt),Oe=Re("Binary","operator left right",function(n){n&&(this.operator=n.operator,this.left=n.left,this.right=n.right,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_walk:function(i){return i._visit(this,function(){this.left._walk(i),this.right._walk(i)})},_children_backwards(i){i(this.right),i(this.left)}}),It=Re("Conditional","condition consequent alternative",function(n){n&&(this.condition=n.condition,this.consequent=n.consequent,this.alternative=n.alternative,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_walk:function(i){return i._visit(this,function(){this.condition._walk(i),this.consequent._walk(i),this.alternative._walk(i)})},_children_backwards(i){i(this.alternative),i(this.consequent),i(this.condition)}}),Ot=Re("Assign","logical",function(n){n&&(this.logical=n.logical,this.operator=n.operator,this.left=n.left,this.right=n.right,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An assignment expression — `a = b + 5`",$propdoc:{logical:"Whether it's a logical assignment"}},Oe),fn=Re("DefaultAssign",null,function(n){n&&(this.operator=n.operator,this.left=n.left,this.right=n.right,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A default assignment expression like in `(a = 3) => a`"},Oe),Ut=Re("Array","elements",function(n){n&&(this.elements=n.elements,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_walk:function(i){return i._visit(this,function(){for(var n=this.elements,o=0,s=n.length;o<s;o++)n[o]._walk(i)})},_children_backwards(i){let n=this.elements.length;for(;n--;)i(this.elements[n])}}),Wt=Re("Object","properties",function(n){n&&(this.properties=n.properties,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An object literal",$propdoc:{properties:"[AST_ObjectProperty*] array of properties"},_walk:function(i){return i._visit(this,function(){for(var n=this.properties,o=0,s=n.length;o<s;o++)n[o]._walk(i)})},_children_backwards(i){let n=this.properties.length;for(;n--;)i(this.properties[n])}}),Ti=Re("ObjectProperty","key value",function(n){n&&(this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name. For ObjectKeyVal this is a string. For getters, setters and computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters, setters and methods this is an AST_Accessor."},_walk:function(i){return i._visit(this,function(){this.key instanceof He&&this.key._walk(i),this.value._walk(i)})},_children_backwards(i){i(this.value),this.key instanceof He&&i(this.key)}}),Zt=Re("ObjectKeyVal","quote",function(n){n&&(this.quote=n.quote,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$documentation:"A key: value object property",$propdoc:{quote:"[string] the original quote character"},computed_key(){return this.key instanceof He}},Ti),$r=Re("PrivateSetter","static",function(n){n&&(this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$propdoc:{static:"[boolean] whether this is a static private setter"},$documentation:"A private setter property",computed_key(){return!1}},Ti),tr=Re("PrivateGetter","static",function(n){n&&(this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$propdoc:{static:"[boolean] whether this is a static private getter"},$documentation:"A private getter property",computed_key(){return!1}},Ti),Gr=Re("ObjectSetter","quote static",function(n){n&&(this.quote=n.quote,this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] whether this is a static setter (classes only)"},$documentation:"An object setter property",computed_key(){return!(this.key instanceof nn)}},Ti),yr=Re("ObjectGetter","quote static",function(n){n&&(this.quote=n.quote,this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] whether this is a static getter (classes only)"},$documentation:"An object getter property",computed_key(){return!(this.key instanceof nn)}},Ti),an=Re("ConciseMethod","quote static",function(n){n&&(this.quote=n.quote,this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$propdoc:{quote:"[string|undefined] the original quote character, if any",static:"[boolean] is this method static (classes only)"},$documentation:"An ES6 concise method inside an object or class",computed_key(){return!(this.key instanceof nn)}},Ti),Xn=Re("PrivateMethod","static",function(n){n&&(this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A private class method inside a class",$propdoc:{static:"[boolean] is this a static private method"},computed_key(){return!1}},Ti),Mt=Re("Class","name extends properties",function(n){n&&(this.name=n.name,this.extends=n.extends,this.properties=n.properties,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$propdoc:{name:"[AST_SymbolClass|AST_SymbolDefClass?] optional class name.",extends:"[AST_Node]? optional parent class",properties:"[AST_ObjectProperty|AST_ClassStaticBlock]* array of properties or static blocks"},$documentation:"An ES6 class",_walk:function(i){return i._visit(this,function(){this.name&&this.name._walk(i),this.extends&&this.extends._walk(i),this.properties.forEach(n=>n._walk(i))})},_children_backwards(i){let n=this.properties.length;for(;n--;)i(this.properties[n]);this.extends&&i(this.extends),this.name&&i(this.name)},visit_nondeferred_class_parts(i){this.extends&&this.extends._walk(i),this.properties.forEach(n=>{if(n instanceof En){n._walk(i);return}n.computed_key()&&(i.push(n),n.key._walk(i),i.pop()),(n instanceof Kn&&n.static&&n.value||n instanceof ir&&n.static&&n.value)&&(i.push(n),n.value._walk(i),i.pop())})},visit_deferred_class_parts(i){this.properties.forEach(n=>{n instanceof an||n instanceof Xn?n.walk(i):(n instanceof ir&&!n.static&&n.value||n instanceof Kn&&!n.static&&n.value)&&(i.push(n),n.value._walk(i),i.pop())})},is_self_referential:function(){const i=this.name&&this.name.definition().id;let n=!1,o=!0;return this.visit_nondeferred_class_parts(new Zi((s,l)=>{if(n)return!0;if(s instanceof ln)return n=o;if(s instanceof Ge)return n=s.definition().id===i;if(s instanceof ot&&!(s instanceof di)){const p=o;return o=!1,l(),o=p,!0}})),n}},ht),ir=Re("ClassProperty","static quote",function(n){n&&(this.static=n.static,this.quote=n.quote,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$documentation:"A class property",$propdoc:{static:"[boolean] whether this is a static key",quote:"[string] which quote is being used"},_walk:function(i){return i._visit(this,function(){this.key instanceof He&&this.key._walk(i),this.value instanceof He&&this.value._walk(i)})},_children_backwards(i){this.value instanceof He&&i(this.value),this.key instanceof He&&i(this.key)},computed_key(){return!(this.key instanceof Xo)}},Ti),Kn=Re("ClassPrivateProperty","",function(n){n&&(this.static=n.static,this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A class property for a private property",_walk:function(i){return i._visit(this,function(){this.value instanceof He&&this.value._walk(i)})},_children_backwards(i){this.value instanceof He&&i(this.value)},computed_key(){return!1}},Ti),Ar=Re("PrivateIn","key value",function(n){n&&(this.key=n.key,this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"An `in` binop when the key is private, eg #x in this",_walk:function(i){return i._visit(this,function(){this.key._walk(i),this.value._walk(i)})},_children_backwards(i){i(this.value),i(this.key)}}),Or=Re("DefClass",null,function(n){n&&(this.name=n.name,this.extends=n.extends,this.properties=n.properties,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A class definition"},Mt),En=Re("ClassStaticBlock","body block_scope",function(n){this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end},{$documentation:"A block containing statements to be executed in the context of the class",$propdoc:{body:"[AST_Statement*] an array of statements"},_walk:function(i){return i._visit(this,function(){ha(this,i)})},_children_backwards(i){let n=this.body.length;for(;n--;)i(this.body[n])},clone:hm,computed_key(){return!1}},ht),go=Re("ClassExpression",null,function(n){n&&(this.name=n.name,this.extends=n.extends,this.properties=n.properties,this.variables=n.variables,this.uses_with=n.uses_with,this.uses_eval=n.uses_eval,this.parent_scope=n.parent_scope,this.enclosed=n.enclosed,this.cname=n.cname,this.body=n.body,this.block_scope=n.block_scope,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A class expression."},Mt),Ft=Re("Symbol","scope name thedef",function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},$documentation:"Base class for all symbols"}),hl=Re("NewTarget",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A reference to new.target"}),Wi=Re("SymbolDeclaration","init",function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A declaration symbol (symbol in var/const, function name or argument, symbol in catch)"},Ft),Wo=Re("SymbolVar",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol defining a variable"},Wi),mo=Re("SymbolBlockDeclaration",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for block-scoped declaration symbols"},Wi),Ts=Re("SymbolConst",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A constant declaration"},mo),bs=Re("SymbolUsing",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A `using` declaration"},mo),_l=Re("SymbolLet",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A block-scoped `let` declaration"},mo),Xi=Re("SymbolFunarg",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming a function argument"},Wo),To=Re("SymbolDefun",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol defining a function"},Wi),nn=Re("SymbolMethod",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol in an object defining a method"},Ft),Xo=Re("SymbolClassProperty",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol for a class property"},Ft),Kr=Re("SymbolLambda",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming a function expression"},Wi),Nh=Re("SymbolDefClass",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming a class's name in a class declaration. Lexically scoped to its containing scope, and accessible within the class."},mo),Dh=Re("SymbolClass",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming a class's name. Lexically scoped to the class."},Wi),Rr=Re("SymbolCatch",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol naming the exception in catch"},mo),hs=Re("SymbolImport",null,function(n){n&&(this.init=n.init,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol referring to an imported name"},mo),ul=Re("SymbolImportForeign","quote",function(n){n&&(this.quote=n.quote,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A symbol imported from a module, but it is defined in the other module, and its real name is irrelevant for this module's purposes"},Ft),Pu=Re("Label","references",function(n){n&&(this.references=n.references,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end,this.initialize()),this.flags=0},{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},Ft),Ge=Re("SymbolRef",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Reference to some symbol (not definition/declaration)"},Ft),ta=Re("SymbolExport","quote",function(n){n&&(this.quote=n.quote,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Symbol referring to a name to export"},Ge),_s=Re("SymbolExportForeign","quote",function(n){n&&(this.quote=n.quote,this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A symbol exported from this module, but it is used in the other module, and its real name is irrelevant for this module's purposes"},Ft),_m=Re("LabelRef",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Reference to a label symbol"},Ft),pl=Re("SymbolPrivateProperty",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A symbol that refers to a private property"},Ft),ln=Re("This",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `this` symbol"},Ft),fl=Re("Super",null,function(n){n&&(this.scope=n.scope,this.name=n.name,this.thedef=n.thedef,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `super` symbol"},ln),Gt=Re("Constant",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for all constants",getValue:function(){return this.value}}),wt=Re("String","value quote",function(n){n&&(this.value=n.value,this.quote=n.quote,this.start=n.start,this.end=n.end,this._annotations=n._annotations),this.flags=0},{$documentation:"A string literal",$propdoc:{value:"[string] the contents of this string",quote:"[string] the original quote character"}},Gt),Tt=Re("Number","value raw",function(n){n&&(this.value=n.value,this.raw=n.raw,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value",raw:"[string] numeric value as string"}},Gt),Dr=Re("BigInt","value raw",function(n){n&&(this.value=n.value,this.raw=n.raw,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A big int literal",$propdoc:{value:"[string] big int value, represented as a string",raw:"[string] the original format preserved"}},Gt),Vn=Re("RegExp","value",function(n){n&&(this.value=n.value,this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"}},Gt),vs=Re("Atom",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for atoms"},Gt),Fn=Re("Null",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `null` atom",value:null},vs),Bu=Re("NaN",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The impossible value",value:NaN},vs),Tl=Re("Undefined",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `undefined` value",value:(function(){})()},vs),Pn=Re("Hole",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"A hole in an array",value:(function(){})()},vs),Ss=Re("Infinity",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `Infinity` value",value:1/0},vs),kh=Re("Boolean",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"Base class for booleans"},vs),Ko=Re("False",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `false` atom",value:!1},kh),Jn=Re("True",null,function(n){n&&(this.start=n.start,this.end=n.end),this.flags=0},{$documentation:"The `true` atom",value:!0},kh);function Ki(i,n,o=[i]){const s=o.push.bind(o);for(;o.length;){const l=o.pop(),p=n(l,o);if(p){if(p===Hn)return!0;continue}l._children_backwards(s)}return!1}function pm(i,n,o){const s=[i],l=s.push.bind(s),p=o?o.slice():[],E=[];let $;const R={parent:(M=0)=>M===-1?$:o&&M>=p.length?(M-=p.length,o[o.length-(M+1)]):p[p.length-(1+M)]};for(;s.length;){for($=s.pop();E.length&&s.length==E[E.length-1];)p.pop(),E.pop();const M=n($,R);if(M){if(M===Hn)return!0;continue}const L=s.length;$._children_backwards(l),s.length>L&&(p.push($),E.push(L-1))}return!1}const Hn=Symbol("abort walk");class Zi{constructor(n){this.visit=n,this.stack=[],this.directives=Object.create(null)}_visit(n,o){this.push(n);var s=this.visit(n,o?function(){o.call(n)}:Yn);return!s&&o&&o.call(n),this.pop(),s}parent(n){return this.stack[this.stack.length-2-(n||0)]}push(n){n instanceof ot?this.directives=Object.create(this.directives):n instanceof Dn&&!this.directives[n.value]?this.directives[n.value]=n:n instanceof Mt&&(this.directives=Object.create(this.directives),this.directives["use strict"]||(this.directives["use strict"]=n)),this.stack.push(n)}pop(){var n=this.stack.pop();(n instanceof ot||n instanceof Mt)&&(this.directives=Object.getPrototypeOf(this.directives))}self(){return this.stack[this.stack.length-1]}find_parent(n){for(var o=this.stack,s=o.length;--s>=0;){var l=o[s];if(l instanceof n)return l}}is_within_loop(){let n=this.stack.length-1,o=this.stack[n];for(;n--;){const s=this.stack[n];if(s instanceof ot)return!1;if(s instanceof pr&&!(s instanceof Oi&&o===s.init)&&!((s instanceof sn||s instanceof $s)&&o===s.object))return!0;o=s}return!1}find_scope(){for(var n=this.stack,o=n.length;--o>=0;){const s=n[o];if(s instanceof si||s instanceof ot)return s;if(s.block_scope)return s.block_scope}}has_directive(n){var o=this.directives[n];if(o)return o;var s=this.stack[this.stack.length-1];if(s instanceof ht&&s.body)for(var l=0;l<s.body.length;++l){var p=s.body[l];if(!(p instanceof Dn))break;if(p.value==n)return p}}loopcontrol_target(n){var o=this.stack;if(n.label)for(var s=o.length;--s>=0;){var l=o[s];if(l instanceof $n&&l.label.name==n.label.name)return l.body}else for(var s=o.length;--s>=0;){var l=o[s];if(l instanceof pr||n instanceof fr&&l instanceof gn)return l}}}class Gn extends Zi{constructor(n,o){super(),this.before=n,this.after=o}}const fm=1,zd=2,aa=4,am=8,vu=16;function Pt(i,n){i.DEFMETHOD("transform",function(o,s){let l;if(o.push(this),o.before&&(l=o.before(this,n,s)),l===void 0&&(l=this,n(l,o),o.after)){const p=o.after(l,s);p!==void 0&&(l=p)}return o.pop(),l})}Pt(He,Yn);Pt($n,function(i,n){i.label=i.label.transform(n),i.body=i.body.transform(n)});Pt(rt,function(i,n){i.body=i.body.transform(n)});Pt(Di,function(i,n){i.body=ti(i.body,n)});Pt($o,function(i,n){i.body=i.body.transform(n),i.condition=i.condition.transform(n)});Pt(Bo,function(i,n){i.condition=i.condition.transform(n),i.body=i.body.transform(n)});Pt(Oi,function(i,n){i.init&&(i.init=i.init.transform(n)),i.condition&&(i.condition=i.condition.transform(n)),i.step&&(i.step=i.step.transform(n)),i.body=i.body.transform(n)});Pt(sn,function(i,n){i.init=i.init.transform(n),i.object=i.object.transform(n),i.body=i.body.transform(n)});Pt(Zn,function(i,n){i.expression=i.expression.transform(n),i.body=i.body.transform(n)});Pt(xn,function(i,n){i.value&&(i.value=i.value.transform(n))});Pt(Vr,function(i,n){i.label&&(i.label=i.label.transform(n))});Pt(Yt,function(i,n){i.condition=i.condition.transform(n),i.body=i.body.transform(n),i.alternative&&(i.alternative=i.alternative.transform(n))});Pt(gn,function(i,n){i.expression=i.expression.transform(n),i.body=ti(i.body,n)});Pt(Hr,function(i,n){i.expression=i.expression.transform(n),i.body=ti(i.body,n)});Pt(nr,function(i,n){i.body=i.body.transform(n),i.bcatch&&(i.bcatch=i.bcatch.transform(n)),i.bfinally&&(i.bfinally=i.bfinally.transform(n))});Pt(Eo,function(i,n){i.argname&&(i.argname=i.argname.transform(n)),i.body=ti(i.body,n)});Pt(Un,function(i,n){i.definitions=ti(i.definitions,n)});Pt(Ho,function(i,n){i.name=i.name.transform(n),i.value&&(i.value=i.value.transform(n))});Pt(jt,function(i,n){i.names=ti(i.names,n)});Pt(ot,function(i,n){i.name&&(i.name=i.name.transform(n)),i.argnames=ti(i.argnames,n,!1),i.body instanceof He?i.body=i.body.transform(n):i.body=ti(i.body,n)});Pt(Qe,function(i,n){i.expression=i.expression.transform(n),i.args=ti(i.args,n,!1)});Pt(Ct,function(i,n){const o=ti(i.expressions,n);i.expressions=o.length?o:[new Tt({value:0})]});Pt(lt,function(i,n){i.expression=i.expression.transform(n)});Pt(Li,function(i,n){i.expression=i.expression.transform(n),i.property=i.property.transform(n)});Pt(Ci,function(i,n){i.expression=i.expression.transform(n)});Pt(er,function(i,n){i.expression&&(i.expression=i.expression.transform(n))});Pt(Qn,function(i,n){i.expression=i.expression.transform(n)});Pt(Jt,function(i,n){i.expression=i.expression.transform(n)});Pt(Oe,function(i,n){i.left=i.left.transform(n),i.right=i.right.transform(n)});Pt(Ar,function(i,n){i.key=i.key.transform(n),i.value=i.value.transform(n)});Pt(It,function(i,n){i.condition=i.condition.transform(n),i.consequent=i.consequent.transform(n),i.alternative=i.alternative.transform(n)});Pt(Ut,function(i,n){i.elements=ti(i.elements,n)});Pt(Wt,function(i,n){i.properties=ti(i.properties,n)});Pt(Ti,function(i,n){i.key instanceof He&&(i.key=i.key.transform(n)),i.value&&(i.value=i.value.transform(n))});Pt(Mt,function(i,n){i.name&&(i.name=i.name.transform(n)),i.extends&&(i.extends=i.extends.transform(n)),i.properties=ti(i.properties,n)});Pt(En,function(i,n){i.body=ti(i.body,n)});Pt(Nt,function(i,n){i.expression=i.expression.transform(n)});Pt(Br,function(i,n){i.foreign_name=i.foreign_name.transform(n),i.name=i.name.transform(n)});Pt(gr,function(i,n){i.imported_name&&(i.imported_name=i.imported_name.transform(n)),i.imported_names&&ti(i.imported_names,n),i.module_name=i.module_name.transform(n)});Pt(ki,function(i,n){i.exported_definition&&(i.exported_definition=i.exported_definition.transform(n)),i.exported_value&&(i.exported_value=i.exported_value.transform(n)),i.exported_names&&ti(i.exported_names,n),i.module_name&&(i.module_name=i.module_name.transform(n))});Pt(mn,function(i,n){i.segments=ti(i.segments,n)});Pt(Cr,function(i,n){i.prefix=i.prefix.transform(n),i.template_string=i.template_string.transform(n)});(function(){var i=function(f){for(var I=0;I<f.length;I++)if(f[I]instanceof Yi&&f[I].body instanceof wt)f[I]=new Dn({start:f[I].start,end:f[I].end,quote:'"',value:f[I].body.value});else return f;return f};function n(f){return f&&f.length>0?new Wt({start:l(f),end:p(f),properties:f.map(I=>new Zt({start:l(I),end:p(I),key:I.key.name||I.key.value,value:$(I.value)}))}):null}var o={Program:function(f){return new si({start:l(f),end:p(f),body:i(f.body.map($))})},ArrayPattern:function(f){return new jt({start:l(f),end:p(f),names:f.elements.map(function(I){return I===null?new Pn:$(I)}),is_array:!0})},ObjectPattern:function(f){return new jt({start:l(f),end:p(f),names:f.properties.map($),is_array:!1})},AssignmentPattern:function(f){return new fn({start:l(f),end:p(f),left:$(f.left),operator:"=",right:$(f.right)})},SpreadElement:function(f){return new Nt({start:l(f),end:p(f),expression:$(f.argument)})},RestElement:function(f){return new Nt({start:l(f),end:p(f),expression:$(f.argument)})},TemplateElement:function(f){return new fo({start:l(f),end:p(f),value:f.value.cooked,raw:f.value.raw})},TemplateLiteral:function(f){for(var I=[],D=0;D<f.quasis.length;D++)I.push($(f.quasis[D])),f.expressions[D]&&I.push($(f.expressions[D]));return new mn({start:l(f),end:p(f),segments:I})},TaggedTemplateExpression:function(f){return new Cr({start:l(f),end:p(f),template_string:$(f.quasi),prefix:$(f.tag)})},FunctionDeclaration:function(f){return new fi({start:l(f),end:p(f),name:f.id&&M(To,f.id),argnames:f.params.map(I=>y(I,Xi)),is_generator:f.generator,async:f.async,body:i($(f.body).body)})},FunctionExpression:function(f){return L(f,!1)},ArrowFunctionExpression:function(f){const I=f.body.type==="BlockStatement"?$(f.body).body:[j(_i,{},{value:$(f.body)})];return new di({start:l(f),end:p(f),argnames:f.params.map(D=>y(D,Xi)),body:I,async:f.async})},ExpressionStatement:function(f){return new rt({start:l(f),end:p(f),body:$(f.expression)})},TryStatement:function(f){var I=f.handlers||[f.handler];if(I.length>1||f.guardedHandlers&&f.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new nr({start:l(f),end:p(f),body:new Rh($(f.block)),bcatch:$(I[0]),bfinally:f.finalizer?new dl($(f.finalizer)):null})},Property:function(f){if(f.kind=="init"&&!f.method){var I={start:l(f.key||f.value),end:p(f.value),key:f.computed?$(f.key):f.key.name||String(f.key.value),quote:R(f.key,f.computed),static:!1,value:$(f.value)};return new Zt(I)}else{var D=L(f.value,!0),I={start:l(f.key||f.value),end:p(f.value),key:f.computed?$(f.key):M(nn,f.key),quote:R(f.key,f.computed),static:!1,value:D};if(f.kind=="get")return new yr(I);if(f.kind=="set")return new Gr(I);if(f.method)return new an(I)}},MethodDefinition:function(f){const I=f.key.type==="PrivateIdentifier",D=f.computed?$(f.key):new nn({name:f.key.name||String(f.key.value)});var U={start:l(f),end:p(f),key:D,quote:R(f.key,f.computed),value:L(f.value,!0),static:f.static};return f.kind=="get"?new(I?tr:yr)(U):f.kind=="set"?new(I?$r:Gr)(U):new(I?Xn:an)(U)},FieldDefinition:function(f){let I;if(f.computed)I=$(f.key);else{if(f.key.type!=="Identifier")throw new Error("Non-Identifier key in FieldDefinition");I=$(f.key)}return new ir({start:l(f),end:p(f),quote:R(f.key,f.computed),key:I,value:$(f.value),static:f.static})},PropertyDefinition:function(f){let I;if(f.computed)I=$(f.key);else{if(f.key.type==="PrivateIdentifier")return new Kn({start:l(f),end:p(f),key:$(f.key),value:$(f.value),static:f.static});I=M(Xo,f.key)}return new ir({start:l(f),end:p(f),quote:R(f.key,f.computed),key:I,value:$(f.value),static:f.static})},PrivateIdentifier:function(f){return new pl({start:l(f),end:p(f),name:f.name})},StaticBlock:function(f){return new En({start:l(f),end:p(f),body:f.body.map($)})},ArrayExpression:function(f){return new Ut({start:l(f),end:p(f),elements:f.elements.map(function(I){return I===null?new Pn:$(I)})})},ObjectExpression:function(f){return new Wt({start:l(f),end:p(f),properties:f.properties.map(function(I){return I.type==="SpreadElement"||(I.type="Property"),$(I)})})},SequenceExpression:function(f){return new Ct({start:l(f),end:p(f),expressions:f.expressions.map($)})},MemberExpression:function(f){return f.property.type==="PrivateIdentifier"?new mr({start:l(f),end:p(f),property:f.property.name,expression:$(f.object),optional:f.optional||!1}):new(f.computed?Li:ni)({start:l(f),end:p(f),property:f.computed?$(f.property):f.property.name,expression:$(f.object),optional:f.optional||!1})},ChainExpression:function(f){return new Ci({start:l(f),end:p(f),expression:$(f.expression)})},SwitchCase:function(f){return new(f.test?Hr:_a)({start:l(f),end:p(f),expression:$(f.test),body:f.consequent.map($)})},VariableDeclaration:function(f){let I,D=vi,U,O=!1;f.kind==="const"?(I=sa,U=Ts):f.kind==="let"?(I=oa,U=_l):f.kind==="using"?(I=qn,D=mh,U=bs):f.kind==="await using"?(I=qn,D=mh,U=bs,O=!0):(I=Ei,U=Wo);const X=f.declarations.map(W=>new D({start:l(W),end:p(W),name:y(W.id,U),value:$(W.init)}));return new I({start:l(f),end:p(f),definitions:X,await:O})},ImportDeclaration:function(f){var I=null,D=null;return f.specifiers.forEach(function(U){U.type==="ImportSpecifier"||U.type==="ImportNamespaceSpecifier"?(D||(D=[]),D.push($(U))):U.type==="ImportDefaultSpecifier"&&(I=$(U))}),new gr({start:l(f),end:p(f),imported_name:I,imported_names:D,module_name:$(f.source),attributes:n(f.attributes||f.assertions)})},ImportSpecifier:function(f){return new Br({start:l(f),end:p(f),foreign_name:M(ul,f.imported,f.imported.type==="Literal"),name:M(hs,f.local)})},ImportDefaultSpecifier:function(f){return M(hs,f.local)},ImportNamespaceSpecifier:function(f){return new Br({start:l(f),end:p(f),foreign_name:new ul({name:"*"}),name:M(hs,f.local)})},ImportExpression:function(f){const I=[$(f.source)];return f.options&&I.push($(f.options)),new Qe({start:l(f),end:p(f),expression:$({type:"Identifier",name:"import"}),optional:!1,args:I})},ExportAllDeclaration:function(f){var I=f.exported==null?new _s({name:"*"}):M(_s,f.exported,f.exported.type==="Literal");return new ki({start:l(f),end:p(f),exported_names:[new Br({start:l(f),end:p(f),name:new ta({name:"*"}),foreign_name:I})],module_name:$(f.source),attributes:n(f.attributes||f.assertions)})},ExportNamedDeclaration:function(f){return f.declaration?new ki({start:l(f),end:p(f),exported_definition:$(f.declaration),exported_names:null,module_name:null,attributes:null}):new ki({start:l(f),end:p(f),exported_definition:null,exported_names:f.specifiers&&f.specifiers.length?f.specifiers.map($):[],module_name:$(f.source),attributes:n(f.attributes||f.assertions)})},ExportDefaultDeclaration:function(f){return new ki({start:l(f),end:p(f),exported_value:$(f.declaration),is_default:!0})},ExportSpecifier:function(f){return new Br({start:l(f),end:p(f),foreign_name:M(_s,f.exported,f.exported.type==="Literal"),name:M(ta,f.local,f.local.type==="Literal")})},Literal:function(f){var I=f.value,D={start:l(f),end:p(f)},U=f.regex;if(U&&U.pattern)return D.value={source:U.pattern,flags:U.flags},new Vn(D);if(U){const X=f.raw||I,W=X.match(/^\/(.*)\/(\w*)$/);if(!W)throw new Error("Invalid regex source "+X);const[re,se,Ue]=W;return D.value={source:se,flags:Ue},new Vn(D)}const O=typeof f.value=="bigint"?f.value.toString():f.bigint;if(typeof O=="string")return D.value=O,D.raw=f.raw,new Dr(D);if(I===null)return new Fn(D);switch(typeof I){case"string":return D.quote='"',D.value=I,new wt(D);case"number":return D.value=I,D.raw=f.raw||I.toString(),new Tt(D);case"boolean":return new(I?Jn:Ko)(D)}},MetaProperty:function(f){if(f.meta.name==="new"&&f.property.name==="target")return new hl({start:l(f),end:p(f)});if(f.meta.name==="import"&&f.property.name==="meta")return new Go({start:l(f),end:p(f)})},Identifier:function(f){return new Ge({start:l(f),end:p(f),name:f.name})},EmptyStatement:function(f){return new qt({start:l(f),end:p(f)})},BlockStatement:function(f){return new bt({start:l(f),end:p(f),body:f.body.map($)})},IfStatement:function(f){return new Yt({start:l(f),end:p(f),condition:$(f.test),body:$(f.consequent),alternative:$(f.alternate)})},LabeledStatement:function(f){try{const I=M(Pu,f.label);return E.push(I),new $n({start:l(f),end:p(f),label:I,body:$(f.body)})}finally{E.pop()}},BreakStatement:function(f){return new fr({start:l(f),end:p(f),label:N(f.label)})},ContinueStatement:function(f){return new Es({start:l(f),end:p(f),label:N(f.label)})},WithStatement:function(f){return new Zn({start:l(f),end:p(f),expression:$(f.object),body:$(f.body)})},SwitchStatement:function(f){return new gn({start:l(f),end:p(f),expression:$(f.discriminant),body:f.cases.map($)})},ReturnStatement:function(f){return new _i({start:l(f),end:p(f),value:$(f.argument)})},ThrowStatement:function(f){return new Lu({start:l(f),end:p(f),value:$(f.argument)})},WhileStatement:function(f){return new Bo({start:l(f),end:p(f),condition:$(f.test),body:$(f.body)})},DoWhileStatement:function(f){return new $o({start:l(f),end:p(f),condition:$(f.test),body:$(f.body)})},ForStatement:function(f){return new Oi({start:l(f),end:p(f),init:$(f.init),condition:$(f.test),step:$(f.update),body:$(f.body)})},ForInStatement:function(f){return new sn({start:l(f),end:p(f),init:$(f.left),object:$(f.right),body:$(f.body)})},ForOfStatement:function(f){return new $s({start:l(f),end:p(f),init:$(f.left),object:$(f.right),body:$(f.body),await:f.await})},AwaitExpression:function(f){return new Qn({start:l(f),end:p(f),expression:$(f.argument)})},YieldExpression:function(f){return new er({start:l(f),end:p(f),expression:$(f.argument),is_star:f.delegate})},DebuggerStatement:function(f){return new Po({start:l(f),end:p(f)})},CatchClause:function(f){return new Eo({start:l(f),end:p(f),argname:f.param?y(f.param,Rr):null,body:$(f.body).body})},ThisExpression:function(f){return new ln({start:l(f),name:"this",end:p(f)})},Super:function(f){return new fl({start:l(f),end:p(f),name:"super"})},BinaryExpression:function(f){return f.left.type==="PrivateIdentifier"?new Ar({start:l(f),end:p(f),key:new pl({start:l(f.left),end:p(f.left),name:f.left.name}),value:$(f.right)}):new Oe({start:l(f),end:p(f),operator:f.operator,left:$(f.left),right:$(f.right)})},LogicalExpression:function(f){return new Oe({start:l(f),end:p(f),operator:f.operator,left:$(f.left),right:$(f.right)})},AssignmentExpression:function(f){return new Ot({start:l(f),end:p(f),operator:f.operator,logical:f.operator==="??="||f.operator==="&&="||f.operator==="||=",left:$(f.left),right:$(f.right)})},ConditionalExpression:function(f){return new It({start:l(f),end:p(f),condition:$(f.test),consequent:$(f.consequent),alternative:$(f.alternate)})},NewExpression:function(f){return new yn({start:l(f),end:p(f),expression:$(f.callee),args:f.arguments.map($)})},CallExpression:function(f){return new Qe({start:l(f),end:p(f),expression:$(f.callee),optional:f.optional,args:f.arguments.map($)})}};o.UpdateExpression=o.UnaryExpression=function(I){var D="prefix"in I?I.prefix:I.type=="UnaryExpression";return new(D?ut:Yo)({start:l(I),end:p(I),operator:I.operator,expression:$(I.argument)})},o.ClassDeclaration=o.ClassExpression=function(I){return new(I.type==="ClassDeclaration"?Or:go)({start:l(I),end:p(I),name:I.id&&M(I.type==="ClassDeclaration"?Nh:Dh,I.id),extends:$(I.superClass),properties:I.body.body.map($)})},F(qt,function(){return{type:"EmptyStatement"}}),F(bt,function(I){return{type:"BlockStatement",body:I.body.map(g)}}),F(Yt,function(I){return{type:"IfStatement",test:g(I.condition),consequent:g(I.body),alternate:g(I.alternative)}}),F($n,function(I){return{type:"LabeledStatement",label:g(I.label),body:g(I.body)}}),F(fr,function(I){return{type:"BreakStatement",label:g(I.label)}}),F(Es,function(I){return{type:"ContinueStatement",label:g(I.label)}}),F(Zn,function(I){return{type:"WithStatement",object:g(I.expression),body:g(I.body)}}),F(gn,function(I){return{type:"SwitchStatement",discriminant:g(I.expression),cases:I.body.map(g)}}),F(_i,function(I){return{type:"ReturnStatement",argument:g(I.value)}}),F(Lu,function(I){return{type:"ThrowStatement",argument:g(I.value)}}),F(Bo,function(I){return{type:"WhileStatement",test:g(I.condition),body:g(I.body)}}),F($o,function(I){return{type:"DoWhileStatement",test:g(I.condition),body:g(I.body)}}),F(Oi,function(I){return{type:"ForStatement",init:g(I.init),test:g(I.condition),update:g(I.step),body:g(I.body)}}),F(sn,function(I){return{type:"ForInStatement",left:g(I.init),right:g(I.object),body:g(I.body)}}),F($s,function(I){return{type:"ForOfStatement",left:g(I.init),right:g(I.object),body:g(I.body),await:I.await}}),F(Qn,function(I){return{type:"AwaitExpression",argument:g(I.expression)}}),F(er,function(I){return{type:"YieldExpression",argument:g(I.expression),delegate:I.is_star}}),F(Po,function(){return{type:"DebuggerStatement"}}),F(Ho,function(I){return{type:"VariableDeclarator",id:g(I.name),init:g(I.value)}}),F(ln,function(){return{type:"ThisExpression"}}),F(fl,function(){return{type:"Super"}}),F(It,function(I){return{type:"ConditionalExpression",test:g(I.condition),consequent:g(I.consequent),alternate:g(I.alternative)}}),F(yn,function(I){return{type:"NewExpression",callee:g(I.expression),arguments:I.args.map(g)}}),F(Qe,function(I){if(I.expression instanceof Ge&&I.expression.name==="import"){const[D,U]=I.args.map(g);return{type:"ImportExpression",source:D,options:U||null}}return{type:"CallExpression",callee:g(I.expression),optional:I.optional,arguments:I.args.map(g)}}),F(si,function(I){return H("Program",I)}),F(Nt,function(I){return{type:x()?"RestElement":"SpreadElement",argument:g(I.expression)}}),F(Cr,function(I){return{type:"TaggedTemplateExpression",tag:g(I.prefix),quasi:g(I.template_string)}}),F(mn,function(I){for(var D=[],U=[],O=0;O<I.segments.length;O++)O%2!==0?U.push(g(I.segments[O])):D.push({type:"TemplateElement",value:{raw:I.segments[O].raw,cooked:I.segments[O].value},tail:O===I.segments.length-1});return{type:"TemplateLiteral",quasis:D,expressions:U}}),F(fi,function(I){return{type:"FunctionDeclaration",id:g(I.name),params:I.argnames.map(C),generator:I.is_generator,async:I.async,body:H("BlockStatement",I)}}),F(ii,function(I){return{type:"FunctionExpression",id:g(I.name),params:I.argnames.map(C),generator:I.is_generator||!1,async:I.async||!1,body:H("BlockStatement",I)}}),F(di,function(I){var D=I.body.length===1&&I.body[0]instanceof _i&&I.body[0].value?g(I.body[0].value):{type:"BlockStatement",body:I.body.map(g)};return{type:"ArrowFunctionExpression",params:I.argnames.map(C),async:I.async,body:D}}),F(jt,function(I){return I.is_array?{type:"ArrayPattern",elements:I.names.map(D=>D instanceof Pn?null:C(D))}:{type:"ObjectPattern",properties:I.names.map(D=>{if(D instanceof Zt){var U=D.computed_key();const[O,X]=d(D.key,U,D.quote,D.value);return{type:"Property",computed:U,kind:"init",key:X,method:!1,shorthand:O,value:C(D.value)}}else return C(D)})}}),F(fn,function(I){return{type:"AssignmentPattern",left:C(I.left),right:g(I.right)}}),F(Dn,function(I){return{type:"ExpressionStatement",expression:{type:"Literal",value:I.value,raw:I.print_to_string()},directive:I.value}}),F(rt,function(I){return{type:"ExpressionStatement",expression:g(I.body)}}),F(Vo,function(I){return{type:"SwitchCase",test:g(I.expression),consequent:I.body.map(g)}}),F(nr,function(I){return{type:"TryStatement",block:k(I.body),handler:g(I.bcatch),guardedHandlers:[],finalizer:g(I.bfinally)}}),F(Eo,function(I){return{type:"CatchClause",param:I.argname!=null?C(I.argname):null,body:k(I)}}),F(Un,function(I){return{type:"VariableDeclaration",kind:I instanceof sa?"const":I instanceof oa?"let":I instanceof qn?I.await?"await using":"using":"var",declarations:I.definitions.map(g)}});function s(f){const I=[];if(f)for(const{key:D,value:U}of f.properties){const O=Ch(D)?{type:"Identifier",name:D}:{type:"Literal",value:D,raw:JSON.stringify(D)};I.push({type:"ImportAttribute",key:O,value:g(U)})}return I}F(ki,function(I){if(I.exported_names){var D=I.exported_names[0];if(D&&D.name.name==="*"&&!D.name.quote){var U=D.foreign_name,O=U.name==="*"&&!U.quote?null:g(U);return{type:"ExportAllDeclaration",source:g(I.module_name),exported:O,attributes:s(I.attributes)}}return{type:"ExportNamedDeclaration",specifiers:I.exported_names.map(function(X){return{type:"ExportSpecifier",exported:g(X.foreign_name),local:g(X.name)}}),declaration:g(I.exported_definition),source:g(I.module_name),attributes:s(I.attributes)}}return I.is_default?{type:"ExportDefaultDeclaration",declaration:g(I.exported_value||I.exported_definition)}:{type:"ExportNamedDeclaration",declaration:g(I.exported_value||I.exported_definition),specifiers:[],source:null}}),F(gr,function(I){var D=[];if(I.imported_name&&D.push({type:"ImportDefaultSpecifier",local:g(I.imported_name)}),I.imported_names){var U=I.imported_names[0].foreign_name;U.name==="*"&&!U.quote?D.push({type:"ImportNamespaceSpecifier",local:g(I.imported_names[0].name)}):I.imported_names.forEach(function(O){D.push({type:"ImportSpecifier",local:g(O.name),imported:g(O.foreign_name)})})}return{type:"ImportDeclaration",specifiers:D,source:g(I.module_name),attributes:s(I.attributes)}}),F(Go,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"import"},property:{type:"Identifier",name:"meta"}}}),F(Ct,function(I){return{type:"SequenceExpression",expressions:I.expressions.map(g)}}),F(mr,function(I){return{type:"MemberExpression",object:g(I.expression),computed:!1,property:{type:"PrivateIdentifier",name:I.property},optional:I.optional}}),F(lt,function(I){var D=I instanceof Li;return{type:"MemberExpression",object:g(I.expression),computed:D,property:D?g(I.property):{type:"Identifier",name:I.property},optional:I.optional}}),F(Ci,function(I){return{type:"ChainExpression",expression:g(I.expression)}}),F(Jt,function(I){return{type:I.operator=="++"||I.operator=="--"?"UpdateExpression":"UnaryExpression",operator:I.operator,prefix:I instanceof ut,argument:g(I.expression)}}),F(Oe,function(I){return I.operator=="="&&x()?{type:"AssignmentPattern",left:g(I.left),right:g(I.right)}:{type:I.operator=="&&"||I.operator=="||"||I.operator==="??"?"LogicalExpression":"BinaryExpression",left:g(I.left),operator:I.operator,right:g(I.right)}}),F(Ot,function(I){return{type:"AssignmentExpression",operator:I.operator,left:g(I.left),right:g(I.right)}}),F(Ar,function(I){return{type:"BinaryExpression",left:{type:"PrivateIdentifier",name:I.key.name},operator:"in",right:g(I.value)}}),F(Ut,function(I){return{type:"ArrayExpression",elements:I.elements.map(g)}}),F(Wt,function(I){return{type:"ObjectExpression",properties:I.properties.map(g)}}),F(Ti,function(I,D){var U=I.computed_key();const[O,X]=d(I.key,U,I.quote,I.value);var W;return I instanceof yr?W="get":I instanceof Gr&&(W="set"),I instanceof tr||I instanceof $r?{type:"MethodDefinition",computed:!1,kind:I instanceof tr?"get":"set",static:I.static,key:{type:"PrivateIdentifier",name:I.key.name},value:g(I.value)}:I instanceof Kn?{type:"PropertyDefinition",key:{type:"PrivateIdentifier",name:I.key.name},value:g(I.value),computed:!1,static:I.static}:I instanceof ir?{type:"PropertyDefinition",key:X,value:g(I.value),computed:U,static:I.static}:D instanceof Mt?{type:"MethodDefinition",computed:U,kind:W,static:I.static,key:g(I.key),value:g(I.value)}:{type:"Property",computed:U,method:!1,shorthand:O,kind:W,key:X,value:g(I.value)}}),F(Zt,function(I){var D=I.computed_key();const[U,O]=d(I.key,D,I.quote,I.value);return{type:"Property",computed:D,shorthand:U,method:!1,kind:"init",key:O,value:g(I.value)}}),F(an,function(I,D){const U=I.computed_key(),[O,X]=d(I.key,U,I.quote,I.value);return D instanceof Wt?{type:"Property",kind:"init",computed:U,method:!0,shorthand:!1,key:X,value:g(I.value)}:{type:"MethodDefinition",kind:!U&&I.key.name==="constructor"?"constructor":"method",computed:U,key:X,value:g(I.value),static:I.static}}),F(Xn,function(I){return{type:"MethodDefinition",kind:"method",key:{type:"PrivateIdentifier",name:I.key.name},value:g(I.value),computed:!1,static:I.static}}),F(Mt,function(I){var D=I instanceof go?"ClassExpression":"ClassDeclaration";return{type:D,superClass:g(I.extends),id:I.name?g(I.name):null,body:{type:"ClassBody",body:I.properties.map(g)}}}),F(En,function(I){return{type:"StaticBlock",body:I.body.map(g)}}),F(hl,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"new"},property:{type:"Identifier",name:"target"}}}),F(Ft,function(I,D){if(I instanceof nn&&D.quote||(I instanceof ul||I instanceof _s||I instanceof ta)&&I.quote)return{type:"Literal",value:I.name};var U=I.definition();return{type:"Identifier",name:U?U.mangled_name||U.name:I.name}}),F(Vn,function(I){const D=I.value.source,U=I.value.flags;return{type:"Literal",value:null,raw:I.print_to_string(),regex:{pattern:D,flags:U}}}),F(Gt,function(I){var D=I.value;return{type:"Literal",value:D,raw:I.raw||I.print_to_string()}}),F(vs,function(I){return{type:"Identifier",name:String(I.value)}}),F(Dr,f=>({type:"Literal",value:null,bigint:typeof BigInt=="function"?BigInt(f.value).toString():f.value,raw:f.raw})),kh.DEFMETHOD("to_mozilla_ast",Gt.prototype.to_mozilla_ast),Fn.DEFMETHOD("to_mozilla_ast",Gt.prototype.to_mozilla_ast),Pn.DEFMETHOD("to_mozilla_ast",function(){return null}),Di.DEFMETHOD("to_mozilla_ast",bt.prototype.to_mozilla_ast),ot.DEFMETHOD("to_mozilla_ast",ii.prototype.to_mozilla_ast);function l(f){var I=f.loc,D=I&&I.start,U=f.range;return new sm("","",D&&D.line||0,D&&D.column||0,U?U[0]:f.start,!1,[],[],I&&I.source)}function p(f){var I=f.loc,D=I&&I.end,U=f.range;return new sm("","",D&&D.line||0,D&&D.column||0,U?U[0]:f.end,!1,[],[],I&&I.source)}var E=null;function $(f){return f==null?null:o[f.type](f)}function R(f,I){return!I&&f.type==="Literal"&&typeof f.value=="string"?'"':""}function M(f,I,D){return new f({start:l(I),quote:D?'"':void 0,name:I.type==="Identifier"?I.name:String(I.value),end:p(I)})}function L(f,I){return new(I?Uo:ii)({start:l(f),end:p(f),name:f.id&&M(I?nn:Kr,f.id),argnames:f.params.map(D=>y(D,Xi)),is_generator:f.generator,async:f.async,body:i($(f.body).body)})}function y(f,I){switch(f.type){case"ObjectPattern":return new jt({start:l(f),end:p(f),names:f.properties.map(O=>y(O,I)),is_array:!1});case"Property":var D=f.key,U={start:l(D||f.value),end:p(f.value),key:D.type=="Identifier"?D.name:String(D.value),quote:!f.computed&&D.type==="Literal"&&typeof D.value=="string"?'"':"",value:y(f.value,I)};return f.computed&&(U.key=$(f.key)),new Zt(U);case"ArrayPattern":return new jt({start:l(f),end:p(f),names:f.elements.map(function(O){return O===null?new Pn:y(O,I)}),is_array:!0});case"SpreadElement":case"RestElement":return new Nt({start:l(f),end:p(f),expression:y(f.argument,I)});case"AssignmentPattern":return new fn({start:l(f),end:p(f),left:y(f.left,I),operator:"=",right:$(f.right)});case"Identifier":return new I({start:l(f),end:p(f),name:f.name});default:throw new Error("Invalid node type for destructuring: "+f.type)}}function N(f){if(!f)return null;const I=M(_m,f);let D=E.length;for(;D--;){const U=E[D];if(I.name===U.name){I.thedef=U;break}}return I}He.from_mozilla_ast=function(f){var I=E;E=[];var D=$(f);return E=I,D};function P(f,I){var D=f.start,U=f.end;return D&&U&&(D.pos!=null&&U.endpos!=null&&(I.range=[D.pos,U.endpos]),D.line&&(I.loc={start:{line:D.line,column:D.col},end:U.endline?{line:U.endline,column:U.endcol}:null},D.file&&(I.loc.source=D.file))),I}function F(f,I){f.DEFMETHOD("to_mozilla_ast",function(D){return P(this,I(this,D))})}var K=null;function g(f){K===null&&(K=[]),K.push(f);var I=f!=null?f.to_mozilla_ast(K[K.length-2]):null;return K.pop(),K.length===0&&(K=null),I}function d(f,I=!1,D=!1,U=null){if(I)return[!1,g(f)];const O=typeof f=="string"?f:f.name;let X;return D?X={type:"Literal",value:O,raw:JSON.stringify(O)}:""+ +O===O&&+O>=0?X={type:"Literal",value:+O,raw:JSON.stringify(+O)}:X={type:"Identifier",name:O},[X.type==="Identifier"&&X.name===O&&(U instanceof Ft&&U.name===O||U instanceof fn&&U.left.name===O),X]}function C(f){if(f instanceof Nt)return{type:"RestElement",argument:C(f.expression)};if(f instanceof Ft||f instanceof jt||f instanceof fn||f instanceof lt)return g(f);throw new Error(f.TYPE)}function x(){for(var f=K.length;f--;)if(K[f]instanceof jt)return!0;return!1}function k(f){return{type:"BlockStatement",body:f.body.map(g)}}function H(f,I){var D=I.body.map(g);return I.body[0]instanceof rt&&I.body[0].body instanceof wt&&D.unshift(g(new qt(I.body[0]))),{type:f,body:D}}})();function Wr(i){let n=i.parent(-1);for(let o=0,s;s=i.parent(o);o++){if(s instanceof Yi&&s.body===n)return!0;if(s instanceof Ct&&s.expressions[0]===n||s.TYPE==="Call"&&s.expression===n||s instanceof Cr&&s.prefix===n||s instanceof ni&&s.expression===n||s instanceof Li&&s.expression===n||s instanceof Ci&&s.expression===n||s instanceof It&&s.condition===n||s instanceof Oe&&s.left===n||s instanceof Yo&&s.expression===n)n=s;else return!1}}function Mo(i){return i instanceof Wt?!0:i instanceof Ct?Mo(i.expressions[0]):i.TYPE==="Call"?Mo(i.expression):i instanceof Cr?Mo(i.prefix):i instanceof ni||i instanceof Li||i instanceof Ci?Mo(i.expression):i instanceof It?Mo(i.condition):i instanceof Oe?Mo(i.left):i instanceof Yo?Mo(i.expression):!1}const GI=10,WI=32,XI=/[@#]__(PURE|INLINE|NOINLINE)__/;function OC(i){return(i.type==="comment2"||i.type==="comment1")&&/@preserve|@copyright|@lic|@cc_on|^\**!/i.test(i.value)}const CC=8*1e3;class yC{constructor(){this.committed="",this.current=""}append(n){this.current.length>CC?(this.committed+=this.current+n,this.current=""):this.current+=n}insertAt(n,o){const{committed:s,current:l}=this;o<s.length?this.committed=s.slice(0,o)+n+s.slice(o):o===s.length?this.committed+=n:(o-=s.length,this.committed+=l.slice(0,o)+n,this.current=l.slice(o))}charAt(n){const{committed:o}=this;return n<o.length?o[n]:this.current[n-o.length]}charCodeAt(n){const{committed:o}=this;return n<o.length?o.charCodeAt(n):this.current.charCodeAt(n-o.length)}length(){return this.committed.length+this.current.length}expectDirective(){let n,o=this.length();if(o<=0)return!0;for(;(n=this.charCodeAt(--o))&&(n==WI||n==GI););return!n||n===59||n===123}hasNLB(){let n=this.length()-1;for(;n>=0;){const o=this.charCodeAt(n--);if(o===GI)return!0;if(o!==WI)return!1}return!0}toString(){return this.committed+this.current}}function gm(i){var n=!i;i=po(i,{ascii_only:!1,beautify:!1,braces:!1,comments:"some",ecma:5,ie8:!1,indent_level:4,indent_start:0,inline_script:!0,keep_numbers:!1,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_annotations:!1,quote_keys:!1,quote_style:0,safari10:!1,semicolons:!0,shebang:!0,shorthand:void 0,source_map:null,webkit:!1,width:80,wrap_iife:!1,wrap_func_args:!1,_destroy_ast:!1},!0),i.shorthand===void 0&&(i.shorthand=i.ecma>5);var o=xt;if(i.comments){let _e=i.comments;if(typeof i.comments=="string"&&/^\/.*\/[a-zA-Z]*$/.test(i.comments)){var s=i.comments.lastIndexOf("/");_e=new RegExp(i.comments.substr(1,s-1),i.comments.substr(s+1))}_e instanceof RegExp?o=function(be){return be.type!="comment5"&&_e.test(be.value)}:typeof _e=="function"?o=function(be){return be.type!="comment5"&&_e(this,be)}:_e==="some"?o=OC:o=on}if(i.preserve_annotations){let _e=o;o=function(be){return XI.test(be.value)||_e.apply(this,arguments)}}var l=0,p=0,E=1,$=0,R=new yC;let M=new Set;var L=i.ascii_only?function(_e,be=!1,We=!1){return i.ecma>=2015&&!i.safari10&&!We&&(_e=_e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(Ke){var at=$C(Ke,0).toString(16);return"\\u{"+at+"}"})),_e.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(Ke){var at=Ke.charCodeAt(0).toString(16);if(at.length<=2&&!be){for(;at.length<2;)at="0"+at;return"\\x"+at}else{for(;at.length<4;)at="0"+at;return"\\u"+at}})}:function(_e){return _e.replace(/[\ud800-\udbff][\udc00-\udfff]|([\ud800-\udbff]|[\udc00-\udfff])/g,function(be,We){return We?"\\u"+We.charCodeAt(0).toString(16):be})};function y(_e,be){var We=0,Ke=0;_e=_e.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(pt,St){switch(pt){case'"':return++We,'"';case"'":return++Ke,"'";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return i.ie8?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\uFEFF":return"\\ufeff";case"\0":return/[0-9]/.test(xo(_e,St+1))?"\\x00":"\\0"}return pt});function at(){return"'"+_e.replace(/\x27/g,"\\'")+"'"}function ct(){return'"'+_e.replace(/\x22/g,'\\"')+'"'}function Ht(){return"`"+_e.replace(/`/g,"\\`")+"`"}if(_e=L(_e),be==="`")return Ht();switch(i.quote_style){case 1:return at();case 2:return ct();case 3:return be=="'"?at():ct();default:return We>Ke?at():ct()}}function N(_e,be){var We=y(_e,be);return i.inline_script&&(We=We.replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),We=We.replace(/\x3c!--/g,"\\x3c!--"),We=We.replace(/--\x3e/g,"--\\x3e")),We}function P(_e){return _e=_e.toString(),_e=L(_e,!0),_e}function F(_e){return" ".repeat(i.indent_start+l-_e*i.indent_level)}var K=!1,g=!1,d=!1,C=0,x=!1,k=!1,H=-1,f="",I,D,U=i.source_map&&[],O=U?function(){U.forEach(function(_e){try{let{name:be,token:We}=_e;be!==!1&&(We.type=="name"||We.type==="privatename"?be=We.value:be instanceof Ft&&(be=We.type==="string"?We.value:be.name)),i.source_map.add(_e.token.file,_e.line,_e.col,_e.token.line,_e.token.col,Ch(be)?be:void 0)}catch{}}),U=[]}:Yn,X=i.max_line_len?function(){if(p>i.max_line_len&&C){R.insertAt(`
`,C);const be=R.length()-C-1;if(U){var _e=be-p;U.forEach(function(We){We.line++,We.col+=_e})}E++,$++,p=be}C&&(C=0,O())}:Yn,W=Vt("( [ + * / - , . `");function re(_e){_e=String(_e);var be=xo(_e,0);x&&be&&(x=!1,be!==`
`&&(re(`
`),me())),k&&be&&(k=!1,/[\s;})]/.test(be)||Ue()),H=-1;var We=f.charAt(f.length-1);d&&(d=!1,(We===":"&&be==="}"||(!be||!";}".includes(be))&&We!==";")&&(i.semicolons||W.has(be)?(R.append(";"),p++,$++):(X(),p>0&&(R.append(`
`),$++,E++,p=0),/^\s+$/.test(_e)&&(d=!0)),i.beautify||(g=!1))),g&&((tl(We)&&(tl(be)||be=="\\")||be=="/"&&be==We||(be=="+"||be=="-")&&be==f)&&(R.append(" "),p++,$++),g=!1),I&&(U.push({token:I,name:D,line:E,col:p}),I=!1,C||O()),R.append(_e),K=_e[_e.length-1]=="(",$+=_e.length;var Ke=_e.split(/\r?\n/),at=Ke.length-1;E+=at,p+=Ke[0].length,at>0&&(X(),p=Ke[at].length),f=_e}var se=function(){re("*")},Ue=i.beautify?function(){re(" ")}:function(){g=!0},me=i.beautify?function(_e){i.beautify&&re(F(_e?.5:0))}:Yn,Se=i.beautify?function(_e,be){_e===!0&&(_e=je());var We=l;l=_e;var Ke=be();return l=We,Ke}:function(_e,be){return be()},xe=i.beautify?function(){if(H<0)return re(`
`);R.charAt(H)!=`
`&&(R.insertAt(`
`,H),$++,E++),H++}:i.max_line_len?function(){X(),C=R.length()}:Yn,Ce=i.beautify?function(){re(";")}:function(){d=!0};function Ie(){d=!1,re(";")}function je(){return l+i.indent_level}function Ve(_e){var be;return re("{"),xe(),Se(je(),function(){be=_e()}),me(),re("}"),be}function Me(_e){re("(");var be=_e();return re(")"),be}function ce(_e){re("[");var be=_e();return re("]"),be}function te(){re(","),Ue()}function ue(){re(":"),Ue()}var ge=U?function(_e,be){I=_e,D=be}:Yn;function we(){return C&&X(),R.toString()}function st(_e){return i.preserve_annotations||(_e=_e.replace(XI," ")),/^\s*$/.test(_e)?"":_e.replace(/(<\s*\/\s*)(script)/i,"<\\/$2")}function Be(_e){var be=this,We=_e.start;if(!We)return;var Ke=be.printed_comments;const at=_e instanceof xn&&_e.value||(_e instanceof Qn||_e instanceof er)&&_e.expression;if(We.comments_before&&Ke.has(We.comments_before))if(at)We.comments_before=[];else return;var ct=We.comments_before;if(ct||(ct=We.comments_before=[]),Ke.add(ct),at){var Ht=new Zi(function(Et){var dt=Ht.parent();if(dt instanceof xn||dt instanceof Qn||dt instanceof er||dt instanceof Oe&&dt.left===Et||dt.TYPE=="Call"&&dt.expression===Et||dt instanceof It&&dt.condition===Et||dt instanceof ni&&dt.expression===Et||dt instanceof Ct&&dt.expressions[0]===Et||dt instanceof Li&&dt.expression===Et||dt instanceof Yo){if(!Et.start)return;var T=Et.start.comments_before;T&&!Ke.has(T)&&(Ke.add(T),ct=ct.concat(T))}else return!0});Ht.push(_e),at.walk(Ht)}if($==0){ct.length>0&&i.shebang&&ct[0].type==="comment5"&&!Ke.has(ct[0])&&(re("#!"+ct.shift().value+`
`),me());var pt=i.preamble;pt&&re(pt.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,`
`))}if(ct=ct.filter(o,_e).filter(Et=>!Ke.has(Et)),ct.length!=0){var St=R.hasNLB();ct.forEach(function(Et,dt){if(Ke.add(Et),St||(Et.nlb?(re(`
`),me(),St=!0):dt>0&&Ue()),/comment[134]/.test(Et.type)){var T=st(Et.value);T&&(re("//"+T+`
`),me()),St=!0}else if(Et.type=="comment2"){var T=st(Et.value);T&&re("/*"+T+"*/"),St=!1}}),St||(We.nlb?(re(`
`),me()):Ue())}}function Rt(_e,be){var We=this,Ke=_e.end;if(Ke){var at=We.printed_comments,ct=Ke[be?"comments_before":"comments_after"];if(!(!ct||at.has(ct))&&(_e instanceof Yi||ct.every(pt=>!/comment[134]/.test(pt.type)))){at.add(ct);var Ht=R.length();ct.filter(o,_e).forEach(function(pt,St){if(!at.has(pt)){if(at.add(pt),k=!1,x?(re(`
`),me(),x=!1):pt.nlb&&(St>0||!R.hasNLB())?(re(`
`),me()):(St>0||!be)&&Ue(),/comment[134]/.test(pt.type)){const Et=st(pt.value);Et&&re("//"+Et),x=!0}else if(pt.type=="comment2"){const Et=st(pt.value);Et&&re("/*"+Et+"*/"),k=!0}}}),R.length()>Ht&&(H=Ht)}}}const de=i._destroy_ast?function(be){be.body.length=0,be.argnames.length=0}:Yn;var Le=[];return{get:we,toString:we,indent:me,in_directive:!1,use_asm:null,active_scope:null,indentation:function(){return l},current_width:function(){return p-l},should_break:function(){return i.width&&this.current_width()>=i.width},has_parens:function(){return K},newline:xe,print:re,star:se,space:Ue,comma:te,colon:ue,last:function(){return f},semicolon:Ce,force_semicolon:Ie,to_utf8:L,print_name:function(_e){re(P(_e))},print_string:function(_e,be,We){var Ke=N(_e,be);We===!0&&!Ke.includes("\\")&&(R.expectDirective()||Ie(),Ie()),re(Ke)},print_template_string_chars:function(_e){var be=N(_e,"`").replace(/\${/g,"\\${");return re(be.substr(1,be.length-2))},encode_string:N,next_indent:je,with_indent:Se,with_block:Ve,with_parens:Me,with_square:ce,add_mapping:ge,option:function(_e){return i[_e]},gc_scope:de,printed_comments:M,prepend_comments:n?Yn:Be,append_comments:n||o===xt?Yn:Rt,line:function(){return E},col:function(){return p},pos:function(){return $},push_node:function(_e){Le.push(_e)},pop_node:function(){return Le.pop()},parent:function(_e){return Le[Le.length-2-(_e||0)]}}}(function(){function i(g,d){g.DEFMETHOD("_codegen",d)}He.DEFMETHOD("print",function(g,d){var C=this,x=C._codegen;C instanceof ht?g.active_scope=C:!g.use_asm&&C instanceof Dn&&C.value=="use asm"&&(g.use_asm=g.active_scope);function k(){g.prepend_comments(C),C.add_source_map(g),x(C,g),g.append_comments(C)}g.push_node(C),d||C.needs_parens(g)?g.with_parens(k):k(),g.pop_node(),C===g.use_asm&&(g.use_asm=null)}),He.DEFMETHOD("_print",He.prototype.print),He.DEFMETHOD("print_to_string",function(g){var d=gm(g);return this.print(d),d.get()});function n(g,d){Array.isArray(g)?g.forEach(function(C){n(C,d)}):g.DEFMETHOD("needs_parens",d)}n(He,xt),n(ii,function(g){if(!g.has_parens()&&Wr(g))return!0;if(g.option("webkit")){var d=g.parent();if(d instanceof lt&&d.expression===this)return!0}if(g.option("wrap_iife")){var d=g.parent();if(d instanceof Qe&&d.expression===this)return!0}if(g.option("wrap_func_args")){var d=g.parent();if(d instanceof Qe&&d.args.includes(this))return!0}return!1}),n(di,function(g){var d=g.parent();return g.option("wrap_func_args")&&d instanceof Qe&&d.args.includes(this)?!0:d instanceof lt&&d.expression===this||d instanceof It&&d.condition===this}),n(Wt,function(g){return!g.has_parens()&&Wr(g)}),n(go,Wr),n(Jt,function(g){var d=g.parent();return d instanceof lt&&d.expression===this||d instanceof Qe&&d.expression===this||d instanceof Oe&&d.operator==="**"&&this instanceof ut&&d.left===this&&this.operator!=="++"&&this.operator!=="--"}),n(Qn,function(g){var d=g.parent();return d instanceof lt&&d.expression===this||d instanceof Qe&&d.expression===this||d instanceof Oe&&d.operator==="**"&&d.left===this||g.option("safari10")&&d instanceof ut}),n(Ct,function(g){var d=g.parent();return d instanceof Qe||d instanceof Jt||d instanceof Oe||d instanceof Ho||d instanceof lt||d instanceof Ut||d instanceof Ti||d instanceof It||d instanceof di||d instanceof fn||d instanceof Nt||d instanceof $s&&this===d.object||d instanceof er||d instanceof ki}),n(Oe,function(g){var d=g.parent();if(d instanceof Qe&&d.expression===this||d instanceof Jt||d instanceof lt&&d.expression===this)return!0;if(d instanceof Oe){const C=d.operator,x=this.operator;if(x==="??"&&(C==="||"||C==="&&")||C==="??"&&(x==="||"||x==="&&"))return!0;const k=hr[C],H=hr[x];if(k>H||k==H&&(this===d.right||C=="**"))return!0}if(d instanceof Ar){const C=this.operator,x=hr.in,k=hr[C];if(x>k||x==k&&this===d.value)return!0}}),n(Ar,function(g){var d=g.parent();if(d instanceof Qe&&d.expression===this||d instanceof Jt||d instanceof lt&&d.expression===this)return!0;if(d instanceof Oe){const C=d.operator,x=hr[C],k=hr.in;if(x>k||x==k&&(this===d.right||C=="**"))return!0}if(d instanceof Ar&&this===d.value)return!0}),n(er,function(g){var d=g.parent();if(d instanceof Oe&&d.operator!=="="||d instanceof Qe&&d.expression===this||d instanceof It&&d.condition===this||d instanceof Jt||d instanceof lt&&d.expression===this)return!0}),n(Ci,function(g){var d=g.parent();return d instanceof Qe||d instanceof lt?d.expression===this:!1}),n(lt,function(g){var d=g.parent();if(d instanceof yn&&d.expression===this)return Ki(this,C=>{if(C instanceof ht)return!0;if(C instanceof Qe)return Hn})}),n(Qe,function(g){var d=g.parent(),C;return d instanceof yn&&d.expression===this||d instanceof ki&&d.is_default&&this.expression instanceof ii?!0:this.expression instanceof ii&&d instanceof lt&&d.expression===this&&(C=g.parent(1))instanceof Ot&&C.left===d}),n(yn,function(g){var d=g.parent();if(this.args.length===0&&(d instanceof lt||d instanceof Qe&&d.expression===this||d instanceof Cr&&d.prefix===this))return!0}),n(Tt,function(g){var d=g.parent();if(d instanceof lt&&d.expression===this){var C=this.getValue();if(C<0||/^0/.test(P(C)))return!0}}),n(Dr,function(g){var d=g.parent();if(d instanceof lt&&d.expression===this){var C=this.getValue();if(C.startsWith("-"))return!0}}),n([Ot,It],function(g){var d=g.parent();if(d instanceof Jt||d instanceof Oe&&!(d instanceof Ot)||d instanceof Qe&&d.expression===this||d instanceof It&&d.condition===this||d instanceof lt&&d.expression===this||this instanceof Ot&&this.left instanceof jt&&this.left.is_array===!1)return!0}),i(Dn,function(g,d){d.print_string(g.value,g.quote),d.semicolon()}),i(Nt,function(g,d){d.print("..."),g.expression.print(d)}),i(jt,function(g,d){d.print(g.is_array?"[":"{");var C=g.names.length;g.names.forEach(function(x,k){k>0&&d.comma(),x.print(d),k==C-1&&x instanceof Pn&&d.comma()}),d.print(g.is_array?"]":"}")}),i(Po,function(g,d){d.print("debugger"),d.semicolon()});function o(g,d,C,x){var k=g.length-1;C.in_directive=x,g.forEach(function(H,f){C.in_directive===!0&&!(H instanceof Dn||H instanceof qt||H instanceof rt&&H.body instanceof wt)&&(C.in_directive=!1),H instanceof qt||(C.indent(),H.print(C),f==k&&d||(C.newline(),d&&C.newline())),C.in_directive===!0&&H instanceof rt&&H.body instanceof wt&&(C.in_directive=!1)}),C.in_directive=!1}ea.DEFMETHOD("_do_print_body",function(g){y(this.body,g)}),i(Yi,function(g,d){g.body.print(d),d.semicolon()}),i(si,function(g,d){o(g.body,!0,d,!0),d.print("")}),i($n,function(g,d){g.label.print(d),d.colon(),g.body.print(d)}),i(rt,function(g,d){g.body.print(d),d.semicolon()});function s(g,d){d.print("{"),d.with_indent(d.next_indent(),function(){d.append_comments(g,!0)}),d.add_mapping(g.end),d.print("}")}function l(g,d,C){g.body.length>0?d.with_block(function(){o(g.body,!1,d,C),d.add_mapping(g.end)}):s(g,d)}i(bt,function(g,d){l(g,d)}),i(qt,function(g,d){d.semicolon()}),i($o,function(g,d){d.print("do"),d.space(),F(g.body,d),d.space(),d.print("while"),d.space(),d.with_parens(function(){g.condition.print(d)}),d.semicolon()}),i(Bo,function(g,d){d.print("while"),d.space(),d.with_parens(function(){g.condition.print(d)}),d.space(),g._do_print_body(d)}),i(Oi,function(g,d){d.print("for"),d.space(),d.with_parens(function(){g.init?(g.init instanceof Un?g.init.print(d):E(g.init,d,!0),d.print(";"),d.space()):d.print(";"),g.condition?(g.condition.print(d),d.print(";"),d.space()):d.print(";"),g.step&&g.step.print(d)}),d.space(),g._do_print_body(d)}),i(sn,function(g,d){d.print("for"),g.await&&(d.space(),d.print("await")),d.space(),d.with_parens(function(){g.init.print(d),d.space(),d.print(g instanceof $s?"of":"in"),d.space(),g.object.print(d)}),d.space(),g._do_print_body(d)}),i(Zn,function(g,d){d.print("with"),d.space(),d.with_parens(function(){g.expression.print(d)}),d.space(),g._do_print_body(d)}),ot.DEFMETHOD("_do_print",function(g,d){var C=this;d||(C.async&&(g.print("async"),g.space()),g.print("function"),C.is_generator&&g.star(),C.name&&g.space()),C.name instanceof Ft?C.name.print(g):d&&C.name instanceof He&&g.with_square(function(){C.name.print(g)}),g.with_parens(function(){C.argnames.forEach(function(x,k){k&&g.comma(),x.print(g)})}),g.space(),l(C,g,!0)}),i(ot,function(g,d){g._do_print(d),d.gc_scope(g)}),i(Cr,function(g,d){var C=g.prefix,x=C instanceof ot||C instanceof Oe||C instanceof It||C instanceof Ct||C instanceof Jt||C instanceof ni&&C.expression instanceof Wt;x&&d.print("("),g.prefix.print(d),x&&d.print(")"),g.template_string.print(d)}),i(mn,function(g,d){var C=d.parent()instanceof Cr;d.print("`");for(var x=0;x<g.segments.length;x++)g.segments[x]instanceof fo?C?d.print(g.segments[x].raw):d.print_template_string_chars(g.segments[x].value):(d.print("${"),g.segments[x].print(d),d.print("}"));d.print("`")}),i(fo,function(g,d){d.print_template_string_chars(g.value)}),di.DEFMETHOD("_do_print",function(g){var d=this,C=g.parent(),x=C instanceof Oe&&!(C instanceof Ot)&&!(C instanceof fn)||C instanceof Jt||C instanceof Qe&&d===C.expression;x&&g.print("("),d.async&&(g.print("async"),g.space()),d.argnames.length===1&&d.argnames[0]instanceof Ft?d.argnames[0].print(g):g.with_parens(function(){d.argnames.forEach(function(H,f){f&&g.comma(),H.print(g)})}),g.space(),g.print("=>"),g.space();const k=d.body[0];if(d.body.length===1&&k instanceof _i){const H=k.value;H?Mo(H)?(g.print("("),H.print(g),g.print(")")):H.print(g):g.print("{}")}else l(d,g);x&&g.print(")"),g.gc_scope(d)}),xn.DEFMETHOD("_do_print",function(g,d){if(g.print(d),this.value){g.space();const C=this.value.start.comments_before;C&&C.length&&!g.printed_comments.has(C)?(g.print("("),this.value.print(g),g.print(")")):this.value.print(g)}g.semicolon()}),i(_i,function(g,d){g._do_print(d,"return")}),i(Lu,function(g,d){g._do_print(d,"throw")}),i(er,function(g,d){var C=g.is_star?"*":"";d.print("yield"+C),g.expression&&(d.space(),g.expression.print(d))}),i(Qn,function(g,d){d.print("await"),d.space();var C=g.expression,x=!(C instanceof Qe||C instanceof Ge||C instanceof lt||C instanceof Jt||C instanceof Gt||C instanceof Qn||C instanceof Wt);x&&d.print("("),g.expression.print(d),x&&d.print(")")}),Vr.DEFMETHOD("_do_print",function(g,d){g.print(d),this.label&&(g.space(),this.label.print(g)),g.semicolon()}),i(fr,function(g,d){g._do_print(d,"break")}),i(Es,function(g,d){g._do_print(d,"continue")});function p(g,d){var C=g.body;if(d.option("braces")||d.option("ie8")&&C instanceof $o)return F(C,d);if(!C)return d.force_semicolon();for(;;)if(C instanceof Yt){if(!C.alternative){F(g.body,d);return}C=C.alternative}else if(C instanceof ea)C=C.body;else break;y(g.body,d)}i(Yt,function(g,d){d.print("if"),d.space(),d.with_parens(function(){g.condition.print(d)}),d.space(),g.alternative?(p(g,d),d.space(),d.print("else"),d.space(),g.alternative instanceof Yt?g.alternative.print(d):y(g.alternative,d)):g._do_print_body(d)}),i(gn,function(g,d){d.print("switch"),d.space(),d.with_parens(function(){g.expression.print(d)}),d.space();var C=g.body.length-1;C<0?s(g,d):d.with_block(function(){g.body.forEach(function(x,k){d.indent(!0),x.print(d),k<C&&x.body.length>0&&d.newline()})})}),Vo.DEFMETHOD("_do_print_body",function(g){g.newline(),this.body.forEach(function(d){g.indent(),d.print(g),g.newline()})}),i(_a,function(g,d){d.print("default:"),g._do_print_body(d)}),i(Hr,function(g,d){d.print("case"),d.space(),g.expression.print(d),d.print(":"),g._do_print_body(d)}),i(nr,function(g,d){d.print("try"),d.space(),g.body.print(d),g.bcatch&&(d.space(),g.bcatch.print(d)),g.bfinally&&(d.space(),g.bfinally.print(d))}),i(Rh,function(g,d){l(g,d)}),i(Eo,function(g,d){d.print("catch"),g.argname&&(d.space(),d.with_parens(function(){g.argname.print(d)})),d.space(),l(g,d)}),i(dl,function(g,d){d.print("finally"),d.space(),l(g,d)}),Un.DEFMETHOD("_do_print",function(g,d){g.print(d),g.space(),this.definitions.forEach(function(H,f){f&&g.comma(),H.print(g)});var C=g.parent(),x=C instanceof Oi||C instanceof sn,k=!x||C&&C.init!==this;k&&g.semicolon()}),i(oa,function(g,d){g._do_print(d,"let")}),i(Ei,function(g,d){g._do_print(d,"var")}),i(sa,function(g,d){g._do_print(d,"const")}),i(qn,function(g,d){g._do_print(d,g.await?"await using":"using")}),i(gr,function(g,d){d.print("import"),d.space(),g.imported_name&&g.imported_name.print(d),g.imported_name&&g.imported_names&&(d.print(","),d.space()),g.imported_names&&(g.imported_names.length===1&&g.imported_names[0].foreign_name.name==="*"&&!g.imported_names[0].foreign_name.quote?g.imported_names[0].print(d):(d.print("{"),g.imported_names.forEach(function(C,x){d.space(),C.print(d),x<g.imported_names.length-1&&d.print(",")}),d.space(),d.print("}"))),(g.imported_name||g.imported_names)&&(d.space(),d.print("from"),d.space()),g.module_name.print(d),g.attributes&&(d.print("with"),g.attributes.print(d)),d.semicolon()}),i(Go,function(g,d){d.print("import.meta")}),i(Br,function(g,d){var C=d.parent()instanceof gr,x=g.name.definition(),k=g.foreign_name,H=(x&&x.mangled_name||g.name.name)!==k.name;!H&&k.name==="*"&&!!k.quote!=!!g.name.quote&&(H=!0);var f=!k.quote;H?(C?f?d.print(k.name):d.print_string(k.name,k.quote):g.name.quote?d.print_string(g.name.name,g.name.quote):g.name.print(d),d.space(),d.print("as"),d.space(),C?g.name.print(d):f?d.print(k.name):d.print_string(k.name,k.quote)):g.name.quote?d.print_string(g.name.name,g.name.quote):g.name.print(d)}),i(ki,function(g,d){if(d.print("export"),d.space(),g.is_default&&(d.print("default"),d.space()),g.exported_names)g.exported_names.length===1&&g.exported_names[0].name.name==="*"&&!g.exported_names[0].name.quote?g.exported_names[0].print(d):(d.print("{"),g.exported_names.forEach(function(C,x){d.space(),C.print(d),x<g.exported_names.length-1&&d.print(",")}),d.space(),d.print("}"));else if(g.exported_value)g.exported_value.print(d);else if(g.exported_definition&&(g.exported_definition.print(d),g.exported_definition instanceof In))return;g.module_name&&(d.space(),d.print("from"),d.space(),g.module_name.print(d)),g.attributes&&(d.print("with"),g.attributes.print(d)),(g.exported_value&&!(g.exported_value instanceof fi||g.exported_value instanceof ii||g.exported_value instanceof Mt)||g.module_name||g.exported_names)&&d.semicolon()});function E(g,d,C){var x=!1;C&&(x=Ki(g,k=>{if(k instanceof ht&&!(k instanceof di))return!0;if(k instanceof Oe&&k.operator=="in"||k instanceof Ar)return Hn})),g.print(d,x)}i(Ho,function(g,d){if(g.name.print(d),g.value){d.space(),d.print("="),d.space();var C=d.parent(1),x=C instanceof Oi||C instanceof sn;E(g.value,d,x)}}),i(Qe,function(g,d){g.expression.print(d),!(g instanceof yn&&g.args.length===0)&&((g.expression instanceof Qe||g.expression instanceof ot)&&d.add_mapping(g.start),g.optional&&d.print("?."),d.with_parens(function(){g.args.forEach(function(C,x){x&&d.comma(),C.print(d)})}))}),i(yn,function(g,d){d.print("new"),d.space(),Qe.prototype._codegen(g,d)}),Ct.DEFMETHOD("_do_print",function(g){this.expressions.forEach(function(d,C){C>0&&(g.comma(),g.should_break()&&(g.newline(),g.indent())),d.print(g)})}),i(Ct,function(g,d){g._do_print(d)}),i(ni,function(g,d){var C=g.expression;C.print(d);var x=g.property,k=gs.has(x)?d.option("ie8"):!FI(x,d.option("ecma")>=2015&&!d.option("safari10"));g.optional&&d.print("?."),k?(d.print("["),d.add_mapping(g.end),d.print_string(x),d.print("]")):(C instanceof Tt&&C.getValue()>=0&&(/[xa-f.)]/i.test(d.last())||d.print(".")),g.optional||d.print("."),d.add_mapping(g.end),d.print_name(x))}),i(mr,function(g,d){var C=g.expression;C.print(d);var x=g.property;g.optional&&d.print("?"),d.print(".#"),d.add_mapping(g.end),d.print_name(x)}),i(Li,function(g,d){g.expression.print(d),g.optional&&d.print("?."),d.print("["),g.property.print(d),d.print("]")}),i(Ci,function(g,d){g.expression.print(d)}),i(ut,function(g,d){var C=g.operator;C==="--"&&d.last().endsWith("!")&&d.print(" "),d.print(C),(/^[a-z]/i.test(C)||/[+-]$/.test(C)&&g.expression instanceof ut&&/^[+-]/.test(g.expression.operator))&&d.space(),g.expression.print(d)}),i(Yo,function(g,d){g.expression.print(d),d.print(g.operator)}),i(Oe,function(g,d){var C=g.operator;g.left.print(d),C[0]==">"&&d.last().endsWith("--")?d.print(" "):d.space(),d.print(C),d.space(),g.right.print(d)}),i(It,function(g,d){g.condition.print(d),d.space(),d.print("?"),d.space(),g.consequent.print(d),d.space(),d.colon(),g.alternative.print(d)}),i(Ut,function(g,d){d.with_square(function(){var C=g.elements,x=C.length;x>0&&d.space(),C.forEach(function(k,H){H&&d.comma(),k.print(d),H===x-1&&k instanceof Pn&&d.comma()}),x>0&&d.space()})}),i(Wt,function(g,d){g.properties.length>0?d.with_block(function(){g.properties.forEach(function(C,x){x&&(d.print(","),d.newline()),d.indent(),C.print(d)}),d.newline()}):s(g,d)}),i(Mt,function(g,d){if(d.print("class"),d.space(),g.name&&(g.name.print(d),d.space()),g.extends){var C=!(g.extends instanceof Ge)&&!(g.extends instanceof lt)&&!(g.extends instanceof go)&&!(g.extends instanceof ii);d.print("extends"),C?d.print("("):d.space(),g.extends.print(d),C?d.print(")"):d.space()}g.properties.length>0?d.with_block(function(){g.properties.forEach(function(x,k){k&&d.newline(),d.indent(),x.print(d)}),d.newline()}):d.print("{}")}),i(hl,function(g,d){d.print("new.target")});function $(g,d,C){if(C.option("quote_keys"))return C.print_string(g),!1;if(""+ +g==g&&g>=0)return C.option("keep_numbers")?(C.print(g),!1):(C.print(P(g)),!1);var x=gs.has(g)?C.option("ie8"):C.option("ecma")<2015||C.option("safari10")?!Ch(g):!FI(g,!0);return x||d&&C.option("keep_quoted_props")?(C.print_string(g,d),!1):(C.print_name(g),!0)}i(Zt,function(g,d){function C(k){var H=k.definition();return H?H.mangled_name||H.name:k.name}const x=d.option("shorthand")&&!(g.key instanceof He);x&&g.value instanceof Ft&&C(g.value)===g.key&&!gs.has(g.key)?$(g.key,g.quote,d)||(d.colon(),g.value.print(d)):x&&g.value instanceof fn&&g.value.left instanceof Ft&&C(g.value.left)===g.key?($(g.key,g.quote,d)||(d.colon(),g.value.left.print(d)),d.space(),d.print("="),d.space(),g.value.right.print(d)):(g.key instanceof He?d.with_square(function(){g.key.print(d)}):$(g.key,g.quote,d),d.colon(),g.value.print(d))}),i(Kn,(g,d)=>{g.static&&(d.print("static"),d.space()),d.print("#"),$(g.key.name,void 0,d),g.value&&(d.print("="),g.value.print(d)),d.semicolon()}),i(ir,(g,d)=>{g.static&&(d.print("static"),d.space()),g.key instanceof Xo?$(g.key.name,g.quote,d):(d.print("["),g.key.print(d),d.print("]")),g.value&&(d.print("="),g.value.print(d)),d.semicolon()}),Ti.DEFMETHOD("_print_getter_setter",function(g,d,C){var x=this;x.static&&(C.print("static"),C.space()),g&&(C.print(g),C.space()),x.key instanceof nn?(d&&C.print("#"),$(x.key.name,x.quote,C),x.key.add_source_map(C)):C.with_square(function(){x.key.print(C)}),x.value._do_print(C,!0)}),i(Gr,function(g,d){g._print_getter_setter("set",!1,d)}),i(yr,function(g,d){g._print_getter_setter("get",!1,d)}),i($r,function(g,d){g._print_getter_setter("set",!0,d)}),i(tr,function(g,d){g._print_getter_setter("get",!0,d)}),i(an,function(g,d){var C;g.value.is_generator&&g.value.async?C="async*":g.value.is_generator?C="*":g.value.async&&(C="async"),g._print_getter_setter(C,!1,d)}),i(Xn,function(g,d){var C;g.value.is_generator&&g.value.async?C="async*":g.value.is_generator?C="*":g.value.async&&(C="async"),g._print_getter_setter(C,!0,d)}),i(Ar,function(g,d){g.key.print(d),d.space(),d.print("in"),d.space(),g.value.print(d)}),i(pl,function(g,d){d.print("#"+g.name)}),i(En,function(g,d){d.print("static"),d.space(),l(g,d)}),Ft.DEFMETHOD("_do_print",function(g){var d=this.definition();g.print_name(d?d.mangled_name||d.name:this.name)}),i(Ft,function(g,d){g._do_print(d)}),i(Pn,Yn),i(ln,function(g,d){d.print("this")}),i(fl,function(g,d){d.print("super")}),i(Gt,function(g,d){d.print(g.getValue())}),i(wt,function(g,d){d.print_string(g.getValue(),g.quote,d.in_directive)}),i(Tt,function(g,d){(d.option("keep_numbers")||d.use_asm)&&g.raw?d.print(g.raw):d.print(P(g.getValue()))}),i(Dr,function(g,d){d.option("keep_numbers")&&g.raw?d.print(g.raw):d.print(g.getValue()+"n")});const R=/(<\s*\/\s*script)/i,M=/^\s*script/i,L=(g,d)=>d.replace("/","\\/");i(Vn,function(g,d){let{source:C,flags:x}=g.getValue();C=Oh(C),x=x?uC(x):"",C=C.replace(R,L),M.test(C)&&d.last().endsWith("<")&&d.print(" "),d.print(d.to_utf8(`/${C}/${x}`,!1,!0));const k=d.parent();k instanceof Oe&&/^\w/.test(k.operator)&&k.left===g&&d.print(" ")});function y(g,d){d.option("braces")?F(g,d):!g||g instanceof qt?d.force_semicolon():g instanceof Un&&!(g instanceof Ei)||g instanceof Mt?F(g,d):g.print(d)}function N(g){for(var d=g[0],C=d.length,x=1;x<g.length;++x)g[x].length<C&&(d=g[x],C=d.length);return d}function P(g){var d=g.toString(10).replace(/^0\./,".").replace("e+","e"),C=[d];Math.floor(g)===g&&(g<0?C.push("-0x"+(-g).toString(16).toLowerCase()):C.push("0x"+g.toString(16).toLowerCase()));var x,k,H;return(x=/^\.0+/.exec(d))?(k=x[0].length,H=d.slice(k),C.push(H+"e-"+(H.length+k-1))):(x=/0+$/.exec(d))?(k=x[0].length,C.push(d.slice(0,-k)+"e"+k)):(x=/^(\d)\.(\d+)e(-?\d+)$/.exec(d))&&C.push(x[1]+x[2]+"e"+(x[3]-x[2].length)),N(C)}function F(g,d){!g||g instanceof qt?d.print("{}"):g instanceof bt?g.print(d):d.with_block(function(){d.indent(),g.print(d),d.newline()})}function K(g,d){g.forEach(function(C){C.DEFMETHOD("add_source_map",d)})}K([He,$n,si],Yn),K([Ut,bt,Eo,Mt,Gt,Po,Un,Dn,dl,Fu,ot,yn,Wt,ea,Ft,gn,Vo,mn,fo,nr],function(g){g.add_mapping(this.start)}),K([yr,Gr,tr,$r,an,Xn],function(g){g.add_mapping(this.start,!1)}),K([nn,pl],function(g){const d=this.end&&this.end.type;d==="name"||d==="privatename"?g.add_mapping(this.end,this.name):g.add_mapping(this.end)}),K([Ti],function(g){g.add_mapping(this.start,this.key)})})();const KI=(i,n)=>i===null&&n===null||i.TYPE===n.TYPE&&i.shallow_cmp(n),RC=(i,n)=>{if(!KI(i,n))return!1;const o=[i],s=[n],l=o.push.bind(o),p=s.push.bind(s);for(;o.length&&s.length;){const E=o.pop(),$=s.pop();if(!KI(E,$)||(E._children_backwards(l),$._children_backwards(p),o.length!==s.length))return!1}return o.length==0&&s.length==0},zt=()=>!0;He.prototype.shallow_cmp=function(){throw new Error("did not find a shallow_cmp function for "+this.constructor.name)};Po.prototype.shallow_cmp=zt;Dn.prototype.shallow_cmp=function(i){return this.value===i.value};rt.prototype.shallow_cmp=zt;Di.prototype.shallow_cmp=zt;qt.prototype.shallow_cmp=zt;$n.prototype.shallow_cmp=function(i){return this.label.name===i.label.name};$o.prototype.shallow_cmp=zt;Bo.prototype.shallow_cmp=zt;Oi.prototype.shallow_cmp=function(i){return(this.init==null?i.init==null:this.init===i.init)&&(this.condition==null?i.condition==null:this.condition===i.condition)&&(this.step==null?i.step==null:this.step===i.step)};sn.prototype.shallow_cmp=zt;$s.prototype.shallow_cmp=zt;Zn.prototype.shallow_cmp=zt;si.prototype.shallow_cmp=zt;Nt.prototype.shallow_cmp=zt;ot.prototype.shallow_cmp=function(i){return this.is_generator===i.is_generator&&this.async===i.async};jt.prototype.shallow_cmp=function(i){return this.is_array===i.is_array};Cr.prototype.shallow_cmp=zt;mn.prototype.shallow_cmp=zt;fo.prototype.shallow_cmp=function(i){return this.value===i.value};Fu.prototype.shallow_cmp=zt;Vr.prototype.shallow_cmp=zt;Qn.prototype.shallow_cmp=zt;er.prototype.shallow_cmp=function(i){return this.is_star===i.is_star};Yt.prototype.shallow_cmp=function(i){return this.alternative==null?i.alternative==null:this.alternative===i.alternative};gn.prototype.shallow_cmp=zt;Vo.prototype.shallow_cmp=zt;nr.prototype.shallow_cmp=function(i){return this.body===i.body&&(this.bcatch==null?i.bcatch==null:this.bcatch===i.bcatch)&&(this.bfinally==null?i.bfinally==null:this.bfinally===i.bfinally)};Eo.prototype.shallow_cmp=function(i){return this.argname==null?i.argname==null:this.argname===i.argname};dl.prototype.shallow_cmp=zt;Un.prototype.shallow_cmp=zt;Ho.prototype.shallow_cmp=function(i){return this.value==null?i.value==null:this.value===i.value};Br.prototype.shallow_cmp=zt;gr.prototype.shallow_cmp=function(i){return(this.imported_name==null?i.imported_name==null:this.imported_name===i.imported_name)&&(this.imported_names==null?i.imported_names==null:this.imported_names===i.imported_names)&&(this.attributes==null?i.attributes==null:this.attributes===i.attributes)};Go.prototype.shallow_cmp=zt;ki.prototype.shallow_cmp=function(i){return(this.exported_definition==null?i.exported_definition==null:this.exported_definition===i.exported_definition)&&(this.exported_value==null?i.exported_value==null:this.exported_value===i.exported_value)&&(this.exported_names==null?i.exported_names==null:this.exported_names===i.exported_names)&&(this.attributes==null?i.attributes==null:this.attributes===i.attributes)&&this.module_name===i.module_name&&this.is_default===i.is_default};Qe.prototype.shallow_cmp=zt;Ct.prototype.shallow_cmp=zt;lt.prototype.shallow_cmp=zt;Ci.prototype.shallow_cmp=zt;ni.prototype.shallow_cmp=function(i){return this.property===i.property};mr.prototype.shallow_cmp=function(i){return this.property===i.property};Jt.prototype.shallow_cmp=function(i){return this.operator===i.operator};Oe.prototype.shallow_cmp=function(i){return this.operator===i.operator};Ar.prototype.shallow_cmp=zt;It.prototype.shallow_cmp=zt;Ut.prototype.shallow_cmp=zt;Wt.prototype.shallow_cmp=zt;Ti.prototype.shallow_cmp=zt;Zt.prototype.shallow_cmp=function(i){return this.key===i.key&&this.quote===i.quote};Gr.prototype.shallow_cmp=function(i){return this.static===i.static};yr.prototype.shallow_cmp=function(i){return this.static===i.static};an.prototype.shallow_cmp=function(i){return this.static===i.static};Xn.prototype.shallow_cmp=function(i){return this.static===i.static};Mt.prototype.shallow_cmp=function(i){return(this.name==null?i.name==null:this.name===i.name)&&(this.extends==null?i.extends==null:this.extends===i.extends)};ir.prototype.shallow_cmp=function(i){return this.static===i.static&&(typeof this.key=="string"?this.key===i.key:!0)};Kn.prototype.shallow_cmp=function(i){return this.static===i.static};Ft.prototype.shallow_cmp=function(i){return this.name===i.name};hl.prototype.shallow_cmp=zt;ln.prototype.shallow_cmp=zt;fl.prototype.shallow_cmp=zt;wt.prototype.shallow_cmp=function(i){return this.value===i.value};Tt.prototype.shallow_cmp=function(i){return this.value===i.value};Dr.prototype.shallow_cmp=function(i){return this.value===i.value};Vn.prototype.shallow_cmp=function(i){return this.value.flags===i.value.flags&&this.value.source===i.value.source};vs.prototype.shallow_cmp=zt;const $h=1,NC=2;let il=null,nl=null,rl=null;class bl{constructor(n,o,s){this.name=o.name,this.orig=[o],this.init=s,this.eliminated=0,this.assignments=0,this.scope=n,this.replaced=0,this.global=!1,this.export=0,this.mangled_name=null,this.undeclared=!1,this.id=bl.next_id++,this.chained=!1,this.direct_access=!1,this.escaped=0,this.recursive_refs=0,this.references=[],this.should_replace=void 0,this.single_use=!1,this.fixed=!1,Object.seal(this)}fixed_value(){return!this.fixed||this.fixed instanceof He?this.fixed:this.fixed()}unmangleable(n){return n||(n={}),il&&il.has(this.id)&&ll(n.keep_fnames,this.orig[0].name)?!0:this.global&&!n.toplevel||this.export&$h||this.undeclared||!n.eval&&this.scope.pinned()||(this.orig[0]instanceof Kr||this.orig[0]instanceof To)&&ll(n.keep_fnames,this.orig[0].name)||this.orig[0]instanceof nn||(this.orig[0]instanceof Dh||this.orig[0]instanceof Nh)&&ll(n.keep_classnames,this.orig[0].name)}mangle(n){const o=n.cache&&n.cache.props;if(this.global&&o&&o.has(this.name))this.mangled_name=o.get(this.name);else if(!this.mangled_name&&!this.unmangleable(n)){var s=this.scope,l=this.orig[0];n.ie8&&l instanceof Kr&&(s=s.parent_scope);const p=mm(this);this.mangled_name=p?p.mangled_name||p.name:s.next_mangled(n,this),this.global&&o&&o.set(this.name,this.mangled_name)}}}bl.next_id=1;function mm(i){if(i.orig[0]instanceof Rr&&i.scope.is_block_scope())return i.scope.get_defun_scope().variables.get(i.name)}ht.DEFMETHOD("figure_out_scope",function(i,{parent_scope:n=void 0,toplevel:o=this}={}){if(i=po(i,{cache:null,ie8:!1,safari10:!1,module:!1}),!(o instanceof si))throw new Error("Invalid toplevel scope");var s=this.parent_scope=n,l=new Map,p=null,E=null,$=[],L=new Zi((y,N)=>{if(y.is_block_scope()){const k=s;if(y.block_scope=s=new ht(y),s._block_scope=!0,s.init_scope_vars(k),s.uses_with=k.uses_with,s.uses_eval=k.uses_eval,i.safari10&&(y instanceof Oi||y instanceof sn||y instanceof $s)&&$.push(s),y instanceof gn){const H=s;s=k,y.expression.walk(L),s=H;for(let f=0;f<y.body.length;f++)y.body[f].walk(L)}else N();return s=k,!0}if(y instanceof jt){const k=E;return E=y,N(),E=k,!0}if(y instanceof ht){y.init_scope_vars(s);var P=s,F=p,K=l;return p=s=y,l=new Map,N(),s=P,p=F,l=K,!0}if(y instanceof $n){var g=y.label;if(l.has(g.name))throw new Error(dh("Label {name} defined twice",g));return l.set(g.name,g),N(),l.delete(g.name),!0}if(y instanceof Zn){for(var d=s;d;d=d.parent_scope)d.uses_with=!0;return}if(y instanceof Ft&&(y.scope=s),y instanceof Pu&&(y.thedef=y,y.references=[]),y instanceof Kr)p.def_function(y,y.name=="arguments"?void 0:p);else if(y instanceof To){const k=p.parent_scope;y.scope=L.directives["use strict"]?k:k.get_defun_scope(),R(y.scope.def_function(y,p),1)}else if(y instanceof Dh)R(p.def_variable(y,p),1);else if(y instanceof hs)s.def_variable(y);else if(y instanceof Nh)R((y.scope=p.parent_scope).def_function(y,p),1);else if(y instanceof Wo||y instanceof _l||y instanceof Ts||y instanceof bs||y instanceof Rr){var C;if(y instanceof mo?C=s.def_variable(y,null):C=p.def_variable(y,y.TYPE=="SymbolVar"?null:void 0),C.orig.every(k=>k===y?!0:y instanceof mo?k instanceof Kr:!(k instanceof _l||k instanceof Ts||k instanceof bs))||gh(`"${y.name}" is redeclared`,y.start.file,y.start.line,y.start.col,y.start.pos),y instanceof Xi||R(C,2),p!==s){y.mark_enclosed();var C=s.find_variable(y);y.thedef!==C&&(y.thedef=C,y.reference())}}else if(y instanceof _m){var x=l.get(y.name);if(!x)throw new Error(dh("Undefined label {name} [{line},{col}]",{name:y.name,line:y.start.line,col:y.start.col}));y.thedef=x}!(s instanceof si)&&(y instanceof ki||y instanceof gr)&&gh(`"${y.TYPE}" statement may only appear at the top level`,y.start.file,y.start.line,y.start.col,y.start.pos)});i.module&&(L.directives["use strict"]=!0),this.walk(L);function R(y,N){if(E){var P=0;do N++;while(L.parent(P++)!==E)}var F=L.parent(N);if(y.export=F instanceof ki?$h:0){var K=F.exported_definition;(K instanceof fi||K instanceof Or)&&F.is_default&&(y.export=NC)}}this instanceof si&&(this.globals=new Map);var L=new Zi(y=>{if(y instanceof Vr&&y.label)return y.label.thedef.references.push(y),!0;if(y instanceof Ge){var N=y.name;if(N=="eval"&&L.parent()instanceof Qe)for(var P=y.scope;P&&!P.uses_eval;P=P.parent_scope)P.uses_eval=!0;var F;return L.parent()instanceof Br&&L.parent(1).module_name||!(F=y.scope.find_variable(N))?(F=o.def_global(y),y instanceof ta&&(F.export=$h)):F.scope instanceof ot&&N=="arguments"&&(F.scope.get_defun_scope().uses_arguments=!0),y.thedef=F,y.reference(),y.scope.is_block_scope()&&!(F.orig[0]instanceof mo)&&(y.scope=y.scope.get_defun_scope()),!0}var K;if(y instanceof Rr&&(K=mm(y.definition())))for(var P=y.scope;P&&(Qs(P.enclosed,K),P!==K.scope);)P=P.parent_scope});if(this.walk(L),(i.ie8||i.safari10)&&Ki(this,y=>{if(y instanceof Rr){var N=y.name,P=y.thedef.references,F=y.scope.get_defun_scope(),K=F.find_variable(N)||o.globals.get(N)||F.def_variable(y);return P.forEach(function(g){g.thedef=K,g.reference()}),y.thedef=K,y.reference(),!0}}),i.safari10)for(const y of $)y.parent_scope.variables.forEach(function(N){Qs(y.enclosed,N)})});si.DEFMETHOD("def_global",function(i){var n=this.globals,o=i.name;if(n.has(o))return n.get(o);var s=new bl(this,i);return s.undeclared=!0,s.global=!0,n.set(o,s),s});ht.DEFMETHOD("init_scope_vars",function(i){this.variables=new Map,this.uses_with=!1,this.uses_eval=!1,this.parent_scope=i,this.enclosed=[],this.cname=-1});ht.DEFMETHOD("conflicting_def",function(i){return this.enclosed.find(n=>n.name===i)||this.variables.has(i)||this.parent_scope&&this.parent_scope.conflicting_def(i)});ht.DEFMETHOD("conflicting_def_shallow",function(i){return this.enclosed.find(n=>n.name===i)||this.variables.has(i)});ht.DEFMETHOD("add_child_scope",function(i){if(i.parent_scope===this)return;i.parent_scope=this,i instanceof di&&this instanceof ot&&!this.uses_arguments&&(this.uses_arguments=Ki(i,l=>{if(l instanceof Ge&&l.scope instanceof ot&&l.name==="arguments")return Hn;if(l instanceof ot&&!(l instanceof di))return!0})),this.uses_with=this.uses_with||i.uses_with,this.uses_eval=this.uses_eval||i.uses_eval;const n=(()=>{const l=[];let p=this;do l.push(p);while(p=p.parent_scope);return l.reverse(),l})(),o=new Set(i.enclosed),s=[];for(const l of n){s.forEach(p=>Qs(l.enclosed,p));for(const p of l.variables.values())o.has(p)&&(Qs(s,p),Qs(l.enclosed,p))}});function DC(i){const n=new Set;for(const o of new Set(i))(function s(l){l==null||n.has(l)||(n.add(l),s(l.parent_scope))})(o);return[...n]}ht.DEFMETHOD("create_symbol",function(i,{source:n,tentative_name:o,scope:s,conflict_scopes:l=[s],init:p=null}={}){let E;if(l=DC(l),o){o=E=o.replace(/(?:^[^a-z_$]|[^a-z0-9_$])/ig,"_");let R=0;for(;l.find(M=>M.conflicting_def_shallow(E));)E=o+"$"+R++}if(!E)throw new Error("No symbol name could be generated in create_symbol()");const $=j(i,n,{name:E,scope:s});return this.def_variable($,p||null),$.mark_enclosed(),$});He.DEFMETHOD("is_block_scope",xt);Mt.DEFMETHOD("is_block_scope",xt);ot.DEFMETHOD("is_block_scope",xt);si.DEFMETHOD("is_block_scope",xt);Vo.DEFMETHOD("is_block_scope",xt);Di.DEFMETHOD("is_block_scope",on);ht.DEFMETHOD("is_block_scope",function(){return this._block_scope||!1});pr.DEFMETHOD("is_block_scope",on);ot.DEFMETHOD("init_scope_vars",function(){ht.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1,this.def_variable(new Xi({name:"arguments",start:this.start,end:this.end}))});di.DEFMETHOD("init_scope_vars",function(){ht.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1});Ft.DEFMETHOD("mark_enclosed",function(){for(var i=this.definition(),n=this.scope;n&&(Qs(n.enclosed,i),n!==i.scope);)n=n.parent_scope});Ft.DEFMETHOD("reference",function(){this.definition().references.push(this),this.mark_enclosed()});ht.DEFMETHOD("find_variable",function(i){return i instanceof Ft&&(i=i.name),this.variables.get(i)||this.parent_scope&&this.parent_scope.find_variable(i)});ht.DEFMETHOD("def_function",function(i,n){var o=this.def_variable(i,n);return(!o.init||o.init instanceof fi)&&(o.init=n),o});ht.DEFMETHOD("def_variable",function(i,n){var o=this.variables.get(i.name);return o?(o.orig.push(i),o.init&&(o.scope!==i.scope||o.init instanceof ii)&&(o.init=n)):(o=new bl(this,i,n),this.variables.set(i.name,o),o.global=!this.parent_scope),i.thedef=o});function $m(i,n){let o;rl&&(o=i.get_defun_scope())&&rl.has(o)&&(i=o);var s=i.enclosed,l=n.nth_identifier;e:for(;;){var p=l.get(++i.cname);if(!gs.has(p)&&!n.reserved.has(p)){if(nl&&nl.has(p))continue e;for(let E=s.length;--E>=0;){const $=s[E],R=$.mangled_name||$.unmangleable(n)&&$.name;if(p==R)continue e}return p}}}ht.DEFMETHOD("next_mangled",function(i){return $m(this,i)});si.DEFMETHOD("next_mangled",function(i){let n;const o=this.mangled_names;do n=$m(this,i);while(o.has(n));return n});ii.DEFMETHOD("next_mangled",function(i,n){for(var o=n.orig[0]instanceof Xi&&this.name&&this.name.definition(),s=o?o.mangled_name||o.name:null;;){var l=$m(this,i);if(!s||s!=l)return l}});Ft.DEFMETHOD("unmangleable",function(i){var n=this.definition();return!n||n.unmangleable(i)});Pu.DEFMETHOD("unmangleable",xt);Ft.DEFMETHOD("unreferenced",function(){return!this.definition().references.length&&!this.scope.pinned()});Ft.DEFMETHOD("definition",function(){return this.thedef});Ft.DEFMETHOD("global",function(){return this.thedef.global});function Lh(i){return i=po(i,{eval:!1,nth_identifier:Uu,ie8:!1,keep_classnames:!1,keep_fnames:!1,module:!1,reserved:[],toplevel:!1}),i.module&&(i.toplevel=!0),!Array.isArray(i.reserved)&&!(i.reserved instanceof Set)&&(i.reserved=[]),i.reserved=new Set(i.reserved),i.reserved.add("arguments"),i}si.DEFMETHOD("mangle_names",function(i){i=Lh(i);var n=i.nth_identifier,o=-1,s=[];i.keep_fnames&&(il=new Set);const l=this.mangled_names=new Set;nl=new Set,i.cache&&(this.globals.forEach(E),i.cache.props&&i.cache.props.forEach(function($){l.add($)}));var p=new Zi(function($,R){if($ instanceof $n){var M=o;return R(),o=M,!0}if($ instanceof fi&&!(p.parent()instanceof ht)&&(rl=rl||new Set,rl.add($.parent_scope.get_defun_scope())),$ instanceof ht){$.variables.forEach(E);return}if($.is_block_scope()){$.block_scope.variables.forEach(E);return}if(il&&$ instanceof vi&&$.value instanceof ot&&!$.value.name&&ll(i.keep_fnames,$.name.name)){il.add($.name.definition().id);return}if($ instanceof Pu){let L;do L=n.get(++o);while(gs.has(L));return $.mangled_name=L,!0}if(!(i.ie8||i.safari10)&&$ instanceof Rr){s.push($.definition());return}});this.walk(p),(i.keep_fnames||i.keep_classnames)&&s.forEach($=>{$.name.length<6&&$.unmangleable(i)&&nl.add($.name)}),s.forEach($=>{$.mangle(i)}),il=null,nl=null,rl=null;function E($){$.export&$h?nl.add($.name):i.reserved.has($.name)||s.push($)}});si.DEFMETHOD("find_colliding_names",function(i){const n=i.cache&&i.cache.props,o=new Set;return i.reserved.forEach(s),this.globals.forEach(l),this.walk(new Zi(function(p){p instanceof ht&&p.variables.forEach(l),p instanceof Rr&&l(p.definition())})),o;function s(p){o.add(p)}function l(p){var E=p.name;if(p.global&&n&&n.has(E))E=n.get(E);else if(!p.unmangleable(i))return;s(E)}});si.DEFMETHOD("expand_names",function(i){i=Lh(i);var n=i.nth_identifier;n.reset&&n.sort&&(n.reset(),n.sort());var o=this.find_colliding_names(i),s=0;this.globals.forEach(p),this.walk(new Zi(function(E){E instanceof ht&&E.variables.forEach(p),E instanceof Rr&&p(E.definition())}));function l(){var E;do E=n.get(s++);while(o.has(E)||gs.has(E));return E}function p(E){if(E.global&&i.cache||E.unmangleable(i)||i.reserved.has(E.name))return;const $=mm(E),R=E.name=$?$.name:l();E.orig.forEach(function(M){M.name=R}),E.references.forEach(function(M){M.name=R})}});He.DEFMETHOD("tail_node",da);Ct.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]});si.DEFMETHOD("compute_char_frequency",function(i){i=Lh(i);var n=i.nth_identifier;if(!n.reset||!n.consider||!n.sort)return;n.reset();try{He.prototype.print=function(s,l){this._print(s,l),this instanceof Ft&&!this.unmangleable(i)?n.consider(this.name,-1):i.properties&&(this instanceof mr?n.consider("#"+this.property,-1):this instanceof ni?n.consider(this.property,-1):this instanceof Li&&o(this.property))},n.consider(this.print_to_string(),1)}finally{He.prototype.print=He.prototype._print}n.sort();function o(s){s instanceof wt?n.consider(s.value,-1):s instanceof It?(o(s.consequent),o(s.alternative)):s instanceof Ct&&o(s.tail_node())}});const Uu=(()=>{const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_".split(""),n="0123456789".split("");let o,s;function l(){s=new Map,i.forEach(function(M){s.set(M,0)}),n.forEach(function(M){s.set(M,0)})}function p(M,L){for(var y=M.length;--y>=0;)s.set(M[y],s.get(M[y])+L)}function E(M,L){return s.get(L)-s.get(M)}function $(){o=kI(i,E).concat(kI(n,E))}l(),$();function R(M){var L="",y=54;M++;do M--,L+=o[M%y],M=Math.floor(M/y),y=64;while(M>0);return L}return{get:R,consider:p,reset:l,sort:$}})();let Eh;He.prototype.size=function(i,n){Eh=i&&i._mangle_options;let o=0;return pm(this,(s,l)=>{if(o+=s._size(l),s instanceof di&&s.is_braceless())return o+=s.body[0].value._size(l),!0},n||i&&i.stack),Eh=void 0,o};He.prototype._size=()=>0;Po.prototype._size=()=>8;Dn.prototype._size=function(){return 2+this.value.length};const hi=i=>i.length&&i.length-1;Di.prototype._size=function(){return 2+hi(this.body)};si.prototype._size=function(){return hi(this.body)};qt.prototype._size=()=>1;$n.prototype._size=()=>2;$o.prototype._size=()=>9;Bo.prototype._size=()=>7;Oi.prototype._size=()=>8;sn.prototype._size=()=>8;Zn.prototype._size=()=>6;Nt.prototype._size=()=>3;const wh=i=>(i.is_generator?1:0)+(i.async?6:0);Uo.prototype._size=function(){return wh(this)+4+hi(this.argnames)+hi(this.body)};ii.prototype._size=function(i){return!!Wr(i)*2+wh(this)+12+hi(this.argnames)+hi(this.body)};fi.prototype._size=function(){return wh(this)+13+hi(this.argnames)+hi(this.body)};di.prototype._size=function(){let i=2+hi(this.argnames);this.argnames.length===1&&this.argnames[0]instanceof Ft||(i+=2);const n=this.is_braceless()?0:hi(this.body)+2;return wh(this)+i+n};jt.prototype._size=()=>2;mn.prototype._size=function(){return 2+Math.floor(this.segments.length/2)*3};fo.prototype._size=function(){return this.value.length};_i.prototype._size=function(){return this.value?7:6};Lu.prototype._size=()=>6;fr.prototype._size=function(){return this.label?6:5};Es.prototype._size=function(){return this.label?9:8};Yt.prototype._size=()=>4;gn.prototype._size=function(){return 8+hi(this.body)};Hr.prototype._size=function(){return 5+hi(this.body)};_a.prototype._size=function(){return 8+hi(this.body)};nr.prototype._size=()=>3;Eo.prototype._size=function(){let i=7+hi(this.body);return this.argname&&(i+=2),i};dl.prototype._size=function(){return 7+hi(this.body)};Ei.prototype._size=function(){return 4+hi(this.definitions)};oa.prototype._size=function(){return 4+hi(this.definitions)};sa.prototype._size=function(){return 6+hi(this.definitions)};qn.prototype._size=function(){return(this.await?6:0)+6+hi(this.definitions)};Ho.prototype._size=function(){return this.value?1:0};Br.prototype._size=function(){return this.name?4:0};gr.prototype._size=function(){let i=6;return this.imported_name&&(i+=1),(this.imported_name||this.imported_names)&&(i+=5),this.imported_names&&(i+=2+hi(this.imported_names)),i};Go.prototype._size=()=>11;ki.prototype._size=function(){let i=7+(this.is_default?8:0);return this.exported_value&&(i+=this.exported_value._size()),this.exported_names&&(i+=2+hi(this.exported_names)),this.module_name&&(i+=5),i};Qe.prototype._size=function(){return this.optional?4+hi(this.args):2+hi(this.args)};yn.prototype._size=function(){return 6+hi(this.args)};Ct.prototype._size=function(){return hi(this.expressions)};ni.prototype._size=function(){return this.optional?this.property.length+2:this.property.length+1};mr.prototype._size=function(){return this.optional?this.property.length+3:this.property.length+2};Li.prototype._size=function(){return this.optional?4:2};Jt.prototype._size=function(){return this.operator==="typeof"?7:this.operator==="void"?5:this.operator.length};Oe.prototype._size=function(i){if(this.operator==="in")return 4;let n=this.operator.length;return(this.operator==="+"||this.operator==="-")&&this.right instanceof Jt&&this.right.operator===this.operator&&(n+=1),this.needs_parens(i)&&(n+=2),n};It.prototype._size=()=>3;Ut.prototype._size=function(){return 2+hi(this.elements)};Wt.prototype._size=function(i){let n=2;return Wr(i)&&(n+=2),n+hi(this.properties)};const Mh=i=>typeof i=="string"?i.length:0;Zt.prototype._size=function(){return Mh(this.key)+1};const xh=i=>i?7:0;yr.prototype._size=function(){return 5+xh(this.static)+Mh(this.key)};Gr.prototype._size=function(){return 5+xh(this.static)+Mh(this.key)};an.prototype._size=function(){return xh(this.static)+Mh(this.key)};Xn.prototype._size=function(){return an.prototype._size.call(this)+1};tr.prototype._size=function(){return an.prototype._size.call(this)+4};$r.prototype._size=function(){return an.prototype._size.call(this)+4};Ar.prototype._size=function(){return 5};Mt.prototype._size=function(){return(this.name?8:7)+(this.extends?8:0)};En.prototype._size=function(){return 8+hi(this.body)};ir.prototype._size=function(){return xh(this.static)+(typeof this.key=="string"?this.key.length+2:0)+(this.value?1:0)};Kn.prototype._size=function(){return ir.prototype._size.call(this)+1};Ft.prototype._size=function(){return Eh&&this.thedef&&!this.thedef.unmangleable(Eh)?1:this.name.length};Xo.prototype._size=function(){return this.name.length};Ge.prototype._size=Wi.prototype._size=function(){return this.name==="arguments"?9:Ft.prototype._size.call(this)};hl.prototype._size=()=>10;ul.prototype._size=function(){return this.name.length};_s.prototype._size=function(){return this.name.length};ln.prototype._size=()=>4;fl.prototype._size=()=>5;wt.prototype._size=function(){return this.value.length+2};Tt.prototype._size=function(){const{value:i}=this;return i===0?1:i>0&&Math.floor(i)===i?Math.floor(Math.log10(i)+1):i.toString().length};Dr.prototype._size=function(){return this.value.length};Vn.prototype._size=function(){return this.value.toString().length};Fn.prototype._size=()=>4;Bu.prototype._size=()=>3;Tl.prototype._size=()=>6;Pn.prototype._size=()=>0;Ss.prototype._size=()=>8;Jn.prototype._size=()=>4;Ko.prototype._size=()=>5;Qn.prototype._size=()=>6;er.prototype._size=()=>6;const ps=1,wg=2,Mg=4,Em=8,wu=16,gl=32,Is=256,lm=512,Tm=1024,kC=Is|lm|Tm,rn=(i,n)=>i.flags&n,Wn=(i,n)=>{i.flags|=n},Sl=(i,n)=>{i.flags&=~n};function bm(i,n){return n instanceof Ct?i.push(...n.expressions):i.push(n),i}function yt(i,n){if(n.length==1)return n[0];if(n.length==0)throw new Error("trying to create a sequence with length zero!");return j(Ct,i,{expressions:n.reduce(bm,[])})}function Sm(i){return j(ii,i,{uses_arguments:!1,argnames:[],body:[],is_generator:!1,async:!1,variables:new Map,uses_with:!1,uses_eval:!1,parent_scope:null,enclosed:[],cname:0,block_scope:void 0})}function kn(i,n){switch(typeof i){case"string":return j(wt,n,{value:i});case"number":return isNaN(i)?j(Bu,n):isFinite(i)?1/i<0?j(ut,n,{operator:"-",expression:j(Tt,n,{value:-i})}):j(Tt,n,{value:i}):i<0?j(ut,n,{operator:"-",expression:j(Ss,n)}):j(Ss,n);case"bigint":return j(Dr,n,{value:i.toString()});case"boolean":return j(i?Jn:Ko,n);case"undefined":return Ai(n);default:if(i===null)return j(Fn,n,{value:null});if(i instanceof RegExp)return j(Vn,n,{value:{source:Oh(i.source),flags:i.flags}});throw new Error(dh("Can't handle constant of type: {type}",{type:typeof i}))}}function zo(i,n){return i.size()>n.size()?n:i}function LC(i,n){return zo(j(rt,i,{body:i}),j(rt,n,{body:n})).body}function jn(i,n,o){return Wr(i)?LC(n,o):zo(n,o)}function tA(i){if(i instanceof Gt)return i.getValue();if(!(i instanceof ut&&i.operator=="void"&&i.expression instanceof Gt))return i}function iA(i,n){if(n=tA(n),!(n instanceof He)){var o;if(i instanceof Ut){var s=i.elements;if(n=="length")return kn(s.length,i);typeof n=="number"&&n in s&&(o=s[n])}else if(i instanceof Wt){n=""+n;for(var l=i.properties,p=l.length;--p>=0;){var E=l[p];if(!(E instanceof Zt))return;!o&&l[p].key===n&&(o=l[p].value)}}return o instanceof Ge&&o.fixed_value()||o}}function Im(i,n){var o=!1,s=new Zi(function(l){if(o||l instanceof ht)return!0;if(l instanceof Vr&&s.loopcontrol_target(l)===i)return o=!0});return n instanceof $n&&s.push(n),s.push(i),i.body.walk(s),o}function la(i,n,o){if(nA(i,n,o)){const s=j(Tt,n,{value:0});return yt(n,[s,o])}else return o}function nA(i,n,o){return i instanceof ut&&i.operator=="delete"||i instanceof Qe&&i.expression===n&&(o instanceof Ci||o instanceof lt||o instanceof Ge&&o.name=="eval")}function Fh(i){return i instanceof di||i instanceof ii}function vm(i){return i.TYPE!="Call"?!1:i.expression instanceof ii||vm(i.expression)}function fs(i){return i===null||i instanceof qt?!0:i instanceof bt?i.body.length==0:!1}const zI=Vt("Infinity NaN undefined");function rA(i){return i instanceof Ss||i instanceof Bu||i instanceof Tl}function Yd(i,n){if(!(i instanceof Ge))return!1;for(var o=i.definition().orig,s=o.length;--s>=0;)if(o[s]instanceof n)return!0}function Th(i){return!(i instanceof Or||i instanceof fi||i instanceof oa||i instanceof sa||i instanceof qn||i instanceof ki||i instanceof gr)}function jd(i){if(i===null)return[];if(i instanceof bt)return i.body;if(i instanceof qt)return[];if(i instanceof Yi)return[i];throw new Error("Can't convert thing to statement array")}function oA(i,n){const o=s=>{if(s instanceof Ge&&n.includes(s.definition()))return Hn};return pm(i,(s,l)=>{if(s instanceof ht&&s!==i){var p=l.parent();return p instanceof Qe&&p.expression===s&&!(s.async||s.is_generator)?void 0:Ki(s,o)?Hn:!0}})}function Ph(i,n){for(var o,s=0;o=i.parent(s);s++)if(o instanceof ot||o instanceof Mt){var l=o.name;if(l&&l.definition()===n)return!0}return!1}function sA(i,n){return n.top_retain&&i instanceof fi&&rn(i,Tm)&&i.name&&n.top_retain(i.name.definition())}function Am(i){const n=new Map;for(var o of Object.keys(i))n.set(o,Vt(i[o]));return(l,p)=>{const E=n.get(l);return E!=null&&E.has(p)}}const Bh=new Set(["Number","String","Array","Object","Function","Promise"]),Zs=["constructor","toString","valueOf"],aA=Am({Array:["at","flat","includes","indexOf","join","lastIndexOf","slice",...Zs],Boolean:Zs,Function:Zs,Number:["toExponential","toFixed","toPrecision",...Zs],Object:Zs,RegExp:["test",...Zs],String:["at","charAt","charCodeAt","charPointAt","concat","endsWith","fromCharCode","fromCodePoint","includes","indexOf","italics","lastIndexOf","localeCompare","match","matchAll","normalize","padStart","padEnd","repeat","replace","replaceAll","search","slice","split","startsWith","substr","substring","repeat","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimEnd","trimStart",...Zs]}),lA=Am({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","hasOwn","keys"],String:["fromCharCode"]}),wC=Am({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),zr=i=>i instanceof Ge&&i.definition().undeclared,Om=Vt("<<< >> << & | ^ ~"),ua=Vt("&& || ??"),Uh=Vt("delete ++ --");(function(i){const n=Vt("! delete"),o=Vt("in instanceof == != === !== < <= >= >");i(He,xt),i(ut,function(){return n.has(this.operator)}),i(Oe,function(){return o.has(this.operator)||ua.has(this.operator)&&this.left.is_boolean()&&this.right.is_boolean()}),i(It,function(){return this.consequent.is_boolean()&&this.alternative.is_boolean()}),i(Ot,function(){return this.operator=="="&&this.right.is_boolean()}),i(Ct,function(){return this.tail_node().is_boolean()}),i(Jn,on),i(Ko,on)})(function(i,n){i.DEFMETHOD("is_boolean",n)});(function(i){i(He,xt),i(Tt,on);const n=Vt("+ - ~ ++ --");i(Jt,function(s){return n.has(this.operator)&&this.expression.is_number(s)});const o=Vt("- * / % & | ^ << >> >>>");i(Oe,function(s){return this.operator==="+"?this.left.is_number(s)&&this.right.is_number_or_bigint(s)||this.right.is_number(s)&&this.left.is_number_or_bigint(s):o.has(this.operator)?this.left.is_number(s)||this.right.is_number(s):!1}),i(Ot,function(s){return(this.operator==="="||o.has(this.operator.slice(0,-1)))&&this.right.is_number(s)}),i(Ct,function(s){return this.tail_node().is_number(s)}),i(It,function(s){return this.consequent.is_number(s)&&this.alternative.is_number(s)})})(function(i,n){i.DEFMETHOD("is_number",n)});(function(i){i(He,xt),i(Dr,on);const n=Vt("+ - ~ ++ --");i(Jt,function(s){return n.has(this.operator)&&this.expression.is_bigint(s)});const o=Vt("- * / % & | ^ << >>");i(Oe,function(s){return this.operator==="+"?this.left.is_bigint(s)&&this.right.is_number_or_bigint(s)||this.right.is_bigint(s)&&this.left.is_number_or_bigint(s):o.has(this.operator)?this.left.is_bigint(s)||this.right.is_bigint(s):!1}),i(Ot,function(s){return(o.has(this.operator.slice(0,-1))||this.operator=="=")&&this.right.is_bigint(s)}),i(Ct,function(s){return this.tail_node().is_bigint(s)}),i(It,function(s){return this.consequent.is_bigint(s)&&this.alternative.is_bigint(s)})})(function(i,n){i.DEFMETHOD("is_bigint",n)});(function(i){i(He,xt),i(Tt,on),i(Dr,on);const n=Vt("+ - ~ ++ --");i(Jt,function(s){return n.has(this.operator)});const o=Vt("- * / % & | ^ << >>");i(Oe,function(s){return this.operator==="+"?this.left.is_number_or_bigint(s)&&this.right.is_number_or_bigint(s):o.has(this.operator)}),i(Ot,function(s){return o.has(this.operator.slice(0,-1))||this.operator=="="&&this.right.is_number_or_bigint(s)}),i(Ct,function(s){return this.tail_node().is_number_or_bigint(s)}),i(It,function(s){return this.consequent.is_number_or_bigint(s)&&this.alternative.is_number_or_bigint(s)})})(function(i,n){i.DEFMETHOD("is_number_or_bigint",n)});(function(i){i(He,xt),i(Tt,function(n){return this.value===(this.value|0)}),i(ut,function(n){return this.operator=="~"?this.expression.is_number(n):this.operator==="+"?this.expression.is_32_bit_integer(n):!1}),i(Oe,function(n){return Om.has(this.operator)&&(this.left.is_number(n)||this.right.is_number(n))})})(function(i,n){i.DEFMETHOD("is_32_bit_integer",n)});(function(i){i(He,xt),i(wt,on),i(mn,on),i(ut,function(){return this.operator=="typeof"}),i(Oe,function(n){return this.operator=="+"&&(this.left.is_string(n)||this.right.is_string(n))}),i(Ot,function(n){return(this.operator=="="||this.operator=="+=")&&this.right.is_string(n)}),i(Ct,function(n){return this.tail_node().is_string(n)}),i(It,function(n){return this.consequent.is_string(n)&&this.alternative.is_string(n)})})(function(i,n){i.DEFMETHOD("is_string",n)});function Ur(i,n){return rn(i,Em)||i instanceof Tl||i instanceof ut&&i.operator=="void"&&!i.expression.has_side_effects(n)}function uA(i,n){let o;return i instanceof Fn||Ur(i,n)||i instanceof Ge&&(o=i.definition().fixed)instanceof He&&Xr(o,n)}function ml(i,n){return i instanceof lt||i instanceof Qe?i.optional&&uA(i.expression,n)||ml(i.expression,n):i instanceof Ci?ml(i.expression,n):!1}function Xr(i,n){return uA(i,n)?!0:ml(i,n)}(function(i){i(He,on),i(qt,xt),i(Gt,xt),i(ln,xt);function n(o,s){for(var l=o.length;--l>=0;)if(o[l].has_side_effects(s))return!0;return!1}i(Di,function(o){return n(this.body,o)}),i(Qe,function(o){return!this.is_callee_pure(o)&&(!this.expression.is_call_pure(o)||this.expression.has_side_effects(o))?!0:n(this.args,o)}),i(gn,function(o){return this.expression.has_side_effects(o)||n(this.body,o)}),i(Hr,function(o){return this.expression.has_side_effects(o)||n(this.body,o)}),i(nr,function(o){return this.body.has_side_effects(o)||this.bcatch&&this.bcatch.has_side_effects(o)||this.bfinally&&this.bfinally.has_side_effects(o)}),i(Yt,function(o){return this.condition.has_side_effects(o)||this.body&&this.body.has_side_effects(o)||this.alternative&&this.alternative.has_side_effects(o)}),i(Go,xt),i($n,function(o){return this.body.has_side_effects(o)}),i(rt,function(o){return this.body.has_side_effects(o)}),i(ot,xt),i(Mt,function(o){return this.extends&&this.extends.has_side_effects(o)?!0:n(this.properties,o)}),i(En,function(o){return n(this.body,o)}),i(Oe,function(o){return this.left.has_side_effects(o)||this.right.has_side_effects(o)}),i(Ot,on),i(It,function(o){return this.condition.has_side_effects(o)||this.consequent.has_side_effects(o)||this.alternative.has_side_effects(o)}),i(Jt,function(o){return Uh.has(this.operator)||this.expression.has_side_effects(o)}),i(Ge,function(o){return!this.is_declared(o)&&!Bh.has(this.name)}),i(Xo,xt),i(Wi,xt),i(Wt,function(o){return n(this.properties,o)}),i(Zt,function(o){return this.computed_key()&&this.key.has_side_effects(o)||this.value&&this.value.has_side_effects(o)}),i([ir,Kn],function(o){return this.computed_key()&&this.key.has_side_effects(o)||this.static&&this.value&&this.value.has_side_effects(o)}),i([Xn,tr,$r,an,yr,Gr],function(o){return this.computed_key()&&this.key.has_side_effects(o)}),i(Ut,function(o){return n(this.elements,o)}),i(ni,function(o){return Xr(this,o)?this.expression.has_side_effects(o):!this.optional&&this.expression.may_throw_on_access(o)?!0:this.expression.has_side_effects(o)}),i(Li,function(o){if(Xr(this,o))return this.expression.has_side_effects(o);if(!this.optional&&this.expression.may_throw_on_access(o))return!0;var s=this.property.has_side_effects(o);return s&&this.optional?!0:s||this.expression.has_side_effects(o)}),i(Ci,function(o){return this.expression.has_side_effects(o)}),i(Ct,function(o){return n(this.expressions,o)}),i(In,function(o){return n(this.definitions,o)}),i(vi,function(){return this.value!=null}),i(fo,xt),i(mn,function(o){return n(this.segments,o)})})(function(i,n){for(const o of[].concat(i))o.DEFMETHOD("has_side_effects",n)});(function(i){i(He,on),i(Gt,xt),i(qt,xt),i(ot,xt),i(Wi,xt),i(ln,xt),i(Go,xt);function n(o,s){for(var l=o.length;--l>=0;)if(o[l].may_throw(s))return!0;return!1}i(Mt,function(o){return this.extends&&this.extends.may_throw(o)?!0:n(this.properties,o)}),i(En,function(o){return n(this.body,o)}),i(Ut,function(o){return n(this.elements,o)}),i(Ot,function(o){return this.right.may_throw(o)?!0:!o.has_directive("use strict")&&this.operator=="="&&this.left instanceof Ge?!1:this.left.may_throw(o)}),i(Oe,function(o){return this.left.may_throw(o)||this.right.may_throw(o)}),i(Di,function(o){return n(this.body,o)}),i(Qe,function(o){return Xr(this,o)?!1:n(this.args,o)?!0:this.is_callee_pure(o)?!1:this.expression.may_throw(o)?!0:!(this.expression instanceof ot)||n(this.expression.body,o)}),i(Hr,function(o){return this.expression.may_throw(o)||n(this.body,o)}),i(It,function(o){return this.condition.may_throw(o)||this.consequent.may_throw(o)||this.alternative.may_throw(o)}),i(In,function(o){return n(this.definitions,o)}),i(Yt,function(o){return this.condition.may_throw(o)||this.body&&this.body.may_throw(o)||this.alternative&&this.alternative.may_throw(o)}),i($n,function(o){return this.body.may_throw(o)}),i(Wt,function(o){return n(this.properties,o)}),i(Zt,function(o){return this.computed_key()&&this.key.may_throw(o)||this.value?this.value.may_throw(o):!1}),i([ir,Kn],function(o){return this.computed_key()&&this.key.may_throw(o)||this.static&&this.value&&this.value.may_throw(o)}),i([an,yr,Gr],function(o){return this.computed_key()&&this.key.may_throw(o)}),i([Xn,tr,$r],xt),i(_i,function(o){return this.value&&this.value.may_throw(o)}),i(Ct,function(o){return n(this.expressions,o)}),i(rt,function(o){return this.body.may_throw(o)}),i(ni,function(o){return Xr(this,o)?!1:!this.optional&&this.expression.may_throw_on_access(o)||this.expression.may_throw(o)}),i(Li,function(o){return Xr(this,o)?!1:!this.optional&&this.expression.may_throw_on_access(o)||this.expression.may_throw(o)||this.property.may_throw(o)}),i(Ci,function(o){return this.expression.may_throw(o)}),i(gn,function(o){return this.expression.may_throw(o)||n(this.body,o)}),i(Ge,function(o){return!this.is_declared(o)&&!Bh.has(this.name)}),i(Xo,xt),i(nr,function(o){return this.bcatch?this.bcatch.may_throw(o):this.body.may_throw(o)||this.bfinally&&this.bfinally.may_throw(o)}),i(Jt,function(o){return this.operator=="typeof"&&this.expression instanceof Ge?!1:this.expression.may_throw(o)}),i(vi,function(o){return this.value?this.value.may_throw(o):!1})})(function(i,n){for(const o of[].concat(i))o.DEFMETHOD("may_throw",n)});(function(i){function n(o){let s=!0;return Ki(this,l=>{if(l instanceof Ge){if(rn(this,wu))return s=!1,Hn;var p=l.definition();if(nm(p,this.enclosed)&&!this.variables.has(p.name)){if(o){var E=o.find_variable(l);if(p.undeclared?!E:E===p)return s="f",!0}return s=!1,Hn}return!0}if(l instanceof ln&&this instanceof di)return s=!1,Hn}),s}i(He,xt),i(Gt,on),i(Mt,function(o){if(this.extends&&!this.extends.is_constant_expression(o))return!1;for(const s of this.properties)if(s.computed_key()&&!s.key.is_constant_expression(o)||s.static&&s.value&&!s.value.is_constant_expression(o)||s instanceof En)return!1;return n.call(this,o)}),i(ot,n),i(Jt,function(){return this.expression.is_constant_expression()}),i(Oe,function(){return this.left.is_constant_expression()&&this.right.is_constant_expression()}),i(Ut,function(){return this.elements.every(o=>o.is_constant_expression())}),i(Wt,function(){return this.properties.every(o=>o.is_constant_expression())}),i(Ti,function(){return!!(!(this.key instanceof He)&&this.value&&this.value.is_constant_expression())})})(function(i,n){i.DEFMETHOD("is_constant_expression",n)});(function(i){He.DEFMETHOD("may_throw_on_access",function(o){return!o.option("pure_getters")||this._dot_throw(o)});function n(o){return/strict/.test(o.option("pure_getters"))}i(He,n),i(Fn,on),i(Tl,on),i(Gt,xt),i(Ut,xt),i(Wt,function(o){if(!n(o))return!1;for(var s=this.properties.length;--s>=0;)if(this.properties[s]._dot_throw(o))return!0;return!1}),i(Mt,xt),i(Ti,xt),i(yr,on),i(Nt,function(o){return this.expression._dot_throw(o)}),i(ii,xt),i(di,xt),i(Yo,xt),i(ut,function(){return this.operator=="void"}),i(Oe,function(o){return(this.operator=="&&"||this.operator=="||"||this.operator=="??")&&(this.left._dot_throw(o)||this.right._dot_throw(o))}),i(Ot,function(o){return this.logical?!0:this.operator=="="&&this.right._dot_throw(o)}),i(It,function(o){return this.consequent._dot_throw(o)||this.alternative._dot_throw(o)}),i(ni,function(o){return n(o)?this.property=="prototype"?!(this.expression instanceof ii||this.expression instanceof Mt):!0:!1}),i(Ci,function(o){return this.expression._dot_throw(o)}),i(Ct,function(o){return this.tail_node()._dot_throw(o)}),i(Ge,function(o){if(this.name==="arguments"&&this.scope instanceof ot)return!1;if(rn(this,Em))return!0;if(!n(o)||zr(this)&&this.is_declared(o)||this.is_immutable())return!1;var s=this.fixed_value();return!s||s._dot_throw(o)})})(function(i,n){i.DEFMETHOD("_dot_throw",n)});function ia(i,n){if(n instanceof Jt&&Uh.has(n.operator))return n.expression;if(n instanceof Ot&&n.left===i||n instanceof sn&&n.init===i)return i}(function(i){function n(s){return j(ut,s,{operator:"!",expression:s})}function o(s,l,p){var E=n(s);if(p){var $=j(rt,l,{body:l});return zo(E,$)===$?l:E}return zo(E,l)}i(He,function(){return n(this)}),i(Yi,function(){throw new Error("Cannot negate a statement")}),i(ii,function(){return n(this)}),i(Mt,function(){return n(this)}),i(di,function(){return n(this)}),i(ut,function(){return this.operator=="!"?this.expression:n(this)}),i(Ct,function(s){var l=this.expressions.slice();return l.push(l.pop().negate(s)),yt(this,l)}),i(It,function(s,l){var p=this.clone();return p.consequent=p.consequent.negate(s),p.alternative=p.alternative.negate(s),o(this,p,l)}),i(Oe,function(s,l){var p=this.clone(),E=this.operator;if(s.option("unsafe_comps"))switch(E){case"<=":return p.operator=">",p;case"<":return p.operator=">=",p;case">=":return p.operator="<",p;case">":return p.operator="<=",p}switch(E){case"==":return p.operator="!=",p;case"!=":return p.operator="==",p;case"===":return p.operator="!==",p;case"!==":return p.operator="===",p;case"&&":return p.operator="||",p.left=p.left.negate(s,l),p.right=p.right.negate(s),o(this,p,l);case"||":return p.operator="&&",p.left=p.left.negate(s,l),p.right=p.right.negate(s),o(this,p,l)}return n(this)})})(function(i,n){i.DEFMETHOD("negate",function(o,s){return n.call(this,o,s)})});(function(i){function n(o){return j(ut,o,{operator:"~",expression:o})}i(He,function(o){return n(this)}),i(Tt,function(o){const s=~this.value;return s.toString().length>this.value.toString().length?n(this):j(Tt,this,{value:s})}),i(ut,function(o,s){return this.operator=="~"&&(this.expression.is_32_bit_integer(o)||(s??o.in_32_bit_context()))?this.expression:n(this)})})(function(i,n){i.DEFMETHOD("bitwise_negate",n)});var MC=Vt("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError");Qe.DEFMETHOD("is_callee_pure",function(i){if(i.option("unsafe")){var n=this.expression,o=this.args&&this.args[0]&&this.args[0].evaluate(i);if(n.expression&&n.expression.name==="hasOwnProperty"&&(o==null||o.thedef&&o.thedef.undeclared))return!1;if(zr(n)&&MC.has(n.name)||n instanceof ni&&zr(n.expression)&&lA(n.expression.name,n.property))return!0}return this instanceof yn&&i.option("pure_new")||i.option("side_effects")&&Nn(this,fm)?!0:!i.pure_funcs(this)});He.DEFMETHOD("is_call_pure",xt);ni.DEFMETHOD("is_call_pure",function(i){if(!i.option("unsafe"))return;const n=this.expression;let o;return n instanceof Ut?o="Array":n.is_boolean()?o="Boolean":n.is_number(i)?o="Number":n instanceof Vn?o="RegExp":n.is_string(i)?o="String":this.may_throw_on_access(i)||(o="Object"),o!=null&&aA(o,this.property)});const _r=i=>i&&i.aborts();(function(i){i(Yi,ms),i(Fu,da);function n(){for(var o=0;o<this.body.length;o++)if(_r(this.body[o]))return this.body[o];return null}i(gr,ms),i(bt,n),i(Vo,n),i(Or,function(){for(const o of this.properties)if(o instanceof En&&o.aborts())return o;return null}),i(En,n),i(Yt,function(){return this.alternative&&_r(this.body)&&_r(this.alternative)&&this})})(function(i,n){i.DEFMETHOD("aborts",n)});He.DEFMETHOD("contains_this",function(){return Ki(this,i=>{if(i instanceof ln)return Hn;if(i!==this&&i instanceof ht&&!(i instanceof di))return!0})});function cl(i,n,o,s,l,p){var E=n.parent(l),$=ia(o,E);if($)return $;if(!p&&E instanceof Qe&&E.expression===o&&!(s instanceof di)&&!(s instanceof Mt)&&!E.is_callee_pure(i)&&(!(s instanceof ii)||!(E instanceof yn)&&s.contains_this()))return!0;if(E instanceof Ut)return cl(i,n,E,E,l+1);if(E instanceof Zt&&o===E.value){var R=n.parent(l+1);return cl(i,n,R,R,l+2)}if(E instanceof lt&&E.expression===o){var M=iA(s,E.property);return!p&&cl(i,n,E,M,l+1)}}function cA(i){for(let n=-1,o,s;o=i.parent(n),s=i.parent(n+1);n++){if(s instanceof Ct)if(s.expressions.indexOf(o)!==s.expressions.length-1){const p=i.parent(n+2);return!(s.expressions.length>2||s.expressions.length===1||!nA(p,s,s.expressions[1]))}else continue;if(s instanceof Jt){const l=s.operator;if(l==="void")return!1;if(l==="typeof"||l==="+"||l==="-"||l==="!"||l==="~")continue}return!(s instanceof rt||s instanceof $n||s instanceof ht)}return!0}function un(i,n){i.DEFMETHOD("_eval",n)}const $l=Symbol("This AST_Chain is nullish");He.DEFMETHOD("evaluate",function(i){if(!i.option("evaluate"))return this;var n=this._eval(i,1);if(!n||n instanceof RegExp)return n;if(typeof n=="function"||typeof n=="object"||n==$l)return this;if(typeof n=="string"){const o=this.size(i);if(n.length+2>o)return this}return n});var xC=Vt("! ~ - + void");He.DEFMETHOD("is_constant",function(){return this instanceof Gt?!(this instanceof Vn):this instanceof ut&&xC.has(this.operator)&&(this.expression instanceof Gt||this.expression.is_constant())});un(Yi,function(){throw new Error(dh("Cannot evaluate a statement [{file}:{line},{col}]",this.start))});un(ot,da);un(Mt,da);un(He,da);un(Gt,function(){return this.getValue()});const FC=typeof BigInt=="function";un(Dr,function(){return FC?BigInt(this.value):this});un(Vn,function(i){let n=i.evaluated_regexps.get(this.value);if(n===void 0&&jv(this.value.source)){try{const{source:o,flags:s}=this.value;n=new RegExp(o,s)}catch{n=null}i.evaluated_regexps.set(this.value,n)}return n||this});un(mn,function(){return this.segments.length!==1?this:this.segments[0].value});un(ii,function(i){if(i.option("unsafe")){var n=function(){};return n.node=this,n.toString=()=>this.print_to_string(),n}return this});un(Ut,function(i,n){if(i.option("unsafe")){for(var o=[],s=0,l=this.elements.length;s<l;s++){var p=this.elements[s],E=p._eval(i,n);if(p===E)return this;o.push(E)}return o}return this});un(Wt,function(i,n){if(i.option("unsafe")){for(var o={},s=0,l=this.properties.length;s<l;s++){var p=this.properties[s];if(p instanceof Nt)return this;var E=p.key;if(E instanceof Ft)E=E.name;else if(E instanceof He&&(E=E._eval(i,n),E===p.key))return this;if(typeof Object.prototype[E]=="function")return this;if(!(p.value instanceof ii)&&(o[E]=p.value._eval(i,n),o[E]===p.value))return this}return o}return this});var PC=Vt("! typeof void");un(ut,function(i,n){var o=this.expression;if(i.option("typeofs")&&this.operator=="typeof"){if(o instanceof ot||o instanceof Ge&&o.fixed_value()instanceof ot)return"function";if((o instanceof Wt||o instanceof Ut||o instanceof Ge&&(o.fixed_value()instanceof Wt||o.fixed_value()instanceof Ut))&&!o.has_side_effects(i))return typeof{}}if(PC.has(this.operator)||n++,o=o._eval(i,n),o===this.expression)return this;switch(this.operator){case"!":return!o;case"typeof":return o instanceof RegExp?this:typeof o;case"void":return;case"~":return~o;case"-":return-o;case"+":return+o}return this});var BC=Vt("&& || ?? === !==");const UC=Vt("== != === !=="),YI=i=>typeof i=="object"||typeof i=="function"||typeof i=="symbol";un(Oe,function(i,n){BC.has(this.operator)||n++;var o=this.left._eval(i,n);if(o===this.left)return this;var s=this.right._eval(i,n);if(s===this.right)return this;if(o!=null&&s!=null&&UC.has(this.operator)&&YI(o)&&YI(s)&&typeof o==typeof s)return this;if(typeof o=="bigint"!=(typeof s=="bigint")||typeof o=="bigint"&&(this.operator===">>>"||this.operator==="/"&&Number(s)===0))return this;var l;switch(this.operator){case"&&":l=o&&s;break;case"||":l=o||s;break;case"??":l=o??s;break;case"|":l=o|s;break;case"&":l=o&s;break;case"^":l=o^s;break;case"+":l=o+s;break;case"*":l=o*s;break;case"**":l=o**s;break;case"/":l=o/s;break;case"%":l=o%s;break;case"-":l=o-s;break;case"<<":l=o<<s;break;case">>":l=o>>s;break;case">>>":l=o>>>s;break;case"==":l=o==s;break;case"===":l=o===s;break;case"!=":l=o!=s;break;case"!==":l=o!==s;break;case"<":l=o<s;break;case"<=":l=o<=s;break;case">":l=o>s;break;case">=":l=o>=s;break;default:return this}return typeof l=="number"&&isNaN(l)&&i.find_parent(Zn)?this:l});un(It,function(i,n){var o=this.condition._eval(i,n);if(o===this.condition)return this;var s=o?this.consequent:this.alternative,l=s._eval(i,n);return l===s?this:l});const xg=new Set;un(Ge,function(i,n){if(xg.has(this))return this;var o=this.fixed_value();if(!o)return this;xg.add(this);const s=o._eval(i,n);if(xg.delete(this),s===o)return this;if(s&&typeof s=="object"){var l=this.definition().escaped;if(l&&n>l)return this}return s});const dA={Array,Math,Number,Object,String},VC=new Set(["dotAll","global","ignoreCase","multiline","sticky","unicode"]);un(lt,function(i,n){let o=this.expression._eval(i,n+1);if(o===$l||this.optional&&o==null)return $l;if(this.property==="length"){if(typeof o=="string")return o.length;if(o instanceof Ut&&o.elements.every(R=>!(R instanceof Nt))&&o.elements.every(R=>!R.has_side_effects(i)))return o.elements.length}if(i.option("unsafe")){var s=this.property;if(s instanceof He&&(s=s._eval(i,n),s===this.property))return this;var l=this.expression;if(zr(l)){var p,E=l.name==="hasOwnProperty"&&s==="call"&&(p=i.parent()&&i.parent().args)&&p&&p[0]&&p[0].evaluate(i);if(E=E instanceof ni?E.expression:E,E==null||E.thedef&&E.thedef.undeclared)return this.clone();if(!wC(l.name,s))return this;o=dA[l.name]}else{if(o instanceof RegExp){if(s=="source")return Oh(o.source);if(s=="flags"||VC.has(s))return o[s]}if(!o||o===l||!Rn(o,s))return this;if(typeof o=="function")switch(s){case"name":return o.node.name?o.node.name.name:"";case"length":return o.node.length_property();default:return this}}return o[s]}return this});un(Ci,function(i,n){const o=this.expression._eval(i,n);return o===$l?void 0:o===this.expression?this:o});un(Qe,function(i,n){var o=this.expression;const s=o._eval(i,n);if(s===$l||this.optional&&s==null)return $l;if(i.option("unsafe")&&o instanceof lt){var l=o.property;if(l instanceof He&&(l=l._eval(i,n),l===o.property))return this;var p,E=o.expression;if(zr(E)){var $=E.name==="hasOwnProperty"&&l==="call"&&this.args[0]&&this.args[0].evaluate(i);if($=$ instanceof ni?$.expression:$,$==null||$.thedef&&$.thedef.undeclared)return this.clone();if(!lA(E.name,l))return this;p=dA[E.name]}else{if(p=E._eval(i,n+1),p===E||!p)return this;if(!aA(p.constructor.name,l))return this}for(var R=[],M=0,L=this.args.length;M<L;M++){var y=this.args[M],N=y._eval(i,n);if(y===N)return this;if(y instanceof ot)return this;R.push(N)}try{return p[l].apply(p,R)}catch{}}return this});un(yn,da);function gi(i,n){for(const o of[].concat(i))o.DEFMETHOD("drop_side_effect_free",n)}function Mu(i,n,o){var s=i.length;if(!s)return null;for(var l=[],p=!1,E=0;E<s;E++){var $=i[E].drop_side_effect_free(n,o);p|=$!==i[E],$&&(l.push($),o=!1)}return p?l.length?l:null:i}gi(He,da);gi(Gt,ms);gi(ln,ms);gi(Qe,function(i,n){if(ml(this,i))return this.expression.drop_side_effect_free(i,n);if(!this.is_callee_pure(i)){if(this.expression.is_call_pure(i)){var o=this.args.slice();return o.unshift(this.expression.expression),o=Mu(o,i,n),o&&yt(this,o)}if(Fh(this.expression)&&(!this.expression.name||!this.expression.name.definition().references.length)){var s=this.clone();return s.expression.process_expression(!1,i),s}return this}var l=Mu(this.args,i,n);return l&&yt(this,l)});gi(Uo,ms);gi(ii,ms);gi(di,ms);gi(Mt,function(i){const n=[];if(this.is_self_referential()&&this.has_side_effects(i))return this;const o=this.extends&&this.extends.drop_side_effect_free(i);o&&n.push(o);for(const l of this.properties)if(l instanceof En){if(l.has_side_effects(i))return this}else{const p=l.drop_side_effect_free(i);p&&n.push(p)}if(!n.length)return null;const s=yt(this,n);return this instanceof Or?j(rt,this,{body:s}):s});gi([ir,Kn],function(i){const n=this.computed_key()&&this.key.drop_side_effect_free(i),o=this.static&&this.value&&this.value.drop_side_effect_free(i);return n&&o?yt(this,[n,o]):n||o||null});gi(Oe,function(i,n){var o=this.right.drop_side_effect_free(i);if(!o)return this.left.drop_side_effect_free(i,n);if(ua.has(this.operator)){if(o===this.right)return this;var s=this.clone();return s.right=o,s}else{var l=this.left.drop_side_effect_free(i,n);return l?yt(this,[l,o]):this.right.drop_side_effect_free(i,n)}});gi(Ot,function(i){if(this.logical)return this;var n=this.left;if(n.has_side_effects(i)||i.has_directive("use strict")&&n instanceof lt&&n.expression.is_constant())return this;for(Wn(this,gl);n instanceof lt;)n=n.expression;return n.is_constant_expression(i.find_parent(ht))?this.right.drop_side_effect_free(i):this});gi(It,function(i){var n=this.consequent.drop_side_effect_free(i),o=this.alternative.drop_side_effect_free(i);if(n===this.consequent&&o===this.alternative)return this;if(!n)return o?j(Oe,this,{operator:"||",left:this.condition,right:o}):this.condition.drop_side_effect_free(i);if(!o)return j(Oe,this,{operator:"&&",left:this.condition,right:n});var s=this.clone();return s.consequent=n,s.alternative=o,s});gi(Jt,function(i,n){if(Uh.has(this.operator))return this.expression.has_side_effects(i)?Sl(this,gl):Wn(this,gl),this;if(this.operator=="typeof"&&this.expression instanceof Ge)return null;var o=this.expression.drop_side_effect_free(i,n);return n&&o&&vm(o)?o===this.expression&&this.operator=="!"?this:o.negate(i,n):o});gi(Ge,function(i){return this.is_declared(i)||Bh.has(this.name)?null:this});gi(Wt,function(i,n){var o=Mu(this.properties,i,n);return o&&yt(this,o)});gi(Zt,function(i,n){const s=this.key instanceof He&&this.key.drop_side_effect_free(i,n),l=this.value.drop_side_effect_free(i,n);return s&&l?yt(this,[s,l]):s||l});gi([an,yr,Gr],function(){return this.computed_key()?this.key:null});gi([Xn,tr,$r],function(){return null});gi(Ut,function(i,n){var o=Mu(this.elements,i,n);return o&&yt(this,o)});gi(ni,function(i,n){return ml(this,i)?this.expression.drop_side_effect_free(i,n):!this.optional&&this.expression.may_throw_on_access(i)?this:this.expression.drop_side_effect_free(i,n)});gi(Li,function(i,n){if(ml(this,i))return this.expression.drop_side_effect_free(i,n);if(!this.optional&&this.expression.may_throw_on_access(i))return this;var o=this.property.drop_side_effect_free(i);if(o&&this.optional)return this;var s=this.expression.drop_side_effect_free(i,n);return s&&o?yt(this,[s,o]):s||o});gi(Ci,function(i,n){return this.expression.drop_side_effect_free(i,n)});gi(Ct,function(i){var n=this.tail_node(),o=n.drop_side_effect_free(i);if(o===n)return this;var s=this.expressions.slice(0,-1);return o&&s.push(o),s.length?yt(this,s):j(Tt,this,{value:0})});gi(Nt,function(i,n){return this.expression.drop_side_effect_free(i,n)});gi(fo,ms);gi(mn,function(i){var n=Mu(this.segments,i,Wr);return n&&yt(this,n)});const HC=/keep_assign/;ht.DEFMETHOD("drop_unused",function(i){if(!i.option("unused")||i.has_directive("use asm")||!this.variables)return;var n=this;if(n.pinned())return;var o=!(n instanceof si)||i.toplevel.funcs,s=!(n instanceof si)||i.toplevel.vars;const l=HC.test(i.option("unused"))?xt:function(P){if(P instanceof Ot&&!P.logical&&(rn(P,gl)||P.operator=="="))return P.left;if(P instanceof Jt&&rn(P,gl))return P.expression};var p=new Map,E=new Map;n instanceof si&&i.top_retain&&n.variables.forEach(function(P){i.top_retain(P)&&p.set(P.id,P)});var $=new Map,R=new Map,M=this,L=new Zi(function(P,F){if(P instanceof ot&&P.uses_arguments&&!L.has_directive("use strict")&&P.argnames.forEach(function(d){if(d instanceof Wi){var C=d.definition();p.set(C.id,C)}}),P===n)return;if(P instanceof Mt&&P.has_side_effects(i)&&(P.is_self_referential()?F():P.visit_nondeferred_class_parts(L)),P instanceof fi||P instanceof Or){var K=P.name.definition();return(L.parent()instanceof ki||!o&&M===n)&&K.global&&p.set(K.id,K),Md(R,K.id,P),!0}const g=M===n;if(P instanceof Xi&&g&&Md($,P.definition().id,P),P instanceof In&&g){const d=L.parent()instanceof ki;return P.definitions.forEach(function(C){if(C.name instanceof Wo&&Md($,C.name.definition().id,C),(d||!s)&&Ki(C.name,k=>{if(k instanceof Wi){const H=k.definition();H.global&&p.set(H.id,H)}}),C.name instanceof jt&&C.walk(L),C.name instanceof Wi&&C.value){var x=C.name.definition();Md(R,x.id,C.value),!x.chained&&C.name.fixed_value()===C.value&&E.set(x.id,C),C.value.has_side_effects(i)&&C.value.walk(L)}}),!0}return N(P,F)});n.walk(L),L=new Zi(N),p.forEach(function(P){var F=R.get(P.id);F&&F.forEach(function(K){K.walk(L)})});var y=new Gn(function(F,K,g){var d=y.parent();if(s){const se=l(F);if(se instanceof Ge){var x=se.definition(),C=p.has(x.id);if(F instanceof Ot){if(!C||E.has(x.id)&&E.get(x.id)!==F){const me=F.right.transform(y);return!C&&!me.has_side_effects(i)&&!cA(y)?g?ti.skip:j(Tt,F,{value:0}):la(d,F,me)}}else if(!C)return g?ti.skip:j(Tt,F,{value:0})}}if(M===n){var x;if(F.name&&(F instanceof go&&!ll(i.option("keep_classnames"),(x=F.name.definition()).name)||F instanceof ii&&!ll(i.option("keep_fnames"),(x=F.name.definition()).name))&&(!p.has(x.id)||x.orig.length>1)&&(F.name=null),F instanceof ot&&!(F instanceof Uo))for(var k=!i.option("keep_fargs")||d instanceof Qe&&d.expression===F&&!F.pinned()&&(!F.name||F.name.unreferenced()),H=F.argnames,f=H.length;--f>=0;){var I=H[f];I instanceof Nt&&(I=I.expression),I instanceof fn&&(I=I.left),!(I instanceof jt)&&!p.has(I.definition().id)?(Wn(I,ps),k&&H.pop()):k=!1}if(F instanceof Or&&F!==n){const se=F.name.definition();if(K(F,this),!(se.global&&!o||p.has(se.id))){const me=F.drop_side_effect_free(i);return me??(se.eliminated++,g?ti.skip:j(qt,F))}return F}if(F instanceof fi&&F!==n){const se=F.name.definition();if(!(se.global&&!o||p.has(se.id)))return se.eliminated++,g?ti.skip:j(qt,F)}if(F instanceof In&&!(d instanceof sn&&d.init===F)){var D=!(d instanceof si)&&!(F instanceof Ei),U=[],O=[],X=[],W=[];switch(F.definitions.forEach(function(se){se.value&&(se.value=se.value.transform(y));var Ue=se.name instanceof jt,me=Ue?new bl(null,{name:"<destructure>"}):se.name.definition();if(D&&me.global)return X.push(se);if(!(s||D)||Ue&&(se.name.names.length||se.name.is_array||i.option("pure_getters")!=!0)||p.has(me.id)){if(se.value&&E.has(me.id)&&E.get(me.id)!==se&&(se.value=se.value.drop_side_effect_free(i)),se.name instanceof Wo){var Se=$.get(me.id);if(Se.length>1&&(!se.value||me.orig.indexOf(se.name)>me.eliminated)){if(se.value){var xe=j(Ge,se.name,se.name);me.references.push(xe);var Ce=j(Ot,se,{operator:"=",logical:!1,left:xe,right:se.value});E.get(me.id)===se&&E.set(me.id,Ce),W.push(Ce.transform(y))}al(Se,se),me.eliminated++;return}}se.value?(W.length>0&&(X.length>0?(W.push(se.value),se.value=yt(se.value,W)):U.push(j(rt,F,{body:yt(F,W)})),W=[]),X.push(se)):O.push(se)}else if(me.orig[0]instanceof Rr){var Ie=se.value&&se.value.drop_side_effect_free(i);Ie&&W.push(Ie),se.value=null,O.push(se)}else{var Ie=se.value&&se.value.drop_side_effect_free(i);Ie&&W.push(Ie),me.eliminated++}}),(O.length>0||X.length>0)&&(F.definitions=O.concat(X),U.push(F)),W.length>0&&U.push(j(rt,F,{body:yt(F,W)})),U.length){case 0:return g?ti.skip:j(qt,F);case 1:return U[0];default:return g?ti.splice(U):j(bt,F,{body:U})}}if(F instanceof Oi){K(F,this);var re;return F.init instanceof bt&&(re=F.init,F.init=re.body.pop(),re.body.push(F)),F.init instanceof rt?F.init=F.init.body:fs(F.init)&&(F.init=null),re?g?ti.splice(re.body):re:F}if(F instanceof $n&&F.body instanceof Oi){if(K(F,this),F.body instanceof bt){var re=F.body;return F.body=re.body.pop(),re.body.push(F),g?ti.splice(re.body):re}return F}if(F instanceof bt)return K(F,this),g&&F.body.every(Th)?ti.splice(F.body):F;if(F instanceof ht&&!(F instanceof En)){const se=M;return M=F,K(F,this),M=se,F}}},function(F,K){if(F instanceof Ct)switch(F.expressions.length){case 0:return K?ti.skip:j(Tt,F,{value:0});case 1:return F.expressions[0]}});n.transform(y);function N(P,F){var K;const g=l(P);if(g instanceof Ge&&!Yd(P.left,mo)&&n.variables.get(g.name)===(K=g.definition()))return P instanceof Ot&&(P.right.walk(L),!K.chained&&P.left.fixed_value()===P.right&&E.set(K.id,P)),!0;if(P instanceof Ge){if(K=P.definition(),!p.has(K.id)&&(p.set(K.id,K),K.orig[0]instanceof Rr)){const C=K.scope.is_block_scope()&&K.scope.get_defun_scope().variables.get(K.name);C&&p.set(C.id,C)}return!0}if(P instanceof Mt)return F(),!0;if(P instanceof ht&&!(P instanceof En)){var d=M;return M=P,F(),M=d,!0}}});function pi(i,n){i.DEFMETHOD("reduce_vars",n)}pi(He,Yn);function Cm(i,n){n.assignments=0,n.chained=!1,n.direct_access=!1,n.escaped=0,n.recursive_refs=0,n.references=[],n.single_use=void 0,n.scope.pinned()||n.orig[0]instanceof Xi&&n.scope.uses_arguments?n.fixed=!1:n.orig[0]instanceof Ts||!i.exposed(n)?n.fixed=n.init:n.fixed=!1}function ym(i,n,o){o.variables.forEach(function(s){Cm(n,s),s.fixed===null?(i.defs_to_safe_ids.set(s.id,i.safe_ids),Fo(i,s,!0)):s.fixed&&(i.loop_ids.set(s.id,i.in_loop),Fo(i,s,!0))})}function pa(i,n){n.block_scope&&n.block_scope.variables.forEach(o=>{Cm(i,o)})}function yi(i){i.safe_ids=Object.create(i.safe_ids)}function Vi(i){i.safe_ids=Object.getPrototypeOf(i.safe_ids)}function Fo(i,n,o){i.safe_ids[n.id]=o}function hA(i,n){if(n.single_use=="m")return!1;if(i.safe_ids[n.id]){if(n.fixed==null){var o=n.orig[0];if(o instanceof Xi||o.name=="arguments")return!1;n.fixed=Ai(o)}return!0}return n.fixed instanceof fi}function Rm(i,n,o,s){if(n.fixed===void 0)return!0;let l;return n.fixed===null&&(l=i.defs_to_safe_ids.get(n.id))?(l[n.id]=!1,i.defs_to_safe_ids.delete(n.id),!0):!Rn(i.safe_ids,n.id)||!hA(i,n)||n.fixed===!1||n.fixed!=null&&(!s||n.references.length>n.assignments)?!1:n.fixed instanceof fi?s instanceof He&&n.fixed.parent_scope===o:n.orig.every(p=>!(p instanceof Ts||p instanceof To||p instanceof Kr))}function GC(i,n,o){return n.option("unused")&&!o.scope.pinned()&&o.references.length-o.recursive_refs==1&&i.loop_ids.get(o.id)===i.in_loop}function WC(i){return i?i.is_constant()||i instanceof ot||i instanceof ln:!1}function Ru(i,n,o,s,l,p=0,E=1){var $=i.parent(p);if(!(l&&(l.is_constant()||l instanceof go))){if($ instanceof Ot&&($.operator==="="||$.logical)&&s===$.right||$ instanceof Qe&&(s!==$.expression||$ instanceof yn)||$ instanceof xn&&s===$.value&&s.scope!==n.scope||$ instanceof Ho&&s===$.value||$ instanceof er&&s===$.value&&s.scope!==n.scope){E>1&&!(l&&l.is_constant_expression(o))&&(E=1),(!n.escaped||n.escaped>E)&&(n.escaped=E);return}else if($ instanceof Ut||$ instanceof Qn||$ instanceof Oe&&ua.has($.operator)||$ instanceof It&&s!==$.condition||$ instanceof Nt||$ instanceof Ct&&s===$.tail_node())Ru(i,n,o,$,$,p+1,E);else if($ instanceof Zt&&s===$.value){var R=i.parent(p+1);Ru(i,n,o,R,R,p+2,E)}else if($ instanceof lt&&s===$.expression&&(l=iA(l,$.property),Ru(i,n,o,$,l,p+1,E+1),l))return;p>0||$ instanceof Ct&&s!==$.tail_node()||$ instanceof rt||(n.direct_access=!0)}}const Vh=i=>Ki(i,n=>{if(n instanceof Ft){var o=n.definition();o&&(n instanceof Ge&&o.references.push(n),o.fixed=!1)}});pi(Uo,function(i,n,o){return yi(i),ym(i,o,this),n(),Vi(i),!0});pi(Ot,function(i,n,o){var s=this;if(s.left instanceof jt){Vh(s.left);return}const l=()=>{if(s.logical)return s.left.walk(i),yi(i),s.right.walk(i),Vi(i),!0};var p=s.left;if(!(p instanceof Ge))return l();var E=p.definition(),$=Rm(i,E,p.scope,s.right);if(E.assignments++,!$)return l();var R=E.fixed;if(!R&&s.operator!="="&&!s.logical)return l();var M=s.operator=="=",L=M?s.right:s;return cl(o,i,s,L,0)?l():(E.references.push(p),s.logical||(M||(E.chained=!0),E.fixed=M?function(){return s.right}:function(){return j(Oe,s,{operator:s.operator.slice(0,-1),left:R instanceof He?R:R(),right:s.right})}),s.logical?(Fo(i,E,!1),yi(i),s.right.walk(i),Vi(i),!0):(Fo(i,E,!1),s.right.walk(i),Fo(i,E,!0),Ru(i,E,p.scope,s,L,0,1),!0))});pi(Oe,function(i){if(ua.has(this.operator))return this.left.walk(i),yi(i),this.right.walk(i),Vi(i),!0});pi(Di,function(i,n,o){pa(o,this)});pi(Hr,function(i){return yi(i),this.expression.walk(i),Vi(i),yi(i),ha(this,i),Vi(i),!0});pi(Mt,function(i,n){return Sl(this,wu),yi(i),n(),Vi(i),!0});pi(En,function(i,n,o){pa(o,this)});pi(It,function(i){return this.condition.walk(i),yi(i),this.consequent.walk(i),Vi(i),yi(i),this.alternative.walk(i),Vi(i),!0});pi(Ci,function(i,n){const o=i.safe_ids;return n(),i.safe_ids=o,!0});pi(Qe,function(i){this.expression.walk(i),this.optional&&yi(i);for(const n of this.args)n.walk(i);return!0});pi(lt,function(i){if(this.optional)return this.expression.walk(i),yi(i),this.property instanceof He&&this.property.walk(i),!0});pi(_a,function(i,n){return yi(i),n(),Vi(i),!0});function XC(i,n,o){Sl(this,wu),yi(i),ym(i,o,this);var s;return!this.name&&!this.uses_arguments&&!this.pinned()&&(s=i.parent())instanceof Qe&&s.expression===this&&!s.args.some(l=>l instanceof Nt)&&this.argnames.every(l=>l instanceof Ft)&&this.argnames.forEach((l,p)=>{if(l.definition){var E=l.definition();E.orig.length>1||(E.fixed===void 0&&(!this.uses_arguments||i.has_directive("use strict"))?(E.fixed=function(){return s.args[p]||Ai(s)},i.loop_ids.set(E.id,i.in_loop),Fo(i,E,!0)):E.fixed=!1)}}),n(),Vi(i),_A(this),!0}function _A(i){const n=[];Ki(i,M=>{if(M!==i){if(M instanceof fi)return n.push(M),!0;if(M instanceof ht||M instanceof rt)return!0}});const o=new Map,s=new Map,l=new Set,p=new Set;for(const M of n){const L=M.name.definition(),y=[];for(const N of M.enclosed)if(!(N.fixed===!1||N===L||N.scope.get_defun_scope()!==i)){if(l.add(N.id),N.assignments===0&&N.orig.length===1&&N.orig[0]instanceof To){p.add(N.id),l.add(N.id),p.add(L.id),l.add(L.id),o.has(L.id)||o.set(L.id,[]),o.get(L.id).push(N.id);continue}y.push(N)}y.length&&(s.set(L.id,y),p.add(L.id),l.add(L.id))}if(!s.size)return;let E=1;const $=new Map,R=new Map;pm(i,(M,L)=>{if(M instanceof Ft&&M.thedef){const y=M.definition().id;E++,l.has(y)&&(M instanceof Wi||ia(M,L.parent()))&&R.set(y,E),p.has(y)&&!$.has(y)&&!Ph(L,y)&&$.set(y,E)}});for(const[M,L]of $){const y=new Set(o.get(M));for(const N of y){let P=$.get(N);if(!(P!=null&&P<L)){$.set(N,L);for(const F of o.get(N)||[])y.add(F)}}}for(const[M,L]of s){const y=$.get(M);if(y!==void 0)for(const N of L){if(N.fixed===!1)continue;let P=R.get(N.id)||0;y<P&&(N.fixed=!1)}}}pi(ot,XC);pi($o,function(i,n,o){pa(o,this);const s=i.in_loop;return i.in_loop=this,yi(i),this.body.walk(i),Im(this)&&(Vi(i),yi(i)),this.condition.walk(i),Vi(i),i.in_loop=s,!0});pi(Oi,function(i,n,o){pa(o,this),this.init&&this.init.walk(i);const s=i.in_loop;return i.in_loop=this,yi(i),this.condition&&this.condition.walk(i),this.body.walk(i),this.step&&(Im(this)&&(Vi(i),yi(i)),this.step.walk(i)),Vi(i),i.in_loop=s,!0});pi(sn,function(i,n,o){pa(o,this),Vh(this.init),this.object.walk(i);const s=i.in_loop;return i.in_loop=this,yi(i),this.body.walk(i),Vi(i),i.in_loop=s,!0});pi(Yt,function(i){return this.condition.walk(i),yi(i),this.body.walk(i),Vi(i),this.alternative&&(yi(i),this.alternative.walk(i),Vi(i)),!0});pi($n,function(i){return yi(i),this.body.walk(i),Vi(i),!0});pi(Rr,function(){this.definition().fixed=!1});pi(Ge,function(i,n,o){var s=this.definition();s.references.push(this),s.references.length==1&&!s.fixed&&s.orig[0]instanceof To&&i.loop_ids.set(s.id,i.in_loop);var l;s.fixed===void 0||!hA(i,s)?s.fixed=!1:s.fixed&&(l=this.fixed_value(),l instanceof ot&&Ph(i,s)?s.recursive_refs++:l&&!o.exposed(s)&&GC(i,o,s)?s.single_use=l instanceof ot&&!l.pinned()||l instanceof Mt||s.scope===this.scope&&l.is_constant_expression():s.single_use=!1,cl(o,i,this,l,0,WC(l))&&(s.single_use?s.single_use="m":s.fixed=!1)),Ru(i,s,this.scope,this,l,0,1)});pi(si,function(i,n,o){return this.globals.forEach(function(s){Cm(o,s)}),ym(i,o,this),n(),_A(this),!0});pi(nr,function(i,n,o){return pa(o,this),yi(i),this.body.walk(i),Vi(i),this.bcatch&&(yi(i),this.bcatch.walk(i),Vi(i)),this.bfinally&&this.bfinally.walk(i),!0});pi(Jt,function(i){var n=this;if(!(n.operator!=="++"&&n.operator!=="--")){var o=n.expression;if(o instanceof Ge){var s=o.definition(),l=Rm(i,s,o.scope,!0);if(s.assignments++,!!l){var p=s.fixed;if(p)return s.references.push(o),s.chained=!0,s.fixed=function(){return j(Oe,n,{operator:n.operator.slice(0,-1),left:j(ut,n,{operator:"+",expression:p instanceof He?p:p()}),right:j(Tt,n,{value:1})})},Fo(i,s,!0),!0}}}});pi(vi,function(i,n){var o=this;if(o.name instanceof jt){Vh(o.name);return}var s=o.name.definition();if(o.value){if(Rm(i,s,o.name.scope,o.value))return s.fixed=function(){return o.value},i.loop_ids.set(s.id,i.in_loop),Fo(i,s,!1),n(),Fo(i,s,!0),!0;s.fixed=!1}});pi(mh,function(){Vh(this.name)});pi(Bo,function(i,n,o){pa(o,this);const s=i.in_loop;return i.in_loop=this,yi(i),n(),Vi(i),i.in_loop=s,!0});function Fg(i){return i instanceof pr&&i.body instanceof bt?i.body:i}function pA(i){if(i instanceof ln)return!0;if(i instanceof Ge)return i.definition().orig[0]instanceof Kr;if(i instanceof lt){if(i=i.expression,i instanceof Ge){if(i.is_immutable())return!1;i=i.fixed_value()}return i?i instanceof Vn?!1:i instanceof Gt?!0:pA(i):!0}return!1}function KC(i){var n=[];return i.definitions.forEach(function(o){o.name instanceof Wi?(o.value=null,n.push(o)):o.declarations_as_names().forEach(s=>{n.push(j(vi,o,{name:s,value:null}))})}),n.length?j(Ei,i,{definitions:n}):null}function ca(i,n,o){Ki(n,s=>{if(s instanceof Ei){const l=KC(s);return l&&o.push(l),!0}if(s instanceof fi&&(s===n||!i.has_directive("use strict")))return o.push(s===n?s:j(Ei,s,{definitions:[j(vi,s,{name:j(Wo,s.name,s.name),value:null})]})),!0;if(s instanceof ki||s instanceof gr)return o.push(s),!0;if(s instanceof ht||s instanceof Mt)return!0})}function Hh(i,n){const o=n.find_scope(),s=o.get_defun_scope(),{in_loop:l,in_try:p}=R();var E,$=10;do E=!1,L(i),n.option("dead_code")&&N(i,n),n.option("if_return")&&y(i,n),n.sequences_limit>0&&(F(i,n),g(i,n)),n.option("join_vars")&&C(i),n.option("collapse_vars")&&M(i,n);while(E&&$-- >0);function R(){var x=n.self(),k=0,H=!1,f=!1;do if(x instanceof pr)H=!0;else{if(x instanceof ht)break;x instanceof Rh&&(f=!0)}while(x=n.parent(k++));return{in_loop:H,in_try:f}}function M(x,k){if(o.pinned()||s.pinned())return x;for(var H,f=[],I=x.length,D=new Gn(function(Y){if(ce)return Y;if(!Me)return Y!==O[X]?Y:(X++,X<O.length?st(Y):(Me=!0,se=be(Y,0),se===Y&&(ce=!0),Y));var Te=D.parent();if(Y instanceof Ot&&(Y.logical||Y.operator!="="&&me.equivalent_to(Y.left))||Y instanceof Qn||Y instanceof qn||Y instanceof Qe&&me instanceof lt&&me.equivalent_to(Y.expression)||(Y instanceof Qe||Y instanceof lt)&&Y.optional||Y instanceof Po||Y instanceof jt||Y instanceof Nt&&Y.expression instanceof Ft&&(Y.expression instanceof ln||Y.expression.definition().references.length>1)||Y instanceof pr&&!(Y instanceof Oi)||Y instanceof Vr||Y instanceof nr||Y instanceof Zn||Y instanceof er||Y instanceof ki||Y instanceof Mt||Te instanceof Oi&&Y!==Te.init||!Ie&&Y instanceof Ge&&!Y.is_declared(k)&&!Bh.has(Y)||Y instanceof Ge&&Te instanceof Qe&&Nn(Te,aa)||Y instanceof Ti&&Y.key instanceof He)return ce=!0,Y;if(!Ue&&(!xe||!Ie)&&(Te instanceof Oe&&ua.has(Te.operator)&&Te.left!==Y||Te instanceof It&&Te.condition!==Y||Te instanceof Yt&&Te.condition!==Y)&&(Ue=Te),ue&&!(Y instanceof Wi)&&me.equivalent_to(Y)&&!ae(D.find_scope()||o,Se)){if(Ue)return ce=!0,Y;if(ia(Y,Te))return re&&te++,Y;if(te++,re&&W instanceof vi)return Y;if(E=ce=!0,W instanceof Yo)return j(ut,W,W);if(W instanceof vi){var ke=W.name.definition(),ve=W.value;return ke.references.length-ke.replaced==1&&!k.exposed(ke)?(ke.replaced++,Ve&&rA(ve)?ve.transform(k):la(Te,Y,ve)):j(Ot,W,{operator:"=",logical:!1,left:j(Ge,W.name,W.name),right:ve})}return Sl(W,gl),W}var Xe;return(Y instanceof Qe||Y instanceof xn&&(Ce||me instanceof lt||dt(me))||Y instanceof lt&&(Ce||Y.expression.may_throw_on_access(k))||Y instanceof Ge&&(Se.has(Y.name)&&Se.get(Y.name).modified||Ce&&dt(Y))||Y instanceof vi&&Y.value&&(Se.has(Y.name.name)||Ce&&dt(Y.name))||Y instanceof qn||(Xe=ia(Y.left,Y))&&(Xe instanceof lt||Se.has(Xe.name))||je&&(p?Y.has_side_effects(k):T(Y)))&&(se=Y,Y instanceof ht&&(ce=!0)),st(Y)},function(Y){ce||(se===Y&&(ce=!0),Ue===Y&&(Ue=null))}),U=new Gn(function(Y){if(ce)return Y;if(!Me)return Y!==O[X]?Y:(X++,X<O.length?void 0:(Me=!0,Y));if(Y instanceof Ge&&Y.name==we.name)return--te||(ce=!0),ia(Y,U.parent())?Y:(we.replaced++,re.replaced--,W.value);if(Y instanceof _a||Y instanceof ht)return Y});--I>=0;){I==0&&k.option("unused")&&Le();var O=[];for(_e(x[I]);f.length>0;){O=f.pop();var X=0,W=O[O.length-1],re=null,se=null,Ue=null,me=Ke(W);if(!(!me||pA(me)||me.has_side_effects(k))){var Se=ct(W),xe=pt(me);me instanceof Ge&&Se.set(me.name,{def:me.definition(),modified:!1});var Ce=St(W),Ie=Et(),je=W.may_throw(k),Ve=W.name instanceof Xi,Me=Ve,ce=!1,te=0,ue=!H||!Me;if(!ue){for(let Y=k.self().argnames.lastIndexOf(W.name)+1;!ce&&Y<H.length;Y++)H[Y].transform(D);ue=!0}for(var ge=I;!ce&&ge<x.length;ge++)x[ge].transform(D);if(re){var we=W.name.definition();if(ce&&we.references.length-we.replaced>te)te=!1;else{ce=!1,X=0,Me=Ve;for(var ge=I;!ce&&ge<x.length;ge++)x[ge].transform(U);re.single_use=!1}}te&&!Ht(W)&&x.splice(I,1)}}}function st(Y){if(Y instanceof ht)return Y;if(Y instanceof gn){Y.expression=Y.expression.transform(D);for(var Te=0,ke=Y.body.length;!ce&&Te<ke;Te++){var ve=Y.body[Te];if(ve instanceof Hr){if(!Me){if(ve!==O[X])continue;X++}if(ve.expression=ve.expression.transform(D),!Ie)break}}return ce=!0,Y}}function Be(Y,Te){if(Y.global)return!1;let ke=Y.scope;for(;ke&&ke!==Te;){if(ke.variables.has(Y.name))return!0;ke=ke.parent_scope}return!1}function Rt(Y,Te,ke){var ve=!1,Xe=!(Y instanceof di);return Te.walk(new Zi(function(le,v){if(ve)return!0;if(le instanceof Ge&&(Y.variables.has(le.name)||Be(le.definition(),Y))){var V=le.definition().scope;if(V!==s){for(;V=V.parent_scope;)if(V===s)return!0}return ve=!0}if((ke||Xe)&&le instanceof ln)return ve=!0;if(le instanceof ht&&!(le instanceof di)){var J=Xe;return Xe=!1,v(),Xe=J,!0}})),ve}function de(Y){return!(Y instanceof Nt||Ki(Y,ke=>{if(ke instanceof Qn)return Hn}))}function Le(){var Y,Te=k.self();if(Fh(Te)&&!Te.name&&!Te.uses_arguments&&!Te.pinned()&&(Y=k.parent())instanceof Qe&&Y.expression===Te&&Y.args.every(de)){var ke=k.has_directive("use strict");ke&&!nm(ke,Te.body)&&(ke=!1);var ve=Te.argnames.length;H=Y.args.slice(ve);for(var Xe=new Set,le=ve;--le>=0;){var v=Te.argnames[le],V=Y.args[le];const ne=v.definition&&v.definition();if(!(ne&&ne.orig.length>1)&&(H.unshift(j(vi,v,{name:v,value:V})),!Xe.has(v.name)))if(Xe.add(v.name),v instanceof Nt){var J=Y.args.slice(le);J.every(_=>!Rt(Te,_,ke))&&f.unshift([j(vi,v,{name:v.expression,value:j(Ut,Y,{elements:J})})])}else V?(V instanceof ot&&V.pinned()||Rt(Te,V,ke))&&(V=null):V=Ai(v).transform(k),V&&f.unshift([j(vi,v,{name:v,value:V})])}}}function _e(Y){if(O.push(Y),Y instanceof Ot)!Y.left.has_side_effects(k)&&!(Y.right instanceof Ci)&&f.push(O.slice()),_e(Y.right);else if(Y instanceof Oe)_e(Y.left),_e(Y.right);else if(Y instanceof Qe&&!Nn(Y,aa))_e(Y.expression),Y.args.forEach(_e);else if(Y instanceof Hr)_e(Y.expression);else if(Y instanceof It)_e(Y.condition),_e(Y.consequent),_e(Y.alternative);else if(Y instanceof In){var Te=Y.definitions.length,ke=Te-200;for(ke<0&&(ke=0);ke<Te;ke++)_e(Y.definitions[ke])}else Y instanceof yh?(_e(Y.condition),Y.body instanceof Di||_e(Y.body)):Y instanceof xn?Y.value&&_e(Y.value):Y instanceof Oi?(Y.init&&_e(Y.init),Y.condition&&_e(Y.condition),Y.step&&_e(Y.step),Y.body instanceof Di||_e(Y.body)):Y instanceof sn?(_e(Y.object),Y.body instanceof Di||_e(Y.body)):Y instanceof Yt?(_e(Y.condition),Y.body instanceof Di||_e(Y.body),Y.alternative&&!(Y.alternative instanceof Di)&&_e(Y.alternative)):Y instanceof Ct?Y.expressions.forEach(_e):Y instanceof rt?_e(Y.body):Y instanceof gn?(_e(Y.expression),Y.body.forEach(_e)):Y instanceof Jt?(Y.operator=="++"||Y.operator=="--")&&f.push(O.slice()):Y instanceof vi&&Y.value&&!(Y.value instanceof Ci)&&(f.push(O.slice()),_e(Y.value));O.pop()}function be(Y,Te,ke){var ve=D.parent(Te);return ve instanceof Ot?ke&&!ve.logical&&!(ve.left instanceof lt||Se.has(ve.left.name))?be(ve,Te+1,ke):Y:ve instanceof Oe?ke&&(!ua.has(ve.operator)||ve.left===Y)?be(ve,Te+1,ke):Y:ve instanceof Qe||ve instanceof Hr?Y:ve instanceof It?ke&&ve.condition===Y?be(ve,Te+1,ke):Y:ve instanceof In?be(ve,Te+1,!0):ve instanceof xn?ke?be(ve,Te+1,ke):Y:ve instanceof Yt?ke&&ve.condition===Y?be(ve,Te+1,ke):Y:ve instanceof pr?Y:ve instanceof Ct?be(ve,Te+1,ve.tail_node()!==Y):ve instanceof rt?be(ve,Te+1,!0):ve instanceof gn||ve instanceof vi?Y:null}function We(Y){var Te=Y.value;if(Te instanceof Ge&&Te.name!="arguments"){var ke=Te.definition();if(!ke.undeclared)return re=ke}}function Ke(Y){if(Y instanceof Ot&&Y.logical)return!1;if(Y instanceof vi&&Y.name instanceof Wi){var Te=Y.name.definition();if(!nm(Y.name,Te.orig))return;var ke=Te.references.length-Te.replaced;if(!ke)return;var ve=Te.orig.length-Te.eliminated;if(ve>1&&!(Y.name instanceof Xi)||(ke>1?We(Y):!k.exposed(Te)))return j(Ge,Y.name,Y.name)}else{const Xe=Y instanceof Ot?Y.left:Y.expression;return!Yd(Xe,Ts)&&!Yd(Xe,_l)&&!Yd(Xe,bs)&&Xe}}function at(Y){return Y instanceof Ot?Y.right:Y.value}function ct(Y){var Te=new Map;if(Y instanceof Jt)return Te;var ke=new Zi(function(ve){for(var Xe=ve;Xe instanceof lt;)Xe=Xe.expression;if(Xe instanceof Ge){const le=Te.get(Xe.name);(!le||!le.modified)&&Te.set(Xe.name,{def:Xe.definition(),modified:cl(k,ke,ve,ve,0)})}});return at(Y).walk(ke),Te}function Ht(Y){if(Y.name instanceof Xi){var Te=k.parent(),ke=k.self().argnames,ve=ke.indexOf(Y.name);if(ve<0)Te.args.length=Math.min(Te.args.length,ke.length-1);else{var Xe=Te.args;Xe[ve]&&(Xe[ve]=j(Tt,Xe[ve],{value:0}))}return!0}var le=!1;return x[I].transform(new Gn(function(v,V,J){if(le)return v;if(v===Y||v.body===Y)return le=!0,v instanceof vi?(v.value=v.name instanceof Ts?Ai(v.value):null,v):J?ti.skip:null},function(v){if(v instanceof Ct)switch(v.expressions.length){case 0:return null;case 1:return v.expressions[0]}}))}function pt(Y){for(;Y instanceof lt;)Y=Y.expression;return Y instanceof Ge&&Y.definition().scope.get_defun_scope()===s&&!(l&&(Se.has(Y.name)||W instanceof Jt||W instanceof Ot&&!W.logical&&W.operator!="="))}function St(Y){return Y instanceof Jt?Uh.has(Y.operator):at(Y).has_side_effects(k)}function Et(){if(Ce)return!1;if(re)return!0;if(me instanceof Ge){var Y=me.definition();if(Y.references.length-Y.replaced==(W instanceof vi?1:2))return!0}return!1}function dt(Y){if(!Y.definition)return!0;var Te=Y.definition();return Te.orig.length==1&&Te.orig[0]instanceof To?!1:Te.scope.get_defun_scope()!==s?!0:Te.references.some(ke=>ke.scope.get_defun_scope()!==s)}function T(Y,Te){if(Y instanceof Ot)return T(Y.left,!0);if(Y instanceof Jt)return T(Y.expression,!0);if(Y instanceof vi)return Y.value&&T(Y.value);if(Te){if(Y instanceof ni||Y instanceof Li)return T(Y.expression,!0);if(Y instanceof Ge)return Y.definition().scope.get_defun_scope()!==s}return!1}function ae(Y,Te){for(const{def:ke}of Te.values()){const ve=Y.find_variable(ke.name);if(ve){if(ve===ke)continue;return!0}}return!1}}function L(x){for(var k=[],H=0;H<x.length;){var f=x[H];f instanceof bt&&f.body.every(Th)?(E=!0,L(f.body),x.splice(H,1,...f.body),H+=f.body.length):f instanceof qt?(E=!0,x.splice(H,1)):f instanceof Dn?k.indexOf(f.value)<0?(H++,k.push(f.value)):(E=!0,x.splice(H,1)):H++}}function y(x,k){var H=k.self(),f=Ue(x),I=H instanceof ot;const D=Math.min(x.length,500);for(var U=D;--U>=0;){var O=x[U],X=Ie(U),W=x[X];if(I&&!W&&O instanceof _i){if(!O.value){E=!0,x.splice(U,1);continue}if(O.value instanceof ut&&O.value.operator=="void"){E=!0,x[U]=j(rt,O,{body:O.value.expression});continue}}if(O instanceof Yt){let Ve,Me;if(Ve=_r(O.body),Se(Ve)&&(Me=Ce(O.body,Ve))){Ve.label&&al(Ve.label.thedef.references,Ve),E=!0,O=O.clone(),O.condition=O.condition.negate(k),O.body=j(bt,O,{body:jd(O.alternative).concat(xe())}),O.alternative=j(bt,O,{body:Me}),x[U]=O.transform(k);continue}if(Ve=_r(O.alternative),Se(Ve)&&(Me=Ce(O.alternative,Ve))){Ve.label&&al(Ve.label.thedef.references,Ve),E=!0,O=O.clone(),O.body=j(bt,O.body,{body:jd(O.body).concat(xe())}),O.alternative=j(bt,O.alternative,{body:Me}),x[U]=O.transform(k);continue}}if(O instanceof Yt&&O.body instanceof _i){var re=O.body.value;if(!re&&!O.alternative&&(I&&!W||W instanceof _i&&!W.value)){E=!0,x[U]=j(rt,O.condition,{body:O.condition});continue}if(re&&!O.alternative&&W instanceof _i&&W.value){E=!0,O=O.clone(),O.alternative=W,x[U]=O.transform(k),x.splice(X,1);continue}if(re&&!O.alternative&&(!W&&I&&f||W instanceof _i)){E=!0,O=O.clone(),O.alternative=W||j(_i,O,{value:null}),x[U]=O.transform(k),W&&x.splice(X,1);continue}var se=x[je(U)];if(k.option("sequences")&&I&&!O.alternative&&se instanceof Yt&&se.body instanceof _i&&Ie(X)==x.length&&W instanceof rt){E=!0,O=O.clone(),O.alternative=j(bt,W,{body:[W,j(_i,W,{value:null})]}),x[U]=O.transform(k),x.splice(X,1);continue}}}function Ue(Ve){for(var Me=0,ce=Ve.length;--ce>=0;){var te=Ve[ce];if(te instanceof Yt&&te.body instanceof _i&&++Me>1)return!0}return!1}function me(Ve){return!Ve||Ve instanceof ut&&Ve.operator=="void"}function Se(Ve){if(!Ve)return!1;for(var Me=U+1,ce=x.length;Me<ce;Me++){var te=x[Me];if(te instanceof Un&&!(te instanceof Ei))return!1}var ue=Ve instanceof Vr?k.loopcontrol_target(Ve):null;return Ve instanceof _i&&I&&me(Ve.value)||Ve instanceof Es&&H===Fg(ue)||Ve instanceof fr&&ue instanceof bt&&H===ue}function xe(){var Ve=x.slice(U+1);return x.length=U+1,Ve.filter(function(Me){return Me instanceof fi?(x.push(Me),!1):!0})}function Ce(Ve,Me){var ce=jd(Ve);if(Me===ce[ce.length-1]&&(ce=ce.slice(0,-1),!!ce.every(te=>Th(te))))return Me.value&&ce.push(j(rt,Me.value,{body:Me.value.expression})),ce}function Ie(Ve){for(var Me=Ve+1,ce=x.length;Me<ce;Me++){var te=x[Me];if(!(te instanceof Ei&&P(te)))break}return Me}function je(Ve){for(var Me=Ve;--Me>=0;){var ce=x[Me];if(!(ce instanceof Ei&&P(ce)))break}return Me}}function N(x,k){for(var H,f=k.self(),I=0,D=0,U=x.length;I<U;I++){var O=x[I];if(O instanceof Vr){var X=k.loopcontrol_target(O);O instanceof fr&&!(X instanceof pr)&&Fg(X)===f||O instanceof Es&&Fg(X)===f?O.label&&al(O.label.thedef.references,O):x[D++]=O}else x[D++]=O;if(_r(O)){H=x.slice(I+1);break}}x.length=D,E=D!=U,H&&H.forEach(function(W){ca(k,W,x)})}function P(x){return x.definitions.every(k=>!k.value)}function F(x,k){if(x.length<2)return;var H=[],f=0;function I(){if(H.length){var W=yt(H[0],H);x[f++]=j(rt,W,{body:W}),H=[]}}for(var D=0,U=x.length;D<U;D++){var O=x[D];if(O instanceof rt){H.length>=k.sequences_limit&&I();var X=O.body;H.length>0&&(X=X.drop_side_effect_free(k)),X&&bm(H,X)}else O instanceof In&&P(O)||O instanceof fi||I(),x[f++]=O}I(),x.length=f,f!=U&&(E=!0)}function K(x,k){if(!(x instanceof bt))return x;for(var H=null,f=0,I=x.body.length;f<I;f++){var D=x.body[f];if(D instanceof Ei&&P(D))k.push(D);else{if(H||D instanceof Un&&!(D instanceof Ei))return!1;H=D}}return H}function g(x,k){function H(se){f--,E=!0;var Ue=I.body;return yt(Ue,[Ue,se]).transform(k)}for(var f=0,I,D=0;D<x.length;D++){var U=x[D];if(I&&(U instanceof xn?U.value=H(U.value||Ai(U).transform(k)):U instanceof Oi?U.init instanceof Un||Ki(I.body,Ue=>{if(Ue instanceof ht)return!0;if(Ue instanceof Oe&&Ue.operator==="in")return Hn})||(U.init?U.init=H(U.init):(U.init=I.body,f--,E=!0)):U instanceof sn?(!(U.init instanceof Un)||U.init instanceof Ei)&&(U.object=H(U.object)):U instanceof Yt?U.condition=H(U.condition):(U instanceof gn||U instanceof Zn)&&(U.expression=H(U.expression))),k.option("conditionals")&&U instanceof Yt){var O=[],X=K(U.body,O),W=K(U.alternative,O);if(X!==!1&&W!==!1&&O.length>0){var re=O.length;O.push(j(Yt,U,{condition:U.condition,body:X||j(qt,U.body),alternative:W})),O.unshift(f,1),[].splice.apply(x,O),D+=re,f+=re+1,I=null,E=!0;continue}}x[f++]=U,I=U instanceof rt?U:null}x.length=f}function d(x,k){if(x instanceof In){var H=x.definitions[x.definitions.length-1];if(H.value instanceof Wt){var f;if(k instanceof Ot&&!k.logical?f=[k]:k instanceof Ct&&(f=k.expressions.slice()),!!f){var I=!1;do{var D=f[0];if(!(D instanceof Ot)||D.operator!="="||!(D.left instanceof lt))break;var U=D.left.expression;if(!(U instanceof Ge)||H.name.name!=U.name||!D.right.is_constant_expression(o))break;var O=D.left.property;if(O instanceof He&&(O=O.evaluate(n)),O instanceof He)break;O=""+O;var X=n.option("ecma")<2015&&n.has_directive("use strict")?function(re){return re.key!=O&&re.key&&re.key.name!=O}:function(re){return re.key&&re.key.name!=O};if(!H.value.properties.every(X))break;var W=H.value.properties.filter(function(re){return re.key===O})[0];W?W.value=new Ct({start:W.start,expressions:[W.value.clone(),D.right.clone()],end:W.end}):H.value.properties.push(j(Zt,D,{key:O,value:D.right})),f.shift(),I=!0}while(f.length);return I&&f}}}}function C(x){for(var k,H=0,f=-1,I=x.length;H<I;H++){var D=x[H],U=x[f];if(D instanceof In)U&&U.TYPE==D.TYPE?(U.definitions=U.definitions.concat(D.definitions),E=!0):k&&k.TYPE==D.TYPE&&P(D)?(k.definitions=k.definitions.concat(D.definitions),E=!0):(x[++f]=D,k=D);else if(D instanceof qn&&U instanceof qn&&U.await===D.await)U.definitions=U.definitions.concat(D.definitions);else if(D instanceof xn)D.value=X(D.value);else if(D instanceof Oi){var O=d(U,D.init);O?(E=!0,D.init=O.length?yt(D.init,O):null,x[++f]=D):U instanceof Ei&&(!D.init||D.init.TYPE==U.TYPE)?(D.init&&(U.definitions=U.definitions.concat(D.init.definitions)),D.init=U,x[f]=D,E=!0):k instanceof Ei&&D.init instanceof Ei&&P(D.init)?(k.definitions=k.definitions.concat(D.init.definitions),D.init=null,x[++f]=D,E=!0):x[++f]=D}else if(D instanceof sn)D.object=X(D.object);else if(D instanceof Yt)D.condition=X(D.condition);else if(D instanceof rt){var O=d(U,D.body);if(O){if(E=!0,!O.length)continue;D.body=yt(D.body,O)}x[++f]=D}else D instanceof gn||D instanceof Zn?D.expression=X(D.expression):x[++f]=D}x.length=f+1;function X(W){x[++f]=D;var re=d(U,W);return re?(E=!0,re.length?yt(W,re):W instanceof Ct?W.tail_node().left:W.left):W}}}function zC(i){for(var n,o=0;n=i.parent(o++);){if(n instanceof Yi)return!1;if(n instanceof Ut||n instanceof Zt||n instanceof Wt)return!0}return!1}function um(i,n){for(const o of n.enclosed){if(n.variables.has(o.name))continue;const s=i.find_variable(o.name);if(s){if(s===o)continue;return!0}}return!1}function YC(i,n){if(i.orig.length===1&&n){const o=n.size(),s=i.name.length;return o>s}return!0}function jC(i,n){if(n.in_computed_key())return i;const o=n.parent(),s=i.definition(),l=n.find_scope();let p=i.fixed_value();if(n.top_retain&&s.global&&n.top_retain(s)&&YC(s,p))return s.fixed=!1,s.single_use=!1,i;if(fA(n,p))return i;let E=s.single_use&&!(o instanceof Qe&&o.is_callee_pure(n)||Nn(o,aa))&&!(o instanceof ki&&p instanceof ot&&p.name);if(E&&p instanceof He&&(E=!p.has_side_effects(n)&&!p.may_throw(n)),p instanceof Mt&&s.scope!==i.scope)return i;if(E&&(p instanceof ot||p instanceof Mt)){if(sA(p,n))E=!1;else if(s.scope!==i.scope&&(s.escaped==1||rn(p,wu)||zC(n)||!n.option("reduce_funcs")))E=!1;else if(Ph(n,s))E=!1;else if((s.scope!==i.scope||s.orig[0]instanceof Xi)&&(E=p.is_constant_expression(i.scope),E=="f")){var $=i.scope;do($ instanceof fi||Fh($))&&Wn($,wu);while($=$.parent_scope)}}if(E&&(p instanceof ot||p instanceof Mt)&&(E=s.scope===i.scope&&!um(l,p)||o instanceof Qe&&o.expression===i&&!um(l,p)&&!(p.name&&p.name.definition().recursive_refs>0)),E&&p){if(p instanceof Or&&(Wn(p,Is),p=j(go,p,p)),p instanceof fi&&(Wn(p,Is),p=j(ii,p,p)),s.recursive_refs>0&&p.name instanceof To){const M=p.name.definition();let L=p.variables.get(p.name.name),y=L&&L.orig[0];y instanceof Kr||(y=j(Kr,p.name,p.name),y.scope=p,p.name=y,L=p.def_function(y)),Ki(p,N=>{N instanceof Ge&&N.definition()===M&&(N.thedef=L,L.references.push(N))})}return(p instanceof ot||p instanceof Mt)&&p.parent_scope!==l&&(p=p.clone(!0,n.get_toplevel()),l.add_child_scope(p)),p.optimize(n)}if(p){let M;if(p instanceof ln)!(s.orig[0]instanceof Xi)&&s.references.every(L=>s.scope===L.scope)&&(M=p);else{var R=p.evaluate(n);R!==p&&(n.option("unsafe_regexp")||!(R instanceof RegExp))&&(M=kn(R,p))}if(M){const L=i.size(n),y=M.size(n);let N=0;if(n.option("unused")&&!n.exposed(s)&&(N=(L+2+p.size(n))/(s.references.length-s.assignments)),y<=L+N)return M}}return i}function qC(i,n){if(n.in_computed_key())return i;var o=i.expression,s=o,l=i.args.every(D=>!(D instanceof Nt));if(n.option("reduce_vars")&&s instanceof Ge&&!Nn(i,aa)){const D=s.fixed_value();if(sA(D,n)||!n.toplevel.funcs&&o.definition().global)return i;s=D}if(fA(n,s)&&!Nn(i,zd))return i;var p=s instanceof ot,E=p&&s.body[0],$=p&&!s.is_generator&&!s.async,R=$&&n.option("inline")&&!i.is_callee_pure(n);if(R&&E instanceof _i){let D=E.value;if(!D||D.is_constant_expression()){D?D=D.clone(!0):D=Ai(i);const U=i.args.concat(D);return yt(i,U).optimize(n)}if(s.argnames.length===1&&s.argnames[0]instanceof Xi&&i.args.length<2&&!(i.args[0]instanceof Nt)&&D instanceof Ge&&D.name===s.argnames[0].name){const U=(i.args[0]||Ai()).optimize(n);let O;return U instanceof lt&&(O=n.parent())instanceof Qe&&O.expression===i?yt(i,[j(Tt,i,{value:0}),U]):U}}if(R){var M,L,y=-1;let D,U,O;if(l&&!s.uses_arguments&&!(n.parent()instanceof Mt)&&!(s.name&&s instanceof ii)&&(U=g(E))&&(o===s||Nn(i,zd)||n.option("unused")&&(D=o.definition()).references.length==1&&!Ph(n,D)&&s.is_constant_expression(o.scope))&&!Nn(i,fm|aa)&&!s.contains_this()&&x()&&(O=n.find_scope())&&!um(O,s)&&!(function(){let W=0,re;for(;re=n.parent(W++);){if(re instanceof fn)return!0;if(re instanceof Di)break}return!1})()&&!(M instanceof Mt))return Wn(s,Is),O.add_child_scope(s),yt(i,I(U)).optimize(n)}if(R&&Nn(i,zd))return Wn(s,Is),s=j(s.CTOR===fi?ii:s.CTOR,s,s),s=s.clone(!0),s.figure_out_scope({},{parent_scope:n.find_scope(),toplevel:n.get_toplevel()}),j(Qe,i,{expression:s,args:i.args}).optimize(n);if($&&n.option("side_effects")&&s.body.every(fs)){var P=i.args.concat(Ai(i));return yt(i,P).optimize(n)}if(n.option("negate_iife")&&n.parent()instanceof rt&&vm(i))return i.negate(n,!0);var F=i.evaluate(n);if(F!==i)return F=kn(F,i).optimize(n),jn(n,F,i);return i;function K(D){if(!D)return Ai(i);if(D instanceof _i)return D.value?D.value.clone(!0):Ai(i);if(D instanceof rt)return j(ut,D,{operator:"void",expression:D.body.clone(!0)})}function g(D){var U=s.body,O=U.length;if(n.option("inline")<3)return O==1&&K(D);D=null;for(var X=0;X<O;X++){var W=U[X];if(W instanceof Ei){if(D&&!W.definitions.every(re=>!re.value))return!1}else{if(D)return!1;W instanceof qt||(D=W)}}return K(D)}function d(D,U){for(var O=0,X=s.argnames.length;O<X;O++){var W=s.argnames[O];if(W instanceof fn){if(rn(W.left,ps))continue;return!1}if(W instanceof jt)return!1;if(W instanceof Nt){if(rn(W.expression,ps))continue;return!1}if(!rn(W,ps)){if(!U||D.has(W.name)||zI.has(W.name)||M.conflicting_def(W.name))return!1;L&&L.push(W.definition())}}return!0}function C(D,U){for(var O=s.body.length,X=0;X<O;X++){var W=s.body[X];if(W instanceof Ei){if(!U)return!1;for(var re=W.definitions.length;--re>=0;){var se=W.definitions[re].name;if(se instanceof jt||D.has(se.name)||zI.has(se.name)||M.conflicting_def(se.name))return!1;L&&L.push(se.definition())}}}return!0}function x(){var D=new Set;do if(M=n.parent(++y),M.is_block_scope()&&M.block_scope&&M.block_scope.variables.forEach(function(X){D.add(X.name)}),M instanceof Eo)M.argname&&D.add(M.argname.name);else if(M instanceof pr)L=[];else if(M instanceof Ge&&M.fixed_value()instanceof ht)return!1;while(!(M instanceof ht));var U=!(M instanceof si)||n.toplevel.vars,O=n.option("inline");return!C(D,O>=3&&U)||!d(D,O>=2&&U)?!1:!L||L.length==0||!oA(s,L)}function k(D,U,O,X){var W=O.definition();M.variables.has(O.name)||(M.variables.set(O.name,W),M.enclosed.push(W),D.push(j(vi,O,{name:O,value:null})));var se=j(Ge,O,O);W.references.push(se),X&&U.push(j(Ot,i,{operator:"=",logical:!1,left:se,right:X.clone()}))}function H(D,U){for(var O=s.argnames.length,X=i.args.length;--X>=O;)U.push(i.args[X]);for(X=O;--X>=0;){var W=s.argnames[X],re=i.args[X];if(rn(W,ps)||!W.name||M.conflicting_def(W.name))re&&U.push(re);else{var se=j(Wo,W,W);W.definition().orig.push(se),!re&&L&&(re=Ai(i)),k(D,U,se,re)}}D.reverse(),U.reverse()}function f(D,U){for(var O=U.length,X=0,W=s.body.length;X<W;X++){var re=s.body[X];if(re instanceof Ei)for(var se=0,Ue=re.definitions.length;se<Ue;se++){var me=re.definitions[se],Se=me.name;if(k(D,U,Se,me.value),L&&s.argnames.every(Ie=>Ie.name!=Se.name)){var xe=s.variables.get(Se.name),Ce=j(Ge,Se,Se);xe.references.push(Ce),U.splice(O++,0,j(Ot,me,{operator:"=",logical:!1,left:Ce,right:Ai(Se)}))}}}}function I(D){var U=[],O=[];if(H(U,O),f(U,O),O.push(D),U.length){const X=M.body.indexOf(n.parent(y-1))+1;M.body.splice(X,0,j(Ei,s,{definitions:U}))}return O.map(X=>X.clone(!0))}}function fA(i,n){return(n instanceof ot||n instanceof Mt)&&!!i.is_within_loop()}(function(i){function n(o,s){if(o instanceof He)return o instanceof Gt||(o=o.clone(!0)),j(o.CTOR,s,o);if(Array.isArray(o))return j(Ut,s,{elements:o.map(function(E){return n(E,s)})});if(o&&typeof o=="object"){var l=[];for(var p in o)Rn(o,p)&&l.push(j(Zt,s,{key:p,value:n(o[p],s)}));return j(Wt,s,{properties:l})}return kn(o,s)}si.DEFMETHOD("resolve_defines",function(o){return o.option("global_defs")?(this.figure_out_scope({ie8:o.option("ie8")}),this.transform(new Gn(function(s){var l=s._find_defs(o,"");if(l){for(var p=0,E=s,$;($=this.parent(p++))&&!(!($ instanceof lt)||$.expression!==E);)E=$;if(!ia(E,$))return l}}))):this}),i(He,Yn),i(Ci,function(o,s){return this.expression._find_defs(o,s)}),i(ni,function(o,s){return this.expression._find_defs(o,"."+this.property+s)}),i(Wi,function(){this.global()}),i(Ge,function(o,s){if(this.global()){var l=o.option("global_defs"),p=this.name+s;if(Rn(l,p))return n(l[p],this)}}),i(Go,function(o,s){var l=o.option("global_defs"),p="import.meta"+s;if(Rn(l,p))return n(l[p],this)})})(function(i,n){i.DEFMETHOD("_find_defs",n)});class gA extends Zi{constructor(n,{false_by_default:o=!1,mangle_options:s=!1}){super(),n.defaults!==void 0&&!n.defaults&&(o=!0),this.options=po(n,{arguments:!1,arrows:!o,booleans:!o,booleans_as_integers:!1,collapse_vars:!o,comparisons:!o,computed_props:!o,conditionals:!o,dead_code:!o,defaults:!0,directives:!o,drop_console:!1,drop_debugger:!o,ecma:5,evaluate:!o,expression:!1,global_defs:!1,hoist_funs:!1,hoist_props:!o,hoist_vars:!1,ie8:!1,if_return:!o,inline:!o,join_vars:!o,keep_classnames:!1,keep_fargs:!0,keep_fnames:!1,keep_infinity:!1,lhs_constants:!o,loops:!o,module:!1,negate_iife:!o,passes:1,properties:!o,pure_getters:!o&&"strict",pure_funcs:null,pure_new:!1,reduce_funcs:!o,reduce_vars:!o,sequences:!o,side_effects:!o,switches:!o,top_retain:null,toplevel:!!(n&&n.top_retain),typeofs:!o,unsafe:!1,unsafe_arrows:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_symbols:!1,unsafe_methods:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!o,warnings:!1},!0);var l=this.options.global_defs;if(typeof l=="object")for(var p in l)p[0]==="@"&&Rn(l,p)&&(l[p.slice(1)]=ku(l[p],{expression:!0}));this.options.inline===!0&&(this.options.inline=3);var E=this.options.pure_funcs;typeof E=="function"?this.pure_funcs=E:this.pure_funcs=E?function(L){return!E.includes(L.expression.print_to_string())}:on;var $=this.options.top_retain;$ instanceof RegExp?this.top_retain=function(L){return $.test(L.name)}:typeof $=="function"?this.top_retain=$:$&&(typeof $=="string"&&($=$.split(/,/)),this.top_retain=function(L){return $.includes(L.name)}),this.options.module&&(this.directives["use strict"]=!0,this.options.toplevel=!0);var R=this.options.toplevel;this.toplevel=typeof R=="string"?{funcs:/funcs/.test(R),vars:/vars/.test(R)}:{funcs:R,vars:R};var M=this.options.sequences;this.sequences_limit=M==1?800:M|0,this.evaluated_regexps=new Map,this._toplevel=void 0,this._mangle_options=s&&Lh(s)}mangle_options(){var n=this._mangle_options&&this._mangle_options.nth_identifier||Uu,o=this._mangle_options&&this._mangle_options.module||this.option("module");return{ie8:this.option("ie8"),nth_identifier:n,module:o}}option(n){return this.options[n]}exposed(n){if(n.export)return!0;if(n.global){for(var o=0,s=n.orig.length;o<s;o++)if(!this.toplevel[n.orig[o]instanceof To?"funcs":"vars"])return!0}return!1}in_boolean_context(){if(!this.option("booleans"))return!1;for(var n=this.self(),o=0,s;s=this.parent(o);o++){if(s instanceof rt||s instanceof It&&s.condition===n||s instanceof yh&&s.condition===n||s instanceof Oi&&s.condition===n||s instanceof Yt&&s.condition===n||s instanceof ut&&s.operator=="!"&&s.expression===n)return!0;if(s instanceof Oe&&(s.operator=="&&"||s.operator=="||"||s.operator=="??")||s instanceof It||s.tail_node()===n)n=s;else return!1}}in_32_bit_context(n){if(!this.option("evaluate"))return!1;for(var o=this.self(),s=0,l;l=this.parent(s);s++){if(l instanceof Oe&&Om.has(l.operator))return n?(o===l.left?l.right:l.left).is_number(this):!0;if(l instanceof ut)return l.operator==="~";if(l instanceof Oe&&(l.operator=="&&"&&l.right===o||l.operator=="||"&&l.right===o||l.operator=="??"&&l.right===o)||l instanceof It&&l.condition!==o||l.tail_node()===o)o=l;else return!1}}in_computed_key(){if(!this.option("evaluate"))return!1;for(var n=this.self(),o=0,s;s=this.parent(o);o++)if(s instanceof Ti&&s.key===n)return!0;return!1}get_toplevel(){return this._toplevel}compress(n){n=n.resolve_defines(this),this._toplevel=n,this.option("expression")&&this._toplevel.process_expression(!0);for(var o=+this.options.passes||1,s=1/0,l=!1,p=this.mangle_options(),E=0;E<o;E++)if(this._toplevel.figure_out_scope(p),E===0&&this.option("drop_console")&&(this._toplevel=this._toplevel.drop_console(this.option("drop_console"))),(E>0||this.option("reduce_vars"))&&this._toplevel.reset_opt_flags(this),this._toplevel=this._toplevel.transform(this),o>1){let $=0;if(Ki(this._toplevel,()=>{$++}),$<s)s=$,l=!1;else{if(l)break;l=!0}}return this.option("expression")&&this._toplevel.process_expression(!1),n=this._toplevel,this._toplevel=void 0,n}before(n,o){if(rn(n,Is))return n;var s=!1;n instanceof ht&&(n=n.hoist_properties(this),n=n.hoist_declarations(this),s=!0),o(n,this),o(n,this);var l=n.optimize(this);return s&&l instanceof ht&&(l.drop_unused(this),o(l,this)),l===n&&Wn(l,Is),l}is_lhs(){const n=this.stack[this.stack.length-1],o=this.stack[this.stack.length-2];return ia(n,o)}}function vt(i,n){i.DEFMETHOD("optimize",function(o){var s=this;if(rn(s,lm)||o.has_directive("use asm"))return s;var l=n(s,o);return Wn(l,lm),l})}vt(He,function(i){return i});si.DEFMETHOD("drop_console",function(i){const n=Array.isArray(i),o=new Gn(function(s){if(s.TYPE==="Call"){var l=s.expression;if(l instanceof lt){for(var p=l.expression,E=l.property,$=2;p.expression;)E=p.property,p=p.expression,$++;if(!(n&&!i.includes(E))&&zr(p)&&p.name=="console")if($===3&&!["call","apply"].includes(l.property)&&cA(o))l.expression=Sm(s),Wn(l.expression,Is),s.args=[];else return Ai(s)}}});return this.transform(o)});He.DEFMETHOD("equivalent_to",function(i){return RC(this,i)});ht.DEFMETHOD("process_expression",function(i,n){var o=this,s=new Gn(function(l){if(i&&l instanceof rt)return j(_i,l,{value:l.body});if(!i&&l instanceof _i){if(n){var p=l.value&&l.value.drop_side_effect_free(n,!0);return p?j(rt,l,{body:p}):j(qt,l)}return j(rt,l,{body:l.value||Ai(l)})}if(l instanceof Mt||l instanceof ot&&l!==o)return l;if(l instanceof Di){var E=l.body.length-1;E>=0&&(l.body[E]=l.body[E].transform(s))}else l instanceof Yt?(l.body=l.body.transform(s),l.alternative&&(l.alternative=l.alternative.transform(s))):l instanceof Zn&&(l.body=l.body.transform(s));return l});o.transform(s)});si.DEFMETHOD("reset_opt_flags",function(i){const n=this,o=i.option("reduce_vars"),s=new Zi(function(l,p){if(Sl(l,kC),o)return i.top_retain&&l instanceof fi&&s.parent()===n&&Wn(l,Tm),l.reduce_vars(s,p,i)});s.safe_ids=Object.create(null),s.in_loop=null,s.loop_ids=new Map,s.defs_to_safe_ids=new Map,n.walk(s)});Ft.DEFMETHOD("fixed_value",function(){var i=this.thedef.fixed;return!i||i instanceof He?i:i()});Ge.DEFMETHOD("is_immutable",function(){var i=this.definition().orig;return i.length==1&&i[0]instanceof Kr});function Nm(i,n){for(var o,s=0;(o=i.parent(s++))&&!(o instanceof ht);)if(o instanceof Eo&&o.argname){o=o.argname.definition().scope;break}return o.find_variable(n)}var JC=Vt("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Math Number parseFloat parseInt RangeError ReferenceError RegExp Object setInterval setTimeout String SyntaxError TypeError unescape URIError");Ge.DEFMETHOD("is_declared",function(i){return!this.definition().undeclared||i.option("unsafe")&&JC.has(this.name)});var ZC=new Set(["use asm","use strict"]);vt(Dn,function(i,n){return n.option("directives")&&(!ZC.has(i.value)||n.has_directive(i.value)!==i)?j(qt,i):i});vt(Po,function(i,n){return n.option("drop_debugger")?j(qt,i):i});vt($n,function(i,n){return i.body instanceof fr&&n.loopcontrol_target(i.body)===i.body?j(qt,i):i.label.references.length==0?i.body:i});vt(Di,function(i,n){return Hh(i.body,n),i});function QC(i){return!(i instanceof sa||i instanceof oa||i instanceof qn||i instanceof Mt)}vt(bt,function(i,n){switch(Hh(i.body,n),i.body.length){case 1:if(!n.has_directive("use strict")&&n.parent()instanceof Yt&&QC(i.body[0])||Th(i.body[0]))return i.body[0];break;case 0:return j(qt,i)}return i});function Dm(i,n){return Hh(i.body,n),n.option("side_effects")&&i.body.length==1&&i.body[0]===n.has_directive("use strict")&&(i.body.length=0),i}vt(ot,Dm);ht.DEFMETHOD("hoist_declarations",function(i){var n=this;if(i.has_directive("use asm"))return n;var o=i.option("hoist_funs"),s=i.option("hoist_vars");if(o||s){var l=[],p=[],E=new Map,$=0,R=0;Ki(n,g=>{if(g instanceof ht&&g!==n)return!0;if(g instanceof Ei)return++R,!0}),s=s&&R>1;var M=new Gn(function(d){if(d!==n){if(d instanceof Dn)return l.push(d),j(qt,d);if(o&&d instanceof fi&&!(M.parent()instanceof ki)&&M.parent()===n)return p.push(d),j(qt,d);if(s&&d instanceof Ei&&!d.definitions.some(H=>H.name instanceof jt)){d.definitions.forEach(function(H){E.set(H.name.name,H),++$});var C=d.to_assignments(i),x=M.parent();if(x instanceof sn&&x.init===d){if(C==null){var k=d.definitions[0].name;return j(Ge,k,k)}return C}return x instanceof Oi&&x.init===d?C:C?j(rt,d,{body:C}):j(qt,d)}if(d instanceof ht)return d}});if(n=n.transform(M),$>0){var L=[];const g=n instanceof ot,d=g?n.args_as_names():null;if(E.forEach((C,x)=>{g&&d.some(k=>k.name===C.name.name)?E.delete(x):(C=C.clone(),C.value=null,L.push(C),E.set(x,C))}),L.length>0){for(var y=0;y<n.body.length;){if(n.body[y]instanceof rt){var N=n.body[y].body,P,F;if(N instanceof Ot&&N.operator=="="&&(P=N.left)instanceof Ft&&E.has(P.name)){var K=E.get(P.name);if(K.value)break;K.value=N.right,al(L,K),L.push(K),n.body.splice(y,1);continue}if(N instanceof Ct&&(F=N.expressions[0])instanceof Ot&&F.operator=="="&&(P=F.left)instanceof Ft&&E.has(P.name)){var K=E.get(P.name);if(K.value)break;K.value=F.right,al(L,K),L.push(K),n.body[y].body=yt(N,N.expressions.slice(1));continue}}if(n.body[y]instanceof qt){n.body.splice(y,1);continue}if(n.body[y]instanceof bt){n.body.splice(y,1,...n.body[y].body);continue}break}L=j(Ei,n,{definitions:L}),p.push(L)}}n.body=l.concat(p,n.body)}return n});ht.DEFMETHOD("hoist_properties",function(i){var n=this;if(!i.option("hoist_props")||i.has_directive("use asm"))return n;var o=n instanceof si&&i.top_retain||xt,s=new Map,l=new Gn(function(p,E){if(p instanceof vi){const $=p.name;let R,M;if($.scope===n&&!($ instanceof bs)&&(R=$.definition()).escaped!=1&&!R.assignments&&!R.direct_access&&!R.single_use&&!i.exposed(R)&&!o(R)&&(M=$.fixed_value())===p.value&&M instanceof Wt&&!M.properties.some(L=>L instanceof Nt||L.computed_key())){E(p,this);const L=new Map,y=[];return M.properties.forEach(({key:N,value:P})=>{const F=l.find_scope(),K=n.create_symbol($.CTOR,{source:$,scope:F,conflict_scopes:new Set([F,...$.definition().references.map(g=>g.scope)]),tentative_name:$.name+"_"+N});L.set(String(N),K.definition()),y.push(j(vi,p,{name:K,value:P}))}),s.set(R.id,L),ti.splice(y)}}else if(p instanceof lt&&p.expression instanceof Ge){const $=s.get(p.expression.definition().id);if($){const R=$.get(String(tA(p.property))),M=j(Ge,p,{name:R.name,scope:p.expression.scope,thedef:R});return M.reference({}),M}}});return n.transform(l)});vt(rt,function(i,n){if(n.option("side_effects")){var o=i.body,s=o.drop_side_effect_free(n,!0);if(!s)return j(qt,i);if(s!==o)return j(rt,i,{body:s})}return i});vt(Bo,function(i,n){return n.option("loops")?j(Oi,i,i).optimize(n):i});vt($o,function(i,n){if(!n.option("loops"))return i;var o=i.condition.tail_node().evaluate(n);if(!(o instanceof He)){if(o)return j(Oi,i,{body:j(bt,i.body,{body:[i.body,j(rt,i.condition,{body:i.condition})]})}).optimize(n);if(!Im(i,n.parent()))return j(bt,i.body,{body:[i.body,j(rt,i.condition,{body:i.condition})]}).optimize(n)}return i});function mA(i,n){var o=i.body instanceof bt?i.body.body[0]:i.body;if(n.option("dead_code")&&l(o)){var s=[];return i.init instanceof Yi?s.push(i.init):i.init&&s.push(j(rt,i.init,{body:i.init})),i.condition&&s.push(j(rt,i.condition,{body:i.condition})),ca(n,i.body,s),j(bt,i,{body:s})}return o instanceof Yt&&(l(o.body)?(i.condition?i.condition=j(Oe,i.condition,{left:i.condition,operator:"&&",right:o.condition.negate(n)}):i.condition=o.condition.negate(n),p(o.alternative)):l(o.alternative)&&(i.condition?i.condition=j(Oe,i.condition,{left:i.condition,operator:"&&",right:o.condition}):i.condition=o.condition,p(o.body))),i;function l(E){return E instanceof fr&&n.loopcontrol_target(E)===n.self()}function p(E){E=jd(E),i.body instanceof bt?(i.body=i.body.clone(),i.body.body=E.concat(i.body.body.slice(1)),i.body=i.body.transform(n)):i.body=j(bt,i.body,{body:E}).transform(n),i=mA(i,n)}}vt(Oi,function(i,n){if(!n.option("loops"))return i;if(n.option("side_effects")&&i.init&&(i.init=i.init.drop_side_effect_free(n)),i.condition){var o=i.condition.evaluate(n);if(!(o instanceof He)){if(o)i.condition=null;else if(!n.option("dead_code")){var s=i.condition;i.condition=kn(o,i.condition),i.condition=zo(i.condition.transform(n),s)}}if(n.option("dead_code")&&(o instanceof He&&(o=i.condition.tail_node().evaluate(n)),!o)){var l=[];return ca(n,i.body,l),i.init instanceof Yi?l.push(i.init):i.init&&l.push(j(rt,i.init,{body:i.init})),l.push(j(rt,i.condition,{body:i.condition})),j(bt,i,{body:l}).optimize(n)}}return mA(i,n)});vt(Yt,function(i,n){if(fs(i.alternative)&&(i.alternative=null),!n.option("conditionals"))return i;var o=i.condition.evaluate(n);if(!n.option("dead_code")&&!(o instanceof He)){var s=i.condition;i.condition=kn(o,s),i.condition=zo(i.condition.transform(n),s)}if(n.option("dead_code"))if(o instanceof He&&(o=i.condition.tail_node().evaluate(n)),o){if(!(o instanceof He)){var l=[];return l.push(j(rt,i.condition,{body:i.condition})),l.push(i.body),i.alternative&&ca(n,i.alternative,l),j(bt,i,{body:l}).optimize(n)}}else{var l=[];return ca(n,i.body,l),l.push(j(rt,i.condition,{body:i.condition})),i.alternative&&l.push(i.alternative),j(bt,i,{body:l}).optimize(n)}var p=i.condition.negate(n),E=i.condition.size(),$=p.size(),R=$<E;if(i.alternative&&R){R=!1,i.condition=p;var M=i.body;i.body=i.alternative||j(qt,i),i.alternative=M}if(fs(i.body)&&fs(i.alternative))return j(rt,i.condition,{body:i.condition.clone()}).optimize(n);if(i.body instanceof rt&&i.alternative instanceof rt)return j(rt,i,{body:j(It,i,{condition:i.condition,consequent:i.body.body,alternative:i.alternative.body})}).optimize(n);if(fs(i.alternative)&&i.body instanceof rt)return E===$&&!R&&i.condition instanceof Oe&&i.condition.operator=="||"&&(R=!0),R?j(rt,i,{body:j(Oe,i,{operator:"||",left:p,right:i.body.body})}).optimize(n):j(rt,i,{body:j(Oe,i,{operator:"&&",left:i.condition,right:i.body.body})}).optimize(n);if(i.body instanceof qt&&i.alternative instanceof rt)return j(rt,i,{body:j(Oe,i,{operator:"||",left:i.condition,right:i.alternative.body})}).optimize(n);if(i.body instanceof xn&&i.alternative instanceof xn&&i.body.TYPE==i.alternative.TYPE)return j(i.body.CTOR,i,{value:j(It,i,{condition:i.condition,consequent:i.body.value||Ai(i.body),alternative:i.alternative.value||Ai(i.alternative)}).transform(n)}).optimize(n);if(i.body instanceof Yt&&!i.body.alternative&&!i.alternative&&(i=j(Yt,i,{condition:j(Oe,i.condition,{operator:"&&",left:i.condition,right:i.body.condition}),body:i.body.body,alternative:null})),_r(i.body)&&i.alternative){var L=i.alternative;return i.alternative=null,j(bt,i,{body:[i,L]}).optimize(n)}if(_r(i.alternative)){var l=i.body;return i.body=i.alternative,i.condition=R?p:i.condition.negate(n),i.alternative=null,j(bt,i,{body:[i,l]}).optimize(n)}return i});vt(gn,function(i,n){if(!n.option("switches"))return i;var o,s=i.expression.evaluate(n);if(!(s instanceof He)){var l=i.expression;i.expression=kn(s,l),i.expression=zo(i.expression.transform(n),l)}if(!n.option("dead_code"))return i;s instanceof He&&(s=i.expression.tail_node().evaluate(n));for(var p=[],E=[],$,R,M=0,L=i.body.length;M<L&&!R;M++){if(o=i.body[M],o instanceof _a)$?F(o,E[E.length-1]):$=o;else if(!(s instanceof He)){var y=o.expression.evaluate(n);if(!(y instanceof He)&&y!==s){F(o,E[E.length-1]);continue}if(y instanceof He&&!y.has_side_effects(n)&&(y=o.expression.tail_node().evaluate(n)),y===s&&(R=o,$)){var N=E.indexOf($);E.splice(N,1),F($,E[N-1]),$=null}}E.push(o)}for(;M<L;)F(i.body[M++],E[E.length-1]);i.body=E;let P=$||R;if($=null,R=null,E.every((k,H)=>(k===P||k.expression instanceof Gt)&&(k.body.length===0||_r(k)||E.length-1===H)))for(let k=0;k<E.length;k++){const H=E[k];for(let f=k+1;f<E.length;f++){const I=E[f];if(I.body.length===0)continue;const D=f===E.length-1,U=K(I,H,!1);if(U||D&&K(I,H,!0)){!U&&D&&I.body.push(j(fr));let O=f-1,X=0;for(;O>k&&x(E[O--]);)X++;const W=E.splice(f-X,1+X);E.splice(k+1,0,...W),k+=W.length}}}for(let k=0;k<E.length;k++){let H=E[k];if(H.body.length!==0&&_r(H))for(let f=k+1;f<E.length;k++,f++){let I=E[f];if(I.body.length!==0){if(K(I,H,!1)||f===E.length-1&&K(I,H,!0)){H.body=[],H=I;continue}break}}}{let k=E.length-1;for(;k>=0;k--){let H=E[k].body;for(;C(H[H.length-1],n);)H.pop();if(!x(E[k]))break}if(k++,!P||E.indexOf(P)>=k)for(let H=E.length-1;H>=k;H--){let f=E[H];if(f===P)P=null,F(E.pop());else if(!f.expression.has_side_effects(n))F(E.pop());else break}}e:if(P){let k=E.indexOf(P),H=k;for(;H<E.length-1&&x(E[H]);H++);if(H<E.length-1)break e;let f=E.length-1;for(;f>=0;f--){let I=E[f];if(I!==P&&I.expression.has_side_effects(n))break}if(H>f){let I=k-1;for(;I>=0&&x(E[I]);I--);let D=Math.max(f,I)+1,U=k;f>k?(U=f,E[f].body=E[H].body):P.body=E[H].body,E.splice(U+1,H-U),E.splice(D,k-D)}}e:if(P){let k=E.findIndex(D=>!x(D)),H;if(k===E.length-1){let D=E[k];if(d(i))break e;H=j(bt,D,{body:D.body}),D.body=[]}else if(k!==-1)break e;if(!E.find(D=>D!==P&&D.expression.has_side_effects(n)))return j(bt,i,{body:p.concat(g(i.expression),P.expression?g(P.expression):[],H||[])}).optimize(n);const I=E.indexOf(P);if(E.splice(I,1),P=null,H)return j(bt,i,{body:p.concat(i,H)}).optimize(n)}if(E.length>0&&(E[0].body=p.concat(E[0].body)),E.length==0)return j(bt,i,{body:p.concat(g(i.expression))}).optimize(n);if(E.length==1&&!d(i)){let k=E[0];return j(Yt,i,{condition:j(Oe,i,{operator:"===",left:i.expression,right:k.expression}),body:j(bt,k,{body:k.body}),alternative:null}).optimize(n)}if(E.length===2&&P&&!d(i)){let k=E[0]===P?E[1]:E[0],H=P.expression&&g(P.expression);if(_r(E[0])){let U=E[0];return C(U.body[U.body.length-1],n)&&U.body.pop(),j(Yt,i,{condition:j(Oe,i,{operator:"===",left:i.expression,right:k.expression}),body:j(bt,k,{body:k.body}),alternative:j(bt,P,{body:[].concat(H||[],P.body)})}).optimize(n)}let f="===",I=j(bt,k,{body:k.body}),D=j(bt,P,{body:[].concat(H||[],P.body)});if(E[0]===P){f="!==";let U=D;D=I,I=U}return j(bt,i,{body:[j(Yt,i,{condition:j(Oe,i,{operator:f,left:i.expression,right:k.expression}),body:I,alternative:null}),D]}).optimize(n)}return i;function F(k,H){H&&!_r(H)?H.body=H.body.concat(k.body):ca(n,k,p)}function K(k,H,f){let I=k.body,D=H.body;if(f&&(I=I.concat(j(fr))),I.length!==D.length)return!1;let U=j(bt,k,{body:I}),O=j(bt,H,{body:D});return U.equivalent_to(O)}function g(k){return j(rt,k,{body:k})}function d(k){let H=!1,f=new Zi(I=>{if(H||I instanceof ot||I instanceof rt)return!0;if(!C(I,f))return;let D=f.parent();D instanceof Vo&&D.body[D.body.length-1]===I||(H=!0)});return k.walk(f),H}function C(k,H){return k instanceof fr&&H.loopcontrol_target(k)===i}function x(k){return!_r(k)&&!j(bt,k,{body:k.body}).has_side_effects(n)}});vt(nr,function(i,n){if(i.bcatch&&i.bfinally&&i.bfinally.body.every(fs)&&(i.bfinally=null),n.option("dead_code")&&i.body.body.every(fs)){var o=[];return i.bcatch&&ca(n,i.bcatch,o),i.bfinally&&o.push(...i.bfinally.body),j(bt,i,{body:o}).optimize(n)}return i});In.DEFMETHOD("to_assignments",function(i){var n=i.option("reduce_vars"),o=[];for(const l of this.definitions){if(l.value){var s=j(Ge,l.name,l.name);o.push(j(Ot,l,{operator:"=",logical:!1,left:s,right:l.value})),n&&(s.definition().fixed=!1)}const p=l.name.definition();p.eliminated++,p.replaced--}return o.length==0?null:yt(this,o)});vt(In,function(i){return i.definitions.length==0?j(qt,i):i});vt(vi,function(i,n){return i.name instanceof _l&&i.value!=null&&Ur(i.value,n)&&(i.value=null),i});vt(gr,function(i){return i});vt(Qe,function(i,n){var o=i.expression,s=o;TA(i.args);var l=i.args.every(W=>!(W instanceof Nt));n.option("reduce_vars")&&s instanceof Ge&&(s=s.fixed_value());var p=s instanceof ot;if(p&&s.pinned())return i;if(n.option("unused")&&l&&p&&!s.uses_arguments){for(var E=0,$=0,R=0,M=i.args.length;R<M;R++){if(s.argnames[R]instanceof Nt){if(rn(s.argnames[R].expression,ps))for(;R<M;){var L=i.args[R++].drop_side_effect_free(n);L&&(i.args[E++]=L)}else for(;R<M;)i.args[E++]=i.args[R++];$=E;break}var y=R>=s.argnames.length;if(y||rn(s.argnames[R],ps)){var L=i.args[R].drop_side_effect_free(n);if(L)i.args[E++]=L;else if(!y){i.args[E++]=j(Tt,i.args[R],{value:0});continue}}else i.args[E++]=i.args[R];$=E}i.args.length=$}if(o instanceof ni&&o.expression instanceof Ge&&o.expression.name==="console"&&o.expression.definition().undeclared&&o.property==="assert"){const W=i.args[0];if(W){const re=W.evaluate(n);if(re===1||re===!0)return Ai(i).optimize(n)}}if(n.option("unsafe")&&!o.contains_optional()){if(o instanceof ni&&o.start.value==="Array"&&o.property==="from"&&i.args.length===1){const[W]=i.args;if(W instanceof Ut)return j(Ut,W,{elements:W.elements}).optimize(n)}if(zr(o))switch(o.name){case"Array":if(i.args.length!=1)return j(Ut,i,{elements:i.args}).optimize(n);if(i.args[0]instanceof Tt&&i.args[0].value<=11){const W=[];for(let re=0;re<i.args[0].value;re++)W.push(new Pn);return new Ut({elements:W})}break;case"Object":if(i.args.length==0)return j(Wt,i,{properties:[]});break;case"String":if(i.args.length==0)return j(wt,i,{value:""});if(i.args.length<=1)return j(Oe,i,{left:i.args[0],operator:"+",right:j(wt,i,{value:""})}).optimize(n);break;case"Number":if(i.args.length==0)return j(Tt,i,{value:0});if(i.args.length==1&&n.option("unsafe_math"))return j(ut,i,{expression:i.args[0],operator:"+"}).optimize(n);break;case"Symbol":i.args.length==1&&i.args[0]instanceof wt&&n.option("unsafe_symbols")&&(i.args.length=0);break;case"Boolean":if(i.args.length==0)return j(Ko,i);if(i.args.length==1)return j(ut,i,{expression:j(ut,i,{expression:i.args[0],operator:"!"}),operator:"!"}).optimize(n);break;case"RegExp":var N=[];if(i.args.length>=1&&i.args.length<=2&&i.args.every(W=>{var re=W.evaluate(n);return N.push(re),W!==re})&&jv(N[0])){let[W,re]=N;W=Oh(new RegExp(W).source);const se=j(Vn,i,{value:{source:W,flags:re}});if(se._eval(n)!==se)return se}break}else if(o instanceof ni)switch(o.property){case"toString":if(i.args.length==0&&!o.expression.may_throw_on_access(n))return j(Oe,i,{left:j(wt,i,{value:""}),operator:"+",right:o.expression}).optimize(n);break;case"join":if(o.expression instanceof Ut)e:{var P;if(i.args.length>0&&(P=i.args[0].evaluate(n),P===i.args[0]))break e;for(var F=[],K=[],R=0,M=o.expression.elements.length;R<M;R++){var g=o.expression.elements[R];if(g instanceof Nt)break e;var d=g.evaluate(n);d!==g?K.push(d):(K.length>0&&(F.push(j(wt,i,{value:K.join(P)})),K.length=0),F.push(g))}if(K.length>0&&F.push(j(wt,i,{value:K.join(P)})),F.length==0)return j(wt,i,{value:""});if(F.length==1)return F[0].is_string(n)?F[0]:j(Oe,F[0],{operator:"+",left:j(wt,i,{value:""}),right:F[0]});if(P==""){var C;return F[0].is_string(n)||F[1].is_string(n)?C=F.shift():C=j(wt,i,{value:""}),F.reduce(function(re,se){return j(Oe,se,{operator:"+",left:re,right:se})},C).optimize(n)}var L=i.clone();return L.expression=L.expression.clone(),L.expression.expression=L.expression.expression.clone(),L.expression.expression.elements=F,jn(n,i,L)}break;case"charAt":if(o.expression.is_string(n)){var x=i.args[0],k=x?x.evaluate(n):0;if(k!==x)return j(Li,o,{expression:o.expression,property:kn(k|0,x||o)}).optimize(n)}break;case"apply":if(i.args.length==2&&i.args[1]instanceof Ut){var H=i.args[1].elements.slice();return H.unshift(i.args[0]),j(Qe,i,{expression:j(ni,o,{expression:o.expression,optional:!1,property:"call"}),args:H}).optimize(n)}break;case"call":var f=o.expression;if(f instanceof Ge&&(f=f.fixed_value()),f instanceof ot&&!f.contains_this())return(i.args.length?yt(this,[i.args[0],j(Qe,i,{expression:o.expression,args:i.args.slice(1)})]):j(Qe,i,{expression:o.expression,args:[]})).optimize(n);break}}if(n.option("unsafe_Function")&&zr(o)&&o.name=="Function"){if(i.args.length==0)return Sm(i).optimize(n);if(i.args.every(W=>W instanceof wt))try{var X="n(function("+i.args.slice(0,-1).map(function(W){return W.value}).join(",")+"){"+i.args[i.args.length-1].value+"})",I=ku(X),D=n.mangle_options();I.figure_out_scope(D);var U=new gA(n.options,{mangle_options:n._mangle_options});I=I.transform(U),I.figure_out_scope(D),I.compute_char_frequency(D),I.mangle_names(D);var O;Ki(I,W=>{if(Fh(W))return O=W,Hn});var X=gm();return bt.prototype._codegen.call(O,O,X),i.args=[j(wt,i,{value:O.argnames.map(function(W){return W.print_to_string()}).join(",")}),j(wt,i.args[i.args.length-1],{value:X.get().replace(/^{|}$/g,"")})],i}catch(W){if(!(W instanceof Qv))throw W}}return qC(i,n)});He.DEFMETHOD("contains_optional",function(){return this instanceof lt||this instanceof Qe||this instanceof Ci?this.optional?!0:this.expression.contains_optional():!1});vt(yn,function(i,n){return n.option("unsafe")&&zr(i.expression)&&["Object","RegExp","Function","Error","Array"].includes(i.expression.name)?j(Qe,i,i).transform(n):i});vt(Ct,function(i,n){if(!n.option("side_effects"))return i;var o=[];l();var s=o.length-1;if(p(),s==0)return i=la(n.parent(),n.self(),o[0]),i instanceof Ct||(i=i.optimize(n)),i;return i.expressions=o,i;function l(){var E=Wr(n),$=i.expressions.length-1;i.expressions.forEach(function(R,M){M<$&&(R=R.drop_side_effect_free(n,E)),R&&(bm(o,R),E=!1)})}function p(){for(;s>0&&Ur(o[s],n);)s--;s<o.length-1&&(o[s]=j(ut,i,{operator:"void",expression:o[s]}),o.length=s+1)}});Jt.DEFMETHOD("lift_sequences",function(i){if(i.option("sequences")&&this.expression instanceof Ct){var n=this.expression.expressions.slice(),o=this.clone();return o.expression=n.pop(),n.push(o),yt(this,n).optimize(i)}return this});vt(Yo,function(i,n){return i.lift_sequences(n)});vt(ut,function(i,n){var o=i.expression;if(i.operator=="delete"&&!(o instanceof Ge||o instanceof lt||o instanceof Ci||rA(o)))return yt(i,[o,j(Jn,i)]).optimize(n);if(i.operator==="void"&&o instanceof Tt&&o.value===0)return $A(i,n)||i;var s=i.lift_sequences(n);if(s!==i)return s;if(n.option("side_effects")&&i.operator=="void")return o=o.drop_side_effect_free(n),o?(i.expression=o,i):Ai(i).optimize(n);if(n.in_boolean_context())switch(i.operator){case"!":if(o instanceof ut&&o.operator=="!")return o.expression;o instanceof Oe&&(i=jn(n,i,o.negate(n,Wr(n))));break;case"typeof":return(o instanceof Ge?j(Jn,i):yt(i,[o,j(Jn,i)])).optimize(n)}if(i.operator=="-"&&o instanceof Ss&&(o=o.transform(n)),o instanceof Oe&&(i.operator=="+"||i.operator=="-")&&(o.operator=="*"||o.operator=="/"||o.operator=="%"))return j(Oe,i,{operator:o.operator,left:j(ut,o.left,{operator:i.operator,expression:o.left}),right:o.right});if(n.option("evaluate")){if(i.operator==="~"&&i.expression instanceof ut&&i.expression.operator==="~"&&(n.in_32_bit_context(!1)||i.expression.expression.is_32_bit_integer(n)))return i.expression.expression;if(i.operator==="~"&&o instanceof Oe&&o.operator==="^")return o.left instanceof ut&&o.left.operator==="~"?o.left=o.left.bitwise_negate(n,!0):o.right=o.right.bitwise_negate(n,!0),o}if(i.operator!="-"||!(o instanceof Tt||o instanceof Ss||o instanceof Dr)){var l=i.evaluate(n);if(l!==i)return l=kn(l,i).optimize(n),jn(n,l,i)}return i});Oe.DEFMETHOD("lift_sequences",function(i){if(i.option("sequences")){if(this.left instanceof Ct){var n=this.left.expressions.slice(),o=this.clone();return o.left=n.pop(),n.push(o),yt(this,n).optimize(i)}if(this.right instanceof Ct&&!this.left.has_side_effects(i)){for(var s=this.operator=="="&&this.left instanceof Ge,n=this.right.expressions,l=n.length-1,p=0;p<l&&!(!s&&n[p].has_side_effects(i));p++);if(p==l){n=n.slice();var o=this.clone();return o.right=n.pop(),n.push(o),yt(this,n).optimize(i)}else if(p>0){var o=this.clone();return o.right=yt(this.right,n.slice(p)),n=n.slice(0,p),n.push(o),yt(this,n).optimize(i)}}}return this});var ey=Vt("== === != !== * & | ^");function ty(i){return i instanceof Ut||i instanceof ot||i instanceof Wt||i instanceof Mt}vt(Oe,function(i,n){function o(){return i.left.is_constant()||i.right.is_constant()||!i.left.has_side_effects(n)&&!i.right.has_side_effects(n)}function s(f){if(o()){f&&(i.operator=f);var I=i.left;i.left=i.right,i.right=I}}if(n.option("lhs_constants")&&ey.has(i.operator)&&i.right.is_constant()&&!i.left.is_constant()&&(i.left instanceof Oe&&hr[i.left.operator]>=hr[i.operator]||s()),i=i.lift_sequences(n),n.option("comparisons"))switch(i.operator){case"===":case"!==":var l=!0;(i.left.is_string(n)&&i.right.is_string(n)||i.left.is_number(n)&&i.right.is_number(n)||i.left.is_bigint(n)&&i.right.is_bigint(n)||i.left.is_boolean()&&i.right.is_boolean()||i.left.equivalent_to(i.right))&&(i.operator=i.operator.substr(0,2));case"==":case"!=":if(!l&&Ur(i.left,n))i.left=j(Fn,i.left);else if(!l&&Ur(i.right,n))i.right=j(Fn,i.right);else if(n.option("typeofs")&&i.left instanceof wt&&i.left.value=="undefined"&&i.right instanceof ut&&i.right.operator=="typeof"){var p=i.right.expression;(p instanceof Ge?p.is_declared(n):!(p instanceof lt&&n.option("ie8")))&&(i.right=p,i.left=Ai(i.left).optimize(n),i.operator.length==2&&(i.operator+="="))}else if(n.option("typeofs")&&i.left instanceof ut&&i.left.operator=="typeof"&&i.right instanceof wt&&i.right.value=="undefined"){var p=i.left.expression;(p instanceof Ge?p.is_declared(n):!(p instanceof lt&&n.option("ie8")))&&(i.left=p,i.right=Ai(i.right).optimize(n),i.operator.length==2&&(i.operator+="="))}else{if(i.left instanceof Ge&&i.right instanceof Ge&&i.left.definition()===i.right.definition()&&ty(i.left.fixed_value()))return j(i.operator[0]=="="?Jn:Ko,i);if(i.left.is_32_bit_integer(n)&&i.right.is_32_bit_integer(n)){const f=X=>j(ut,X,{operator:"!",expression:X}),I=(X,W)=>W?n.in_boolean_context()?X:f(f(X)):f(X);if(i.left instanceof Tt&&i.left.value===0)return I(i.right,i.operator[0]==="!");if(i.right instanceof Tt&&i.right.value===0)return I(i.left,i.operator[0]==="!");let D,U,O;if((D=i.left instanceof Oe?i.left:i.right instanceof Oe?i.right:null)&&(O=D===i.left?i.right:i.left)&&D.operator==="&"&&O instanceof Tt&&O.is_32_bit_integer(n)&&(U=D.left.equivalent_to(O)?D.right:D.right.equivalent_to(O)?D.left:null)){let X=I(j(Oe,i,{operator:"&",left:O,right:j(ut,i,{operator:"~",expression:U})}),i.operator[0]==="!");return jn(n,X,i)}}}break;case"&&":case"||":var E=i.left;if(E.operator==i.operator&&(E=E.right),E instanceof Oe&&E.operator==(i.operator=="&&"?"!==":"===")&&i.right instanceof Oe&&E.operator==i.right.operator&&(Ur(E.left,n)&&i.right.left instanceof Fn||E.left instanceof Fn&&Ur(i.right.left,n))&&!E.right.has_side_effects(n)&&E.right.equivalent_to(i.right.right)){var $=j(Oe,i,{operator:E.operator.slice(0,-1),left:j(Fn,i),right:E.right});return E!==i.left&&($=j(Oe,i,{operator:i.operator,left:i.left.left,right:$})),$}break}if(i.operator=="+"&&n.in_boolean_context()){var R=i.left.evaluate(n),M=i.right.evaluate(n);if(R&&typeof R=="string")return yt(i,[i.right,j(Jn,i)]).optimize(n);if(M&&typeof M=="string")return yt(i,[i.left,j(Jn,i)]).optimize(n)}if(n.option("comparisons")&&i.is_boolean()){if(!(n.parent()instanceof Oe)||n.parent()instanceof Ot){var L=j(ut,i,{operator:"!",expression:i.negate(n,Wr(n))});i=jn(n,i,L)}if(n.option("unsafe_comps"))switch(i.operator){case"<":s(">");break;case"<=":s(">=");break}}if(i.operator=="+"){if(i.right instanceof wt&&i.right.getValue()==""&&i.left.is_string(n))return i.left;if(i.left instanceof wt&&i.left.getValue()==""&&i.right.is_string(n))return i.right;if(i.left instanceof Oe&&i.left.operator=="+"&&i.left.left instanceof wt&&i.left.left.getValue()==""&&i.right.is_string(n))return i.left=i.left.right,i}if(n.option("evaluate")){switch(i.operator){case"&&":var R=rn(i.left,wg)?!0:rn(i.left,Mg)?!1:i.left.evaluate(n);if(R){if(!(R instanceof He))return yt(i,[i.left,i.right]).optimize(n)}else return la(n.parent(),n.self(),i.left).optimize(n);var M=i.right.evaluate(n);if(M){if(!(M instanceof He)){var y=n.parent();if(y.operator=="&&"&&y.left===n.self()||n.in_boolean_context())return i.left.optimize(n)}}else{if(n.in_boolean_context())return yt(i,[i.left,j(Ko,i)]).optimize(n);Wn(i,Mg)}if(i.left.operator=="||"){var N=i.left.right.evaluate(n);if(!N)return j(It,i,{condition:i.left.left,consequent:i.right,alternative:i.left.right}).optimize(n)}break;case"||":var R=rn(i.left,wg)?!0:rn(i.left,Mg)?!1:i.left.evaluate(n);if(R){if(!(R instanceof He))return la(n.parent(),n.self(),i.left).optimize(n)}else return yt(i,[i.left,i.right]).optimize(n);var M=i.right.evaluate(n);if(M){if(!(M instanceof He)){if(n.in_boolean_context())return yt(i,[i.left,j(Jn,i)]).optimize(n);Wn(i,wg)}}else{var y=n.parent();if(y.operator=="||"&&y.left===n.self()||n.in_boolean_context())return i.left.optimize(n)}if(i.left.operator=="&&"){var N=i.left.right.evaluate(n);if(N&&!(N instanceof He))return j(It,i,{condition:i.left.left,consequent:i.left.right,alternative:i.right}).optimize(n)}break;case"??":if(Xr(i.left,n))return i.right;var R=i.left.evaluate(n);if(!(R instanceof He))return R==null?i.right:i.left;if(n.in_boolean_context()){const D=i.right.evaluate(n);if(!(D instanceof He)&&!D)return i.left}}var P=!0;switch(i.operator){case"+":if(i.right instanceof Gt&&i.left instanceof Oe&&i.left.operator=="+"&&i.left.is_string(n)){var F=j(Oe,i,{operator:"+",left:i.left.right,right:i.right}),K=F.optimize(n);F!==K&&(i=j(Oe,i,{operator:"+",left:i.left.left,right:K}))}if(i.left instanceof Oe&&i.left.operator=="+"&&i.left.is_string(n)&&i.right instanceof Oe&&i.right.operator=="+"&&i.right.is_string(n)){var F=j(Oe,i,{operator:"+",left:i.left.right,right:i.right.left}),g=F.optimize(n);F!==g&&(i=j(Oe,i,{operator:"+",left:j(Oe,i.left,{operator:"+",left:i.left.left,right:g}),right:i.right.right}))}if(i.right instanceof ut&&i.right.operator=="-"&&i.left.is_number_or_bigint(n)){i=j(Oe,i,{operator:"-",left:i.left,right:i.right.expression});break}if(i.left instanceof ut&&i.left.operator=="-"&&o()&&i.right.is_number_or_bigint(n)){i=j(Oe,i,{operator:"-",left:i.right,right:i.left.expression});break}if(i.left instanceof mn){var d=i.left,K=i.right.evaluate(n);if(K!=i.right)return d.segments[d.segments.length-1].value+=String(K),d}if(i.right instanceof mn){var K=i.right,d=i.left.evaluate(n);if(d!=i.left)return K.segments[0].value=String(d)+K.segments[0].value,K}if(i.left instanceof mn&&i.right instanceof mn){var d=i.left,C=d.segments,K=i.right;C[C.length-1].value+=K.segments[0].value;for(var x=1;x<K.segments.length;x++)C.push(K.segments[x]);return d}case"*":P=n.option("unsafe_math");case"&":case"|":case"^":if(i.left.is_number_or_bigint(n)&&i.right.is_number_or_bigint(n)&&o()&&!(i.left instanceof Oe&&i.left.operator!=i.operator&&hr[i.left.operator]>=hr[i.operator])){var k=j(Oe,i,{operator:i.operator,left:i.right,right:i.left});i.right instanceof Gt&&!(i.left instanceof Gt)?i=jn(n,k,i):i=jn(n,i,k)}P&&i.is_number_or_bigint(n)&&(i.right instanceof Oe&&i.right.operator==i.operator&&(i=j(Oe,i,{operator:i.operator,left:j(Oe,i.left,{operator:i.operator,left:i.left,right:i.right.left,start:i.left.start,end:i.right.left.end}),right:i.right.right})),i.right instanceof Gt&&i.left instanceof Oe&&i.left.operator==i.operator&&(i.left.left instanceof Gt?i=j(Oe,i,{operator:i.operator,left:j(Oe,i.left,{operator:i.operator,left:i.left.left,right:i.right,start:i.left.left.start,end:i.right.end}),right:i.left.right}):i.left.right instanceof Gt&&(i=j(Oe,i,{operator:i.operator,left:j(Oe,i.left,{operator:i.operator,left:i.left.right,right:i.right,start:i.left.right.start,end:i.right.end}),right:i.left.left}))),i.left instanceof Oe&&i.left.operator==i.operator&&i.left.right instanceof Gt&&i.right instanceof Oe&&i.right.operator==i.operator&&i.right.left instanceof Gt&&(i=j(Oe,i,{operator:i.operator,left:j(Oe,i.left,{operator:i.operator,left:j(Oe,i.left.left,{operator:i.operator,left:i.left.right,right:i.right.left,start:i.left.right.start,end:i.right.left.end}),right:i.left.left}),right:i.right.right})))}if(Om.has(i.operator)){let f,I,D,U,O=i.left;if(i.operator==="&"&&i.right instanceof Oe&&i.right.operator==="|"&&typeof(I=i.left.evaluate(n))=="number"&&(typeof(f=i.right.right.evaluate(n))=="number"?(D=i.right.left,U=i.right.right):typeof(f=i.right.left.evaluate(n))=="number"&&(D=i.right.right,U=i.right.left),D&&U))if((f&I)===0)i=j(Oe,i,{operator:i.operator,left:O,right:D});else{const me=j(Oe,i,{operator:"|",left:j(Oe,i,{operator:"&",left:D,right:O}),right:kn(f&I,U)});i=jn(n,i,me)}(i.operator==="|"||i.operator==="&")&&i.left.equivalent_to(i.right)&&!i.left.has_side_effects(n)&&n.in_32_bit_context(!0)&&(i.left=j(Tt,i,{value:0}),i.operator="|"),i.operator==="^"&&i.left instanceof ut&&i.left.operator==="~"&&i.right instanceof ut&&i.right.operator==="~"&&(i=j(Oe,i,{operator:"^",left:i.left.expression,right:i.right.expression})),(i.operator==="<<"||i.operator===">>")&&i.right instanceof Tt&&i.right.value===0&&(i.operator="|");const X=i.right instanceof Tt&&i.right.value===0?i.right:i.left instanceof Tt&&i.left.value===0?i.left:null,W=X&&(X===i.right?i.left:i.right);if(X&&(i.operator==="|"||i.operator==="^")&&(W.is_32_bit_integer(n)||n.in_32_bit_context(!0)))return W;if(X&&i.operator==="&"&&!W.has_side_effects(n)&&W.is_32_bit_integer(n))return X;const re=me=>me instanceof Tt&&me.value===-1||me instanceof ut&&me.operator==="-"&&me.expression instanceof Tt&&me.expression.value===1,se=re(i.right)?i.right:re(i.left)?i.left:null,Ue=se===i.right?i.left:i.right;if(se&&i.operator==="&"&&(Ue.is_32_bit_integer(n)||n.in_32_bit_context(!0)))return Ue;if(se&&i.operator==="^"&&(Ue.is_32_bit_integer(n)||n.in_32_bit_context(!0)))return Ue.bitwise_negate(n)}}if(i.right instanceof Oe&&i.right.operator==i.operator&&(ua.has(i.operator)||i.operator=="+"&&(i.right.left.is_string(n)||i.left.is_string(n)&&i.right.right.is_string(n))))return i.left=j(Oe,i.left,{operator:i.operator,left:i.left.transform(n),right:i.right.left.transform(n)}),i.right=i.right.right.transform(n),i.transform(n);var H=i.evaluate(n);return H!==i?(H=kn(H,i).optimize(n),jn(n,H,i)):i});vt(ta,function(i){return i});vt(Ge,function(i,n){if(!n.option("ie8")&&zr(i)&&!n.find_parent(Zn))switch(i.name){case"undefined":return j(Tl,i).optimize(n);case"NaN":return j(Bu,i).optimize(n);case"Infinity":return j(Ss,i).optimize(n)}return n.option("reduce_vars")&&!n.is_lhs()?jC(i,n):i});function bh(i,n){return i instanceof Ge||i.TYPE===n.TYPE}function $A(i,n){if(n.option("unsafe_undefined")){var o=Nm(n,"undefined");if(o){var s=j(Ge,i,{name:"undefined",scope:o.scope,thedef:o});return Wn(s,Em),s}}return null}vt(Tl,function(i,n){var o=$A(i,n);if(o)return o;var s=n.is_lhs();return s&&bh(s,i)?i:Ai(i)});vt(Ss,function(i,n){var o=n.is_lhs();return o&&bh(o,i)||n.option("keep_infinity")&&!(o&&!bh(o,i))&&!Nm(n,"Infinity")?i:j(Oe,i,{operator:"/",left:j(Tt,i,{value:1}),right:j(Tt,i,{value:0})})});vt(Bu,function(i,n){var o=n.is_lhs();return o&&!bh(o,i)||Nm(n,"NaN")?j(Oe,i,{operator:"/",left:j(Tt,i,{value:0}),right:j(Tt,i,{value:0})}):i});const iy=Vt("+ - / * % >> << >>> | ^ &"),ny=Vt("* | ^ &");vt(Ot,function(i,n){if(i.logical)return i.lift_sequences(n);var o;if(i.operator==="="&&i.left instanceof Ge&&i.left.name!=="arguments"&&!(o=i.left.definition()).undeclared&&i.right.equivalent_to(i.left))return i.right;if(n.option("dead_code")&&i.left instanceof Ge&&(o=i.left.definition()).scope===n.find_parent(ot)){var s=0,l,p=i;do if(l=p,p=n.parent(s++),p instanceof xn){if(E(s,p)||oA(o.scope,[o]))break;return i.operator=="="?i.right:(o.fixed=!1,j(Oe,i,{operator:i.operator.slice(0,-1),left:i.left,right:i.right}).optimize(n))}while(p instanceof Oe&&p.right===l||p instanceof Ct&&p.tail_node()===l)}return i=i.lift_sequences(n),i.operator=="="&&i.left instanceof Ge&&i.right instanceof Oe&&(i.right.left instanceof Ge&&i.right.left.name==i.left.name&&iy.has(i.right.operator)?(i.operator=i.right.operator+"=",i.right=i.right.right):i.right.right instanceof Ge&&i.right.right.name==i.left.name&&ny.has(i.right.operator)&&!i.right.left.has_side_effects(n)&&(i.operator=i.right.operator+"=",i.right=i.right.left)),i;function E($,R){function M(){const N=i.right;i.right=j(Fn,N);const P=R.may_throw(n);return i.right=N,P}for(var L=i.left.definition().scope.get_defun_scope(),y;(y=n.parent($++))!==L;)if(y instanceof nr&&(y.bfinally||y.bcatch&&M()))return!0}});vt(fn,function(i,n){if(!n.option("evaluate"))return i;var o=i.right.evaluate(n);let s,l;return o===void 0?(!((s=n.parent())instanceof ot)||n.option("keep_fargs")===!1||(l=n.parent(1)).TYPE==="Call"&&l.expression===s)&&(i=i.left):o!==i.right&&(o=kn(o,i.right),i.right=zo(o,i.right)),i});function ry(i,n,o){if(n.may_throw(o))return!1;let s;if(i instanceof Oe&&i.operator==="=="&&((s=Xr(i.left,o)&&i.left)||(s=Xr(i.right,o)&&i.right))&&(s===i.left?i.right:i.left).equivalent_to(n))return!0;if(i instanceof Oe&&i.operator==="||"){let l,p;const E=$=>{if(!($ instanceof Oe&&($.operator==="==="||$.operator==="==")))return!1;let R=0,M;return $.left instanceof Fn&&(R++,l=$,M=$.right),$.right instanceof Fn&&(R++,l=$,M=$.left),Ur($.left,o)&&(R++,p=$,M=$.right),Ur($.right,o)&&(R++,p=$,M=$.left),!(R!==1||!M.equivalent_to(n))};if(!E(i.left)||!E(i.right))return!1;if(l&&p&&l!==p)return!0}return!1}vt(It,function(i,n){if(!n.option("conditionals"))return i;if(i.condition instanceof Ct){var o=i.condition.expressions.slice();return i.condition=o.pop(),o.push(i),yt(i,o)}var s=i.condition.evaluate(n);if(s!==i.condition)return s?la(n.parent(),n.self(),i.consequent):la(n.parent(),n.self(),i.alternative);var l=s.negate(n,Wr(n));jn(n,s,l)===l&&(i=j(It,i,{condition:l,consequent:i.alternative,alternative:i.consequent}));var p=i.condition,E=i.consequent,$=i.alternative;if(p instanceof Ge&&E instanceof Ge&&p.definition()===E.definition())return j(Oe,i,{operator:"||",left:p,right:$});if(E instanceof Ot&&$ instanceof Ot&&E.operator===$.operator&&E.logical===$.logical&&E.left.equivalent_to($.left)&&(!i.condition.has_side_effects(n)||E.operator=="="&&!E.left.has_side_effects(n)))return j(Ot,i,{operator:E.operator,left:E.left,logical:E.logical,right:j(It,i,{condition:i.condition,consequent:E.right,alternative:$.right})});var R;if(E instanceof Qe&&$.TYPE===E.TYPE&&E.args.length>0&&E.args.length==$.args.length&&E.expression.equivalent_to($.expression)&&!i.condition.has_side_effects(n)&&!E.expression.has_side_effects(n)&&typeof(R=F())=="number"){var M=E.clone();return M.args[R]=j(It,i,{condition:i.condition,consequent:E.args[R],alternative:$.args[R]}),M}if($ instanceof It&&E.equivalent_to($.consequent))return j(It,i,{condition:j(Oe,i,{operator:"||",left:p,right:$.condition}),consequent:E,alternative:$.alternative}).optimize(n);if(n.option("ecma")>=2020&&ry(p,$,n))return j(Oe,i,{operator:"??",left:$,right:E}).optimize(n);if($ instanceof Ct&&E.equivalent_to($.expressions[$.expressions.length-1]))return yt(i,[j(Oe,i,{operator:"||",left:p,right:yt(i,$.expressions.slice(0,-1))}),E]).optimize(n);if($ instanceof Oe&&$.operator=="&&"&&E.equivalent_to($.right))return j(Oe,i,{operator:"&&",left:j(Oe,i,{operator:"||",left:p,right:$.left}),right:E}).optimize(n);if(E instanceof It&&E.alternative.equivalent_to($))return j(It,i,{condition:j(Oe,i,{left:i.condition,operator:"&&",right:E.condition}),consequent:E.consequent,alternative:$});if(E.equivalent_to($))return yt(i,[i.condition,E]).optimize(n);if(E instanceof Oe&&E.operator=="||"&&E.right.equivalent_to($))return j(Oe,i,{operator:"||",left:j(Oe,i,{operator:"&&",left:i.condition,right:E.left}),right:$}).optimize(n);const L=n.in_boolean_context();if(N(i.consequent))return P(i.alternative)?y(i.condition):j(Oe,i,{operator:"||",left:y(i.condition),right:i.alternative});if(P(i.consequent))return N(i.alternative)?y(i.condition.negate(n)):j(Oe,i,{operator:"&&",left:y(i.condition.negate(n)),right:i.alternative});if(N(i.alternative))return j(Oe,i,{operator:"||",left:y(i.condition.negate(n)),right:i.consequent});if(P(i.alternative))return j(Oe,i,{operator:"&&",left:y(i.condition),right:i.consequent});return i;function y(K){return K.is_boolean()?K:j(ut,K,{operator:"!",expression:K.negate(n)})}function N(K){return K instanceof Jn||L&&K instanceof Gt&&K.getValue()||K instanceof ut&&K.operator=="!"&&K.expression instanceof Gt&&!K.expression.getValue()}function P(K){return K instanceof Ko||L&&K instanceof Gt&&!K.getValue()||K instanceof ut&&K.operator=="!"&&K.expression instanceof Gt&&K.expression.getValue()}function F(){for(var K=E.args,g=$.args,d=0,C=K.length;d<C;d++){if(K[d]instanceof Nt)return;if(!K[d].equivalent_to(g[d])){if(g[d]instanceof Nt)return;for(var x=d+1;x<C;x++)if(K[x]instanceof Nt||!K[x].equivalent_to(g[x]))return;return d}}}});vt(kh,function(i,n){if(n.in_boolean_context())return j(Tt,i,{value:+i.value});var o=n.parent();return n.option("booleans_as_integers")?(o instanceof Oe&&(o.operator=="==="||o.operator=="!==")&&(o.operator=o.operator.replace(/=$/,"")),j(Tt,i,{value:+i.value})):n.option("booleans")?o instanceof Oe&&(o.operator=="=="||o.operator=="!=")?j(Tt,i,{value:+i.value}):j(ut,i,{operator:"!",expression:j(Tt,i,{value:1-i.value})}):i});function EA(i,n){return i instanceof Ge&&(i=i.fixed_value()),i?!(i instanceof ot||i instanceof Mt)||!(i instanceof ot&&i.contains_this())?!0:n.parent()instanceof yn:!1}lt.DEFMETHOD("flatten_object",function(i,n){if(n.option("properties")&&i!=="__proto__"&&!(this instanceof mr)){var o=n.option("unsafe_arrows")&&n.option("ecma")>=2015,s=this.expression;if(s instanceof Wt)for(var l=s.properties,p=l.length;--p>=0;){var E=l[p];if(""+(E instanceof an?E.key.name:E.key)==i)return!l.every(R=>(R instanceof Zt||o&&R instanceof an&&!R.value.is_generator)&&!R.computed_key())||!EA(E.value,n)?void 0:j(Li,this,{expression:j(Ut,s,{elements:l.map(function(R){var M=R.value;M instanceof Uo&&(M=j(ii,M,M));var L=R.key;return L instanceof He&&!(L instanceof nn)?yt(R,[L,M]):M})}),property:j(Tt,this,{value:p})})}}});vt(Li,function(i,n){var o=i.expression,s=i.property;if(n.option("properties")){var l=s.evaluate(n);if(l!==s){if(typeof l=="string")if(l=="undefined")l=void 0;else{var p=parseFloat(l);p.toString()==l&&(l=p)}s=i.property=zo(s,kn(l,s).transform(n));var E=""+l;if(Ch(E)&&E.length<=s.size()+1)return j(ni,i,{expression:o,optional:i.optional,property:E,quote:s.quote}).optimize(n)}}var $;e:if(n.option("arguments")&&o instanceof Ge&&o.name=="arguments"&&o.definition().orig.length==1&&($=o.scope)instanceof ot&&$.uses_arguments&&!($ instanceof di)&&s instanceof Tt){for(var R=s.getValue(),M=new Set,L=$.argnames,y=0;y<L.length;y++){if(!(L[y]instanceof Xi))break e;var N=L[y].name;if(M.has(N))break e;M.add(N)}var P=$.argnames[R];if(P&&n.has_directive("use strict")){var F=P.definition();(!n.option("reduce_vars")||F.assignments||F.orig.length>1)&&(P=null)}else if(!P&&!n.option("keep_fargs")&&R<$.argnames.length+5)for(;R>=$.argnames.length;)P=$.create_symbol(Xi,{source:$,scope:$,tentative_name:"argument_"+$.argnames.length}),$.argnames.push(P);if(P){var K=j(Ge,i,P);return K.reference({}),Sl(P,ps),K}}if(n.is_lhs())return i;if(l!==s){var g=i.flatten_object(E,n);g&&(o=i.expression=g.expression,s=i.property=g.property)}if(n.option("properties")&&n.option("side_effects")&&s instanceof Tt&&o instanceof Ut){var R=s.getValue(),d=o.elements,C=d[R];e:if(EA(C,n)){for(var x=!0,k=[],H=d.length;--H>R;){var p=d[H].drop_side_effect_free(n);p&&(k.unshift(p),x&&p.has_side_effects(n)&&(x=!1))}if(C instanceof Nt)break e;for(C=C instanceof Pn?Ai(C):C,x||k.unshift(C);--H>=0;){var p=d[H];if(p instanceof Nt)break e;p=p.drop_side_effect_free(n),p?k.unshift(p):R--}return x?(k.push(C),yt(i,k).optimize(n)):j(Li,i,{expression:j(Ut,o,{elements:k}),property:j(Tt,s,{value:R})})}}var f=i.evaluate(n);return f!==i?(f=kn(f,i).optimize(n),jn(n,f,i)):i});vt(Ci,function(i,n){if(Xr(i.expression,n)){let o=n.parent();return o instanceof ut&&o.operator==="delete"?kn(0,i):Ai(i).optimize(n)}return i.expression instanceof lt||i.expression instanceof Qe?i:i.expression});vt(ni,function(i,n){const o=n.parent();if(n.is_lhs())return i;if(n.option("unsafe_proto")&&i.expression instanceof ni&&i.expression.property=="prototype"){var s=i.expression.expression;if(zr(s))switch(s.name){case"Array":i.expression=j(Ut,i.expression,{elements:[]});break;case"Function":i.expression=Sm(i.expression);break;case"Number":i.expression=j(Tt,i.expression,{value:0});break;case"Object":i.expression=j(Wt,i.expression,{properties:[]});break;case"RegExp":i.expression=j(Vn,i.expression,{value:{source:"t",flags:""}});break;case"String":i.expression=j(wt,i.expression,{value:""});break}}if(!(o instanceof Qe)||!Nn(o,aa)){const p=i.flatten_object(i.property,n);if(p)return p.optimize(n)}if(i.expression instanceof lt&&o instanceof lt)return i;let l=i.evaluate(n);return l!==i?(l=kn(l,i).optimize(n),jn(n,l,i)):i});function km(i,n){return n.in_boolean_context()?jn(n,i,yt(i,[i,j(Jn,i)]).optimize(n)):i}function TA(i){for(var n=0;n<i.length;n++){var o=i[n];if(o instanceof Nt){var s=o.expression;s instanceof Ut&&!s.elements.some(l=>l instanceof Pn)&&(i.splice(n,1,...s.elements),n--)}}}vt(Ut,function(i,n){var o=km(i,n);return o!==i?o:(TA(i.elements),i)});function oy(i){for(var n=0;n<i.length;n++){var o=i[n];if(o instanceof Nt){const s=o.expression;s instanceof Wt&&s.properties.every(l=>l instanceof Zt)?(i.splice(n,1,...s.properties),n--):(s instanceof Gt||s.is_constant())&&!(s instanceof wt)&&(i.splice(n,1),n--)}}}vt(Wt,function(i,n){var o=km(i,n);return o!==i?o:(oy(i.properties),i)});vt(Vn,km);vt(_i,function(i,n){return i.value&&Ur(i.value,n)&&(i.value=null),i});vt(di,Dm);vt(ii,function(i,n){return i=Dm(i,n),n.option("unsafe_arrows")&&n.option("ecma")>=2015&&!i.name&&!i.is_generator&&!i.uses_arguments&&!i.pinned()&&!Ki(i,s=>{if(s instanceof ln)return Hn})?j(di,i,i).optimize(n):i});vt(Mt,function(i){for(let n=0;n<i.properties.length;n++){const o=i.properties[n];o instanceof En&&o.body.length==0&&(i.properties.splice(n,1),n--)}return i});vt(En,function(i,n){return Hh(i.body,n),i});vt(er,function(i,n){return i.expression&&!i.is_star&&Ur(i.expression,n)&&(i.expression=null),i});vt(mn,function(i,n){if(!n.option("evaluate")||n.parent()instanceof Cr)return i;for(var o=[],s=0;s<i.segments.length;s++){var l=i.segments[s];if(l instanceof He){var p=l.evaluate(n);if(p!==l&&(p+"").length<=l.size()+3){o[o.length-1].value=o[o.length-1].value+p+i.segments[++s].value;continue}if(l instanceof mn){var E=l.segments;o[o.length-1].value+=E[0].value;for(var $=1;$<E.length;$++)l=E[$],o.push(l);continue}}o.push(l)}if(i.segments=o,o.length==1)return j(wt,i,o[0]);if(o.length===3&&o[1]instanceof He&&(o[1].is_string(n)||o[1].is_number_or_bigint(n)||Xr(o[1],n)||n.option("unsafe"))){if(o[2].value==="")return j(Oe,i,{operator:"+",left:j(wt,i,{value:o[0].value}),right:o[1]});if(o[0].value==="")return j(Oe,i,{operator:"+",left:o[1],right:j(wt,i,{value:o[2].value})})}return i});vt(Cr,function(i){return i});function Lm(i,n){if(!n.option("computed_props")||!(i.key instanceof Gt))return i;if(i.key instanceof wt||i.key instanceof Tt){const o=i.key.value.toString();if(o==="__proto__"||o=="constructor"&&n.parent()instanceof Mt)return i;i instanceof Zt?(i.quote=i.key.quote,i.key=o):i instanceof ir?(i.quote=i.key.quote,i.key=j(Xo,i.key,{name:o})):(i.quote=i.key.quote,i.key=j(nn,i.key,{name:o}))}return i}vt(Ti,Lm);vt(an,function(i,n){if(Lm(i,n),n.option("arrows")&&n.parent()instanceof Wt&&!i.value.is_generator&&!i.value.uses_arguments&&!i.value.pinned()&&i.value.body.length==1&&i.value.body[0]instanceof _i&&i.value.body[0].value&&!i.value.contains_this()){var o=j(di,i.value,i.value);return o.async=i.value.async,o.is_generator=i.value.is_generator,j(Zt,i,{key:i.key instanceof nn?i.key.name:i.key,value:o,quote:i.quote})}return i});vt(Zt,function(i,n){Lm(i,n);var o=n.option("unsafe_methods");if(o&&n.option("ecma")>=2015&&(!(o instanceof RegExp)||o.test(i.key+""))){var s=i.key,l=i.value,p=l instanceof di&&Array.isArray(l.body)&&!l.contains_this();if((p||l instanceof ii)&&!l.name)return j(an,i,{key:s instanceof He?s:j(nn,i,{name:s}),value:j(Uo,l,l),quote:i.quote})}return i});vt(jt,function(i,n){if(n.option("pure_getters")==!0&&n.option("unused")&&!i.is_array&&Array.isArray(i.names)&&!p(n)&&!(i.names[i.names.length-1]instanceof Nt)){for(var o=[],s=0;s<i.names.length;s++){var l=i.names[s];l instanceof Zt&&typeof l.key=="string"&&l.value instanceof Wi&&!E(n,l.value.definition())||o.push(l)}o.length!=i.names.length&&(i.names=o)}return i;function p($){for(var R=[/^VarDef$/,/^(Const|Let|Var)$/,/^Export$/],M=0,L=0,y=R.length;M<y;L++){var N=$.parent(L);if(!N)return!1;if(!(M===0&&N.TYPE=="Destructuring")){if(!R[M].test(N.TYPE))return!1;M++}}return!0}function E($,R){return R.references.length?!0:R.global?$.toplevel.vars?$.top_retain?$.top_retain(R):!1:!0:!1}});var bA=44,sy=59,jI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",SA=new Uint8Array(64),IA=new Uint8Array(128);for(let i=0;i<jI.length;i++){const n=jI.charCodeAt(i);SA[i]=n,IA[n]=i}function Tu(i,n){let o=0,s=0,l=0;do{const E=i.next();l=IA[E],o|=(l&31)<<s,s+=5}while(l&32);const p=o&1;return o>>>=1,p&&(o=-2147483648|-o),n+o}function bu(i,n,o){let s=n-o;s=s<0?-s<<1|1:s<<1;do{let l=s&31;s>>>=5,s>0&&(l|=32),i.write(SA[l])}while(s>0);return n}function qI(i,n){return i.pos>=n?!1:i.peek()!==bA}var JI=1024*16,ZI=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(i){return Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString()}}:{decode(i){let n="";for(let o=0;o<i.length;o++)n+=String.fromCharCode(i[o]);return n}},ay=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(JI)}write(i){const{buffer:n}=this;n[this.pos++]=i,this.pos===JI&&(this.out+=ZI.decode(n),this.pos=0)}flush(){const{buffer:i,out:n,pos:o}=this;return o>0?n+ZI.decode(i.subarray(0,o)):n}},ly=class{constructor(i){this.pos=0,this.buffer=i}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(i){const{buffer:n,pos:o}=this,s=n.indexOf(i,o);return s===-1?n.length:s}};function uy(i){const{length:n}=i,o=new ly(i),s=[];let l=0,p=0,E=0,$=0,R=0;do{const M=o.indexOf(";"),L=[];let y=!0,N=0;for(l=0;o.pos<M;){let P;l=Tu(o,l),l<N&&(y=!1),N=l,qI(o,M)?(p=Tu(o,p),E=Tu(o,E),$=Tu(o,$),qI(o,M)?(R=Tu(o,R),P=[l,p,E,$,R]):P=[l,p,E,$]):P=[l],L.push(P),o.pos++}y||cy(L),s.push(L),o.pos=M+1}while(o.pos<=n);return s}function cy(i){i.sort(dy)}function dy(i,n){return i[0]-n[0]}function vA(i){const n=new ay;let o=0,s=0,l=0,p=0;for(let E=0;E<i.length;E++){const $=i[E];if(E>0&&n.write(sy),$.length===0)continue;let R=0;for(let M=0;M<$.length;M++){const L=$[M];M>0&&n.write(bA),R=bu(n,L[0],R),L.length!==1&&(o=bu(n,L[1],o),s=bu(n,L[2],s),l=bu(n,L[3],l),L.length!==4&&(p=bu(n,L[4],p)))}}return n.flush()}var qd={exports:{}},hy=qd.exports,QI;function _y(){return QI||(QI=1,(function(i,n){(function(o,s){i.exports=s()})(hy,(function(){const o=/^[\w+.-]+:\/\//,s=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,l=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;function p(C){return o.test(C)}function E(C){return C.startsWith("//")}function $(C){return C.startsWith("/")}function R(C){return C.startsWith("file:")}function M(C){return/^[.?#]/.test(C)}function L(C){const x=s.exec(C);return N(x[1],x[2]||"",x[3],x[4]||"",x[5]||"/",x[6]||"",x[7]||"")}function y(C){const x=l.exec(C),k=x[2];return N("file:","",x[1]||"","",$(k)?k:"/"+k,x[3]||"",x[4]||"")}function N(C,x,k,H,f,I,D){return{scheme:C,user:x,host:k,port:H,path:f,query:I,hash:D,type:7}}function P(C){if(E(C)){const k=L("http:"+C);return k.scheme="",k.type=6,k}if($(C)){const k=L("http://foo.com"+C);return k.scheme="",k.host="",k.type=5,k}if(R(C))return y(C);if(p(C))return L(C);const x=L("http://foo.com/"+C);return x.scheme="",x.host="",x.type=C?C.startsWith("?")?3:C.startsWith("#")?2:4:1,x}function F(C){if(C.endsWith("/.."))return C;const x=C.lastIndexOf("/");return C.slice(0,x+1)}function K(C,x){g(x,x.type),C.path==="/"?C.path=x.path:C.path=F(x.path)+C.path}function g(C,x){const k=x<=4,H=C.path.split("/");let f=1,I=0,D=!1;for(let O=1;O<H.length;O++){const X=H[O];if(!X){D=!0;continue}if(D=!1,X!=="."){if(X===".."){I?(D=!0,I--,f--):k&&(H[f++]=X);continue}H[f++]=X,I++}}let U="";for(let O=1;O<f;O++)U+="/"+H[O];(!U||D&&!U.endsWith("/.."))&&(U+="/"),C.path=U}function d(C,x){if(!C&&!x)return"";const k=P(C);let H=k.type;if(x&&H!==7){const I=P(x),D=I.type;switch(H){case 1:k.hash=I.hash;case 2:k.query=I.query;case 3:case 4:K(k,I);case 5:k.user=I.user,k.host=I.host,k.port=I.port;case 6:k.scheme=I.scheme}D>H&&(H=D)}g(k,H);const f=k.query+k.hash;switch(H){case 2:case 3:return f;case 4:{const I=k.path.slice(1);return I?M(x||C)&&!M(I)?"./"+I+f:I+f:f||"."}case 5:return k.path+f;default:return k.scheme+"//"+k.user+k.host+k.port+k.path+f}}return d}))})(qd)),qd.exports}var py=_y();const fy=xu(py);function gy(i){if(!i)return"";const n=i.lastIndexOf("/");return i.slice(0,n+1)}function my(i,n){const o=gy(i),s=n?n+"/":"";return l=>fy(s+(l||""),o)}var Yr=0,wm=1,Mm=2,xm=3,AA=4,OA=1,CA=2;function $y(i,n){const o=ev(i,0);if(o===i.length)return i;n||(i=i.slice());for(let s=o;s<i.length;s=ev(i,s+1))i[s]=Ty(i[s],n);return i}function ev(i,n){for(let o=n;o<i.length;o++)if(!Ey(i[o]))return o;return i.length}function Ey(i){for(let n=1;n<i.length;n++)if(i[n][Yr]<i[n-1][Yr])return!1;return!0}function Ty(i,n){return n||(i=i.slice()),i.sort(yA)}function yA(i,n){return i[Yr]-n[Yr]}function by(i,n){const o=n.map(()=>[]);for(let s=0;s<i.length;s++){const l=i[s];for(let p=0;p<l.length;p++){const E=l[p];if(E.length===1)continue;const $=E[wm],R=E[Mm],M=E[xm],L=o[$];(L[R]||(L[R]=[])).push([M,s,E[Yr]])}}for(let s=0;s<o.length;s++){const l=o[s];for(let p=0;p<l.length;p++){const E=l[p];E&&E.sort(yA)}}return o}var na=!1;function Sy(i,n,o,s){for(;o<=s;){const l=o+(s-o>>1),p=i[l][Yr]-n;if(p===0)return na=!0,l;p<0?o=l+1:s=l-1}return na=!1,o-1}function RA(i,n,o){for(let s=o+1;s<i.length&&i[s][Yr]===n;o=s++);return o}function NA(i,n,o){for(let s=o-1;s>=0&&i[s][Yr]===n;o=s--);return o}function DA(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function Iy(i,n,o,s){const{lastKey:l,lastNeedle:p,lastIndex:E}=o;let $=0,R=i.length-1;if(s===l){if(n===p)return na=E!==-1&&i[E][Yr]===n,E;n>=p?$=E===-1?0:E:R=E}return o.lastKey=s,o.lastNeedle=n,o.lastIndex=Sy(i,n,$,R)}function Fm(i){return typeof i=="string"?JSON.parse(i):i}var vy=function(i,n){const o=Fm(i);if(!("sections"in o))return new Gh(o,n);const s=[],l=[],p=[],E=[],$=[];kA(o,n,s,l,p,E,$,0,0,1/0,1/0);const R={version:3,file:o.file,names:E,sources:l,sourcesContent:p,mappings:s,ignoreList:$};return wy(R)};function kA(i,n,o,s,l,p,E,$,R,M,L){const{sections:y}=i;for(let N=0;N<y.length;N++){const{map:P,offset:F}=y[N];let K=M,g=L;if(N+1<y.length){const d=y[N+1].offset;K=Math.min(M,$+d.line),K===M?g=Math.min(L,R+d.column):K<M&&(g=R+d.column)}Ay(P,n,o,s,l,p,E,$+F.line,R+F.column,K,g)}}function Ay(i,n,o,s,l,p,E,$,R,M,L){const y=Fm(i);if("sections"in y)return kA(...arguments);const N=new Gh(y,n),P=s.length,F=p.length,K=Vu(N),{resolvedSources:g,sourcesContent:d,ignoreList:C}=N;if(Pg(s,g),Pg(p,N.names),d)Pg(l,d);else for(let x=0;x<g.length;x++)l.push(null);if(C)for(let x=0;x<C.length;x++)E.push(C[x]+P);for(let x=0;x<K.length;x++){const k=$+x;if(k>M)return;const H=Oy(o,k),f=x===0?R:0,I=K[x];for(let D=0;D<I.length;D++){const U=I[D],O=f+U[Yr];if(k===M&&O>=L)return;if(U.length===1){H.push([O]);continue}const X=P+U[wm],W=U[Mm],re=U[xm];H.push(U.length===4?[O,X,W,re]:[O,X,W,re,F+U[AA]])}}}function Pg(i,n){for(let o=0;o<n.length;o++)i.push(n[o])}function Oy(i,n){for(let o=i.length;o<=n;o++)i[o]=[];return i[n]}var LA="`line` must be greater than 0 (lines start at line 1)",wA="`column` must be greater than or equal to 0 (columns start at column 0)",Sh=-1,Pm=1,Gh=class{constructor(i,n){const o=typeof i=="string";if(!o&&i._decodedMemo)return i;const s=Fm(i),{version:l,file:p,names:E,sourceRoot:$,sources:R,sourcesContent:M}=s;this.version=l,this.file=p,this.names=E||[],this.sourceRoot=$,this.sources=R,this.sourcesContent=M,this.ignoreList=s.ignoreList||s.x_google_ignoreList||void 0;const L=my(n,$);this.resolvedSources=R.map(L);const{mappings:y}=s;if(typeof y=="string")this._encoded=y,this._decoded=void 0;else if(Array.isArray(y))this._encoded=void 0,this._decoded=$y(y,o);else throw s.sections?new Error("TraceMap passed sectioned source map, please use FlattenMap export instead"):new Error(`invalid source map: ${JSON.stringify(s)}`);this._decodedMemo=DA(),this._bySources=void 0,this._bySourceMemos=void 0}};function Cy(i){var n,o;return(o=(n=i)._encoded)!=null?o:n._encoded=vA(i._decoded)}function Vu(i){var n;return(n=i)._decoded||(n._decoded=uy(i._encoded))}function yy(i,n){let{line:o,column:s,bias:l}=n;if(o--,o<0)throw new Error(LA);if(s<0)throw new Error(wA);const p=Vu(i);if(o>=p.length)return Ud(null,null,null,null);const E=p[o],$=Bm(E,i._decodedMemo,o,s,l||Pm);if($===-1)return Ud(null,null,null,null);const R=E[$];if(R.length===1)return Ud(null,null,null,null);const{names:M,resolvedSources:L}=i;return Ud(L[R[wm]],R[Mm]+1,R[xm],R.length===5?M[R[AA]]:null)}function Ry(i,n){const{source:o,line:s,column:l,bias:p}=n;return MA(i,o,s,l,p||Pm,!1)}function Ny(i,n){const{source:o,line:s,column:l,bias:p}=n;return MA(i,o,s,l,p||Sh,!0)}function Dy(i,n){const o=Vu(i),{names:s,resolvedSources:l}=i;for(let p=0;p<o.length;p++){const E=o[p];for(let $=0;$<E.length;$++){const R=E[$],M=p+1,L=R[0];let y=null,N=null,P=null,F=null;R.length!==1&&(y=l[R[1]],N=R[2]+1,P=R[3]),R.length===5&&(F=s[R[4]]),n({generatedLine:M,generatedColumn:L,source:y,originalLine:N,originalColumn:P,name:F})}}}function ky(i,n){const{sources:o,resolvedSources:s}=i;let l=o.indexOf(n);return l===-1&&(l=s.indexOf(n)),l}function Ly(i,n){const{sourcesContent:o}=i;if(o==null)return null;const s=ky(i,n);return s===-1?null:o[s]}function wy(i,n){const o=new Gh(My(i,[]),n);return o._decoded=i.mappings,o}function My(i,n){return{version:i.version,file:i.file,names:i.names,sourceRoot:i.sourceRoot,sources:i.sources,sourcesContent:i.sourcesContent,mappings:n,ignoreList:i.ignoreList||i.x_google_ignoreList}}function Ud(i,n,o,s){return{source:i,line:n,column:o,name:s}}function Au(i,n){return{line:i,column:n}}function Bm(i,n,o,s,l){let p=Iy(i,s,n,o);return na?p=(l===Sh?RA:NA)(i,s,p):l===Sh&&p++,p===-1||p===i.length?-1:p}function xy(i,n,o,s,l){let p=Bm(i,n,o,s,Pm);if(!na&&l===Sh&&p++,p===-1||p===i.length)return[];const E=na?s:i[p][Yr];na||(p=NA(i,E,p));const $=RA(i,E,p),R=[];for(;p<=$;p++){const M=i[p];R.push(Au(M[OA]+1,M[CA]))}return R}function MA(i,n,o,s,l,p){var E,$;if(o--,o<0)throw new Error(LA);if(s<0)throw new Error(wA);const{sources:R,resolvedSources:M}=i;let L=R.indexOf(n);if(L===-1&&(L=M.indexOf(n)),L===-1)return p?[]:Au(null,null);const y=(E=i)._bySourceMemos||(E._bySourceMemos=R.map(DA)),P=(($=i)._bySources||($._bySources=by(Vu(i),y)))[L][o];if(P==null)return p?[]:Au(null,null);const F=y[L];if(p)return xy(P,F,o,s,l);const K=Bm(P,F,o,s,l);if(K===-1)return Au(null,null);const g=P[K];return Au(g[OA]+1,g[CA])}var Bg=class{constructor(){this._indexes={__proto__:null},this.array=[]}};function Fy(i,n){return i._indexes[n]}function Ih(i,n){const o=Fy(i,n);if(o!==void 0)return o;const{array:s,_indexes:l}=i,p=s.push(n);return l[n]=p-1}var Py=0,By=1,Uy=2,Vy=3,Hy=4,xA=-1,cm=class{constructor({file:i,sourceRoot:n}={}){this._names=new Bg,this._sources=new Bg,this._sourcesContent=[],this._mappings=[],this.file=i,this.sourceRoot=n,this._ignoreList=new Bg}};var Gy=(i,n)=>Zy(!0,i,n);function Wy(i,n,o){const{_sources:s,_sourcesContent:l}=i,p=Ih(s,n);l[p]=o}function FA(i){const{_mappings:n,_sources:o,_sourcesContent:s,_names:l,_ignoreList:p}=i;return jy(n),{version:3,file:i.file||void 0,names:l.array,sourceRoot:i.sourceRoot||void 0,sources:o.array,sourcesContent:s,mappings:n,ignoreList:p.array}}function Xy(i){const n=FA(i);return Object.assign({},n,{mappings:vA(n.mappings)})}function Ky(i){const n=new Gh(i),o=new cm({file:n.file,sourceRoot:n.sourceRoot});return Ug(o._names,n.names),Ug(o._sources,n.sources),o._sourcesContent=n.sourcesContent||n.sources.map(()=>null),o._mappings=Vu(n),n.ignoreList&&Ug(o._ignoreList,n.ignoreList),o}function tv(i,n,o,s,l,p,E,$,R){const{_mappings:M,_sources:L,_sourcesContent:y,_names:N}=n,P=zy(M,o),F=Yy(P,s);if(!l)return qy(P,F)?void 0:iv(P,F,[s]);const K=Ih(L,l),g=$?Ih(N,$):xA;if(K===y.length&&(y[K]=R??null),!Jy(P,F,K,p,E,g))return iv(P,F,$?[s,K,p,E,g]:[s,K,p,E])}function zy(i,n){for(let o=i.length;o<=n;o++)i[o]=[];return i[n]}function Yy(i,n){let o=i.length;for(let s=o-1;s>=0;o=s--){const l=i[s];if(n>=l[Py])break}return o}function iv(i,n,o){for(let s=i.length;s>n;s--)i[s]=i[s-1];i[n]=o}function jy(i){const{length:n}=i;let o=n;for(let s=o-1;s>=0&&!(i[s].length>0);o=s,s--);o<n&&(i.length=o)}function Ug(i,n){for(let o=0;o<n.length;o++)Ih(i,n[o])}function qy(i,n){return n===0?!0:i[n-1].length===1}function Jy(i,n,o,s,l,p){if(n===0)return!1;const E=i[n-1];return E.length===1?!1:o===E[By]&&s===E[Uy]&&l===E[Vy]&&p===(E.length===5?E[Hy]:xA)}function Zy(i,n,o){const{generated:s,source:l,original:p,name:E,content:$}=o;return l?tv(i,n,s.line-1,s.column,l,p.line-1,p.column,E,$):tv(i,n,s.line-1,s.column,null,null,null,null,null)}var Qy=class dm{constructor(n,o){const s=this._map=new vy(n,o);this.file=s.file,this.names=s.names,this.sourceRoot=s.sourceRoot,this.sources=s.resolvedSources,this.sourcesContent=s.sourcesContent,this.version=s.version}static fromSourceMap(n,o){return n.toDecodedMap?new dm(n.toDecodedMap(),o):new dm(n.toJSON(),o)}get mappings(){return Cy(this._map)}originalPositionFor(n){return yy(this._map,n)}generatedPositionFor(n){return Ry(this._map,n)}allGeneratedPositionsFor(n){return Ny(this._map,n)}hasContentsOfAllSources(){if(!this.sourcesContent||this.sourcesContent.length!==this.sources.length)return!1;for(const n of this.sourcesContent)if(n==null)return!1;return!0}sourceContentFor(n,o){const s=Ly(this._map,n);if(s!=null)return s;if(o)return null;throw new Error(`"${n}" is not in the SourceMap.`)}eachMapping(n,o){Dy(this._map,o?n.bind(o):n)}destroy(){}},eR=class PA{constructor(n){this._map=n instanceof cm?n:new cm(n)}static fromSourceMap(n){return new PA(Ky(n))}addMapping(n){Gy(this._map,n)}setSourceContent(n,o){Wy(this._map,n,o)}toJSON(){return Xy(this._map)}toString(){return JSON.stringify(this.toJSON())}toDecodedMap(){return FA(this._map)}};function*tR(i){i=po(i,{file:null,root:null,orig:null,files:{}});var n,o=new eR({file:i.file,sourceRoot:i.root});let s={__proto__:null},l=i.files;for(var p in l)Rn(l,p)&&(s[p]=l[p]);i.orig&&(n=yield new Qy(i.orig),n.sourcesContent&&n.sources.forEach(function(y,N){var P=n.sourcesContent[N];P&&(s[y]=P)}));function E(y,N,P,F,K,g){let d={line:N,column:P};if(n){var C=n.originalPositionFor({line:F,column:K});if(C.source===null){o.addMapping({generated:d,original:null,source:null,name:null});return}y=C.source,F=C.line,K=C.column,g=C.name||g}o.addMapping({generated:d,original:{line:F,column:K},source:y,name:g}),o.setSourceContent(y,s[y])}function $(y){return y.sourcesContent&&y.sourcesContent.every(P=>P==null)&&delete y.sourcesContent,y.file===void 0&&delete y.file,y.sourceRoot===void 0&&delete y.sourceRoot,y}function R(){return o.toDecodedMap?$(o.toDecodedMap()):null}function M(){return $(o.toJSON())}function L(){n&&n.destroy&&n.destroy()}return{add:E,getDecoded:R,getEncoded:M,destroy:L}}var iR=["$&","$'","$*","$+","$1","$2","$3","$4","$5","$6","$7","$8","$9","$_","$`","$input","-moz-animation","-moz-animation-delay","-moz-animation-direction","-moz-animation-duration","-moz-animation-fill-mode","-moz-animation-iteration-count","-moz-animation-name","-moz-animation-play-state","-moz-animation-timing-function","-moz-appearance","-moz-backface-visibility","-moz-border-end","-moz-border-end-color","-moz-border-end-style","-moz-border-end-width","-moz-border-image","-moz-border-start","-moz-border-start-color","-moz-border-start-style","-moz-border-start-width","-moz-box-align","-moz-box-direction","-moz-box-flex","-moz-box-ordinal-group","-moz-box-orient","-moz-box-pack","-moz-box-sizing","-moz-float-edge","-moz-font-feature-settings","-moz-font-language-override","-moz-force-broken-image-icon","-moz-hyphens","-moz-image-region","-moz-margin-end","-moz-margin-start","-moz-orient","-moz-osx-font-smoothing","-moz-outline-radius","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-padding-end","-moz-padding-start","-moz-perspective","-moz-perspective-origin","-moz-tab-size","-moz-text-size-adjust","-moz-transform","-moz-transform-origin","-moz-transform-style","-moz-transition","-moz-transition-delay","-moz-transition-duration","-moz-transition-property","-moz-transition-timing-function","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-user-select","-moz-window-dragging","-webkit-align-content","-webkit-align-items","-webkit-align-self","-webkit-animation","-webkit-animation-delay","-webkit-animation-direction","-webkit-animation-duration","-webkit-animation-fill-mode","-webkit-animation-iteration-count","-webkit-animation-name","-webkit-animation-play-state","-webkit-animation-timing-function","-webkit-appearance","-webkit-backface-visibility","-webkit-background-clip","-webkit-background-origin","-webkit-background-size","-webkit-border-bottom-left-radius","-webkit-border-bottom-right-radius","-webkit-border-image","-webkit-border-radius","-webkit-border-top-left-radius","-webkit-border-top-right-radius","-webkit-box-align","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-shadow","-webkit-box-sizing","-webkit-clip-path","-webkit-filter","-webkit-flex","-webkit-flex-basis","-webkit-flex-direction","-webkit-flex-flow","-webkit-flex-grow","-webkit-flex-shrink","-webkit-flex-wrap","-webkit-font-feature-settings","-webkit-justify-content","-webkit-line-clamp","-webkit-mask","-webkit-mask-clip","-webkit-mask-composite","-webkit-mask-image","-webkit-mask-origin","-webkit-mask-position","-webkit-mask-position-x","-webkit-mask-position-y","-webkit-mask-repeat","-webkit-mask-size","-webkit-order","-webkit-perspective","-webkit-perspective-origin","-webkit-text-fill-color","-webkit-text-security","-webkit-text-size-adjust","-webkit-text-stroke","-webkit-text-stroke-color","-webkit-text-stroke-width","-webkit-transform","-webkit-transform-origin","-webkit-transform-style","-webkit-transition","-webkit-transition-delay","-webkit-transition-duration","-webkit-transition-property","-webkit-transition-timing-function","-webkit-user-select","@@iterator","ABORT_ERR","ACTIVE","ACTIVE_ATTRIBUTES","ACTIVE_TEXTURE","ACTIVE_UNIFORMS","ACTIVE_UNIFORM_BLOCKS","ADDITION","ALIASED_LINE_WIDTH_RANGE","ALIASED_POINT_SIZE_RANGE","ALL","ALLOW_KEYBOARD_INPUT","ALLPASS","ALPHA","ALPHA_BITS","ALREADY_SIGNALED","ALT_MASK","ALWAYS","ANY_SAMPLES_PASSED","ANY_SAMPLES_PASSED_CONSERVATIVE","ANY_TYPE","ANY_UNORDERED_NODE_TYPE","ARRAY_BUFFER","ARRAY_BUFFER_BINDING","ATTACHED_SHADERS","ATTRIBUTE_NODE","AT_TARGET","AbortController","AbortSignal","AbsoluteOrientationSensor","AbstractRange","Accelerometer","AddSearchProvider","AggregateError","AnalyserNode","Animation","AnimationEffect","AnimationEvent","AnimationPlaybackEvent","AnimationTimeline","AnonXMLHttpRequest","Any","AnyPermissions","ApplicationCache","ApplicationCacheErrorEvent","Array","ArrayBuffer","ArrayType","AsyncDisposableStack","Atomics","Attr","Audio","AudioBuffer","AudioBufferSourceNode","AudioContext","AudioData","AudioDecoder","AudioDestinationNode","AudioEncoder","AudioListener","AudioNode","AudioParam","AudioParamMap","AudioProcessingEvent","AudioScheduledSourceNode","AudioSinkInfo","AudioStreamTrack","AudioWorklet","AudioWorkletNode","AuthenticatorAssertionResponse","AuthenticatorAttestationResponse","AuthenticatorResponse","AutocompleteErrorEvent","BACK","BAD_BOUNDARYPOINTS_ERR","BAD_REQUEST","BANDPASS","BLEND","BLEND_COLOR","BLEND_DST_ALPHA","BLEND_DST_RGB","BLEND_EQUATION","BLEND_EQUATION_ALPHA","BLEND_EQUATION_RGB","BLEND_SRC_ALPHA","BLEND_SRC_RGB","BLUE","BLUE_BITS","BLUR","BOOL","BOOLEAN_TYPE","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","BOTH","BROWSER_DEFAULT_WEBGL","BUBBLING_PHASE","BUFFER_SIZE","BUFFER_USAGE","BYTE","BYTES_PER_ELEMENT","BackgroundFetchManager","BackgroundFetchRecord","BackgroundFetchRegistration","BarProp","BarcodeDetector","BaseAudioContext","BaseHref","BatteryManager","BeforeInstallPromptEvent","BeforeLoadEvent","BeforeUnloadEvent","BigInt","BigInt64Array","BigUint64Array","BiquadFilterNode","Blob","BlobEvent","Bluetooth","BluetoothCharacteristicProperties","BluetoothDevice","BluetoothRemoteGATTCharacteristic","BluetoothRemoteGATTDescriptor","BluetoothRemoteGATTServer","BluetoothRemoteGATTService","BluetoothUUID","Boolean","BroadcastChannel","BrowserCaptureMediaStreamTrack","BrowserInfo","ByteLengthQueuingStrategy","CAPTURING_PHASE","CCW","CDATASection","CDATA_SECTION_NODE","CHANGE","CHARSET_RULE","CHECKING","CLAMP_TO_EDGE","CLICK","CLOSED","CLOSING","COLOR","COLOR_ATTACHMENT0","COLOR_ATTACHMENT1","COLOR_ATTACHMENT10","COLOR_ATTACHMENT11","COLOR_ATTACHMENT12","COLOR_ATTACHMENT13","COLOR_ATTACHMENT14","COLOR_ATTACHMENT15","COLOR_ATTACHMENT2","COLOR_ATTACHMENT3","COLOR_ATTACHMENT4","COLOR_ATTACHMENT5","COLOR_ATTACHMENT6","COLOR_ATTACHMENT7","COLOR_ATTACHMENT8","COLOR_ATTACHMENT9","COLOR_BUFFER_BIT","COLOR_CLEAR_VALUE","COLOR_WRITEMASK","COMMENT_NODE","COMPARE_REF_TO_TEXTURE","COMPILE_STATUS","COMPLETION_STATUS_KHR","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_TEXTURE_FORMATS","COMPUTE","CONDITION_SATISFIED","CONFIGURATION_UNSUPPORTED","CONNECTING","CONSTANT_ALPHA","CONSTANT_COLOR","CONSTRAINT_ERR","CONTEXT_LOST_WEBGL","CONTROL_MASK","COPY_DST","COPY_READ_BUFFER","COPY_READ_BUFFER_BINDING","COPY_SRC","COPY_WRITE_BUFFER","COPY_WRITE_BUFFER_BINDING","COUNTER_STYLE_RULE","CSPViolationReportBody","CSS","CSS2Properties","CSSAnimation","CSSCharsetRule","CSSConditionRule","CSSContainerRule","CSSCounterStyleRule","CSSFontFaceRule","CSSFontFeatureValuesRule","CSSFontPaletteValuesRule","CSSFunctionDeclarations","CSSFunctionDescriptors","CSSFunctionRule","CSSGroupingRule","CSSImageValue","CSSImportRule","CSSKeyframeRule","CSSKeyframesRule","CSSKeywordValue","CSSLayerBlockRule","CSSLayerStatementRule","CSSMarginRule","CSSMathClamp","CSSMathInvert","CSSMathMax","CSSMathMin","CSSMathNegate","CSSMathProduct","CSSMathSum","CSSMathValue","CSSMatrixComponent","CSSMediaRule","CSSMozDocumentRule","CSSNameSpaceRule","CSSNamespaceRule","CSSNestedDeclarations","CSSNumericArray","CSSNumericValue","CSSPageDescriptors","CSSPageRule","CSSPerspective","CSSPositionTryDescriptors","CSSPositionTryRule","CSSPositionValue","CSSPrimitiveValue","CSSPropertyRule","CSSRotate","CSSRule","CSSRuleList","CSSScale","CSSScopeRule","CSSSkew","CSSSkewX","CSSSkewY","CSSStartingStyleRule","CSSStyleDeclaration","CSSStyleProperties","CSSStyleRule","CSSStyleSheet","CSSStyleValue","CSSSupportsRule","CSSTransformComponent","CSSTransformValue","CSSTransition","CSSTranslate","CSSUnitValue","CSSUnknownRule","CSSUnparsedValue","CSSValue","CSSValueList","CSSVariableReferenceValue","CSSVariablesDeclaration","CSSVariablesRule","CSSViewTransitionRule","CSSViewportRule","CSS_ATTR","CSS_CM","CSS_COUNTER","CSS_CUSTOM","CSS_DEG","CSS_DIMENSION","CSS_EMS","CSS_EXS","CSS_FILTER_BLUR","CSS_FILTER_BRIGHTNESS","CSS_FILTER_CONTRAST","CSS_FILTER_CUSTOM","CSS_FILTER_DROP_SHADOW","CSS_FILTER_GRAYSCALE","CSS_FILTER_HUE_ROTATE","CSS_FILTER_INVERT","CSS_FILTER_OPACITY","CSS_FILTER_REFERENCE","CSS_FILTER_SATURATE","CSS_FILTER_SEPIA","CSS_GRAD","CSS_HZ","CSS_IDENT","CSS_IN","CSS_INHERIT","CSS_KHZ","CSS_MATRIX","CSS_MATRIX3D","CSS_MM","CSS_MS","CSS_NUMBER","CSS_PC","CSS_PERCENTAGE","CSS_PERSPECTIVE","CSS_PRIMITIVE_VALUE","CSS_PT","CSS_PX","CSS_RAD","CSS_RECT","CSS_RGBCOLOR","CSS_ROTATE","CSS_ROTATE3D","CSS_ROTATEX","CSS_ROTATEY","CSS_ROTATEZ","CSS_S","CSS_SCALE","CSS_SCALE3D","CSS_SCALEX","CSS_SCALEY","CSS_SCALEZ","CSS_SKEW","CSS_SKEWX","CSS_SKEWY","CSS_STRING","CSS_TRANSLATE","CSS_TRANSLATE3D","CSS_TRANSLATEX","CSS_TRANSLATEY","CSS_TRANSLATEZ","CSS_UNKNOWN","CSS_URI","CSS_VALUE_LIST","CSS_VH","CSS_VMAX","CSS_VMIN","CSS_VW","CULL_FACE","CULL_FACE_MODE","CURRENT_PROGRAM","CURRENT_QUERY","CURRENT_VERTEX_ATTRIB","CUSTOM","CW","Cache","CacheStorage","CanvasCaptureMediaStream","CanvasCaptureMediaStreamTrack","CanvasGradient","CanvasPattern","CanvasRenderingContext2D","CaptureController","CaretPosition","ChannelMergerNode","ChannelSplitterNode","ChapterInformation","CharacterBoundsUpdateEvent","CharacterData","ClientRect","ClientRectList","Clipboard","ClipboardEvent","ClipboardItem","CloseEvent","CloseWatcher","Collator","ColorArray","ColorValue","CommandEvent","Comment","CompileError","CompositionEvent","CompressionStream","Console","ConstantSourceNode","ContentVisibilityAutoStateChangeEvent","ContextFilter","ContextType","Controllers","ConvolverNode","CookieChangeEvent","CookieStore","CookieStoreManager","CountQueuingStrategy","Counter","CreateMonitor","CreateType","Credential","CredentialsContainer","CropTarget","Crypto","CryptoKey","CustomElementRegistry","CustomEvent","CustomStateSet","DATABASE_ERR","DATA_CLONE_ERR","DATA_ERR","DBLCLICK","DECR","DECR_WRAP","DELETE_STATUS","DEPTH","DEPTH24_STENCIL8","DEPTH32F_STENCIL8","DEPTH_ATTACHMENT","DEPTH_BITS","DEPTH_BUFFER_BIT","DEPTH_CLEAR_VALUE","DEPTH_COMPONENT","DEPTH_COMPONENT16","DEPTH_COMPONENT24","DEPTH_COMPONENT32F","DEPTH_FUNC","DEPTH_RANGE","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","DEPTH_TEST","DEPTH_WRITEMASK","DEVICE_INELIGIBLE","DIRECTION_DOWN","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DISABLED","DISPATCH_REQUEST_ERR","DITHER","DOCUMENT_FRAGMENT_NODE","DOCUMENT_NODE","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_CONTAINS","DOCUMENT_POSITION_DISCONNECTED","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC","DOCUMENT_POSITION_PRECEDING","DOCUMENT_TYPE_NODE","DOMCursor","DOMError","DOMException","DOMImplementation","DOMImplementationLS","DOMMatrix","DOMMatrixReadOnly","DOMParser","DOMPoint","DOMPointReadOnly","DOMQuad","DOMRect","DOMRectList","DOMRectReadOnly","DOMRequest","DOMSTRING_SIZE_ERR","DOMSettableTokenList","DOMStringList","DOMStringMap","DOMTokenList","DOMTransactionEvent","DOM_DELTA_LINE","DOM_DELTA_PAGE","DOM_DELTA_PIXEL","DOM_INPUT_METHOD_DROP","DOM_INPUT_METHOD_HANDWRITING","DOM_INPUT_METHOD_IME","DOM_INPUT_METHOD_KEYBOARD","DOM_INPUT_METHOD_MULTIMODAL","DOM_INPUT_METHOD_OPTION","DOM_INPUT_METHOD_PASTE","DOM_INPUT_METHOD_SCRIPT","DOM_INPUT_METHOD_UNKNOWN","DOM_INPUT_METHOD_VOICE","DOM_KEY_LOCATION_JOYSTICK","DOM_KEY_LOCATION_LEFT","DOM_KEY_LOCATION_MOBILE","DOM_KEY_LOCATION_NUMPAD","DOM_KEY_LOCATION_RIGHT","DOM_KEY_LOCATION_STANDARD","DOM_VK_0","DOM_VK_1","DOM_VK_2","DOM_VK_3","DOM_VK_4","DOM_VK_5","DOM_VK_6","DOM_VK_7","DOM_VK_8","DOM_VK_9","DOM_VK_A","DOM_VK_ACCEPT","DOM_VK_ADD","DOM_VK_ALT","DOM_VK_ALTGR","DOM_VK_AMPERSAND","DOM_VK_ASTERISK","DOM_VK_AT","DOM_VK_ATTN","DOM_VK_B","DOM_VK_BACKSPACE","DOM_VK_BACK_QUOTE","DOM_VK_BACK_SLASH","DOM_VK_BACK_SPACE","DOM_VK_C","DOM_VK_CANCEL","DOM_VK_CAPS_LOCK","DOM_VK_CIRCUMFLEX","DOM_VK_CLEAR","DOM_VK_CLOSE_BRACKET","DOM_VK_CLOSE_CURLY_BRACKET","DOM_VK_CLOSE_PAREN","DOM_VK_COLON","DOM_VK_COMMA","DOM_VK_CONTEXT_MENU","DOM_VK_CONTROL","DOM_VK_CONVERT","DOM_VK_CRSEL","DOM_VK_CTRL","DOM_VK_D","DOM_VK_DECIMAL","DOM_VK_DELETE","DOM_VK_DIVIDE","DOM_VK_DOLLAR","DOM_VK_DOUBLE_QUOTE","DOM_VK_DOWN","DOM_VK_E","DOM_VK_EISU","DOM_VK_END","DOM_VK_ENTER","DOM_VK_EQUALS","DOM_VK_EREOF","DOM_VK_ESCAPE","DOM_VK_EXCLAMATION","DOM_VK_EXECUTE","DOM_VK_EXSEL","DOM_VK_F","DOM_VK_F1","DOM_VK_F10","DOM_VK_F11","DOM_VK_F12","DOM_VK_F13","DOM_VK_F14","DOM_VK_F15","DOM_VK_F16","DOM_VK_F17","DOM_VK_F18","DOM_VK_F19","DOM_VK_F2","DOM_VK_F20","DOM_VK_F21","DOM_VK_F22","DOM_VK_F23","DOM_VK_F24","DOM_VK_F25","DOM_VK_F26","DOM_VK_F27","DOM_VK_F28","DOM_VK_F29","DOM_VK_F3","DOM_VK_F30","DOM_VK_F31","DOM_VK_F32","DOM_VK_F33","DOM_VK_F34","DOM_VK_F35","DOM_VK_F36","DOM_VK_F4","DOM_VK_F5","DOM_VK_F6","DOM_VK_F7","DOM_VK_F8","DOM_VK_F9","DOM_VK_FINAL","DOM_VK_FRONT","DOM_VK_G","DOM_VK_GREATER_THAN","DOM_VK_H","DOM_VK_HANGUL","DOM_VK_HANJA","DOM_VK_HASH","DOM_VK_HELP","DOM_VK_HK_TOGGLE","DOM_VK_HOME","DOM_VK_HYPHEN_MINUS","DOM_VK_I","DOM_VK_INSERT","DOM_VK_J","DOM_VK_JUNJA","DOM_VK_K","DOM_VK_KANA","DOM_VK_KANJI","DOM_VK_L","DOM_VK_LEFT","DOM_VK_LEFT_TAB","DOM_VK_LESS_THAN","DOM_VK_M","DOM_VK_META","DOM_VK_MODECHANGE","DOM_VK_MULTIPLY","DOM_VK_N","DOM_VK_NONCONVERT","DOM_VK_NUMPAD0","DOM_VK_NUMPAD1","DOM_VK_NUMPAD2","DOM_VK_NUMPAD3","DOM_VK_NUMPAD4","DOM_VK_NUMPAD5","DOM_VK_NUMPAD6","DOM_VK_NUMPAD7","DOM_VK_NUMPAD8","DOM_VK_NUMPAD9","DOM_VK_NUM_LOCK","DOM_VK_O","DOM_VK_OEM_1","DOM_VK_OEM_102","DOM_VK_OEM_2","DOM_VK_OEM_3","DOM_VK_OEM_4","DOM_VK_OEM_5","DOM_VK_OEM_6","DOM_VK_OEM_7","DOM_VK_OEM_8","DOM_VK_OEM_COMMA","DOM_VK_OEM_MINUS","DOM_VK_OEM_PERIOD","DOM_VK_OEM_PLUS","DOM_VK_OPEN_BRACKET","DOM_VK_OPEN_CURLY_BRACKET","DOM_VK_OPEN_PAREN","DOM_VK_P","DOM_VK_PA1","DOM_VK_PAGEDOWN","DOM_VK_PAGEUP","DOM_VK_PAGE_DOWN","DOM_VK_PAGE_UP","DOM_VK_PAUSE","DOM_VK_PERCENT","DOM_VK_PERIOD","DOM_VK_PIPE","DOM_VK_PLAY","DOM_VK_PLUS","DOM_VK_PRINT","DOM_VK_PRINTSCREEN","DOM_VK_PROCESSKEY","DOM_VK_PROPERITES","DOM_VK_Q","DOM_VK_QUESTION_MARK","DOM_VK_QUOTE","DOM_VK_R","DOM_VK_REDO","DOM_VK_RETURN","DOM_VK_RIGHT","DOM_VK_S","DOM_VK_SCROLL_LOCK","DOM_VK_SELECT","DOM_VK_SEMICOLON","DOM_VK_SEPARATOR","DOM_VK_SHIFT","DOM_VK_SLASH","DOM_VK_SLEEP","DOM_VK_SPACE","DOM_VK_SUBTRACT","DOM_VK_T","DOM_VK_TAB","DOM_VK_TILDE","DOM_VK_U","DOM_VK_UNDERSCORE","DOM_VK_UNDO","DOM_VK_UNICODE","DOM_VK_UP","DOM_VK_V","DOM_VK_VOLUME_DOWN","DOM_VK_VOLUME_MUTE","DOM_VK_VOLUME_UP","DOM_VK_W","DOM_VK_WIN","DOM_VK_WINDOW","DOM_VK_WIN_ICO_00","DOM_VK_WIN_ICO_CLEAR","DOM_VK_WIN_ICO_HELP","DOM_VK_WIN_OEM_ATTN","DOM_VK_WIN_OEM_AUTO","DOM_VK_WIN_OEM_BACKTAB","DOM_VK_WIN_OEM_CLEAR","DOM_VK_WIN_OEM_COPY","DOM_VK_WIN_OEM_CUSEL","DOM_VK_WIN_OEM_ENLW","DOM_VK_WIN_OEM_FINISH","DOM_VK_WIN_OEM_FJ_JISHO","DOM_VK_WIN_OEM_FJ_LOYA","DOM_VK_WIN_OEM_FJ_MASSHOU","DOM_VK_WIN_OEM_FJ_ROYA","DOM_VK_WIN_OEM_FJ_TOUROKU","DOM_VK_WIN_OEM_JUMP","DOM_VK_WIN_OEM_PA1","DOM_VK_WIN_OEM_PA2","DOM_VK_WIN_OEM_PA3","DOM_VK_WIN_OEM_RESET","DOM_VK_WIN_OEM_WSCTRL","DOM_VK_X","DOM_VK_XF86XK_ADD_FAVORITE","DOM_VK_XF86XK_APPLICATION_LEFT","DOM_VK_XF86XK_APPLICATION_RIGHT","DOM_VK_XF86XK_AUDIO_CYCLE_TRACK","DOM_VK_XF86XK_AUDIO_FORWARD","DOM_VK_XF86XK_AUDIO_LOWER_VOLUME","DOM_VK_XF86XK_AUDIO_MEDIA","DOM_VK_XF86XK_AUDIO_MUTE","DOM_VK_XF86XK_AUDIO_NEXT","DOM_VK_XF86XK_AUDIO_PAUSE","DOM_VK_XF86XK_AUDIO_PLAY","DOM_VK_XF86XK_AUDIO_PREV","DOM_VK_XF86XK_AUDIO_RAISE_VOLUME","DOM_VK_XF86XK_AUDIO_RANDOM_PLAY","DOM_VK_XF86XK_AUDIO_RECORD","DOM_VK_XF86XK_AUDIO_REPEAT","DOM_VK_XF86XK_AUDIO_REWIND","DOM_VK_XF86XK_AUDIO_STOP","DOM_VK_XF86XK_AWAY","DOM_VK_XF86XK_BACK","DOM_VK_XF86XK_BACK_FORWARD","DOM_VK_XF86XK_BATTERY","DOM_VK_XF86XK_BLUE","DOM_VK_XF86XK_BLUETOOTH","DOM_VK_XF86XK_BOOK","DOM_VK_XF86XK_BRIGHTNESS_ADJUST","DOM_VK_XF86XK_CALCULATOR","DOM_VK_XF86XK_CALENDAR","DOM_VK_XF86XK_CD","DOM_VK_XF86XK_CLOSE","DOM_VK_XF86XK_COMMUNITY","DOM_VK_XF86XK_CONTRAST_ADJUST","DOM_VK_XF86XK_COPY","DOM_VK_XF86XK_CUT","DOM_VK_XF86XK_CYCLE_ANGLE","DOM_VK_XF86XK_DISPLAY","DOM_VK_XF86XK_DOCUMENTS","DOM_VK_XF86XK_DOS","DOM_VK_XF86XK_EJECT","DOM_VK_XF86XK_EXCEL","DOM_VK_XF86XK_EXPLORER","DOM_VK_XF86XK_FAVORITES","DOM_VK_XF86XK_FINANCE","DOM_VK_XF86XK_FORWARD","DOM_VK_XF86XK_FRAME_BACK","DOM_VK_XF86XK_FRAME_FORWARD","DOM_VK_XF86XK_GAME","DOM_VK_XF86XK_GO","DOM_VK_XF86XK_GREEN","DOM_VK_XF86XK_HIBERNATE","DOM_VK_XF86XK_HISTORY","DOM_VK_XF86XK_HOME_PAGE","DOM_VK_XF86XK_HOT_LINKS","DOM_VK_XF86XK_I_TOUCH","DOM_VK_XF86XK_KBD_BRIGHTNESS_DOWN","DOM_VK_XF86XK_KBD_BRIGHTNESS_UP","DOM_VK_XF86XK_KBD_LIGHT_ON_OFF","DOM_VK_XF86XK_LAUNCH0","DOM_VK_XF86XK_LAUNCH1","DOM_VK_XF86XK_LAUNCH2","DOM_VK_XF86XK_LAUNCH3","DOM_VK_XF86XK_LAUNCH4","DOM_VK_XF86XK_LAUNCH5","DOM_VK_XF86XK_LAUNCH6","DOM_VK_XF86XK_LAUNCH7","DOM_VK_XF86XK_LAUNCH8","DOM_VK_XF86XK_LAUNCH9","DOM_VK_XF86XK_LAUNCH_A","DOM_VK_XF86XK_LAUNCH_B","DOM_VK_XF86XK_LAUNCH_C","DOM_VK_XF86XK_LAUNCH_D","DOM_VK_XF86XK_LAUNCH_E","DOM_VK_XF86XK_LAUNCH_F","DOM_VK_XF86XK_LIGHT_BULB","DOM_VK_XF86XK_LOG_OFF","DOM_VK_XF86XK_MAIL","DOM_VK_XF86XK_MAIL_FORWARD","DOM_VK_XF86XK_MARKET","DOM_VK_XF86XK_MEETING","DOM_VK_XF86XK_MEMO","DOM_VK_XF86XK_MENU_KB","DOM_VK_XF86XK_MENU_PB","DOM_VK_XF86XK_MESSENGER","DOM_VK_XF86XK_MON_BRIGHTNESS_DOWN","DOM_VK_XF86XK_MON_BRIGHTNESS_UP","DOM_VK_XF86XK_MUSIC","DOM_VK_XF86XK_MY_COMPUTER","DOM_VK_XF86XK_MY_SITES","DOM_VK_XF86XK_NEW","DOM_VK_XF86XK_NEWS","DOM_VK_XF86XK_OFFICE_HOME","DOM_VK_XF86XK_OPEN","DOM_VK_XF86XK_OPEN_URL","DOM_VK_XF86XK_OPTION","DOM_VK_XF86XK_PASTE","DOM_VK_XF86XK_PHONE","DOM_VK_XF86XK_PICTURES","DOM_VK_XF86XK_POWER_DOWN","DOM_VK_XF86XK_POWER_OFF","DOM_VK_XF86XK_RED","DOM_VK_XF86XK_REFRESH","DOM_VK_XF86XK_RELOAD","DOM_VK_XF86XK_REPLY","DOM_VK_XF86XK_ROCKER_DOWN","DOM_VK_XF86XK_ROCKER_ENTER","DOM_VK_XF86XK_ROCKER_UP","DOM_VK_XF86XK_ROTATE_WINDOWS","DOM_VK_XF86XK_ROTATION_KB","DOM_VK_XF86XK_ROTATION_PB","DOM_VK_XF86XK_SAVE","DOM_VK_XF86XK_SCREEN_SAVER","DOM_VK_XF86XK_SCROLL_CLICK","DOM_VK_XF86XK_SCROLL_DOWN","DOM_VK_XF86XK_SCROLL_UP","DOM_VK_XF86XK_SEARCH","DOM_VK_XF86XK_SEND","DOM_VK_XF86XK_SHOP","DOM_VK_XF86XK_SPELL","DOM_VK_XF86XK_SPLIT_SCREEN","DOM_VK_XF86XK_STANDBY","DOM_VK_XF86XK_START","DOM_VK_XF86XK_STOP","DOM_VK_XF86XK_SUBTITLE","DOM_VK_XF86XK_SUPPORT","DOM_VK_XF86XK_SUSPEND","DOM_VK_XF86XK_TASK_PANE","DOM_VK_XF86XK_TERMINAL","DOM_VK_XF86XK_TIME","DOM_VK_XF86XK_TOOLS","DOM_VK_XF86XK_TOP_MENU","DOM_VK_XF86XK_TO_DO_LIST","DOM_VK_XF86XK_TRAVEL","DOM_VK_XF86XK_USER1KB","DOM_VK_XF86XK_USER2KB","DOM_VK_XF86XK_USER_PB","DOM_VK_XF86XK_UWB","DOM_VK_XF86XK_VENDOR_HOME","DOM_VK_XF86XK_VIDEO","DOM_VK_XF86XK_VIEW","DOM_VK_XF86XK_WAKE_UP","DOM_VK_XF86XK_WEB_CAM","DOM_VK_XF86XK_WHEEL_BUTTON","DOM_VK_XF86XK_WLAN","DOM_VK_XF86XK_WORD","DOM_VK_XF86XK_WWW","DOM_VK_XF86XK_XFER","DOM_VK_XF86XK_YELLOW","DOM_VK_XF86XK_ZOOM_IN","DOM_VK_XF86XK_ZOOM_OUT","DOM_VK_Y","DOM_VK_Z","DOM_VK_ZOOM","DONE","DONT_CARE","DOWNLOADING","DRAGDROP","DRAW_BUFFER0","DRAW_BUFFER1","DRAW_BUFFER10","DRAW_BUFFER11","DRAW_BUFFER12","DRAW_BUFFER13","DRAW_BUFFER14","DRAW_BUFFER15","DRAW_BUFFER2","DRAW_BUFFER3","DRAW_BUFFER4","DRAW_BUFFER5","DRAW_BUFFER6","DRAW_BUFFER7","DRAW_BUFFER8","DRAW_BUFFER9","DRAW_FRAMEBUFFER","DRAW_FRAMEBUFFER_BINDING","DST_ALPHA","DST_COLOR","DYNAMIC_COPY","DYNAMIC_DRAW","DYNAMIC_READ","DataChannel","DataTransfer","DataTransferItem","DataTransferItemList","DataView","Date","DateTimeFormat","DecompressionStream","DelayNode","DelegatedInkTrailPresenter","DeprecationReportBody","DesktopNotification","DesktopNotificationCenter","Details","DeviceLightEvent","DeviceMotionEvent","DeviceMotionEventAcceleration","DeviceMotionEventRotationRate","DeviceOrientationEvent","DevicePosture","DeviceProximityEvent","DeviceStorage","DeviceStorageChangeEvent","DigitalCredential","Directory","DisplayNames","DisposableStack","Document","DocumentFragment","DocumentPictureInPicture","DocumentPictureInPictureEvent","DocumentTimeline","DocumentType","DragEvent","Duration","DurationFormat","DynamicsCompressorNode","E","ELEMENT_ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER_BINDING","ELEMENT_NODE","EMPTY","ENCODING_ERR","ENDED","END_TO_END","END_TO_START","ENTITY_NODE","ENTITY_REFERENCE_NODE","EPSILON","EQUAL","EQUALPOWER","ERROR","EXPONENTIAL_DISTANCE","EditContext","Element","ElementInternals","ElementQuery","EncodedAudioChunk","EncodedVideoChunk","EnterPictureInPictureEvent","Entity","EntityReference","Error","ErrorEvent","EvalError","Event","EventCounts","EventException","EventSource","EventTarget","Exception","ExtensionContext","ExtensionDisabledReason","ExtensionInfo","ExtensionInstallType","ExtensionType","External","EyeDropper","FASTEST","FIDOSDK","FILTER_ACCEPT","FILTER_INTERRUPT","FILTER_REJECT","FILTER_SKIP","FINISHED_STATE","FIRST_ORDERED_NODE_TYPE","FLOAT","FLOAT_32_UNSIGNED_INT_24_8_REV","FLOAT_MAT2","FLOAT_MAT2x3","FLOAT_MAT2x4","FLOAT_MAT3","FLOAT_MAT3x2","FLOAT_MAT3x4","FLOAT_MAT4","FLOAT_MAT4x2","FLOAT_MAT4x3","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","FOCUS","FONT_FACE_RULE","FONT_FEATURE_VALUES_RULE","FRAGMENT","FRAGMENT_SHADER","FRAGMENT_SHADER_DERIVATIVE_HINT","FRAGMENT_SHADER_DERIVATIVE_HINT_OES","FRAMEBUFFER","FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE","FRAMEBUFFER_ATTACHMENT_BLUE_SIZE","FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING","FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE","FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE","FRAMEBUFFER_ATTACHMENT_GREEN_SIZE","FRAMEBUFFER_ATTACHMENT_OBJECT_NAME","FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE","FRAMEBUFFER_ATTACHMENT_RED_SIZE","FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE","FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE","FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER","FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL","FRAMEBUFFER_BINDING","FRAMEBUFFER_COMPLETE","FRAMEBUFFER_DEFAULT","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_MULTISAMPLE","FRAMEBUFFER_UNSUPPORTED","FRONT","FRONT_AND_BACK","FRONT_FACE","FUNC_ADD","FUNC_REVERSE_SUBTRACT","FUNC_SUBTRACT","FeaturePolicy","FeaturePolicyViolationReportBody","FederatedCredential","Feed","FeedEntry","Fence","FencedFrameConfig","FetchLaterResult","File","FileError","FileList","FileReader","FileSystem","FileSystemDirectoryEntry","FileSystemDirectoryHandle","FileSystemDirectoryReader","FileSystemEntry","FileSystemFileEntry","FileSystemFileHandle","FileSystemHandle","FileSystemObserver","FileSystemWritableFileStream","FinalizationRegistry","FindInPage","Float16Array","Float32Array","Float64Array","FocusEvent","FontData","FontFace","FontFaceSet","FontFaceSetLoadEvent","FormData","FormDataEvent","FragmentDirective","Function","GENERATE_MIPMAP_HINT","GEQUAL","GPU","GPUAdapter","GPUAdapterInfo","GPUBindGroup","GPUBindGroupLayout","GPUBuffer","GPUBufferUsage","GPUCanvasContext","GPUColorWrite","GPUCommandBuffer","GPUCommandEncoder","GPUCompilationInfo","GPUCompilationMessage","GPUComputePassEncoder","GPUComputePipeline","GPUDevice","GPUDeviceLostInfo","GPUError","GPUExternalTexture","GPUInternalError","GPUMapMode","GPUOutOfMemoryError","GPUPipelineError","GPUPipelineLayout","GPUQuerySet","GPUQueue","GPURenderBundle","GPURenderBundleEncoder","GPURenderPassEncoder","GPURenderPipeline","GPUSampler","GPUShaderModule","GPUShaderStage","GPUSupportedFeatures","GPUSupportedLimits","GPUTexture","GPUTextureUsage","GPUTextureView","GPUUncapturedErrorEvent","GPUValidationError","GREATER","GREEN","GREEN_BITS","GainNode","Gamepad","GamepadAxisMoveEvent","GamepadButton","GamepadButtonEvent","GamepadEvent","GamepadHapticActuator","GamepadPose","Geolocation","GeolocationCoordinates","GeolocationPosition","GeolocationPositionError","GestureEvent","GetInfo","Global","GravitySensor","Gyroscope","HALF_FLOAT","HAVE_CURRENT_DATA","HAVE_ENOUGH_DATA","HAVE_FUTURE_DATA","HAVE_METADATA","HAVE_NOTHING","HEADERS_RECEIVED","HID","HIDConnectionEvent","HIDDEN","HIDDevice","HIDInputReportEvent","HIERARCHY_REQUEST_ERR","HIGHPASS","HIGHSHELF","HIGH_FLOAT","HIGH_INT","HORIZONTAL","HORIZONTAL_AXIS","HRTF","HTMLAllCollection","HTMLAnchorElement","HTMLAppletElement","HTMLAreaElement","HTMLAudioElement","HTMLBRElement","HTMLBaseElement","HTMLBaseFontElement","HTMLBlockquoteElement","HTMLBodyElement","HTMLButtonElement","HTMLCanvasElement","HTMLCollection","HTMLCommandElement","HTMLContentElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDetailsElement","HTMLDialogElement","HTMLDirectoryElement","HTMLDivElement","HTMLDocument","HTMLElement","HTMLEmbedElement","HTMLFencedFrameElement","HTMLFieldSetElement","HTMLFontElement","HTMLFormControlsCollection","HTMLFormElement","HTMLFrameElement","HTMLFrameSetElement","HTMLHRElement","HTMLHeadElement","HTMLHeadingElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLIsIndexElement","HTMLKeygenElement","HTMLLIElement","HTMLLabelElement","HTMLLegendElement","HTMLLinkElement","HTMLMapElement","HTMLMarqueeElement","HTMLMediaElement","HTMLMenuElement","HTMLMenuItemElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLObjectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLOptionsCollection","HTMLOutputElement","HTMLParagraphElement","HTMLParamElement","HTMLPictureElement","HTMLPreElement","HTMLProgressElement","HTMLPropertiesCollection","HTMLQuoteElement","HTMLScriptElement","HTMLSelectElement","HTMLSelectedContentElement","HTMLShadowElement","HTMLSlotElement","HTMLSourceElement","HTMLSpanElement","HTMLStyleElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTemplateElement","HTMLTextAreaElement","HTMLTimeElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement","HashChangeEvent","Headers","Highlight","HighlightRegistry","History","Hz","ICE_CHECKING","ICE_CLOSED","ICE_COMPLETED","ICE_CONNECTED","ICE_FAILED","ICE_GATHERING","ICE_WAITING","IDBCursor","IDBCursorWithValue","IDBDatabase","IDBDatabaseException","IDBFactory","IDBFileHandle","IDBFileRequest","IDBIndex","IDBKeyRange","IDBMutableFile","IDBObjectStore","IDBOpenDBRequest","IDBRecord","IDBRequest","IDBTransaction","IDBVersionChangeEvent","IDLE","IIRFilterNode","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","IMPORT_RULE","INCR","INCR_WRAP","INDEX","INDEX_SIZE_ERR","INDIRECT","INT","INTERLEAVED_ATTRIBS","INT_2_10_10_10_REV","INT_SAMPLER_2D","INT_SAMPLER_2D_ARRAY","INT_SAMPLER_3D","INT_SAMPLER_CUBE","INT_VEC2","INT_VEC3","INT_VEC4","INUSE_ATTRIBUTE_ERR","INVALID_ACCESS_ERR","INVALID_CHARACTER_ERR","INVALID_ENUM","INVALID_EXPRESSION_ERR","INVALID_FRAMEBUFFER_OPERATION","INVALID_INDEX","INVALID_MODIFICATION_ERR","INVALID_NODE_TYPE_ERR","INVALID_OPERATION","INVALID_STATE_ERR","INVALID_VALUE","INVERSE_DISTANCE","INVERT","IceCandidate","IconInfo","IdentityCredential","IdentityCredentialError","IdentityProvider","IdleDeadline","IdleDetector","Image","ImageBitmap","ImageBitmapRenderingContext","ImageCapture","ImageData","ImageDataType","ImageDecoder","ImageTrack","ImageTrackList","Infinity","Ink","InputDeviceCapabilities","InputDeviceInfo","InputEvent","InputMethodContext","InstallTrigger","InstallTriggerImpl","Instance","Instant","Int16Array","Int32Array","Int8Array","IntegrityViolationReportBody","Intent","InterestEvent","InternalError","IntersectionObserver","IntersectionObserverEntry","Intl","IsSearchProviderInstalled","Iterator","JSON","JSTag","KEEP","KEYDOWN","KEYFRAMES_RULE","KEYFRAME_RULE","KEYPRESS","KEYUP","KeyEvent","Keyboard","KeyboardEvent","KeyboardLayoutMap","KeyframeEffect","LENGTHADJUST_SPACING","LENGTHADJUST_SPACINGANDGLYPHS","LENGTHADJUST_UNKNOWN","LEQUAL","LESS","LINEAR","LINEAR_DISTANCE","LINEAR_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINES","LINE_LOOP","LINE_STRIP","LINE_WIDTH","LINK_STATUS","LIVE","LN10","LN2","LOADED","LOADING","LOG10E","LOG2E","LOWPASS","LOWSHELF","LOW_FLOAT","LOW_INT","LSException","LSParserFilter","LUMINANCE","LUMINANCE_ALPHA","LanguageCode","LanguageDetector","LargestContentfulPaint","LaunchParams","LaunchQueue","LaunchType","LayoutShift","LayoutShiftAttribution","LinearAccelerationSensor","LinkError","ListFormat","LocalMediaStream","Locale","Location","Lock","LockManager","MAP_READ","MAP_WRITE","MARGIN_RULE","MAX","MAX_3D_TEXTURE_SIZE","MAX_ARRAY_TEXTURE_LAYERS","MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND","MAX_CLIENT_WAIT_TIMEOUT_WEBGL","MAX_COLOR_ATTACHMENTS","MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_COMBINED_UNIFORM_BLOCKS","MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS","MAX_CUBE_MAP_TEXTURE_SIZE","MAX_DRAW_BUFFERS","MAX_ELEMENTS_INDICES","MAX_ELEMENTS_VERTICES","MAX_ELEMENT_INDEX","MAX_FRAGMENT_INPUT_COMPONENTS","MAX_FRAGMENT_UNIFORM_BLOCKS","MAX_FRAGMENT_UNIFORM_COMPONENTS","MAX_FRAGMENT_UNIFORM_VECTORS","MAX_PROGRAM_TEXEL_OFFSET","MAX_RENDERBUFFER_SIZE","MAX_SAFE_INTEGER","MAX_SAMPLES","MAX_SERVER_WAIT_TIMEOUT","MAX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_LOD_BIAS","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_TEXTURE_SIZE","MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS","MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS","MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS","MAX_UNIFORM_BLOCK_SIZE","MAX_UNIFORM_BUFFER_BINDINGS","MAX_VALUE","MAX_VARYING_COMPONENTS","MAX_VARYING_VECTORS","MAX_VERTEX_ATTRIBS","MAX_VERTEX_OUTPUT_COMPONENTS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_UNIFORM_BLOCKS","MAX_VERTEX_UNIFORM_COMPONENTS","MAX_VERTEX_UNIFORM_VECTORS","MAX_VIEWPORT_DIMS","MEDIA_ERR_ABORTED","MEDIA_ERR_DECODE","MEDIA_ERR_ENCRYPTED","MEDIA_ERR_NETWORK","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_KEYERR_CLIENT","MEDIA_KEYERR_DOMAIN","MEDIA_KEYERR_HARDWARECHANGE","MEDIA_KEYERR_OUTPUT","MEDIA_KEYERR_SERVICE","MEDIA_KEYERR_UNKNOWN","MEDIA_RULE","MEDIUM_FLOAT","MEDIUM_INT","META_MASK","MIDIAccess","MIDIConnectionEvent","MIDIInput","MIDIInputMap","MIDIMessageEvent","MIDIOutput","MIDIOutputMap","MIDIPort","MIN","MIN_PROGRAM_TEXEL_OFFSET","MIN_SAFE_INTEGER","MIN_VALUE","MIRRORED_REPEAT","MODE_ASYNCHRONOUS","MODE_SYNCHRONOUS","MODIFICATION","MOUSEDOWN","MOUSEDRAG","MOUSEMOVE","MOUSEOUT","MOUSEOVER","MOUSEUP","MOZ_KEYFRAMES_RULE","MOZ_KEYFRAME_RULE","MOZ_SOURCE_CURSOR","MOZ_SOURCE_ERASER","MOZ_SOURCE_KEYBOARD","MOZ_SOURCE_MOUSE","MOZ_SOURCE_PEN","MOZ_SOURCE_TOUCH","MOZ_SOURCE_UNKNOWN","MSGESTURE_FLAG_BEGIN","MSGESTURE_FLAG_CANCEL","MSGESTURE_FLAG_END","MSGESTURE_FLAG_INERTIA","MSGESTURE_FLAG_NONE","MSPOINTER_TYPE_MOUSE","MSPOINTER_TYPE_PEN","MSPOINTER_TYPE_TOUCH","MS_ASYNC_CALLBACK_STATUS_ASSIGN_DELEGATE","MS_ASYNC_CALLBACK_STATUS_CANCEL","MS_ASYNC_CALLBACK_STATUS_CHOOSEANY","MS_ASYNC_CALLBACK_STATUS_ERROR","MS_ASYNC_CALLBACK_STATUS_JOIN","MS_ASYNC_OP_STATUS_CANCELED","MS_ASYNC_OP_STATUS_ERROR","MS_ASYNC_OP_STATUS_SUCCESS","MS_MANIPULATION_STATE_ACTIVE","MS_MANIPULATION_STATE_CANCELLED","MS_MANIPULATION_STATE_COMMITTED","MS_MANIPULATION_STATE_DRAGGING","MS_MANIPULATION_STATE_INERTIA","MS_MANIPULATION_STATE_PRESELECT","MS_MANIPULATION_STATE_SELECTING","MS_MANIPULATION_STATE_STOPPED","MS_MEDIA_ERR_ENCRYPTED","MS_MEDIA_KEYERR_CLIENT","MS_MEDIA_KEYERR_DOMAIN","MS_MEDIA_KEYERR_HARDWARECHANGE","MS_MEDIA_KEYERR_OUTPUT","MS_MEDIA_KEYERR_SERVICE","MS_MEDIA_KEYERR_UNKNOWN","Map","Math","MathMLElement","MediaCapabilities","MediaCapabilitiesInfo","MediaController","MediaDeviceInfo","MediaDevices","MediaElementAudioSourceNode","MediaEncryptedEvent","MediaError","MediaKeyError","MediaKeyEvent","MediaKeyMessageEvent","MediaKeyNeededEvent","MediaKeySession","MediaKeyStatusMap","MediaKeySystemAccess","MediaKeys","MediaList","MediaMetadata","MediaQueryList","MediaQueryListEvent","MediaRecorder","MediaRecorderErrorEvent","MediaSession","MediaSettingsRange","MediaSource","MediaSourceHandle","MediaStream","MediaStreamAudioDestinationNode","MediaStreamAudioSourceNode","MediaStreamEvent","MediaStreamTrack","MediaStreamTrackAudioSourceNode","MediaStreamTrackAudioStats","MediaStreamTrackEvent","MediaStreamTrackGenerator","MediaStreamTrackProcessor","MediaStreamTrackVideoStats","Memory","MessageChannel","MessageEvent","MessagePort","MessageSender","Methods","MimeType","MimeTypeArray","Module","MouseEvent","MouseScrollEvent","MozAnimation","MozAnimationDelay","MozAnimationDirection","MozAnimationDuration","MozAnimationFillMode","MozAnimationIterationCount","MozAnimationName","MozAnimationPlayState","MozAnimationTimingFunction","MozAppearance","MozBackfaceVisibility","MozBinding","MozBorderBottomColors","MozBorderEnd","MozBorderEndColor","MozBorderEndStyle","MozBorderEndWidth","MozBorderImage","MozBorderLeftColors","MozBorderRightColors","MozBorderStart","MozBorderStartColor","MozBorderStartStyle","MozBorderStartWidth","MozBorderTopColors","MozBoxAlign","MozBoxDirection","MozBoxFlex","MozBoxOrdinalGroup","MozBoxOrient","MozBoxPack","MozBoxSizing","MozCSSKeyframeRule","MozCSSKeyframesRule","MozColumnCount","MozColumnFill","MozColumnGap","MozColumnRule","MozColumnRuleColor","MozColumnRuleStyle","MozColumnRuleWidth","MozColumnWidth","MozColumns","MozContactChangeEvent","MozFloatEdge","MozFontFeatureSettings","MozFontLanguageOverride","MozForceBrokenImageIcon","MozHyphens","MozImageRegion","MozMarginEnd","MozMarginStart","MozMmsEvent","MozMmsMessage","MozMobileMessageThread","MozOSXFontSmoothing","MozOrient","MozOsxFontSmoothing","MozOutlineRadius","MozOutlineRadiusBottomleft","MozOutlineRadiusBottomright","MozOutlineRadiusTopleft","MozOutlineRadiusTopright","MozPaddingEnd","MozPaddingStart","MozPerspective","MozPerspectiveOrigin","MozPowerManager","MozSettingsEvent","MozSmsEvent","MozSmsMessage","MozStackSizing","MozTabSize","MozTextAlignLast","MozTextDecorationColor","MozTextDecorationLine","MozTextDecorationStyle","MozTextSizeAdjust","MozTransform","MozTransformOrigin","MozTransformStyle","MozTransition","MozTransitionDelay","MozTransitionDuration","MozTransitionProperty","MozTransitionTimingFunction","MozUserFocus","MozUserInput","MozUserModify","MozUserSelect","MozWindowDragging","MozWindowShadow","MutationEvent","MutationObserver","MutationRecord","MutedInfo","MutedInfoReason","NAMESPACE_ERR","NAMESPACE_RULE","NEAREST","NEAREST_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","NEGATIVE_INFINITY","NETWORK_EMPTY","NETWORK_ERR","NETWORK_IDLE","NETWORK_LOADED","NETWORK_LOADING","NETWORK_NO_SOURCE","NEVER","NEW","NEXT","NEXT_NO_DUPLICATE","NICEST","NODE_AFTER","NODE_BEFORE","NODE_BEFORE_AND_AFTER","NODE_INSIDE","NONE","NON_TRANSIENT_ERR","NOTATION_NODE","NOTCH","NOTEQUAL","NOT_ALLOWED_ERR","NOT_FOUND_ERR","NOT_READABLE_ERR","NOT_SUPPORTED_ERR","NO_DATA_ALLOWED_ERR","NO_ERR","NO_ERROR","NO_MODIFICATION_ALLOWED_ERR","NUMBER_TYPE","NUM_COMPRESSED_TEXTURE_FORMATS","NaN","NamedNodeMap","NavigateEvent","Navigation","NavigationActivation","NavigationCurrentEntryChangeEvent","NavigationDestination","NavigationHistoryEntry","NavigationPrecommitController","NavigationPreloadManager","NavigationTransition","Navigator","NavigatorLogin","NavigatorManagedData","NavigatorUAData","NearbyLinks","NetworkInformation","Node","NodeFilter","NodeIterator","NodeList","NotRestoredReasonDetails","NotRestoredReasons","Notation","Notification","NotifyPaintEvent","Now","Number","NumberFormat","OBJECT_TYPE","OBSOLETE","OK","ONE","ONE_MINUS_CONSTANT_ALPHA","ONE_MINUS_CONSTANT_COLOR","ONE_MINUS_DST_ALPHA","ONE_MINUS_DST_COLOR","ONE_MINUS_SRC_ALPHA","ONE_MINUS_SRC_COLOR","OPEN","OPENED","OPENING","ORDERED_NODE_ITERATOR_TYPE","ORDERED_NODE_SNAPSHOT_TYPE","OTHER_ERROR","OTPCredential","OUT_OF_MEMORY","Object","Observable","OfflineAudioCompletionEvent","OfflineAudioContext","OfflineResourceList","OffscreenCanvas","OffscreenCanvasRenderingContext2D","OnClickData","OnInstalledReason","OnPerformanceWarningCategory","OnPerformanceWarningSeverity","OnRestartRequiredReason","Option","OrientationSensor","OscillatorNode","OverconstrainedError","OverflowEvent","PACK_ALIGNMENT","PACK_ROW_LENGTH","PACK_SKIP_PIXELS","PACK_SKIP_ROWS","PAGE_RULE","PARSE_ERR","PATHSEG_ARC_ABS","PATHSEG_ARC_REL","PATHSEG_CLOSEPATH","PATHSEG_CURVETO_CUBIC_ABS","PATHSEG_CURVETO_CUBIC_REL","PATHSEG_CURVETO_CUBIC_SMOOTH_ABS","PATHSEG_CURVETO_CUBIC_SMOOTH_REL","PATHSEG_CURVETO_QUADRATIC_ABS","PATHSEG_CURVETO_QUADRATIC_REL","PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS","PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL","PATHSEG_LINETO_ABS","PATHSEG_LINETO_HORIZONTAL_ABS","PATHSEG_LINETO_HORIZONTAL_REL","PATHSEG_LINETO_REL","PATHSEG_LINETO_VERTICAL_ABS","PATHSEG_LINETO_VERTICAL_REL","PATHSEG_MOVETO_ABS","PATHSEG_MOVETO_REL","PATHSEG_UNKNOWN","PATH_EXISTS_ERR","PEAKING","PERMISSION_DENIED","PERSISTENT","PI","PIXEL_PACK_BUFFER","PIXEL_PACK_BUFFER_BINDING","PIXEL_UNPACK_BUFFER","PIXEL_UNPACK_BUFFER_BINDING","PLAYING_STATE","POINTS","POLYGON_OFFSET_FACTOR","POLYGON_OFFSET_FILL","POLYGON_OFFSET_UNITS","POSITION_UNAVAILABLE","POSITIVE_INFINITY","PREV","PREV_NO_DUPLICATE","PROCESSING_INSTRUCTION_NODE","PageChangeEvent","PageRevealEvent","PageSettings","PageSwapEvent","PageTransitionEvent","PaintRequest","PaintRequestList","PannerNode","PasswordCredential","Path2D","PaymentAddress","PaymentInstruments","PaymentManager","PaymentMethodChangeEvent","PaymentRequest","PaymentRequestUpdateEvent","PaymentResponse","Performance","PerformanceElementTiming","PerformanceEntry","PerformanceEventTiming","PerformanceLongAnimationFrameTiming","PerformanceLongTaskTiming","PerformanceMark","PerformanceMeasure","PerformanceNavigation","PerformanceNavigationTiming","PerformanceObserver","PerformanceObserverEntryList","PerformancePaintTiming","PerformanceResourceTiming","PerformanceScriptTiming","PerformanceServerTiming","PerformanceTiming","PeriodicSyncManager","PeriodicWave","PermissionStatus","Permissions","PhotoCapabilities","PictureInPictureEvent","PictureInPictureWindow","PlainDate","PlainDateTime","PlainMonthDay","PlainTime","PlainYearMonth","PlatformArch","PlatformInfo","PlatformNaclArch","PlatformOs","Plugin","PluginArray","PluralRules","PointerEvent","PopStateEvent","PopupBlockedEvent","Port","Presentation","PresentationAvailability","PresentationConnection","PresentationConnectionAvailableEvent","PresentationConnectionCloseEvent","PresentationConnectionList","PresentationReceiver","PresentationRequest","PressureObserver","PressureRecord","ProcessingInstruction","Profiler","ProgressEvent","Promise","PromiseRejectionEvent","PropertyNodeList","ProtectedAudience","Proxy","PublicKeyCredential","PushManager","PushSubscription","PushSubscriptionOptions","Q","QUERY_RESOLVE","QUERY_RESULT","QUERY_RESULT_AVAILABLE","QUOTA_ERR","QUOTA_EXCEEDED_ERR","QueryInterface","QuotaExceededError","R11F_G11F_B10F","R16F","R16I","R16UI","R32F","R32I","R32UI","R8","R8I","R8UI","R8_SNORM","RASTERIZER_DISCARD","READ","READ_BUFFER","READ_FRAMEBUFFER","READ_FRAMEBUFFER_BINDING","READ_ONLY","READ_ONLY_ERR","READ_WRITE","RED","RED_BITS","RED_INTEGER","REMOVAL","RENDERBUFFER","RENDERBUFFER_ALPHA_SIZE","RENDERBUFFER_BINDING","RENDERBUFFER_BLUE_SIZE","RENDERBUFFER_DEPTH_SIZE","RENDERBUFFER_GREEN_SIZE","RENDERBUFFER_HEIGHT","RENDERBUFFER_INTERNAL_FORMAT","RENDERBUFFER_RED_SIZE","RENDERBUFFER_SAMPLES","RENDERBUFFER_STENCIL_SIZE","RENDERBUFFER_WIDTH","RENDERER","RENDERING_INTENT_ABSOLUTE_COLORIMETRIC","RENDERING_INTENT_AUTO","RENDERING_INTENT_PERCEPTUAL","RENDERING_INTENT_RELATIVE_COLORIMETRIC","RENDERING_INTENT_SATURATION","RENDERING_INTENT_UNKNOWN","RENDER_ATTACHMENT","REPEAT","REPLACE","RG","RG16F","RG16I","RG16UI","RG32F","RG32I","RG32UI","RG8","RG8I","RG8UI","RG8_SNORM","RGB","RGB10_A2","RGB10_A2UI","RGB16F","RGB16I","RGB16UI","RGB32F","RGB32I","RGB32UI","RGB565","RGB5_A1","RGB8","RGB8I","RGB8UI","RGB8_SNORM","RGB9_E5","RGBA","RGBA16F","RGBA16I","RGBA16UI","RGBA32F","RGBA32I","RGBA32UI","RGBA4","RGBA8","RGBA8I","RGBA8UI","RGBA8_SNORM","RGBA_INTEGER","RGBColor","RGB_INTEGER","RG_INTEGER","ROTATION_CLOCKWISE","ROTATION_COUNTERCLOCKWISE","RTCCertificate","RTCDTMFSender","RTCDTMFToneChangeEvent","RTCDataChannel","RTCDataChannelEvent","RTCDtlsTransport","RTCEncodedAudioFrame","RTCEncodedVideoFrame","RTCError","RTCErrorEvent","RTCIceCandidate","RTCIceTransport","RTCPeerConnection","RTCPeerConnectionIceErrorEvent","RTCPeerConnectionIceEvent","RTCRtpReceiver","RTCRtpScriptTransform","RTCRtpSender","RTCRtpTransceiver","RTCSctpTransport","RTCSessionDescription","RTCStatsReport","RTCTrackEvent","RadioNodeList","Range","RangeError","RangeException","ReadableByteStreamController","ReadableStream","ReadableStreamBYOBReader","ReadableStreamBYOBRequest","ReadableStreamDefaultController","ReadableStreamDefaultReader","RecordErrorEvent","Rect","ReferenceError","Reflect","RegExp","RelativeOrientationSensor","RelativeTimeFormat","RemotePlayback","Report","ReportBody","ReportingObserver","Request","RequestUpdateCheckStatus","ResizeObserver","ResizeObserverEntry","ResizeObserverSize","Response","RestrictionTarget","RuntimeError","SAMPLER_2D","SAMPLER_2D_ARRAY","SAMPLER_2D_ARRAY_SHADOW","SAMPLER_2D_SHADOW","SAMPLER_3D","SAMPLER_BINDING","SAMPLER_CUBE","SAMPLER_CUBE_SHADOW","SAMPLES","SAMPLE_ALPHA_TO_COVERAGE","SAMPLE_BUFFERS","SAMPLE_COVERAGE","SAMPLE_COVERAGE_INVERT","SAMPLE_COVERAGE_VALUE","SAWTOOTH","SCHEDULED_STATE","SCISSOR_BOX","SCISSOR_TEST","SCROLL_PAGE_DOWN","SCROLL_PAGE_UP","SDP_ANSWER","SDP_OFFER","SDP_PRANSWER","SECURITY_ERR","SELECT","SEPARATE_ATTRIBS","SERIALIZE_ERR","SEVERITY_ERROR","SEVERITY_FATAL_ERROR","SEVERITY_WARNING","SHADER_COMPILER","SHADER_TYPE","SHADING_LANGUAGE_VERSION","SHIFT_MASK","SHORT","SHOWING","SHOW_ALL","SHOW_ATTRIBUTE","SHOW_CDATA_SECTION","SHOW_COMMENT","SHOW_DOCUMENT","SHOW_DOCUMENT_FRAGMENT","SHOW_DOCUMENT_TYPE","SHOW_ELEMENT","SHOW_ENTITY","SHOW_ENTITY_REFERENCE","SHOW_NOTATION","SHOW_PROCESSING_INSTRUCTION","SHOW_TEXT","SIGNALED","SIGNED_NORMALIZED","SINE","SOUNDFIELD","SQLException","SQRT1_2","SQRT2","SQUARE","SRC_ALPHA","SRC_ALPHA_SATURATE","SRC_COLOR","SRGB","SRGB8","SRGB8_ALPHA8","START_TO_END","START_TO_START","STATIC_COPY","STATIC_DRAW","STATIC_READ","STENCIL","STENCIL_ATTACHMENT","STENCIL_BACK_FAIL","STENCIL_BACK_FUNC","STENCIL_BACK_PASS_DEPTH_FAIL","STENCIL_BACK_PASS_DEPTH_PASS","STENCIL_BACK_REF","STENCIL_BACK_VALUE_MASK","STENCIL_BACK_WRITEMASK","STENCIL_BITS","STENCIL_BUFFER_BIT","STENCIL_CLEAR_VALUE","STENCIL_FAIL","STENCIL_FUNC","STENCIL_INDEX","STENCIL_INDEX8","STENCIL_PASS_DEPTH_FAIL","STENCIL_PASS_DEPTH_PASS","STENCIL_REF","STENCIL_TEST","STENCIL_VALUE_MASK","STENCIL_WRITEMASK","STORAGE","STORAGE_BINDING","STREAM_COPY","STREAM_DRAW","STREAM_READ","STRING_TYPE","STYLE_RULE","SUBPIXEL_BITS","SUPPORTS_RULE","SVGAElement","SVGAltGlyphDefElement","SVGAltGlyphElement","SVGAltGlyphItemElement","SVGAngle","SVGAnimateColorElement","SVGAnimateElement","SVGAnimateMotionElement","SVGAnimateTransformElement","SVGAnimatedAngle","SVGAnimatedBoolean","SVGAnimatedEnumeration","SVGAnimatedInteger","SVGAnimatedLength","SVGAnimatedLengthList","SVGAnimatedNumber","SVGAnimatedNumberList","SVGAnimatedPreserveAspectRatio","SVGAnimatedRect","SVGAnimatedString","SVGAnimatedTransformList","SVGAnimationElement","SVGCircleElement","SVGClipPathElement","SVGColor","SVGComponentTransferFunctionElement","SVGCursorElement","SVGDefsElement","SVGDescElement","SVGDiscardElement","SVGDocument","SVGElement","SVGElementInstance","SVGElementInstanceList","SVGEllipseElement","SVGException","SVGFEBlendElement","SVGFEColorMatrixElement","SVGFEComponentTransferElement","SVGFECompositeElement","SVGFEConvolveMatrixElement","SVGFEDiffuseLightingElement","SVGFEDisplacementMapElement","SVGFEDistantLightElement","SVGFEDropShadowElement","SVGFEFloodElement","SVGFEFuncAElement","SVGFEFuncBElement","SVGFEFuncGElement","SVGFEFuncRElement","SVGFEGaussianBlurElement","SVGFEImageElement","SVGFEMergeElement","SVGFEMergeNodeElement","SVGFEMorphologyElement","SVGFEOffsetElement","SVGFEPointLightElement","SVGFESpecularLightingElement","SVGFESpotLightElement","SVGFETileElement","SVGFETurbulenceElement","SVGFilterElement","SVGFontElement","SVGFontFaceElement","SVGFontFaceFormatElement","SVGFontFaceNameElement","SVGFontFaceSrcElement","SVGFontFaceUriElement","SVGForeignObjectElement","SVGGElement","SVGGeometryElement","SVGGlyphElement","SVGGlyphRefElement","SVGGradientElement","SVGGraphicsElement","SVGHKernElement","SVGImageElement","SVGLength","SVGLengthList","SVGLineElement","SVGLinearGradientElement","SVGMPathElement","SVGMarkerElement","SVGMaskElement","SVGMatrix","SVGMetadataElement","SVGMissingGlyphElement","SVGNumber","SVGNumberList","SVGPaint","SVGPathElement","SVGPathSeg","SVGPathSegArcAbs","SVGPathSegArcRel","SVGPathSegClosePath","SVGPathSegCurvetoCubicAbs","SVGPathSegCurvetoCubicRel","SVGPathSegCurvetoCubicSmoothAbs","SVGPathSegCurvetoCubicSmoothRel","SVGPathSegCurvetoQuadraticAbs","SVGPathSegCurvetoQuadraticRel","SVGPathSegCurvetoQuadraticSmoothAbs","SVGPathSegCurvetoQuadraticSmoothRel","SVGPathSegLinetoAbs","SVGPathSegLinetoHorizontalAbs","SVGPathSegLinetoHorizontalRel","SVGPathSegLinetoRel","SVGPathSegLinetoVerticalAbs","SVGPathSegLinetoVerticalRel","SVGPathSegList","SVGPathSegMovetoAbs","SVGPathSegMovetoRel","SVGPatternElement","SVGPoint","SVGPointList","SVGPolygonElement","SVGPolylineElement","SVGPreserveAspectRatio","SVGRadialGradientElement","SVGRect","SVGRectElement","SVGRenderingIntent","SVGSVGElement","SVGScriptElement","SVGSetElement","SVGStopElement","SVGStringList","SVGStyleElement","SVGSwitchElement","SVGSymbolElement","SVGTRefElement","SVGTSpanElement","SVGTextContentElement","SVGTextElement","SVGTextPathElement","SVGTextPositioningElement","SVGTitleElement","SVGTransform","SVGTransformList","SVGUnitTypes","SVGUseElement","SVGVKernElement","SVGViewElement","SVGViewSpec","SVGZoomAndPan","SVGZoomEvent","SVG_ANGLETYPE_DEG","SVG_ANGLETYPE_GRAD","SVG_ANGLETYPE_RAD","SVG_ANGLETYPE_UNKNOWN","SVG_ANGLETYPE_UNSPECIFIED","SVG_CHANNEL_A","SVG_CHANNEL_B","SVG_CHANNEL_G","SVG_CHANNEL_R","SVG_CHANNEL_UNKNOWN","SVG_COLORTYPE_CURRENTCOLOR","SVG_COLORTYPE_RGBCOLOR","SVG_COLORTYPE_RGBCOLOR_ICCCOLOR","SVG_COLORTYPE_UNKNOWN","SVG_EDGEMODE_DUPLICATE","SVG_EDGEMODE_NONE","SVG_EDGEMODE_UNKNOWN","SVG_EDGEMODE_WRAP","SVG_FEBLEND_MODE_COLOR","SVG_FEBLEND_MODE_COLOR_BURN","SVG_FEBLEND_MODE_COLOR_DODGE","SVG_FEBLEND_MODE_DARKEN","SVG_FEBLEND_MODE_DIFFERENCE","SVG_FEBLEND_MODE_EXCLUSION","SVG_FEBLEND_MODE_HARD_LIGHT","SVG_FEBLEND_MODE_HUE","SVG_FEBLEND_MODE_LIGHTEN","SVG_FEBLEND_MODE_LUMINOSITY","SVG_FEBLEND_MODE_MULTIPLY","SVG_FEBLEND_MODE_NORMAL","SVG_FEBLEND_MODE_OVERLAY","SVG_FEBLEND_MODE_SATURATION","SVG_FEBLEND_MODE_SCREEN","SVG_FEBLEND_MODE_SOFT_LIGHT","SVG_FEBLEND_MODE_UNKNOWN","SVG_FECOLORMATRIX_TYPE_HUEROTATE","SVG_FECOLORMATRIX_TYPE_LUMINANCETOALPHA","SVG_FECOLORMATRIX_TYPE_MATRIX","SVG_FECOLORMATRIX_TYPE_SATURATE","SVG_FECOLORMATRIX_TYPE_UNKNOWN","SVG_FECOMPONENTTRANSFER_TYPE_DISCRETE","SVG_FECOMPONENTTRANSFER_TYPE_GAMMA","SVG_FECOMPONENTTRANSFER_TYPE_IDENTITY","SVG_FECOMPONENTTRANSFER_TYPE_LINEAR","SVG_FECOMPONENTTRANSFER_TYPE_TABLE","SVG_FECOMPONENTTRANSFER_TYPE_UNKNOWN","SVG_FECOMPOSITE_OPERATOR_ARITHMETIC","SVG_FECOMPOSITE_OPERATOR_ATOP","SVG_FECOMPOSITE_OPERATOR_IN","SVG_FECOMPOSITE_OPERATOR_LIGHTER","SVG_FECOMPOSITE_OPERATOR_OUT","SVG_FECOMPOSITE_OPERATOR_OVER","SVG_FECOMPOSITE_OPERATOR_UNKNOWN","SVG_FECOMPOSITE_OPERATOR_XOR","SVG_INVALID_VALUE_ERR","SVG_LENGTHTYPE_CM","SVG_LENGTHTYPE_EMS","SVG_LENGTHTYPE_EXS","SVG_LENGTHTYPE_IN","SVG_LENGTHTYPE_MM","SVG_LENGTHTYPE_NUMBER","SVG_LENGTHTYPE_PC","SVG_LENGTHTYPE_PERCENTAGE","SVG_LENGTHTYPE_PT","SVG_LENGTHTYPE_PX","SVG_LENGTHTYPE_UNKNOWN","SVG_MARKERUNITS_STROKEWIDTH","SVG_MARKERUNITS_UNKNOWN","SVG_MARKERUNITS_USERSPACEONUSE","SVG_MARKER_ORIENT_ANGLE","SVG_MARKER_ORIENT_AUTO","SVG_MARKER_ORIENT_AUTO_START_REVERSE","SVG_MARKER_ORIENT_UNKNOWN","SVG_MASKTYPE_ALPHA","SVG_MASKTYPE_LUMINANCE","SVG_MATRIX_NOT_INVERTABLE","SVG_MEETORSLICE_MEET","SVG_MEETORSLICE_SLICE","SVG_MEETORSLICE_UNKNOWN","SVG_MORPHOLOGY_OPERATOR_DILATE","SVG_MORPHOLOGY_OPERATOR_ERODE","SVG_MORPHOLOGY_OPERATOR_UNKNOWN","SVG_PAINTTYPE_CURRENTCOLOR","SVG_PAINTTYPE_NONE","SVG_PAINTTYPE_RGBCOLOR","SVG_PAINTTYPE_RGBCOLOR_ICCCOLOR","SVG_PAINTTYPE_UNKNOWN","SVG_PAINTTYPE_URI","SVG_PAINTTYPE_URI_CURRENTCOLOR","SVG_PAINTTYPE_URI_NONE","SVG_PAINTTYPE_URI_RGBCOLOR","SVG_PAINTTYPE_URI_RGBCOLOR_ICCCOLOR","SVG_PRESERVEASPECTRATIO_NONE","SVG_PRESERVEASPECTRATIO_UNKNOWN","SVG_PRESERVEASPECTRATIO_XMAXYMAX","SVG_PRESERVEASPECTRATIO_XMAXYMID","SVG_PRESERVEASPECTRATIO_XMAXYMIN","SVG_PRESERVEASPECTRATIO_XMIDYMAX","SVG_PRESERVEASPECTRATIO_XMIDYMID","SVG_PRESERVEASPECTRATIO_XMIDYMIN","SVG_PRESERVEASPECTRATIO_XMINYMAX","SVG_PRESERVEASPECTRATIO_XMINYMID","SVG_PRESERVEASPECTRATIO_XMINYMIN","SVG_SPREADMETHOD_PAD","SVG_SPREADMETHOD_REFLECT","SVG_SPREADMETHOD_REPEAT","SVG_SPREADMETHOD_UNKNOWN","SVG_STITCHTYPE_NOSTITCH","SVG_STITCHTYPE_STITCH","SVG_STITCHTYPE_UNKNOWN","SVG_TRANSFORM_MATRIX","SVG_TRANSFORM_ROTATE","SVG_TRANSFORM_SCALE","SVG_TRANSFORM_SKEWX","SVG_TRANSFORM_SKEWY","SVG_TRANSFORM_TRANSLATE","SVG_TRANSFORM_UNKNOWN","SVG_TURBULENCE_TYPE_FRACTALNOISE","SVG_TURBULENCE_TYPE_TURBULENCE","SVG_TURBULENCE_TYPE_UNKNOWN","SVG_UNIT_TYPE_OBJECTBOUNDINGBOX","SVG_UNIT_TYPE_UNKNOWN","SVG_UNIT_TYPE_USERSPACEONUSE","SVG_WRONG_TYPE_ERR","SVG_ZOOMANDPAN_DISABLE","SVG_ZOOMANDPAN_MAGNIFY","SVG_ZOOMANDPAN_UNKNOWN","SYNC_CONDITION","SYNC_FENCE","SYNC_FLAGS","SYNC_FLUSH_COMMANDS_BIT","SYNC_GPU_COMMANDS_COMPLETE","SYNC_STATUS","SYNTAX_ERR","SavedPages","Scheduler","Scheduling","Screen","ScreenDetailed","ScreenDetails","ScreenOrientation","Script","ScriptProcessorNode","ScrollAreaEvent","ScrollTimeline","SecurityPolicyViolationEvent","Segmenter","Selection","Sensor","SensorErrorEvent","Serial","SerialPort","ServiceWorker","ServiceWorkerContainer","ServiceWorkerRegistration","SessionDescription","Set","ShadowRoot","SharedArrayBuffer","SharedStorage","SharedStorageAppendMethod","SharedStorageClearMethod","SharedStorageDeleteMethod","SharedStorageModifierMethod","SharedStorageSetMethod","SharedStorageWorklet","SharedWorker","SharingState","SimpleGestureEvent","SnapEvent","SourceBuffer","SourceBufferList","SpeechGrammar","SpeechGrammarList","SpeechRecognition","SpeechRecognitionErrorEvent","SpeechRecognitionEvent","SpeechRecognitionPhrase","SpeechSynthesis","SpeechSynthesisErrorEvent","SpeechSynthesisEvent","SpeechSynthesisUtterance","SpeechSynthesisVoice","StaticRange","StereoPannerNode","StopIteration","Storage","StorageBucket","StorageBucketManager","StorageEvent","StorageManager","String","StructType","StylePropertyMap","StylePropertyMapReadOnly","StyleSheet","StyleSheetList","SubmitEvent","Subscriber","SubtleCrypto","Summarizer","SuppressedError","SuspendError","Suspending","Symbol","SyncManager","SyntaxError","TAB_ID_NONE","TAB_INDEX_NONE","TEMPORARY","TEXTPATH_METHODTYPE_ALIGN","TEXTPATH_METHODTYPE_STRETCH","TEXTPATH_METHODTYPE_UNKNOWN","TEXTPATH_SPACINGTYPE_AUTO","TEXTPATH_SPACINGTYPE_EXACT","TEXTPATH_SPACINGTYPE_UNKNOWN","TEXTURE","TEXTURE0","TEXTURE1","TEXTURE10","TEXTURE11","TEXTURE12","TEXTURE13","TEXTURE14","TEXTURE15","TEXTURE16","TEXTURE17","TEXTURE18","TEXTURE19","TEXTURE2","TEXTURE20","TEXTURE21","TEXTURE22","TEXTURE23","TEXTURE24","TEXTURE25","TEXTURE26","TEXTURE27","TEXTURE28","TEXTURE29","TEXTURE3","TEXTURE30","TEXTURE31","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","TEXTURE9","TEXTURE_2D","TEXTURE_2D_ARRAY","TEXTURE_3D","TEXTURE_BASE_LEVEL","TEXTURE_BINDING","TEXTURE_BINDING_2D","TEXTURE_BINDING_2D_ARRAY","TEXTURE_BINDING_3D","TEXTURE_BINDING_CUBE_MAP","TEXTURE_COMPARE_FUNC","TEXTURE_COMPARE_MODE","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Z","TEXTURE_CUBE_MAP_POSITIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_IMMUTABLE_FORMAT","TEXTURE_IMMUTABLE_LEVELS","TEXTURE_MAG_FILTER","TEXTURE_MAX_ANISOTROPY_EXT","TEXTURE_MAX_LEVEL","TEXTURE_MAX_LOD","TEXTURE_MIN_FILTER","TEXTURE_MIN_LOD","TEXTURE_WRAP_R","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXT_NODE","TIMEOUT","TIMEOUT_ERR","TIMEOUT_EXPIRED","TIMEOUT_IGNORED","TOO_LARGE_ERR","TRANSACTION_INACTIVE_ERR","TRANSFORM_FEEDBACK","TRANSFORM_FEEDBACK_ACTIVE","TRANSFORM_FEEDBACK_BINDING","TRANSFORM_FEEDBACK_BUFFER","TRANSFORM_FEEDBACK_BUFFER_BINDING","TRANSFORM_FEEDBACK_BUFFER_MODE","TRANSFORM_FEEDBACK_BUFFER_SIZE","TRANSFORM_FEEDBACK_BUFFER_START","TRANSFORM_FEEDBACK_PAUSED","TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","TRANSFORM_FEEDBACK_VARYINGS","TRIANGLE","TRIANGLES","TRIANGLE_FAN","TRIANGLE_STRIP","TYPE_BACK_FORWARD","TYPE_ERR","TYPE_MISMATCH_ERR","TYPE_NAVIGATE","TYPE_RELOAD","TYPE_RESERVED","Tab","TabStatus","Table","Tag","TaskAttributionTiming","TaskController","TaskPriorityChangeEvent","TaskSignal","Temporal","Text","TextDecoder","TextDecoderStream","TextEncoder","TextEncoderStream","TextEvent","TextFormat","TextFormatUpdateEvent","TextMetrics","TextTrack","TextTrackCue","TextTrackCueList","TextTrackList","TextUpdateEvent","TimeEvent","TimeRanges","ToggleEvent","Touch","TouchEvent","TouchList","TrackEvent","TransformStream","TransformStreamDefaultController","TransitionEvent","Translator","TreeWalker","TrustedHTML","TrustedScript","TrustedScriptURL","TrustedTypePolicy","TrustedTypePolicyFactory","TypeError","TypedObject","U2F","UIEvent","UNCACHED","UNIFORM","UNIFORM_ARRAY_STRIDE","UNIFORM_BLOCK_ACTIVE_UNIFORMS","UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES","UNIFORM_BLOCK_BINDING","UNIFORM_BLOCK_DATA_SIZE","UNIFORM_BLOCK_INDEX","UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER","UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER","UNIFORM_BUFFER","UNIFORM_BUFFER_BINDING","UNIFORM_BUFFER_OFFSET_ALIGNMENT","UNIFORM_BUFFER_SIZE","UNIFORM_BUFFER_START","UNIFORM_IS_ROW_MAJOR","UNIFORM_MATRIX_STRIDE","UNIFORM_OFFSET","UNIFORM_SIZE","UNIFORM_TYPE","UNKNOWN_ERR","UNKNOWN_RULE","UNMASKED_RENDERER_WEBGL","UNMASKED_VENDOR_WEBGL","UNORDERED_NODE_ITERATOR_TYPE","UNORDERED_NODE_SNAPSHOT_TYPE","UNPACK_ALIGNMENT","UNPACK_COLORSPACE_CONVERSION_WEBGL","UNPACK_FLIP_Y_WEBGL","UNPACK_IMAGE_HEIGHT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ROW_LENGTH","UNPACK_SKIP_IMAGES","UNPACK_SKIP_PIXELS","UNPACK_SKIP_ROWS","UNSCHEDULED_STATE","UNSENT","UNSIGNALED","UNSIGNED_BYTE","UNSIGNED_INT","UNSIGNED_INT_10F_11F_11F_REV","UNSIGNED_INT_24_8","UNSIGNED_INT_2_10_10_10_REV","UNSIGNED_INT_5_9_9_9_REV","UNSIGNED_INT_SAMPLER_2D","UNSIGNED_INT_SAMPLER_2D_ARRAY","UNSIGNED_INT_SAMPLER_3D","UNSIGNED_INT_SAMPLER_CUBE","UNSIGNED_INT_VEC2","UNSIGNED_INT_VEC3","UNSIGNED_INT_VEC4","UNSIGNED_NORMALIZED","UNSIGNED_SHORT","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","UNSPECIFIED_EVENT_TYPE_ERR","UPDATEREADY","URIError","URL","URLPattern","URLSearchParams","URLUnencoded","URL_MISMATCH_ERR","USB","USBAlternateInterface","USBConfiguration","USBConnectionEvent","USBDevice","USBEndpoint","USBInTransferResult","USBInterface","USBIsochronousInTransferPacket","USBIsochronousInTransferResult","USBIsochronousOutTransferPacket","USBIsochronousOutTransferResult","USBOutTransferResult","UTC","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","UpdateFilter","UpdatePropertyName","UserActivation","UserMessageHandler","UserMessageHandlersNamespace","UserProximityEvent","VALIDATE_STATUS","VALIDATION_ERR","VARIABLES_RULE","VENDOR","VERSION","VERSION_CHANGE","VERSION_ERR","VERTEX","VERTEX_ARRAY_BINDING","VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","VERTEX_ATTRIB_ARRAY_DIVISOR","VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE","VERTEX_ATTRIB_ARRAY_ENABLED","VERTEX_ATTRIB_ARRAY_INTEGER","VERTEX_ATTRIB_ARRAY_NORMALIZED","VERTEX_ATTRIB_ARRAY_POINTER","VERTEX_ATTRIB_ARRAY_SIZE","VERTEX_ATTRIB_ARRAY_STRIDE","VERTEX_ATTRIB_ARRAY_TYPE","VERTEX_SHADER","VERTICAL","VERTICAL_AXIS","VER_ERR","VIEWPORT","VIEWPORT_RULE","VRDisplay","VRDisplayCapabilities","VRDisplayEvent","VREyeParameters","VRFieldOfView","VRFrameData","VRPose","VRStageParameters","VTTCue","VTTRegion","ValidityState","VideoColorSpace","VideoDecoder","VideoEncoder","VideoFrame","VideoPlaybackQuality","VideoStreamTrack","ViewTimeline","ViewTransition","ViewTransitionTypeSet","ViewType","Viewport","VirtualKeyboard","VirtualKeyboardGeometryChangeEvent","VisibilityStateEntry","VisualViewport","WAIT_FAILED","WEBKIT_FILTER_RULE","WEBKIT_KEYFRAMES_RULE","WEBKIT_KEYFRAME_RULE","WEBKIT_REGION_RULE","WGSLLanguageFeatures","WINDOW_ID_CURRENT","WINDOW_ID_NONE","WRITE","WRONG_DOCUMENT_ERR","WakeLock","WakeLockSentinel","WasmAnyRef","WaveShaperNode","WeakMap","WeakRef","WeakSet","WebAssembly","WebGL2RenderingContext","WebGLActiveInfo","WebGLBuffer","WebGLContextEvent","WebGLFramebuffer","WebGLObject","WebGLProgram","WebGLQuery","WebGLRenderbuffer","WebGLRenderingContext","WebGLSampler","WebGLShader","WebGLShaderPrecisionFormat","WebGLSync","WebGLTexture","WebGLTransformFeedback","WebGLUniformLocation","WebGLVertexArray","WebGLVertexArrayObject","WebKitAnimationEvent","WebKitBlobBuilder","WebKitCSSFilterRule","WebKitCSSFilterValue","WebKitCSSKeyframeRule","WebKitCSSKeyframesRule","WebKitCSSMatrix","WebKitCSSRegionRule","WebKitCSSTransformValue","WebKitDataCue","WebKitGamepad","WebKitMediaKeyError","WebKitMediaKeyMessageEvent","WebKitMediaKeySession","WebKitMediaKeys","WebKitMediaSource","WebKitMutationObserver","WebKitNamespace","WebKitPlaybackTargetAvailabilityEvent","WebKitPoint","WebKitShadowRoot","WebKitSourceBuffer","WebKitSourceBufferList","WebKitTransitionEvent","WebSocket","WebSocketError","WebSocketStream","WebTransport","WebTransportBidirectionalStream","WebTransportDatagramDuplexStream","WebTransportError","WebTransportReceiveStream","WebTransportSendStream","WebkitAlignContent","WebkitAlignItems","WebkitAlignSelf","WebkitAnimation","WebkitAnimationDelay","WebkitAnimationDirection","WebkitAnimationDuration","WebkitAnimationFillMode","WebkitAnimationIterationCount","WebkitAnimationName","WebkitAnimationPlayState","WebkitAnimationTimingFunction","WebkitAppearance","WebkitBackfaceVisibility","WebkitBackgroundClip","WebkitBackgroundOrigin","WebkitBackgroundSize","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius","WebkitBorderImage","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBoxAlign","WebkitBoxDirection","WebkitBoxFlex","WebkitBoxOrdinalGroup","WebkitBoxOrient","WebkitBoxPack","WebkitBoxShadow","WebkitBoxSizing","WebkitClipPath","WebkitFilter","WebkitFlex","WebkitFlexBasis","WebkitFlexDirection","WebkitFlexFlow","WebkitFlexGrow","WebkitFlexShrink","WebkitFlexWrap","WebkitFontFeatureSettings","WebkitJustifyContent","WebkitLineClamp","WebkitMask","WebkitMaskClip","WebkitMaskComposite","WebkitMaskImage","WebkitMaskOrigin","WebkitMaskPosition","WebkitMaskPositionX","WebkitMaskPositionY","WebkitMaskRepeat","WebkitMaskSize","WebkitOrder","WebkitPerspective","WebkitPerspectiveOrigin","WebkitTextFillColor","WebkitTextSecurity","WebkitTextSizeAdjust","WebkitTextStroke","WebkitTextStrokeColor","WebkitTextStrokeWidth","WebkitTransform","WebkitTransformOrigin","WebkitTransformStyle","WebkitTransition","WebkitTransitionDelay","WebkitTransitionDuration","WebkitTransitionProperty","WebkitTransitionTimingFunction","WebkitUserSelect","WheelEvent","Window","WindowControlsOverlay","WindowControlsOverlayGeometryChangeEvent","WindowState","WindowType","Worker","Worklet","WritableStream","WritableStreamDefaultController","WritableStreamDefaultWriter","XMLDocument","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestException","XMLHttpRequestProgressEvent","XMLHttpRequestUpload","XMLSerializer","XMLStylesheetProcessingInstruction","XPathEvaluator","XPathException","XPathExpression","XPathNSResolver","XPathResult","XRAnchor","XRAnchorSet","XRBoundedReferenceSpace","XRCPUDepthInformation","XRCamera","XRDOMOverlayState","XRDepthInformation","XRFrame","XRHand","XRHitTestResult","XRHitTestSource","XRInputSource","XRInputSourceArray","XRInputSourceEvent","XRInputSourcesChangeEvent","XRJointPose","XRJointSpace","XRLayer","XRLightEstimate","XRLightProbe","XRPose","XRRay","XRReferenceSpace","XRReferenceSpaceEvent","XRRenderState","XRRigidTransform","XRSession","XRSessionEvent","XRSpace","XRSystem","XRTransientInputHitTestResult","XRTransientInputHitTestSource","XRView","XRViewerPose","XRViewport","XRWebGLBinding","XRWebGLDepthInformation","XRWebGLLayer","XSLTProcessor","ZERO","ZonedDateTime","ZoomSettings","ZoomSettingsMode","ZoomSettingsScope","_XD0M_","_YD0M_","__REACT_DEVTOOLS_GLOBAL_HOOK__","__brand","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","__opera","__proto__","_browserjsran","a","aLink","abbr","abort","aborted","aboutConfigPrefs","abs","absolute","acceleration","accelerationIncludingGravity","accelerator","accent-color","accentColor","accept","acceptCharset","acceptNode","access","accessKey","accessKeyLabel","accuracy","acos","acosh","action","actionURL","actions","activated","activation","activationStart","active","activeCues","activeElement","activeSourceBuffers","activeSourceCount","activeTexture","activeVRDisplays","activeViewTransition","activityLog","actualBoundingBoxAscent","actualBoundingBoxDescent","actualBoundingBoxLeft","actualBoundingBoxRight","adAuctionComponents","adAuctionHeaders","adapterInfo","add","addAll","addBehavior","addCandidate","addColorStop","addCue","addElement","addEventListener","addFilter","addFromString","addFromUri","addIceCandidate","addImport","addListener","addModule","addNamed","addPageRule","addPath","addPointer","addRange","addRegion","addRule","addSearchEngine","addSourceBuffer","addStream","addTeardown","addTextTrack","addTrack","addTransceiver","addWakeLockListener","added","addedNodes","additionalName","additiveSymbols","addons","address","addressLine","addressModeU","addressModeV","addressModeW","adopt","adoptNode","adoptedCallback","adoptedStyleSheets","adr","advance","after","alarms","album","alert","algorithm","align","align-content","align-items","align-self","alignContent","alignItems","alignSelf","alignmentBaseline","alinkColor","all","allSettled","allocationSize","allow","allowFullscreen","allowPaymentRequest","allowedDirections","allowedFeatures","allowedToPlay","allowsFeature","alpha","alphaMode","alphaToCoverageEnabled","alphabeticBaseline","alt","altGraphKey","altHtml","altKey","altLeft","alternate","alternateSetting","alternates","altitude","altitudeAccuracy","altitudeAngle","amplitude","ancestorOrigins","anchor","anchorName","anchorNode","anchorOffset","anchorScope","anchorSpace","anchors","and","angle","angularAcceleration","angularVelocity","animVal","animate","animated","animatedInstanceRoot","animatedNormalizedPathSegList","animatedPathSegList","animatedPoints","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","animationComposition","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationStartTime","animationTimingFunction","animationsPaused","anniversary","annotation","antialias","anticipatedRemoval","any","app","appCodeName","appMinorVersion","appName","appNotifications","appVersion","appearance","append","appendBuffer","appendChild","appendData","appendItem","appendMedium","appendNamed","appendRule","appendStream","appendWindowEnd","appendWindowStart","applets","applicationCache","applicationServerKey","apply","applyConstraints","applyElement","arc","arcTo","arch","architecture","archive","areas","arguments","ariaActiveDescendantElement","ariaAtomic","ariaAutoComplete","ariaBrailleLabel","ariaBrailleRoleDescription","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColIndexText","ariaColSpan","ariaControlsElements","ariaCurrent","ariaDescribedByElements","ariaDescription","ariaDetailsElements","ariaDisabled","ariaErrorMessageElements","ariaExpanded","ariaFlowToElements","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLabelledByElements","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaNotify","ariaOrientation","ariaOwnsElements","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRelevant","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowIndexText","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText","arrayBuffer","arrayLayerCount","arrayStride","artist","artwork","as","asIntN","asUintN","ascentOverride","asin","asinh","aspect","aspect-ratio","aspectRatio","assert","assign","assignedElements","assignedNodes","assignedSlot","async","asyncDispose","asyncIterator","at","atEnd","atan","atan2","atanh","atob","attachEvent","attachInternals","attachShader","attachShadow","attachedElements","attachments","attack","attestationObject","attrChange","attrName","attributeChangedCallback","attributeFilter","attributeName","attributeNamespace","attributeOldValue","attributeStyleMap","attributes","attribution","attributionSrc","audioBitrateMode","audioBitsPerSecond","audioTracks","audioWorklet","authenticatedSignedWrites","authenticatorAttachment","authenticatorData","autoIncrement","autobuffer","autocapitalize","autocomplete","autocorrect","autofocus","automationRate","autoplay","availHeight","availLeft","availTop","availWidth","availability","available","averageLatency","aversion","ax","axes","axis","ay","azimuth","azimuthAngle","b","back","backdrop-filter","backdropFilter","backends","backface-visibility","backfaceVisibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","backgroundAttachment","backgroundBlendMode","backgroundClip","backgroundColor","backgroundFetch","backgroundImage","backgroundOrigin","backgroundPosition","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize","badInput","badge","balance","baseArrayLayer","baseFrequencyX","baseFrequencyY","baseLatency","baseLayer","baseMipLevel","baseNode","baseOffset","basePalette","baseURI","baseVal","baseline-source","baselineShift","baselineSource","batchUpdate","battery","bday","before","beginComputePass","beginElement","beginElementAt","beginOcclusionQuery","beginPath","beginQuery","beginRenderPass","beginTransformFeedback","beginningOfPassWriteIndex","behavior","behaviorCookie","behaviorPart","behaviorUrns","beta","bezierCurveTo","bgColor","bgProperties","bias","big","bigint64","biguint64","binaryType","bind","bindAttribLocation","bindBuffer","bindBufferBase","bindBufferRange","bindFramebuffer","bindGroupLayouts","bindRenderbuffer","bindSampler","bindTexture","bindTransformFeedback","bindVertexArray","binding","bitness","blend","blendColor","blendEquation","blendEquationSeparate","blendFunc","blendFuncSeparate","blink","blitFramebuffer","blob","block-size","blockDirection","blockSize","blockedURI","blockedURL","blocking","blockingDuration","blue","bluetooth","blur","body","bodyUsed","bold","bookmarks","booleanValue","boost","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","borderBlock","borderBlockColor","borderBlockEnd","borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth","borderBlockStart","borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth","borderBlockStyle","borderBlockWidth","borderBottom","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomStyle","borderBottomWidth","borderBoxSize","borderCollapse","borderColor","borderColorDark","borderColorLight","borderEndEndRadius","borderEndStartRadius","borderImage","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderInline","borderInlineColor","borderInlineEnd","borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth","borderInlineStart","borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth","borderInlineStyle","borderInlineWidth","borderLeft","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRadius","borderRight","borderRightColor","borderRightStyle","borderRightWidth","borderSpacing","borderStartEndRadius","borderStartStartRadius","borderStyle","borderTop","borderTopColor","borderTopLeftRadius","borderTopRightRadius","borderTopStyle","borderTopWidth","borderWidth","bottom","bottomMargin","bound","boundElements","boundingClientRect","boundingHeight","boundingLeft","boundingRect","boundingTop","boundingWidth","bounds","boundsGeometry","box-decoration-break","box-shadow","box-sizing","boxDecorationBreak","boxShadow","boxSizing","brand","brands","break-after","break-before","break-inside","breakAfter","breakBefore","breakInside","broadcast","browser","browserLanguage","browserSettings","browsingData","browsingTopics","btoa","bubbles","buffer","bufferData","bufferDepth","bufferSize","bufferSubData","buffered","bufferedAmount","bufferedAmountLowThreshold","buffers","buildID","buildNumber","button","buttonID","buttons","byobRequest","byteLength","byteOffset","bytes","bytesPerRow","bytesWritten","c","cache","caches","call","caller","camera","canBeFormatted","canBeMounted","canBeShared","canConstructInDedicatedWorker","canGoBack","canGoForward","canHaveChildren","canHaveHTML","canInsertDTMF","canIntercept","canLoadAdAuctionFencedFrame","canLoadOpaqueURL","canMakePayment","canParse","canPlayType","canPresent","canShare","canTransition","canTrickleIceCandidates","cancel","cancelAndHoldAtTime","cancelAnimationFrame","cancelBubble","cancelIdleCallback","cancelScheduledValues","cancelVideoFrameCallback","cancelWatchAvailability","cancelable","candidate","canonicalUUID","canvas","cap","capabilities","caption","caption-side","captionSide","captivePortal","capture","captureEvents","captureStackTrace","captureStream","captureTab","captureVisibleTab","caret-color","caretBidiLevel","caretColor","caretPositionFromPoint","caretRangeFromPoint","cast","catch","category","cbrt","cd","ceil","cellIndex","cellPadding","cellSpacing","cells","ch","chOff","chain","challenge","changeType","changed","changedTouches","channel","channelCount","channelCountMode","channelInterpretation","chapterInfo","char","charAt","charCode","charCodeAt","charIndex","charLength","characterBounds","characterBoundsRangeStart","characterData","characterDataOldValue","characterSet","characterVariant","characteristic","charging","chargingTime","charset","check","checkDCE","checkEnclosure","checkFramebufferStatus","checkIntersection","checkValidity","checkVisibility","checked","childElementCount","childList","childNodes","children","chrome","ciphertext","cite","city","claimInterface","claimed","classList","className","classid","clear","clearAppBadge","clearAttributes","clearBuffer","clearBufferfi","clearBufferfv","clearBufferiv","clearBufferuiv","clearColor","clearData","clearDepth","clearHalt","clearImmediate","clearInterval","clearLiveSeekableRange","clearMarks","clearMaxGCPauseAccumulator","clearMeasures","clearOriginJoinedAdInterestGroups","clearParameters","clearRect","clearResourceTimings","clearShadow","clearStencil","clearTimeout","clearValue","clearWatch","click","clickCount","clientDataJSON","clientHeight","clientInformation","clientLeft","clientRect","clientRects","clientTop","clientWaitSync","clientWidth","clientX","clientY","clip","clip-path","clip-rule","clipBottom","clipLeft","clipPath","clipPathUnits","clipRight","clipRule","clipTop","clipboard","clipboardData","clonable","clone","cloneContents","cloneNode","cloneRange","close","closeCode","closePath","closed","closedBy","closest","clz","clz32","cm","cmp","code","codeBase","codePointAt","codeType","codedHeight","codedRect","codedWidth","colSpan","collapse","collapseToEnd","collapseToStart","collapsed","collect","collections","colno","color","color-adjust","color-interpolation","color-interpolation-filters","color-scheme","colorAdjust","colorAttachments","colorDepth","colorFormats","colorInterpolation","colorInterpolationFilters","colorMask","colorScheme","colorSpace","colorType","cols","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columnCount","columnFill","columnGap","columnNumber","columnRule","columnRuleColor","columnRuleStyle","columnRuleWidth","columnSpan","columnWidth","columns","command","commandForElement","commands","commit","commitLoadTime","commitPreferences","commitStyles","committed","commonAncestorContainer","compact","compare","compareBoundaryPoints","compareDocumentPosition","compareEndPoints","compareExchange","compareNode","comparePoint","compatMode","compatible","compile","compileShader","compileStreaming","complete","completed","component","componentFromPoint","composed","composedPath","composite","compositionEndOffset","compositionStartOffset","compressedTexImage2D","compressedTexImage3D","compressedTexSubImage2D","compressedTexSubImage3D","compute","computedStyleMap","concat","conditionText","coneInnerAngle","coneOuterAngle","coneOuterGain","config","configURL","configurable","configuration","configurationName","configurationValue","configurations","configure","confirm","confirmComposition","confirmSiteSpecificTrackingException","confirmWebWideTrackingException","congestionControl","connect","connectEnd","connectNative","connectShark","connectStart","connected","connectedCallback","connectedMoveCallback","connection","connectionInfo","connectionList","connectionSpeed","connectionState","connections","console","consolidate","constants","constraint","constrictionActive","construct","constructor","contactID","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","containIntrinsicBlockSize","containIntrinsicHeight","containIntrinsicInlineSize","containIntrinsicSize","containIntrinsicWidth","container","container-name","container-type","containerId","containerName","containerQuery","containerSrc","containerType","contains","containsNode","content","content-visibility","contentBoxSize","contentDocument","contentEditable","contentEncoding","contentHint","contentOverflow","contentRect","contentScriptType","contentStyleType","contentType","contentVisibility","contentWindow","context","contextId","contextIds","contextMenu","contextMenus","contextType","contextTypes","contextmenu","contextualIdentities","continue","continuePrimaryKey","continuous","control","controlTransferIn","controlTransferOut","controller","controls","controlsList","convertPointFromNode","convertQuadFromNode","convertRectFromNode","convertToBlob","convertToSpecifiedUnits","cookie","cookieEnabled","cookieStore","cookies","coords","copyBufferSubData","copyBufferToBuffer","copyBufferToTexture","copyExternalImageToTexture","copyFromChannel","copyTexImage2D","copyTexSubImage2D","copyTexSubImage3D","copyTextureToBuffer","copyTextureToTexture","copyTo","copyToChannel","copyWithin","correspondingElement","correspondingUseElement","corruptedVideoFrames","cos","cosh","count","countReset","counter-increment","counter-reset","counter-set","counterIncrement","counterReset","counterSet","country","cpuClass","cpuSleepAllowed","cqb","cqh","cqi","cqmax","cqmin","cqw","create","createAnalyser","createAnchor","createAnswer","createAttribute","createAttributeNS","createAuctionNonce","createBidirectionalStream","createBindGroup","createBindGroupLayout","createBiquadFilter","createBuffer","createBufferSource","createCDATASection","createCSSStyleSheet","createCaption","createChannelMerger","createChannelSplitter","createCommandEncoder","createComment","createComputePipeline","createComputePipelineAsync","createConicGradient","createConstantSource","createContextualFragment","createControlRange","createConvolver","createDTMFSender","createDataChannel","createDelay","createDelayNode","createDocument","createDocumentFragment","createDocumentType","createDynamicsCompressor","createElement","createElementNS","createEncodedStreams","createEntityReference","createEvent","createEventObject","createExpression","createFramebuffer","createFunction","createGain","createGainNode","createHTML","createHTMLDocument","createIIRFilter","createImageBitmap","createImageData","createIndex","createJavaScriptNode","createLinearGradient","createMediaElementSource","createMediaKeys","createMediaStreamDestination","createMediaStreamSource","createMediaStreamTrackSource","createMutableFile","createNSResolver","createNodeIterator","createNotification","createObjectStore","createObjectURL","createOffer","createOscillator","createPanner","createPattern","createPeriodicWave","createPipelineLayout","createPolicy","createPopup","createProcessingInstruction","createProgram","createQuery","createQuerySet","createRadialGradient","createRange","createRangeCollection","createReader","createRenderBundleEncoder","createRenderPipeline","createRenderPipelineAsync","createRenderbuffer","createSVGAngle","createSVGLength","createSVGMatrix","createSVGNumber","createSVGPathSegArcAbs","createSVGPathSegArcRel","createSVGPathSegClosePath","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicRel","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoCubicSmoothRel","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticRel","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegCurvetoQuadraticSmoothRel","createSVGPathSegLinetoAbs","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoHorizontalRel","createSVGPathSegLinetoRel","createSVGPathSegLinetoVerticalAbs","createSVGPathSegLinetoVerticalRel","createSVGPathSegMovetoAbs","createSVGPathSegMovetoRel","createSVGPoint","createSVGRect","createSVGTransform","createSVGTransformFromMatrix","createSampler","createScript","createScriptProcessor","createScriptURL","createSession","createShader","createShaderModule","createShadowRoot","createStereoPanner","createStyleSheet","createTBody","createTFoot","createTHead","createTask","createTextNode","createTextRange","createTexture","createTouch","createTouchList","createTransformFeedback","createTreeWalker","createUnidirectionalStream","createVertexArray","createView","createWaveShaper","createWorklet","createWritable","creationTime","credentialless","credentials","criticalCHRestart","cropTo","crossOrigin","crossOriginIsolated","crypto","csi","csp","cssFloat","cssRules","cssText","cssValueType","ctrlKey","ctrlLeft","cues","cullFace","cullMode","currentCSSZoom","currentDirection","currentEntry","currentLocalDescription","currentNode","currentPage","currentRect","currentRemoteDescription","currentScale","currentScreen","currentScript","currentSrc","currentState","currentStyle","currentTarget","currentTime","currentTranslate","currentView","cursor","curve","customElements","customError","cx","cy","d","data","dataFld","dataFormatAs","dataLoss","dataLossMessage","dataPageSize","dataSrc","dataTransfer","database","databases","datagrams","dataset","dateTime","db","debug","debuggerEnabled","declarativeNetRequest","declare","decode","decodeAudioData","decodeQueueSize","decodeURI","decodeURIComponent","decodedBodySize","decoding","decodingInfo","decreaseZoomLevel","decrypt","default","defaultCharset","defaultChecked","defaultMuted","defaultPlaybackRate","defaultPolicy","defaultPrevented","defaultQueue","defaultRequest","defaultSelected","defaultStatus","defaultURL","defaultValue","defaultView","defaultstatus","defer","define","defineMagicFunction","defineMagicVariable","defineProperties","defineProperty","deg","delay","delayTime","delegatesFocus","delete","deleteBuffer","deleteCaption","deleteCell","deleteContents","deleteData","deleteDatabase","deleteFramebuffer","deleteFromDocument","deleteIndex","deleteMedium","deleteObjectStore","deleteProgram","deleteProperty","deleteQuery","deleteRenderbuffer","deleteRow","deleteRule","deleteSampler","deleteShader","deleteSync","deleteTFoot","deleteTHead","deleteTexture","deleteTransformFeedback","deleteVertexArray","deleted","deliverChangeRecords","deliveredFrames","deliveredFramesDuration","delivery","deliveryInfo","deliveryStatus","deliveryTimestamp","deliveryType","delta","deltaMode","deltaX","deltaY","deltaZ","dependentLocality","deprecatedReplaceInURN","deprecatedRunAdAuctionEnforcesKAnonymity","deprecatedURNToURL","depthActive","depthBias","depthBiasClamp","depthBiasSlopeScale","depthClearValue","depthCompare","depthDataFormat","depthFailOp","depthFar","depthFunc","depthLoadOp","depthMask","depthNear","depthOrArrayLayers","depthRange","depthReadOnly","depthStencil","depthStencilAttachment","depthStencilFormat","depthStoreOp","depthType","depthUsage","depthWriteEnabled","deref","deriveBits","deriveKey","descentOverride","description","deselectAll","designMode","desiredSize","destination","destinationURL","destroy","detach","detachEvent","detachShader","detached","detail","details","detect","detectLanguage","detune","device","deviceClass","deviceId","deviceMemory","devicePixelContentBoxSize","devicePixelRatio","devicePosture","deviceProtocol","deviceSubclass","deviceVersionMajor","deviceVersionMinor","deviceVersionSubminor","deviceXDPI","deviceYDPI","devtools","devtools_panels","didTimeout","difference","diffuseConstant","digest","dimension","dimensions","dir","dirName","direction","dirxml","disable","disablePictureInPicture","disableRemotePlayback","disableVertexAttribArray","disabled","discard","discardedFrames","dischargingTime","disconnect","disconnectShark","disconnectedCallback","dispatchEvent","dispatchWorkgroups","dispatchWorkgroupsIndirect","display","displayHeight","displayId","displayName","displayWidth","dispose","disposeAsync","disposed","disposition","distanceModel","div","divisor","djsapi","djsproxy","dns","doImport","doNotTrack","doScroll","doctype","document","documentElement","documentId","documentIds","documentLifecycle","documentMode","documentOrigin","documentOrigins","documentPictureInPicture","documentURI","documentURL","documentUrl","documentUrls","dolphin","dolphinGameCenter","dolphininfo","dolphinmeta","dom","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domOverlayState","domain","domainLookupEnd","domainLookupStart","dominant-baseline","dominantBaseline","done","dopplerFactor","dotAll","downDegrees","downlink","download","downloadRequest","downloadTotal","downloaded","downloads","dpcm","dpi","dppx","dragDrop","draggable","draw","drawArrays","drawArraysInstanced","drawArraysInstancedANGLE","drawBuffers","drawCustomFocusRing","drawElements","drawElementsInstanced","drawElementsInstancedANGLE","drawFocusIfNeeded","drawImage","drawImageFromRect","drawIndexed","drawIndexedIndirect","drawIndirect","drawRangeElements","drawSystemFocusRing","drawingBufferColorSpace","drawingBufferFormat","drawingBufferHeight","drawingBufferStorage","drawingBufferWidth","drop","dropEffect","droppedVideoFrames","dropzone","dstFactor","dtmf","dump","dumpProfile","duplex","duplicate","durability","duration","dvb","dvh","dvi","dvmax","dvmin","dvname","dvnum","dvw","dx","dy","dynamicId","dynsrc","e","edgeMode","editContext","effect","effectAllowed","effectiveDirective","effectiveType","effects","elapsedTime","element","elementFromPoint","elementTiming","elements","elementsFromPoint","elevation","ellipse","em","emHeightAscent","emHeightDescent","email","embeds","emit","emma","empty","empty-cells","emptyCells","emptyHTML","emptyScript","emulatedPosition","enable","enableBackground","enableDelegations","enableStyleSheetsForSet","enableVertexAttribArray","enabled","enabledFeatures","enabledPlugin","encode","encodeInto","encodeQueueSize","encodeURI","encodeURIComponent","encodedBodySize","encoding","encodingInfo","encrypt","enctype","end","endContainer","endElement","endElementAt","endOcclusionQuery","endOfPassWriteIndex","endOfStream","endOffset","endQuery","endTime","endTransformFeedback","ended","endpoint","endpointNumber","endpoints","endsWith","enqueue","enterKeyHint","entities","entries","entry","entryPoint","entryType","enumerable","enumerate","enumerateDevices","enumerateEditable","environmentBlendMode","equals","error","errorCode","errorDetail","errorText","escape","estimate","eval","evaluate","event","eventCounts","eventPhase","events","every","ex","exception","exchange","exec","execCommand","execCommandShowHelp","execScript","executeBundles","executionStart","exitFullscreen","exitPictureInPicture","exitPointerLock","exitPresent","exp","expand","expandEntityReferences","expando","expansion","expectedContextLanguages","expectedImprovement","expectedInputLanguages","experiments","expiration","expirationTime","expires","expiryDate","explicitOriginalTarget","expm1","exponent","exponentialRampToValueAtTime","exportKey","exports","extend","extension","extensionTypes","extensions","extentNode","extentOffset","external","externalResourcesRequired","externalTexture","extractContents","extractable","eye","f","f16round","face","factoryReset","failOp","failureReason","fallback","family","familyName","farthestViewportElement","fastSeek","fatal","featureId","featurePolicy","featureSettings","features","fence","fenceSync","fetch","fetchLater","fetchPriority","fetchStart","fftSize","fgColor","fieldOfView","file","fileCreatedDate","fileHandle","fileModifiedDate","fileName","fileSize","fileUpdatedDate","filename","files","filesystem","fill","fill-opacity","fill-rule","fillJointRadii","fillLightMode","fillOpacity","fillPoses","fillRect","fillRule","fillStyle","fillText","filter","filterResX","filterResY","filterUnits","filters","finalResponseHeadersStart","finally","find","findIndex","findLast","findLastIndex","findRule","findText","finish","finishDocumentLoadTime","finishLoadTime","finished","fireEvent","firesTouchEvents","first","firstChild","firstElementChild","firstInterimResponseStart","firstPage","firstPaintAfterLoadTime","firstPaintTime","firstUIEventTimestamp","fixed","flags","flat","flatMap","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","flexBasis","flexDirection","flexFlow","flexGrow","flexShrink","flexWrap","flip","flipX","flipY","float","float32","float64","flood-color","flood-opacity","floodColor","floodOpacity","floor","flush","focus","focusNode","focusOffset","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","fontBoundingBoxAscent","fontBoundingBoxDescent","fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontOpticalSizing","fontPalette","fontSize","fontSizeAdjust","fontSmoothingEnabled","fontStretch","fontStyle","fontSynthesis","fontSynthesisPosition","fontSynthesisSmallCaps","fontSynthesisStyle","fontSynthesisWeight","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantEmoji","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontVariationSettings","fontWeight","fontcolor","fontfaces","fonts","fontsize","for","forEach","force","forceFallbackAdapter","forceRedraw","forced-color-adjust","forcedColorAdjust","forcedStyleAndLayoutDuration","forget","form","formAction","formData","formEnctype","formMethod","formNoValidate","formTarget","format","formatToParts","forms","forward","forwardWheel","forwardX","forwardY","forwardZ","foundation","fr","fragment","fragmentDirective","frame","frameBorder","frameCount","frameElement","frameId","frameIds","frameSpacing","framebuffer","framebufferHeight","framebufferRenderbuffer","framebufferTexture2D","framebufferTextureLayer","framebufferWidth","frames","freeSpace","freeze","frequency","frequencyBinCount","from","fromAsync","fromBase64","fromCharCode","fromCodePoint","fromElement","fromEntries","fromFloat32Array","fromFloat64Array","fromHex","fromMatrix","fromPoint","fromQuad","fromRect","frontFace","fround","fullName","fullPath","fullRange","fullScreen","fullVersionList","fullscreen","fullscreenElement","fullscreenEnabled","fx","fy","g","gain","gamepad","gamma","gap","gatheringState","gatt","geckoProfiler","genderIdentity","generateCertificate","generateKey","generateMipmap","generateRequest","geolocation","gestureObject","get","getAcceptLanguages","getActiveAttrib","getActiveUniform","getActiveUniformBlockName","getActiveUniformBlockParameter","getActiveUniforms","getAdjacentText","getAll","getAllKeys","getAllRecords","getAllResponseHeaders","getAllowlistForFeature","getAnimations","getAsFile","getAsFileSystemHandle","getAsString","getAttachedShaders","getAttribLocation","getAttribute","getAttributeNS","getAttributeNames","getAttributeNode","getAttributeNodeNS","getAttributeType","getAudioTracks","getAuthenticatorData","getAutoplayPolicy","getAvailability","getBBox","getBackgroundPage","getBadgeBackgroundColor","getBadgeText","getBadgeTextColor","getBattery","getBigInt64","getBigUint64","getBindGroupLayout","getBlob","getBookmark","getBoundingClientRect","getBounds","getBoxQuads","getBrowserInfo","getBufferParameter","getBufferSubData","getByteFrequencyData","getByteTimeDomainData","getCSSCanvasContext","getCTM","getCameraImage","getCandidateWindowClientRect","getCanonicalLocales","getCapabilities","getCaptureHandle","getChannelData","getCharNumAtPosition","getCharacteristic","getCharacteristics","getClientCapabilities","getClientExtensionResults","getClientRect","getClientRects","getCoalescedEvents","getCompilationInfo","getComposedRanges","getCompositionAlternatives","getComputedStyle","getComputedTextLength","getComputedTiming","getConfiguration","getConstraints","getContext","getContextAttributes","getContexts","getContributingSources","getCounterValue","getCueAsHTML","getCueById","getCurrent","getCurrentPosition","getCurrentTexture","getCurrentTime","getData","getDatabaseNames","getDate","getDay","getDefaultComputedStyle","getDepthInMeters","getDepthInformation","getDescriptor","getDescriptors","getDestinationInsertionPoints","getDevices","getDirectory","getDirectoryHandle","getDisplayMedia","getDistributedNodes","getEditable","getElementById","getElementsByClassName","getElementsByName","getElementsByTagName","getElementsByTagNameNS","getEnclosureList","getEndPositionOfChar","getEntries","getEntriesByName","getEntriesByType","getError","getExtension","getExtentOfChar","getEyeParameters","getFeature","getFiberRoots","getFile","getFileHandle","getFiles","getFilesAndDirectories","getFingerprints","getFloat16","getFloat32","getFloat64","getFloatFrequencyData","getFloatTimeDomainData","getFloatValue","getFragDataLocation","getFrameData","getFrameId","getFramebufferAttachmentParameter","getFrequencyResponse","getFullYear","getGamepads","getHTML","getHeaderExtensionsToNegotiate","getHighEntropyValues","getHitTestResults","getHitTestResultsForTransientInput","getHours","getIdentityAssertion","getIds","getImageData","getIndexedParameter","getInfo","getInnerHTML","getInstalledRelatedApps","getInt16","getInt32","getInt8","getInterestGroupAdAuctionData","getInternalModuleRanges","getInternalformatParameter","getIntersectionList","getItem","getItems","getJointPose","getKey","getKeyframes","getLastFocused","getLayers","getLayoutMap","getLightEstimate","getLineDash","getLocalCandidates","getLocalParameters","getLocalStreams","getManagedConfiguration","getManifest","getMappedRange","getMarks","getMatchedCSSRules","getMaxGCPauseSinceClear","getMeasures","getMessage","getMetadata","getMilliseconds","getMinutes","getModifierState","getMonth","getName","getNamedItem","getNamedItemNS","getNativeFramebufferScaleFactor","getNegotiatedHeaderExtensions","getNestedConfigs","getNotifications","getNotifier","getNumberOfChars","getOffsetReferenceSpace","getOrInsert","getOrInsertComputed","getOutputTimestamp","getOverrideHistoryNavigationMode","getOverrideStyle","getOwnPropertyDescriptor","getOwnPropertyDescriptors","getOwnPropertyNames","getOwnPropertySymbols","getPackageDirectoryEntry","getParameter","getParameters","getParent","getPathData","getPathSegAtLength","getPathSegmentAtLength","getPermissionWarningsByManifest","getPhotoCapabilities","getPhotoSettings","getPlatformInfo","getPointAtLength","getPopup","getPorts","getPose","getPredictedEvents","getPreference","getPreferenceDefault","getPreferredCanvasFormat","getPresentationAttribute","getPreventDefault","getPrimaryService","getPrimaryServices","getProgramInfoLog","getProgramParameter","getPropertyCSSValue","getPropertyPriority","getPropertyShorthand","getPropertyType","getPropertyValue","getPrototypeOf","getPublicKey","getPublicKeyAlgorithm","getQuery","getQueryParameter","getRGBColorValue","getRandomValues","getRangeAt","getReader","getReceivers","getRectValue","getReflectionCubeMap","getRegistration","getRegistrations","getRemoteCandidates","getRemoteCertificates","getRemoteParameters","getRemoteStreams","getRenderbufferParameter","getResponseHeader","getRoot","getRootNode","getRotationOfChar","getSVGDocument","getSamplerParameter","getScreenCTM","getScreenDetails","getSeconds","getSelectedCandidatePair","getSelection","getSelf","getSenders","getService","getSetCookie","getSettings","getShaderInfoLog","getShaderParameter","getShaderPrecisionFormat","getShaderSource","getSignals","getSimpleDuration","getSiteIcons","getSources","getSpeculativeParserUrls","getStartPositionOfChar","getStartTime","getState","getStats","getStatusForPolicy","getStorageUpdates","getStreamById","getStringValue","getSubStringLength","getSubscription","getSubscriptions","getSupportedConstraints","getSupportedExtensions","getSupportedFormats","getSupportedZoomLevels","getSyncParameter","getSynchronizationSources","getTags","getTargetRanges","getTexParameter","getTextFormats","getTime","getTimezoneOffset","getTiming","getTitle","getTitlebarAreaRect","getTotalLength","getTrackById","getTracks","getTransceivers","getTransform","getTransformFeedbackVarying","getTransformToElement","getTransports","getType","getTypeMapping","getUILanguage","getURL","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getUint16","getUint32","getUint8","getUniform","getUniformBlockIndex","getUniformIndices","getUniformLocation","getUserInfo","getUserMedia","getUserSettings","getVRDisplays","getValues","getVarDate","getVariableValue","getVertexAttrib","getVertexAttribOffset","getVideoPlaybackQuality","getVideoTracks","getViewerPose","getViewport","getViews","getVoices","getWakeLockState","getWriter","getYear","getZoom","getZoomSettings","givenName","global","globalAlpha","globalCompositeOperation","globalPrivacyControl","globalThis","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","go","goBack","goForward","gpu","grabFrame","grad","gradientTransform","gradientUnits","grammars","green","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","gridArea","gridAutoColumns","gridAutoFlow","gridAutoRows","gridColumn","gridColumnEnd","gridColumnGap","gridColumnStart","gridGap","gridRow","gridRowEnd","gridRowGap","gridRowStart","gridTemplate","gridTemplateAreas","gridTemplateColumns","gridTemplateRows","gripSpace","group","groupBy","groupCollapsed","groupEnd","groupId","groups","grow","growable","guestProcessId","guestRenderFrameRoutingId","hadRecentInput","hand","handedness","hangingBaseline","hapticActuators","hardwareConcurrency","has","hasAttribute","hasAttributeNS","hasAttributes","hasBeenActive","hasChildNodes","hasComposition","hasDynamicOffset","hasEnrolledInstrument","hasExtension","hasExternalDisplay","hasFeature","hasFocus","hasIndices","hasInstance","hasLayout","hasOrientation","hasOwn","hasOwnProperty","hasPointerCapture","hasPosition","hasPrivateToken","hasReading","hasRedemptionRecord","hasRegExpGroups","hasStorageAccess","hasUAVisualTransition","hasUnpartitionedCookieAccess","hash","hashChange","head","headers","heading","height","hid","hidden","hide","hideFocus","hidePopover","high","highWaterMark","highlight","highlights","highlightsFromPoint","hint","hints","history","honorificPrefix","honorificSuffix","horizontalOverflow","host","hostCandidate","hostname","href","hrefTranslate","hreflang","hspace","html5TagCheckInerface","htmlFor","htmlText","httpEquiv","httpRequestStatusCode","hwTimestamp","hyphenate-character","hyphenateCharacter","hyphenateLimitChars","hyphens","hypot","i18n","ic","iccId","iceConnectionState","iceGatheringState","iceTransport","icon","iconURL","id","identifier","identity","ideographicBaseline","idle","idpLoginUrl","ignoreBOM","ignoreCase","ignoreDepthValues","image","image-orientation","image-rendering","imageHeight","imageOrientation","imageRendering","imageSizes","imageSmoothingEnabled","imageSmoothingQuality","imageSrcset","imageWidth","images","ime-mode","imeMode","implementation","importExternalTexture","importKey","importNode","importStylesheet","imports","impp","imul","in","in1","in2","inBandMetadataTrackDispatchType","inIncognitoContext","inRange","includes","incognito","incomingBidirectionalStreams","incomingHighWaterMark","incomingMaxAge","incomingUnidirectionalStreams","increaseZoomLevel","incremental","indeterminate","index","indexNames","indexOf","indexedDB","indicate","indices","inert","inertiaDestinationX","inertiaDestinationY","info","inherits","init","initAnimationEvent","initBeforeLoadEvent","initClipboardEvent","initCloseEvent","initCommandEvent","initCompositionEvent","initCustomEvent","initData","initDataType","initDeviceMotionEvent","initDeviceOrientationEvent","initDragEvent","initErrorEvent","initEvent","initFocusEvent","initGestureEvent","initHashChangeEvent","initKeyEvent","initKeyboardEvent","initMSManipulationEvent","initMessageEvent","initMouseEvent","initMouseScrollEvent","initMouseWheelEvent","initMutationEvent","initNSMouseEvent","initOverflowEvent","initPageEvent","initPageTransitionEvent","initPointerEvent","initPopStateEvent","initProgressEvent","initScrollAreaEvent","initSimpleGestureEvent","initStorageEvent","initTextEvent","initTimeEvent","initTouchEvent","initTransitionEvent","initUIEvent","initWebKitAnimationEvent","initWebKitTransitionEvent","initWebKitWheelEvent","initWheelEvent","initialTime","initialValue","initialize","initiatorType","inject","ink","inline-size","inlineSize","inlineVerticalFieldOfView","inner","innerHTML","innerHeight","innerText","innerWidth","input","inputBuffer","inputEncoding","inputMethod","inputMode","inputQuota","inputSource","inputSources","inputType","inputs","insertAdjacentElement","insertAdjacentHTML","insertAdjacentText","insertBefore","insertCell","insertDTMF","insertData","insertDebugMarker","insertItemBefore","insertNode","insertRow","insertRule","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","insetBlock","insetBlockEnd","insetBlockStart","insetInline","insetInlineEnd","insetInlineStart","inspect","install","installing","instanceRoot","instantiate","instantiateStreaming","instruments","int16","int32","int8","integrity","interactionCount","interactionId","interactionMode","intercept","interestForElement","interfaceClass","interfaceName","interfaceNumber","interfaceProtocol","interfaceSubclass","interfaces","interimResults","internalSubset","interpretation","intersection","intersectionRatio","intersectionRect","intersectsNode","interval","invalidIteratorState","invalidateFramebuffer","invalidateSubFramebuffer","inverse","invertSelf","invoker","invokerType","is","is2D","isActive","isAllowedFileSchemeAccess","isAllowedIncognitoAccess","isAlternate","isArray","isAutoSelected","isBingCurrentSearchDefault","isBuffer","isCandidateWindowVisible","isChar","isCollapsed","isComposing","isConcatSpreadable","isConditionalMediationAvailable","isConfigSupported","isConnected","isContentEditable","isContentHandlerRegistered","isContextLost","isDefaultNamespace","isDirectory","isDisabled","isDisjointFrom","isEnabled","isEqual","isEqualNode","isError","isExtended","isExtensible","isExternalCTAP2SecurityKeySupported","isFallbackAdapter","isFile","isFinite","isFirstPersonObserver","isFramebuffer","isFrozen","isGenerator","isHTML","isHistoryNavigation","isId","isIdentity","isInjected","isInputPending","isInteger","isInternal","isIntersecting","isLockFree","isMap","isMultiLine","isNaN","isOpen","isPointInFill","isPointInPath","isPointInRange","isPointInStroke","isPrefAlternate","isPresenting","isPrimary","isProgram","isPropertyImplicit","isProtocolHandlerRegistered","isPrototypeOf","isQuery","isRawJSON","isRenderbuffer","isSafeInteger","isSameEntry","isSameNode","isSampler","isScript","isScriptURL","isSealed","isSecureContext","isSessionSupported","isShader","isSubsetOf","isSupersetOf","isSupported","isSync","isTextEdit","isTexture","isTransformFeedback","isTrusted","isTypeSupported","isUserVerifyingPlatformAuthenticatorAvailable","isVertexArray","isView","isVisible","isWellFormed","isochronousTransferIn","isochronousTransferOut","isolation","italics","item","itemId","itemProp","itemRef","itemScope","itemType","itemValue","items","iterateNext","iterationComposite","iterator","javaEnabled","jitterBufferTarget","jobTitle","join","joinAdInterestGroup","jointName","json","justify-content","justify-items","justify-self","justifyContent","justifyItems","justifySelf","k1","k2","k3","k4","kHz","keepalive","kernelMatrix","kernelUnitLengthX","kernelUnitLengthY","kerning","key","keyCode","keyFor","keyIdentifier","keyLightEnabled","keyLocation","keyPath","keyStatuses","keySystem","keyText","keyUsage","keyboard","keys","keytype","kind","knee","knownSources","label","labels","lang","language","languages","largeArcFlag","last","lastChild","lastElementChild","lastError","lastEventId","lastIndex","lastIndexOf","lastInputTime","lastMatch","lastMessageSubject","lastMessageType","lastModified","lastModifiedDate","lastPage","lastParen","lastState","lastStyleSheetSet","latency","latitude","launchQueue","layerName","layerX","layerY","layout","layoutFlow","layoutGrid","layoutGridChar","layoutGridLine","layoutGridMode","layoutGridType","lbound","leaveAdInterestGroup","left","leftContext","leftDegrees","leftMargin","leftProjectionMatrix","leftViewMatrix","length","lengthAdjust","lengthComputable","letter-spacing","letterSpacing","level","lh","lighting-color","lightingColor","limitingConeAngle","limits","line","line-break","line-height","lineAlign","lineBreak","lineCap","lineDashOffset","lineGapOverride","lineHeight","lineJoin","lineNum","lineNumber","linePos","lineTo","lineWidth","linearAcceleration","linearRampToValueAtTime","linearVelocity","lineno","lines","link","linkColor","linkProgram","links","list","list-style","list-style-image","list-style-position","list-style-type","listStyle","listStyleImage","listStylePosition","listStyleType","listener","listeners","load","loadEventEnd","loadEventStart","loadOp","loadTime","loadTimes","loaded","loading","localDescription","localName","localService","localStorage","locale","localeCompare","location","locationbar","lock","locked","lockedFile","locks","lodMaxClamp","lodMinClamp","log","log10","log1p","log2","logicalXDPI","logicalYDPI","login","loglevel","longDesc","longitude","lookupNamespaceURI","lookupPrefix","loop","loopEnd","loopStart","looping","lost","low","lower","lowerBound","lowerOpen","lowsrc","lvb","lvh","lvi","lvmax","lvmin","lvw","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","magFilter","makeXRCompatible","managed","management","manifest","manufacturer","manufacturerName","map","mapAsync","mapState","mappedAtCreation","mapping","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marginBlock","marginBlockEnd","marginBlockStart","marginBottom","marginHeight","marginInline","marginInlineEnd","marginInlineStart","marginLeft","marginRight","marginTop","marginWidth","mark","marker","marker-end","marker-mid","marker-offset","marker-start","markerEnd","markerHeight","markerMid","markerOffset","markerStart","markerUnits","markerWidth","marks","mask","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-position-x","mask-position-y","mask-repeat","mask-size","mask-type","maskClip","maskComposite","maskContentUnits","maskImage","maskMode","maskOrigin","maskPosition","maskPositionX","maskPositionY","maskRepeat","maskSize","maskType","maskUnits","match","matchAll","matchMedia","matchMedium","matchPatterns","matches","math-depth","math-style","mathDepth","mathShift","mathStyle","matrix","matrixTransform","max","max-block-size","max-height","max-inline-size","max-width","maxActions","maxAlternatives","maxAnisotropy","maxBindGroups","maxBindGroupsPlusVertexBuffers","maxBindingsPerBindGroup","maxBlockSize","maxBufferSize","maxByteLength","maxChannelCount","maxChannels","maxColorAttachmentBytesPerSample","maxColorAttachments","maxComputeInvocationsPerWorkgroup","maxComputeWorkgroupSizeX","maxComputeWorkgroupSizeY","maxComputeWorkgroupSizeZ","maxComputeWorkgroupStorageSize","maxComputeWorkgroupsPerDimension","maxConnectionsPerServer","maxDatagramSize","maxDecibels","maxDistance","maxDrawCount","maxDynamicStorageBuffersPerPipelineLayout","maxDynamicUniformBuffersPerPipelineLayout","maxHeight","maxInlineSize","maxInterStageShaderComponents","maxInterStageShaderVariables","maxLayers","maxLength","maxMessageSize","maxPacketLifeTime","maxRetransmits","maxSampledTexturesPerShaderStage","maxSamplersPerShaderStage","maxStorageBufferBindingSize","maxStorageBuffersPerShaderStage","maxStorageTexturesPerShaderStage","maxTextureArrayLayers","maxTextureDimension1D","maxTextureDimension2D","maxTextureDimension3D","maxTouchPoints","maxUniformBufferBindingSize","maxUniformBuffersPerShaderStage","maxValue","maxVertexAttributes","maxVertexBufferArrayStride","maxVertexBuffers","maxWidth","maximumLatency","measure","measureInputUsage","measureText","media","mediaCapabilities","mediaDevices","mediaElement","mediaGroup","mediaKeys","mediaSession","mediaStream","mediaText","meetOrSlice","memory","menubar","menus","menusChild","menusInternal","mergeAttributes","message","messageClass","messageHandlers","messageType","messages","metaKey","metadata","method","methodDetails","methodName","mid","mimeType","mimeTypes","min","min-block-size","min-height","min-inline-size","min-width","minBindingSize","minBlockSize","minDecibels","minFilter","minHeight","minInlineSize","minLength","minStorageBufferOffsetAlignment","minUniformBufferOffsetAlignment","minValue","minWidth","minimumLatency","mipLevel","mipLevelCount","mipmapFilter","miterLimit","mix-blend-mode","mixBlendMode","mm","mobile","mode","model","modify","module","mount","move","moveBefore","moveBy","moveEnd","moveFirst","moveFocusDown","moveFocusLeft","moveFocusRight","moveFocusUp","moveInSuccession","moveNext","moveRow","moveStart","moveTo","moveToBookmark","moveToElementText","moveToPoint","movementX","movementY","mozAdd","mozAnimationStartTime","mozAnon","mozApps","mozAudioCaptured","mozAudioChannelType","mozAutoplayEnabled","mozCancelAnimationFrame","mozCancelFullScreen","mozCancelRequestAnimationFrame","mozCaptureStream","mozCaptureStreamUntilEnded","mozClearDataAt","mozContact","mozContacts","mozCreateFileHandle","mozCurrentTransform","mozCurrentTransformInverse","mozCursor","mozDash","mozDashOffset","mozDecodedFrames","mozExitPointerLock","mozFillRule","mozFragmentEnd","mozFrameDelay","mozFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozGetAll","mozGetAllKeys","mozGetAsFile","mozGetDataAt","mozGetMetadata","mozGetUserMedia","mozHasAudio","mozHasItem","mozHidden","mozImageSmoothingEnabled","mozIndexedDB","mozInnerScreenX","mozInnerScreenY","mozInputSource","mozIsTextField","mozItem","mozItemCount","mozItems","mozLength","mozLockOrientation","mozMatchesSelector","mozMovementX","mozMovementY","mozOpaque","mozOrientation","mozPaintCount","mozPaintedFrames","mozParsedFrames","mozPay","mozPointerLockElement","mozPresentedFrames","mozPreservesPitch","mozPressure","mozPrintCallback","mozRTCIceCandidate","mozRTCPeerConnection","mozRTCSessionDescription","mozRemove","mozRequestAnimationFrame","mozRequestFullScreen","mozRequestPointerLock","mozSetDataAt","mozSetImageElement","mozSourceNode","mozSrcObject","mozSystem","mozTCPSocket","mozTextStyle","mozTypesAt","mozUnlockOrientation","mozUserCancelled","mozVisibilityState","ms","msAnimation","msAnimationDelay","msAnimationDirection","msAnimationDuration","msAnimationFillMode","msAnimationIterationCount","msAnimationName","msAnimationPlayState","msAnimationStartTime","msAnimationTimingFunction","msBackfaceVisibility","msBlockProgression","msCSSOMElementFloatMetrics","msCaching","msCachingEnabled","msCancelRequestAnimationFrame","msCapsLockWarningOff","msClearImmediate","msClose","msContentZoomChaining","msContentZoomFactor","msContentZoomLimit","msContentZoomLimitMax","msContentZoomLimitMin","msContentZoomSnap","msContentZoomSnapPoints","msContentZoomSnapType","msContentZooming","msConvertURL","msCrypto","msDoNotTrack","msElementsFromPoint","msElementsFromRect","msExitFullscreen","msExtendedCode","msFillRule","msFirstPaint","msFlex","msFlexAlign","msFlexDirection","msFlexFlow","msFlexItemAlign","msFlexLinePack","msFlexNegative","msFlexOrder","msFlexPack","msFlexPositive","msFlexPreferredSize","msFlexWrap","msFlowFrom","msFlowInto","msFontFeatureSettings","msFullscreenElement","msFullscreenEnabled","msGetInputContext","msGetRegionContent","msGetUntransformedBounds","msGraphicsTrustStatus","msGridColumn","msGridColumnAlign","msGridColumnSpan","msGridColumns","msGridRow","msGridRowAlign","msGridRowSpan","msGridRows","msHidden","msHighContrastAdjust","msHyphenateLimitChars","msHyphenateLimitLines","msHyphenateLimitZone","msHyphens","msImageSmoothingEnabled","msImeAlign","msIndexedDB","msInterpolationMode","msIsStaticHTML","msKeySystem","msKeys","msLaunchUri","msLockOrientation","msManipulationViewsEnabled","msMatchMedia","msMatchesSelector","msMaxTouchPoints","msOrientation","msOverflowStyle","msPerspective","msPerspectiveOrigin","msPlayToDisabled","msPlayToPreferredSourceUri","msPlayToPrimary","msPointerEnabled","msRegionOverflow","msReleasePointerCapture","msRequestAnimationFrame","msRequestFullscreen","msSaveBlob","msSaveOrOpenBlob","msScrollChaining","msScrollLimit","msScrollLimitXMax","msScrollLimitXMin","msScrollLimitYMax","msScrollLimitYMin","msScrollRails","msScrollSnapPointsX","msScrollSnapPointsY","msScrollSnapType","msScrollSnapX","msScrollSnapY","msScrollTranslation","msSetImmediate","msSetMediaKeys","msSetPointerCapture","msTextCombineHorizontal","msTextSizeAdjust","msToBlob","msTouchAction","msTouchSelect","msTraceAsyncCallbackCompleted","msTraceAsyncCallbackStarting","msTraceAsyncOperationCompleted","msTraceAsyncOperationStarting","msTransform","msTransformOrigin","msTransformStyle","msTransition","msTransitionDelay","msTransitionDuration","msTransitionProperty","msTransitionTimingFunction","msUnlockOrientation","msUpdateAsyncCallbackRelation","msUserSelect","msVisibilityState","msWrapFlow","msWrapMargin","msWrapThrough","msWriteProfilerMark","msZoom","msZoomTo","mt","mul","multiEntry","multiSelectionObj","multiline","multiple","multiply","multiplySelf","multisample","multisampled","mutableFile","muted","n","nacl_arch","name","nameList","nameProp","namedItem","namedRecordset","names","namespaceURI","namespaces","nativeApplication","nativeMap","nativeObjectCreate","nativeSet","nativeWeakMap","naturalHeight","naturalWidth","navigate","navigation","navigationMode","navigationPreload","navigationStart","navigationType","navigator","near","nearestViewportElement","negative","negotiated","netscape","networkState","networkStatus","newScale","newState","newTranslate","newURL","newValue","newValueSpecifiedUnits","newVersion","newhome","next","nextElementSibling","nextHopProtocol","nextNode","nextPage","nextSibling","nickname","noHref","noModule","noResize","noShade","noValidate","noWrap","node","nodeName","nodeType","nodeValue","nonce","normDepthBufferFromNormView","normalize","normalizedPathSegList","normandyAddonStudy","notRestoredReasons","notationName","notations","note","noteGrainOn","noteOff","noteOn","notifications","notify","now","npnNegotiatedProtocol","numOctaves","number","numberOfChannels","numberOfFrames","numberOfInputs","numberOfItems","numberOfOutputs","numberValue","oMatchesSelector","object","object-fit","object-position","objectFit","objectPosition","objectStore","objectStoreNames","objectType","observe","observedAttributes","occlusionQuerySet","of","off","offscreenBuffering","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","offsetAnchor","offsetDistance","offsetHeight","offsetLeft","offsetNode","offsetParent","offsetPath","offsetPosition","offsetRotate","offsetTop","offsetWidth","offsetX","offsetY","ok","oldState","oldURL","oldValue","oldVersion","olderShadowRoot","omnibox","on","onActivated","onAdded","onAttached","onBoundsChanged","onBrowserUpdateAvailable","onClicked","onCommitFiberRoot","onCommitFiberUnmount","onConnect","onConnectExternal","onConnectNative","onCreated","onDetached","onDisabled","onEnabled","onFocusChanged","onHighlighted","onInstalled","onLine","onMessage","onMessageExternal","onMoved","onPerformanceWarning","onPostCommitFiberRoot","onRemoved","onReplaced","onRestartRequired","onStartup","onSubmittedWorkDone","onSuspend","onSuspendCanceled","onUninstalled","onUpdateAvailable","onUpdated","onUserScriptConnect","onUserScriptMessage","onUserSettingsChanged","onZoomChange","onabort","onabsolutedeviceorientation","onactivate","onactive","onaddsourcebuffer","onaddstream","onaddtrack","onafterprint","onafterscriptexecute","onafterupdate","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onappinstalled","onaudioend","onaudioprocess","onaudiostart","onautocomplete","onautocompleteerror","onauxclick","onbeforeactivate","onbeforecopy","onbeforecut","onbeforedeactivate","onbeforeeditfocus","onbeforeinput","onbeforeinstallprompt","onbeforematch","onbeforepaste","onbeforeprint","onbeforescriptexecute","onbeforetoggle","onbeforeunload","onbeforeupdate","onbeforexrselect","onbegin","onblocked","onblur","onbounce","onboundary","onbufferedamountlow","oncached","oncancel","oncandidatewindowhide","oncandidatewindowshow","oncandidatewindowupdate","oncanplay","oncanplaythrough","oncapturehandlechange","once","oncellchange","onchange","oncharacterboundsupdate","oncharacteristicvaluechanged","onchargingchange","onchargingtimechange","onchecking","onclick","onclose","onclosing","oncommand","oncompassneedscalibration","oncomplete","oncompositionend","oncompositionstart","onconnect","onconnecting","onconnectionavailable","onconnectionstatechange","oncontentvisibilityautostatechange","oncontextlost","oncontextmenu","oncontextrestored","oncontrollerchange","oncontrolselect","oncopy","oncuechange","oncurrententrychange","oncurrentscreenchange","oncut","ondataavailable","ondatachannel","ondatasetchanged","ondatasetcomplete","ondblclick","ondeactivate","ondequeue","ondevicechange","ondevicelight","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute","ondeviceproximity","ondischargingtimechange","ondisconnect","ondisplay","ondispose","ondownloading","ondownloadprogress","ondrag","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onencrypted","onend","onended","onenter","onenterpictureinpicture","onerror","onerrorupdate","onexit","onfencedtreeclick","onfilterchange","onfinish","onfocus","onfocusin","onfocusout","onformdata","onfreeze","onfullscreenchange","onfullscreenerror","ongamepadconnected","ongamepaddisconnected","ongatheringstatechange","ongattserverdisconnected","ongeometrychange","ongesturechange","ongestureend","ongesturestart","ongotpointercapture","onhashchange","onhelp","onicecandidate","onicecandidateerror","oniceconnectionstatechange","onicegatheringstatechange","oninactive","oninput","oninputreport","oninputsourceschange","oninvalid","onkeydown","onkeypress","onkeystatuseschange","onkeyup","onlanguagechange","onlayoutcomplete","onleavepictureinpicture","onlevelchange","onload","onloadT","onloadeddata","onloadedmetadata","onloadend","onloading","onloadingdone","onloadingerror","onloadstart","onlosecapture","onlostpointercapture","only","onmanagedconfigurationchange","onmark","onmessage","onmessageerror","onmidimessage","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onmove","onmoveend","onmovestart","onmozfullscreenchange","onmozfullscreenerror","onmozorientationchange","onmozpointerlockchange","onmozpointerlockerror","onmscontentzoom","onmsfullscreenchange","onmsfullscreenerror","onmsgesturechange","onmsgesturedoubletap","onmsgestureend","onmsgesturehold","onmsgesturestart","onmsgesturetap","onmsgotpointercapture","onmsinertiastart","onmslostpointercapture","onmsmanipulationstatechanged","onmsneedkey","onmsorientationchange","onmspointercancel","onmspointerdown","onmspointerenter","onmspointerhover","onmspointerleave","onmspointermove","onmspointerout","onmspointerover","onmspointerup","onmssitemodejumplistitemremoved","onmsthumbnailclick","onmute","onnavigate","onnavigateerror","onnavigatesuccess","onnegotiationneeded","onnomatch","onnoupdate","onobsolete","onoffline","ononline","onopen","onorientationchange","onpagechange","onpagehide","onpagereveal","onpageshow","onpageswap","onpaste","onpause","onpayerdetailchange","onpaymentmethodchange","onplay","onplaying","onpluginstreamstart","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointerlockchange","onpointerlockerror","onpointermove","onpointerout","onpointerover","onpointerrawupdate","onpointerup","onpopstate","onprerenderingchange","onprioritychange","onprocessorerror","onprogress","onpropertychange","onratechange","onreading","onreadystatechange","onreflectionchange","onrejectionhandled","onrelease","onremove","onremovesourcebuffer","onremovestream","onremovetrack","onrepeat","onreset","onresize","onresizeend","onresizestart","onresourcetimingbufferfull","onresult","onresume","onrowenter","onrowexit","onrowsdelete","onrowsinserted","onscreenschange","onscroll","onscrollend","onscrollsnapchange","onscrollsnapchanging","onsearch","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectedcandidatepairchange","onselectend","onselectionchange","onselectstart","onshippingaddresschange","onshippingoptionchange","onshow","onsignalingstatechange","onsinkchange","onslotchange","onsoundend","onsoundstart","onsourceclose","onsourceclosed","onsourceended","onsourceopen","onspeechend","onspeechstart","onsqueeze","onsqueezeend","onsqueezestart","onstalled","onstart","onstatechange","onstop","onstorage","onstoragecommit","onsubmit","onsuccess","onsuspend","onterminate","ontextformatupdate","ontextinput","ontextupdate","ontimeout","ontimeupdate","ontoggle","ontonechange","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontrack","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onuncapturederror","onunhandledrejection","onunload","onunmute","onupdate","onupdateend","onupdatefound","onupdateready","onupdatestart","onupgradeneeded","onuserproximity","onversionchange","onvisibilitychange","onvoiceschanged","onvolumechange","onvrdisplayactivate","onvrdisplayconnect","onvrdisplaydeactivate","onvrdisplaydisconnect","onvrdisplaypresentchange","onwaiting","onwaitingforkey","onwarning","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkitcurrentplaybacktargetiswirelesschanged","onwebkitfullscreenchange","onwebkitfullscreenerror","onwebkitkeyadded","onwebkitkeyerror","onwebkitkeymessage","onwebkitneedkey","onwebkitorientationchange","onwebkitplaybacktargetavailabilitychanged","onwebkitpointerlockchange","onwebkitpointerlockerror","onwebkitresourcetimingbufferfull","onwebkittransitionend","onwheel","onzoom","onzoomlevelchange","opacity","open","openCursor","openDatabase","openKeyCursor","openOptionsPage","openOrClosedShadowRoot","openPopup","opened","opener","opera","operation","operationType","operator","opr","optimum","options","or","order","orderX","orderY","ordered","org","organization","orient","orientAngle","orientType","orientation","orientationX","orientationY","orientationZ","origin","originAgentCluster","originalPolicy","originalTarget","ornaments","orphans","os","oscpu","outerHTML","outerHeight","outerText","outerWidth","outgoingHighWaterMark","outgoingMaxAge","outline","outline-color","outline-offset","outline-style","outline-width","outlineColor","outlineOffset","outlineStyle","outlineWidth","outputBuffer","outputChannelCount","outputLanguage","outputLatency","outputs","overallProgress","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overflowAnchor","overflowBlock","overflowClipMargin","overflowInline","overflowWrap","overflowX","overflowY","overlaysContent","overrideColors","overrideMimeType","oversample","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","overscrollBehavior","overscrollBehaviorBlock","overscrollBehaviorInline","overscrollBehaviorX","overscrollBehaviorY","ownKeys","ownerDocument","ownerElement","ownerNode","ownerRule","ownerSVGElement","owningElement","p1","p2","p3","p4","packetSize","packets","pad","padEnd","padStart","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","paddingBlock","paddingBlockEnd","paddingBlockStart","paddingBottom","paddingInline","paddingInlineEnd","paddingInlineStart","paddingLeft","paddingRight","paddingTop","page","page-break-after","page-break-before","page-break-inside","page-orientation","pageAction","pageBreakAfter","pageBreakBefore","pageBreakInside","pageCount","pageLeft","pageOrientation","pageT","pageTop","pageX","pageXOffset","pageY","pageYOffset","pages","paint-order","paintOrder","paintRequests","paintTime","paintType","paintWorklet","palette","pan","panningModel","parameterData","parameters","parent","parentElement","parentNode","parentRule","parentStyleSheet","parentTextEdit","parentWindow","parse","parseAll","parseCreationOptionsFromJSON","parseFloat","parseFromString","parseHTMLUnsafe","parseInt","parseRequestOptionsFromJSON","part","participants","passOp","passive","password","pasteHTML","path","pathLength","pathSegList","pathSegType","pathSegTypeAsLetter","pathname","pattern","patternContentUnits","patternMismatch","patternTransform","patternUnits","pause","pauseAnimations","pauseDepthSensing","pauseDuration","pauseOnExit","pauseProfilers","pauseTransformFeedback","paused","payerEmail","payerName","payerPhone","paymentManager","pc","pdfViewerEnabled","peerIdentity","pending","pendingLocalDescription","pendingRemoteDescription","percent","performance","periodicSync","permission","permissionState","permissions","persist","persisted","persistentDeviceId","personalbar","perspective","perspective-origin","perspectiveOrigin","phone","phoneticFamilyName","phoneticGivenName","photo","phrase","phrases","pictureInPictureChild","pictureInPictureElement","pictureInPictureEnabled","pictureInPictureWindow","ping","pipeThrough","pipeTo","pitch","pixelBottom","pixelDepth","pixelFormat","pixelHeight","pixelLeft","pixelRight","pixelStorei","pixelTop","pixelUnitToMillimeterX","pixelUnitToMillimeterY","pixelWidth","pkcs11","place-content","place-items","place-self","placeContent","placeItems","placeSelf","placeholder","platform","platformVersion","platforms","play","playEffect","playState","playbackRate","playbackState","playbackTime","played","playoutDelayHint","playsInline","plugins","pluginspage","pname","pointer-events","pointerBeforeReferenceNode","pointerEnabled","pointerEvents","pointerId","pointerLockElement","pointerType","points","pointsAtX","pointsAtY","pointsAtZ","polygonOffset","pop","popDebugGroup","popErrorScope","popover","popoverTargetAction","popoverTargetElement","populateMatrix","popupWindowFeatures","popupWindowName","popupWindowURI","port","port1","port2","ports","posBottom","posHeight","posLeft","posRight","posTop","posWidth","pose","position","position-anchor","position-area","positionAlign","positionAnchor","positionArea","positionTry","positionTryFallbacks","positionVisibility","positionX","positionY","positionZ","postError","postMessage","postTask","postalCode","poster","postscriptName","pow","powerEfficient","powerOff","powerPreference","preMultiplySelf","precision","preferredReflectionFormat","preferredStyleSheetSet","preferredStylesheetSet","prefix","preload","premultipliedAlpha","prepend","prerendering","presentation","presentationArea","presentationStyle","presentationTime","preserveAlpha","preserveAspectRatio","preserveAspectRatioString","preservesPitch","pressed","pressure","prevValue","preventDefault","preventExtensions","preventSilentAccess","previousElementSibling","previousNode","previousPage","previousPriority","previousRect","previousScale","previousSibling","previousTranslate","primaries","primaryKey","primaryLightDirection","primaryLightIntensity","primitive","primitiveType","primitiveUnits","principals","print","print-color-adjust","printColorAdjust","printPreview","priority","privacy","privateKey","privateToken","probablySupportsContext","probeSpace","process","processIceMessage","processLocally","processingEnd","processingStart","processorOptions","product","productId","productName","productSub","profile","profileEnd","profiles","projectionMatrix","promise","promising","prompt","properties","propertyIsEnumerable","propertyName","protectedAudience","protocol","protocolLong","prototype","provider","proxy","pseudoClass","pseudoElement","pt","publicId","publicKey","published","pulse","push","pushDebugGroup","pushErrorScope","pushManager","pushNotification","pushState","put","putImageData","px","quadraticCurveTo","qualifier","quaternion","query","queryCommandEnabled","queryCommandIndeterm","queryCommandState","queryCommandSupported","queryCommandText","queryCommandValue","queryFeatureSupport","queryLocalFonts","queryPermission","querySelector","querySelectorAll","querySet","queue","queueMicrotask","quota","quote","quotes","r","r1","r2","race","rad","radiogroup","radius","radiusX","radiusY","random","randomUUID","range","rangeCount","rangeEnd","rangeMax","rangeMin","rangeOffset","rangeOverflow","rangeParent","rangeStart","rangeUnderflow","rate","ratio","raw","rawId","rawJSON","rawValueToMeters","rcap","rch","read","readAsArrayBuffer","readAsBinaryString","readAsBlob","readAsDataURL","readAsText","readBuffer","readEntries","readOnly","readPixels","readReportRequested","readText","readValue","readable","ready","readyState","reason","reasons","reboot","receiveFeatureReport","receivedAlert","receiver","receivers","recipient","recommendedViewportScale","reconnect","recordNumber","recordsAvailable","recordset","rect","red","redEyeReduction","redirect","redirectCount","redirectEnd","redirectStart","redirected","reduce","reduceRight","reduction","refDistance","refX","refY","referenceNode","referenceSpace","referrer","referrerPolicy","refresh","region","regionAnchorX","regionAnchorY","regionId","regions","register","registerContentHandler","registerElement","registerInternalModuleStart","registerInternalModuleStop","registerProperty","registerProtocolHandler","reject","rel","relList","relatedAddress","relatedNode","relatedPort","relatedTarget","relayProtocol","release","releaseCapture","releaseEvents","releaseInterface","releaseLock","releasePointerCapture","releaseShaderCompiler","released","reliability","reliable","reliableWrite","reload","rem","remainingSpace","remote","remoteDescription","remove","removeAllRanges","removeAttribute","removeAttributeNS","removeAttributeNode","removeBehavior","removeChild","removeCue","removeEntry","removeEventListener","removeFilter","removeImport","removeItem","removeListener","removeNamedItem","removeNamedItemNS","removeNode","removeParameter","removeProperty","removeRange","removeRegion","removeRule","removeSiteSpecificTrackingException","removeSourceBuffer","removeStream","removeTrack","removeVariable","removeWakeLockListener","removeWebWideTrackingException","removed","removedNodes","renderBlockingStatus","renderHeight","renderStart","renderState","renderTime","renderWidth","renderbufferStorage","renderbufferStorageMultisample","renderedBuffer","rendererInterfaces","renderers","renderingMode","renotify","repeat","repetitionCount","replace","replaceAdjacentText","replaceAll","replaceChild","replaceChildren","replaceData","replaceId","replaceItem","replaceNode","replaceState","replaceSync","replaceTrack","replaceWholeText","replaceWith","reportError","reportEvent","reportId","reportOnly","reportValidity","request","requestAdapter","requestAdapterInfo","requestAnimationFrame","requestAutocomplete","requestClose","requestData","requestDevice","requestFrame","requestFullscreen","requestHitTestSource","requestHitTestSourceForTransientInput","requestId","requestIdleCallback","requestLightProbe","requestMIDIAccess","requestMediaKeySystemAccess","requestPermission","requestPictureInPicture","requestPointerLock","requestPort","requestPresent","requestPresenter","requestReferenceSpace","requestSession","requestStart","requestStorageAccess","requestStorageAccessFor","requestSubmit","requestTime","requestUpdateCheck","requestVideoFrameCallback","requestViewportScale","requestWindow","requested","requestingWindow","requireInteraction","required","requiredExtensions","requiredFeatures","requiredLimits","reset","resetLatency","resetPose","resetTransform","resetZoomLevel","resizable","resize","resizeBy","resizeTo","resolve","resolveQuerySet","resolveTarget","resource","respond","respondWithNewView","response","responseBody","responseEnd","responseReady","responseStart","responseStatus","responseText","responseType","responseURL","responseXML","restart","restartAfterDelay","restartIce","restore","restrictTo","result","resultIndex","resultType","results","resume","resumeDepthSensing","resumeProfilers","resumeTransformFeedback","retry","returnType","returnValue","rev","reverse","reversed","revocable","revokeObjectURL","rex","rgbColor","ric","right","rightContext","rightDegrees","rightMargin","rightProjectionMatrix","rightViewMatrix","rlh","role","rolloffFactor","root","rootBounds","rootElement","rootMargin","rotate","rotateAxisAngle","rotateAxisAngleSelf","rotateFromVector","rotateFromVectorSelf","rotateSelf","rotation","rotationAngle","rotationRate","round","roundRect","row-gap","rowGap","rowIndex","rowSpan","rows","rowsPerImage","rtcpTransport","rtt","ruby-align","ruby-position","rubyAlign","rubyOverhang","rubyPosition","rules","run","runAdAuction","runtime","runtimeStyle","rx","ry","s","safari","sameDocument","sample","sampleCount","sampleCoverage","sampleInterval","sampleRate","sampleType","sampler","samplerParameterf","samplerParameteri","sandbox","save","saveAsPDF","saveData","scale","scale3d","scale3dSelf","scaleNonUniform","scaleNonUniformSelf","scaleSelf","scheduler","scheduling","scheme","scissor","scope","scopeName","scoped","screen","screenBrightness","screenEnabled","screenLeft","screenPixelToMillimeterX","screenPixelToMillimeterY","screenState","screenTop","screenX","screenY","screens","scriptURL","scripting","scripts","scroll","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollAmount","scrollBehavior","scrollBy","scrollByLines","scrollByPages","scrollDelay","scrollHeight","scrollIntoView","scrollIntoViewIfNeeded","scrollLeft","scrollLeftMax","scrollMargin","scrollMarginBlock","scrollMarginBlockEnd","scrollMarginBlockStart","scrollMarginBottom","scrollMarginInline","scrollMarginInlineEnd","scrollMarginInlineStart","scrollMarginLeft","scrollMarginRight","scrollMarginTop","scrollMaxX","scrollMaxY","scrollPadding","scrollPaddingBlock","scrollPaddingBlockEnd","scrollPaddingBlockStart","scrollPaddingBottom","scrollPaddingInline","scrollPaddingInlineEnd","scrollPaddingInlineStart","scrollPaddingLeft","scrollPaddingRight","scrollPaddingTop","scrollRestoration","scrollSnapAlign","scrollSnapStop","scrollSnapType","scrollTo","scrollTop","scrollTopMax","scrollWidth","scrollX","scrollY","scrollbar-color","scrollbar-gutter","scrollbar-width","scrollbar3dLightColor","scrollbarArrowColor","scrollbarBaseColor","scrollbarColor","scrollbarDarkShadowColor","scrollbarFaceColor","scrollbarGutter","scrollbarHighlightColor","scrollbarShadowColor","scrollbarTrackColor","scrollbarWidth","scrollbars","scrolling","scrollingElement","sctp","sctpCauseCode","sdp","sdpLineNumber","sdpMLineIndex","sdpMid","seal","search","searchBox","searchBoxJavaBridge_","searchParams","sectionRowIndex","secureConnectionStart","securePaymentConfirmationAvailability","security","seed","seek","seekToNextFrame","seekable","seeking","segments","select","selectAllChildren","selectAlternateInterface","selectAudioOutput","selectConfiguration","selectNode","selectNodeContents","selectNodes","selectSingleNode","selectSubString","selectURL","selected","selectedIndex","selectedOptions","selectedStyleSheetSet","selectedStylesheetSet","selectedTrack","selection","selectionDirection","selectionEnd","selectionStart","selector","selectorText","self","send","sendAsBinary","sendBeacon","sendFeatureReport","sendMessage","sendNativeMessage","sendOrder","sendReport","sender","sentAlert","sentTimestamp","separator","serial","serialNumber","serializable","serializeToString","serverTiming","service","serviceWorker","session","sessionId","sessionStorage","sessions","set","setActionHandler","setActive","setAlpha","setAppBadge","setAttribute","setAttributeNS","setAttributeNode","setAttributeNodeNS","setAttributionReporting","setBadgeBackgroundColor","setBadgeText","setBadgeTextColor","setBaseAndExtent","setBigInt64","setBigUint64","setBindGroup","setBingCurrentSearchDefault","setBlendConstant","setCameraActive","setCapture","setCaptureHandleConfig","setCodecPreferences","setColor","setCompositeOperation","setConfiguration","setConsumer","setCurrentTime","setCustomValidity","setData","setDate","setDragImage","setEnabled","setEnd","setEndAfter","setEndBefore","setEndPoint","setExpires","setFillColor","setFilterRes","setFloat16","setFloat32","setFloat64","setFloatValue","setFocusBehavior","setFormValue","setFromBase64","setFromHex","setFullYear","setHTMLUnsafe","setHeaderExtensionsToNegotiate","setHeaderValue","setHours","setIcon","setIdentityProvider","setImmediate","setIndexBuffer","setInt16","setInt32","setInt8","setInterval","setItem","setKeyframes","setLineCap","setLineDash","setLineJoin","setLineWidth","setLiveSeekableRange","setLocalDescription","setMatrix","setMatrixValue","setMediaKeys","setMicrophoneActive","setMilliseconds","setMinutes","setMiterLimit","setMonth","setNamedItem","setNamedItemNS","setNonUserCodeExceptions","setOrientToAngle","setOrientToAuto","setOrientation","setOverrideHistoryNavigationMode","setPaint","setParameter","setParameters","setPathData","setPeriodicWave","setPipeline","setPointerCapture","setPopup","setPosition","setPositionState","setPreference","setPriority","setPrivateToken","setProperty","setPrototypeOf","setRGBColor","setRGBColorICCColor","setRadius","setRangeText","setRemoteDescription","setReportEventDataForAutomaticBeacons","setRequestHeader","setResizable","setResourceTimingBufferSize","setRotate","setScale","setScissorRect","setSeconds","setSelectionRange","setServerCertificate","setShadow","setSharedStorageContext","setSignals","setSinkId","setSkewX","setSkewY","setStart","setStartAfter","setStartBefore","setStatus","setStdDeviation","setStencilReference","setStreams","setStrictMode","setStringValue","setStrokeColor","setSuggestResult","setTargetAtTime","setTargetValueAtTime","setTime","setTimeout","setTitle","setTransform","setTranslate","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setUint16","setUint32","setUint8","setUninstallURL","setUpdateUrlData","setUri","setValidity","setValueAtTime","setValueCurveAtTime","setVariable","setVelocity","setVersion","setVertexBuffer","setViewport","setYear","setZoom","setZoomSettings","settingName","settingValue","sex","shaderLocation","shaderSource","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","shadowRoot","shadowRootClonable","shadowRootDelegatesFocus","shadowRootMode","shadowRootSerializable","shape","shape-image-threshold","shape-margin","shape-outside","shape-rendering","shapeImageThreshold","shapeMargin","shapeOutside","shapeRendering","share","sharedContext","sharedStorage","sharedStorageWritable","sheet","shift","shiftKey","shiftLeft","shippingAddress","shippingOption","shippingType","show","showDirectoryPicker","showHelp","showModal","showModalDialog","showModelessDialog","showNotification","showOpenFilePicker","showPicker","showPopover","showSaveFilePicker","sidebar","sidebarAction","sign","signal","signalAllAcceptedCredentials","signalCurrentUserDetails","signalUnknownCredential","signalingState","signature","silent","sin","singleNodeValue","sinh","sinkId","sittingToStandingTransform","size","sizeAdjust","sizeToContent","sizeX","sizeZ","sizes","skewX","skewXSelf","skewY","skewYSelf","skipTransition","skipped","slice","slope","slot","slotAssignment","small","smil","smooth","smoothingTimeConstant","snapTargetBlock","snapTargetInline","snapToLines","snapshotItem","snapshotLength","some","sort","sortingCode","source","sourceBuffer","sourceBuffers","sourceCapabilities","sourceCharPosition","sourceElement","sourceFile","sourceFunctionName","sourceIndex","sourceLanguage","sourceMap","sourceURL","sources","spacing","span","speak","speakAs","speaking","species","specified","specularConstant","specularExponent","speechSynthesis","speed","speedOfSound","spellcheck","sphericalHarmonicsCoefficients","splice","split","splitText","spreadMethod","sqrt","src","srcElement","srcFactor","srcFilter","srcObject","srcUrn","srcdoc","srclang","srcset","stack","stackTraceLimit","stacktrace","stageParameters","standalone","standby","start","startContainer","startE","startIce","startLoadTime","startMessages","startNotifications","startOffset","startProfiling","startRendering","startShark","startTime","startViewTransition","startsWith","state","states","stats","status","statusCode","statusMessage","statusText","statusbar","stdDeviationX","stdDeviationY","stencilBack","stencilClearValue","stencilFront","stencilFunc","stencilFuncSeparate","stencilLoadOp","stencilMask","stencilMaskSeparate","stencilOp","stencilOpSeparate","stencilReadMask","stencilReadOnly","stencilStoreOp","stencilWriteMask","step","stepDown","stepMismatch","stepMode","stepUp","sticky","stitchTiles","stop","stop-color","stop-opacity","stopColor","stopImmediatePropagation","stopNotifications","stopOpacity","stopProfiling","stopPropagation","stopShark","stopped","storage","storageArea","storageBuckets","storageName","storageStatus","storageTexture","store","storeOp","storeSiteSpecificTrackingException","storeWebWideTrackingException","stpVersion","stream","streamErrorCode","streams","stretch","strike","string","stringValue","stringify","stripIndexFormat","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeRect","strokeStyle","strokeText","strokeWidth","structuredClone","style","styleAndLayoutStart","styleFloat","styleMap","styleMedia","styleSheet","styleSheetSets","styleSheets","styleset","stylistic","sub","subarray","subgroupMaxSize","subgroupMinSize","subject","submit","submitFrame","submitter","subscribe","substr","substring","substringData","subtle","subtree","suffix","suffixes","sumPrecise","summarize","summarizeStreaming","summary","sup","supported","supportedContentEncodings","supportedEntryTypes","supportedValuesOf","supports","supportsFiber","supportsSession","supportsText","suppressed","surfaceScale","surroundContents","suspend","suspendRedraw","svb","svh","svi","svmax","svmin","svw","swapCache","swapNode","swash","sweepFlag","switchMap","symbols","symmetricDifference","sync","syntax","sysexEnabled","system","systemCode","systemId","systemLanguage","systemXDPI","systemYDPI","tBodies","tFoot","tHead","tab","tab-size","tabId","tabIds","tabIndex","tabSize","table","table-layout","tableLayout","tableValues","tabs","tag","tagName","tagUrn","tags","taintEnabled","take","takePhoto","takeRecords","takeUntil","tan","tangentialPressure","tanh","target","targetAddressSpace","targetElement","targetLanguage","targetRayMode","targetRaySpace","targetTouches","targetURL","targetX","targetY","targets","tcpType","tee","tel","telemetry","terminate","test","texImage2D","texImage3D","texParameterf","texParameteri","texStorage2D","texStorage3D","texSubImage2D","texSubImage3D","text","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","textAlign","textAlignLast","textAnchor","textAutospace","textBaseline","textCombineUpright","textContent","textDecoration","textDecorationBlink","textDecorationColor","textDecorationInset","textDecorationLine","textDecorationLineThrough","textDecorationNone","textDecorationOverline","textDecorationSkipInk","textDecorationStyle","textDecorationThickness","textDecorationUnderline","textEmphasis","textEmphasisColor","textEmphasisPosition","textEmphasisStyle","textIndent","textJustify","textJustifyTrim","textKashida","textKashidaSpace","textLength","textOrientation","textOverflow","textRendering","textShadow","textTracks","textTransform","textUnderlineOffset","textUnderlinePosition","textWrap","textWrapMode","textWrapStyle","texture","theme","then","threadId","threshold","thresholds","throwIfAborted","tiltX","tiltY","time","timeEnd","timeLog","timeOrigin","timeRemaining","timeStamp","timecode","timeline","timelineTime","timeout","timestamp","timestampOffset","timestampWrites","timing","title","titlebarAreaRect","tlsChannelId","to","toArray","toBase64","toBlob","toDataURL","toDateString","toElement","toExponential","toFixed","toFloat32Array","toFloat64Array","toGMTString","toHex","toISOString","toJSON","toLocaleDateString","toLocaleFormat","toLocaleLowerCase","toLocaleString","toLocaleTimeString","toLocaleUpperCase","toLowerCase","toMatrix","toMethod","toPrecision","toPrimitive","toReversed","toSdp","toSorted","toSource","toSpliced","toStaticHTML","toString","toStringTag","toSum","toTemporalInstant","toTimeString","toUTCString","toUpperCase","toWellFormed","toggle","toggleAttribute","toggleLongPressEnabled","togglePopover","toggleReaderMode","token","tone","toneBuffer","tooLong","tooShort","toolbar","top","topMargin","topSites","topology","total","totalFrameDelay","totalFrames","totalFramesDuration","totalVideoFrames","touch-action","touchAction","touched","touches","trace","track","trackVisibility","trackedAnchors","tracks","tran","transaction","transactions","transceiver","transfer","transferControlToOffscreen","transferFromImageBitmap","transferImageBitmap","transferIn","transferOut","transferSize","transferToFixedLength","transferToImageBitmap","transform","transform-box","transform-origin","transform-style","transformBox","transformFeedbackVaryings","transformOrigin","transformPoint","transformString","transformStyle","transformToDocument","transformToFragment","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","transitionBehavior","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","translate","translateSelf","translateStreaming","translationX","translationY","transport","traverseTo","trim","trimEnd","trimLeft","trimRight","trimStart","trueSpeed","trunc","truncate","trustedTypes","try","turn","twist","type","typeDetail","typeMismatch","typeMustMatch","types","u2f","ubound","uint16","uint32","uint8","uint8Clamped","unadjustedMovement","unclippedDepth","unconfigure","undefined","underlineStyle","underlineThickness","unescape","uneval","ungroup","unicode","unicode-bidi","unicodeBidi","unicodeRange","unicodeSets","uniform1f","uniform1fv","uniform1i","uniform1iv","uniform1ui","uniform1uiv","uniform2f","uniform2fv","uniform2i","uniform2iv","uniform2ui","uniform2uiv","uniform3f","uniform3fv","uniform3i","uniform3iv","uniform3ui","uniform3uiv","uniform4f","uniform4fv","uniform4i","uniform4iv","uniform4ui","uniform4uiv","uniformBlockBinding","uniformMatrix2fv","uniformMatrix2x3fv","uniformMatrix2x4fv","uniformMatrix3fv","uniformMatrix3x2fv","uniformMatrix3x4fv","uniformMatrix4fv","uniformMatrix4x2fv","uniformMatrix4x3fv","uninstallSelf","union","unique","uniqueID","uniqueNumber","unit","unitType","units","unloadEventEnd","unloadEventStart","unlock","unmap","unmount","unobserve","unpackColorSpace","unpause","unpauseAnimations","unreadCount","unregister","unregisterContentHandler","unregisterProtocolHandler","unscopables","unselectable","unshift","unsubscribe","unsuspendRedraw","unsuspendRedrawAll","unwatch","unwrapKey","upDegrees","upX","upY","upZ","update","updateAdInterestGroups","updateCallbackDone","updateCharacterBounds","updateCommands","updateControlBounds","updateCurrentEntry","updateIce","updateInkTrailStartPoint","updateInterval","updatePlaybackRate","updateRangeEnd","updateRangeStart","updateRenderState","updateSelection","updateSelectionBounds","updateSettings","updateText","updateTiming","updateViaCache","updateWith","updated","updating","upgrade","upload","uploadTotal","uploaded","upper","upperBound","upperOpen","uri","url","urn","urns","usage","usages","usb","usbVersionMajor","usbVersionMinor","usbVersionSubminor","use","useCurrentView","useMap","useProgram","usedSpace","user-select","userActivation","userAgent","userAgentAllowsProtocol","userAgentData","userChoice","userHandle","userHint","userInitiated","userLanguage","userSelect","userState","userVisibleOnly","username","usernameFragment","utterance","uuid","v8BreakIterator","vAlign","vLink","valid","validate","validateProgram","validationMessage","validity","value","valueAsDate","valueAsNumber","valueAsString","valueInSpecifiedUnits","valueMissing","valueOf","valueText","valueType","values","variable","variant","variationSettings","vb","vector-effect","vectorEffect","velocityAngular","velocityExpansion","velocityX","velocityY","vendor","vendorId","vendorSub","verify","version","vertex","vertexAttrib1f","vertexAttrib1fv","vertexAttrib2f","vertexAttrib2fv","vertexAttrib3f","vertexAttrib3fv","vertexAttrib4f","vertexAttrib4fv","vertexAttribDivisor","vertexAttribDivisorANGLE","vertexAttribI4i","vertexAttribI4iv","vertexAttribI4ui","vertexAttribI4uiv","vertexAttribIPointer","vertexAttribPointer","vertical","vertical-align","verticalAlign","verticalOverflow","vh","vi","vibrate","vibrationActuator","videoBitsPerSecond","videoHeight","videoTracks","videoWidth","view","viewBox","viewBoxString","viewDimension","viewFormats","viewTarget","viewTargetString","viewTransition","viewTransitionClass","viewTransitionName","viewport","viewportAnchorX","viewportAnchorY","viewportElement","views","violatedDirective","virtualKeyboard","virtualKeyboardPolicy","visibility","visibilityState","visible","visibleRect","visualViewport","vlinkColor","vmax","vmin","voice","voiceURI","volume","vrml","vspace","vw","w","wait","waitAsync","waitSync","waiting","wake","wakeLock","wand","warmup","warn","wasAlternateProtocolAvailable","wasClean","wasDiscarded","wasFetchedViaSpdy","wasNpnNegotiated","watch","watchAvailability","watchPosition","webNavigation","webRequest","webdriver","webkitAddKey","webkitAlignContent","webkitAlignItems","webkitAlignSelf","webkitAnimation","webkitAnimationDelay","webkitAnimationDirection","webkitAnimationDuration","webkitAnimationFillMode","webkitAnimationIterationCount","webkitAnimationName","webkitAnimationPlayState","webkitAnimationTimingFunction","webkitAppearance","webkitAudioContext","webkitAudioDecodedByteCount","webkitAudioPannerNode","webkitBackfaceVisibility","webkitBackground","webkitBackgroundAttachment","webkitBackgroundClip","webkitBackgroundColor","webkitBackgroundImage","webkitBackgroundOrigin","webkitBackgroundPosition","webkitBackgroundPositionX","webkitBackgroundPositionY","webkitBackgroundRepeat","webkitBackgroundSize","webkitBackingStorePixelRatio","webkitBorderBottomLeftRadius","webkitBorderBottomRightRadius","webkitBorderImage","webkitBorderImageOutset","webkitBorderImageRepeat","webkitBorderImageSlice","webkitBorderImageSource","webkitBorderImageWidth","webkitBorderRadius","webkitBorderTopLeftRadius","webkitBorderTopRightRadius","webkitBoxAlign","webkitBoxDirection","webkitBoxFlex","webkitBoxOrdinalGroup","webkitBoxOrient","webkitBoxPack","webkitBoxShadow","webkitBoxSizing","webkitCancelAnimationFrame","webkitCancelFullScreen","webkitCancelKeyRequest","webkitCancelRequestAnimationFrame","webkitClearResourceTimings","webkitClipPath","webkitClosedCaptionsVisible","webkitConvertPointFromNodeToPage","webkitConvertPointFromPageToNode","webkitCreateShadowRoot","webkitCurrentFullScreenElement","webkitCurrentPlaybackTargetIsWireless","webkitDecodedFrameCount","webkitDirectionInvertedFromDevice","webkitDisplayingFullscreen","webkitDroppedFrameCount","webkitEnterFullScreen","webkitEnterFullscreen","webkitEntries","webkitExitFullScreen","webkitExitFullscreen","webkitExitPointerLock","webkitFilter","webkitFlex","webkitFlexBasis","webkitFlexDirection","webkitFlexFlow","webkitFlexGrow","webkitFlexShrink","webkitFlexWrap","webkitFontFeatureSettings","webkitFullScreenKeyboardInputAllowed","webkitFullscreenElement","webkitFullscreenEnabled","webkitGenerateKeyRequest","webkitGetAsEntry","webkitGetDatabaseNames","webkitGetEntries","webkitGetEntriesByName","webkitGetEntriesByType","webkitGetFlowByName","webkitGetGamepads","webkitGetImageDataHD","webkitGetNamedFlows","webkitGetRegionFlowRanges","webkitGetUserMedia","webkitHasClosedCaptions","webkitHidden","webkitIDBCursor","webkitIDBDatabase","webkitIDBDatabaseError","webkitIDBDatabaseException","webkitIDBFactory","webkitIDBIndex","webkitIDBKeyRange","webkitIDBObjectStore","webkitIDBRequest","webkitIDBTransaction","webkitImageSmoothingEnabled","webkitIndexedDB","webkitInitMessageEvent","webkitIsFullScreen","webkitJustifyContent","webkitKeys","webkitLineClamp","webkitLineDashOffset","webkitLockOrientation","webkitMask","webkitMaskClip","webkitMaskComposite","webkitMaskImage","webkitMaskOrigin","webkitMaskPosition","webkitMaskPositionX","webkitMaskPositionY","webkitMaskRepeat","webkitMaskSize","webkitMatchesSelector","webkitMediaStream","webkitNotifications","webkitOfflineAudioContext","webkitOrder","webkitOrientation","webkitPeerConnection00","webkitPersistentStorage","webkitPerspective","webkitPerspectiveOrigin","webkitPointerLockElement","webkitPostMessage","webkitPreservesPitch","webkitPutImageDataHD","webkitRTCPeerConnection","webkitRegionOverset","webkitRelativePath","webkitRequestAnimationFrame","webkitRequestFileSystem","webkitRequestFullScreen","webkitRequestFullscreen","webkitRequestPointerLock","webkitResolveLocalFileSystemURL","webkitSetMediaKeys","webkitSetResourceTimingBufferSize","webkitShadowRoot","webkitShowPlaybackTargetPicker","webkitSlice","webkitSpeechGrammar","webkitSpeechGrammarList","webkitSpeechRecognition","webkitSpeechRecognitionError","webkitSpeechRecognitionEvent","webkitStorageInfo","webkitSupportsFullscreen","webkitTemporaryStorage","webkitTextFillColor","webkitTextSecurity","webkitTextSizeAdjust","webkitTextStroke","webkitTextStrokeColor","webkitTextStrokeWidth","webkitTransform","webkitTransformOrigin","webkitTransformStyle","webkitTransition","webkitTransitionDelay","webkitTransitionDuration","webkitTransitionProperty","webkitTransitionTimingFunction","webkitURL","webkitUnlockOrientation","webkitUserSelect","webkitVideoDecodedByteCount","webkitVisibilityState","webkitWirelessVideoPlaybackDisabled","webkitdirectory","webkitdropzone","webstore","weight","wgslLanguageFeatures","whatToShow","wheelDelta","wheelDeltaX","wheelDeltaY","when","whenDefined","which","white-space","white-space-collapse","whiteSpace","whiteSpaceCollapse","wholeText","widows","width","will-change","willChange","willValidate","window","windowAttribution","windowControlsOverlay","windowId","windowIds","windows","with","withCredentials","withResolvers","word-break","word-spacing","word-wrap","wordBreak","wordSpacing","wordWrap","workerCacheLookupStart","workerFinalSourceType","workerMatchedSourceType","workerRouterEvaluationStart","workerStart","worklet","wow64","wrap","wrapKey","writable","writableAuxiliaries","write","writeBuffer","writeMask","writeText","writeTexture","writeTimestamp","writeValue","writeValueWithResponse","writeValueWithoutResponse","writeWithoutResponse","writeln","writing-mode","writingMode","writingSuggestions","x","x1","x2","xChannelSelector","xmlEncoding","xmlStandalone","xmlVersion","xmlbase","xmllang","xmlspace","xor","xr","y","y1","y2","yChannelSelector","yandex","yield","z","z-index","zIndex","zoom","zoomAndPan","zoomLevel","zoomRectScreen"];function nR(i){iR.forEach(l);var n=["Symbol","Map","Promise","Proxy","Reflect","Set","WeakMap","WeakSet"],o={},s=typeof global=="object"?global:self;n.forEach(function(p){o[p]=s[p]||function(){}}),["null","true","false","NaN","Infinity","-Infinity","undefined"].forEach(l),[Object,Array,Function,Number,String,Boolean,Error,Math,Date,RegExp,o.Symbol,ArrayBuffer,DataView,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,eval,EvalError,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,isFinite,isNaN,JSON,o.Map,parseFloat,parseInt,o.Promise,o.Proxy,RangeError,ReferenceError,o.Reflect,o.Set,SyntaxError,TypeError,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,URIError,o.WeakMap,o.WeakSet].forEach(function(p){Object.getOwnPropertyNames(p).map(l),p.prototype&&Object.getOwnPropertyNames(p.prototype).map(l)});function l(p){i.add(p)}}function rR(i,n){function o(s){Qs(n,s)}i.walk(new Zi(function(s){s instanceof Zt&&s.quote?o(s.key):s instanceof Ti&&s.quote?o(s.key.name):s instanceof Li&&ra(s.property,o)}))}function ra(i,n){i.walk(new Zi(function(o){return o instanceof Ct?ra(o.tail_node(),n):o instanceof wt?n(o.value):o instanceof It&&(ra(o.consequent,n),ra(o.alternative,n)),!0}))}function oR(i,n){var o=-1,s=new Map,l=n.nth_identifier||Uu;return i=i.transform(new Gn(function(E){E instanceof Kn||E instanceof Xn||E instanceof tr||E instanceof $r||E instanceof Ar?E.key.name=p(E.key.name):E instanceof mr&&(E.property=p(E.property))})),i;function p(E){let $=s.get(E);return $||($=l.get(++o),s.set(E,$)),$}}function BA(i){var n=new Set;return Ki(i,o=>{o instanceof Kn||o instanceof Xn||o instanceof tr||o instanceof $r||o instanceof mr||(o instanceof Zt?typeof o.key=="string"&&Nn(o,vu)&&n.add(o.key):o instanceof Ti?Nn(o,vu)&&n.add(o.key.name):o instanceof ni?Nn(o,vu)&&n.add(o.property):o instanceof Li&&o.property instanceof wt&&Nn(o,vu)&&n.add(o.property.value))}),n}function sR(i,n,o=BA(i)){n=po(n,{builtins:!1,cache:null,debug:!1,keep_quoted:!1,nth_identifier:Uu,only_cache:!1,regex:null,reserved:null,undeclared:!1,only_annotated:!1},!0);var s=n.nth_identifier,l=n.reserved;Array.isArray(l)||(l=[l]);var p=new Set(l);n.builtins||nR(p);var E=-1,$;n.cache?$=n.cache.props:$=new Map;var R=n.only_annotated,M=n.regex&&new RegExp(n.regex),L=n.debug!==!1,y;L&&(y=n.debug===!0?"":n.debug);var N=new Set,P=new Set;$.forEach(k=>P.add(k));var F=!!n.keep_quoted;return i.walk(new Zi(function(k){if(!(k instanceof Kn||k instanceof Xn||k instanceof tr||k instanceof $r||k instanceof mr))if(k instanceof Zt)typeof k.key=="string"&&(!F||!k.quote)&&d(k.key);else if(k instanceof Ti)(!F||!k.quote)&&d(k.key.name);else if(k instanceof ni){var H=!!n.undeclared;if(!H){for(var f=k;f.expression;)f=f.expression;H=!(f.thedef&&f.thedef.undeclared)}H&&(!F||!k.quote)&&d(k.property)}else k instanceof Li?F||ra(k.property,d):k instanceof Qe&&k.expression.print_to_string()=="Object.defineProperty"?ra(k.args[1],d):k instanceof Oe&&k.operator==="in"?ra(k.left,d):k instanceof wt&&Nn(k,am)&&d(k.value)})),i.transform(new Gn(function(k){k instanceof Kn||k instanceof Xn||k instanceof tr||k instanceof $r||k instanceof mr||(k instanceof Zt?typeof k.key=="string"&&(!F||!k.quote)&&(k.key=C(k.key)):k instanceof Ti?(!F||!k.quote)&&(k.computed_key()||(k.key.name=C(k.key.name))):k instanceof ni?(!F||!k.quote)&&(k.property=C(k.property)):!F&&k instanceof Li?k.property=x(k.property):k instanceof Qe&&k.expression.print_to_string()=="Object.defineProperty"?k.args[1]=x(k.args[1]):k instanceof Oe&&k.operator==="in"?k.left=x(k.left):k instanceof wt&&Nn(k,am)&&(LI(k),k.value=C(k.value)))}));function K(k){return P.has(k)||p.has(k)?!1:n.only_cache?$.has(k):!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(k)}function g(k){return R&&!o.has(k)?!1:M&&!M.test(k)?o.has(k):p.has(k)?!1:$.has(k)||N.has(k)}function d(k){K(k)&&N.add(k),g(k)||P.add(k)}function C(k){if(!g(k))return k;var H=$.get(k);if(!H){if(L){var f="_$"+k+"$"+y+"_";K(f)&&(H=f)}if(!H)do H=s.get(++E);while(!K(H));$.set(k,H)}return H}function x(k){return k.transform(new Gn(function(H){if(H instanceof Ct){var f=H.expressions.length-1;H.expressions[f]=x(H.expressions[f])}else H instanceof wt?(LI(H),H.value=C(H.value)):H instanceof It&&(H.consequent=x(H.consequent),H.alternative=x(H.alternative));return H}))}}var aR=typeof Buffer<"u"?i=>Buffer.from(i,"base64").toString():i=>decodeURIComponent(escape(atob(i))),lR=typeof Buffer<"u"?i=>Buffer.from(i).toString("base64"):i=>btoa(unescape(encodeURIComponent(i)));function uR(i){var n=/(?:^|[^.])\/\/# sourceMappingURL=data:application\/json(;[\w=-]*)?;base64,([+/0-9A-Za-z]*=*)\s*$/.exec(i);return n?aR(n[2]):(console.warn("inline source map not found"),null)}function ds(i,n,o){n[i]&&o.forEach(function(s){n[s]&&(typeof n[s]!="object"&&(n[s]={}),i in n[s]||(n[s][i]=n[i]))})}function nv(i){i&&("props"in i?i.props instanceof Map||(i.props=rC(i.props)):i.props=new Map)}function rv(i){return{props:oC(i.props)}}function*cR(i,n,o){n=po(n,{compress:{},ecma:void 0,enclose:!1,ie8:!1,keep_classnames:void 0,keep_fnames:!1,mangle:{},module:!1,nameCache:null,output:null,format:null,parse:{},rename:void 0,safari10:!1,sourceMap:!1,spidermonkey:!1,timings:!1,toplevel:!1,warnings:!1,wrap:!1},!0);var s=n.timings&&{start:Date.now()};if(n.keep_classnames===void 0&&(n.keep_classnames=n.keep_fnames),n.rename===void 0&&(n.rename=n.compress&&n.mangle),n.output&&n.format)throw new Error("Please only specify either output or format option, preferrably format.");n.format=n.format||n.output||{},ds("ecma",n,["parse","compress","format"]),ds("ie8",n,["compress","mangle","format"]),ds("keep_classnames",n,["compress","mangle"]),ds("keep_fnames",n,["compress","mangle"]),ds("module",n,["parse","compress","mangle"]),ds("safari10",n,["mangle","format"]),ds("toplevel",n,["compress","mangle"]),ds("warnings",n,["compress"]);var l;n.mangle&&(n.mangle=po(n.mangle,{cache:n.nameCache&&(n.nameCache.vars||{}),eval:!1,ie8:!1,keep_classnames:!1,keep_fnames:!1,module:!1,nth_identifier:Uu,properties:!1,reserved:[],safari10:!1,toplevel:!1},!0),n.mangle.properties&&(typeof n.mangle.properties!="object"&&(n.mangle.properties={}),n.mangle.properties.keep_quoted&&(l=n.mangle.properties.reserved,Array.isArray(l)||(l=[]),n.mangle.properties.reserved=l),n.nameCache&&!("cache"in n.mangle.properties)&&(n.mangle.properties.cache=n.nameCache.props||{})),nv(n.mangle.cache),nv(n.mangle.properties.cache)),n.sourceMap&&(n.sourceMap=po(n.sourceMap,{asObject:!1,content:null,filename:null,includeSources:!1,root:null,url:null},!0)),s&&(s.parse=Date.now());var p;if(i instanceof si)p=i;else{if((typeof i=="string"||n.parse.spidermonkey&&!Array.isArray(i))&&(i=[i]),n.parse=n.parse||{},n.parse.toplevel=null,n.parse.spidermonkey)n.parse.toplevel=He.from_mozilla_ast(Object.keys(i).reduce(function(N,P){return N?(N.body=N.body.concat(i[P].body),N):i[P]},null));else{delete n.parse.spidermonkey;for(var E in i)if(Rn(i,E)&&(n.parse.filename=E,n.parse.toplevel=ku(i[E],n.parse),n.sourceMap&&n.sourceMap.content=="inline")){if(Object.keys(i).length>1)throw new Error("inline source map only works with singular input");n.sourceMap.content=uR(i[E])}}if(n.parse.toplevel===null)throw new Error("no source file given");p=n.parse.toplevel}l&&n.mangle.properties.keep_quoted!=="strict"&&rR(p,l);var $;n.mangle&&n.mangle.properties&&($=BA(p)),n.wrap&&(p=p.wrap_commonjs(n.wrap)),n.enclose&&(p=p.wrap_enclose(n.enclose)),s&&(s.rename=Date.now()),s&&(s.compress=Date.now()),n.compress&&(p=new gA(n.compress,{mangle_options:n.mangle}).compress(p)),s&&(s.scope=Date.now()),n.mangle&&p.figure_out_scope(n.mangle),s&&(s.mangle=Date.now()),n.mangle&&(p.compute_char_frequency(n.mangle),p.mangle_names(n.mangle),p=oR(p,n.mangle)),s&&(s.properties=Date.now()),n.mangle&&n.mangle.properties&&(p=sR(p,n.mangle.properties,$)),s&&(s.format=Date.now());var R={};n.format.ast&&(R.ast=p),n.format.spidermonkey&&(R.ast=p.to_mozilla_ast());let M;if(!Rn(n.format,"code")||n.format.code){if(M={...n.format},M.ast||(M._destroy_ast=!0,Ki(p,N=>{N instanceof ht&&(N.variables=void 0,N.enclosed=void 0,N.parent_scope=void 0),N.block_scope&&(N.block_scope.variables=void 0,N.block_scope.enclosed=void 0,N.block_scope.parent_scope=void 0)})),n.sourceMap){if(n.sourceMap.includeSources&&i instanceof si)throw new Error("original source content unavailable");M.source_map=yield*tR({file:n.sourceMap.filename,orig:n.sourceMap.content,root:n.sourceMap.root,files:n.sourceMap.includeSources?i:null})}delete M.ast,delete M.code,delete M.spidermonkey;var L=gm(M);if(p.print(L),R.code=L.get(),n.sourceMap)if(Object.defineProperty(R,"map",{configurable:!0,enumerable:!0,get(){const N=M.source_map.getEncoded();return R.map=n.sourceMap.asObject?N:JSON.stringify(N)},set(N){Object.defineProperty(R,"map",{value:N,writable:!0})}}),R.decoded_map=M.source_map.getDecoded(),n.sourceMap.url=="inline"){var y=typeof R.map=="object"?JSON.stringify(R.map):R.map;R.code+=`
//# sourceMappingURL=data:application/json;charset=utf-8;base64,`+lR(y)}else n.sourceMap.url&&(R.code+=`
//# sourceMappingURL=`+n.sourceMap.url)}return n.nameCache&&n.mangle&&(n.mangle.cache&&(n.nameCache.vars=rv(n.mangle.cache)),n.mangle.properties&&n.mangle.properties.cache&&(n.nameCache.props=rv(n.mangle.properties.cache))),M&&M.source_map&&M.source_map.destroy(),s&&(s.end=Date.now(),R.timings={parse:.001*(s.rename-s.parse),rename:.001*(s.compress-s.rename),compress:.001*(s.scope-s.compress),scope:.001*(s.mangle-s.scope),mangle:.001*(s.properties-s.mangle),properties:.001*(s.format-s.properties),format:.001*(s.end-s.format),total:.001*(s.end-s.start)}),R}function UA(i,n,o){const s=cR(i,n);let l,p;do{if(l&&typeof l.then=="function")throw new Error("minify_sync cannot be used with the legacy source-map module");p=s.next(l),l=p.value}while(!p.done);return p.value}var Jd={exports:{}},dR=Jd.exports,ov;function Er(){return ov||(ov=1,(function(i,n){(function(o,s){i.exports=s()})(dR,function(){var o={},s,l,p,E,$,R,M,L,y,N,P,F,K,g,d,C,x,k,H,f,I,D,U,O,X,W,re,se,Ue,me,Se,xe,Ce,Ie,je,Ve,Me,ce,te,ue,ge,we,st,Be,Rt,de,Le,_e,be,We,Ke,at,ct,Ht,pt,St,Et,dt,T,ae,Y,Te,ke,ve,Xe,le,v,V,J,ne,Ne,_,A,m,h,c,b,w,z,q,ee,Pe,Je,At,it,wi,G,Q,ie,$e,Ae,Ye,Ze,ft,bi,ji,Hi,Ln,ai,As,jo,Il,vl,Gu,Qm,Wu,e$,Xu,Kh,zh,Ku,zu,Yu,Al,t$,fa,Ol,ju,i$,n$,r$,jr,Gi,Cl,Yh,qr,qo,o$,jh,qu,qh,s$,Jh,yl,a$,Ju,l$,Zu,u$,c$,d$,ga,h$,Zh,cn,Qu,Qh,ec,tc,_$,e_,t_,p$,ic,Os,nc,f$,i_,n_,g$,m$,Cs,$$,Rl,ma,$a,Tr,E$,T$,b$,S$,I$,v$,A$,r_,Jo,Ea,o_,O$,C$,y$,R$,N$,D$,k$,L$,w$,s_,M$,ys,rc,x$,Ta,oc,a_,l_,sc,ac,u_,F$,c_,d_,h_,__,p_,f_,g_,P$,Nl,m_,lc,uc,Jr,$_,E_,Dl,T_,b_,B$,cc,S_,U$,V$,H$,G$,W$,ba,I_,v_,kl,A_,X$,K$,O_,C_,So,y_,R_,z$,Y$,j$,q$,N_,J$,D_,Z$,Rs,Ll,dc,hc,Ns,k_,_c,L_,Mi,Q$,Sa,Ia,eE,w_,pc,va,M_,Ds,wl,x_,F_,tE,iE,nE,P_,rE,B_,Aa,oE,sE,aE,lE,Ml,U_,V_,fc,gc,uE,xl,H_,Fl,cE,dE,Zo,G_,Zr,hE,_E,W_,pE,ks,X_,fE,gE,mE,$E,EE,K_,TE,bE,mc,SE,IE,z_,Qr,vE,AE,Oa,OE,Y_,$c,CE,yE,RE,j_,Ec,q_,Tc,NE,DE,kE,LE,tt,zn,dn,Ri,eo,Ca,nt,xi,wE,ME,xE,J_,FE,bc,Z_,Q_,ep,tp,ya,PE,BE,UE,Ra,ip,VE,Sc,br,np,Na,kr,rp,HE,Da,GE,Qo,Ic,Pl,op,WE,sp,XE,vc,ap,lp,up,KE,cp,zE,Ac,YE,jE,Bl,qE,dp,Oc,Cc,yc,Rc,hp,JE,_p,Nc,Dc,ZE,kc,QE,pp,eT,es,fp,Ul,gp,mp,Lc,$p,Ep,Tp,bp,Sp,Ip,vp,Ap,Op,tT,iT,nT,rT,oT,sT,aT,lT,uT,Cp,yp,Rp,Np,Dp,kp,Lp,wc,Vl,wp,cT,Mp,xp,Fp,Pp,Bp,Up,Vp,Hp,Gp,Wp,dT,hT,Xp,_T,pT,fT,gT,Ee;s=function(e,t,r,a){if(!(e instanceof De)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof t!="string"||t.trim()==="")throw Error('Invalid name "'+t+'". The name must be a non-empty string.');const u=t.toLowerCase();if(!r)throw Error("Can not register a null value");let S=ts[e],B=Mc[e];if(S||(S=ts[e]=Object.create(null),B=Mc[e]=Object.create(null)),l(e,r),!a&&S[u]&&S[u]!==r)throw Error('Name "'+u+'" with type "'+e+'" already registered.');S[u]=r,B[u]=t},l=function(e,t){switch(e){case String(De.FIELD):if(typeof t.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},p=function(e,t){e=`${e}`.toLowerCase(),t=t.toLowerCase();const r=ts[e];r&&r[t]?(delete ts[e][t],delete Mc[e][t]):console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},E=function(e,t,r){e=`${e}`.toLowerCase(),t=t.toLowerCase();const a=ts[e];if(!a||!a[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",r)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return a[t]},$=function(e,t){return e=`${e}`.toLowerCase(),t=t.toLowerCase(),(e=ts[e])?!!e[t]:!1},R=function(e,t,r){return E(e,t,r)},M=function(e,t,r){return E(e,t,r)},L=function(e,t,r){e=`${e}`.toLowerCase();var a=ts[e];if(!a){if(a=`Unable to find [${e}] in the registry.`,r)throw Error(`${a} You must require or register a ${e} plugin.`);return console.warn(a),null}if(!t)return a;e=Mc[e],r=Object.create(null);for(const u of Object.keys(a))r[e[u]]=a[u];return r},y=function(e,t,r){return t=t.plugins[String(e)]||rr,typeof t=="function"?t:R(e,t,r)},N=function(e,t){P(),Fc=setTimeout(function(){t&&t.handleRightClick(e)},rO)},P=function(){Fc&&(clearTimeout(Fc),Fc=0)},F=function(){xc=null},K=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&d(e)},g=function(e){return`${e.pointerId}`},d=function(e){const t=g(e);return xc?xc===t:e.type==="pointerdown"?(xc=t,!0):!1},C=function(e,t,r,a,u){function S(Z){(u||K(Z))&&(r?a.call(r,Z):a(Z))}const B=[];if(t in Ls)for(let Z=0;Z<Ls[t].length;Z++){const ye=Ls[t][Z];e.addEventListener(ye,S,!1),B.push([e,ye,S])}else e.addEventListener(t,S,!1),B.push([e,t,S]);return B},x=function(e,t,r,a){function u(B){r?a.call(r,B):a(B)}const S=[];if(t in Ls)for(let B=0;B<Ls[t].length;B++){const Z=Ls[t][B];e.addEventListener(Z,u,!1),S.push([e,Z,u])}else e.addEventListener(t,u,!1),S.push([e,t,u]);return S},k=function(e){const t=e[e.length-1][2];for(;e.length;){const[r,a,u]=e.pop();r.removeEventListener(a,u,!1)}return t},H=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},f=function(e){return e.ctrlKey&&jp?!0:e.button===2},I=function(e,t,r){const a=t.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,r||(r=t.getScreenCTM().inverse()),a.matrixTransform(r)},D=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*yT,y:e.deltaY*yT};case 2:return{x:e.deltaX*RT,y:e.deltaY*RT}}},U=function(){return"blockly-"+(aO++).toString(36)},O=function(){return kT.genUid()},X=function(e){return e.type===pe.BLOCK_CREATE},W=function(e){return e.type===pe.BLOCK_DELETE},re=function(e){return e.type===pe.BLOCK_CHANGE},se=function(e){return e.type===pe.BLOCK_FIELD_INTERMEDIATE_CHANGE},Ue=function(e){return e.type===pe.BLOCK_MOVE},me=function(e){return e.type===pe.CLICK},Se=function(e){return e.type===pe.BUBBLE_OPEN},xe=function(e){return e.type===pe.VIEWPORT_CHANGE},o.setRecordUndo$$module$build$src$core$events$utils=function(e){Hl=e},Ce=function(){return Hl},Ie=function(e){wT.fireInternal(e)},je=function(e){if(ue()){if(!Ao.length)try{requestAnimationFrame(()=>{setTimeout(Ve,0)})}catch{setTimeout(Ve,0)}Me(e)}},Ve=function(){const e=ce(Ao);Ao.length=0;for(const t of e){if(!t.workspaceId)continue;let r;(r=ke(t.workspaceId))==null||r.fireChangeListener(t)}},Me=function(e){if(re(e)&&e.element==="mutation"){let t;for(t=Ao.length;t>0;t--){const r=Ao[t-1];if(r.group!==e.group||r.workspaceId!==e.workspaceId||!Ue(r)||r.newParentId!==e.blockId)break}Ao.splice(t,0,e)}else Ao.push(e)},ce=function(e){const t=[];for(const r of e)if(e=t[t.length-1],!r.isNull())if(e&&e.workspaceId===r.workspaceId&&e.group===r.group)if(Ue(r)&&Ue(e)&&r.blockId===e.blockId){if(e.newParentId=r.newParentId,e.newInputName=r.newInputName,e.newCoordinate=r.newCoordinate,e.reason||r.reason){let a,u;e.reason=Array.from(new Set(((a=e.reason)!=null?a:[]).concat((u=r.reason)!=null?u:[])))}}else re(r)&&re(e)&&r.blockId===e.blockId&&r.element===e.element&&r.name===e.name?e.newValue=r.newValue:xe(r)&&xe(e)?(e.viewTop=r.viewTop,e.viewLeft=r.viewLeft,e.scale=r.scale,e.oldScale=r.oldScale):me(r)&&Se(e)||t.push(r);else t.push(r);return e=t.filter(r=>!r.isNull())},te=function(){for(let e=0,t;t=Ao[e];e++)t.recordUndo=!1},o.disable$$module$build$src$core$events$utils=function(){Jp++},o.enable$$module$build$src$core$events$utils=function(){Jp--},ue=function(){return Jp===0},o.getGroup$$module$build$src$core$events$utils=function(){return LT},o.setGroup$$module$build$src$core$events$utils=function(e){wT.setGroupInternal(e)},ge=function(e){LT=typeof e=="boolean"?e?O():"":e},we=function(e){const t=[];e=e.getDescendants(!1);for(let r=0,a;a=e[r];r++)t[r]=a.id;return t},st=function(e,t){const r=Be(e.type);if(!r)throw Error("Unknown event type.");return r.fromJson(e,t)},Be=function(e){const t=R(De.EVENT,e);if(!t)throw Error(`Event type ${e} not found in registry.`);return t},Rt=function(e){if((Ue(e)||X(e))&&e.workspaceId){var t=ke(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=t.getBlockById(e.blockId)){const r=Hl;try{Hl=!1;const a=e.getParent();if(a&&!a.hasDisabledReason(Zp)){const u=e.getDescendants(!1);for(let S=0,B;B=u[S];S++)B.setDisabledReason(!1,Zp)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())do e.setDisabledReason(!0,Zp),e=e.getNextBlock();while(e)}finally{Hl=r}}}},de=function(e,t,r){e=document.createElementNS(Gl,`${e}`);for(const a in t)e.setAttribute(a,`${t[a]}`);return r&&r.appendChild(e),e},Le=function(e,t){return t=t.split(" "),t.every(r=>e.classList.contains(r))?!1:(e.classList.add(...t),!0)},_e=function(e,t){e.classList.remove(...t.split(" "))},be=function(e,t){return t=t.split(" "),t.every(r=>!e.classList.contains(r))?!1:(e.classList.remove(...t),!0)},We=function(e,t){return e.classList.contains(t)},Ke=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},at=function(e,t){const r=t.nextSibling;if(t=t.parentNode,!t)throw Error("Reference node has no parent.");r?t.insertBefore(e,r):t.appendChild(e)},ct=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Ht=function(){Qp++,Lr||(Lr=Object.create(null))},pt=function(){Qp--,Qp||(Lr=null)},St=function(e){const t=e.textContent+`
`+e.className.baseVal;var r;return Lr&&(r=Lr[t])||(r=window.getComputedStyle(e),r=dt(e,r.fontSize,r.fontWeight,r.fontFamily),Lr&&(Lr[t]=r)),r},Et=function(e,t,r,a){return dt(e,t+"pt",r,a)},dt=function(e,t,r,a){const u=e.textContent;e=u+`
`+e.className.baseVal;var S;return Lr&&(S=Lr[e])||(Wl||(S=document.createElement("canvas"),S.className="blocklyComputeCanvas",document.body.appendChild(S),Wl=S.getContext("2d")),u&&Wl?(Wl.font=r+" "+t+" "+a,S=Wl.measureText(u).width):S=0,Lr&&(Lr[e]=S)),S},T=function(e,t,r,a){const u=document.createElement("span");u.style.font=r+" "+t+" "+a,u.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",t=document.createElement("div"),t.style.display="flex",t.style.position="fixed",t.style.top="0",t.style.left="0",t.appendChild(u),t.appendChild(e),document.body.appendChild(t),r={height:0,baseline:0};try{t.style.alignItems="baseline",r.baseline=e.offsetTop-u.offsetTop,t.style.alignItems="flex-end",r.height=e.offsetTop-u.offsetTop}finally{document.body.removeChild(t)}return r},o.getFocusManager$$module$build$src$core$focus_manager=function(){return Tn.getFocusManager()},ae=function(e){return e&&typeof e.getFocusableElement=="function"&&typeof e.getFocusableTree=="function"&&typeof e.onNodeFocus=="function"&&typeof e.onNodeBlur=="function"&&typeof e.canBeFocused=="function"},Y=function(e){return ae(e)&&typeof e.id=="string"&&typeof e.workspace=="object"&&typeof e.select=="function"&&typeof e.unselect=="function"},Te=function(e,t){for(const r in t)t[r]!==null&&Array.isArray(t[r])?e[r]=Te(e[r]||[],t[r]):e[r]=t[r]!==null&&typeof t[r]=="object"?Te(e[r]||Object.create(null),t[r]):t[r];return e},ke=function(e){return Xl[e]||null},ve=function(){const e=[];for(const t in Xl)e.push(Xl[t]);return e},Xe=function(e){Xl[e.id]=e},le=function(e){delete Xl[e.id]},v=function(){return xT},V=function(e){xT=e},J=function(){const e=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();return e&&Y(e)?e:null},ne=function(e){o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)},Ne=function(e){const t=J();let r,a,u,S;const B=new(Be(pe.SELECTED))((r=t?.id)!=null?r:null,(a=e?.id)!=null?a:null,(S=(u=e?.workspace.id)!=null?u:t?.workspace.id)!=null?S:"");Ie(B)},_=function(){return FT},A=function(e){FT=e},m=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const t=e.getParentSvg(),r=e.getCachedParentSvgSize();var a=t.parentElement;if(a instanceof HTMLElement){var u=a.offsetWidth;a=a.offsetHeight,r.width!==u&&(t.setAttribute("width",u+"px"),e.setCachedParentSvgSize(u,null)),r.height!==a&&(t.setAttribute("height",a+"px"),e.setCachedParentSvgSize(null,a)),e.resize()}},h=function(e,t){const r=Object.create(null),a=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=a.indexOf(e),a.splice(e,a.length-e));for(let u=0,S;S=a[u];u++)r[S.type]?r[S.type]++:r[S.type]=1;return r},c=function(e){return function(){this.jsonInit(e)}},b=function(e){PT.defineBlocksWithJsonArrayInternal(e)},w=function(e){o.defineBlocks$$module$build$src$core$common(o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const t={};for(let r=0;r<e.length;r++){const a=e[r];if(!a){console.warn(`Block definition #${r} in JSON array is ${a}. Skipping`);continue}const u=a.type;u?t[u]={init:c(a)}:console.warn(`Block definition #${r} in JSON array is missing a type attribute. Skipping.`)}return t},o.defineBlocks$$module$build$src$core$common=function(e){for(const t of Object.keys(e)){const r=e[t];t in mi&&console.warn(`Block definition "${t}" overwrites previous definition.`),mi[t]=r}},z=function(e){let t=v();const r=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedTree();for(const a of ve())if(r===a){t=a;break}!H(e)&&t&&(!t.rendered||t.isFlyout||t.isVisible())&&li.registry.onKeyDown(t,e)},q=function(e,t){return t=e.indexOf(t),t===-1?!1:(e.splice(t,1),!0)},ee=function(e){if(nf)throw Error("CSS already injected");rf+=`
`+e},Pe=function(e,t){nf||(nf=!0,e&&(e=t.replace(/[\\/]$/,""),t=rf.replace(/<<<PATH>>>/g,e),rf="",e=document.createElement("style"),e.id="blockly-common-style",t=document.createTextNode(t),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild)))},Je=function(e){return UT.getSizeInternal(e)},At=function(e){if(wi(e,"display")!=="none")return it(e);const t=e.style,r=t.display,a=t.visibility,u=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";const S=e.offsetWidth;return e=e.offsetHeight,t.display=r,t.position=u,t.visibility=a,new kt(S,e)},it=function(e){return new kt(e.offsetWidth,e.offsetHeight)},wi=function(e,t){return e=window.getComputedStyle(e),e[t]||e.getPropertyValue(t)},G=function(e){const t=new Fe(0,0);e=e.getBoundingClientRect();var r=document.documentElement;return r=new Fe(window.pageXOffset||r.scrollLeft,window.pageYOffset||r.scrollTop),t.x=e.left+r.x,t.y=e.top+r.y,t},Q=function(){const e=document.body,t=document.documentElement;return new Fe(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},ie=function(e){const t=parseFloat(wi(e,"borderLeftWidth")),r=parseFloat(wi(e,"borderRightWidth")),a=parseFloat(wi(e,"borderTopWidth"));return e=parseFloat(wi(e,"borderBottomWidth")),new Dt(a,e,t,r)},$e=function(e,t,r){e=Ae(e,t,r),t.scrollLeft=e.x,t.scrollTop=e.y},Ae=function(e,t,r){var a=G(e),u=G(t),S=ie(t);const B=a.x-u.x-S.left;return a=a.y-u.y-S.top,u=it(e),e=t.clientWidth-u.width,u=t.clientHeight-u.height,S=t.scrollLeft,t=t.scrollTop,r?(S+=B-e/2,t+=a-u/2):(S+=Math.min(B,Math.max(B-e,0)),t+=Math.min(a,Math.max(a-u,0))),new Fe(S,t)},Ye=function(e){const t=new Fe(0,0);var r=e.x&&e.getAttribute("x");const a=e.y&&e.getAttribute("y");return r&&(t.x=parseInt(r)),a&&(t.y=parseInt(a)),(r=(r=e.getAttribute("transform"))&&r.match(VT))&&(t.x+=Number(r[1]),r[3]&&(t.y+=Number(r[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(HT))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},Ze=function(e){let t=0,r=0;for(;e;){const a=Ye(e);if(t+=a.x,r+=a.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new Fe(t,r)},ft=function(){const e=Q();return new Dt(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},bi=function(){const e=document.documentElement,t=window;return new Fe(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},ji=function(e,t){var r=t.x;t=t.y;const a=e.getInjectionDiv().getBoundingClientRect();return r=new Fe(r-a.left,t-a.top),t=e.getOriginOffsetInPixels(),Fe.difference(r,t).scale(1/e.scale)},Hi=function(e,t){var r=t.scale(e.scale);t=r.x,r=r.y;const a=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new Fe(t+a.left+e.x,r+a.top+e.y)},Ln=function(e){({document:Hc=Hc,DOMParser:zl=zl,XMLSerializer:Yl=Yl}=e),Vc=new zl,sf=new Yl},o.createElement$$module$build$src$core$utils$xml=function(e){return Hc.createElementNS(GT,e)},o.createTextNode$$module$build$src$core$utils$xml=function(e){return Hc.createTextNode(e)},o.textToDom$$module$build$src$core$utils$xml=function(e){let t=Vc.parseFromString(e,"text/xml");if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;if((t=Vc.parseFromString(e,"text/html"))&&t.body.firstChild&&t.body.firstChild.nodeName.toLowerCase()==="xml")return t.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},ai=function(e){return As(sf.serializeToString(e))},As=function(e){return e.replace(cO,t=>`&#${t.charCodeAt(0)};`)},jo=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=zh(e),e=e$(e)),Il(e),e):null},Il=function(e){const t=e.kind;if(e=e.contents,t&&t!==WT&&t!==af)throw Error("Invalid toolbox kind "+t+". Please supply either "+WT+" or "+af);if(!e)throw Error("Toolbox must have a contents attribute.")},vl=function(e){return e?e.contents?e.contents:Array.isArray(e)&&e.length>0&&!e[0].nodeType?e:Xu(e):[]},Gu=function(e){return XT.hasCategoriesInternal(e)},Qm=function(e){if(!e)return!1;const t=e.kind;return t?t===af:!!e.contents.filter(r=>r.kind.toUpperCase()==="CATEGORY").length},Wu=function(e){return e&&e.contents?!!e.contents.filter(function(t){return t.kind.toUpperCase()==="CATEGORY"}).length:!1},e$=function(e){const t={contents:Xu(e)};return e instanceof Node&&Kh(e,t),t},Xu=function(e){const t=[];let r=e.childNodes;r||(r=e);for(let a=0,u;u=r[a];a++){if(!u.tagName)continue;e={};const S=u.tagName.toUpperCase();e.kind=S,S==="BLOCK"?e.blockxml=u:u.childNodes&&u.childNodes.length>0&&(e.contents=Xu(u)),Kh(u,e),t.push(e)}return t},Kh=function(e,t){for(let r=0;r<e.attributes.length;r++){const a=e.attributes[r];a.nodeName.includes("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[a.nodeName.replace("css-","")]=a.value):t[a.nodeName]=a.value}},zh=function(e){let t=null;if(e)if(typeof e=="string"){if(t=o.textToDom$$module$build$src$core$utils$xml(e),t.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(t=e);return t},Ku=function(e,t,r,a,u,S){const B=S.scrollbar&&S.scrollbar.canScrollVertically();return e.horizontal===wa.LEFT?(r=u.absoluteMetrics.left+r,B&&S.RTL&&(r+=Fi.scrollbarThickness)):(r=u.absoluteMetrics.left+u.viewMetrics.width-t.width-r,B&&!S.RTL&&(r-=Fi.scrollbarThickness)),e.vertical===yo.TOP?e=u.absoluteMetrics.top+a:(e=u.absoluteMetrics.top+u.viewMetrics.height-t.height-a,S.scrollbar&&S.scrollbar.canScrollHorizontally()&&(e-=Fi.scrollbarThickness)),new Dt(e,e+t.height,r,r+t.width)},zu=function(e,t){return{horizontal:t.toolboxMetrics.position===Lt.LEFT||e.horizontalLayout&&!e.RTL?wa.RIGHT:wa.LEFT,vertical:t.toolboxMetrics.position===Lt.BOTTOM?yo.TOP:yo.BOTTOM}},Yu=function(e,t,r,a){const u=e.left,S=e.right-e.left,B=e.bottom-e.top;for(let Z=0;Z<a.length;Z++){const ye=a[Z];e.intersects(ye)&&(e=r===rs.UP?ye.top-B-t:ye.bottom+t,e=new Dt(e,e+B,u,u+S),Z=-1)}return e},Al=function(e,t){s(De.SERIALIZER,e,t)},t$=function(e){p(De.SERIALIZER,e)},fa=function(e,{addCoordinates:t=!1,saveIds:r=!0}={}){const a=e.workspace,u=Object.create(null);return u.height=e.getSize().height,u.width=e.getSize().width,r&&(u.id=e.id),t&&(t=e.getRelativeToSurfaceXY(),u.x=a.RTL?a.getWidth()-t.x:t.x,u.y=t.y),e.getText()&&(u.text=e.getText()),e.isCollapsed()&&(u.collapsed=!0),e.isOwnEditable()||(u.editable=!1),e.isOwnMovable()||(u.movable=!1),e.isOwnDeletable()||(u.deletable=!1),u},Ol=function(e,t,{recordUndo:r=!1}={}){const a=Ce();if(o.setRecordUndo$$module$build$src$core$events$utils(r),r=t.newComment(e.id),e.text!==void 0&&r.setText(e.text),e.x!==void 0||e.y!==void 0){const S=r.getRelativeToSurfaceXY();let B,Z=(B=e.x)!=null?B:S.x;Z=t.RTL?t.getWidth()-Z:Z;var u;t=(u=e.y)!=null?u:S.y,r.moveTo(new Fe(Z,t))}if(e.width!==void 0||e.height){u=r.getSize();let S,B;r.setSize(new kt((S=e.width)!=null?S:u.width,(B=e.height)!=null?B:u.height))}return e.collapsed!==void 0&&r.setCollapsed(e.collapsed),e.editable!==void 0&&r.setEditable(e.editable),e.movable!==void 0&&r.setMovable(e.movable),e.deletable!==void 0&&r.setDeletable(e.deletable),o.setRecordUndo$$module$build$src$core$events$utils(a),r},ju=function(e,t){s(De.PASTER,e,t)},i$=function(e){p(De.PASTER,e)},n$=function(e){const t=e.workspace,r=e.getRelativeToSurfaceXY(),a=new Fe(0,0),u=t.getTopComments(!1).filter(S=>S.id!==e.id).map(S=>S.getRelativeToSurfaceXY());for(;r$(Fe.sum(r,a),u);)a.translate(t.RTL?-30:30,30);e.moveTo(Fe.sum(r,a))},r$=function(e,t){return t.some(r=>Math.abs(r.x-e.x)<=1&&Math.abs(r.y-e.y)<=1)},jr=function(e,t){e.setAttribute(_O,t)},Gi=function(e,t,r){Array.isArray(r)&&(r=r.join(" ")),e.setAttribute(hO+t,`${r}`)},Cl=function(e){return e&&typeof e.saveState=="function"&&typeof e.loadState=="function"},Yh=function(e){return jh(e),o$()?(qu(),Promise.resolve()):(Ma||(Ma=new Promise(t=>{pf=t,QT=window.requestAnimationFrame(()=>{qu(),t()})})),Ma)},qr=function(){return Ma||Promise.resolve()},qo=function(e){e||window.cancelAnimationFrame(QT),qu(e),!e&&pf&&pf()},o$=function(){return vT},jh=function(e){hf.add(e),_f.set(e,o.getGroup$$module$build$src$core$events$utils());const t=e.getParent();t?jh(t):zc.add(e)},qu=function(e){const t=e?new Set([e]):new Set([...zc].map(S=>S.workspace)),r=[...zc].filter(s$).filter(S=>t.has(S.workspace));for(var a of r)Jh(a);for(const S of t)S.resizeContents();for(var u of r)a=u.getRelativeToSurfaceXY(),u.updateComponentLocations(a);for(const S of r)u=o.getGroup$$module$build$src$core$events$utils(),(a=_f.get(S))&&o.setGroup$$module$build$src$core$events$utils(a),S.bumpNeighbours(),o.setGroup$$module$build$src$core$events$utils(u);for(const S of r)qh(S);e||(Ma=null)},qh=function(e){zc.delete(e),hf.delete(e),_f.delete(e);for(const t of e.getChildren(!1))qh(t)},s$=function(e){return!e.isDisposed()&&!e.getParent()},Jh=function(e){if(hf.has(e)&&e.initialized){for(const t of e.getChildren(!1))Jh(t);e.renderEfficiently()}},yl=function(e,t){rb(e,t)},a$=function(e=nb){rb=e},Ju=function(e,t){sb(e,t)},l$=function(e=ob){sb=e},Zu=function(e,t,r){lb(e,t,r)},u$=function(e=ab){lb=e},c$=function(e,t){cb(e,t)},d$=function(e=ub){cb=e},ga=function(e){return e&&typeof e.getProcedureDef=="function"},h$=function(e){return e&&typeof e.getProcedureCall=="function"&&typeof e.renameProcedure=="function"},Zh=function(e){return e.getVariableModel!==void 0},cn=function(e,t,r,a){e=e+" was deprecated in "+t+" and will be deleted in "+r+".",a&&(e+=`
Use `+a+" instead."),db.has(e)||(db.add(e),console.warn(e))},o.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let r=0;r<e.length;r++){const a=e[r].getVarModels();if(a)for(let u=0;u<a.length;u++){const S=a[u];S.getId()&&t.add(S)}}return Array.from(t.values())},o.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const t=new Set;for(let a=0,u;u=e[a];a++){var r=u.getDeveloperVariables;if(r){r=r();for(let S=0;S<r.length;S++)t.add(r[S])}}return Array.from(t.values())},Qu=function(e){return Qh(e,!1)},Qh=function(e,t=!0){return mi.variables_set||mi.variables_get||console.warn("There are no variable blocks, but there is a variable category."),t?(cn("The XML return value of Blockly.Variables.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),_$(e)):(e.registerButtonCallback("CREATE_VARIABLE",function(r){Os(r.getTargetWorkspace())}),[{kind:"button",text:"%{BKY_NEW_VARIABLE}",callbackkey:"CREATE_VARIABLE"},...tc(e,e.getVariableMap().getVariablesOfType(""),!0)])},ec=function(e){return{VAR:{name:e.getName(),type:e.getType()}}},tc=function(e,t,r,a="variables_get",u="variables_set"){r&&(r=mi.math_change),e=[];const S=t.slice(-1)[0];return S&&(mi[u]&&e.push({kind:"block",type:u,gap:r?8:24,fields:ec(S)}),r&&e.push({kind:"block",type:"math_change",gap:mi[a]?20:8,fields:ec(S),inputs:{DELTA:{shadow:{type:"math_number",fields:{NUM:1}}}}})),mi[a]&&e.push(...t.sort(ma).map(B=>({kind:"block",type:a,gap:8,fields:ec(B)}))),e},_$=function(e){let t=[];const r=document.createElement("button");return r.setAttribute("text","%{BKY_NEW_VARIABLE}"),r.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(a){Os(a.getTargetWorkspace())}),t.push(r),e=e_(e),t=t.concat(e)},e_=function(e){e=e.getVariableMap().getVariablesOfType("");const t=[];if(e.length>0){var r=e[e.length-1];if(mi.variables_set){var a=o.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","variables_set"),a.setAttribute("gap",mi.math_change?"8":"24"),a.appendChild(Cs(r)),t.push(a)}if(mi.math_change&&(a=o.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","math_change"),a.setAttribute("gap",mi.variables_get?"20":"8"),a.appendChild(Cs(r)),r=o.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),a.appendChild(r),t.push(a)),mi.variables_get){e.sort(ma);for(let u=0,S;S=e[u];u++)r=o.createElement$$module$build$src$core$utils$xml("block"),r.setAttribute("type","variables_get"),r.setAttribute("gap","8"),r.appendChild(Cs(S)),t.push(r)}}return t},t_=function(e){return _b.generateUniqueNameInternal(e)},p$=function(e){return ic(mf.charAt(0),e.getVariableMap().getAllVariables().map(t=>t.getName()))},ic=function(e,t){if(!t.length)return e;const r=mf;let a="",u=r.indexOf(e);for(;;){let S=!1;for(let B=0;B<t.length;B++)if(t[B].toLowerCase()===e){S=!0;break}if(!S)break;u++,u===r.length&&(u=0,a=`${Number(a)+1}`),e=r.charAt(u)+a}return e},Os=function(e,t,r){function a(S){nc(o.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,S,function(B){if(B){var Z=i_(B,e);if(Z){if(Z.getType()===u)var ye=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",Z.getName());else ye=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,ye=ye.replace("%1",Z.getName()).replace("%2",Z.getType());yl(ye,function(){a(B)})}else e.getVariableMap().createVariable(B,u),t&&t(B)}else t&&t(null)})}const u=r||"";a("")},o.renameVariable$$module$build$src$core$variables=function(e,t,r){function a(u){const S=o.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",t.getName());nc(S,u,function(B){if(B){var Z=f$(B,t.getType(),e),ye=n_(t.getName(),B,e);if(Z||ye){var et="";Z?et=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",Z.getName()).replace("%2",Z.getType()):ye&&(et=o.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",B).replace("%2",ye)),yl(et,function(){a(B)})}else e.getVariableMap().renameVariable(t,B),r&&r(B)}else r&&r(null)})}a("")},nc=function(e,t,r){Zu(e,t,function(a){a&&(a=a.replace(/[\s\xa0]+/g," ").trim(),a===o.Msg$$module$build$src$core$msg.RENAME_VARIABLE||a===o.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(a=null),r(a)})},f$=function(e,t,r){r=r.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let a=0,u;u=r[a];a++)if(u.getName().toLowerCase()===e&&u.getType()!==t)return u;return null},i_=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let r=0,a;a=t[r];r++)if(a.getName().toLowerCase()===e)return a;return null},n_=function(e,t,r){return r.getProcedureMap().getProcedures().length?g$(e,t,r):m$(e,t,r)},g$=function(e,t,r){e=e.toLowerCase(),t=t.toLowerCase(),r=r.getProcedureMap().getProcedures();for(const u of r){var a=u.getParameters().filter(Zh).map(S=>S.getVariableModel().getName());if(a&&(r=a.some(S=>S.toLowerCase()===e),a=a.some(S=>S.toLowerCase()===t),r&&a))return u.getName()}return null},m$=function(e,t,r){e=e.toLowerCase(),t=t.toLowerCase(),r=r.getAllBlocks(!1);for(const u of r){if(!ga(u))continue;r=u.getProcedureDef();var a=r[1];const S=a.some(B=>B.toLowerCase()===e);if(a=a.some(B=>B.toLowerCase()===t),S&&a)return r[0]}return null},Cs=function(e){const t=o.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.getType()),e=o.createTextNode$$module$build$src$core$utils$xml(e.getName()),t.appendChild(e),t},o.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,t,r,a){let u=o.getVariable$$module$build$src$core$variables(e,t,r,a);return u||(u=$$(e,t,r,a)),u},o.getVariable$$module$build$src$core$variables=function(e,t,r,a){const u=e.getPotentialVariableMap();let S=null;if(t&&(S=e.getVariableById(t),!S&&u&&(S=u.getVariableById(t)),S))return S;if(r){if(a===void 0)throw Error("Tried to look up a variable by name without a type");S=e.getVariable(r,a),!S&&u&&(S=u.getVariable(r,a))}return S},$$=function(e,t,r,a){const u=e.getVariableMap(),S=e.getPotentialVariableMap();return r||(r=t_(e.isFlyout?e.targetWorkspace:e)),S?S.createVariable(r,a,t??void 0):u.createVariable(r,a,t)},Rl=function(e,t){e=e.getAllVariables();const r=[];if(t.length!==e.length)for(let a=0;a<e.length;a++){const u=e[a];t.includes(u)||r.push(u)}return r},ma=function(e,t){return e.getName().localeCompare(t.getName(),void 0,{sensitivity:"base"})},$a=function(e,t){const r=[];e=e.getAllBlocks(!1);for(let a=0;a<e.length;a++){const u=e[a].getVarModels();if(u)for(let S=0;S<u.length;S++)u[S].getId()===t&&r.push(e[a])}return r},o.deleteVariable$$module$build$src$core$variables=function(e,t,r){var a=t.getName();const u=$a(e,t.getId());for(let S=u.length-1;S>=0;S--){const B=u[S];if(B.type==="procedures_defnoreturn"||B.type==="procedures_defreturn"){r=String(B.getFieldValue("NAME")),a=o.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",a).replace("%2",r),yl(a);return}B===r&&u.splice(S,1)}r&&u.length||u.length>1?(a=o.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(u.length+(r&&!r.workspace.isFlyout?1:0))).replace("%2",a),Ju(a,S=>{S&&t&&e.getVariableMap().deleteVariable(t)})):e.getVariableMap().deleteVariable(t)},Tr=function(e,{addCoordinates:t=!1,addInputBlocks:r=!0,addNextBlocks:a=!0,doFullSerialization:u=!0,saveIds:S=!0}={}){if(e.isInsertionMarker())return null;const B={type:e.type,id:S?e.id:void 0};return t&&T$(e,B),E$(e,B),b$(e,B,u),S$(e,B,u),I$(e,B,u),r&&v$(e,B,u,S),a&&A$(e,B,u,S),B},E$=function(e,t){e.isCollapsed()&&(t.collapsed=!0),e.isEnabled()||(t.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(t.deletable=!1),e.isOwnMovable()||(t.movable=!1),e.isOwnEditable()||(t.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(t.inline=e.inputsInline),e.data&&(t.data=e.data)},T$=function(e,t){const r=e.workspace;e=e.getRelativeToSurfaceXY(),t.x=Math.round(r.RTL?r.getWidth()-e.x:e.x),t.y=Math.round(e.y)},b$=function(e,t,r){e.saveExtraState?(e=e.saveExtraState(r),e!==null&&(t.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(t.extraState=Zr(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},S$=function(e,t,r){const a=Object.create(null);for(const u of e.getIcons())Cl(u)&&(e=u.saveState(r))&&(a[u.getType().toString()]=e);Object.keys(a).length&&(t.icons=a)},I$=function(e,t,r){const a=Object.create(null);for(const u of e.getFields())u.isSerializable()&&(a[u.name]=u.saveState(r));Object.keys(a).length&&(t.fields=a)},v$=function(e,t,r,a){const u=Object.create(null);for(let S=0;S<e.inputList.length;S++){const B=e.inputList[S];if(!B.connection)continue;const Z=r_(B.connection,r,a);Z&&(u[B.name]=Z)}Object.keys(u).length&&(t.inputs=u)},A$=function(e,t,r,a){e.nextConnection&&(e=r_(e.nextConnection,r,a))&&(t.next=e)},r_=function(e,t,r){const a=e.getShadowState(!0);if(e=e.targetBlock(),!a&&!e)return null;const u=Object.create(null);return a&&(u.shadow=a),e&&!e.isShadow()&&(u.block=Tr(e,{doFullSerialization:t,saveIds:r})),u},Jo=function(e,t,{recordUndo:r=!1}={}){return e=Ea(e,t,{recordUndo:r}),t.rendered&&qo(),e},Ea=function(e,t,{parentConnection:r,isShadow:a=!1,recordUndo:u=!1}={}){const S=Ce();o.setRecordUndo$$module$build$src$core$events$utils(u),(u=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),o.disable$$module$build$src$core$events$utils();const B=t.getAllVariables();let Z;try{Z=o_(e,t,{parentConnection:r,isShadow:a})}finally{o.enable$$module$build$src$core$events$utils()}if(O$(t,B),ue()&&Ie(new(Be(pe.BLOCK_CREATE))(Z)),o.setGroup$$module$build$src$core$events$utils(u),o.setRecordUndo$$module$build$src$core$events$utils(S),t.rendered){const ye=Z;setTimeout(()=>{ye.disposed||ye.setConnectionTracking(!0)},1)}return Z},o_=function(e,t,{parentConnection:r,isShadow:a=!1}={}){if(!e.type)throw new pb(e);const u=t.newBlock(e.type,e.id);return u.setShadow(a),C$(u,e),y$(u,e),R$(u,e),N$(r,u,e),D$(u,e),k$(u,e),L$(u,e),w$(u,e),M$(u,t.rendered),u},O$=function(e,t){if(ue())for(e=Rl(e,t),t=0;t<e.length;t++){const r=e[t];Ie(new(Be(pe.VAR_CREATE))(r))}},C$=function(e,t){let r=t.x===void 0?0:t.x;t=t.y===void 0?0:t.y;const a=e.workspace;r=a.RTL?a.getWidth()-r:r,e.moveBy(r,t)},y$=function(e,t){if(t.collapsed&&e.setCollapsed(!0),t.deletable===!1&&e.setDeletable(!1),t.movable===!1&&e.setMovable(!1),t.editable===!1&&e.setEditable(!1),t.enabled===!1&&e.setDisabledReason(!0,Sr),Array.isArray(t.disabledReasons))for(const r of t.disabledReasons)e.setDisabledReason(!0,r);t.inline!==void 0&&e.setInputsInline(t.inline),t.data!==void 0&&(e.data=t.data)},R$=function(e,t){t.extraState&&(e.loadExtraState?e.loadExtraState(t.extraState):e.domToMutation&&e.domToMutation(o.textToDom$$module$build$src$core$utils$xml(t.extraState)))},N$=function(e,t,r){if(e){if(e.getSourceBlock().isShadow()&&!t.isShadow())throw new gb(r);if(e.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var a=t.outputConnection;if(!a)throw new Zl("output",t,r)}else if(a=t.previousConnection,!a)throw new Zl("previous",t,r);if(!e.connect(a)){const u=t.workspace.connectionChecker;throw new fb(u.getErrorMessage(u.canConnectWithReason(a,e,!1),a,e),e.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",t,r)}}},D$=function(e,t){if(t.icons){var r=Object.keys(t.icons);for(const u of r){r=t.icons[u];var a=e.getIcon(u);if(!a){if(a=R(De.ICON,u,!1),!a)throw new mb(u,e,t);a=new a(e),e.addIcon(a)}Cl(a)&&a.loadState(r)}}},k$=function(e,t){if(t.fields){var r=Object.keys(t.fields);for(let a=0;a<r.length;a++){const u=r[a],S=t.fields[u],B=e.getField(u);B?B.loadState(S):console.warn(`Ignoring non-existant field ${u} in block ${e.type}`)}}},L$=function(e,t){if(t.inputs){var r=Object.keys(t.inputs);for(let a=0;a<r.length;a++){const u=r[a],S=e.getInput(u);if(!S||!S.connection)throw new Zl(u,e,t);s_(S.connection,t.inputs[u])}}},w$=function(e,t){if(t.next){if(!e.nextConnection)throw new Zl("next",e,t);s_(e.nextConnection,t.next)}},s_=function(e,t){t.shadow&&e.setShadowState(t.shadow),t.block&&o_(t.block,e.getSourceBlock().workspace,{parentConnection:e})},M$=function(e,t){if(t){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const r of e.getIcons())r.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},ys=function(e){return typeof e.bubbleIsVisible=="function"&&typeof e.setBubbleVisible=="function"&&typeof e.getBubble=="function"},rc=function(e){return e*Math.PI/180},x$=function(e){return e*180/Math.PI},Ta=function(e,t,r){if(r<e){const a=r;r=e,e=a}return Math.max(e,Math.min(t,r))},oc=function(){document.querySelector(".blocklyDropDownDiv")||(Ni=document.createElement("div"),Ni.className="blocklyDropDownDiv",Ni.tabIndex=-1,(_()||document.body).appendChild(Ni),eu=document.createElement("div"),eu.className="blocklyDropDownContent",Ni.appendChild(eu),Qc=C(eu,"keydown",null,z),Gs=document.createElement("div"),Gs.className="blocklyDropDownArrow",Ni.appendChild(Gs),Ni.style.opacity="0",Ni.style.transition="transform "+Jc+"s, opacity "+Jc+"s")},a_=function(e){Tf=e},l_=function(){return os},sc=function(){return eu},ac=function(){Qc&&(k(Qc),Qc=null),Ni.remove(),oc()},u_=function(e,t){Ni.style.backgroundColor=e,Ni.style.borderColor=t},F$=function(e,t,r,a,u=!0){return __(d_(t),e,u,r,a)},c_=function(e,t,r,a=!0){return Ib=!0,__(h_(e),e,a,t,r)},d_=function(e){var t=e.getSvgRoot();const r=e.workspace.scale,a=e.height*r;return e=e.width*r,t=G(t),new Dt(t.y,t.y+a,t.x,t.x+e)},h_=function(e){return e=e.getScaledBBox(),new Dt(e.top,e.bottom,e.left,e.right)},__=function(e,t,r,a,u){const S=e.left+(e.right-e.left)/2,B=e.bottom;e=e.top,u&&(e+=u),u=t.getSourceBlock();let Z=u.workspace;for(;Z.options.parentWorkspace;)Z=Z.options.parentWorkspace;return a_(Z.getParentSvg().parentNode),p_(t,u.RTL,S,B,S,e,r,a)},p_=function(e,t,r,a,u,S,B,Z){return os=e,Hs=Z||null,Ni.style.direction=t?"rtl":"ltr",e=v(),bb=e.getRenderer().getClassName(),Sb=e.getTheme().getClassName(),Le(Ni,bb),Le(Ni,Sb),r=$_(r,a,u,S),B&&(Zc=o.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(Ni)),r},f_=function(e,t,r,a){return e=Nl(e,r.left,r.right,a.width),{initialX:e.divX,initialY:t,finalX:e.divX,finalY:t+$f,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},g_=function(e,t,r,a){return e=Nl(e,r.left,r.right,a.width),{initialX:e.divX,initialY:t-a.height,finalX:e.divX,finalY:t-a.height-$f,arrowX:e.arrowX,arrowY:a.height-Eb*2-qc/2,arrowAtTop:!1,arrowVisible:!0}},P$=function(e,t,r){return e=Nl(e,t.left,t.right,r.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Nl=function(e,t,r,a){return t=Ta(t,e-a/2,r-a),e=e-qc/2-t,r=Tb,e=Ta(r,e,a-r-qc),{arrowX:e,divX:t}},m_=function(){return!!os},lc=function(e,t){return os===e?(t?Jr():uc(),!0):!1},uc=function(){Ni.style.transform="translate(0, 0)",Ni.style.opacity="0",Ef=setTimeout(function(){Jr()},Jc*1e3),Hs&&(Hs(),Hs=null)},Jr=function(){m_()&&(Ef&&clearTimeout(Ef),Hs&&(Hs(),Hs=null),ac(),os=null,v().markFocused(),Zc&&(Zc(),Zc=null))},$_=function(e,t,r,a){e=bf.getPositionMetrics(e,t,r,a),e.arrowVisible?(t=e.arrowX,r=e.arrowY,a=e.arrowAtTop?45:225,Gs.style.display="",Gs.style.transform=`translate(${t}px, ${r}px) rotate(${a}deg)`,Gs.setAttribute("class","blocklyDropDownArrow")):Gs.style.display="none",t=Math.floor(e.initialX),r=Math.floor(e.initialY),a=Math.floor(e.finalX);const u=Math.floor(e.finalY);return Ni.style.left=t+"px",Ni.style.top=r+"px",Ni.style.display="block",Ni.style.opacity="1",Ni.style.transform="translate("+(a-t)+"px,"+(u-r)+"px)",!!e.arrowAtTop},E_=function(){if(os){var e=os.getSourceBlock();e=Ib?h_(os):d_(e);const t=e.left+(e.right-e.left)/2;$_(t,e.bottom,t,e.top)}else uc()},Dl=function(e){return e.length?e.reduce(function(t,r){return t.length<r.length?t:r}).length:0},T_=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let r=0;t=t||Dl(e);let a;for(a=0;a<t;a++){for(var u=e[0][a],S=1;S<e.length;S++)if(u!==e[S][a])return r;u===" "&&(r=a+1)}for(u=1;u<e.length;u++)if((S=e[u][a])&&S!==" ")return r;return t},b_=function(e,t){if(!e.length)return 0;if(e.length===1)return e[0].length;let r=0;t=t||Dl(e);let a;for(a=0;a<t;a++){for(var u=e[0].substr(-a-1,1),S=1;S<e.length;S++)if(u!==e[S].substr(-a-1,1))return r;u===" "&&(r=a+1)}for(u=1;u<e.length;u++)if((S=e[u].charAt(e[u].length-a-1))&&S!==" ")return r;return t},o.wrap$$module$build$src$core$utils$string=function(e,t){e=e.split(`
`);for(let r=0;r<e.length;r++)e[r]=B$(e[r],t);return e.join(`
`)},B$=function(e,t){if(e.length<=t)return e;const r=e.trim().split(/\s+/);for(var a=0;a<r.length;a++)r[a].length>t&&(t=r[a].length);var u=-1/0;let S,B=1;do{a=u,S=e,e=[],u=r.length/B;let Z=1;for(let ye=0;ye<r.length-1;ye++)Z<(ye+1.5)/u?(Z++,e[ye]=!0):e[ye]=!1;e=S_(r,e,t),u=cc(r,e,t),e=U$(r,e),B++}while(u>a);return S},cc=function(e,t,r){const a=[0],u=[];for(var S=0;S<e.length;S++)a[a.length-1]+=e[S].length,t[S]===!0?(a.push(0),u.push(e[S].charAt(e[S].length-1))):t[S]===!1&&a[a.length-1]++;for(e=Math.max(...a),t=0,S=0;S<a.length;S++)t-=Math.pow(Math.abs(r-a[S]),1.5)*2,t-=Math.pow(e-a[S],1.5),".?!".includes(u[S])?t+=r/3:",;)]}".includes(u[S])&&(t+=r/4);return a.length>1&&a[a.length-1]<=a[a.length-2]&&(t+=.5),t},S_=function(e,t,r){let a=cc(e,t,r),u;for(let S=0;S<t.length-1;S++){if(t[S]===t[S+1])continue;const B=[].concat(t);B[S]=!B[S],B[S+1]=!B[S+1];const Z=cc(e,B,r);Z>a&&(a=Z,u=B)}return u?S_(e,u,r):t},U$=function(e,t){const r=[];for(let a=0;a<e.length;a++)r.push(e[a]),t[a]!==void 0&&r.push(t[a]?`
`:" ");return r.join("")},o.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},V$=function(e){ed=e},H$=function(){return ed},G$=function(){return tu},W$=function(){return Ji},ba=function(e){if(e=I_(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},I_=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},v_=function(){document.querySelector(".blocklyTooltipDiv")||(Ji=document.createElement("div"),Ji.className="blocklyTooltipDiv",(_()||document.body).appendChild(Ji))},kl=function(e){e.mouseOverWrapper_=x(e,"pointerover",null,X$),e.mouseOutWrapper_=x(e,"pointerout",null,K$),e.addEventListener("pointermove",O_,!1)},A_=function(e){e&&(k(e.mouseOverWrapper_),k(e.mouseOutWrapper_),e.removeEventListener("pointermove",O_))},X$=function(e){Pa||(e=I_(e.currentTarget),Ir!==e&&(So(),iu=null,Ir=e),clearTimeout(Ab))},K$=function(e){Pa||(Ab=setTimeout(function(){iu=Ir=null,So()},1),clearTimeout(Ws),Ws=0)},O_=function(e){if(Ir&&Ir.tooltip&&!Pa)if(tu){const t=Sf-e.pageX;e=If-e.pageY,Math.sqrt(t*t+e*e)>Ob&&So()}else iu!==Ir&&(clearTimeout(Ws),Sf=e.pageX,If=e.pageY,Ws=setTimeout(q$,Cb))},C_=function(){iu=Ir=null,So()},So=function(){tu&&(tu=!1,Ji&&(Ji.style.display="none")),Ws&&(clearTimeout(Ws),Ws=0)},y_=function(){So(),Pa=!0},R_=function(){Pa=!1},z$=function(){Ji&&Ir&&(typeof ed=="function"?ed(Ji,Ir):Y$())},Y$=function(){var e=ba(Ir);e=o.wrap$$module$build$src$core$utils$string(e,vb),e=e.split(`
`);for(let t=0;t<e.length;t++){const r=document.createElement("div");r.appendChild(document.createTextNode(e[t])),Ji.appendChild(r)}},j$=function(e){const t=document.documentElement.clientWidth,r=document.documentElement.clientHeight;let a=Sf;a=e?a-(vf+Ji.offsetWidth):a+vf;let u=If+Af;return u+Ji.offsetHeight>r+window.scrollY&&(u-=Ji.offsetHeight+2*Af),e?a=Math.max(td-window.scrollX,a):a+Ji.offsetWidth>t+window.scrollX-2*td&&(a=t-Ji.offsetWidth-2*td),{x:a,y:u}},q$=function(){if(!Pa&&(iu=Ir,Ji)){Ji.textContent="",z$();var e=Ir.RTL;Ji.style.direction=e?"rtl":"ltr",Ji.style.display="block",tu=!0;var{x:t,y:r}=j$(e);Ji.style.left=t+"px",Ji.style.top=r+"px"}},N_=function(){return Of},J$=function(e){Of=e},D_=function(){return Cf},Z$=function(e){Cf=e},Rs=function(e){e=`${e}`.toLowerCase().trim();var t=yb[e];if(t||(t=e.substring(0,2)==="0x"?"#"+e.substring(2):e,t=t[0]==="#"?t:"#"+t,/^#[0-9a-f]{6}$/.test(t)))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var r=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return r&&(e=Number(r[1]),t=Number(r[2]),r=Number(r[3]),e>=0&&e<256&&t>=0&&t<256&&r>=0&&r<256)?Ll(e,t,r):null},Ll=function(e,t,r){return t=e<<16|t<<8|r,e<16?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},dc=function(e){return e=Rs(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},hc=function(e,t,r){let a=0,u=0,S=0;if(t===0)S=u=a=r;else{const B=Math.floor(e/60),Z=e/60-B;e=r*(1-t);const ye=r*(1-t*Z);switch(t=r*(1-t*(1-Z)),B){case 1:a=ye,u=r,S=e;break;case 2:a=e,u=r,S=t;break;case 3:a=e,u=ye,S=r;break;case 4:a=t,u=e,S=r;break;case 5:a=r,u=e,S=ye;break;case 6:case 0:a=r,u=t,S=e}}return Ll(Math.floor(a),Math.floor(u),Math.floor(S))},Ns=function(e,t,r){return e=Rs(e),!e||(t=Rs(t),!t)?null:(e=dc(e),t=dc(t),Ll(Math.round(t[0]+r*(e[0]-t[0])),Math.round(t[1]+r*(e[1]-t[1])),Math.round(t[2]+r*(e[2]-t[2]))))},k_=function(e){return hc(e,Of,Cf*255)},_c=function(e,t,r){const a=[];var u=e.split("");u.push("");var S=0;e=[];let B=null;for(let et=0;et<u.length;et++){var Z=u[et];if(S===0)if(Z==="%")(S=e.join(""))&&a.push(S),e.length=0,S=1;else if(r&&Z===`
`){const Ii=e.join("");Ii&&a.push(Ii),e.length=0,a.push(Z)}else e.push(Z);else if(S===1)Z==="%"?(e.push(Z),S=0):t&&"0"<=Z&&Z<="9"?(S=2,B=Z,(Z=e.join(""))&&a.push(Z),e.length=0):Z==="{"?S=3:(e.push("%",Z),S=0);else if(S===2)if("0"<=Z&&Z<="9")B+=Z;else{var ye=void 0;a.push(parseInt((ye=B)!=null?ye:"",10)),et--,S=0}else S===3&&(Z===""?(e.splice(0,0,"%{"),et--,S=0):Z!=="}"?e.push(Z):(S=e.join(""),/[A-Z]\w*/i.test(S)?(Z=S.toUpperCase(),(Z=Z.startsWith("BKY_")?Z.substring(4):null)&&Z in o.Msg$$module$build$src$core$msg?(S=o.Msg$$module$build$src$core$msg[Z],typeof S=="string"?Array.prototype.push.apply(a,_c(S,t,r)):t?a.push(`${S}`):a.push(S)):a.push("%{"+S+"}")):a.push("%{"+S+"}"),S=e.length=0))}for((t=e.join(""))&&a.push(t),ye=[],e.length=0,u=0;u<a.length;u++)typeof a[u]!="string"||r&&a[u]===`
`?((t=e.join(""))&&ye.push(t),e.length=0,ye.push(a[u])):e.push(a[u]);return(t=e.join(""))&&ye.push(t),e.length=0,ye},L_=function(e){return _c(e,!0,!0)},Mi=function(e){return typeof e!="string"?e:(e=_c(e,!1,!1),e.length?String(e[0]):"")},Q$=function(e){let t=!0;const r=o.Msg$$module$build$src$core$msg,a=e.match(/%{BKY_[A-Z]\w*}/gi);if(a)for(let u=0;u<a.length;u++){const S=a[u].toUpperCase();r[S.slice(6,-1)]===void 0&&(console.warn("No message string for "+a[u]+" in "+e),t=!1)}return t},Sa=function(e){const t=typeof e=="string"?Mi(e):e;var r=Number(t);if(!isNaN(r)&&0<=r&&r<=360)return{hue:r,hex:hc(r,N_(),D_()*255)};if(r=Rs(t))return{hue:null,hex:r};throw r='Invalid colour: "'+t+'"',e!==t&&(r+=' (from "'+e+'")'),Error(r)},Ia=function(){return lr},eE=function(e){if(lr=e,e===null){let t;(t=document.querySelector("."+yf))==null||t.remove()}},w_=function(){const e=_()||document.body,t=document.querySelector("div."+yf);t?lr=t:(lr=document.createElement("div"),lr.className=yf,lr.tabIndex=-1),C(lr,"keydown",null,z),e.appendChild(lr)},pc=function(e,t,r,a,u=!0){if(va(),Ba=e,id=r,r=lr){if(r.style.direction=t?"rtl":"ltr",r.style.display="block",!a&&e instanceof ri){let Z;a=(Z=e.getSourceBlock())==null?void 0:Z.workspace}var S;Rb=(S=a)!=null?S:null;var B;e=(B=a)!=null?B:v(),Ua=e.getRenderer().getClassName(),Va=e.getTheme().getClassName(),Ua&&Le(r,Ua),Va&&Le(r,Va),u&&(nd=o.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(r))}},va=function(){if(M_()){Ba=null;var e=lr;e&&(e.style.display="none",e.style.left="",e.style.top="",id&&(id(),id=null),e.textContent="",Ua&&(be(e,Ua),Ua=""),Va&&(be(e,Va),Va=""),v().markFocused(),nd&&(nd(),nd=null))}},M_=function(){return!!Ba},Ds=function(e){Ba===e&&va()},wl=function(e){let t=Rb===null,r=e;for(;!t&&r;){if(r===e){t=!0;break}r=e.options.parentWorkspace}t&&va()},x_=function(e,t,r){lr.style.left=e+"px",lr.style.top=t+"px",lr.style.height=r+"px"},F_=function(e,t,r,a){const u=iE(e,t,r);e=tE(e,t,r,a),u<0?x_(e,0,r.height+u):x_(e,u,r.height)},tE=function(e,t,r,a){return a?Math.min(Math.max(t.right-r.width,e.left),e.right-r.width):Math.max(Math.min(t.left,e.right-r.width),e.left)},iE=function(e,t,r){return t.bottom+r.height>=e.bottom?t.top-r.height:t.bottom},nE=function(e){return!(e==null||!e.repositionForWindowResize)},P_=function(){nE(Ba)&&Ba.repositionForWindowResize()||va()},rE=function(){return rd},B_=function(e){rd=e},Aa=function(e,t,r,a,u){if(pc(Nb,r,U_,a),t.length){u||(e instanceof PointerEvent?u=new Fe(e.clientX,e.clientY):(console.warn("Context menu opened with keyboard but no location given"),u=new Fe(0,0)));var S=oE(t,r,e,u);od=S,sE(S,r,u),setTimeout(function(){S.focus()},1),rd=null}else Ml()},oE=function(e,t,r,a){const u=new df;u.setRole(sr.MENU);for(let S=0;S<e.length;S++){const B=e[S];if(B.separator){u.addChild(new ZT);continue}const Z=new Xc(B.text);Z.setRightToLeft(t),Z.setRole(sr.MENUITEM),u.addChild(Z),Z.setEnabled(B.enabled),B.enabled&&Z.onAction(function(ye,et){Ml(),requestAnimationFrame(()=>{setTimeout(()=>{B.callback(B.scope,r,et,a)},0)})},{})}return u},sE=function(e,t,r){const a=ft();r=new Dt(r.y+a.top,r.y+a.top,r.x+a.left,r.x+a.left),aE(e);const u=e.getSize();t&&(r.left+=u.width,r.right+=u.width,a.left+=u.width,a.right+=u.width),F_(a,r,u,t),e.focus()},aE=function(e){var t=Ia();if(!t)throw Error("Attempting to create a context menu when widget div is null");t=e.render(t),Le(t,"blocklyContextMenu"),C(t,"contextmenu",null,lE),e.focus()},lE=function(e){e.preventDefault(),e.stopPropagation()},Ml=function(){Ds(Nb),rd=null},U_=function(){od&&(od.dispose(),od=null)},o.callbackFactory$$module$build$src$core$contextmenu=function(e,t){return()=>{o.disable$$module$build$src$core$events$utils();let r;try{r=t instanceof Element?ks(t,e.workspace):Ea(t,e.workspace);const a=e.getRelativeToSurfaceXY();a.x=e.RTL?a.x-o.config$$module$build$src$core$config.snapRadius:a.x+o.config$$module$build$src$core$config.snapRadius,a.y+=o.config$$module$build$src$core$config.snapRadius*2,r.moveBy(a.x,a.y)}finally{o.enable$$module$build$src$core$events$utils()}return ue()&&!r.isShadow()&&Ie(new(Be(pe.BLOCK_CREATE))(r)),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(r),r}},V_=function(e,t){return t=I(t,e.getParentSvg(),e.getInverseScreenCTM()),t.x/=e.scale,t.y/=e.scale,t},fc=function(e,t,r){t=V_(e,t),kb.set(e,Fe.difference(r,t))},gc=function(e,t){if(t=V_(e,t),e=kb.get(e),!e)throw Error("Drag not initialized");return Fe.sum(e,t)},uE=function(e,t=!1){const r=o.createElement$$module$build$src$core$utils$xml("xml");var a=H_(o.allUsedVarModels$$module$build$src$core$variables(e));a.hasChildNodes()&&r.appendChild(a);for(const u of e.getTopComments())r.appendChild(xl(u,t));for(e=e.getTopBlocks(!0),a=0;a<e.length;a++)r.appendChild(Fl(e[a],t));return r},xl=function(e,t=!1){const r=o.createElement$$module$build$src$core$utils$xml("comment");t||r.setAttribute("id",e.id),t=e.workspace;const a=e.getRelativeToSurfaceXY().clone();return a.x=t.RTL?t.getWidth()-a.x:a.x,r.setAttribute("x",`${a.x}`),r.setAttribute("y",`${a.y}`),r.setAttribute("w",`${e.getSize().width}`),r.setAttribute("h",`${e.getSize().height}`),e.getText()&&(r.textContent=e.getText()),e.isCollapsed()&&r.setAttribute("collapsed","true"),e.isOwnEditable()||r.setAttribute("editable","false"),e.isOwnMovable()||r.setAttribute("movable","false"),e.isOwnDeletable()||r.setAttribute("deletable","false"),r},H_=function(e){const t=o.createElement$$module$build$src$core$utils$xml("variables");for(let r=0;r<e.length;r++){const a=e[r],u=o.createElement$$module$build$src$core$utils$xml("variable");u.appendChild(o.createTextNode$$module$build$src$core$utils$xml(a.getName())),a.getType()&&u.setAttribute("type",a.getType()),u.id=a.getId(),t.appendChild(u)}return t},Fl=function(e,t){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let r=0;if(e.workspace.RTL&&(r=e.workspace.getWidth()),t=Zo(e,t),z_(t)){const a=e.getRelativeToSurfaceXY();t.setAttribute("x",String(Math.round(e.workspace.RTL?r-a.x:a.x))),t.setAttribute("y",String(Math.round(a.y)))}return t},cE=function(e){if(e.isSerializable()){const t=o.createElement$$module$build$src$core$utils$xml("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},dE=function(e,t){for(const r of e.getFields())(e=cE(r))&&t.appendChild(e)},Zo=function(e,t){if(e.isInsertionMarker())return(t=e.getChildren(!1)[0])?Zo(t):new DocumentFragment;const r=o.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(r.setAttribute("type",e.type),t||(r.id=e.id),e.mutationToDom){var a=e.mutationToDom();a&&(a.hasChildNodes()||a.hasAttributes())&&r.appendChild(a)}if(dE(e,r),a=e.getCommentText()){var u=e.getIcon(qi.COMMENT),S=u.getBubbleSize(),B=u.bubbleIsVisible();u=u.getBubbleLocation();var Z=o.createElement$$module$build$src$core$utils$xml("comment");Z.appendChild(o.createTextNode$$module$build$src$core$utils$xml(a)),Z.setAttribute("pinned",`${B}`),Z.setAttribute("h",`${S.height}`),Z.setAttribute("w",`${S.width}`),u&&(Z.setAttribute("x",`${e.workspace.RTL?e.workspace.getWidth()-(u.x+S.width):u.x}`),Z.setAttribute("y",`${u.y}`)),r.appendChild(Z)}for(e.data&&(a=o.createElement$$module$build$src$core$utils$xml("data"),a.appendChild(o.createTextNode$$module$build$src$core$utils$xml(e.data)),r.appendChild(a)),a=0;a<e.inputList.length;a++){S=e.inputList[a];var ye=void 0;B=!0,S.type!==o.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&S.type!==o.inputTypes$$module$build$src$core$inputs$input_types.END_ROW&&(u=S.connection.targetBlock(),S.type===o.inputTypes$$module$build$src$core$inputs$input_types.VALUE?ye=o.createElement$$module$build$src$core$utils$xml("value"):S.type===o.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(ye=o.createElement$$module$build$src$core$utils$xml("statement")),Z=S.connection.getShadowDom(),!Z||u&&u.isShadow()||ye.appendChild(G_(Z,t)),u&&(u=Zo(u,t),u.nodeType===Oo.ELEMENT_NODE&&(ye.appendChild(u),B=!1)),ye.setAttribute("name",S.name),B||r.appendChild(ye))}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&r.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&r.setAttribute("collapsed","true"),e.isEnabled()||r.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||r.setAttribute("deletable","false"),e.isOwnMovable()||r.setAttribute("movable","false"),e.isOwnEditable()||r.setAttribute("editable","false"),ye=e.getNextBlock();let et;return ye&&(a=Zo(ye,t),a.nodeType===Oo.ELEMENT_NODE&&(et=o.createElement$$module$build$src$core$utils$xml("next"),et.appendChild(a),r.appendChild(et))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||ye&&ye.isShadow()||et.appendChild(G_(e,t)),r},G_=function(e,t){let r=e=e.cloneNode(!0),a;for(;r;)if(t&&r.nodeName==="shadow"&&r.removeAttribute("id"),r.firstChild)r=r.firstChild;else{for(;r&&!r.nextSibling;){a=r,r=r.parentNode;let u;a.nodeType===Oo.TEXT_NODE&&a.data.trim()===""&&((u=r)==null?void 0:u.firstChild)!==a&&Ke(a)}r&&(a=r,r=r.nextSibling,a.nodeType===Oo.TEXT_NODE&&a.data.trim()===""&&Ke(a))}return e},Zr=function(e){return ai(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},hE=function(e){e=Zr(e).split("<");let t="";for(let r=1;r<e.length;r++){const a=e[r];a[0]==="/"&&(t=t.substring(2)),e[r]=t+"<"+a,a[0]!=="/"&&a.slice(-2)!=="/>"&&(t+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},_E=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=o.domToWorkspace$$module$build$src$core$xml(e,t),t.setResizesEnabled(!0),e},o.domToWorkspace$$module$build$src$core$xml=function(e,t){let r=0;t.RTL&&(r=t.getWidth());const a=[];Ht();const u=o.getGroup$$module$build$src$core$events$utils();u||o.setGroup$$module$build$src$core$events$utils(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);let S=!0;try{for(let B=0,Z;Z=e.childNodes[B];B++){const ye=Z.nodeName.toLowerCase(),et=Z;if(ye==="block"||ye==="shadow"&&!Ce()){const Ii=ks(et,t);a.push(Ii.id);let ci;const Sn=parseInt((ci=et.getAttribute("x"))!=null?ci:"10",10);let wo;const ho=parseInt((wo=et.getAttribute("y"))!=null?wo:"10",10);isNaN(Sn)||isNaN(ho)||Ii.moveBy(t.RTL?r-Sn:Sn,ho,["create"]),S=!1}else{if(ye==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(ye==="comment")W_(et,t);else if(ye==="variables"){if(S)X_(et,t);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");S=!1}}}}finally{o.setGroup$$module$build$src$core$events$utils(u),t.setResizesEnabled&&t.setResizesEnabled(!0),t.rendered&&qo(),pt()}return Ie(new(Be(pe.FINISHED_LOADING))(t)),a},W_=function(e,t){var r;const a=(r=e.getAttribute("id"))!=null?r:void 0;r=t.rendered?new No(t,a):new ud(t,a);var u;r.setText((u=e.textContent)!=null?u:"");var S;u=parseInt((S=e.getAttribute("x"))!=null?S:"",10);let B;S=parseInt((B=e.getAttribute("y"))!=null?B:"",10),isNaN(u)||isNaN(S)||(u=t.RTL?t.getWidth()-u:u,r.moveTo(new Fe(u,S)));var Z;t=parseInt((Z=e.getAttribute("w"))!=null?Z:"",10);let ye;return Z=parseInt((ye=e.getAttribute("h"))!=null?ye:"",10),isNaN(t)||isNaN(Z)||r.setSize(new kt(t,Z)),e.getAttribute("collapsed")==="true"&&r.setCollapsed(!0),e.getAttribute("editable")==="false"&&r.setEditable(!1),e.getAttribute("movable")==="false"&&r.setMovable(!1),e.getAttribute("deletable")==="false"&&r.setDeletable(!1),r},pE=function(e,t){if(!t.getBlocksBoundingBox)return o.domToWorkspace$$module$build$src$core$xml(e,t);var r=t.getBlocksBoundingBox();if(e=o.domToWorkspace$$module$build$src$core$xml(e,t),r&&r.top!==r.bottom){var a=r.bottom;r=t.RTL?r.right:r.left;var u=1/0;let S=-1/0,B=1/0;for(let Z=0;Z<e.length;Z++){const ye=t.getBlockById(e[Z]).getRelativeToSurfaceXY();ye.y<B&&(B=ye.y),ye.x<u&&(u=ye.x),ye.x>S&&(S=ye.x)}for(a=a-B+10,r=t.RTL?r-S:r-u,u=0;u<e.length;u++)t.getBlockById(e[u]).moveBy(r,a,["create"])}return e},o.domToBlock$$module$build$src$core$xml=function(e,t){return e=ks(e,t),t.rendered&&qo(),e},ks=function(e,t){o.disable$$module$build$src$core$events$utils();var r=t.getAllVariables();let a;try{if(a=mc(e,t),t.rendered){const u=a,S=a.getDescendants(!1);u.setConnectionTracking(!1);for(let B=S.length-1;B>=0;B--)S[B].initSvg();for(let B=S.length-1;B>=0;B--)S[B].queueRender();setTimeout(function(){u.disposed||u.setConnectionTracking(!0)},1),t.resizeContents()}else{const u=a.getDescendants(!1);for(let S=u.length-1;S>=0;S--)u[S].initModel()}}finally{o.enable$$module$build$src$core$events$utils()}if(ue()){for(e=Rl(t,r),t=0;t<e.length;t++)r=e[t],Ie(new(Be(pe.VAR_CREATE))(r));Ie(new(Be(pe.BLOCK_CREATE))(a))}return a},X_=function(e,t){for(let a=0;a<e.children.length;a++){var r=e.children[a];const u=r.getAttribute("type"),S=r.getAttribute("id");if(r=r.textContent,!r)break;let B;t.getVariableMap().createVariable(r,(B=u)!=null?B:void 0,S)}},fE=function(e){const t={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let r=0;r<e.children.length;r++){const a=e.children[r];if(a.nodeType!==Oo.TEXT_NODE)switch(a.nodeName.toLowerCase()){case"mutation":t.mutation.push(a);break;case"comment":t.comment.push(a);break;case"data":t.data.push(a);break;case"title":case"field":t.field.push(a);break;case"value":case"statement":t.input.push(a);break;case"next":t.next.push(a);break;default:console.warn("Ignoring unknown tag: "+a.nodeName)}}return t},gE=function(e,t){let r=!1;for(let a=0;a<e.length;a++){const u=e[a];t.domToMutation&&(t.domToMutation(u),t.initSvg&&(r=!0))}return r},mE=function(e,t){for(let r=0;r<e.length;r++){const a=e[r],u=a.textContent,S=a.getAttribute("pinned")==="true";let B;const Z=parseInt((B=a.getAttribute("w"))!=null?B:"50",10);let ye;const et=parseInt((ye=a.getAttribute("h"))!=null?ye:"50",10);let Ii,ci=parseInt((Ii=a.getAttribute("x"))!=null?Ii:"",10),Sn;const wo=parseInt((Sn=a.getAttribute("y"))!=null?Sn:"",10);t.setCommentText(u);const ho=t.getIcon(qi.COMMENT);isNaN(Z)||isNaN(et)||ho.setBubbleSize(new kt(Z,et)),ho.setBubbleVisible(S),setTimeout(()=>{isNaN(ci)||isNaN(wo)||(ci=t.workspace.RTL?t.workspace.getWidth()-(ci+Z):ci,ho.setBubbleLocation(new Fe(ci,wo))),ho.setBubbleVisible(S)},1)}},$E=function(e,t){for(let r=0;r<e.length;r++)t.data=e[r].textContent},EE=function(e,t){for(let r=0;r<e.length;r++){const a=e[r],u=a.getAttribute("name");u?SE(t,u,a):console.warn(`Ignoring unnamed field in block ${t.type}`)}},K_=function(e){let t=null,r=null;for(let a=0;a<e.childNodes.length;a++){const u=e.childNodes[a];z_(u)&&(u.nodeName.toLowerCase()==="block"?t=u:u.nodeName.toLowerCase()==="shadow"&&(r=u))}return{childBlockElement:t,childShadowElement:r}},TE=function(e,t,r,a){for(let S=0;S<e.length;S++){var u=e[S];const B=u.getAttribute("name"),Z=B?r.getInput(B):null;if(!Z){console.warn("Ignoring non-existent input "+B+" in block "+a);break}if(u=K_(u),u.childBlockElement){if(!Z.connection)throw TypeError("Input connection does not exist.");mc(u.childBlockElement,t,Z.connection,!1)}if(u.childShadowElement){let ye;(ye=Z.connection)==null||ye.setShadowDom(u.childShadowElement)}}},bE=function(e,t,r){for(let a=0;a<e.length;a++){const u=K_(e[a]);if(u.childBlockElement){if(!r.nextConnection)throw TypeError("Next statement does not exist.");if(r.nextConnection.isConnected())throw TypeError("Next statement is already connected.");mc(u.childBlockElement,t,r.nextConnection,!0)}u.childShadowElement&&r.nextConnection&&r.nextConnection.setShadowDom(u.childShadowElement)}},mc=function(e,t,r,a){var u;const S=e.getAttribute("type");if(!S)throw TypeError("Block type unspecified: "+e.outerHTML);var B=(u=e.getAttribute("id"))!=null?u:void 0;u=t.newBlock(S,B),B=fE(e);const Z=gE(B.mutation,u);if(mE(B.comment,u),$E(B.data,u),r)if(a)if(u.previousConnection)r.connect(u.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(u.outputConnection)r.connect(u.outputConnection);else if(u.previousConnection)r.connect(u.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(EE(B.field,u),TE(B.input,t,u,S),bE(B.next,t,u),Z&&u.initSvg(),(t=e.getAttribute("inline"))&&u.setInputsInline(t==="true"),(t=e.getAttribute("disabled"))&&u.setDisabledReason(t==="true"||t==="disabled",Sr),t=e.getAttribute("disabled-reasons"),t!==null)for(var ye of t.split(","))u.setDisabledReason(!0,decodeURIComponent(ye));if((ye=e.getAttribute("deletable"))&&u.setDeletable(ye==="true"),(ye=e.getAttribute("movable"))&&u.setMovable(ye==="true"),(ye=e.getAttribute("editable"))&&u.setEditable(ye==="true"),(ye=e.getAttribute("collapsed"))&&u.setCollapsed(ye==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=u.getChildren(!1),ye=0;ye<e.length;ye++)if(!e[ye].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");u.setShadow(!0)}return u},SE=function(e,t,r){const a=e.getField(t);a?a.fromXml(r):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},IE=function(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes[t];if(r.nodeName.toLowerCase()==="next"){e.removeChild(r);break}}},z_=function(e){return e.nodeType===Oo.ELEMENT_NODE},Qr=function(e,t){s(De.FIELD,e,t,!0)},vE=function(e){p(De.FIELD,e)},o.fromJson$$module$build$src$core$field_registry=function(e){return Fb.fromJsonInternal(e)},AE=function(e){const t=M(De.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},Oa=function(e){return e&&typeof e=="object"&&"src"in e&&typeof e.src=="string"&&"alt"in e&&typeof e.alt=="string"&&"width"in e&&typeof e.width=="number"&&"height"in e&&typeof e.height=="number"},o.register$$module$build$src$core$extensions=function(e,t){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Ha[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof t!="function")throw Error('Error: Extension "'+e+'" must be a function');Ha[e]=t},o.registerMixin$$module$build$src$core$extensions=function(e,t){if(!t||typeof t!="object")throw Error('Error: Mixin "'+e+'" must be a object');o.register$$module$build$src$core$extensions(e,function(){this.mixin(t)})},o.registerMutator$$module$build$src$core$extensions=function(e,t,r,a){const u='Error when registering mutator "'+e+'": ';q_(u,t);const S=j_(t,u);if(r&&typeof r!="function")throw Error(u+'Extension "'+e+'" is not a function');o.register$$module$build$src$core$extensions(e,function(){S&&this.setMutator(new o.MutatorIcon$$module$build$src$core$icons$mutator_icon(a||[],this)),this.mixin(t),r&&r.apply(this)})},OE=function(e){Y_(e)?delete Ha[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Y_=function(e){return!!Ha[e]},$c=function(e,t,r){const a=Ha[e];if(typeof a!="function")throw Error('Error: Extension "'+e+'" not found.');let u;if(r?CE(e,t):u=Tc(t),a.apply(t),r)q_('Error after applying mutator "'+e+'": ',t);else if(!NE(u,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},CE=function(e,t){if(Tc(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},yE=function(e,t){return Ec(e.mutationToDom,e.domToMutation,t+" mutationToDom/domToMutation")},RE=function(e,t){return Ec(e.saveExtraState,e.loadExtraState,t+" saveExtraState/loadExtraState")},j_=function(e,t){return Ec(e.compose,e.decompose,t+" compose/decompose")},Ec=function(e,t,r){if(e&&t){if(typeof e!="function"||typeof t!="function")throw Error(r+" must be a function");return!0}if(!e&&!t)return!1;throw Error(r+"Must have both or neither functions")},q_=function(e,t){const r=yE(t,e),a=RE(t,e);if(!r&&!a)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");j_(t,e)},Tc=function(e){const t=[];return e.domToMutation!==void 0&&t.push(e.domToMutation),e.mutationToDom!==void 0&&t.push(e.mutationToDom),e.saveExtraState!==void 0&&t.push(e.saveExtraState),e.loadExtraState!==void 0&&t.push(e.loadExtraState),e.compose!==void 0&&t.push(e.compose),e.decompose!==void 0&&t.push(e.decompose),t},NE=function(e,t){if(t=Tc(t),t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(e[r]!==t[r])return!1;return!0},DE=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const t=setInterval(function(){document.readyState==="complete"&&(clearInterval(t),e())},10)}},o.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,t){const r=[];return function(){r.includes(this.type)||(kE(this,e,t),r.push(this.type)),this.setTooltip((function(){const a=String(this.getFieldValue(e));return Mi(t[a])}).bind(this))}},kE=function(e,t,r){var a=e.getField(t);if(a instanceof bn&&!a.isOptionListDynamic()){a=a.getOptions();for(const u of a)u!==bn.SEPARATOR&&([,a]=u,r[a]===void 0&&console.warn(`No tooltip mapping for value ${a} of field ${t} of block type ${e.type}.`))}},o.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,t){return function(){this.setTooltip((function(){const r=this.getField(t);return Mi(e).replace("%1",r?r.getText():"")}).bind(this))}},LE=function(){const e=this.tooltip;this.setTooltip((function(){const t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||e}).bind(this))},tt=function(e,t){return" "+e+","+t+" "},zn=function(e,t){return" "+e+t.join("")},dn=function(e,t){return" M "+e+","+t+" "},Ri=function(e,t){return" m "+e+","+t+" "},eo=function(e,t){return" l "+e+","+t+" "},Ca=function(e){return" l"+e.join("")},nt=function(e,t){return" "+e+" "+t+" "},xi=function(e,t,r,a){return e+" "+r+" "+r+" "+t+a},wE=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},ME=function(e,t){let r=null;t=t.outputConnection;const a=t?.getConnectionChecker();for(let u=0,S;S=e.inputList[u];u++){const B=S.connection;let Z;if(B&&((Z=a)!=null&&Z.canConnect(t,B,!1))){if(r)return null;r=B}}return r},xE=function(e,t){let r;for(;r=ME(e,t);)if(e=r.targetBlock(),!e||e.isShadow())return r;return null},J_=function(e){return ae(e)&&typeof e.getType=="function"&&typeof e.initView=="function"&&typeof e.dispose=="function"&&typeof e.getWeight=="function"&&typeof e.getSize=="function"&&typeof e.applyColour=="function"&&typeof e.hideForInsertionMarker=="function"&&typeof e.updateEditable=="function"&&typeof e.updateCollapsed=="function"&&typeof e.isShownWhenCollapsed=="function"&&typeof e.setOffsetInBlock=="function"&&typeof e.onLocationChange=="function"&&typeof e.onClick=="function"},FE=function(e){return J_(e)&&ys(e)&&Cl(e)&&typeof e.setText=="function"&&typeof e.getText=="function"&&typeof e.setBubbleSize=="function"&&typeof e.getBubbleSize=="function"&&typeof e.setBubbleLocation=="function"&&typeof e.getBubbleLocation=="function"&&e.getType()===qi.COMMENT},bc=function(e){if(!(e.getDescendants(!1).length>100)){var t=e.workspace,r=e.getSvgRoot();t.getAudioManager().play("delete");var a=e.getRelativeToSurfaceXY(),u=r.cloneNode(!0);u.setAttribute("transform","translate("+a.x+","+a.y+")");var S;(S=t.getLayerManager())==null||S.appendToAnimationLayer({getSvgRoot:()=>u}),Z_(u,{x:a.x,y:a.y,width:e.width,height:e.height},t.RTL,new Date)}},Z_=function(e,t,r,a){const u=(new Date().getTime()-a.getTime())/150;u>1?Ke(e):(e.setAttribute("transform","translate("+(t.x+(r?-1:1)*t.width/2*u)+","+(t.y+t.height/2*u)+") scale("+(1-u)+")"),setTimeout(Z_,10,e,t,r,a))},Q_=function(e){var t=e.workspace;const r=t.scale;if(t.getAudioManager().play("click"),!(r<1)){var a=t.getSvgXY(e.getSvgRoot());e.outputConnection?(a.x+=(e.RTL?3:-3)*r,a.y+=13*r):e.previousConnection&&(a.x+=(e.RTL?-23:23)*r,a.y+=3*r);var u=de(he.CIRCLE,{cx:a.x,cy:a.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());e=de(he.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*r},u),t=de(he.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},u),e.beginElement(),t.beginElement(),setTimeout(()=>{Ke(u)},150)}},ep=function(e){if(ya(),e.workspace.getAudioManager().play("disconnect"),!(e.workspace.scale<1)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),su=e,tp(e,t,new Date,0)}},tp=function(e,t,r,a){const u=[.66,1,.66,0,-.66,-1,-.66,0];let S="";r.getTime()+200>new Date().getTime()&&(S=`skewX(${Math.round(u[a%u.length]*t)})`,fd=setTimeout(tp,15,e,t,r,a+1)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${S}`)},ya=function(){su&&(fd&&(clearTimeout(fd),fd=null),su.getSvgRoot().setAttribute("transform",su.getTranslation()),su=null)},PE=function(e,t){e.workspace.RTL&&(t.x=e.workspace.getWidth()-t.x);const r=e.workspace,a=o.config$$module$build$src$core$config.snapRadius,u=Fe.difference(t,e.getRelativeToSurfaceXY()),S=new Fe(0,0),B=r.getAllBlocks(!1).filter(Z=>Z.id!=e.id).map(Z=>Z.getRelativeToSurfaceXY());for(;BE(Fe.sum(t,S),B)||UE(e,Fe.sum(u,S),a);)r.RTL?S.translate(-a,a*2):S.translate(a,a*2);e.moveTo(Fe.sum(t,S))},BE=function(e,t){return t.some(r=>Math.abs(r.x-e.x)<=1&&Math.abs(r.y-e.y)<=1)},UE=function(e,t,r){return e.getConnections_(!1).some(a=>!!a.closest(r,t).connection)},Ra=function(e,t,r){const a=r.getBoundingRectangle(),u=a.right-a.left,S=Ta(t.top,a.top,t.top+t.height-(a.bottom-a.top))-a.top;let B=t.left;return t=t.left+t.width-u,e.RTL?B=Math.min(t,B):t=Math.max(B,t),(e=Ta(B,a.left,t)-a.left)||S?(r.moveBy(e,S,["inbounds"]),!0):!1},ip=function(e){return t=>{var r=e.getMetricsManager();if(r.hasFixedEdges()&&!e.isDragging()){var a;if(NT.includes((a=t.type)!=null?a:"")){a=r.getScrollMetrics(!0);const u=VE(e,t);u&&(r=o.getGroup$$module$build$src$core$events$utils()||!1,o.setGroup$$module$build$src$core$events$utils(t.group),Ra(e,a,u)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),o.setGroup$$module$build$src$core$events$utils(r))}else xe(t)&&t.scale&&t.oldScale&&t.scale>t.oldScale&&Sc(e)}}},VE=function(e,t){let r=null;switch(t.type){case pe.BLOCK_CREATE:case pe.BLOCK_MOVE:(r=e.getBlockById(t.blockId))&&(r=r.getRootBlock());break;case pe.COMMENT_CREATE:case pe.COMMENT_MOVE:case pe.COMMENT_RESIZE:r=e.getCommentById(t.commentId)}return r},Sc=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);var r=e.getTopBoundedElements();for(let a=0,u;u=r[a];a++)Ra(e,t,u)}},br=function(e){return e&&typeof e.isDeletable=="function"&&typeof e.dispose=="function"&&typeof e.setDeleteStyle=="function"},np=function(e,t){const r=e.getIcons();for(const a of e.inputList){if(!a.isVisible())continue;r.push(...a.fieldRow);let u;if((u=a.connection)!=null&&u.targetBlock())if(e=a.connection.targetBlock(),a.connection.type!==qe.NEXT_STATEMENT||t)r.push(e);else{let S;(e=(S=e.lastConnectionInStack(!1))==null?void 0:S.getSourceBlock())&&r.push(e)}else{let S;((S=a.connection)==null?void 0:S.type)===qe.INPUT_VALUE&&r.push(a.connection)}}return r},Na=function(e,t){const r=e.workspace.getTopBoundedElements(!0).filter(u=>ae(u));e=r.indexOf(e instanceof ui?e.getRootBlock():e)+t;let a=null;if(e>=0&&e<r.length?a=r[e]:e<0?a=r[r.length-1]:e>=r.length&&(a=r[0]),t<0&&a instanceof ui){let u,S;return(S=(u=a.lastConnectionInStack(!1))==null?void 0:u.getSourceBlock())!=null?S:a}return a},kr=function(e,t){var r;let a;const u=e instanceof ui?(a=(r=e.outputConnection)==null?void 0:r.targetBlock())!=null?a:e.getSurroundParent():e.getSourceBlock();return!(u instanceof ui)||(r=np(u,t>0),e=r.indexOf(e),e===-1)?null:(t=e+t,t>=0&&t<r.length?r[t]:null)},rp=function(e,t){s(De.ICON,e.toString(),t)},HE=function(e){p(De.ICON,e)},Da=function(e){return e&&typeof e.getRelativeToSurfaceXY=="function"&&typeof e.isMovable=="function"&&typeof e.startDrag=="function"&&typeof e.drag=="function"&&typeof e.endDrag=="function"&&typeof e.revertDrag=="function"},GE=function(e){return e&&typeof e.autoHide=="function"},Qo=function(e){return typeof e.getProcedureModel=="function"&&typeof e.doProcedureUpdate=="function"&&typeof e.isProcedureDef=="function"},Ic=function(e){return e&&typeof e.startPublishing=="function"&&typeof e.stopPublishing=="function"},Pl=function(e){const t=e.getProcedureMap().getProcedures().filter(a=>!a.getReturnTypes()).map(a=>[a.getName(),a.getParameters().map(u=>u.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(a=>{!Qo(a)&&ga(a)&&t.push(a.getProcedureDef())});const r=e.getProcedureMap().getProcedures().filter(a=>!!a.getReturnTypes()).map(a=>[a.getName(),a.getParameters().map(u=>u.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(a=>{!Qo(a)&&ga(a)&&r.push(a.getProcedureDef())}),t.sort(op),r.sort(op),[t,r]},op=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},o.findLegalName$$module$build$src$core$procedures=function(e,t){if(t.isInFlyout)return e;for(e=e||o.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!WE(e,t.workspace,t);){const r=e.match(/^(.*?)(\d+)$/);e=r?r[1]+(parseInt(r[2])+1):e+"2"}return e},WE=function(e,t,r){return!sp(e,t,r)},sp=function(e,t,r){for(const a of t.getAllBlocks(!1))if(a!==r&&ga(a)&&o.Names$$module$build$src$core$names.equals(a.getProcedureDef()[0],e))return!0;r=r&&Qo(r)?r?.getProcedureModel():void 0;for(const a of t.getProcedureMap().getProcedures())if(a!==r&&o.Names$$module$build$src$core$names.equals(a.getName(),e))return!0;return!1},o.rename$$module$build$src$core$procedures=function(e){var t=this.getSourceBlock();if(!t)throw new Ui;e=e.trim();const r=o.findLegalName$$module$build$src$core$procedures(e,t);Qo(t)&&!t.isInsertionMarker()&&t.getProcedureModel().setName(r);const a=this.getValue();if(a!==e&&a!==r)for(e=t.workspace.getAllBlocks(!1),t=0;t<e.length;t++){const u=e[t];u.renameProcedure&&u.renameProcedure(a,r)}return r},XE=function(e){function t(S,B){for(let ye=0;ye<S.length;ye++){var Z=S[ye][0];const et=S[ye][1],Ii=o.createElement$$module$build$src$core$utils$xml("block");Ii.setAttribute("type",B),Ii.setAttribute("gap","16");const ci=o.createElement$$module$build$src$core$utils$xml("mutation");for(ci.setAttribute("name",Z),Ii.appendChild(ci),Z=0;Z<et.length;Z++){const Sn=o.createElement$$module$build$src$core$utils$xml("arg");Sn.setAttribute("name",et[Z]),ci.appendChild(Sn)}r.push(Ii)}}const r=[];if(mi.procedures_defnoreturn){var a=o.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","procedures_defnoreturn"),a.setAttribute("gap","16");var u=o.createElement$$module$build$src$core$utils$xml("field");u.setAttribute("name","NAME"),u.appendChild(o.createTextNode$$module$build$src$core$utils$xml(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),a.appendChild(u),r.push(a)}return mi.procedures_defreturn&&(a=o.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","procedures_defreturn"),a.setAttribute("gap","16"),u=o.createElement$$module$build$src$core$utils$xml("field"),u.setAttribute("name","NAME"),u.appendChild(o.createTextNode$$module$build$src$core$utils$xml(o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),a.appendChild(u),r.push(a)),mi.procedures_ifreturn&&(a=o.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","procedures_ifreturn"),a.setAttribute("gap","16"),r.push(a)),r.length&&r[r.length-1].setAttribute("gap","24"),e=Pl(e),t(e[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),r},vc=function(e){return ap(e,!1)},ap=function(e,t=!0){function r(u,S){for(const[B,Z]of u)a.push({kind:"block",type:S,gap:16,extraState:{name:B,params:Z}})}if(t)return cn("The XML return value of Blockly.Procedures.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),XE(e);const a=[];return mi.procedures_defnoreturn&&a.push({kind:"block",type:"procedures_defnoreturn",gap:16,fields:{NAME:o.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE}}),mi.procedures_defreturn&&a.push({kind:"block",type:"procedures_defreturn",gap:16,fields:{NAME:o.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE}}),mi.procedures_ifreturn&&a.push({kind:"block",type:"procedures_ifreturn",gap:16}),a.length&&(a[a.length-1].gap=24),e=Pl(e),r(e[0],"procedures_callnoreturn"),r(e[1],"procedures_callreturn"),a},lp=function(e){var t=[],r=e.getBlocksByType("procedures_mutatorarg",!1);for(let S=0,B;B=r[S];S++)t.push(B.getFieldValue("NAME"));r=o.createElement$$module$build$src$core$utils$xml("xml");const a=o.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","procedures_mutatorarg");const u=o.createElement$$module$build$src$core$utils$xml("field");u.setAttribute("name","NAME"),t=ic(o.DEFAULT_ARG$$module$build$src$core$procedures,t),t=o.createTextNode$$module$build$src$core$utils$xml(t),u.appendChild(t),a.appendChild(u),r.appendChild(a),e.updateToolbox(r)},up=function(e){if(Se(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=ke(e.workspaceId).getBlockById(e.blockId);var t=e.type;(t==="procedures_defnoreturn"||t==="procedures_defreturn")&&(e=e.getIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),lp(e),e.addChangeListener(KE))}},KE=function(e){(X(e)||W(e)||re(e)||se(e))&&(e=ke(e.workspaceId),lp(e))},cp=function(e,t){return t.getAllBlocks(!1).filter(r=>zE(r,e)||h$(r)&&o.Names$$module$build$src$core$names.equals(r.getProcedureCall(),e))},zE=function(e,t){return Qo(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&o.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),t)},o.mutateCallers$$module$build$src$core$procedures=function(e){const t=Ce();var r=e.getProcedureDef()[0];const a=e.mutationToDom(!0);e=cp(r,e.workspace);for(let S=0,B;B=e[S];S++){r=(r=B.mutationToDom())&&ai(r),B.domToMutation&&B.domToMutation(a);var u=B.mutationToDom();u=u&&ai(u),r!==u&&(o.setRecordUndo$$module$build$src$core$events$utils(!1),Ie(new(Be(pe.BLOCK_CHANGE))(B,"mutation",null,r,u)),o.setRecordUndo$$module$build$src$core$events$utils(t))}},o.getDefinition$$module$build$src$core$procedures=function(e,t){for(const r of t.getAllBlocks(!1))if(Qo(r)&&r.isProcedureDef()&&o.Names$$module$build$src$core$names.equals(r.getProcedureModel().getName(),e)||ga(r)&&o.Names$$module$build$src$core$names.equals(r.getProcedureDef()[0],e))return r;return null},Ac=function(e){return e.isDynamic},YE=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},jE=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Bl=function(e,t){s(De.RENDERER,e,t)},qE=function(e){p(De.RENDERER,e)},dp=function(e,t,r){return e=new(R(De.RENDERER,e))(e),e.init(t,r),e},Oc=function(e){Os(e.getTargetWorkspace(),void 0,"String")},Cc=function(e){Os(e.getTargetWorkspace(),void 0,"Number")},yc=function(e){Os(e.getTargetWorkspace(),void 0,"Colour")},Rc=function(e){return hp(e,!1)},hp=function(e,t=!0){return mi.variables_set_dynamic||mi.variables_get_dynamic||console.warn("There are no dynamic variable blocks, but there is a dynamic variable category."),t?(cn("The XML return value of Blockly.VariablesDynamic.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),JE(e)):(e.registerButtonCallback("CREATE_VARIABLE_STRING",Oc),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Cc),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",yc),[{kind:"button",text:o.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE,callbackkey:"CREATE_VARIABLE_STRING"},{kind:"button",text:o.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE,callbackkey:"CREATE_VARIABLE_NUMBER"},{kind:"button",text:o.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE,callbackkey:"CREATE_VARIABLE_COLOUR"},...tc(e,e.getVariableMap().getAllVariables(),!1,"variables_get_dynamic","variables_set_dynamic")])},JE=function(e){let t=[],r=document.createElement("button");return r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(r),r=document.createElement("button"),r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(r),r=document.createElement("button"),r.setAttribute("text",o.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),r.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(r),e.registerButtonCallback("CREATE_VARIABLE_STRING",Oc),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Cc),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",yc),e=_p(e),t=t.concat(e)},_p=function(e){e=e.getVariableMap().getAllVariables();const t=[];if(e.length>0){if(mi.variables_set_dynamic){var r=e[e.length-1];const a=o.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","variables_set_dynamic"),a.setAttribute("gap","24"),a.appendChild(Cs(r)),t.push(a)}if(mi.variables_get_dynamic){e.sort(ma);for(let a=0,u;u=e[a];a++)r=o.createElement$$module$build$src$core$utils$xml("block"),r.setAttribute("type","variables_get_dynamic"),r.setAttribute("gap","8"),r.appendChild(Cs(u)),t.push(r)}}return t},Nc=function(e,t){const r=e.toCopyData();return _u=r,pu=Y(e)&&e.workspace instanceof Cn?e.workspace:null,Dd=t,r},Dc=function(){return _u},ZE=function(e){_u=e},kc=function(){return pu},QE=function(e){pu=e},pp=function(){return Dd},eT=function(e){Dd=e},es=function(e,t,r){return e&&t?fp(e,t,r):_u&&pu?fp(_u,pu,Dd):null},fp=function(e,t,r){let a;t=t.isMutator?t:(a=t.options.parentWorkspace)!=null?a:t;let u,S;return(S=(u=M(De.PASTER,e.paster,!1))==null?void 0:u.paste(e,t,r))!=null?S:null},Ul=function(e){return e&&typeof e.toCopyData=="function"},gp=function(){li.registry.register({name:so.ESCAPE,preconditionFn(e){return!e.isReadOnly()},callback(e){return e.hideChaff(),!0},keyCodes:[oi.ESC]})},mp=function(){li.registry.register({name:so.DELETE,preconditionFn(e,t){return t=t.focusedNode,!e.isReadOnly()&&t!=null&&br(t)&&t.isDeletable()&&!e.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(e,t,r,a){return t.preventDefault(),e=a.focusedNode,e instanceof ui?e.checkAndDelete():br(e)&&e.isDeletable()&&(o.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),o.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[oi.DELETE,oi.BACKSPACE]})},Lc=function(e){return Ul(e)&&br(e)&&Da(e)?e.isCopyable?e.isCopyable():e instanceof ui||e instanceof No?e.isOwnDeletable()&&e.isOwnMovable():e.isDeletable()&&e.isMovable():!1},$p=function(e){return Lc(e)&&br(e)&&e.isDeletable()},Ep=function(){const e=li.registry.createSerializedKey(oi.C,[oi.CTRL]),t=li.registry.createSerializedKey(oi.C,[oi.META]);li.registry.register({name:so.COPY,preconditionFn(r,a){return a=a.focusedNode,r=r.isFlyout?r.targetWorkspace:r,!!a&&!!r&&!r.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&Lc(a)},callback(r,a,u,S){return a.preventDefault(),a=S.focusedNode,!a||!Ul(a)||!Lc(a)||(r=r.isFlyout?r.targetWorkspace:r,!r)?!1:(a.workspace.isFlyout||r.hideChaff(),r=Da(a)&&a.workspace==r?a.getRelativeToSurfaceXY():void 0,!!Nc(a,r))},keyCodes:[e,t]})},Tp=function(){const e=li.registry.createSerializedKey(oi.X,[oi.CTRL]),t=li.registry.createSerializedKey(oi.X,[oi.META]);li.registry.register({name:so.CUT,preconditionFn(r,a){return a=a.focusedNode,!!a&&!r.isReadOnly()&&!r.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&$p(a)},callback(r,a,u,S){return r=S.focusedNode,!r||!$p(r)||!Ul(r)?!1:(a=Da(r)?r.getRelativeToSurfaceXY():void 0,a=Nc(r,a),r instanceof ui?r.checkAndDelete():br(r)&&r.dispose(),!!a)},keyCodes:[e,t]})},bp=function(){const e=li.registry.createSerializedKey(oi.V,[oi.CTRL]),t=li.registry.createSerializedKey(oi.V,[oi.META]);li.registry.register({name:so.PASTE,preconditionFn(){var r=kc();return!r||!r.rendered?!1:(r=r.isFlyout?r.targetWorkspace:r,!!Dc()&&!!r&&!r.isReadOnly()&&!r.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken())},callback(r,a){if(r=Dc(),!r)return!1;var u=kc();if(!u||(u=u.isFlyout?u.targetWorkspace:u,!u||u.isReadOnly()))return!1;if(a instanceof PointerEvent)return a=ji(u,new Fe(a.clientX,a.clientY)),!!es(r,u,a);if(a=pp(),!a)return!!es(r,u);const{left:S,top:B,width:Z,height:ye}=u.getMetricsManager().getViewMetrics(!0);return new Dt(B,B+ye,S,S+Z).contains(a.x,a.y)?!!es(r,u):(a=new Fe(S+Z/2,B+ye/2),!!es(r,u,a))},keyCodes:[e,t]})},Sp=function(){const e=li.registry.createSerializedKey(oi.Z,[oi.CTRL]),t=li.registry.createSerializedKey(oi.Z,[oi.META]);li.registry.register({name:so.UNDO,preconditionFn(r){return!r.isReadOnly()&&!r.isDragging()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(r,a){return r.hideChaff(),r.undo(!1),a.preventDefault(),!0},keyCodes:[e,t]})},Ip=function(){const e=li.registry.createSerializedKey(oi.Z,[oi.CTRL,oi.SHIFT]),t=li.registry.createSerializedKey(oi.Z,[oi.META,oi.SHIFT]),r=li.registry.createSerializedKey(oi.Y,[oi.CTRL]);li.registry.register({name:so.REDO,preconditionFn(a){return!a.isDragging()&&!a.isReadOnly()&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(a,u){return a.hideChaff(),a.undo(!0),u.preventDefault(),!0},keyCodes:[e,t,r]})},vp=function(){gp(),mp(),Ep(),Tp(),bp(),Sp(),Ip()},Ap=function(e){const t=e.saveState();return e.getParameters().length&&(t.parameters=e.getParameters().map(r=>r.saveState())),t},Op=function(e,t,r,a){if(e=e.loadState(r,a),!r.parameters)return e;for(const[u,S]of r.parameters.entries())e.insertParameter(t.loadState(S,a),u);return e},tT=function(e){const t=Object.create(null),r=L(De.SERIALIZER,!0);for(const a in r){let u;const S=(u=r[a])==null?void 0:u.save(e);S&&(t[a]=S)}return t},iT=function(e,t,{recordUndo:r=!1}={}){var a=L(De.SERIALIZER,!0);if(a){a=Object.entries(a).sort((S,B)=>B[1].priority-S[1].priority);var u=Ce();o.setRecordUndo$$module$build$src$core$events$utils(r),(r=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0),Ht(),t instanceof Cn&&t.setResizesEnabled(!1);for(const[,S]of a.reverse()){let B;(B=S)==null||B.clear(t)}for(const[S,B]of a.reverse())if(e[S]){let Z;(Z=B)==null||Z.load(e[S],t)}t instanceof Cn&&t.setResizesEnabled(!0),pt(),Ie(new(Be(pe.FINISHED_LOADING))(t)),o.setGroup$$module$build$src$core$events$utils(r),o.setRecordUndo$$module$build$src$core$events$utils(u)}},nT=function(e,t){let r=null;r=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var a;if(!document.contains(r)&&document!==((a=r)==null?void 0:a.ownerDocument))throw Error("Error: container is not in current document");e=new io(t||{}),a=document.createElement("div"),Le(a,"injectionDiv"),t!=null&&t.rtl&&Le(a,"blocklyRTL"),r.appendChild(a),t=rT(a,e);const u=oT(a,t,e);return sT(u),V(u),m(u),a.addEventListener("focusin",function(){V(u)}),C(a,"keydown",null,z),u},rT=function(e,t){e.setAttribute("dir","LTR"),Pe(t.hasCss,t.pathToMedia);const r=de(he.SVG,{xmlns:Gl,"xmlns:html":Ms,"xmlns:xlink":or,version:"1.1",class:"blocklySvg"},e),a=de(he.DEFS,{},r),u=String(Math.random()).substring(2);return t.gridPattern=Wf.createDom(u,t.gridOptions,a,e),r},oT=function(e,t,r){r.parentWorkspace=null,r=new Cn(r);const a=r.options;r.scale=a.zoomOptions.startScale,t.appendChild(r.createDom("blocklyMainBackground",e));var u=r.getRenderer().getClassName();return u&&Le(e,u),(u=r.getTheme().getClassName())&&Le(e,u),!a.hasCategories&&a.languageTree&&(e=r.addFlyout(he.SVG),at(e,t)),a.hasTrashcan&&r.addTrashcan(),a.zoomOptions&&a.zoomOptions.controls&&r.addZoomControls(),r.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),r.translate(0,0),r.addChangeListener(ip(r)),m(r),w_(),oc(),v_(),r},sT=function(e){const t=e.options;var r=e.getParentSvg();if(C(r.parentNode,"contextmenu",null,function(a){H(a)||a.preventDefault()}),r=C(window,"resize",null,function(){So(),e.hideComponents(!0),E_(),P_(),m(e),Sc(e)}),e.setResizeHandlerWrapper(r),aT(),t.languageTree){r=e.getToolbox();const a=e.getFlyout(!0);r?r.init():a&&(a.init(e),a.show(t.languageTree),typeof a.scrollToStart=="function"&&a.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new Gf(e,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.horizontal,t.moveOptions.scrollbars===!0||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&lT(t.pathToMedia,e)},aT=function(){MS||(C(document,"scroll",null,function(){const e=ve();for(let t=0,r;r=e[t];t++)r instanceof Cn&&r.updateInverseScreenCTM()}),x(document,"touchend",null,P),x(document,"touchcancel",null,P)),MS=!0},lT=function(e,t){function r(){for(;u.length;){const S=u.pop();S&&k(S)}a.preload()}const a=t.getAudioManager();a.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),a.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),a.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const u=[];u.push(C(document,"pointermove",null,r,!0)),u.push(C(document,"touchstart",null,r,!0))},uT=function(e){if(!e||!e.isSimpleReporter())return!1;let t;return(t=e.getFields().next().value)==null?void 0:t.isFullBlockField()},Cp=function(){Bt.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return e.workspace.getUndoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:Bt.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},yp=function(){Bt.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return e.workspace.getRedoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:Bt.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Rp=function(){Bt.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?e.workspace.getTopBlocks(!1).length>1?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:Bt.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Np=function(e,t){function r(S){u--,S.setCollapsed(e),u===0&&o.setGroup$$module$build$src$core$events$utils(!1)}let a=0,u=0;o.setGroup$$module$build$src$core$events$utils(!0);for(let S=0;S<t.length;S++){let B=t[S];for(;B;)u++,setTimeout(r.bind(null,B),a),B=B.getNextBlock(),a+=10}},Dp=function(){Bt.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let r=e[t];for(;r;){if(!r.isCollapsed())return"enabled";r=r.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Np(!0,e.workspace.getTopBlocks(!0))},scopeType:Bt.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},kp=function(){Bt.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let t=0;t<e.length;t++){let r=e[t];for(;r;){if(r.isCollapsed())return"enabled";r=r.getNextBlock()}}return"disabled"}return"hidden"},callback(e){Np(!1,e.workspace.getTopBlocks(!0))},scopeType:Bt.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Lp=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(let r=0;r<e.length;r++)Lp(e[r],t)}},wc=function(e){const t=[];e=e.getTopBlocks(!0);for(let r=0;r<e.length;r++)Lp(e[r],t);return t},Vl=function(e,t){t?o.setGroup$$module$build$src$core$events$utils(t):(o.setGroup$$module$build$src$core$events$utils(!0),t=o.getGroup$$module$build$src$core$events$utils());const r=e.shift();r&&(r.isDeadOrDying()?Vl(e,t):(r.dispose(!1,!0),setTimeout(Vl,10,e,t))),o.setGroup$$module$build$src$core$events$utils(!1)},wp=function(){Bt.registry.register({displayText(e){return e.workspace?(e=wc(e.workspace).length,e===1?o.Msg$$module$build$src$core$msg.DELETE_BLOCK:o.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&wc(e.workspace).length>0?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=wc(e.workspace);t.length<2?Vl(t):Ju(o.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(t.length)),function(r){r&&Vl(t)})}},scopeType:Bt.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},cT=function(){Cp(),yp(),Rp(),Dp(),kp(),wp()},Mp=function(){Bt.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var t=e.block.toCopyData();t&&es(t,e.block.workspace)}},scopeType:Bt.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},xp=function(){Bt.registry.register({displayText(e){return e.block.hasIcon(xr.TYPE)?o.Msg$$module$build$src$core$msg.REMOVE_COMMENT:o.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()||!e.hasIcon(xr.TYPE)&&uT(e)?"hidden":"enabled"},callback(e){(e=e.block)&&e.hasIcon(xr.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:Bt.ScopeType.BLOCK,id:"blockComment",weight:2})},Fp=function(){Bt.registry.register({displayText(e){return e.block.getInputsInline()?o.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:o.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let t=1;t<e.inputList.length;t++)if(!(e.inputList[t-1]instanceof wd||e.inputList[t]instanceof wd))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:Bt.ScopeType.BLOCK,id:"blockInline",weight:3})},Pp=function(){Bt.registry.register({displayText(e){return e.block.isCollapsed()?o.Msg$$module$build$src$core$msg.EXPAND_BLOCK:o.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:Bt.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Bp=function(){Bt.registry.register({displayText(e){return e.block.hasDisabledReason(Sr)?o.Msg$$module$build$src$core$msg.ENABLE_BLOCK:o.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var t=e.getDisabledReasons();return t=t.size>(t.has(Sr)?1:0),e.getInheritedDisabled()||t?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const t=o.getGroup$$module$build$src$core$events$utils();t||o.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(Sr),Sr),o.setGroup$$module$build$src$core$events$utils(t)},scopeType:Bt.ScopeType.BLOCK,id:"blockDisable",weight:5})},Up=function(){Bt.registry.register({displayText(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),e===1?o.Msg$$module$build$src$core$msg.DELETE_BLOCK:o.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:Bt.ScopeType.BLOCK,id:"blockDelete",weight:6})},Vp=function(){Bt.registry.register({displayText(){return o.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:Bt.ScopeType.BLOCK,id:"blockHelp",weight:7})},Hp=function(){Bt.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isDeletable()?"enabled":"hidden"},callback(e){o.setGroup$$module$build$src$core$events$utils(!0);let t;(t=e.comment)==null||t.dispose(),o.setGroup$$module$build$src$core$events$utils(!1)},scopeType:Bt.ScopeType.COMMENT,id:"commentDelete",weight:6})},Gp=function(){Bt.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let t;return(t=e.comment)!=null&&t.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var t=e.comment.toCopyData();t&&es(t,e.comment.workspace)}},scopeType:Bt.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},Wp=function(){Bt.registry.register({displayText:()=>o.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>{let t;return(t=e.workspace)!=null&&t.isMutator?"hidden":"enabled"},callback:(e,t,r,a)=>{(e=e.workspace)&&(o.setGroup$$module$build$src$core$events$utils(!0),t=new No(e),t.setPlaceholderText(o.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),t.moveTo(ji(e,new Fe(a.x,a.y))),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(t),o.setGroup$$module$build$src$core$events$utils(!1))},scopeType:Bt.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},dT=function(){Mp(),xp(),Fp(),Pp(),Bp(),Up(),Vp()},hT=function(){Gp(),Hp(),Wp()},Xp=function(){cT(),dT()},_T=function(e){return e&&typeof e.paste=="function"},pT=function(e){return e&&typeof e.getSvgRoot=="function"},fT=function(e){return e.isSelectable()},gT=function(e){v().hideChaff(e)},Ee=Ee||{},Ee.scope={},Ee.ASSUME_ES5=!1,Ee.ASSUME_ES6=!1,Ee.ASSUME_ES2020=!1,Ee.ASSUME_NO_NATIVE_MAP=!1,Ee.ASSUME_NO_NATIVE_SET=!1,Ee.ISOLATE_POLYFILLS=!1,Ee.FORCE_POLYFILL_PROMISE=!1,Ee.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Ee.INSTRUMENT_ASYNC_CONTEXT=!0,Ee.objectCreate=Ee.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(e){var t=function(){};return t.prototype=e,new t},Ee.defineProperty=Ee.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},Ee.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof RI=="object"&&RI];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},Ee.global=Ee.ASSUME_ES2020?globalThis:Ee.getGlobal(this),Ee.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Ee.TRUST_ES6_POLYFILLS=!Ee.ISOLATE_POLYFILLS||Ee.IS_SYMBOL_NATIVE,Ee.polyfills={},Ee.propertyToPolyfillSymbol={},Ee.POLYFILL_PREFIX="$jscp$",Ee.polyfill=function(e,t,r,a){t&&(Ee.ISOLATE_POLYFILLS?Ee.polyfillIsolated(e,t,r,a):Ee.polyfillUnisolated(e,t,r,a))},Ee.polyfillUnisolated=function(e,t,r,a){for(r=Ee.global,e=e.split("."),a=0;a<e.length-1;a++){var u=e[a];if(!(u in r))return;r=r[u]}e=e[e.length-1],a=r[e],t=t(a),t!=a&&t!=null&&Ee.defineProperty(r,e,{configurable:!0,writable:!0,value:t})},Ee.polyfillIsolated=function(e,t,r,a){var u=e.split(".");e=u.length===1,a=u[0],a=!e&&a in Ee.polyfills?Ee.polyfills:Ee.global;for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in a))return;a=a[B]}u=u[u.length-1],r=Ee.IS_SYMBOL_NATIVE&&r==="es6"?a[u]:null,t=t(r),t!=null&&(e?Ee.defineProperty(Ee.polyfills,u,{configurable:!0,writable:!0,value:t}):t!==r&&(Ee.propertyToPolyfillSymbol[u]===void 0&&(r=Math.random()*1e9>>>0,Ee.propertyToPolyfillSymbol[u]=Ee.IS_SYMBOL_NATIVE?Ee.global.Symbol(u):Ee.POLYFILL_PREFIX+r+"$"+u),Ee.defineProperty(a,Ee.propertyToPolyfillSymbol[u],{configurable:!0,writable:!0,value:t})))},Ee.getConstructImplementation=function(){function e(){function r(){}return Reflect.construct(r,[],function(){}),new r instanceof r}if(Ee.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(e())return Reflect.construct;var t=Reflect.construct;return function(r,a,u){return r=t(r,a),u&&Reflect.setPrototypeOf(r,u.prototype),r}}return function(r,a,u){return u===void 0&&(u=r),u=Ee.objectCreate(u.prototype||Object.prototype),Function.prototype.apply.call(r,u,a)||u}},Ee.construct={valueOf:Ee.getConstructImplementation}.valueOf(),Ee.underscoreProtoCanBeSet=function(){var e={a:!0},t={};try{return t.__proto__=e,t.a}catch{}return!1},Ee.setPrototypeOf=Ee.ASSUME_ES6||Ee.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:Ee.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,Ee.inherits=function(e,t){if(e.prototype=Ee.objectCreate(t.prototype),e.prototype.constructor=e,Ee.ASSUME_ES6||Ee.setPrototypeOf){var r=Ee.setPrototypeOf;r(e,t)}else for(r in t)if(r!="prototype")if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(t,r);a&&Object.defineProperty(e,r,a)}else e[r]=t[r];e.superClass_=t.prototype},Ee.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},Ee.arrayIterator=function(e){return{next:Ee.arrayIteratorImpl(e)}},Ee.makeIterator=function(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return Ee.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},Ee.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},Ee.arrayFromIterable=function(e){return e instanceof Array?e:Ee.arrayFromIterator(Ee.makeIterator(e))},Ee.generator={},Ee.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},Ee.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},Ee.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},Ee.generator.Context.prototype.stop_=function(){this.isRunning_=!1},Ee.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},Ee.generator.Context.prototype.next_=function(e){this.yieldResult=e},Ee.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},Ee.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},Ee.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},Ee.generator.Context.prototype.yield=function(e,t){return this.nextAddress=t,{value:e}},Ee.generator.Context.prototype.yieldAll=function(e,t){e=Ee.makeIterator(e);var r=e.next();if(Ee.generator.ensureIteratorResultIsObject_(r),r.done)this.yieldResult=r.value,this.nextAddress=t;else return this.yieldAllIterator_=e,this.yield(r.value,t)},Ee.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},Ee.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},Ee.generator.Context.prototype.setCatchFinallyBlocks=function(e,t){this.catchAddress_=e,t!=null&&(this.finallyAddress_=t)},Ee.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},Ee.generator.Context.prototype.leaveTryBlock=function(e,t){this.nextAddress=e,this.catchAddress_=t||0},Ee.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},Ee.generator.Context.prototype.enterFinallyBlock=function(e,t,r){r?this.finallyContexts_[r]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=t||0},Ee.generator.Context.prototype.leaveFinallyBlock=function(e,t){if(t=this.finallyContexts_.splice(t||0)[0],t=this.abruptCompletion_=this.abruptCompletion_||t){if(t.isException)return this.jumpToErrorHandler_();t.jumpTo!=null&&this.finallyAddress_<t.jumpTo?(this.nextAddress=t.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},Ee.generator.Context.prototype.forIn=function(e){return new Ee.generator.Context.PropertyIterator(e)},Ee.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var t in e)this.properties_.push(t);this.properties_.reverse()},Ee.generator.Context.PropertyIterator.prototype.getNext=function(){for(;this.properties_.length>0;){var e=this.properties_.pop();if(e in this.object_)return e}return null},Ee.generator.Engine_=function(e){this.context_=new Ee.generator.Context,this.program_=e},Ee.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},Ee.generator.Engine_.prototype.return_=function(e){this.context_.start_();var t=this.context_.yieldAllIterator_;return t?this.yieldAllStep_("return"in t?t.return:function(r){return{value:r,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},Ee.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},Ee.generator.Engine_.prototype.yieldAllStep_=function(e,t,r){try{var a=e.call(this.context_.yieldAllIterator_,t);if(Ee.generator.ensureIteratorResultIsObject_(a),!a.done)return this.context_.stop_(),a;var u=a.value}catch(S){return this.context_.yieldAllIterator_=null,this.context_.throw_(S),this.nextStep_()}return this.context_.yieldAllIterator_=null,r.call(this.context_,u),this.nextStep_()},Ee.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},Ee.generator.Generator_=function(e){this.next=function(t){return e.next_(t)},this.throw=function(t){return e.throw_(t)},this.return=function(t){return e.return_(t)},this[Symbol.iterator]=function(){return this}},Ee.generator.createGenerator=function(e,t){return t=new Ee.generator.Generator_(new Ee.generator.Engine_(t)),Ee.setPrototypeOf&&e.prototype&&Ee.setPrototypeOf(t,e.prototype),t},Ee.asyncExecutePromiseGenerator=function(e){function t(a){return e.next(a)}function r(a){return e.throw(a)}return new Promise(function(a,u){function S(B){B.done?a(B.value):Promise.resolve(B.value).then(t,r).then(S,u)}S(e.next())})},Ee.asyncExecutePromiseGeneratorFunction=function(e){return Ee.asyncExecutePromiseGenerator(e())},Ee.asyncExecutePromiseGeneratorProgram=function(e){return Ee.asyncExecutePromiseGenerator(new Ee.generator.Generator_(new Ee.generator.Engine_(e)))},Ee.polyfill("globalThis",function(e){return e||Ee.global},"es_2020","es3"),Ee.polyfill("Array.prototype.includes",function(e){return e||function(t,r){var a=this;a instanceof String&&(a=String(a));var u=a.length;for(r=r||0,r<0&&(r=Math.max(r+u,0));r<u;r++){var S=a[r];if(S===t||Object.is(S,t))return!0}return!1}},"es7","es3"),Ee.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new Ee.global.Proxy(e,{get:function(r,a,u){return r==e&&a=="q"&&u==t}}));return t.q===!0}catch{return!1}},Ee.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,Ee.ES6_CONFORMANCE=Ee.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&Ee.checkEs6ConformanceViaProxy(),Ee.initSymbol=function(){},Ee.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},Ee.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Ee.MapEntry=function(){},Ee.polyfill("Set.prototype.difference",function(e){return e||function(t){Ee.checkIsSetInstance(this),Ee.checkIsSetLike(t);var r=Ee.getSmallerAndLargerSets(this,t);t=new Set(this);var a=r.smallerSetIterator;r=r.largerSet;for(var u=a.next();!u.done;)r.has(u.value)&&t.delete(u.value),u=a.next();return t}},"es_next","es6"),Ee.checkIsSetLike=function(e){if(typeof e!="object"||e===null||typeof e.size!="number"||e.size<0||typeof e.keys!="function"||typeof e.has!="function")throw new TypeError("Argument must be set-like")},Ee.checkIsValidIterator=function(e){if(typeof e!="object"||e===null||typeof e.next!="function")throw new TypeError("Invalid iterator.");return e},Ee.getSmallerAndLargerSets=function(e,t){return e.size<=t.size?{smallerSetIterator:e.keys(),largerSet:t}:{smallerSetIterator:Ee.checkIsValidIterator(t.keys()),largerSet:e}},Ee.checkIsSetInstance=function(e){if(!(e instanceof Set))throw new TypeError("Method must be called on an instance of Set.")},Ee.iteratorFromArray=function(e,t){if(Ee.ASSUME_ES6)return e[Symbol.iterator]();e instanceof String&&(e+="");var r=0,a=!1,u={next:function(){if(!a&&r<e.length){var S=r++;return{value:t(S,e[S]),done:!1}}return a=!0,{done:!0,value:void 0}}};return u[Symbol.iterator]=function(){return u},u},Ee.polyfill("Array.prototype.values",function(e){return e||function(){return Ee.iteratorFromArray(this,function(t,r){return r})}},"es8","es3"),Ee.polyfill("Array.prototype.flatMap",function(e){return e||function(t,r){var a=[];return Array.prototype.forEach.call(this,function(u,S){u=t.call(r,u,S,this),Array.isArray(u)?a.push.apply(a,u):a.push(u)}),a}},"es9","es5"),Ee.polyfill("Array.prototype.flat",function(e){return e||function(t){t=t===void 0?1:t;var r=[];return Array.prototype.forEach.call(this,function(a){Array.isArray(a)&&t>0?(a=Array.prototype.flat.call(a,t-1),r.push.apply(r,a)):r.push(a)}),r}},"es9","es5"),Ee.polyfill("Object.entries",function(e){return e||function(t){var r=[],a;for(a in t)Ee.owns(t,a)&&r.push([a,t[a]]);return r}},"es8","es3"),Ee.polyfill("Object.values",function(e){return e||function(t){var r=[],a;for(a in t)Ee.owns(t,a)&&r.push(t[a]);return r}},"es8","es3");var ts=Object.create(null),nO={typeMap:ts},Mc=Object.create(null),rr="default",De=class{constructor(e){this.name=e}toString(){return this.name}};De.CONNECTION_CHECKER=new De("connectionChecker"),De.CONNECTION_PREVIEWER=new De("connectionPreviewer"),De.CURSOR=new De("cursor"),De.EVENT=new De("event"),De.FIELD=new De("field"),De.INPUT=new De("input"),De.RENDERER=new De("renderer"),De.TOOLBOX=new De("toolbox"),De.THEME=new De("theme"),De.TOOLBOX_ITEM=new De("toolboxItem"),De.FLYOUTS_VERTICAL_TOOLBOX=new De("flyoutsVerticalToolbox"),De.FLYOUTS_HORIZONTAL_TOOLBOX=new De("flyoutsHorizontalToolbox"),De.FLYOUT_INFLATER=new De("flyoutInflater"),De.METRICS_MANAGER=new De("metricsManager"),De.BLOCK_DRAGGER=new De("blockDragger"),De.SERIALIZER=new De("serializer"),De.ICON=new De("icon"),De.PASTER=new De("paster"),De.VARIABLE_MODEL=new De("variableModel"),De.VARIABLE_MAP=new De("variableMap");var Io={DEFAULT:rr,TEST_ONLY:nO};Io.Type=De,Io.getAllItems=L,Io.getClass=R,Io.getClassFromOptions=y,Io.getObject=M,Io.hasItem=$,Io.register=s,Io.unregister=p;var mi=Object.create(null),rO=750,mT="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),xc=null,Ls={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Fc=0,ws={TOUCH_ENABLED:mT,TOUCH_MAP:Ls};ws.checkTouchIdentifier=d,ws.clearTouchIdentifier=F,ws.getTouchIdentifierFromEvent=g,ws.longStart=N,ws.longStop=P,ws.shouldHandleEvent=K;var Kp,$T,ET,TT,Pc,Bc,zp,bT,ST,IT;(function(e){function t(a){return r.includes(a.toUpperCase())}Kp=e;const r=Kp.toUpperCase();$T=t("JavaFX"),ET=t("WebKit"),TT=t("Gecko")&&!ET,Pc=t("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Bc=t("iPad")||t("Macintosh")&&e>0,zp=t("iPhone")&&!Bc,bT=t("Macintosh"),ST=Bc||Pc&&!t("Mobile")||t("Silk"),IT=!ST&&(zp||Pc)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var oO=Kp,vT=$T,AT=TT,Yp=Pc,Uc=Bc,OT=zp,jp=bT,CT=IT,sO={ANDROID:Yp,GECKO:AT,IPAD:Uc,IPHONE:OT,JavaFx:vT,MAC:jp,MOBILE:CT,raw:oO},yT=40,RT=125,vo={};vo.bind=x,vo.conditionalBind=C,vo.getScrollDeltaPixels=D,vo.isRightButton=f,vo.isTargetInput=H,vo.mouseToSvg=I,vo.unbind=k;var pe;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.VAR_TYPE_CHANGE="var_type_change",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(pe||(pe={}));var NT=[pe.BLOCK_CREATE,pe.BLOCK_MOVE,pe.COMMENT_CREATE,pe.COMMENT_MOVE],DT="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",kT={genUid:()=>{const e=DT.length,t=[];for(let r=0;r<20;r++)t[r]=DT.charAt(Math.random()*e);return t.join("")}},aO=0,qp={TEST_ONLY:kT};qp.genUid=O,qp.getNextUniqueId=U;var LT="",Hl=!0,Jp=0,Zp="ORPHANED_BLOCK",Ao=[],wT={FIRE_QUEUE:Ao,enqueueEvent:Me,fireNow:Ve,fireInternal:je,setGroupInternal:ge};o.disable$$module$build$src$core$events$utils,o.enable$$module$build$src$core$events$utils,o.getGroup$$module$build$src$core$events$utils,o.setGroup$$module$build$src$core$events$utils,o.setRecordUndo$$module$build$src$core$events$utils;var Gl="http://www.w3.org/2000/svg",Ms="http://www.w3.org/1999/xhtml",or="http://www.w3.org/1999/xlink",Oo;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Oo||(Oo={}));var Lr=null,Qp=0,Wl=null,hn={HTML_NS:Ms};hn.NodeType=Oo,hn.SVG_NS=Gl,hn.XLINK_NS=or,hn.addClass=Le,hn.createSvgElement=de,hn.getFastTextWidth=Et,hn.getFastTextWidthWithSizeString=dt,hn.getTextWidth=St,hn.hasClass=We,hn.insertAfter=at,hn.measureFontMetrics=T,hn.removeClass=be,hn.removeClasses=_e,hn.removeNode=Ke,hn.setCssTransform=ct,hn.startTextWidthCache=Ht,hn.stopTextWidthCache=pt;var _n=class{static findFocusedNode(e){var t=e.getRootFocusableNode();if(!t.canBeFocused())return null;var r=t.getFocusableElement();return We(r,_n.ACTIVE_CLASS_NAME)||We(r,_n.PASSIVE_CSS_CLASS_NAME)||(t=r.querySelector(this.ACTIVE_FOCUS_NODE_CSS_SELECTOR),(t instanceof HTMLElement||t instanceof SVGElement)&&(t=_n.findFocusableNodeFor(t,e)))?t:(r=r.querySelector(this.PASSIVE_FOCUS_NODE_CSS_SELECTOR),(r instanceof HTMLElement||r instanceof SVGElement)&&(e=_n.findFocusableNodeFor(r,e))?e:null)}static findFocusableNodeFor(e,t){if(!e.id||e.id==="null"||t.getNestedTrees().map(u=>_n.findFocusableNodeFor(e,u)).findIndex(u=>!!u)!==-1)return null;var r=t.getRootFocusableNode();if(r.canBeFocused()&&e===r.getFocusableElement())return r;var a;return(r=(a=t.lookUpFocusableNode(e.id))!=null?a:null)?r:(a=e.parentElement,!r&&a?_n.findFocusableNodeFor(a,t):null)}};_n.ACTIVE_CLASS_NAME="blocklyActiveFocus",_n.PASSIVE_CSS_CLASS_NAME="blocklyPassiveFocus",_n.ACTIVE_FOCUS_NODE_CSS_SELECTOR=`.${_n.ACTIVE_CLASS_NAME}`,_n.PASSIVE_FOCUS_NODE_CSS_SELECTOR=`.${_n.PASSIVE_CSS_CLASS_NAME}`;var lO=class{constructor(e,t){this.tree=e,this.rootShouldBeAutoTabbable=t}},Tn=class{constructor(e){this.previouslyFocusedNode=this.focusedNode=null,this.registeredTrees=[],this.isUpdatingFocusedNode=this.recentlyLostAllFocus=this.lockFocusStateChanges=this.currentlyHoldsEphemeralFocus=!1;const t=r=>{if(!this.isUpdatingFocusedNode){this.recentlyLostAllFocus=!r;var a=null;if(r instanceof HTMLElement||r instanceof SVGElement){for(var u of this.registeredTrees)if(a=_n.findFocusableNodeFor(r,u.tree))break}if(a&&a.canBeFocused()){r=a.getFocusableTree();let S;u=(S=this.focusedNode)==null?void 0:S.getFocusableTree(),a===r.getRootFocusableNode()&&r!==u?this.focusTree(r):this.focusNode(a)}else this.defocusCurrentFocusedNode()}};e("focusin",r=>{r instanceof FocusEvent&&t(document.activeElement)}),e("focusout",r=>{r instanceof FocusEvent&&t(r.relatedTarget)})}registerTree(e,t=!1){if(this.ensureManagerIsUnlocked(),this.isRegistered(e))throw Error(`Attempted to re-register already registered tree: ${e}.`);this.registeredTrees.push(new lO(e,t));const r=e.getRootFocusableNode().getFocusableElement();if(!r.id||r.id==="null")throw Error(`Attempting to register a tree with a root element that has an invalid ID: ${e}.`);t&&(r.tabIndex=0)}isRegistered(e){return!!this.lookUpRegistration(e)}lookUpRegistration(e){let t;return(t=this.registeredTrees.find(r=>r.tree===e))!=null?t:null}unregisterTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to unregister not registered tree: ${e}.`);var t=this.registeredTrees.findIndex(u=>u.tree===e);const r=this.registeredTrees[t];this.registeredTrees.splice(t,1),t=_n.findFocusedNode(e);const a=e.getRootFocusableNode();t&&this.removeHighlight(t),this.focusedNode!==t&&this.focusedNode!==a||this.updateFocusedNode(null),this.removeHighlight(a),r.rootShouldBeAutoTabbable&&e.getRootFocusableNode().getFocusableElement().removeAttribute("tabindex")}getFocusedTree(){let e,t;return(t=(e=this.focusedNode)==null?void 0:e.getFocusableTree())!=null?t:null}getFocusedNode(){return this.focusedNode}focusTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to focus unregistered tree: ${e}.`);const t=_n.findFocusedNode(e),r=e.getRestoredFocusableNode(t);e=e.getRootFocusableNode();let a;this.focusNode((a=r??t)!=null?a:e)}focusNode(e){this.ensureManagerIsUnlocked();const t=!this.currentlyHoldsEphemeralFocus;t&&(this.isUpdatingFocusedNode=!0);var r,a=((r=this.focusedNode)==null?void 0:r.getFocusableElement())!==document.activeElement;if(this.focusedNode!==e||a)if(e.canBeFocused()){if(r=e.getFocusableTree(),!this.isRegistered(r))throw Error(`Attempted to focus unregistered node: ${e}.`);a=e.getFocusableElement(),a.id&&a.id!=="null"||console.warn("Trying to focus a node that has an invalid ID.");var u=_n.findFocusableNodeFor(a,r);a=_n.findFocusedNode(r);var S=e;if(u!==e){S=r.getRestoredFocusableNode(a),e=r.getRootFocusableNode();var B;S=(B=S??a)!=null?B:e}e=this.focusedNode,B=e?.getFocusableTree(),e&&this.passivelyFocusNode(e,r),r=r.getRootFocusableNode(),a&&this.removeHighlight(a),r!==S&&this.removeHighlight(r),this.currentlyHoldsEphemeralFocus||this.activelyFocusNode(S,B??null),this.updateFocusedNode(S)}else console.warn("Trying to focus a node that can't be focused.");t&&(this.isUpdatingFocusedNode=!1)}takeEphemeralFocus(e){if(this.ensureManagerIsUnlocked(),this.currentlyHoldsEphemeralFocus)throw Error(`Attempted to take ephemeral focus when it's already held, with new element: ${e}.`);this.currentlyHoldsEphemeralFocus=!0,this.focusedNode&&this.passivelyFocusNode(this.focusedNode,null),e.focus({preventScroll:!0});let t=!1;return()=>{if(t)throw Error(`Attempted to finish ephemeral focus twice for element: ${e}.`);if(t=!0,this.currentlyHoldsEphemeralFocus=!1,this.focusedNode){this.activelyFocusNode(this.focusedNode,null);const r=this.focusedNode;setTimeout(()=>{!this.focusedNode&&this.previouslyFocusedNode===r&&this.recentlyLostAllFocus&&this.focusNode(r)},0)}}}ephemeralFocusTaken(){return this.currentlyHoldsEphemeralFocus}ensureManagerIsUnlocked(){if(this.lockFocusStateChanges)throw Error("FocusManager state changes cannot happen in a tree/node focus/blur callback.")}updateFocusedNode(e){this.previouslyFocusedNode=this.focusedNode,this.focusedNode=e}defocusCurrentFocusedNode(){this.focusedNode&&!this.currentlyHoldsEphemeralFocus&&(this.passivelyFocusNode(this.focusedNode,null),this.updateFocusedNode(null))}activelyFocusNode(e,t){this.lockFocusStateChanges=!0;const r=e.getFocusableTree(),a=e.getFocusableElement();let u;const S=(u=this.lookUpRegistration(r))==null?void 0:u.rootShouldBeAutoTabbable;r!==t&&(r.onTreeFocus(e,t),S&&(r.getRootFocusableNode().getFocusableElement().tabIndex=-1)),e.onNodeFocus(),this.lockFocusStateChanges=!1,S&&e===r.getRootFocusableNode()||a.hasAttribute("tabindex")||(a.tabIndex=-1),this.setNodeToVisualActiveFocus(e),a.focus({preventScroll:!0})}passivelyFocusNode(e,t){this.lockFocusStateChanges=!0;const r=e.getFocusableTree();if(r!==t){r.onTreeBlur(t);let a;(a=this.lookUpRegistration(r))!=null&&a.rootShouldBeAutoTabbable&&(r.getRootFocusableNode().getFocusableElement().tabIndex=0)}e.onNodeBlur(),this.lockFocusStateChanges=!1,r!==t&&this.setNodeToVisualPassiveFocus(e)}setNodeToVisualActiveFocus(e){e=e.getFocusableElement(),Le(e,Tn.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),be(e,Tn.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}setNodeToVisualPassiveFocus(e){e=e.getFocusableElement(),be(e,Tn.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Le(e,Tn.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}removeHighlight(e){e=e.getFocusableElement(),be(e,Tn.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),be(e,Tn.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}static getFocusManager(){return Tn.focusManager||(Tn.focusManager=new Tn(document.addEventListener)),Tn.focusManager}};Tn.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyActiveFocus",Tn.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyPassiveFocus",Tn.focusManager=null,o.getFocusManager$$module$build$src$core$focus_manager;var MT={};MT.deepMerge=Te;var li=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,t){if(this.shortcuts.get(e.name)&&!t)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),t=e.keyCodes,t!=null&&t.length)for(const r of t)this.addKeyMapping(r,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,t,r){e=`${e}`;const a=this.keyMap.get(e);if(a&&!r)throw Error(`Shortcut named "${t}" collides with shortcuts "${a}"`);a&&r?a.unshift(t):this.keyMap.set(e,[t])}removeKeyMapping(e,t,r){const a=this.keyMap.get(e);if(!a)return r||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1;const u=a.indexOf(t);return u>-1?(a.splice(u,1),a.length===0&&this.keyMap.delete(e),!0):(r||console.warn(`No keyboard shortcut named "${t}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const t of this.keyMap.keys())this.removeKeyMapping(t,e,!0)}setKeyMap(e){this.keyMap.clear();for(const t in e)this.keyMap.set(t,e[t])}getKeyMap(){const e=Object.create(null);for(const[t,r]of this.keyMap)e[t]=r;return e}getRegistry(){const e=Object.create(null);for(const[t,r]of this.shortcuts)e[t]=r;return Te(Object.create(null),e)}onKeyDown(e,t){var r=this.serializeKeyEvent(t);if(r=this.getShortcutNamesByKeyCode(r),!r)return!1;for(const a of r){r=this.shortcuts.get(a);let u;if(!r||r.preconditionFn&&!r.preconditionFn(e,{focusedNode:(u=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?u:void 0}))continue;let S,B,Z;if((B=(S=r).callback)!=null&&B.call(S,e,t,r,{focusedNode:(Z=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?Z:void 0}))return!0}return!1}getShortcutNamesByKeyCode(e){let t;return((t=this.keyMap.get(e))==null?void 0:t.slice())||[]}getKeyCodesByShortcutName(e){const t=[];for(const[r,a]of this.keyMap)a.indexOf(e)>-1&&t.push(r);return t}serializeKeyEvent(e){let t="";for(const r in li.modifierKeys)e.getModifierState(r)&&(t!==""&&(t+="+"),t+=r);return t!==""&&e.keyCode?t+="+"+e.keyCode:e.keyCode&&(t=String(e.keyCode)),t}checkModifiers(e){for(const t of e)if(!(t in li.modifierKeys))throw Error(t+" is not a valid modifier key.")}createSerializedKey(e,t){let r="";if(t){this.checkModifiers(t);for(const a in li.modifierKeys)t.includes(li.modifierKeys[a])&&(r!==""&&(r+="+"),r+=a)}return r!==""&&e?r+="+"+e:e&&(r=`${e}`),r}};li.registry=new li,(function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"})(li||(li={}));var Xl=Object.create(null),xT,FT,Kl=[],PT={defineBlocksWithJsonArrayInternal:w},Qi={TEST_ONLY:PT};Qi.createBlockDefinitionsFromJsonArray=o.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Qi.defineBlocks=o.defineBlocks$$module$build$src$core$common,Qi.defineBlocksWithJsonArray=b,Qi.draggingConnections=Kl,Qi.fireSelectedEvent=Ne,Qi.getAllWorkspaces=ve,Qi.getBlockTypeCounts=h,Qi.getMainWorkspace=v,Qi.getParentContainer=_,Qi.getSelected=J,Qi.getWorkspaceById=ke,Qi.globalShortcutHandler=z,Qi.registerWorkspace=Xe,Qi.setMainWorkspace=V,Qi.setParentContainer=A,Qi.setSelected=ne,Qi.svgResize=m,Qi.unregisterWorkpace=le;var ka=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=o.getGroup$$module$build$src$core$events$utils(),this.recordUndo=Ce()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,t,r){return r.isBlank=!1,r.group=e.group||"",r.workspaceId=t.id,r}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=ke(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},to=class extends ka{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},ef=class extends to{constructor(e,t,r){t=e?e.workspace.id:t,t===null&&(t=void 0),super(t),this.type=pe.CLICK,this.blockId=e?e.id:void 0,this.targetType=r}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new ef),t.targetType=e.targetType,t.blockId=e.blockId,t}},tf;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(tf||(tf={})),s(De.EVENT,pe.CLICK,ef);var BT={};BT.removeElem=q;var Co=class{constructor(e){this.name=e}toString(){return this.name}};Co.POSITIONABLE=new Co("positionable"),Co.DRAG_TARGET=new Co("drag_target"),Co.DELETE_AREA=new Co("delete_area"),Co.AUTOHIDEABLE=new Co("autohideable");var $i=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,t){const r=e.component.id;if(!t&&this.componentData.has(r)){var a;throw Error('Plugin "'+r+'" with capabilities "'+((a=this.componentData.get(r))==null?void 0:a.capabilities)+'" already added.')}for(this.componentData.set(r,e),t=[],a=0;a<e.capabilities.length;a++){const u=String(e.capabilities[a]).toLowerCase();if(t.push(u),this.capabilityToComponentIds.has(u)){let S;(S=this.capabilityToComponentIds.get(u))==null||S.push(r)}else this.capabilityToComponentIds.set(u,[r])}this.componentData.get(r).capabilities=t}removeComponent(e){const t=this.componentData.get(e);if(t){for(let r=0;r<t.capabilities.length;r++){const a=String(t.capabilities[r]).toLowerCase();q(this.capabilityToComponentIds.get(a),e)}this.componentData.delete(e)}}addCapability(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,t))console.warn('Plugin "'+e+'already has capability "'+t+'"');else{t=`${t}`.toLowerCase();var r;(r=this.componentData.get(e))==null||r.capabilities.push(t);var a;(a=this.capabilityToComponentIds.get(t))==null||a.push(e)}}removeCapability(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=`${t}`.toLowerCase(),q(this.componentData.get(e).capabilities,t),q(this.capabilityToComponentIds.get(t),e)):console.warn('Plugin "'+e+`doesn't have capability "`+t+'" to remove')}hasCapability(e,t){return t=`${t}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(t)}getComponent(e){let t;return(t=this.componentData.get(e))==null?void 0:t.component}getComponents(e,t){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const r=[];if(t){const a=[];e.forEach(u=>{a.push(this.componentData.get(u))}),a.sort(function(u,S){return u.weight-S.weight}),a.forEach(function(u){r.push(u.component)})}else e.forEach(a=>{r.push(this.componentData.get(a).component)});return r}};$i.Capability=Co,(function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"})($i||($i={})),$i.ComponentWeight;var nf=!1,rf=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyEmboss {
  filter: var(--blocklyEmbossFilter);
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyHighlighted>.blocklyPath {
  filter: var(--blocklyEmbossFilter);
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete,
.blocklyDragging.blocklyDraggingDelete .blocklyField {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabledPattern>.blocklyPath {
  fill: var(--blocklyDisabledPattern);
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableField>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover):not(:focus),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyMenuSeparator {
  background-color: #ccc;
  height: 1px;
  border: 0;
  margin-left: 4px;
  margin-right: 4px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}

.blocklyField {
  cursor: default;
}

.blocklyInputField {
  cursor: text;
}

.blocklyDragging .blocklyField,
.blocklyDragging .blocklyIconGroup {
  cursor: grabbing;
}

.blocklyActiveFocus:is(
  .blocklyFlyout,
  .blocklyWorkspace,
  .blocklyField,
  .blocklyPath,
  .blocklyHighlightedConnectionPath,
  .blocklyComment,
  .blocklyBubble,
  .blocklyIconGroup,
  .blocklyTextarea
) {
  outline: none;
}
`,of={};of.inject=Pe,of.register=ee;var Fe=class{constructor(e,t){this.x=e,this.y=t}clone(){return new Fe(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,t){return this.x+=e,this.y+=t,this}static equals(e,t){return e===t?!0:e&&t?e.x===t.x&&e.y===t.y:!1}static distance(e,t){const r=e.x-t.x;return e=e.y-t.y,Math.sqrt(r*r+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,t){return new Fe(e.x-t.x,e.y-t.y)}static sum(e,t){return new Fe(e.x+t.x,e.y+t.y)}},he=class{constructor(e){this.tagName=e}toString(){return this.tagName}};he.ANIMATE=new he("animate"),he.CIRCLE=new he("circle"),he.CLIPPATH=new he("clipPath"),he.DEFS=new he("defs"),he.FECOMPOSITE=new he("feComposite"),he.FECOMPONENTTRANSFER=new he("feComponentTransfer"),he.FEFLOOD=new he("feFlood"),he.FEFUNCA=new he("feFuncA"),he.FEGAUSSIANBLUR=new he("feGaussianBlur"),he.FEPOINTLIGHT=new he("fePointLight"),he.FESPECULARLIGHTING=new he("feSpecularLighting"),he.FILTER=new he("filter"),he.FOREIGNOBJECT=new he("foreignObject"),he.G=new he("g"),he.IMAGE=new he("image"),he.LINE=new he("line"),he.PATH=new he("path"),he.PATTERN=new he("pattern"),he.POLYGON=new he("polygon"),he.RECT=new he("rect"),he.SVG=new he("svg"),he.TEXT=new he("text"),he.TSPAN=new he("tspan");var Dt=class{constructor(e,t,r,a){this.top=e,this.bottom=t,this.left=r,this.right=a}static from(e){return new Dt(e.y,e.y+e.height,e.x,e.x+e.width)}clone(){return new Dt(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}getOrigin(){return new Fe(this.left,this.top)}contains(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,t){return e===t?!0:e&&t?e.top===t.top&&e.bottom===t.bottom&&e.left===t.left&&e.right===t.right:!1}static createFromPoint(e,t,r){const a=e.x;return e=e.y,new Dt(e,e+r,a,a+t)}},kt=class{constructor(e,t){this.width=e,this.height=t}static equals(e,t){return e===t?!0:e&&t?e.width===t.width&&e.height===t.height:!1}static max(e,t){return new kt(Math.max(e.width,t.width),Math.max(e.height,t.height))}static min(e,t){return new kt(Math.min(e.width,t.width),Math.min(e.height,t.height))}},UT={getSizeInternal:At},is={TEST_ONLY:UT};is.getBorderBox=ie,is.getComputedStyle=wi,is.getContainerOffsetToScrollInto=Ae,is.getPageOffset=G,is.getSize=Je,is.getViewportPageOffset=Q,is.scrollIntoContainerView=$e;var VT=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,HT=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,uO={XY_REGEX:VT,XY_STYLE_REGEX:HT},xs={TEST_ONLY:uO};xs.getDocumentScroll=bi,xs.getInjectionDivXY=Ze,xs.getRelativeXY=Ye,xs.getViewportBBox=ft,xs.screenToWsCoordinates=ji,xs.wsToScreenCoordinates=Hi;var Fi=class{constructor(e,t,r,a,u){this.workspace=e,this.horizontal=t,this.oldHostMetrics=null,this.ratio=1,this.origin=new Fe(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Fe(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=r||!1,this.margin=u!==void 0?u:Fi.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),a&&(e+=" "+a),this.outerSvg=de(he.SVG,{class:e}),a=de(he.G,{},this.outerSvg),this.svgBackground=de(he.RECT,{class:"blocklyScrollbarBackground"},a),e=Math.floor((Fi.scrollbarThickness-5)/2),this.svgHandle=de(he.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},a),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),at(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),t?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=C(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=C(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=Fi.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),k(this.onMouseDownBarWrapper_),k(this.onMouseDownHandleWrapper_),Ke(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,t){this.position.x=e,this.position.y=t,ct(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&Fi.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var t=e.viewWidth-this.margin*2;this.pair&&(t-=Fi.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),t=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(t+=Fi.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-Fi.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollWidth-e.viewWidth;var r=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/t*r,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=r/t}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let t=e.viewHeight-this.margin*2;this.pair&&(t-=Fi.scrollbarThickness),this.setScrollbarLength(Math.max(0,t)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-Fi.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var t=this.scrollbarLength*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength(t),this.setHandleLength(t),t=e.scrollHeight-e.viewHeight;var r=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/t*r,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=r/t}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const t=e!==this.isVisible();this.isHandleVisible=e,t&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),F(),this.cleanUp(),f(e))e.stopPropagation();else{var t=I(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());t=this.horizontal?t.x:t.y;var r=Ze(this.svgHandle);r=this.horizontal?r.x:r.y;var a=this.handlePosition,u=this.handleLength*.95;t<=r?a-=u:t>=r+this.handleLength&&(a+=u),this.setHandlePosition(this.constrainHandlePosition(a)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),f(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=C(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=C(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){F(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(k(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(k(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,t){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(t||t===void 0)&&this.updateMetrics()}setOrigin(e,t){this.origin=new Fe(e,t)}static metricsAreEquivalent(e,t){return e.viewWidth===t.viewWidth&&e.viewHeight===t.viewHeight&&e.viewLeft===t.viewLeft&&e.viewTop===t.viewTop&&e.absoluteTop===t.absoluteTop&&e.absoluteLeft===t.absoluteLeft&&e.scrollWidth===t.scrollWidth&&e.scrollHeight===t.scrollHeight&&e.scrollLeft===t.scrollLeft&&e.scrollTop===t.scrollTop}};Fi.scrollbarThickness=mT?25:15,Fi.DEFAULT_SCROLLBAR_MARGIN=.5;var Vc={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},sf={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Hc,DOMParser:zl,XMLSerializer:Yl}=globalThis;zl&&(Vc=new zl),Yl&&(sf=new Yl);var GT="https://developers.google.com/blockly/xml",cO=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,La={NAME_SPACE:GT};La.createElement=o.createElement$$module$build$src$core$utils$xml,La.createTextNode=o.createTextNode$$module$build$src$core$utils$xml,La.domToText=ai,La.injectDependencies=Ln,La.textToDom=o.textToDom$$module$build$src$core$utils$xml;var af="categoryToolbox",WT="flyoutToolbox",Lt;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(Lt||(Lt={}));var XT={hasCategoriesInternal:Qm},ns={};ns.Position=Lt,ns.TEST_ONLY=XT,ns.convertFlyoutDefToJsonArray=vl,ns.convertToolboxDefToJson=jo,ns.hasCategories=Gu,ns.isCategoryCollapsible=Wu,ns.parseToolboxTree=zh;var yo;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(yo||(yo={}));var wa;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(wa||(wa={}));var rs;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(rs||(rs={}));var Fs={};Fs.bumpDirection=rs,Fs.bumpPositionRect=Yu,Fs.getCornerOppositeToolbox=zu,Fs.getStartPositionRect=Ku,Fs.horizontalPosition=wa,Fs.verticalPosition=yo;var wn={width:96,height:124,url:"sprites.png"},KT=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=de(he.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:$i.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[$i.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&Ke(this.svgGroup);for(const e of this.boundEvents)k(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new Dt(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,t){if(this.initialized){var r=zu(this.workspace,e),a=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(a+=this.LARGE_SPACING+this.HEIGHT),e=Ku(r,new kt(this.WIDTH,a),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),r=r.vertical,t=Yu(e,this.MARGIN_VERTICAL,r===yo.TOP?rs.DOWN:rs.UP,t),r===yo.TOP){var u=this.SMALL_SPACING+this.HEIGHT,S;(S=this.zoomInGroup)==null||S.setAttribute("transform","translate(0, "+u+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(u+this.LARGE_SPACING+this.HEIGHT)+")")}else{S=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let Z;(Z=this.zoomInGroup)==null||Z.setAttribute("transform","translate(0, "+S+")"),S=S+this.SMALL_SPACING+this.HEIGHT,(u=this.zoomOutGroup)==null||u.setAttribute("transform","translate(0, "+S+")")}this.top=t.top,this.left=t.left;var B;(B=this.svgGroup)==null||B.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=de(he.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const t=de(he.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);de(he.RECT,{width:32,height:32},t),de(he.IMAGE,{width:wn.width,height:wn.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(or,"xlink:href",this.workspace.options.pathToMedia+wn.url),this.boundEvents.push(C(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=de(he.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const t=de(he.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);de(he.RECT,{width:32,height:32},t),de(he.IMAGE,{width:wn.width,height:wn.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(or,"xlink:href",this.workspace.options.pathToMedia+wn.url),this.boundEvents.push(C(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,t){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),F(),t.stopPropagation(),t.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=de(he.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const t=de(he.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);de(he.RECT,{width:32,height:32},t),de(he.IMAGE,{width:wn.width,height:wn.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(or,"xlink:href",this.workspace.options.pathToMedia+wn.url),this.boundEvents.push(C(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const t=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(t),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),F(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(Be(pe.CLICK))(null,this.workspace.id,"zoom_controls");Ie(e)}};ee(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var zT=100,YT=75,jT=50,qT=25,dO={BLOCKS:jT,PROCEDURES:YT,VARIABLES:zT,WORKSPACE_COMMENTS:qT},lf={};lf.register=Al,lf.unregister=t$;var JT=class{constructor(){this.priority=qT}save(e){const t=[];for(const r of e.getTopComments())(e=fa(r,{addCoordinates:!0,saveIds:!0}))&&t.push(e);return t.length?t:null}load(e,t){for(const r of e)Ol(r,t,{recordUndo:Ce()})}clear(e){for(const t of e.getTopComments())t.dispose()}};Al("workspaceComments",new JT);var Gc={};Gc.WorkspaceCommentSerializer=JT,Gc.append=Ol,Gc.save=fa;var uf={};uf.register=ju,uf.unregister=i$;var Wc=class{paste(e,t,r){e=e.commentState,r&&(e.x=r.x,e.y=r.y),o.disable$$module$build$src$core$events$utils();let a;try{a=Ol(e,t),n$(a)}finally{o.enable$$module$build$src$core$events$utils()}return a?(ue()&&Ie(new(Be(pe.COMMENT_CREATE))(a)),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(a),a):null}};Wc.TYPE="workspace-comment",ju(Wc.TYPE,new Wc);var cf;cf=28,o.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:cf,connectingSnapRadius:cf,currentConnectionPreference:8,bumpDelay:250},o.config$$module$build$src$core$config;var hO="aria-",_O="role",sr;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem",e.SEPARATOR="separator",e.STATUS="status"})(sr||(sr={}));var Pi;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin",e.LIVE="live",e.HIDDEN="hidden"})(Pi||(Pi={}));var jl={};jl.Role=sr,jl.State=Pi,jl.setRole=jr,jl.setState=Gi;var Xc=class{constructor(e,t){this.content=e,this.opt_value=t,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=U(),this.element=e,e.className="blocklyMenuItem "+(this.enabled?"":"blocklyMenuItemDisabled ")+(this.checked?"blocklyMenuItemSelected ":"")+(this.highlight?"blocklyMenuItemHighlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl ":"");const t=document.createElement("div");if(t.className="blocklyMenuItemContent",this.checkable){var r=document.createElement("div");r.className="blocklyMenuItemCheckbox ",t.appendChild(r)}return r=this.content,typeof this.content=="string"&&(r=document.createTextNode(this.content)),t.appendChild(r),e.appendChild(t),this.roleName&&jr(e,this.roleName),Gi(e,Pi.SELECTED,this.checkable&&this.checked||!1),Gi(e,Pi.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const t=this.getElement();t&&this.isEnabled()&&(e?Le(t,"blocklyMenuItemHighlight"):be(t,"blocklyMenuItemHighlight"))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(e){this.isEnabled()&&this.actionHandler&&this.actionHandler(this,e)}onAction(e,t){this.actionHandler=e.bind(t)}},df=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const t=document.createElement("div");t.className="blocklyMenu",t.tabIndex=0,this.roleName&&jr(t,this.roleName),this.element=t;for(let r=0,a;a=this.menuItems[r];r++)t.appendChild(a.createDom());return this.pointerMoveHandler=C(t,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=C(t,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=C(t,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=C(t,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=C(t,"keydown",this,this.handleKeyEvent),e.appendChild(t),t}getElement(){return this.element}focus(){const e=this.getElement();e&&e.focus({preventScroll:!0})}blur(){const e=this.getElement();e&&e.blur()}setRole(e){this.roleName=e}dispose(){this.pointerMoveHandler&&(k(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(k(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(k(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(k(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(k(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,t;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(e){const t=this.getElement();for(;e&&e!==t;){if(e.classList.contains("blocklyMenuItem")){const r=this.getMenuItems();for(let a=0,u;u=r[a];a++)if(u.getElement()===e)return u}e=e.parentElement}return null}setHighlighted(e){var t=this.highlightedItem;if(t&&(t.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,t=this.getElement();const r=e.getElement();t&&r&&($e(r,t),Gi(t,Pi.ACTIVEDESCENDANT,e.getId()))}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e<0?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,t){e+=t;let r;const a=this.getMenuItems();for(;r=a[e];){if(r.isEnabled()){this.setHighlighted(r);break}e+=t}}handlePointerMove(e){Math.max(Math.abs(e.movementX),Math.abs(e.movementY))!==0&&(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){var t=this.openingCoords;if(this.openingCoords=null,t&&typeof e.clientX=="number"){const r=new Fe(e.clientX,e.clientY);if(Fe.distance(t,r)<1)return}(t=this.getMenuItem(e.target))&&t.performAction(e)}handlePointerEnter(e){this.focus()}handlePointerLeave(e){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem;switch(e.key){case"Enter":case" ":t&&t.performAction(e);break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),t=Je(e);return t.height=e.scrollHeight,t}getMenuItems(){return this.menuItems.filter(e=>e instanceof Xc)}},ZT=class{constructor(){this.element=null}createDom(){return this.element=document.createElement("hr"),this.element.className="blocklyMenuSeparator",jr(this.element,sr.SEPARATOR),this.element}dispose(){let e;(e=this.element)==null||e.remove(),this.element=null}},ql="_TEMP_COLLAPSED_INPUT",Kc="_TEMP_COLLAPSED_FIELD",Sr="MANUALLY_DISABLED",pO={COLLAPSED_FIELD_NAME:Kc,COLLAPSED_INPUT_NAME:ql,MANUALLY_DISABLED:Sr};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(o.inputTypes$$module$build$src$core$inputs$input_types||(o.inputTypes$$module$build$src$core$inputs$input_types={})),o.inputTypes$$module$build$src$core$inputs$input_types;var zc=new Set,hf=new WeakSet,_f=new WeakMap,Ma=null,pf=null,QT=0,Yc={};Yc.finishQueuedRenders=qr,Yc.queueRender=Yh,Yc.triggerQueuedRenders=qo;var ff,eb;o.Msg$$module$build$src$core$msg=Object.create(null),ff=function(e){Object.keys(e).forEach(function(t){o.Msg$$module$build$src$core$msg[t]=e[t]})},eb={Msg:o.Msg$$module$build$src$core$msg,setLocale:ff};var Jl="blocklyToast",tb="blocklyToastMessage",ib="blocklyToastCloseButton",Ps=class{static show(e,t){if(t.oncePerSession&&t.id){if(this.shownIds.has(t.id))return;this.shownIds.add(t.id)}this.hide(e);const r=this.createDom(e,t);requestAnimationFrame(()=>{r.style.bottom="2rem"})}static createDom(e,t){const{message:r,duration:a=5,assertiveness:u=Ps.Assertiveness.POLITE}=t,S=document.createElement("div");e.getInjectionDiv().appendChild(S),S.dataset.toastId=t.id,S.className=Jl,jr(S,sr.STATUS),Gi(S,Pi.LIVE,u),t=S.appendChild(document.createElement("div")),t.className=tb,t.innerText=r,t=S.appendChild(document.createElement("button")),t.className=ib,Gi(t,Pi.LABEL,o.Msg$$module$build$src$core$msg.CLOSE);var B=de(he.SVG,{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},t);Gi(B,Pi.HIDDEN,!0),de(he.RECT,{x:19.7782,y:2.80762,width:2,height:24,transform:"rotate(45, 19.7782, 2.80762)",fill:"black"},B),de(he.RECT,{x:2.80762,y:4.22183,width:2,height:24,transform:"rotate(-45, 2.80762, 4.22183)",fill:"black"},B),t.addEventListener("click",()=>{S.remove(),e.markFocused()});let Z;return t=()=>{Z=setTimeout(()=>S.remove(),a*1e3)},B=()=>clearTimeout(Z),S.addEventListener("focusin",B),S.addEventListener("focusout",t),S.addEventListener("mouseenter",B),S.addEventListener("mousemove",B),S.addEventListener("mouseleave",t),t(),S}static hide(e,t){e=e.getInjectionDiv().querySelector(`.${Jl}`),e instanceof HTMLElement&&(!t||t===e.dataset.toastId)&&e.remove()}};Ps.shownIds=new Set,(function(e){e=e.Assertiveness||(e.Assertiveness={}),e.ASSERTIVE="assertive",e.POLITE="polite"})(Ps||(Ps={})),ee(`
.${Jl} {
  font-size: 1.2rem;
  position: absolute;
  bottom: -10rem;
  right: 2rem;
  padding: 1rem;
  color: black;
  background-color: white;
  border: 2px solid black;
  border-radius: 0.4rem;
  z-index: 999;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  line-height: 1.5;
  transition: bottom 0.3s ease-out;
}

.${Jl} .${tb} {
  maxWidth: 18rem;
}

.${Jl} .${ib} {
  margin: 0;
  padding: 0.2rem;
  background-color: transparent;
  color: black;
  border: none;
  cursor: pointer;
}
`);var nb=function(e,t){window.alert(e),t&&t()},rb=nb,ob=function(e,t){t(window.confirm(e))},sb=ob,ab=function(e,t,r){r(window.prompt(e,t))},lb=ab,ub=Ps.show.bind(Ps),cb=ub,Ro={};Ro.alert=yl,Ro.confirm=Ju,Ro.prompt=Zu,Ro.setAlert=a$,Ro.setConfirm=l$,Ro.setPrompt=u$,Ro.setToast=d$,Ro.toast=c$;var db=new Set,hb={};hb.warn=cn;var gf="VARIABLE",mf="ijkmnopqrstuvwxyzabcdefgh",_b={generateUniqueNameInternal:p$},Bi={CATEGORY_NAME:gf,TEST_ONLY:_b,VAR_LETTER_OPTIONS:mf};Bi.allDeveloperVariables=o.allDeveloperVariables$$module$build$src$core$variables,Bi.allUsedVarModels=o.allUsedVarModels$$module$build$src$core$variables,Bi.compareByName=ma,Bi.createVariableButtonHandler=Os,Bi.deleteVariable=o.deleteVariable$$module$build$src$core$variables,Bi.flyoutCategory=Qh,Bi.flyoutCategoryBlocks=e_,Bi.generateUniqueName=t_,Bi.generateUniqueNameFromOptions=ic,Bi.generateVariableFieldDom=Cs,Bi.getAddedVariables=Rl,Bi.getOrCreateVariablePackage=o.getOrCreateVariablePackage$$module$build$src$core$variables,Bi.getVariable=o.getVariable$$module$build$src$core$variables,Bi.getVariableUsesById=$a,Bi.internalFlyoutCategory=Qu,Bi.jsonFlyoutCategoryBlocks=tc,Bi.nameUsedWithAnyType=i_,Bi.nameUsedWithConflictingParam=n_,Bi.promptName=nc,Bi.renameVariable=o.renameVariable$$module$build$src$core$variables;var xa=class extends Error{},pb=class extends xa{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},Zl=class extends xa{constructor(e,t,r){super(`The block ${t.toDevString()} is missing a(n) ${e}
connection`),this.block=t,this.state=r}},fb=class extends xa{constructor(e,t,r,a){super(`The block ${r.toDevString()} could not connect its
${t} to its parent, because: ${e}`),this.childBlock=r,this.childState=a}},gb=class extends xa{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},mb=class extends xa{constructor(e,t,r){super(`Cannot add an icon of type '${e}' to the block ${t.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=t,this.state=r}},Bs={};Bs.BadConnectionCheck=fb,Bs.DeserializationError=xa,Bs.MissingBlockType=pb,Bs.MissingConnection=Zl,Bs.RealChildOfShadow=gb,Bs.UnregisteredIcon=mb;var $b=class{constructor(){this.priority=jT}save(e){const t=[];for(const r of e.getTopBlocks(!1))(e=Tr(r,{addCoordinates:!0,doFullSerialization:!1}))&&t.push(e);return t.length?{languageVersion:0,blocks:t}:null}load(e,t){e=e.blocks;for(const r of e)Jo(r,t,{recordUndo:Ce()})}clear(e){for(const t of e.getTopBlocks(!1))t.dispose(!1)}};Al("blocks",new $b);var Ql={};Ql.BlockSerializer=$b,Ql.append=Jo,Ql.appendInternal=Ea,Ql.save=Tr;var qi=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};qi.MUTATOR=new qi("mutator"),qi.WARNING=new qi("warning"),qi.COMMENT=new qi("comment");var Us=class extends ka{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Us),t.blockId=e.blockId,t}},Vs=class extends Us{constructor(e,t,r,a,u){super(e),this.type=pe.BLOCK_CHANGE,e&&(this.element=t,this.name=r||void 0,this.oldValue=a,this.newValue=u)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Vs),t.element=e.element,t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,e.disabledReason!==void 0&&(t.disabledReason=e.disabledReason),t}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const r=t.getIcon(qi.MUTATOR);switch(r&&ys(r)&&r.bubbleIsVisible()&&r.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":var a;t.setDisabledReason(!!e,(a=this.disabledReason)!=null?a:Sr);break;case"inline":t.setInputsInline(!!e);break;case"mutation":a=Vs.getExtraBlockState_(t),t.loadExtraState?t.loadExtraState(JSON.parse(e||"{}")):t.domToMutation&&t.domToMutation(o.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),Ie(new Vs(t,"mutation",null,a,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Zr(e):""}};s(De.EVENT,pe.BLOCK_CHANGE,Vs);var jc={};jc.clamp=Ta,jc.toDegrees=x$,jc.toRadians=rc;var qc=16,Eb=1,Tb=12,$f=16,Jc=.25,Ef=null,Hs=null,bb="",Sb="",Ni,eu,Gs,Tf=null,os=null,Ib=null,Zc=null,Qc=null,bf={getBoundsInfo:function(){const e=G(Tf),t=Je(Tf);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},getPositionMetrics:function(e,t,r,a){const u=bf.getBoundsInfo(),S=Je(Ni);return t+S.height<u.bottom?f_(e,t,u,S):a-S.height>u.top?g_(r,a,u,S):t+S.height<document.documentElement.clientHeight?f_(e,t,u,S):a-S.height>document.documentElement.clientTop?g_(r,a,u,S):P$(e,u,S)}},vn={ANIMATION_TIME:Jc,ARROW_HORIZONTAL_PADDING:Tb,ARROW_SIZE:qc,BORDER_SIZE:Eb,PADDING_Y:$f,TEST_ONLY:bf};vn.clearContent=ac,vn.createDom=oc,vn.getContentDiv=sc,vn.getOwner=l_,vn.getPositionX=Nl,vn.hide=uc,vn.hideIfOwner=lc,vn.hideWithoutAnimation=Jr,vn.isVisible=m_,vn.repositionForWindowResize=E_,vn.setBoundsElement=a_,vn.setColour=u_,vn.show=p_,vn.showPositionedByBlock=F$,vn.showPositionedByField=c_;var Fa={};Fa.commonWordPrefix=T_,Fa.commonWordSuffix=b_,Fa.isNumber=o.isNumber$$module$build$src$core$utils$string,Fa.shortestStringLength=Dl,Fa.wrap=o.wrap$$module$build$src$core$utils$string;var ed=void 0,tu=!1,Pa=!1,vb=50,Ab=0,Ws=0,Sf=0,If=0,Ir=null,iu=null,vf=0,Af=10,Ob=10,Cb=750,td=5,Ji=null,ar={HOVER_MS:Cb,LIMIT:vb,MARGINS:td,OFFSET_X:vf,OFFSET_Y:Af,RADIUS_OK:Ob};ar.bindMouseEvents=kl,ar.block=y_,ar.createDom=v_,ar.dispose=C_,ar.getCustomTooltip=H$,ar.getDiv=W$,ar.getTooltipOfObject=ba,ar.hide=So,ar.isVisible=G$,ar.setCustomTooltip=V$,ar.unbindMouseEvents=A_,ar.unblock=R_;var Of=.45,Cf=.65,yb={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},vr={};vr.blend=Ns,vr.getHsvSaturation=N_,vr.getHsvValue=D_,vr.hexToRgb=dc,vr.hsvToHex=hc,vr.hueToHex=k_,vr.names=yb,vr.parse=Rs,vr.rgbToHex=Ll,vr.setHsvSaturation=J$,vr.setHsvValue=Z$;var nu={};nu.checkMessageReferences=Q$,nu.parseBlockColour=Sa,nu.replaceMessageReferences=Mi,nu.tokenizeInterpolation=L_;var ri=class{get size_(){return this.size}set size_(e){this.size=e}constructor(e,t,r){this.DEFAULT_VALUE=null,this.name=void 0,this.tooltip=this.validator_=null,this.size=new kt(0,0),this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.id_=null,this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new kt(0,0),e!==ri.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),t&&this.setValidator(t))}configure_(e){e.tooltip&&this.setTooltip(Mi(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");if(this.sourceBlock_=e,e.id.includes("_field"))throw Error(`Field ID indicator is contained in block ID. This may cause problems with focus: ${e.id}.`);this.id_=`${e.id}_field_${U()}`}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){if(!this.fieldGroup_){var e=this.id_;if(!e)throw Error("Expected ID to be defined prior to init.");this.fieldGroup_=de(he.G,{id:e}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour()}}initView(){this.createBorderRect_(),this.createTextElement_(),this.fieldGroup_&&Le(this.fieldGroup_,"blocklyField")}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=de(he.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=de(he.TEXT,{class:"blocklyText blocklyFieldText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");kl(e),this.mouseDownWrapper=C(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(ri),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(ri,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=o.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),ai(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,t){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(o.textToDom$$module$build$src$core$utils$xml(t)),!0):!1}dispose(){lc(this),Ds(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||Ke(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,t=this.getSourceBlock();this.EDITABLE&&e&&t&&(this.enabled_&&t.isEditable()?(Le(e,"blocklyEditableField"),be(e,"blocklyNonEditableField")):(Le(e,"blocklyNonEditableField"),be(e,"blocklyEditableField")))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==ri.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var t=this.fieldGroup_;t&&(t.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const t=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let r=e*2,a=t.FIELD_TEXT_HEIGHT,u=0;this.textElement_&&(u=St(this.textElement_),r+=u),this.isFullBlockField()||(a=Math.max(a,t.FIELD_BORDER_RECT_HEIGHT)),this.size_=new kt(r,a),this.positionTextElement_(e,u),this.positionBorderRect_()}positionTextElement_(e,t){if(this.textElement_){var r=this.getConstants(),a=this.size_.height/2,u;this.textElement_.setAttribute("x",String((u=this.getSourceBlock())!=null&&u.RTL?this.size_.width-t-e:e)),this.textElement_.setAttribute("y",String(r.FIELD_TEXT_BASELINE_CENTER?a:a-r.FIELD_TEXT_HEIGHT/2+r.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_&&(this.render_(),this.isDirty_=!1),this.size_):new kt(0,0)}getScaledBBox(){let e;var t=this.getSourceBlock();if(!t)throw new Ui;if(this.isFullBlockField()){var r=this.sourceBlock_.getHeightWidth();const a=t.workspace.scale;e=this.getAbsoluteXY_(),t=(r.width+1)*a,r=(r.height+1)*a,AT?(e.x+=1.5*a,e.y+=1.5*a):(e.x-=.5*a,e.y-=.5*a)}else r=this.borderRect_.getBoundingClientRect(),e=G(this.borderRect_),t=r.width,r=r.height;return new Dt(e.y,e.y+r,e.x,e.x+t)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…"),e=e.replace(/\s/g,ri.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏"),e}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,t=!0){if(e!==null){var r=o.getGroup$$module$build$src$core$events$utils();r||o.setGroup$$module$build$src$core$events$utils(!0);try{const ye=this.doClassValidation_(e),et=this.processValidation(e,ye,t);if(!(et instanceof Error)){var a,u=(a=this.getValidator())==null?void 0:a.call(this,et),S=this.processValidation(et,u,t);if(!(S instanceof Error)){var B=this.sourceBlock_;if(!B||!B.disposed){var Z=this.getValue();Z===S?this.doValueUpdate_(S):(this.doValueUpdate_(S),t&&B&&ue()&&Ie(new(Be(pe.BLOCK_CHANGE))(B,"field",this.name||null,Z,S)),this.isDirty_&&this.forceRerender())}}}}finally{o.setGroup$$module$build$src$core$events$utils(r)}}}processValidation(e,t,r){return t===null?(this.doValueInvalid_(e,r),this.isDirty_&&this.forceRerender(),Error()):t===void 0?e:t}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,t){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const t=this.getClickTarget_();t?t.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return ba(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return G(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const t=this.getSourceBlock();if(!t)throw new Ui;const r=t.inputList;for(let a=0;a<t.inputList.length;a++){const u=r[a],S=u.fieldRow;for(let B=0;B<S.length;B++)if(S[B]===this){e=u;break}}return e}getFlipRtl(){return!1}onShortcut(e){return!1}getFocusableElement(){if(!this.fieldGroup_)throw Error("This field currently has no representative DOM element.");return this.fieldGroup_}getFocusableTree(){const e=this.getSourceBlock();if(!e)throw new Ui;return e.workspace}onNodeFocus(){const e=this.getSourceBlock();e.workspace.scrollBoundsIntoView(e.getBoundingRectangleWithoutChildren())}onNodeBlur(){}canBeFocused(){return!0}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};ri.NBSP=" ",ri.SKIP_SETUP=Symbol("SKIP_SETUP");var Ui=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},Ba=null,Rb=null,id=null,yf="blocklyWidgetDiv",Ua="",Va="",lr,nd=null,wr={};wr.createDom=w_,wr.getDiv=Ia,wr.hide=va,wr.hideIfOwner=Ds,wr.hideIfOwnerIsInWorkspace=wl,wr.isVisible=M_,wr.positionWithAnchor=F_,wr.repositionForWindowResize=P_,wr.show=pc,wr.testOnly_setDiv=eE;var rd=null,Nb={},od=null,Xs={};Xs.callbackFactory=o.callbackFactory$$module$build$src$core$contextmenu,Xs.dispose=U_,Xs.getCurrentBlock=rE,Xs.hide=Ml,Xs.setCurrentBlock=B_,Xs.show=Aa;var Bt=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let t;return(t=this.registeredItems.get(e))!=null?t:null}getContextMenuOptions(e,t){const r=[];for(const a of this.registeredItems.values()){if(a.scopeType&&(a.scopeType===Rf.BLOCK&&!e.block||a.scopeType===Rf.COMMENT&&!e.comment||a.scopeType===Rf.WORKSPACE&&!e.workspace))continue;let u;if(u={scope:e,weight:a.weight},a.separator)u=Object.assign({},u,{separator:!0});else{const S=a.preconditionFn(e,t);if(S==="hidden")continue;const B=typeof a.displayText=="function"?a.displayText(e):a.displayText;u=Object.assign({},u,{text:B,callback:a.callback,enabled:S==="enabled"})}r.push(u)}return r.sort(function(a,u){return a.weight-u.weight}),r}};(function(e){var t=e.ScopeType||(e.ScopeType={});t.BLOCK="block",t.WORKSPACE="workspace",t.COMMENT="comment",e.registry=new e})(Bt||(Bt={}));var Rf=Bt.ScopeType,ss=50,sd=100,fO={BLOCK:ss,BUBBLE:sd},Db=class{constructor(e){this.comment=e,this.startLoc=null,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.isReadOnly()}startDrag(){this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,ss),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0)}fireDragStartEvent(){const e=new(Be(pe.COMMENT_DRAG))(this.comment,!0);Ie(e)}fireDragEndEvent(){const e=new(Be(pe.COMMENT_DRAG))(this.comment,!1);Ie(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(Be(pe.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),Ie(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},kb=new WeakMap,ad=class{constructor(e,t,r,a){this.id=e,this.workspace=t,this.container=r,this.commentView=a}isVisible(){return this.icon.checkVisibility()}getCommentView(){return this.commentView}getSize(e=!1){var t=this.icon.getBBox();return t=Dt.from(t),e&&(e=this.getMargin(),t.left-=e,t.top-=e,t.bottom+=e,t.right+=e),t}getMargin(){return(this.container.getBBox().height-this.icon.getBBox().height)/2}getFocusableElement(){return this.icon}getFocusableTree(){return this.workspace}onNodeFocus(){const e=this.getCommentView();var t=e.getRelativeToSurfaceXY();const r=e.getSize();t=new Dt(t.y,t.y+r.height,t.x,t.x+r.width),e.workspace.scrollBoundsIntoView(t)}onNodeBlur(){}canBeFocused(){return this.isVisible()}},Lb="_collapse_bar_button",wb=class extends ad{constructor(e,t,r,a){super(e,t,r,a),this.id=e,this.workspace=t,this.container=r,this.commentView=a,this.icon=de(he.IMAGE,{class:"blocklyFoldoutIcon",href:`${this.workspace.options.pathToMedia}foldout-icon.svg`,id:`${this.id}${Lb}`},this.container),this.bindId=C(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){k(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${e}`)}performAction(e){F(),this.getCommentView().bringToFront(),e&&e instanceof PointerEvent&&f(e)?e.stopPropagation():(this.getCommentView().setCollapsed(!this.getCommentView().isCollapsed()),this.workspace.hideChaff(),e?.stopPropagation())}},Nf="_comment_textarea_",ld=class{constructor(e,t,r){this.workspace=e,this.onFinishEditing=r,this.textChangeListeners=[],this.text="",this.foreignObject=de(he.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"}),e=document.createElementNS(Ms,"body"),e.setAttribute("xmlns",Ms),e.className="blocklyMinimalBody",this.textArea=document.createElementNS(Ms,"textarea"),this.textArea.setAttribute("tabindex","-1"),this.textArea.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),Le(this.textArea,"blocklyCommentText"),Le(this.textArea,"blocklyTextarea"),Le(this.textArea,"blocklyText"),e.appendChild(this.textArea),this.foreignObject.appendChild(e),t&&(this.id=t+Nf,this.textArea.setAttribute("id",this.id)),C(this.textArea,"change",this,this.onTextChange),C(this.textArea,"pointerdown",this,a=>{a.stopPropagation(),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this),F()}),C(this.textArea,"wheel",this,a=>{a.stopPropagation()}),C(this.textArea,"keydown",this,this.handleKeyDown)}getDom(){return this.foreignObject}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}onTextChange(){const e=this.text;this.text=this.textArea.value;for(let t=this.textChangeListeners.length-1;t>=0;t--)this.textChangeListeners[t](e,this.text)}handleKeyDown(e){(e.key==="Escape"||e.key==="Enter"&&(e.ctrlKey||e.metaKey))&&(this.onFinishEditing&&this.onFinishEditing(),e.stopPropagation())}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}setPlaceholderText(e){this.textArea.placeholder=e}setEditable(e){e?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","true")}updateSize(e,t){this.foreignObject.setAttribute("height",`${e.height-t.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${t.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}getFocusableElement(){return this.textArea}getFocusableTree(){return this.workspace}onNodeFocus(){const e=Dt.from(this.foreignObject.getBoundingClientRect());this.workspace.scrollBoundsIntoView(Dt.createFromPoint(ji(this.workspace,e.getOrigin()),e.getWidth(),e.getHeight()))}onNodeBlur(){}canBeFocused(){return!!this.id}},Mb="_delete_bar_button",xb=class extends ad{constructor(e,t,r,a){super(e,t,r,a),this.id=e,this.workspace=t,this.container=r,this.commentView=a,this.icon=de(he.IMAGE,{class:"blocklyDeleteIcon",href:`${this.workspace.options.pathToMedia}delete-icon.svg`,id:`${this.id}${Mb}`},r),this.bindId=C(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){k(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("x","0");const t=this.container.getBBox();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${t.width-this.getSize(!0).getWidth()}`)}performAction(e){F(),e&&e instanceof PointerEvent&&f(e)?e.stopPropagation():(this.getCommentView().dispose(),e?.stopPropagation(),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.workspace))}},ru=class{constructor(e,t){this.workspace=e,this.commentId=t,this.collapsed=!1,this.editable=!0,this.location=new Fe(0,0),this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=de(he.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteButton:this.deleteButton,foldoutButton:this.foldoutButton,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot),this.commentEditor=this.createTextArea(),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let r;(r=e.getLayerManager())==null||r.append(this,ss),this.size=ru.defaultCommentSize,this.setSizeWithoutFiringEvents(this.size),this.moveTo(new Fe(0,0))}createHighlightRect(e){return de(he.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e){e=de(he.G,{class:"blocklyCommentTopbar"},e);const t=de(he.RECT,{class:"blocklyCommentTopbarBackground"},e),r=new xb(this.commentId,this.workspace,e,this),a=new wb(this.commentId,this.workspace,e,this);this.addDisposeListener(()=>{r.dispose(),a.dispose()});const u=de(he.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),S=document.createTextNode("");return u.appendChild(S),{topBarGroup:e,topBarBackground:t,deleteButton:r,foldoutButton:a,textPreview:u,textPreviewNode:S}}createTextArea(){const e=new ld(this.workspace,this.commentId,()=>this.svgRoot.focus());return this.svgRoot.appendChild(e.getDom()),e.addTextChangeListener((t,r)=>{this.updateTextPreview(r),this.setSize(this.size)}),e}getEditorFocusableNode(){return this.commentEditor}createResizeHandle(e,t){return e=de(he.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),C(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const t=this.topBarBackground.getBBox(),r=this.textPreview.getBBox(),a=this.resizeHandle.getBBox();this.size=e=kt.max(e,this.calcMinSize(t)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.commentEditor.updateSize(e,t),this.deleteButton.reposition(),this.foldoutButton.reposition(),this.updateTextPreviewSize(e,t,r),this.updateResizeHandlePosition(e,a)}setSize(e){const t=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(t,this.size)}calcMinSize(e){var t;this.updateTextPreview((t=this.commentEditor.getText())!=null?t:"");let r=t=St(this.textPreview);return this.foldoutButton.isVisible()?r+=this.foldoutButton.getSize(!0).getWidth():t&&(r+=4),this.deleteButton.isVisible()?r+=this.deleteButton.getSize(!0).getWidth():t&&(r+=4),new kt(r,e.height+20)}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextPreviewSize(e,t,r){t=(t.height-r.height)/2;const a=this.foldoutButton.getSize(!0),u=this.deleteButton.getSize(!0);e=e.width-a.getWidth()-u.getWidth(),this.textPreview.setAttribute("x",`${(this.workspace.RTL?-1:1)*a.getWidth()}`),this.textPreview.setAttribute("y",`${t+r.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,t){this.resizeHandle.setAttribute("y",`${e.height-t.height}`),this.resizeHandle.setAttribute("x",`${e.width-t.width}`)}onSizeChange(e,t){for(let r=this.sizeChangeListeners.length-1;r>=0;r--)this.sizeChangeListeners[r](e,t)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),f(e)||(this.preResizeSize=this.getSize(),fc(this.workspace,e,new Fe(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=C(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=C(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){F(),this.resizePointerUpListener&&(k(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(k(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=gc(this.workspace,e),this.setSizeWithoutFiringEvents(new kt(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?Le(this.svgRoot,"blocklyCollapsed"):be(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;e>=0;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(Le(this.svgRoot,"blocklyEditable"),be(this.svgRoot,"blocklyReadonly")):(be(this.svgRoot,"blocklyEditable"),Le(this.svgRoot,"blocklyReadonly")),this.commentEditor.setEditable(e)}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.commentEditor.getText()}setText(e){this.commentEditor.setText(e)}setPlaceholderText(e){this.commentEditor.setPlaceholderText(e)}addTextChangeListener(e){this.commentEditor.addTextChangeListener(e)}removeTextChangeListener(e){this.commentEditor.removeTextChangeListener(e)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return e.length>=12?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,t=e.childNodes;t[t.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){F(),f(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,Ke(this.svgRoot);for(let e=this.disposeListeners.length-1;e>=0;e--)this.disposeListeners[e]();this.disposeListeners.length=0,this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}getCommentBarButtons(){return[this.foldoutButton,this.deleteButton]}};ru.defaultCommentSize=new kt(120,100),ee(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklyCommentText.blocklyActiveFocus {
  border-color: #fc3;
  border-width: 2px;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var ud=class{constructor(e,t){this.workspace=e,this.text="",this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new Fe(0,0),this.disposing=this.disposed=!1,this.id=t&&!e.getCommentById(t)?t:O(),this.size=ru.defaultCommentSize,e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){ue()&&Ie(new(Be(pe.COMMENT_CREATE))(this))}fireDeleteEvent(){ue()&&Ie(new(Be(pe.COMMENT_DELETE))(this))}fireChangeEvent(e,t){ue()&&Ie(new(Be(pe.COMMENT_CHANGE))(this,e,t))}fireCollapseEvent(e){ue()&&Ie(new(Be(pe.COMMENT_COLLAPSE))(this,e))}setText(e){const t=this.text;this.text=e,this.fireChangeEvent(t,e)}getText(){return this.text}setSize(e){const t=new(Be(pe.COMMENT_RESIZE))(this);this.size=e,t.recordCurrentSizeAsNewSize(),Ie(t)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnDeletable(){return this.deletable}moveTo(e,t){const r=new(Be(pe.COMMENT_MOVE))(this);t&&r.setReason(t),this.location=e,r.recordNew(),Ie(r)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},No=class extends ud{constructor(e,t){super(e,t),this.dragStrategy=new Db(this),this.workspace=e,this.view=new ru(e,this.id),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.view.getSvgRoot().setAttribute("id",this.id),this.addModelUpdateBindings(),C(this.view.getSvgRoot(),"pointerdown",this,this.startGesture)}addModelUpdateBindings(){this.view.addTextChangeListener((e,t)=>{super.setText(t)}),this.view.addSizeChangeListener((e,t)=>{super.setSize(t)}),this.view.addOnCollapseListener(()=>{super.setCollapsed(this.view.isCollapsed())}),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setPlaceholderText(e){this.view.setPlaceholderText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var t,r;const a=(r=(t=this.view)==null?void 0:t.getSize())!=null?r:this.getSize();return this.workspace.RTL?(t=e.x-a.width,r=e.x):(t=e.x,r=e.x+a.width),new Dt(e.y,e.y+a.height,t,r)}moveBy(e,t,r){const a=this.getRelativeToSurfaceXY();e=new Fe(a.x+e,a.y+t),this.moveTo(e,r)}moveTo(e,t){super.moveTo(e,t),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?Le(this.getSvgRoot(),"blocklyDragging"):be(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0;const e=o.getFocusManager$$module$build$src$core$focus_manager();e.getFocusedNode()===this&&setTimeout(()=>e.focusTree(this.workspace),0),this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const t=this.workspace.getGesture(e);t&&(t.handleCommentStart(e,this),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this))}setDeleteStyle(e){e?Le(this.getSvgRoot(),"blocklyDraggingDelete"):be(this.getSvgRoot(),"blocklyDraggingDelete")}isCopyable(){return this.isOwnMovable()&&this.isOwnDeletable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Le(this.getSvgRoot(),"blocklySelected"),Ne(this)}unselect(){be(this.getSvgRoot(),"blocklySelected"),Ne(null)}toCopyData(){return{paster:Wc.TYPE,commentState:fa(this,{addCoordinates:!0,saveIds:!1})}}showContextMenu(e){const t=Bt.registry.getContextMenuOptions({comment:this,focusedNode:this},e);let r;r=e instanceof PointerEvent?new Fe(e.clientX,e.clientY):Hi(this.workspace,this.getRelativeToSurfaceXY()).translate(10,10),Aa(e,t,this.workspace.RTL,this.workspace,r)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getEditorFocusableNode(){return this.view.getEditorFocusableNode()}getFocusableElement(){return this.getSvgRoot()}getFocusableTree(){return this.workspace}onNodeFocus(){this.select();let e;(e=this.workspace.getLayerManager())==null||e.append(this,ss),this.workspace.scrollBoundsIntoView(this.getBoundingRectangle())}onNodeBlur(){this.unselect()}canBeFocused(){return!0}},An={};An.appendDomToWorkspace=pE,An.blockToDom=Zo,An.blockToDomWithXY=Fl,An.clearWorkspaceAndLoadFromXml=_E,An.deleteNext=IE,An.domToBlock=o.domToBlock$$module$build$src$core$xml,An.domToBlockInternal=ks,An.domToPrettyText=hE,An.domToText=Zr,An.domToVariables=X_,An.domToWorkspace=o.domToWorkspace$$module$build$src$core$xml,An.loadWorkspaceComment=W_,An.saveWorkspaceComment=xl,An.variablesToDom=H_,An.workspaceToDom=uE;var Df=class extends Us{constructor(e){super(e),this.type=pe.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Fl(e),this.ids=we(e),this.json=Tr(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Zr(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Df),t.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),t.ids=e.ids,t.json=e.json,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!gO(t,this.ids))if(e)Jo(this.json,t);else for(e=0;e<this.ids.length;e++){const r=this.ids[e],a=t.getBlockById(r);a?a.dispose(!1):r===this.blockId&&console.warn("Can't uncreate non-existent block: "+r)}}},gO=function(e,t){return t.map(r=>e.getBlockById(r)).filter(r=>r&&r.isShadow()).length===t.length};s(De.EVENT,pe.BLOCK_CREATE,Df);var kf=class extends to{constructor(e,t){super(t),this.type=pe.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new kf),t.themeName=e.themeName,t}};s(De.EVENT,pe.THEME_CHANGE,kf);var Lf=class extends to{constructor(e,t,r,a,u){super(a),this.type=pe.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=t,this.scale=r,this.oldScale=u}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Lf),t.viewTop=e.viewTop,t.viewLeft=e.viewLeft,t.scale=e.scale,t.oldScale=e.oldScale,t}};s(De.EVENT,pe.VIEWPORT_CHANGE,Lf);var Fb={fromJsonInternal:AE},cd={TEST_ONLY:Fb};cd.fromJson=o.fromJson$$module$build$src$core$field_registry,cd.register=Qr,cd.unregister=vE;var bn=class extends ri{constructor(e,t,r){super(ri.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==ri.SKIP_SETUP&&(this.setOptions(e),r&&this.configure_(r),t&&this.setValidator(t))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(bn,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=de(he.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Le(this.borderRect_,"blocklyDropdownRect"),this.fieldGroup_&&(Le(this.fieldGroup_,"blocklyField"),Le(this.fieldGroup_,"blocklyDropdownField"))}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=de(he.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?bn.ARROW_CHAR+" ":" "+bn.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let t;(t=this.getSourceBlock())!=null&&t.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=de(he.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(or,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var t=this.getSourceBlock();if(!t)throw new Ui;this.dropdownCreate(),this.menu_&&(this.menu_.openingCoords=e&&typeof e.clientX=="number"?new Fe(e.clientX,e.clientY):null,ac(),e=this.menu_.render(sc()),Le(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(t=t.getColour(),e=this.sourceBlock_.getColourTertiary(),u_(t,e)),c_(this,this.dropdownDispose_.bind(this)),sc().style.height=`${this.menu_.getSize().height}px`,this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour())}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new Ui;const t=new df;t.setRole(sr.LISTBOX),this.menu_=t;const r=this.getOptions(!1);this.selectedMenuItem=null;for(let u=0;u<r.length;u++){var a=r[u];if(a===bn.SEPARATOR){t.addChild(new ZT);continue}const[S,B]=a;Oa(S)?(a=new Image(S.width,S.height),a.src=S.src,a.alt=S.alt):a=S,a=new Xc(a,B),a.setRole(sr.OPTION),a.setRightToLeft(e.RTL),a.setCheckable(!0),t.addChild(a),a.setChecked(B===this.value_),B===this.value_&&(this.selectedMenuItem=a),a.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){lc(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,t){this.setValue(t.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}setOptions(e){Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],this.setValue(this.selectedOption[1])}doClassValidation_(e){return this.getOptions(!0).some(t=>t[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let t=0,r;r=e[t];t++)r[1]===this.value_&&(this.selectedOption=r)}applyColour(){const e=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",e.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),e&&this.arrow&&(e.isShadow()?this.arrow.style.fill=e.getColourSecondary():this.arrow.style.fill=e.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];Oa(e)?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const t=this.getSourceBlock();if(!t)throw new Ui;this.imageElement.style.display="",this.imageElement.setAttributeNS(or,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const r=Number(e.height);e=Number(e.width);var a=!!this.borderRect_;const u=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,r+bn.IMAGE_Y_PADDING);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let S;S=this.svgArrow?this.positionSVGArrow(e+a,u/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):St(this.arrow),this.size_=new kt(e+S+a*2,u);let B=0;t.RTL?this.imageElement.setAttribute("x",`${a+S}`):(B=e+S,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${a}`)),this.imageElement.setAttribute("y",String(u/2-r/2)),this.positionTextElement_(B+a,e+S)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();Le(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var t=!!this.borderRect_;e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const r=St(this.getTextElement());t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let a=0;this.svgArrow&&(a=this.positionSVGArrow(r+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_=new kt(r+a+t*2,e),this.positionTextElement_(t,r)}positionSVGArrow(e,t){if(!this.svgArrow)return 0;const r=this.getSourceBlock();if(!r)throw new Ui;const a=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,u=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,S=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(r.RTL?a:e+u)+","+t+")"),S+u}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];if(Oa(e))return e.alt;if(typeof HTMLElement<"u"&&e instanceof HTMLElement){let t,r;return(r=(t=e.title)!=null?t:e.ariaLabel)!=null?r:e.innerText}return typeof e=="string"?e:(console.warn("Can't get text for existing dropdown option. If you're using HTMLElement dropdown options in node, ensure you're using jsdom-global or similar."),null)}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let t=!1;const r=e.map(B=>{if(B===bn.SEPARATOR)return t=!0,B;const[Z,ye]=B;return typeof Z=="string"?[Mi(Z),ye]:(t=!0,[Oa(Z)?Object.assign({},Z,{alt:Mi(Z.alt)}):Z,ye])});if(t||e.length<2)return{options:r};var a=r.map(([B])=>B),u=Dl(a);e=T_(a,u);const S=b_(a,u);return!e&&!S||u<=e+S?{options:r}:(u=e?a[0].substring(0,e-1):void 0,a=S?a[0].substr(1-S):void 0,{options:this.applyTrim(r,e,S),prefix:u,suffix:a})}applyTrim(e,t,r){return e.map(([a,u])=>[a.substring(t,a.length-r),u])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let t=!1;for(let r=0;r<e.length;r++){const a=e[r];Array.isArray(a)||a===bn.SEPARATOR?typeof a[1]!="string"?(t=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option id must be a string.
          Found ${a[1]} in: ${a}`)):!a[0]||typeof a[0]=="string"||Oa(a[0])||typeof HTMLElement<"u"&&a[0]instanceof HTMLElement||(t=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option must have a string
          label, image description, or HTML element. Found ${a[0]} in: ${a}`)):(t=!0,console.error(`Invalid option[${r}]: Each FieldDropdown option must be an array or
          the string literal 'separator'. Found: ${a}`))}if(t)throw TypeError("Found invalid FieldDropdown options.")}};bn.SEPARATOR="separator",bn.ARROW_CHAR="▾",bn.IMAGE_Y_OFFSET=5,bn.IMAGE_Y_PADDING=bn.IMAGE_Y_OFFSET*2,Qr("field_dropdown",bn);var Ks=class{constructor(e,t,r,a){this.name=e,this.startHats=!1,this.blockStyles=t||Object.create(null),this.categoryStyles=r||Object.create(null),this.componentStyles=a||Object.create(null),this.fontStyle=Object.create(null),s(De.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,t){this.blockStyles[e]=t}setCategoryStyle(e,t){this.categoryStyles[e]=t}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const t=this.getComponentStyle(e);if(t)return t}return`${e}`}setComponentStyle(e,t){this.componentStyles[e]=t}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,t){e=e.toLowerCase();const r=new Ks(e);let a=t.base;if(a){if(typeof a=="string"){let u;a=(u=M(De.THEME,a))!=null?u:void 0}a instanceof Ks&&(Te(r,a),r.name=e)}return Te(r.blockStyles,t.blockStyles),Te(r.categoryStyles,t.categoryStyles),Te(r.componentStyles,t.componentStyles),Te(r.fontStyle,t.fontStyle),t.startHats!==null&&(r.startHats=t.startHats),r}},mO={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},$O={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},dd=new Ks("classic",mO,$O),io=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let t=null,r=!1;var a=!1,u=!1,S=!1,B=!1,Z=!1;const ye=!!e.readOnly;if(!ye){var et;t=jo((et=e.toolbox)!=null?et:null),r=Gu(t),a=e.trashcan,a=a===void 0?r:a,u=e.collapse,u=u===void 0?r:u,S=e.comments,S=S===void 0?r:S,B=e.disable,B=B===void 0?r:B,Z=e.sounds,Z=Z===void 0?!0:Z}et=e.maxTrashcanContents,a?et===void 0&&(et=32):et=0;const Ii=!!e.rtl;let ci=e.horizontalLayout;ci===void 0&&(ci=!1);var Sn=e.toolboxPosition!=="end";Sn=ci?Sn?Lt.TOP:Lt.BOTTOM:Sn===Ii?Lt.RIGHT:Lt.LEFT;let wo=e.css;wo===void 0&&(wo=!0);let ho="https://blockly-demo.appspot.com/static/media/";e.media&&(ho=e.media.endsWith("/")?e.media:e.media+"/");const AI=e.oneBasedIndex,ZO=e.renderer||"geras",QO=e.plugins||{};let Ng=e.modalInputs;Ng===void 0&&(Ng=!0),this.RTL=Ii,this.oneBasedIndex=AI===void 0?!0:AI,this.collapse=u,this.comments=S,this.disable=B,this.readOnly=ye,this.maxBlocks=e.maxBlocks||1/0;let OI;this.maxInstances=(OI=e.maxInstances)!=null?OI:null,this.modalInputs=Ng,this.pathToMedia=ho,this.hasCategories=r,this.moveOptions=io.parseMoveOptions(e,r),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=a,this.maxTrashcanContents=et,this.hasSounds=Z,this.hasCss=wo,this.horizontalLayout=ci,this.languageTree=t,this.gridOptions=io.parseGridOptions(e),this.zoomOptions=io.parseZoomOptions(e),this.toolboxPosition=Sn,this.theme=io.parseThemeOptions(e),this.renderer=ZO;let CI;this.rendererOverrides=(CI=e.rendererOverrides)!=null?CI:null;let yI;this.parentWorkspace=(yI=e.parentWorkspace)!=null?yI:null,this.plugins=QO}static parseMoveOptions(e,t){const r=e.move||{},a={};return r.scrollbars===void 0&&e.scrollbars===void 0?a.scrollbars=t:typeof r.scrollbars=="object"?(a.scrollbars={horizontal:!!r.scrollbars.horizontal,vertical:!!r.scrollbars.vertical},a.scrollbars.horizontal&&a.scrollbars.vertical?a.scrollbars=!0:a.scrollbars.horizontal||a.scrollbars.vertical||(a.scrollbars=!1)):a.scrollbars=!!r.scrollbars||!!e.scrollbars,a.wheel=a.scrollbars&&r.wheel!==void 0?!!r.wheel:typeof a.scrollbars=="object",a.drag=a.scrollbars?r.drag===void 0?!0:!!r.drag:!1,a}static parseZoomOptions(e){e=e.zoom||{};const t={};return t.controls=e.controls===void 0?!1:!!e.controls,t.wheel=e.wheel===void 0?!1:!!e.wheel,t.startScale=e.startScale===void 0?1:Number(e.startScale),t.maxScale=e.maxScale===void 0?3:Number(e.maxScale),t.minScale=e.minScale===void 0?.3:Number(e.minScale),t.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),t.pinch=e.pinch===void 0?t.wheel||t.controls:!!e.pinch,t}static parseGridOptions(e){e=e.grid||{};const t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=e.length===void 0?1:Number(e.length),t.snap=t.spacing>0&&!!e.snap,t}static parseThemeOptions(e){return e=e.theme||dd,typeof e=="string"?M(De.THEME,e):e instanceof Ks?e:Ks.defineTheme(e.name||"builtin"+U(),e)}},Pb=class{constructor(e,t){this.bubble=e,this.workspace=t,this.startLoc=null}isMovable(){return!0}startDrag(){this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,sd),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},ur,Qt=class{constructor(e,t,r,a,u){this.workspace=e,this.anchor=t,this.ownerRect=r,this.owner=u,this.size=new kt(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new Pb(this,this.workspace),this.id=U(),this.svgRoot=de(he.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=de(he.G,{class:"blocklyEmboss"},this.svgRoot),this.tail=de(he.PATH,{class:"blocklyBubbleTail"},e),this.background=de(he.RECT,{class:"blocklyDraggable",x:0,y:0,rx:ur.BORDER_WIDTH,ry:ur.BORDER_WIDTH},e),this.contentContainer=de(he.G,{},this.svgRoot),this.focusableElement=a??this.svgRoot,this.focusableElement.setAttribute("id",this.id),C(this.background,"pointerdown",this,this.onMouseDown),C(this.focusableElement,"keydown",this,this.onKeyDown)}dispose(){Ke(this.svgRoot),this.disposed=!0}setAnchorLocation(e,t=!1){this.anchor=e,t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,t){this.relativeLeft=e,this.relativeTop=t,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,t=!1){e.width=Math.max(e.width,ur.MIN_SIZE),e.height=Math.max(e.height,ur.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),t?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let t;(t=this.workspace.getGesture(e))==null||t.handleBubbleStart(e,this),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}onKeyDown(e){e.key==="Escape"&&this.owner&&(this.owner.setBubbleVisible(!1),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.owner))}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,t){this.svgRoot.setAttribute("transform",`translate(${e}, ${t})`)}positionByRect(e=new Dt(0,0,0,0)){var t=this.workspace.getMetricsManager().getViewMetrics(!0),r=this.getOptimalRelativeLeft(t),a=this.getOptimalRelativeTop(t);const u={x:r,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},S={x:-this.size.width-30,y:a};a={x:e.getWidth(),y:a};var B={x:r,y:e.getHeight()};r=e.getWidth()<e.getHeight()?a:B,e=e.getWidth()<e.getHeight()?B:a,a=this.getOverlap(u,t),B=this.getOverlap(S,t);const Z=this.getOverlap(r,t);t=this.getOverlap(e,t),t=Math.max(a,B,Z,t),a===t?(this.relativeLeft=u.x,this.relativeTop=u.y):B===t?(this.relativeLeft=S.x,this.relativeTop=S.y):Z===t?(this.relativeLeft=r.x,this.relativeTop=r.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,t){var r=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(r+this.size.width,t.left+t.width)-Math.max(r,t.left))*(Math.min(e+this.size.height,t.top+t.height)-Math.max(e,t.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let t=-this.size.width/4;if(this.size.width>e.width)return t;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var r=this.anchor.x-t;r-this.size.width<e.left?t=-(e.left-this.anchor.x+this.size.width):r>e.right&&(t=-(e.right-this.anchor.x))}else{r=t+this.anchor.x;const a=r+this.size.width;r<e.left?t=e.left-this.anchor.x:a>e.right&&(t=e.right-this.anchor.x-this.size.width)}return t}getOptimalRelativeTop(e){let t=-this.size.height/4;if(this.size.height>e.height)return t;const r=this.anchor.y+t,a=r+this.size.height;return e=this.getWorkspaceViewRect(e),r<e.top?t=e.top-this.anchor.y:a>e.bottom&&(t=e.bottom-this.anchor.y-this.size.height),t}getWorkspaceViewRect(e){const t=e.top;let r=e.top+e.height,a=e.left;return e=e.left+e.width,r-=this.getScrollbarThickness(),this.workspace.RTL?a-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new Dt(t,r,a,e)}getScrollbarThickness(){return Fi.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var t=this.size.width/2,r=this.size.height/2,a=-this.relativeLeft,u=-this.relativeTop;if(t===a&&r===u)e.push("M "+t+","+r);else{u-=r,a-=t,this.workspace.RTL&&(a*=-1);var S=Math.sqrt(u*u+a*a),B=Math.acos(a/S);u<0&&(B=2*Math.PI-B);var Z=B+Math.PI/2;Z>Math.PI*2&&(Z-=Math.PI*2);var ye=Math.sin(Z);const Ii=Math.cos(Z);let ci=(this.size.width+this.size.height)/ur.TAIL_THICKNESS;ci=Math.min(ci,this.size.width,this.size.height)/4,Z=1-ur.ANCHOR_RADIUS/S,a=t+Z*a,u=r+Z*u,Z=t+ci*Ii;const Sn=r+ci*ye;t-=ci*Ii,r-=ci*ye,ye=rc(this.workspace.RTL?-ur.TAIL_ANGLE:ur.TAIL_ANGLE),ye=B+ye,ye>Math.PI*2&&(ye-=Math.PI*2),B=Math.sin(ye)*S/ur.TAIL_BEND,S=Math.cos(ye)*S/ur.TAIL_BEND,e.push("M"+Z+","+Sn),e.push("C"+(Z+S)+","+(Sn+B)+" "+a+","+u+" "+a+","+u),e.push("C"+a+","+u+" "+(t+S)+","+(r+B)+" "+t+","+r)}e.push("z");let et;(et=this.tail)==null||et.setAttribute("d",e.join(" "))}bringToFront(){let e;const t=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&t?.lastChild!==this.svgRoot?(t?.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Fe(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Ne(this)}unselect(){Ne(null)}getFocusableElement(){return this.focusableElement}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.bringToFront();var e=this.getRelativeToSurfaceXY();const t=this.getSize();e=new Dt(e.y,e.y+t.height,e.x,e.x+t.width),this.workspace.scrollBoundsIntoView(e)}onNodeBlur(){this.unselect()}canBeFocused(){return!0}getOwner(){return this.owner}};ur=Qt,Qt.BORDER_WIDTH=6,Qt.DOUBLE_BORDER=ur.BORDER_WIDTH*2,Qt.MIN_SIZE=ur.DOUBLE_BORDER,Qt.TAIL_THICKNESS=1,Qt.TAIL_ANGLE=20,Qt.TAIL_BEND=4,Qt.ANCHOR_RADIUS=8;var Do=class extends Qt{constructor(e,t,r,a){super(t,r,a),this.workspace=t,this.anchor=r,this.ownerRect=a,this.autoLayout=!0,t=new io(e),this.validateWorkspaceOptions(t),this.svgDialog=de(he.SVG,{x:Qt.BORDER_WIDTH,y:Qt.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new io(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),t.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(he.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e?.init(this.miniWorkspace),e?.show(t.languageTree)),Le(this.svgRoot,"blocklyMiniWorkspaceBubble"),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let u,S;(u=this.miniWorkspace.getFlyout())==null||(S=u.getWorkspace())==null||S.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress)for(const e of this.miniWorkspace.getTopBlocks(!1)){const t=e.getRelativeToSurfaceXY();if(t.y<20&&e.moveBy(0,20-t.y),e.RTL){let r=-20;const a=this.miniWorkspace.getFlyout();a&&(r-=a.getWidth()),t.x>r&&e.moveBy(r-t.x,0)}else t.x<20&&e.moveBy(20-t.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress){this.autoLayout&&(this.autoLayout=!this.miniWorkspace.keyboardMoveInProgress);var e=this.getSize(),t=this.calculateWorkspaceSize();Math.abs(e.width-t.width)<Do.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-t.height)<Do.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${t.width}px`),this.svgDialog.setAttribute("height",`${t.height}px`),this.miniWorkspace.setCachedParentSvgSize(t.width,t.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${t.width}, 0)`),this.setSize(new kt(t.width+Qt.DOUBLE_BORDER,t.height+Qt.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let t=e.width+Do.MARGIN;e=e.height+Do.MARGIN;const r=this.miniWorkspace.getFlyout();if(r){const a=r.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,a.height+20),t+=r.getWidth()}return new kt(t,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let t;if(e=(t=this.miniWorkspace.getFlyout())==null?void 0:t.getWorkspace())for(const r of e.getAllBlocks(!1))r.setStyle(r.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,t){super.moveTo(e,t),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Do.MINIMUM_VIEW_CHANGE=10,Do.MARGIN=Qt.DOUBLE_BORDER*3;var ou=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new Fe(0,0),this.workspaceLocation=new Fe(0,0),this.svgRoot=null,this.tooltip=e,this.id=U()}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var t=this.sourceBlock;this.svgRoot=de(he.G,{class:"blocklyIconGroup",id:this.id}),t.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),C(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,kl(this.svgRoot)}}dispose(){A_(this.svgRoot),Ke(this.svgRoot)}getWeight(){return-1}getSize(){return new kt(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",ys(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=Fe.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}getFocusableElement(){const e=this.svgRoot;if(!e)throw Error("Attempting to focus uninitialized icon.");return e}getFocusableTree(){return this.sourceBlock.workspace}onNodeFocus(){var e=this.sourceBlock.getBoundingRectangle();e=new Dt(e.top+this.offsetInBlock.y,e.top+this.offsetInBlock.y+this.getSize().height,e.left+this.offsetInBlock.x,e.left+this.offsetInBlock.x+this.getSize().width),this.sourceBlock.workspace.scrollBoundsIntoView(e)}onNodeBlur(){}canBeFocused(){return!0}getSourceBlock(){return this.sourceBlock}},hd,_d;hd=17,_d=16,o.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends ou{constructor(e,t){super(t),this.flyoutBlockTypes=e,this.sourceBlock=t,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),de(he.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),de(he.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),de(he.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),Le(this.svgRoot,"blocklyMutatorIcon"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return o.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new kt(hd,hd)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.getColour());let t;(t=this.miniWorkspaceBubble)==null||t.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let t;(t=this.miniWorkspaceBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const t=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){if(t.bubbleIsVisible()!==e){if(yield qr(),e){t.miniWorkspaceBubble=new Do(t.getMiniWorkspaceConfig(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour(),t.createRootBlock(),t.addSaveConnectionsListener();let r;(r=t.miniWorkspaceBubble)==null||r.addWorkspaceChangeListener(t.createMiniWorkspaceChangeListener())}else{let r;(r=t.miniWorkspaceBubble)==null||r.dispose(),t.miniWorkspaceBubble=null,t.saveConnectionsListener&&t.sourceBlock.workspace.removeChangeListener(t.saveConnectionsListener),t.saveConnectionsListener=null}Ie(new(Be(pe.BUBBLE_OPEN))(t.sourceBlock,e,"mutator"))}})}getBubble(){return this.miniWorkspaceBubble}getMiniWorkspaceConfig(){let e;const t={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(t.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(r=>({kind:"block",type:r}))}),t}getAnchorLocation(){const e=hd/2;return Fe.sum(this.workspaceLocation,new Fe(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Dt(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let t,r,a,u;e=(u=(t=this.miniWorkspaceBubble)==null||(r=t.getWorkspace())==null||(a=r.getFlyout())==null?void 0:a.getWidth())!=null?u:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+_d):_d,_d)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{o.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||X(e)||re(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=o.getGroup$$module$build$src$core$events$utils();e||o.setGroup$$module$build$src$core$events$utils(!0);var t=Vs.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var r=Vs.getExtraBlockState_(this.sourceBlock);t!==r&&Ie(new(Be(pe.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,t,r)),o.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=qi.MUTATOR,o.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,o.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Ha=Object.create(null),EO={allExtensions:Ha};o.register$$module$build$src$core$extensions("parent_tooltip_when_inline",LE);var Mr={TEST_ONLY:EO};Mr.apply=$c,Mr.buildTooltipForDropdown=o.buildTooltipForDropdown$$module$build$src$core$extensions,Mr.buildTooltipWithFieldText=o.buildTooltipWithFieldText$$module$build$src$core$extensions,Mr.isRegistered=Y_,Mr.register=o.register$$module$build$src$core$extensions,Mr.registerMixin=o.registerMixin$$module$build$src$core$extensions,Mr.registerMutator=o.registerMutator$$module$build$src$core$extensions,Mr.runAfterPageLoad=DE,Mr.unregister=OE;var oi;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(oi||(oi={}));var ko={};ko.arc=xi,ko.curve=zn,ko.line=Ca,ko.lineOnAxis=nt,ko.lineTo=eo,ko.moveBy=Ri,ko.moveTo=dn,ko.point=tt;var Si={};Si.Coordinate=Fe,Si.KeyCodes=oi,Si.Rect=Dt,Si.Size=kt,Si.Svg=he,Si.aria=jl,Si.array=BT,Si.browserEvents=vo,Si.colour=vr,Si.deprecation=hb,Si.dom=hn,Si.extensions=Mr,Si.idGenerator=qp,Si.math=jc,Si.object=MT,Si.parsing=nu,Si.string=Fa,Si.style=is,Si.svgMath=xs,Si.svgPaths=ko,Si.toolbox=ns,Si.userAgent=sO,Si.xml=La;var pd=class extends Qt{constructor(e,t,r,a){super(e,t,r,void 0,a),this.workspace=e,this.anchor=t,this.ownerRect=r,this.owner=a,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.sizeChangeListeners=[],this.locationChangeListeners=[],this.DEFAULT_SIZE=new kt(160+Qt.DOUBLE_BORDER,80+Qt.DOUBLE_BORDER),this.MIN_SIZE=new kt(45+Qt.DOUBLE_BORDER,20+Qt.DOUBLE_BORDER),this.editable=!0,Le(this.svgRoot,"blocklyTextInputBubble"),this.editor=new ld(e,this.id,()=>{o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}),this.contentContainer.appendChild(this.editor.getDom()),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.editor.getText()}setText(e){this.editor.setText(e)}setEditable(e){this.editable=e,this.editor.setEditable(e)}isEditable(){return this.editable}addTextChangeListener(e){this.editor.addTextChangeListener(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}addLocationChangeListener(e){this.locationChangeListeners.push(e)}createResizeHandle(e,t){return e=de(he.IMAGE,{class:"blocklyResizeHandle",href:`${t.options.pathToMedia}resize-handle.svg`},e),C(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,t=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const r=e.width-Qt.DOUBLE_BORDER,a=e.height-Qt.DOUBLE_BORDER;this.editor.updateSize(new kt(r,a),new kt(0,0)),this.editor.getDom().setAttribute("x",`${Qt.DOUBLE_BORDER/2}`),this.editor.getDom().setAttribute("y",`${Qt.DOUBLE_BORDER/2}`),this.resizeGroup.setAttribute("y",`${a}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-Qt.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${r}`),super.setSize(e,t),this.onSizeChange()}getSize(){return super.getSize()}moveDuringDrag(e){super.moveDuringDrag(e),this.onLocationChange()}setPositionRelativeToAnchor(e,t){super.setPositionRelativeToAnchor(e,t),this.onLocationChange()}positionByRect(e=new Dt(0,0,0,0)){super.positionByRect(e),this.onLocationChange()}onResizePointerDown(e){this.bringToFront(),f(e)||(fc(this.workspace,e,new Fe(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=C(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=C(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){F(),this.resizePointerUpListener&&(k(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(k(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=gc(this.workspace,e),this.setSize(new kt(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}onLocationChange(){for(const e of this.locationChangeListeners)e()}getEditor(){return this.editor}};ee(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var qe;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(qe||(qe={}));var Ga=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,t){t=this.calculateIndexForYPos(t),this.connections.splice(t,0,e)}findIndexOfConnection(e,t){if(!this.connections.length)return-1;const r=this.calculateIndexForYPos(t);if(r>=this.connections.length)return-1;t=e.y;let a=r;for(;a>=0&&this.connections[a].y===t;){if(this.connections[a]===e)return a;a--}for(a=r;a<this.connections.length&&this.connections[a].y===t;){if(this.connections[a]===e)return a;a++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let t=0,r=this.connections.length;for(;t<r;){const a=Math.floor((t+r)/2);if(this.connections[a].y<e)t=a+1;else if(this.connections[a].y>e)r=a;else{t=a;break}}return t}removeConnection(e,t){if(e=this.findIndexOfConnection(e,t),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,t){function r(et){const Ii=u-a[et].x,ci=S-a[et].y;return Math.sqrt(Ii*Ii+ci*ci)<=t&&ye.push(a[et]),ci<t}const a=this.connections,u=e.x,S=e.y;e=0;let B=a.length-2,Z=B;for(;e<Z;)a[Z].y<S?e=Z:B=Z,Z=Math.floor((e+B)/2);const ye=[];if(B=e=Z,a.length){for(;e>=0&&r(e);)e--;do B++;while(B<a.length&&r(B))}return ye}isInYRange(e,t,r){return Math.abs(this.connections[e].y-t)<=r}searchForClosest(e,t,r){if(!this.connections.length)return{connection:null,radius:t};const a=e.y,u=e.x;e.x=u+r.x,e.y=a+r.y;var S=this.calculateIndexForYPos(e.y);r=null;let B=t,Z,ye=S-1;for(;ye>=0&&this.isInYRange(ye,e.y,t);)Z=this.connections[ye],this.connectionChecker.canConnect(e,Z,!0,B)&&(r=Z,B=Z.distanceFrom(e)),ye--;for(;S<this.connections.length&&this.isInYRange(S,e.y,t);)Z=this.connections[S],this.connectionChecker.canConnect(e,Z,!0,B)&&(r=Z,B=Z.distanceFrom(e)),S++;return e.x=u,e.y=a,{connection:r,radius:B}}static init(e){const t=[];return t[qe.INPUT_VALUE]=new Ga(e),t[qe.OUTPUT_VALUE]=new Ga(e),t[qe.NEXT_STATEMENT]=new Ga(e),t[qe.PREVIOUS_STATEMENT]=new Ga(e),t}},wf=class extends to{constructor(e,t,r){super(r),this.type=pe.SELECTED,this.oldElementId=e??void 0,this.newElementId=t??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new wf),t.oldElementId=e.oldElementId,t.newElementId=e.newElementId,t}};s(De.EVENT,pe.SELECTED,wf);var Mf=class extends Us{constructor(e){if(super(e),this.type=pe.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Fl(e),this.ids=we(e),this.wasShadow=e.isShadow(),this.oldJson=Tr(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Zr(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Mf),t.oldXml=o.textToDom$$module$build$src$core$utils$xml(e.oldXml),t.ids=e.ids,t.wasShadow=e.wasShadow||t.oldXml.tagName.toLowerCase()==="shadow",t.oldJson=e.oldJson,e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}run(e){const t=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const r=this.ids[e],a=t.getBlockById(r);a?a.dispose(!1):r===this.blockId&&console.warn("Can't delete non-existent block: "+r)}else Jo(this.oldJson,t)}};s(De.EVENT,pe.BLOCK_DELETE,Mf);var Xt=class{constructor(e,t){if(this.type=t,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e,e.id.includes("_connection"))throw Error(`Connection ID indicator is contained in block ID. This will cause problems with focus: ${e.id}.`);this.id=`${e.id}_connection_${U()}`}connect_(e){const t=qe.INPUT_VALUE,r=this.getSourceBlock();var a=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let u;if(this.isConnected()){const B=this.stashShadowState(),Z=this.targetBlock();Z.isShadow()?Z.dispose(!1):(this.disconnectInternal(),u=Z),this.applyShadowState(B)}let S;ue()&&(S=new(Be(pe.BLOCK_MOVE))(a),S.setReason(["connect"])),wE(this,e),a.setParent(r),S&&(S.recordNew(),Ie(S)),u&&(e=this.type===t?u.outputConnection:u.previousConnection)&&((a=Xt.getConnectionForOrphanedConnection(a,e))?e.connect(a):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===qe.INPUT_VALUE||this.type===qe.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const t=o.getGroup$$module$build$src$core$events$utils();t||o.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),o.setGroup$$module$build$src$core$events$utils(t)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:t,childConnection:r}=this.getParentAndChildConnections();if(!t||!r)throw Error("Source connection not connected.");const a=o.getGroup$$module$build$src$core$events$utils();a||o.setGroup$$module$build$src$core$events$utils(!0);let u;ue()&&(u=new(Be(pe.BLOCK_MOVE))(r.getSourceBlock()),u.setReason(["disconnect"]));const S=this.targetConnection;S&&(S.targetConnection=null),this.targetConnection=null,e&&r.getSourceBlock().setParent(null),u&&(u.recordNew(),Ie(u)),r.getSourceBlock().isShadow()||t.respawnShadow_(),o.setGroup$$module$build$src$core$events$utils(a)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,t){if(this.getSourceBlock().isDeadOrDying())return!1;var r;return t=(r=e.getInput(t))==null?void 0:r.connection,r=this.targetBlock(),r&&r!==e||!t||t.targetConnection===this?!1:(t.isConnected()&&t.disconnect(),t.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,t;return(t=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?t:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?Zo(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?Tr(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const t=this.sourceBlock_.inputList;for(let r=0;r<t.length;r++)if(t[r].connection===this){e=t[r];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var t="Output Connection of ";else if(e.previousConnection===this)t="Previous Connection of ";else if(e.nextConnection===this)t="Next Connection of ";else{t=null;for(let r=0,a;a=e.inputList[r];r++)if(a.connection===this){t=a;break}if(t)t='Input "'+t.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return t+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),t=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:t}}applyShadowState({shadowDom:e,shadowState:t}){this.shadowDom=e,this.shadowState=t}setShadowStateInternal({shadowDom:e=null,shadowState:t=null}={}){this.shadowDom=e,this.shadowState=t,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var t=this.getSourceBlock();const r=this.getShadowState(),a=this.getShadowDom();if(t.isDeadOrDying()||!r&&!a)return null;if(r)return t=Ea(r,t.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(a){if(t=ks(a,t.workspace),e)if(this.type===qe.INPUT_VALUE){if(!t.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(t.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===qe.NEXT_STATEMENT){if(!t.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(t.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return t}return null}serializeShadow(e){e&&(this.shadowDom=Zo(e),this.shadowState=Tr(e))}static getConnectionForOrphanedConnection(e,t){if(t.type===qe.OUTPUT_VALUE)return xE(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);const r=t.getConnectionChecker();return e&&r.canConnect(t,e,!1)?e:null}};Xt.CAN_CONNECT=0,Xt.REASON_SELF_CONNECTION=1,Xt.REASON_WRONG_TYPE=2,Xt.REASON_TARGET_NULL=3,Xt.REASON_CHECKS_FAILED=4,Xt.REASON_DIFFERENT_WORKSPACES=5,Xt.REASON_SHADOW_PARENT=6,Xt.REASON_DRAG_CHECKS_FAILED=7,Xt.REASON_PREVIOUS_AND_OUTPUT=8;var Bb=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},Ub={};Ub.DuplicateIconType=Bb,(function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"})(o.Align$$module$build$src$core$inputs$align||(o.Align$$module$build$src$core$inputs$align={})),o.Align$$module$build$src$core$inputs$align;var zs=class extends ri{constructor(e,t,r){super(ri.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==ri.SKIP_SETUP&&(r?this.configure_(r):this.class=t||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&Le(this.getTextElement(),this.class),this.fieldGroup_&&Le(this.fieldGroup_,"blocklyLabelField")}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&be(this.textElement_,this.class),e&&Le(this.textElement_,e)),this.class=e}static fromJson(e){return new this(Mi(e.text),void 0,e)}};Qr("field_label",zs),zs.prototype.DEFAULT_VALUE="";var Vb=30,Ys=[];Ys[qe.INPUT_VALUE]=qe.OUTPUT_VALUE,Ys[qe.OUTPUT_VALUE]=qe.INPUT_VALUE,Ys[qe.NEXT_STATEMENT]=qe.PREVIOUS_STATEMENT,Ys[qe.PREVIOUS_STATEMENT]=qe.NEXT_STATEMENT;var xf="RENAME_VARIABLE_ID",Ff="DELETE_VARIABLE_ID",Hb=10,pn=class extends Xt{constructor(e,t){super(e,t),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[t],this.dbOpposite=e.workspace.connectionDBList[Ys[t]],this.offsetInBlock=new Fe(0,0),this.trackedState=pn.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===pn.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,t;(t=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||t.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)}bumpAwayFrom(e,t=!1){if(!this.sourceBlock_.workspace.isDragging()){var r=o.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Hb),a=o.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*Hb),u=e.sourceBlock_.getRootBlock(),S=this.sourceBlock_.getRootBlock();if(!u.isInFlyout&&!S.isInFlyout){var B=!0;if(S.isMovable())u.isMovable()&&t&&(a=-a);else if(u.isMovable())B=!1,r=-r,a=-a;else return;t=B?e:this,e=B?this:e,u=B?S:u,u.RTL&&(r=-r),u.moveBy(t.x+r-e.x,t.y+a-e.y,["bump"])}}}moveTo(e,t){let r=!1;return this.trackedState===pn.TrackedState.WILL_TRACK?(this.db.addConnection(this,t),this.trackedState=pn.TrackedState.TRACKED,r=!0):this.trackedState===pn.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,t),r=!0),this.x=e,this.y=t,r}moveBy(e,t){return this.moveTo(this.x+e,this.y+t)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,t){this.offsetInBlock.x=e,this.offsetInBlock.y=t}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const t=this.targetBlock();e&&t&&(e=Fe.difference(this.offsetInBlock,e.offsetInBlock),t.translate(e.x,e.y))}closest(e,t){return this.dbOpposite.searchForClosest(this,e,t)}highlight(){this.highlighted=!0;const e=this.findHighlightSvg();e&&(e.style.display="")}unhighlight(){this.highlighted=!1;const e=this.findHighlightSvg();e&&(e.style.display="none")}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===pn.TrackedState.TRACKED||!e&&this.trackedState===pn.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=pn.TrackedState.TRACKED):(this.trackedState===pn.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=pn.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let t=0;t<e.length;t++){const r=e[t],a=r.getConnections_(!0);for(let u=0;u<a.length;u++)a[u].setTracking(!1);for(const u of r.getIcons())ys(u)&&u.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==qe.INPUT_VALUE&&this.type!==qe.NEXT_STATEMENT)return e;const t=this.targetBlock();if(t){let r;t.isCollapsed()?(r=[],t.outputConnection&&r.push(t.outputConnection),t.nextConnection&&r.push(t.nextConnection),t.previousConnection&&r.push(t.previousConnection)):r=t.getConnections_(!0);for(let a=0;a<r.length;a++)e.push(...r[a].startTrackingAll());e.length||(e=[t])}return e}onFailedConnect(e){const t=this.getSourceBlock();if(Ce()){const r=o.getGroup$$module$build$src$core$events$utils();setTimeout((function(){t.isDisposed()||t.getParent()||(o.setGroup$$module$build$src$core$events$utils(r),this.bumpAwayFrom(e),o.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),o.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:t,childConnection:r}=this.getParentAndChildConnections();if(t&&r){var a=o.getGroup$$module$build$src$core$events$utils();a||o.setGroup$$module$build$src$core$events$utils(!0);var u=t.getSourceBlock(),S=r.getSourceBlock();super.disconnectInternal(e),u.queueRender(),S.updateDisabled(),S.queueRender(),S.getSvgRoot().style.display="block",o.setGroup$$module$build$src$core$events$utils(a)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.updateDisabled(),e.updateDisabled(),e.queueRender(),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}showContextMenu(e){const t=Bt.registry.getContextMenuOptions({focusedNode:this},e);if(t.length){var r=this.getSourceBlock(),a=r.workspace;if(e instanceof PointerEvent)var u=new Fe(e.clientX,e.clientY);else u=new Fe(this.x,this.y),u=Hi(a,u).translate(r.RTL?-5:5,5);Aa(e,t,r.RTL,a,u)}}getFocusableElement(){const e=this.findHighlightSvg();if(e)return e;throw Error("No highlight SVG found corresponding to this connection.")}getFocusableTree(){return this.getSourceBlock().workspace}onNodeFocus(){this.highlight(),this.getSourceBlock().workspace.scrollBoundsIntoView(this.getSourceBlock().getBoundingRectangleWithoutChildren())}onNodeBlur(){this.unhighlight()}canBeFocused(){return!0}findHighlightSvg(){return document.getElementById(this.id)}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(pn||(pn={})),pn.TrackedState;var Wa=class{constructor(e,t){this.name=e,this.sourceBlock=t,this.fieldRow=[],this.align=o.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this}insertFieldAt(e,t,r){if(e<0||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||t===""&&r)&&(typeof t=="string"&&(t=o.fromJson$$module$build$src$core$field_registry({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(t),t.name=r,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),e++,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,t){for(let r=0,a;a=this.fieldRow[r];r++)if(a.name===e)return a.dispose(),this.fieldRow.splice(r,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let t=[];if(this.visible===e)return t;this.visible=e;for(let r=0,a;a=this.fieldRow[r];r++)a.setVisible(e);if(this.connection&&this.connection instanceof pn){e?t=this.connection.startTrackingAll():this.connection.stopTrackingAll();const r=this.connection.targetBlock();r&&(r.getSvgRoot().style.display=e?"block":"none")}return t}markDirty(){for(let e=0,t;t=this.fieldRow[e];e++)t.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,t;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},no=class extends Wa{constructor(e,t){super(e,t),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Lo=class extends Wa{constructor(e,t){super(e,t),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},cr=class extends Wa{constructor(e,t){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,t),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(qe.NEXT_STATEMENT)}},Gb;o.ValueInput$$module$build$src$core$inputs$value_input=class extends Wa{constructor(e,t){if(!e)throw Error("Value inputs must have a non-empty name");super(e,t),this.name=e,this.type=o.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(qe.INPUT_VALUE)}},Gb={},Gb.ValueInput=o.ValueInput$$module$build$src$core$inputs$value_input;var Xa=class{constructor(e,t,r){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=r&&!e.getBlockById(r)?r:O(),e.setBlockById(this.id,this),this.xy=new Fe(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,t){if(this.type=t,r=mi[t],!r||typeof r!="object")throw TypeError("Invalid block definition for type: "+t);Object.assign(this,r)}e.addTopBlock(this),e.addTypedBlock(this),new.target===Xa&&this.doInit_()}doInit_(){const e=o.getGroup$$module$build$src$core$events$utils();e||o.setGroup$$module$build$src$core$events$utils(!0);const t=Ce();try{typeof this.init=="function"&&(o.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),o.setRecordUndo$$module$build$src$core$events$utils(t)),ue()&&Ie(new(Be(pe.BLOCK_CREATE))(this))}finally{o.setGroup$$module$build$src$core$events$utils(e),o.setRecordUndo$$module$build$src$core$events$utils(t)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),ue()&&Ie(new(Be(pe.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let t=null,r;(r=this.outputConnection)!=null&&r.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e?.disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e?.onFailedConnect(t))}getOnlyValueConnection(){let e=null;for(let t=0;t<this.inputList.length;t++){const r=this.inputList[t].connection;if(r&&r.type===qe.INPUT_VALUE&&r.targetConnection){if(e)return null;e=r}}return e}unplugFromStack(e){let t=null,r;if((r=this.previousConnection)!=null&&r.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),e){for(e=this.getNextBlock();e&&(e.isShadow()||!e.isMovable());)e=e.getNextBlock();if(e){var a,u,S,B;e=(B=(a=e.previousConnection)==null||(u=a.targetBlock())==null||(S=u.nextConnection)==null?void 0:S.targetConnection)!=null?B:null,e?.disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e)}}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let t=0,r;r=this.inputList[t];t++)r.connection&&e.push(r.connection);return e}lastConnectionInStack(e){let t=this.nextConnection;for(;t;){const r=t.targetBlock();if(!r||e&&r.isShadow())return t;t=r.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let t=0,r;r=this.inputList[t];t++)if(r.connection&&r.connection.targetBlock()===e)return r;return null}getSurroundParent(){let e=this,t;do if(t=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,t=this;do e=t,t=e.parentBlock_;while(t);return e}getTopStackBlock(){let e=this,t;do t=e.getPreviousBlock();while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let r=0,a;a=this.inputList[r];r++)if(a.connection){var t=a.connection.targetBlock();t&&e.push(t)}return(t=this.getNextBlock())&&e.push(t),e}setParent(e){if(e!==this.parentBlock_){var t=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),r=!!t;if(r&&e&&t!==e)throw Error("Block connected to superior one that is not new parent.");if(!r&&e)throw Error("Block not connected to new parent.");if(r&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?q(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const t=[this],r=this.getChildren(e);for(let a,u=0;a=r[u];u++)t.push(...a.getDescendants(e));return t}isDeletable(){return this.deletable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(h(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(const t of this.getFields())t.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||e.fieldRow.length>1)return!1;return!0}getMatchingConnection(e,t){const r=this.getConnections_(!0);if(e=e.getConnections_(!0),r.length!==e.length)throw Error("Connection lists did not match in length.");for(let a=0;a<e.length;a++)if(e[a]===t)return r[a];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return ba(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=Sa(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(const t of this.getFields())if(t.name===e)return t;return null}*getFields(){for(const e of this.inputList)for(const t of e.fieldRow)yield t}getVars(){const e=[];for(const t of this.getFields())t.referencesVariables()&&e.push(t.getValue());return e}getVarModels(){const e=[];for(const t of this.getFields())if(t.referencesVariables()){const r=this.workspace.getVariableById(t.getValue());r&&e.push(r)}return e}updateVarName(e){for(const t of this.getFields())t.referencesVariables()&&e.getId()===t.getValue()&&t.refreshVariableName()}renameVarById(e,t){for(const r of this.getFields())r.referencesVariables()&&e===r.getValue()&&r.setValue(t)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,t){const r=this.getField(t);if(!r)throw Error('Field "'+t+'" not found.');r.setValue(e)}setPreviousStatement(e,t){if(e)t===void 0&&(t=null),this.previousConnection||(this.previousConnection=this.makeConnection_(qe.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,t){if(e)t===void 0&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(qe.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,t){if(e)t===void 0&&(t=null),this.outputConnection||(this.outputConnection=this.makeConnection_(qe.OUTPUT_VALUE)),this.outputConnection.setCheck(t);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(Ie(new(Be(pe.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof no&&this.inputList[e]instanceof no)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof o.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof no)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof Lo)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}setDisabledReason(e,t){e||this.workspace.options.disable||!this.hasDisabledReason(Sr)||t==Sr||this.setDisabledReason(!1,Sr),this.disabledReasons.has(t)!==e&&(e?this.disabledReasons.add(t):this.disabledReasons.delete(t),e=new(Be(pe.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(t),Ie(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(Ie(new(Be(pe.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,t){t=this.toTokens(t);for(let a=2;a<t.length;a++)t[a-2]==="("&&t[a]===")"&&(t[a-2]=t[a-1],t.splice(a-1,2));let r="";return t=t.reduce((a,u)=>(a=a+(r==="("||u===")"?"":" ")+u,r=u[u.length-1],a),""),t=t.trim()||"???",e&&t.length>e&&(t=t.substring(0,e-3)+"..."),t}toTokens(e="?"){const t=[];for(const a of this.inputList)if(a.name!=ql){for(const u of a.fieldRow)t.push(u.getText());if(a.connection){const u=a.connection.targetBlock();if(u){var r=a.connection;let S=r.getCheck();!S&&r.targetConnection&&(S=r.targetConnection.getCheck()),(r=!!S&&(S.includes("Boolean")||S.includes("Number")))&&t.push("("),t.push(...u.toTokens(e)),r&&t.push(")")}else t.push(e)}}return t}appendValueInput(e){return this.appendInput(new o.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new cr(e,this))}appendDummyInput(e=""){return this.appendInput(new no(e,this))}appendEndRowInput(e=""){return this.appendInput(new Lo(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,t){return(e=R(De.INPUT,e,!1))?this.appendInput(new e(t,this)):null}jsonInit(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");for(var r=0;e["args"+r];){if(e["message"+r]===void 0)throw Error(t+`args${r} must have a corresponding message (message${r}).`);r++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,t):this.jsonInitColour(e,t),r=0;e["message"+r]!==void 0;)this.interpolate(e["message"+r],e["args"+r]||[],e["implicitAlign"+r]||e["lastDummyAlign"+r],t),r++;if(e.inputsInline!==void 0&&(o.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),o.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(r=Mi(e.tooltip),this.setTooltip(r)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(r=Mi(e.helpUrl),this.setHelpUrl(r)),typeof e.extensions=="string"&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&$c(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(t=0;t<e.length;t++)$c(e[t],this,!1)}jsonInitColour(e,t){if("colour"in e)if(e.colour===void 0)console.warn(t+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(t+"Illegal colour value: ",e)}}}jsonInitStyle(e,t){e=e.style;try{this.setStyle(e)}catch{console.warn(t+"Style does not exist: ",e)}}mixin(e,t){if(t!==void 0&&typeof t!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(const r in e)this[r]!==void 0&&t.push(r);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Object.assign(this,e)}interpolate(e,t,r,a){e=L_(e),this.validateTokens(e,t.length),t=this.interpolateArguments(e,t,r),r=[];for(let u=0,S;S=t[u];u++)if(this.isInputKeyword(S.type)){if(e=this.inputFromJson(S,a)){for(let B=0,Z;Z=r[B];B++)e.appendField(Z[0],Z[1]);r.length=0}}else(e=this.fieldFromJson(S))&&r.push([e,S.name])}validateTokens(e,t){const r=[];let a=0;for(let u=0;u<e.length;u++){const S=e[u];if(typeof S=="number"){if(S<1||S>t)throw Error('Block "'+this.type+'": Message index %'+S+" out of range.");if(r[S])throw Error('Block "'+this.type+'": Message index %'+S+" duplicated.");r[S]=!0,a++}}if(a!==t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")}interpolateArguments(e,t,r){const a=[];for(let S=0;S<e.length;S++){var u=e[S];if(typeof u=="number"&&(u=t[u-1]),typeof u=="string"){if(u===`
`)u={type:"input_end_row"},r&&(u.align=r);else if(u=this.stringToFieldJson(u),!u)continue}a.push(u)}return(e=a.length)&&!this.isInputKeyword(a[e-1].type)&&(e={type:"input_dummy"},r&&(e.align=r),a.push(e)),a}fieldFromJson(e){const t=o.fromJson$$module$build$src$core$field_registry(e);return!t&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):t}inputFromJson(e,t){var r={LEFT:o.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:o.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:o.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:o.Align$$module$build$src$core$inputs$align.CENTRE};let a;switch(e.type){case"input_value":a=this.appendValueInput(e.name);break;case"input_statement":a=this.appendStatementInput(e.name);break;case"input_dummy":a=this.appendDummyInput(e.name);break;case"input_end_row":a=this.appendEndRowInput(e.name);break;default:a=this.appendInputFromRegistry(e.type,e.name)}return a?(e.check&&a.setCheck(e.check),e.align&&(r=r[e.align.toUpperCase()],r===void 0?console.warn(t+"Illegal align value: ",e.align):a.setAlign(r)),a):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||$(De.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,t){if(e!==t){var r=-1,a=t?-1:this.inputList.length;for(let u=0,S;S=this.inputList[u];u++)if(S.name===e){if(r=u,a!==-1)break}else if(t&&S.name===t&&(a=u,r!==-1))break;if(r===-1)throw Error('Named input "'+e+'" not found.');if(a===-1)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(r,a)}}moveNumberedInputBefore(e,t){if(e===t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");const r=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,r)}removeInput(e,t){for(let r=0,a;a=this.inputList[r];r++)if(a.name===e)return a instanceof cr&&this.statementInputCount--,a.dispose(),this.inputList.splice(r,1),!0;if(t)return!1;throw Error("Input not found: "+e)}getInput(e){for(let t=0,r;r=this.inputList[t];t++)if(r.name===e)return r;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,t;return(t=(e=this.getIcon(qi.COMMENT))==null?void 0:e.getText())!=null?t:null}setCommentText(e){var t;let r;const a=(r=(t=this.getIcon(qi.COMMENT))==null?void 0:t.getText())!=null?r:null;if(a!==e){if(e!==null){if(t=this.getIcon(qi.COMMENT),!t){if(t=R(De.ICON,qi.COMMENT.toString(),!1),!t)throw Error("No comment icon class is registered, so a comment cannot be set");if(t=new t(this),!FE(t))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");t=this.addIcon(t)}o.disable$$module$build$src$core$events$utils(),t.setText(e),o.enable$$module$build$src$core$events$utils()}else this.removeIcon(qi.COMMENT);Ie(new(Be(pe.BLOCK_CHANGE))(this,"comment",null,a,e))}}setWarningText(e,t){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new Bb(e);return this.icons.push(e),this.icons.sort((t,r)=>t.getWeight()-r.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let t;return(t=this.getIcon(e))==null||t.dispose(),this.icons=this.icons.filter(r=>!r.getType().equals(e)),!0}hasIcon(e){return this.icons.some(t=>t.getType().equals(e))}getIcon(e){return e instanceof qi?this.icons.find(t=>t.getType().equals(e)):this.icons.find(t=>t.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,t,r){if(this.parentBlock_)throw Error("Block has parent");const a=new(Be(pe.BLOCK_MOVE))(this);r&&a.setReason(r),this.xy.translate(e,t),a.recordNew(),Ie(a)}makeConnection_(e){return new Xt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let r=0,a;a=this.inputList[r];r++)if(a.connection){var t=a.connection.targetBlock();if(!t||!t.allInputsFilled(e))return!1}return(t=this.getNextBlock())?t.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};Xa.COLLAPSED_INPUT_NAME=ql,Xa.COLLAPSED_FIELD_NAME=Kc;var fd=null,su=null,au={};au.connectionUiEffect=Q_,au.disconnectUiEffect=ep,au.disconnectUiStop=ya,au.disposeUiEffect=bc;var lu=class{paste(e,t,r){if(!t.isCapacityAvailable(e.typeCounts))return null;r&&(e.blockState.x=r.x,e.blockState.y=r.y),r=r||new Fe(e.blockState.x||0,e.blockState.y||0),o.disable$$module$build$src$core$events$utils();let a;try{a=Jo(e.blockState,t),PE(a,r)}finally{o.enable$$module$build$src$core$events$utils()}if(!a)return a;ue()&&!a.isShadow()&&Ie(new(Be(pe.BLOCK_CREATE))(a));const u=a;return qr().then(()=>o.getFocusManager$$module$build$src$core$focus_manager().focusNode(u)),a}};lu.TYPE="block",ju(lu.TYPE,new lu);var gd={};gd.bumpIntoBounds=Ra,gd.bumpIntoBoundsHandler=ip,gd.bumpTopObjectsIntoBounds=Sc;var Wb=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new Fe(0,0),this.originalEventGroup="",this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,t;return(t=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?t:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(y(De.CONNECTION_PREVIEWER,this.workspace.options))(this.block),Ht(),this.workspace.setResizesEnabled(!1),ya(),e=this.shouldHealStack(e),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var t;(t=this.workspace.getLayerManager())==null||t.moveToDragLayer(this.block)}}shouldHealStack(e){return!!e&&(e.altKey||e.ctrlKey||e.metaKey)}startDraggingShadow(e){const t=this.block.getParent();if(!t)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=Fe.difference(t.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),t.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let t,r,a;if(this.startParentConn=(a=(t=this.block.outputConnection)==null?void 0:t.targetConnection)!=null?a:(r=this.block.previousConnection)==null?void 0:r.targetConnection,e){let u;this.startChildConn=(u=this.block.nextConnection)==null?void 0:u.targetConnection}this.block.unplug(e),ep(this.block)}fireDragStartEvent(){const e=new(Be(pe.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));Ie(e)}fireDragEndEvent(){const e=new(Be(pe.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));Ie(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(Be(pe.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),Ie(e)}}drag(e){if(this.block.isShadow()){let t;(t=this.block.getParent())==null||t.drag(Fe.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,Fe.difference(e,this.startLoc))}updateConnectionPreview(e,t){var r=this.connectionCandidate;const a=this.getConnectionCandidate(e,t);if(a){this.connectionCandidate=t=r&&this.currCandidateIsBetter(r,t,a)?r:a;var{local:u,neighbour:S}=t;t=u.type===qe.OUTPUT_VALUE||u.type===qe.PREVIOUS_STATEMENT;var B;if(r=S.isConnected()&&!((B=S.targetBlock())!=null&&B.isInsertionMarker()),t&&r&&!this.orphanCanConnectAtEnd(e,S.targetBlock(),u.type)){let ye;(ye=this.connectionPreviewer)==null||ye.previewReplacement(u,S,S.targetBlock())}else{var Z;(Z=this.connectionPreviewer)==null||Z.previewConnection(u,S)}}else{let ye;(ye=this.connectionPreviewer)==null||ye.hidePreview(),this.connectionCandidate=null}}orphanCanConnectAtEnd(e,t,r){return!!Xt.getConnectionForOrphanedConnection(e,r===qe.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}currCandidateIsBetter(e,t,r){const{local:a,neighbour:u}=e;e=new Fe(a.x,a.y);const S=new Fe(u.x,u.y);return t=Fe.distance(Fe.sum(e,t),S),r.distance>t-o.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,t){e=this.getLocalConnections(e);let r=this.getSearchRadius(),a=null;for(const u of e){const{connection:S,radius:B}=u.closest(r,t);S&&(a={local:u,neighbour:S,distance:B},r=B)}return a}getSearchRadius(){return this.connectionCandidate?o.config$$module$build$src$core$config.connectingSnapRadius:o.config$$module$build$src$core$config.snapRadius}getLocalConnections(e){const t=e.getConnections_(!1),r=e.lastConnectionInStack(!0);return r&&r!==e.nextConnection&&t.push(r),t}endDrag(e){if(this.block.isShadow()){let r;(r=this.block.getParent())==null||r.endDrag(e)}else{this.originalEventGroup=o.getGroup$$module$build$src$core$events$utils(),this.fireDragEndEvent(),this.fireMoveEvent(),pt(),ya();var t;if((t=this.connectionPreviewer)==null||t.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let r;(r=this.workspace.getLayerManager())==null||r.moveOffDragLayer(this.block,ss),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep())}}disposeStep(){const e=o.getGroup$$module$build$src$core$events$utils();o.setGroup$$module$build$src$core$events$utils(this.originalEventGroup),this.block.snapToGrid();let t;(t=this.connectionPreviewer)==null||t.dispose(),this.workspace.setResizesEnabled(!0),o.setGroup$$module$build$src$core$events$utils(e)}applyConnections(e){const{local:t,neighbour:r}=e;t.connect(r);const a=t.isSuperior()?r:t,u=this.block.getRootBlock();qr().then(()=>{Q_(a.getSourceBlock()),setTimeout(()=>{u.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let r;(r=this.block.getParent())==null||r.revertDrag()}else{var e;(e=this.connectionPreviewer)==null||e.hidePreview(),this.connectionCandidate=null;var t;if((t=this.startChildConn)==null||t.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case qe.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case qe.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let r;(r=this.workspace.getLayerManager())==null||r.moveOffDragLayer(this.block,ss),Ra(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.block.setDragging(!1),this.dragging=!1}}},Xb=class extends Qt{constructor(e,t,r,a){super(t,r,a),this.text=e,this.workspace=t,this.anchor=r,this.ownerRect=a,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize(),Le(this.svgRoot,"blocklyTextBubble")}getText(){return this.text}setText(e){this.text=e,Ke(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,t){return t=this.createParagraph(t),e=this.createTextFragments(t,e),this.workspace.RTL&&this.rightAlignTextFragments(t.getBBox().width,e),t}createParagraph(e){return de(he.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${Qt.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},e)}createTextFragments(e,t){let r=1;return t.split(`
`).map(a=>{const u=de(he.TEXT,{y:`${r}em`,x:Qt.BORDER_WIDTH},e);return a=document.createTextNode(a),u.appendChild(a),r+=1,u})}rightAlignTextFragments(e,t){for(const r of t)r.setAttribute("text-anchor","start"),r.setAttribute("x",`${e+Qt.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new kt(e.width+Qt.BORDER_WIDTH*2,e.height+Qt.BORDER_WIDTH*2),!0)}},Pf=17,ro=class extends ou{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return ro.TYPE}initView(e){this.svgRoot||(super.initView(e),de(he.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),de(he.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),de(he.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),Le(this.svgRoot,"blocklyWarningIcon"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return ro.WEIGHT}getSize(){return new kt(Pf,Pf)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let t;(t=this.textBubble)==null||t.setAnchorLocation(this.getAnchorLocation())}addMessage(e,t){if(this.textMap.get(t)===e)return this;e?this.textMap.set(t,e):this.textMap.delete(t);let r;return(r=this.textBubble)==null||r.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const t=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){if(t.bubbleIsVisible()!==e){if(yield qr(),e)t.textBubble=new Xb(t.getText(),t.sourceBlock.workspace,t.getAnchorLocation(),t.getBubbleOwnerRect()),t.applyColour();else{let r;(r=t.textBubble)==null||r.dispose(),t.textBubble=null}Ie(new(Be(pe.BUBBLE_OPEN))(t.sourceBlock,e,"warning"))}})}getBubble(){return this.textBubble}getAnchorLocation(){const e=Pf/2;return Fe.sum(this.workspaceLocation,new Fe(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new Dt(e.y,e.y+e.height,e.x,e.x+e.width)}};ro.TYPE=qi.WARNING,ro.WEIGHT=2;var ui=class extends Xa{constructor(e,t,r){if(super(e,t,r),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new Fe(0,0),this.dragStrategy=new Wb(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=de(he.G,{}),t&&Le(this.svgGroup,t),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,kl(e),this.svgGroup.setAttribute("data-id",this.id),e.id=U(),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),(e=this.getSvgRoot())&&C(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){this.addSelect(),Ne(this)}unselect(){this.removeSelect(),Ne(null)}setParent(e){var t=this.parentBlock_;if(e!==t){Ht(),super.setParent(e),pt();var r=this.getSvgRoot();if(!this.workspace.isClearing&&r){var a=this.getRelativeToSurfaceXY(),u=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode(),S,B=this.getSvgRoot().contains((S=u?.getFocusableElement())!=null?S:null);e?(e.getSvgRoot().appendChild(r),B&&u&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(u)):t&&(e=this.workspace.getCanvas().querySelector(".blocklyDragging"),t=e?.parentElement,S=this.workspace.getCanvas(),t===S?S.insertBefore(r,e):(S.appendChild(r),B&&u&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(u)),this.translate(a.x,a.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let t=0,r=0,a=this.getSvgRoot();if(a)do{const u=Ye(a);t+=u.x,r+=u.y,a=a.parentNode}while(a&&!e.hasLayer(a));return new Fe(t,r)}moveBy(e,t,r){if(this.parentBlock_)throw Error("Block has parent");const a=ue();let u=null;a&&(u=new(Be(pe.BLOCK_MOVE))(this),r&&u.setReason(r)),e=new Fe(e,t),t=this.getRelativeToSurfaceXY(),e=Fe.sum(t,e),this.translate(e.x,e.y),this.updateComponentLocations(e),a&&u&&(u.recordNew(),Ie(u)),this.workspace.resizeContents()}translate(e,t){this.translation=`translate(${e}, ${t})`,this.relativeCoords=new Fe(e,t),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,t){const r=this.getRelativeToSurfaceXY();this.moveBy(e.x-r.x,e.y-r.y,t)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var t=this.getRelativeToSurfaceXY();e=e.alignXY(t),e!==t&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const t=this.getRelativeToSurfaceXY();let r,a;return this.RTL?(r=t.x-e.width,a=t.x):(r=t.x,a=t.x+e.width),new Dt(t.y,t.y+e.height,r,a)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,t;t=this.inputList[e];e++)t.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}childHasWarning(){const e=this.getChildren(!1);for(const t of e)if(t.getIcon(ro.TYPE)||t.childHasWarning())return!0;return!1}updateCollapsed(){var e=this.isCollapsed();const t=ql,r=Kc;for(let u=0,S;S=this.inputList[u];u++)S.name!==t&&S.setVisible(!e);for(var a of this.getIcons())a.updateCollapsed();e?(Le(this.svgGroup,"blocklyCollapsed"),this.childHasWarning()&&this.setWarningText(o.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,ui.COLLAPSED_WARNING_ID),e=this.toString(Vb),(a=this.getField(r))?a.setValue(e):(this.getInput(t)||this.appendDummyInput(t)).appendField(new zs(e),r)):(this.updateDisabled(),this.removeInput(t),be(this.svgGroup,"blocklyCollapsed"),this.setWarningText(null,ui.COLLAPSED_WARNING_ID))}onMouseDown(e){if(!this.workspace.isReadOnly()){var t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(e){return this.workspace.isReadOnly()||!this.contextMenu?null:(e=Bt.registry.getContextMenuOptions({block:this,focusedNode:this},e),this.customContextMenu&&this.customContextMenu(e),e)}calculateContextMenuLocation(e){if(e instanceof PointerEvent)return new Fe(e.clientX,e.clientY);e=Hi(this.workspace,this.getRelativeToSurfaceXY());let t,r;const a=(t=this.inputList.filter(u=>u.isVisible()).flatMap(u=>u.fieldRow).find(u=>u.isVisible()))==null||(r=t.getSvgRoot())==null?void 0:r.getBoundingClientRect();return new Fe(this.RTL?e.x-5:e.x+5,(a&&a.height?a.y+a.height:e.y+this.height)+5)}showContextMenu(e){const t=this.generateContextMenu(e),r=this.calculateContextMenuLocation(e);t&&t.length&&(Aa(e,t,this.RTL,this.workspace,r),B_(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const t of this.getChildren(!1))t.updateComponentLocations(Fe.sum(e,t.relativeCoords))}updateConnectionLocations(e){for(const t of this.getConnections_(!1))t.moveToOffset(e)}updateIconLocations(e){for(const t of this.getIcons())t.onLocationChange(e)}updateFieldLocations(e){for(const t of this.inputList)for(const r of t.fieldRow)r.onLocationChange(e)}addClass(e){Le(this.svgGroup,e)}removeClass(e){be(this.svgGroup,e)}setDragging(e){(this.dragging=e)?(this.translation="",Kl.push(...this.getConnections_(!0)),this.addClass("blocklyDragging")):(Kl.length=0,this.removeClass("blocklyDragging"));for(let t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e?be(this.svgGroup,"blocklyNotEditable"):Le(this.svgGroup,"blocklyNotEditable"),e=this.getIcons();for(let t=0;t<e.length;t++)e[t].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,t){this.disposing=!0,C_(),Ml();const r=o.getFocusManager$$module$build$src$core$focus_manager();var a,u;if(this.getSvgRoot().contains((u=(a=r.getFocusedNode())==null?void 0:a.getFocusableElement())!=null?u:null)){if(a=this.getParent(),!a){let S;if(u=(S=this.outputConnection)!=null?S:this.previousConnection){let B;a=(B=u.closest(0,new Fe(0,0)).connection)==null?void 0:B.getSourceBlock()}}a?r.focusNode(a):setTimeout(()=>r.focusTree(this.workspace),0)}t&&(this.unplug(e),bc(this)),super.dispose(!!e),Ke(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===this&&this.workspace.cancelCurrentGesture(),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(o.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),o.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(e=!1){return this.isInsertionMarker_?null:{paster:lu.TYPE,blockState:Tr(this,{addCoordinates:!0,addNextBlocks:e,saveIds:!1}),typeCounts:h(this,!0)}}applyColour(){var e,t;for((t=(e=this.pathObject).applyColour)==null||t.call(e,this),e=this.getIcons(),t=0;t<e.length;t++)e[t].applyColour();for(const r of this.getFields())r.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let t;(t=this.getNextBlock())==null||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(e,t=""){if(t)this.warningTextDb.has(t)&&(clearTimeout(this.warningTextDb.get(t)),this.warningTextDb.delete(t));else{for(var r of this.warningTextDb.values())clearTimeout(r);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(t,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(t),this.setWarningText(e,t))},100));else if(this.isInFlyout&&(e=null),r=this.getIcon(ro.TYPE),e){let a=this.getSurroundParent(),u=null;for(;a;)a.isCollapsed()&&(u=a),a=a.getSurroundParent();u&&u.setWarningText(o.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,ui.COLLAPSED_WARNING_ID),r?r.addMessage(e,t):this.addIcon(new ro(this).addMessage(e,t))}else r&&(t?(r.addMessage("",t),r.getText()||this.removeIcon(ro.TYPE)):this.removeIcon(ro.TYPE))}setMutator(e){this.removeIcon(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof o.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return t=>{this.isDeadOrDying()||(t=this.workspace.getGesture(t))&&t.setStartIcon(e)}}removeIcon(e){const t=super.removeIcon(e);return e.equals(o.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),t}setDisabledReason(e,t){const r=this.isEnabled();super.setDisabledReason(e,t),this.isEnabled()===r||this.getInheritedDisabled()||this.updateDisabled()}setDeletable(e){super.setDeletable(e),e?be(this.svgGroup,"blocklyNotDeletable"):Le(this.svgGroup,"blocklyNotDeletable")}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_);let t,r;(r=(t=this.pathObject).setStyle)==null||r.call(t,e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_&&be(this.svgGroup,this.styleName_),t){this.hat=t.hat;let r,a;(a=(r=this.pathObject).setStyle)==null||a.call(r,t),this.colour_=t.colourPrimary,this.style=t,this.applyColour(),Le(this.svgGroup,e),this.styleName_=e}else throw Error("Invalid style name: "+e)}getStyle(){return this.style}bringToFront(e=!1){const t=o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();let r=this;if(!r.isDeadOrDying()){do{const a=r.getSvgRoot(),u=a.parentNode,S=u.childNodes;if(S[S.length-1]!==a&&u.appendChild(a),e)break;r=r.getParent()}while(r);t&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(t)}}setPreviousStatement(e,t){super.setPreviousStatement(e,t),this.queueRender()}setNextStatement(e,t){super.setNextStatement(e,t),this.queueRender()}setOutput(e,t){super.setOutput(e,t),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,t){return e=super.removeInput(e,t),this.queueRender(),e}moveNumberedInputBefore(e,t){super.moveNumberedInputBefore(e,t),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var r=this.inputList[t].connection;r&&(r.setTracking(e),(r=r.targetBlock())&&r.setConnectionTracking(e))}}getConnections_(e){const t=[];if(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)for(let r=0,a;a=this.inputList[r];r++)a.connection&&t.push(a.connection);return t}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,t){return super.getMatchingConnection(e,t)}makeConnection_(e){return new pn(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const t of this.getConnections_(!1)){if(t.isSuperior()){let r;(r=t.targetBlock())==null||r.bumpNeighbours()}for(const r of t.neighbours(o.config$$module$build$src$core$config.snapRadius))r.getSourceBlock().getRootBlock()!==e&&(t.isConnected()&&r.isConnected()||(t.isSuperior()?r.bumpAwayFrom(t,!1):t.bumpAwayFrom(r,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,t,r){if(e.type===qe.NEXT_STATEMENT||e.type===qe.INPUT_VALUE){let a=t.x;t=t.y,a+=r.x-e.getOffsetInBlock().x,t+=r.y-e.getOffsetInBlock().y,this.moveBy(a,t)}}getChildren(e){return super.getChildren(e)}queueRender(){return Yh(this)}render(){this.queueRender(),qo()}renderEfficiently(){Ht(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),pt()}tightenChildrenEfficiently(){for(const e of this.inputList){const t=e.connection;t&&t.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}getHeightWidth(){let e=this.height,t=this.width;var r=this.getNextBlock();if(r){r=r.getHeightWidth();const a=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=r.height-a,t=Math.max(t,r.width)}return{height:e,width:t}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,t){this.pathObject.updateShapeForInputHighlight(e,t)}getDragStrategy(){return this.dragStrategy}setDragStrategy(e){this.dragStrategy=e}isCopyable(){return this.isOwnDeletable()&&this.isOwnMovable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,t){this.dragStrategy.drag(e,t)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},Tr(this)),t=new Set(["id","height","width","pinned","enabled"]),r=function(a){for(const u in a)t.has(u)?delete a[u]:typeof a[u]=="object"&&r(a[u])};return r(e),[e]}jsonInit(e){super.jsonInit(e),e.classes&&this.addClass(Array.isArray(e.classes)?e.classes.join(" "):e.classes)}getFocusableElement(){return this.pathObject.svgPath}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.workspace.scrollBoundsIntoView(this.getBoundingRectangleWithoutChildren())}onNodeBlur(){this.unselect()}canBeFocused(){return!0}};ui.INLINE=-1,ui.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Kb=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},md=class extends Kb{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof ui?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(br(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},Ka=class{constructor(e,t){this.element=e,this.type=t}getElement(){return this.element}getType(){return this.type}},Bf=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let t=0,r=0;return e&&(t=e.getWidth(),r=e.getHeight()),new kt(t,r)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,t=0;const r=this.getToolboxMetrics(),a=this.getFlyoutMetrics(),u=!!this.workspace_.getToolbox();var S;const B=!((S=this.workspace_.getFlyout())!=null&&S.autoClose);S=u?r.position:a.position;const Z=S===Lt.TOP;return S===Lt.LEFT&&(u&&(e+=r.width),B&&(e+=a.width)),Z&&(u&&(t+=r.height),B&&(t+=a.height)),{top:t,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const t=this.getSvgMetrics(),r=this.getToolboxMetrics(),a=this.getFlyoutMetrics(),u=!!this.workspace_.getToolbox();var S;const B=!((S=this.workspace_.getFlyout())!=null&&S.autoClose);S=u?r.position:a.position;const Z=S===Lt.LEFT||S===Lt.RIGHT;return(S===Lt.TOP||S===Lt.BOTTOM)&&(u&&(t.height-=r.height),B&&(t.height-=a.height)),Z&&(u&&(t.width-=r.width),B&&(t.width-=a.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const t=this.workspace_.isMovableHorizontally(),r=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const a={};return r||(a.top=e.top,a.bottom=e.top+e.height),t||(a.left=e.left,a.right=e.left+e.width),a}getPaddedContent_(e,t){const r=t.top+t.height,a=t.left+t.width,u=e.width;e=e.height;const S=u/2,B=e/2;return{top:Math.min(t.top-B,r-e),bottom:Math.max(r+B,t.top+e),left:Math.min(t.left-S,a-u),right:Math.max(a+S,t.left+u)}}getScrollMetrics(e,t,r){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var a=r||this.getContentMetrics();r=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,a),a=r.top!==void 0?r.top:t.top;const u=r.left!==void 0?r.left:t.left;return{top:a/e,left:u/e,width:((r.right!==void 0?r.right:t.right)-u)/e,height:((r.bottom!==void 0?r.bottom:t.bottom)-a)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),r=this.getSvgMetrics(),a=this.getAbsoluteMetrics(),u=this.getViewMetrics(),S=this.getContentMetrics(),B=this.getScrollMetrics(!1,u,S);return{contentHeight:S.height,contentWidth:S.width,contentTop:S.top,contentLeft:S.left,scrollHeight:B.height,scrollWidth:B.width,scrollTop:B.top,scrollLeft:B.left,viewHeight:u.height,viewWidth:u.width,viewTop:u.top,viewLeft:u.left,absoluteTop:a.top,absoluteLeft:a.left,svgHeight:r.height,svgWidth:r.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}}};s(De.METRICS_MANAGER,rr,Bf);var zb=class extends Bf{constructor(e,t){super(e),this.flyout_=t}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const t=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}}getScrollMetrics(e,t,r){return t=r||this.getContentMetrics(),r=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*r)/e,width:(t.width+t.left+r)/e,top:0,left:0}}},Mn=class{constructor(e,t,r,a){this.workspace=e,this.targetWorkspace=t,this.isFlyoutLabel=a,this.height=this.width=0,this.cursorSvg=this.svgText=null,this.text=r.text,this.position=new Fe(0,0),this.callbackKey=r.callbackKey||r.callbackkey,this.cssClass=r["web-class"]||null,this.info=r,e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton",this.cssClass&&(e+=" "+this.cssClass),this.id=U(),this.svgGroup=de(he.G,{id:this.id,class:e},this.workspace.getCanvas());let u;this.isFlyoutLabel||(u=de(he.RECT,{class:"blocklyFlyoutButtonShadow",rx:Mn.BORDER_RADIUS,ry:Mn.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=de(he.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Mn.BORDER_RADIUS,ry:Mn.BORDER_RADIUS},this.svgGroup),t=de(he.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup),r=Mi(this.text),this.workspace.RTL&&(r+="‏"),t.textContent=r,this.isFlyoutLabel&&(this.svgText=t,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill")),a=wi(t,"fontSize");const S=wi(t,"fontWeight"),B=wi(t,"fontFamily");if(this.width=dt(t,a,S,B),r=T(r,a,S,B),this.height=this.height||r.height,!this.isFlyoutLabel){this.width+=2*Mn.TEXT_MARGIN_X,this.height+=2*Mn.TEXT_MARGIN_Y;let Z;(Z=u)==null||Z.setAttribute("width",String(this.width));let ye;(ye=u)==null||ye.setAttribute("height",String(this.height))}e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),t.setAttribute("x",String(this.width/2)),t.setAttribute("y",String(this.height/2-r.height/2+r.baseline)),this.updateTransform(),this.onMouseDownWrapper=C(this.svgGroup,"pointerdown",this,this.onMouseDown),this.onMouseUpWrapper=C(this.svgGroup,"pointerup",this,this.onMouseUp)}createDom(){return this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,t){this.position.x=e,this.position.y=t,this.updateTransform()}moveBy(e,t,r){this.moveTo(this.position.x+e,this.position.y+t)}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getBoundingRectangle(){return new Dt(this.position.y,this.position.y+this.height,this.position.x,this.position.x+this.width)}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){k(this.onMouseDownWrapper),k(this.onMouseUpWrapper),this.svgGroup&&Ke(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}onMouseDown(e){const t=this.targetWorkspace.getGesture(e),r=this.targetWorkspace.getFlyout();t&&r&&t.handleFlyoutStart(e,r)}getSvgRoot(){return this.svgGroup}getFocusableElement(){return this.svgGroup}getFocusableTree(){return this.workspace}onNodeFocus(){var e=this.getPosition();e=new Dt(e.y,e.y+this.height,e.x,e.x+this.width),this.workspace.scrollBoundsIntoView(e)}onNodeBlur(){}canBeFocused(){return!0}};Mn.TEXT_MARGIN_X=5,Mn.TEXT_MARGIN_Y=2,Mn.BORDER_RADIUS=4,ee(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var Yb=class{getFirstChild(e){return null}getParent(e){return e.getWorkspace()}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof Mn}},jb=class{constructor(e,t){this.policy=e,this.flyout=t}getFirstChild(e){return null}getParent(e){return this.policy.getParent(e)}getNextSibling(e){const t=this.flyout.getContents();if(!t)return null;let r=t.findIndex(a=>a.getElement()===e);return r===-1?null:(r++,r>=t.length&&(r=0),t[r].getElement())}getPreviousSibling(e){const t=this.flyout.getContents();if(!t)return null;let r=t.findIndex(a=>a.getElement()===e);return r===-1?null:(r--,r<0&&(r=t.length-1),t[r].getElement())}isNavigable(e){return this.policy.isNavigable(e)}isApplicable(e){return this.policy.isApplicable(e)}},$d=class{constructor(e,t){this.gap=e,this.axis=t,this.y=this.x=0}getBoundingRectangle(){switch(this.axis){case"x":return new Dt(this.y,this.y,this.x,this.x+this.gap);case"y":return new Dt(this.y,this.y+this.gap,this.x,this.x)}}moveBy(e,t,r){this.x+=e,this.y+=t}isNavigable(){return!1}getFocusableElement(){throw Error("Cannot be focused")}getFocusableTree(){throw Error("Cannot be focused")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}},qb=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return!1}isApplicable(e){return e instanceof $d}},TO=class{getFirstChild(e){return e.getEditor()}getParent(e){let t;return(t=e.getOwner())!=null?t:null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof pd}},Jb=class{getFirstChild(e){return np(e,!0)[0]}getParent(e){var t;if((t=e.previousConnection)!=null&&t.targetBlock()){if(t=e.getSurroundParent())return t}else{let r;if((r=e.outputConnection)!=null&&r.targetBlock())return e.outputConnection.targetBlock()}return e.workspace}getNextSibling(e){let t;if((t=e.nextConnection)!=null&&t.targetBlock()){let a;return(a=e.nextConnection)==null?void 0:a.targetBlock()}let r;return(r=e.outputConnection)!=null&&r.targetBlock()?kr(e,1):e.getSurroundParent()?kr(e.getTopStackBlock(),1):this.getParent(e)instanceof Cn?Na(e,1):null}getPreviousSibling(e){let t;if((t=e.previousConnection)!=null&&t.targetBlock()){let a;return(a=e.previousConnection)==null?void 0:a.targetBlock()}let r;return(r=e.outputConnection)!=null&&r.targetBlock()?kr(e,-1):this.getParent(e)instanceof Cn?Na(e,-1):null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof ui}},bO=class{getFirstChild(e){return null}getParent(e){return e.getCommentView().workspace.getCommentById(e.getCommentView().commentId)}getNextSibling(e){const t=e.getCommentView().getCommentBarButtons();return e=t.indexOf(e),e>=0&&e+1<t.length?t[e+1]:null}getPreviousSibling(e){const t=e.getCommentView().getCommentBarButtons();return e=t.indexOf(e),e>0?t[e-1]:null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof ad}},SO=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof ld}},Zb=class{getFirstChild(e){return e.getParentInput()?e.targetConnection:null}getParent(e){return e.getSourceBlock()}getNextSibling(e){if(e.getParentInput())return kr(e,1);if(e.type===qe.NEXT_STATEMENT){const r=e.targetConnection;var t=e.getSourceBlock();if(!r&&t.getRootBlock().lastConnectionInStack(!1)===e){e=t.workspace.getTopBlocks(!0),t=e.indexOf(t.getRootBlock())+1,t>=e.length&&(t=0),t=e[t];let a;return(a=this.getParentConnection(t))!=null?a:t}return r}return e.getSourceBlock()}getPreviousSibling(e){if(e.getParentInput())return kr(e,-1);if(e.type===qe.PREVIOUS_STATEMENT||e.type===qe.OUTPUT_VALUE){const r=e.targetConnection&&!e.targetConnection.getParentInput()?e.targetConnection:null;var t=e.getSourceBlock();if(!r&&this.getParentConnection(t.getRootBlock())===e){e=t.workspace.getTopBlocks(!0),t=e.indexOf(t.getRootBlock())-1,t<0&&(t=e.length-1),t=e[t];let a;return(a=t.lastConnectionInStack(!1))!=null?a:t}return r}return e.type===qe.NEXT_STATEMENT?e.getSourceBlock():null}getParentConnection(e){let t;return!e.outputConnection||(t=e.previousConnection)!=null&&t.isConnected()?e.previousConnection:e.outputConnection}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof pn}},Qb=class{getFirstChild(e){return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return kr(e,1)}getPreviousSibling(e){return kr(e,-1)}isNavigable(e){let t;return e.canBeFocused()&&e.isVisible()&&(e.isClickable()||e.isCurrentlyEditable())&&!((t=e.getSourceBlock())!=null&&t.isSimpleReporter()&&e.isFullBlockField())&&e.getParentInput().isVisible()}isApplicable(e){return e instanceof ri}},Uf={};Uf.register=rp,Uf.unregister=HE;var Vf=17,eS=160,tS=80,xr=class extends ou{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new kt(eS,tS),this.bubbleVisiblity=!1}getType(){return xr.TYPE}initView(e){this.svgRoot||(super.initView(e),de(he.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),de(he.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),de(he.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),Le(this.svgRoot,"blocklyCommentIcon"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return xr.WEIGHT}getSize(){return new kt(Vf,Vf)}applyColour(){super.applyColour();const e=this.sourceBlock.getColour();let t;(t=this.textInputBubble)==null||t.setColour(e)}updateEditable(){const e=this,t=()=>super.updateEditable;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){t().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){const t=this.workspaceLocation;super.onLocationChange(e),this.bubbleLocation&&(e=Fe.difference(this.workspaceLocation,t),this.bubbleLocation=Fe.sum(this.bubbleLocation,e)),e=this.getAnchorLocation();let r;(r=this.textInputBubble)==null||r.setAnchorLocation(e)}setText(e){const t=this.text;Ie(new(Be(pe.BLOCK_CHANGE))(this.sourceBlock,"comment",null,t,e)),this.text=e;let r;(r=this.textInputBubble)==null||r.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let t;(t=this.textInputBubble)==null||t.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}setBubbleLocation(e){this.bubbleLocation=e;let t;(t=this.textInputBubble)==null||t.moveDuringDrag(e)}getBubbleLocation(){return this.bubbleLocation}saveState(){if(this.text){const e={text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width},t=this.getBubbleLocation();return t&&(e.x=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(t.x+this.bubbleSize.width):t.x,e.y=t.y),e}return null}loadState(e){let t;this.text=(t=e.text)!=null?t:"";let r,a;this.bubbleSize=new kt((r=e.width)!=null?r:eS,(a=e.height)!=null?a:tS);let u;this.bubbleVisiblity=(u=e.pinned)!=null?u:!1,this.setBubbleVisible(this.bubbleVisiblity);let S=e.x;const B=e.y;qr().then(()=>{S&&B&&(S=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(S+this.bubbleSize.width):S,this.setBubbleLocation(new Fe(S,B)))})}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(Ie(new(Be(pe.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}onBubbleLocationChange(){this.textInputBubble&&(this.bubbleLocation=this.textInputBubble.getRelativeToSurfaceXY())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const t=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){t.bubbleVisiblity!==e&&(t.bubbleVisiblity=e,yield qr(),!t.sourceBlock.rendered||t.sourceBlock.isInFlyout||t.sourceBlock.isInsertionMarker()||(e?(t.sourceBlock.isEditable()?t.showEditableBubble():t.showNonEditableBubble(),t.applyColour()):t.hideBubble(),Ie(new(Be(pe.BUBBLE_OPEN))(t.sourceBlock,e,"comment"))))})}getBubble(){return this.textInputBubble}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let t;(t=this.textInputBubble)==null||t.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new pd(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect(),this),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.bubbleLocation&&this.textInputBubble.moveDuringDrag(this.bubbleLocation),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange()),this.textInputBubble.addLocationChangeListener(()=>this.onBubbleLocationChange())}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=Vf/2;return Fe.sum(this.workspaceLocation,new Fe(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};xr.TYPE=qi.COMMENT,xr.WEIGHT=3,rp(xr.TYPE,xr);var IO=class{getFirstChild(e){if(e instanceof o.MutatorIcon$$module$build$src$core$icons$mutator_icon&&e.bubbleIsVisible()&&o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let t,r;return(r=(t=e.getBubble())==null?void 0:t.getWorkspace())!=null?r:null}if(e instanceof xr&&e.bubbleIsVisible()&&o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let t,r;return(r=(t=e.getBubble())==null?void 0:t.getEditor())!=null?r:null}return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return kr(e,1)}getPreviousSibling(e){return kr(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof ou}},vO=class{getFirstChild(e){return e.view.getCommentBarButtons()[0]}getParent(e){return e.workspace}getNextSibling(e){return Na(e,1)}getPreviousSibling(e){return Na(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof No}},iS=class{getFirstChild(e){return e=e.getTopBlocks(!0),e.length?e[0]:null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()&&!e.isMutator}isApplicable(e){return e instanceof Cn}},Hf=class{constructor(){this.rules=[new Jb,new Qb,new Zb,new iS,new IO,new vO,new bO,new TO,new SO]}addNavigationPolicy(e){this.rules.push(e)}get(e){return this.rules.find(t=>t.isApplicable(e))}getFirstChild(e){let t;const r=(t=this.get(e))==null?void 0:t.getFirstChild(e);if(!r)return null;let a;return(a=this.get(r))!=null&&a.isNavigable(r)?r:this.getFirstChild(r)||this.getNextSibling(r)}getParent(e){let t;const r=(t=this.get(e))==null?void 0:t.getParent(e);if(!r)return null;let a;return(a=this.get(r))!=null&&a.isNavigable(r)?r:this.getParent(r)}getNextSibling(e){let t;const r=(t=this.get(e))==null?void 0:t.getNextSibling(e);if(!r)return null;let a;return(a=this.get(r))!=null&&a.isNavigable(r)?r:this.getNextSibling(r)}getPreviousSibling(e){let t;const r=(t=this.get(e))==null?void 0:t.getPreviousSibling(e);if(!r)return null;let a;return(a=this.get(r))!=null&&a.isNavigable(r)?r:this.getPreviousSibling(r)}},nS=class extends Hf{constructor(e){super(),this.rules.push(new Yb,new qb),this.rules=this.rules.map(t=>new jb(t,e))}},Gf=class{constructor(e,t,r,a,u){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,t=t===void 0?!0:t,r=r===void 0?!0:r;const S=t&&r;t&&(this.hScroll=new Fi(e,!0,S,a,u)),r&&(this.vScroll=new Fi(e,!1,S,a,u)),S&&(this.corner_=de(he.RECT,{height:Fi.scrollbarThickness,width:Fi.scrollbarThickness,class:"blocklyScrollbarBackground"}),at(this.corner_,e.getBubbleCanvas()))}dispose(){Ke(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var t=!1,r=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(t=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(r=!0)):r=t=!0,t||r){try{o.disable$$module$build$src$core$events$utils(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&r&&this.vScroll.resize(e)}finally{o.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let a;(a=this.corner_)==null||a.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let a;(a=this.corner_)==null||a.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)}set(e,t,r){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(r||r===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},za="sep",rS=class{load(e,t){return e=new $d(0,t.horizontalLayout?"x":"y"),new Ka(e,za)}gapForItem(e,t){let r;return(r=parseInt(String(e.gap)))!=null?r:t}disposeItem(e){}getType(){return za}};s(De.FLYOUT_INFLATER,za,rS);var Ed=class extends md{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.reflowWrapper=null,this.contents=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,this.inflaters=new Map,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Cn(e),this.workspace_.setMetricsManager(new zb(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.workspace_.setNavigator(new nS(this)),this.id=O(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=this.MARGIN*3,this.GAP_Y=this.MARGIN*3}createDom(e){return this.svgGroup_=de(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=de(he.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Gf(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(C(this.svgGroup_,"wheel",this,this.wheel_)),this.boundEvents.push(C(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:$i.ComponentWeight.FLYOUT_WEIGHT,capabilities:[$i.Capability.AUTOHIDEABLE,$i.Capability.DELETE_AREA,$i.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)k(e);this.boundEvents.length=0,this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&Ke(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const t=e!==this.isVisible();this.visible=e,t&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const t=e!==this.containerVisible;this.containerVisible=e,t&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let t;(t=this.workspace_.scrollbar)==null||t.setContainerVisible(e)}positionAt_(e,t,r,a){let u;(u=this.svgGroup_)==null||u.setAttribute("width",`${e}`);let S;(S=this.svgGroup_)==null||S.setAttribute("height",`${t}`),this.workspace_.setCachedParentSvgSize(e,t),this.svgGroup_&&ct(this.svgGroup_,"translate("+r+"px,"+a+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(r,a),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){this.isVisible()&&(this.setVisible(!1),this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null))}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=vl(e),e=this.createFlyoutInfo(e),qo(this.workspace_),this.setContents(e),this.layout_(e),this.horizontalLayout?this.height_=0:this.width_=0,this.reflow(),this.workspace_.setResizesEnabled(!0),this.reflowWrapper=t=>{t.type!==pe.BLOCK_CHANGE&&t.type!==pe.BLOCK_FIELD_INTERMEDIATE_CHANGE||this.reflow()},this.workspace_.addChangeListener(this.reflowWrapper)}createFlyoutInfo(e){const t=[],r=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const a of e)"custom"in a&&(e=this.getDynamicCategoryContents(a.custom),e=vl(e),t.push(...this.createFlyoutInfo(e))),e=a.kind.toLowerCase(),(e=this.getInflaterForType(e))&&(t.push(e.load(a,this)),(e=e.gapForItem(a,r))&&t.push(new Ka(new $d(e,this.horizontalLayout?"x":"y"),za)));return this.normalizeSeparators(t)}normalizeSeparators(e){for(let t=e.length-1;t>0;t--){const r=e[t].getType().toLowerCase(),a=e[t-1].getType().toLowerCase();r===za&&a===za&&e.splice(t-1,1)}return e}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}clearOldBlocks(){this.getContents().forEach(t=>{let r;(r=this.getInflaterForType(t.getType()))==null||r.disposeItem(t)});let e;(e=this.workspace_.getPotentialVariableMap())==null||e.clear()}onMouseDown(e){const t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()&&!this.getTargetWorkspace().isReadOnly()}createBlock(e){let t=null;o.disable$$module$build$src$core$events$utils();var r=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock(e)}finally{o.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=Rl(this.targetWorkspace,r),ue()){for(o.setGroup$$module$build$src$core$events$utils(!0),r=0;r<e.length;r++){const a=e[r];Ie(new(Be(pe.VAR_CREATE))(a))}Ie(new(Be(pe.BLOCK_CREATE))(t))}return this.autoClose&&this.hide(),t}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const r=this.serializeBlock(e);return t.setResizesEnabled(!1),t=Jo(r,t),this.positionNewBlock(e,t),t}serializeBlock(e){return Tr(e)}positionNewBlock(e,t){const r=this.targetWorkspace;var a=r.getOriginOffsetInPixels(),u=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),u=Fe.sum(u,e),a=Fe.difference(u,a),a.scale(1/r.scale),t.moveTo(new Fe(a.x,a.y))}getInflaterForType(e){if(this.inflaters.has(e)){var t;return(t=this.inflaters.get(e))!=null?t:null}return(t=R(De.FLYOUT_INFLATER,e))?(t=new t,this.inflaters.set(e,t),t):null}getFocusableElement(){throw Error("Flyouts are not directly focusable.")}getFocusableTree(){throw Error("Flyouts are not directly focusable.")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}getRootFocusableNode(){throw Error("Flyouts are not directly focusable.")}getRestoredFocusableNode(e){throw Error("Flyouts are not directly focusable.")}getNestedTrees(){throw Error("Flyouts are not directly focusable.")}lookUpFocusableNode(e){throw Error("Flyouts are not directly focusable.")}onTreeFocus(e,t){}onTreeBlur(e){throw Error("Flyouts are not directly focusable.")}},oS=class{constructor(){this.isActive=!1,this.activeClassName="blocklyKeyboardNavigation"}setIsActive(e=!0){this.isActive=e,this.updateActiveVisualization()}getIsActive(){return this.isActive}updateActiveVisualization(){this.isActive?document.body.classList.add(this.activeClassName):document.body.classList.remove(this.activeClassName)}},Td=new oS,sS=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new Fe(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){}endDrag(e){this.drag(e)}drag(e){if(e=Fe.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},AO=5,OO=6,bd=class{constructor(e,t){this.creatorWorkspace=t,this.mouseDownXY=new Fe(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new Fe(0,0)}dispose(){F(),R_(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)k(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const t=new Fe(e.clientX,e.clientY);this.updateDragDelta(t)&&(this.updateIsDragging(e),P()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=Fe.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Fe.magnitude(this.currentDragDeltaXY)>(this.flyout?o.config$$module$build$src$core$config.flyoutDragRadius:o.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),o.getGroup$$module$build$src$core$events$utils()||o.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new sS(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const t=J();t&&Da(t)&&t.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(t,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,t){return new(y(De.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,t)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,H(e)?this.cancel():(this.gestureHasStarted=!0,ya(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=l_(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,y_(),f(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&N(e,this),this.mouseDownXY=new Fe(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(C(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(C(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(C(document,"pointerup",null,this.handleUp.bind(this),!0)),this.boundEvents.push(C(document,"pointercancel",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&P())}handleMove(e){this.isDragging()&&K(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),P())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!K(e))return;if(this.updateFromEvent(e),P(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?(Td.setIsActive(!1),this.dragger.onDragEnd(e,this.currentDragDeltaXY)):this.workspaceDragger?(Td.setIsActive(!1),this.workspaceDragger.endDrag(this.currentDragDeltaXY)):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var t=g(e);this.cachedPoints.set(t,this.getTouchPoint(e));var r=Array.from(this.cachedPoints.keys());r.length===2&&(t=this.cachedPoints.get(r[0]),r=this.cachedPoints.get(r[1]),this.startDistance=Fe.distance(t,r),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const t=g(e);this.cachedPoints.set(t,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var t=Array.from(this.cachedPoints.keys()),r=this.cachedPoints.get(t[0]);if(t=this.cachedPoints.get(t[1]),r=Fe.distance(r,t)/this.startDistance,this.previousScale>0&&this.previousScale<1/0){if(t=r-this.previousScale,t=t>0?t*AO:t*OO,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const a=this.startWorkspace_,u=I(e,a.getParentSvg(),a.getInverseScreenCTM());a.zoom(u.x,u.y,t)}this.previousScale=r,e.preventDefault()}handleTouchEnd(e){e=g(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),this.cachedPoints.size<2&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new Fe(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(P(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startWorkspace_),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),Td.setIsActive(!1),this.dispose()}handleWsStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(t),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment?this.startBlock&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startBlock):o.getFocusManager$$module$build$src$core$focus_manager().focusNode(t),this.doStart(e)}fireWorkspaceClick(e){Ie(new(Be(pe.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(t),this.handleWsStart(e,t.getWorkspace())}handleBlockStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent=e}handleBubbleStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent=e}handleCommentStart(e,t){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(t),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.bringBlockToFront(),this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent)}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.flyout.isBlockCreatable(this.targetBlock)){o.getGroup$$module$build$src$core$events$utils()||o.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours(),o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(Be(pe.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),Ie(e)}this.bringBlockToFront(),o.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){this.fireWorkspaceClick(this.startWorkspace_||this.creatorWorkspace)}bringBlockToFront(){this.targetBlock&&!this.flyout&&(o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),this.targetBlock.bringToFront())}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):(this.targetBlock=e,o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e))}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,t;return(t=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?t:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=ve();for(let t=0,r;r=e[t];t++)if(r.currentGesture_)return!0;return!1}},Wf=class{constructor(e,t){this.pattern=e,this.scale=1;let r;this.spacing=(r=t.spacing)!=null?r:0;let a;this.length=(a=t.length)!=null?a:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let u;this.snapToGrid=(u=t.snap)!=null?u:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var t=this.spacing*e;this.pattern.setAttribute("width",`${t}`),this.pattern.setAttribute("height",`${t}`),t=Math.floor(this.spacing/2)+.5;let r=t-this.length/2,a=t+this.length/2;t*=e,r*=e,a*=e,this.setLineAttributes(this.line1,e,r,a,t,t),this.setLineAttributes(this.line2,e,t,t,r,a)}setLineAttributes(e,t,r,a,u,S){e&&(e.setAttribute("stroke-width",`${t}`),e.setAttribute("x1",`${r}`),e.setAttribute("y1",`${u}`),e.setAttribute("x2",`${a}`),e.setAttribute("y2",`${S}`))}moveTo(e,t){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${t}`)}alignXY(e){var t=this.getSpacing();const r=t/2,a=Math.round(Math.round((e.x-r)/t)*t+r);return t=Math.round(Math.round((e.y-r)/t)*t+r),a===e.x&&t===e.y?e:new Fe(a,t)}static createDom(e,t,r,a){e=de(he.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},r);let u,S;if(((u=t.length)!=null?u:1)>0&&((S=t.spacing)!=null?S:0)>0){de(he.LINE,{stroke:t.colour},e);let B;(B=t.length)!=null&&B&&de(he.LINE,{stroke:t.colour},e)}else de(he.LINE,{},e);return a&&a.style.setProperty("--blocklyGridPattern",`url(#${e.id})`),e}},CO=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(ss),Le(e,"blocklyBlockCanvas"),e=this.createLayer(sd),Le(e,"blocklyBubbleCanvas")}createDragLayer(e){const t=de(he.SVG,{class:"blocklyBlockDragSurface",xmlns:Gl,"xmlns:html":Ms,"xmlns:xlink":or,version:"1.1"});return e.append(t),de(he.G,{},t)}createAnimationLayer(e){const t=de(he.SVG,{class:"blocklyAnimationLayer",xmlns:Gl,"xmlns:html":Ms,"xmlns:xlink":or,version:"1.1"});return e.append(t),de(he.G,{},t)}appendToAnimationLayer(e){let t;const r=(t=this.dragLayer)==null?void 0:t.getAttribute("transform");if(r){let u;(u=this.animationLayer)==null||u.setAttribute("transform",r)}let a;(a=this.animationLayer)==null||a.appendChild(e.getSvgRoot())}translateLayers(e,t){e=`translate(${e.x}, ${e.y}) scale(${t})`;let r;(r=this.dragLayer)==null||r.setAttribute("transform",e);for(const[,a]of this.layers)a.setAttribute("transform",e)}moveToDragLayer(e){let t;(t=this.dragLayer)==null||t.appendChild(e.getSvgRoot()),e.canBeFocused()&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}moveOffDragLayer(e,t){this.append(e,t),e.canBeFocused()&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}append(e,t){this.layers.has(t)||this.createLayer(t),e=e.getSvgRoot();let r;if(((r=this.layers.get(t))==null?void 0:r.lastChild)!==e){let a;(a=this.layers.get(t))==null||a.appendChild(e)}}createLayer(e){const t=this.workspace.getSvgGroup(),r=de(he.G,{});let a=!1;const u=[...this.layers].sort((S,B)=>S[0]-B[0]);for(const[S,B]of u)if(e<S){t.insertBefore(r,B),a=!0;break}return a||t.appendChild(r),this.layers.set(e,r),r}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(ss)}getBubbleLayer(){return this.layers.get(sd)}},aS=class{constructor(){this.curNode=this.colour=null,this.type="marker"}getCurNode(){return this.curNode}setCurNode(e){this.curNode=e}dispose(){this.curNode=null}getSourceBlockFromNode(e){return e instanceof ui?e:e instanceof ri||e instanceof pn?e.getSourceBlock():null}getSourceBlock(){return this.getSourceBlockFromNode(this.getCurNode())}},Xf=class extends aS{constructor(e){super(),this.workspace=e,this.type="cursor",this.potentialNodes=null}next(){var e=this.getCurNode();return e?((e=this.getNextNode(e,t=>{let r;return t instanceof ui&&!((r=t.outputConnection)!=null&&r.targetBlock())||t instanceof No},!0))&&this.setCurNode(e),e):null}in(){var e=this.getCurNode();return e?((e=this.getNextNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,t=>{let r;return t instanceof ui&&!((r=t.outputConnection)!=null&&r.targetBlock())||t instanceof No},!0))&&this.setCurNode(e),e):null}out(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}atEndOfLine(){var e=this.getCurNode();if(!e)return!1;const t=this.getNextNode(e,()=>!0,!0);return e=this.getNextNode(e,r=>{let a;return r instanceof ui&&!((a=r.outputConnection)!=null&&a.targetBlock())},!0),t===e}getNextNodeImpl(e,t,r=new Set){if(!e||r.has(e))return null;let a=this.workspace.getNavigator().getFirstChild(e)||this.workspace.getNavigator().getNextSibling(e);for(var u=e;u&&!a&&(u=this.workspace.getNavigator().getParent(u),!!u);)a=this.workspace.getNavigator().getNextSibling(u);return t(a)?a:a?(r.add(e),this.getNextNodeImpl(a,t,r)):null}getNextNode(e,t,r){return!e||!r&&this.getLastNode()===e?null:this.getNextNodeImpl(e,t)}getPreviousNodeImpl(e,t,r=new Set){if(!e||r.has(e))return null;const a=this.getRightMostChild(this.workspace.getNavigator().getPreviousSibling(e),e)||this.workspace.getNavigator().getParent(e);return t(a)?a:a?(r.add(e),this.getPreviousNodeImpl(a,t,r)):null}getPreviousNode(e,t,r){return!e||!r&&this.getFirstNode()===e?null:this.getPreviousNodeImpl(e,t)}getRightMostChild(e,t){if(!e)return e;let r=this.workspace.getNavigator().getFirstChild(e);if(!r||r===t)return e;for(e=r;e&&e!==t;e=this.workspace.getNavigator().getNextSibling(r))r=e;return this.getRightMostChild(r,t)}preDelete(e){var t=this.getCurNode();t=t?[t]:[];var r;let a,u;const S=(u=(r=e.previousConnection)==null?void 0:r.targetConnection)!=null?u:(a=e.outputConnection)==null?void 0:a.targetConnection;S&&t.push(S),(r=e.getNextBlock())&&t.push(r),(e=e.getParent())&&t.push(e),t.push(this.workspace),this.potentialNodes=t}postDelete(){const e=this.potentialNodes;if(this.potentialNodes=null,!e)throw Error("must call preDelete first");for(const t of e){let r;if((r=this.getSourceBlockFromNode(t))==null||!r.disposed){this.setCurNode(t);return}}throw Error("no valid nodes in this.potentialNodes")}getCurNode(){return o.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()}setCurNode(e){o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}getFirstNode(){return this.workspace.getNavigator().getFirstChild(this.workspace)}getLastNode(){const e=this.getFirstNode();return this.getPreviousNode(e,()=>!0,!0)}};s(De.CURSOR,rr,Xf);var Kf=class{constructor(e){this.workspace=e,this.markers=new Map,this.cursor=new Xf(this.workspace)}registerMarker(e,t){this.markers.has(e)&&this.unregisterMarker(e),this.markers.set(e,t)}unregisterMarker(e){const t=this.markers.get(e);if(t)t.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor=e}dispose(){const e=Object.keys(this.markers);for(let t=0,r;r=e[t];t++)this.unregisterMarker(r);this.markers.clear(),this.cursor.dispose()}};Kf.LOCAL_MARKER="local_marker_1";var as={};as.CommentIcon=xr,as.Icon=ou,as.IconType=qi,as.MutatorIcon=o.MutatorIcon$$module$build$src$core$icons$mutator_icon,as.WarningIcon=ro,as.exceptions=Ub,as.registry=Uf,o.Names$$module$build$src$core$names=class{constructor(e,t){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=t||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.getName():null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=o.allUsedVarModels$$module$build$src$core$variables(e);for(let t=0;t<e.length;t++)this.getName(e[t].getId(),o.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,t){let r=e;t===o.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(r=e),e=r.toLowerCase();const a=t===o.NameType$$module$build$src$core$names.VARIABLE||t===o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(t)||this.db.set(t,new Map);const u=this.db.get(t);return u.has(e)?a+u.get(e):(t=this.getDistinctName(r,t),u.set(e,t.substr(a.length)),t)}getUserNames(e){let t;return(e=(t=this.db.get(e))==null?void 0:t.keys())?Array.from(e):[]}getDistinctName(e,t){e=this.safeName(e);let r=null,a,u;for(;this.dbReverse.has(e+((a=r)!=null?a:""))||this.reservedWords.has(e+((u=r)!=null?u:""));)r=r?r+1:2;let S;return e+=(S=r)!=null?S:"",this.dbReverse.add(e),(t===o.NameType$$module$build$src$core$names.VARIABLE||t===o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=o.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,t){return e.toLowerCase()===t.toLowerCase()}},(function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"})(o.Names$$module$build$src$core$names||(o.Names$$module$build$src$core$names={})),o.NameType$$module$build$src$core$names=o.Names$$module$build$src$core$names.NameType,o.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=o.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,o.NameType$$module$build$src$core$names,o.Names$$module$build$src$core$names;var lS=class extends Map{constructor(){super()}set(e,t){return this.get(e)===t?this:(super.set(e,t),Ic(t)&&t.startPublishing(),this)}delete(e){const t=this.get(e);return e=super.delete(e),e&&(Ic(t)&&t.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},Sd,On;Sd="PROCEDURE",o.DEFAULT_ARG$$module$build$src$core$procedures="x",On={CATEGORY_NAME:Sd,DEFAULT_ARG:o.DEFAULT_ARG$$module$build$src$core$procedures},On.ObservableProcedureMap=lS,On.allProcedures=Pl,On.findLegalName=o.findLegalName$$module$build$src$core$procedures,On.flyoutCategory=ap,On.getCallers=cp,On.getDefinition=o.getDefinition$$module$build$src$core$procedures,On.internalFlyoutCategory=vc,On.isNameUsed=sp,On.isProcedureBlock=Qo,On.mutateCallers=o.mutateCallers$$module$build$src$core$procedures,On.mutatorOpenListener=up,On.rename=o.rename$$module$build$src$core$procedures;var yO=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return(e.type&this.FIELD)>=1}isHat(e){return(e.type&this.HAT)>=1}isIcon(e){return(e.type&this.ICON)>=1}isSpacer(e){return(e.type&this.SPACER)>=1}isInRowSpacer(e){return(e.type&this.IN_ROW_SPACER)>=1}isSpacerRow(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isInput(e){return(e.type&this.INPUT)>=1}isExternalInput(e){return(e.type&this.EXTERNAL_VALUE_INPUT)>=1}isInlineInput(e){return(e.type&this.INLINE_INPUT)>=1}isStatementInput(e){return(e.type&this.STATEMENT_INPUT)>=1}isPreviousConnection(e){return(e.type&this.PREVIOUS_CONNECTION)>=1}isNextConnection(e){return(e.type&this.NEXT_CONNECTION)>=1}isPreviousOrNextConnection(e){return this.isPreviousConnection(e)||this.isNextConnection(e)}isRoundCorner(e){return(e.type&this.LEFT_ROUND_CORNER)>=1||(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.LEFT_ROUND_CORNER)>=1}isRightRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftSquareCorner(e){return(e.type&this.LEFT_SQUARE_CORNER)>=1}isRightSquareCorner(e){return(e.type&this.RIGHT_SQUARE_CORNER)>=1}isCorner(e){return(e.type&this.CORNER)>=1}isJaggedEdge(e){return(e.type&this.JAGGED_EDGE)>=1}isRow(e){return(e.type&this.ROW)>=1}isBetweenRowSpacer(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isTopRow(e){return(e.type&this.TOP_ROW)>=1}isBottomRow(e){return(e.type&this.BOTTOM_ROW)>=1}isTopOrBottomRow(e){return this.isTopRow(e)||this.isBottomRow(e)}isInputRow(e){return(e.type&this.INPUT_ROW)>=1}},oe=new yO,oo=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=oe.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},uu=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=oe.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;e>=0;e--){const t=this.elements[e];if(oe.isInput(t))return t}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const t=this.elements[e];if(oe.isInRowSpacer(t))return t}return null}getLastSpacer(){for(let e=this.elements.length-1;e>=0;e--){const t=this.elements[e];if(oe.isInRowSpacer(t))return t}return null}},zf=class extends uu{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=oe.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,r=0;for(let a=0;a<this.elements.length;a++){const u=this.elements[a];t+=u.width,oe.isSpacer(u)||(oe.isNextConnection(u)?r=Math.max(r,u.height):e=Math.max(e,u.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+r,this.descenderHeight=r,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},js=class extends oo{constructor(e,t){super(e),this.connectionModel=t,this.type|=oe.CONNECTION,this.shape=this.constants_.shapeFor(t),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=t.isHighlighted()}},Id=class extends js{constructor(e,t){super(e,t.connection),this.input=t,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=oe.INPUT,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Yf=class extends Id{constructor(e,t){super(e,t),this.height=0,this.type|=oe.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},jf=class extends oo{constructor(e,t,r){super(e),this.field=t,this.parentInput=r,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=oe.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},uS=class extends oo{constructor(e){super(e),this.type|=oe.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},cS=class extends oo{constructor(e,t){super(e),this.icon=t,this.flipRtl=!1,this.type|=oe.ICON,e=t.getSize(),this.height=e.height,this.width=e.width}},dr=class extends oo{constructor(e,t){super(e),this.type|=oe.SPACER|oe.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},qf=class extends Id{constructor(e,t){super(e,t),this.type|=oe.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Jf=class extends uu{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=oe.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let t=0;t<this.elements.length;t++){const r=this.elements[t];this.width+=r.width,oe.isInput(r)&&(oe.isStatementInput(r)?e+=r.connectedBlockWidth:oe.isExternalInput(r)&&r.connectedBlockWidth!==0&&(e+=r.connectedBlockWidth-r.connectionWidth)),oe.isSpacer(r)||(this.height=Math.max(this.height,r.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},dS=class extends oo{constructor(e){super(e),this.type|=oe.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},hS=class extends js{constructor(e,t){super(e,t),this.type|=oe.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},_S=class extends js{constructor(e,t){super(e,t),this.connectionOffsetX=0,this.type|=oe.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},pS=class extends js{constructor(e,t){super(e,t),this.type|=oe.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},cu=class extends oo{constructor(e,t){super(e),this.type=(t&&t!=="left"?oe.RIGHT_ROUND_CORNER:oe.LEFT_ROUND_CORNER)|oe.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},Zf=class extends uu{constructor(e,t,r){super(e),this.height=t,this.width=r,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type|=oe.SPACER|oe.BETWEEN_ROW_SPACER,this.elements=[new dr(this.constants_,r)]}measure(){}},du=class extends oo{constructor(e,t){super(e),this.type=(t&&t!=="left"?oe.RIGHT_SQUARE_CORNER:oe.LEFT_SQUARE_CORNER)|oe.CORNER,this.width=this.height=this.constants_.NO_PADDING}},vd=class extends Id{constructor(e,t){super(e,t),this.type|=oe.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Qf=class extends uu{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=oe.TOP_ROW}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,r=e.getPreviousBlock();return!!e.outputConnection||t||(r?r.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,t=0,r=0;for(let a=0;a<this.elements.length;a++){const u=this.elements[a];t+=u.width,oe.isSpacer(u)||(oe.isHat(u)?r=Math.max(r,u.ascenderHeight):e=Math.max(e,u.height))}this.width=Math.max(this.minWidth,t),this.height=Math.max(this.minHeight,e)+r,this.capline=this.ascenderHeight=r,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Ad=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Ri(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const t=e.blockStyles;for(const r in t)this.blockStyles[r]=this.validatedBlockStyle_(t[r]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=T("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const t={};return e&&Object.assign(t,e),e=Sa(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?Sa(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?Sa(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t}generateSecondaryColour_(e){return Ns("#fff",e,.6)||e}generateTertiaryColour_(e){return Ns("#fff",e,.3)||e}dispose(){this.embossFilter&&Ke(this.embossFilter),this.disabledPattern&&Ke(this.disabledPattern),this.debugFilter&&Ke(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH,r=Ca([tt(t,e/4),tt(-t*2,e/2),tt(t,e/4)]);return{height:e,width:t,path:r}}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,r=zn("c",[tt(30,-e),tt(70,-e),tt(t,0)]);return{height:e*.75,width:t,path:r}}makePuzzleTab(){function e(S){S=S?-1:1;const B=-S;var Z=r/2;const ye=Z+2.5,et=Z+.5,Ii=tt(-t,S*Z);return Z=tt(t,S*Z),zn("c",[tt(0,S*ye),tt(-t,B*et),Ii])+zn("s",[tt(t,B*2.5),Z])}const t=this.TAB_WIDTH,r=this.TAB_HEIGHT,a=e(!0),u=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:r,pathDown:u,pathUp:a}}makeNotch(){function e(B){return Ca([tt(B*a,r),tt(B*3,0),tt(B*a,-r)])}const t=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,a=(t-3)/2,u=e(1),S=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:r,pathLeft:u,pathRight:S}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=xi("a","0 0,0",e,tt(-e,e)),r=xi("a","0 0,0",e,tt(e,e));return{width:e,height:e,pathTop:t,pathBottom:r}}makeOutsideCorners(){const e=this.CORNER_RADIUS,t=Ri(0,e)+xi("a","0 0,1",e,tt(e,-e)),r=xi("a","0 0,1",e,tt(e,e)),a=xi("a","0 0,1",e,tt(-e,-e)),u=xi("a","0 0,1",e,tt(-e,e));return{topLeft:t,topRight:r,bottomRight:u,bottomLeft:a,rightHeight:e}}shapeFor(e){switch(e.type){case qe.INPUT_VALUE:case qe.OUTPUT_VALUE:return this.PUZZLE_TAB;case qe.PREVIOUS_STATEMENT:case qe.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,t,r,a){this.injectCSS_(t,r),this.defs=de(he.DEFS,{},e),e=de(he.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),de(he.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),t=de(he.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),de(he.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},t),de(he.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),de(he.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=de(he.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),de(he.RECT,{width:10,height:10,fill:"#aaa"},e),de(he.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter(),a&&(a.style.setProperty("--blocklyEmbossFilter",`url(#${this.embossFilterId})`),a.style.setProperty("--blocklyDisabledPattern",`url(#${this.disabledPatternId})`),a.style.setProperty("--blocklyDebugFilter",`url(#${this.debugFilterId})`))}createDebugFilter(){if(!this.debugFilter){const e=de(he.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),t=de(he.FECOMPONENTTRANSFER,{result:"outBlur"},e);de(he.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),de(he.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),de(he.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const r=t.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=r:(t=document.createElement("style"),t.id=e,e=document.createTextNode(r),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode=t)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect,`,`${e} .blocklyEditableField>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableField:not(.blocklyEditing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Od=class{constructor(e,t){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=t.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Ri(e.xPos,this.info_.startY);for(let r=0,a;a=t[r];r++)oe.isLeftRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:oe.isRightRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:oe.isPreviousConnection(a)?this.outlinePath_+=a.shape.pathLeft:oe.isHat(a)?this.outlinePath_+=this.constants_.START_HAT.path:oe.isSpacer(a)&&(this.outlinePath_+=nt("h",a.width));this.outlinePath_+=nt("v",e.height-e.ascenderHeight)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+nt("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const t=e.getLastInput();this.positionExternalValueConnection_(e);const r=Ac(t.shape)?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=nt("H",t.xPos+t.width)+r+nt("v",e.height-t.connectionHeight)}drawStatementInput_(e){var t=e.getLastInput();if(t){var r=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+nt("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var a=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=nt("H",r)+t+nt("v",a)+this.constants_.INSIDE_CORNERS.pathBottom+nt("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=nt("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();let r=0,a="";for(let u=t.length-1,S;S=t[u];u--)oe.isNextConnection(S)?a+=S.shape.pathRight:oe.isLeftSquareCorner(S)?a+=nt("H",e.xPos):oe.isLeftRoundedCorner(S)?a+=this.constants_.OUTSIDE_CORNERS.bottomLeft:oe.isRightRoundedCorner(S)?(a+=this.constants_.OUTSIDE_CORNERS.bottomRight,r=this.constants_.OUTSIDE_CORNERS.rightHeight):oe.isSpacer(S)&&(a+=nt("h",S.width*-1));this.outlinePath_+=nt("V",e.baseline-r),this.outlinePath_+=a}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const t=e.connectionOffsetY+e.height;e=Ac(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=nt("V",t)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,t;t=this.info_.rows[e];e++)for(let r=0,a;a=t.elements[r];r++)oe.isInlineInput(a)?this.drawInlineInput_(a):(oe.isIcon(a)||oe.isField(a))&&this.layoutField_(a)}layoutField_(e){const t=e.centerline-e.height/2;let r=e.xPos;var a="";this.info_.RTL&&(r=-(r+e.width),e.flipRtl&&(r+=e.width,a="scale(-1 1)")),oe.isIcon(e)?(a=e.icon,a.setOffsetInBlock(new Fe(r,t)),this.info_.isInsertionMarker&&a.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+r+","+t+")"+a),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const t=e.width,r=e.height,a=e.connectionOffsetY,u=e.connectionHeight+a;this.inlinePath_+=dn(e.xPos+e.connectionWidth,e.centerline-r/2)+nt("v",a)+e.shape.pathDown+nt("v",r-u)+nt("h",t-e.connectionWidth)+nt("v",-r)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let r=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(r*=-1),e.connectionModel.setOffsetInBlock(r,t+e.connectionOffsetY)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let r=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,e.yPos)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let r=e.xPos+e.width;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,r=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-r:r,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const t of e.elements){if(!(t instanceof js))continue;const r=this.drawConnectionHighlightPath(t);r&&(r.style.display=t.highlighted?"":"none")}}drawConnectionHighlightPath(e){const t=e.connectionModel;e=t.type===qe.INPUT_VALUE||t.type===qe.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const r=t.getSourceBlock();let a,u;return(u=(a=r.pathObject).addConnectionHighlight)==null?void 0:u.call(a,t,e,t.getOffsetInBlock(),r.RTL)}getExpressionConnectionHighlightPath(e){let t="";return Ac(e.shape)?t=e.shape.pathDown(e.height):YE(e.shape)&&(t=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,Ri(0,-e)+nt("v",e)+t+nt("v",e)}getStatementConnectionHighlightPath(e){if(!jE(e.shape))throw Error("Statement connections should have notch shapes");const t=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Ri(-t,0)+nt("h",t)+e.shape.pathLeft+nt("h",t)}},hu=class{constructor(e,t){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new _S(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.topRow=new Qf(this.constants_),this.bottomRow=new zf(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new Jf(this.constants_);this.inputRows.push(e);var t=this.block_.getIcons();for(let r=0,a;a=t[r];r++){const u=new cS(this.constants_,a);this.isCollapsed&&!a.isShownWhenCollapsed()||e.elements.push(u)}t=void 0;for(let r=0,a;a=this.block_.inputList[r];r++)if(a.isVisible()){this.shouldStartNewRow_(a,t)&&(this.rows.push(e),e=new Jf(this.constants_),this.inputRows.push(e));for(let u=0,S;S=a.fieldRow[u];u++)e.elements.push(new jf(this.constants_,S,a));this.addInput_(a,e),t=a}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new dS(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const t=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let r=this.topRow.hasLeftSquareCorner(this.block_)?du:cu;this.topRow.elements.push(new r(this.constants_)),t?(e=new uS(this.constants_),this.topRow.elements.push(e)):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new pS(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof cr&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,r=this.topRow.hasRightSquareCorner(this.block_)?du:cu,this.topRow.elements.push(new r(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof cr?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new du(this.constants_)):this.bottomRow.elements.push(new cu(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new hS(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new du(this.constants_,"right")):this.bottomRow.elements.push(new cu(this.constants_,"right"))}addInput_(e,t){this.isInline&&e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new qf(this.constants_,e)),t.hasInlineInput=!0):e instanceof cr?(t.elements.push(new vd(this.constants_,e)),t.hasStatement=!0):e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Yf(this.constants_,e)),t.hasExternalInput=!0):(e instanceof no||e instanceof Lo)&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),t.align===null&&(t.align=e.align)}shouldStartNewRow_(e,t){return t?t instanceof Lo||e instanceof cr||t instanceof cr?!0:e instanceof o.ValueInput$$module$build$src$core$inputs$value_input||e instanceof no||t instanceof o.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,t;t=this.rows[e];e++){const r=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new dr(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(let a=0;a<r.length-1;a++){t.elements.push(r[a]);const u=this.getInRowSpacing_(r[a],r[a+1]);t.elements.push(new dr(this.constants_,u))}t.elements.push(r[r.length-1]),t.endsWithElemSpacer()&&t.elements.push(new dr(this.constants_,this.getInRowSpacing_(r[r.length-1],null)))}}}getInRowSpacing_(e,t){if(!e&&t&&oe.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&oe.isInput(e)&&!t){if(oe.isExternalInput(e))return this.constants_.NO_PADDING;if(oe.isInlineInput(e))return this.constants_.LARGE_PADDING;if(oe.isStatementInput(e))return this.constants_.NO_PADDING}return e&&oe.isLeftSquareCorner(e)&&t&&(oe.isPreviousConnection(t)||oe.isNextConnection(t))?t.notchOffset:e&&oe.isLeftRoundedCorner(e)&&t&&(oe.isPreviousConnection(t)||oe.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&oe.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,t=0,r=0;for(let u=0,S;S=this.rows[u];u++){if(S.measure(),t=Math.max(t,S.width),S.hasStatement){var a=S.getLastInput();let B,Z;a=S.width-((Z=(B=a)==null?void 0:B.width)!=null?Z:0),e=Math.max(e,a)}r=Math.max(r,S.widthWithConnectedBlocks)}this.statementEdge=e,this.width=t;for(let u=0,S;S=this.rows[u];u++)S.hasStatement&&(S.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(t,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let t=0,r;r=this.rows[t];t++)if(r.hasStatement)this.alignStatementRow_(r);else{var e=r.width;e=this.getDesiredRowWidth_(r)-e,e>0&&this.addAlignmentPadding_(r,e),oe.isTopOrBottomRow(r)&&(r.widthWithConnectedBlocks=r.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,t){const r=e.getFirstSpacer(),a=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align===o.Align$$module$build$src$core$inputs$align.LEFT&&a)a.width+=t;else if(e.align===o.Align$$module$build$src$core$inputs$align.CENTRE&&r&&a)r.width+=t/2,a.width+=t/2;else if(e.align===o.Align$$module$build$src$core$inputs$align.RIGHT&&r)r.width+=t;else if(a)a.width+=t;else return;e.width+=t}alignStatementRow_(e){const t=e.getLastInput();if(t){var r=e.width-t.width,a=this.statementEdge;r=a-r,r>0&&this.addAlignmentPadding_(e,r),r=e.width,a=this.getDesiredRowWidth_(e),t.width+=a-r,t.height=Math.max(t.height,e.height),e.width+=a-r,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push(e[t]),t!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))}makeSpacerRow_(e,t){var r=this.getSpacerRowHeight_(e,t);const a=this.getSpacerRowWidth_(e,t);return r=new Zf(this.constants_,r,a),e.hasStatement&&(r.followsStatement=!0),t.hasStatement&&(r.precedesStatement=!0),r}getSpacerRowWidth_(e,t){return this.width-this.startX}getSpacerRowHeight_(e,t){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){return oe.isSpacer(t)?e.yPos+t.height/2:oe.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,oe.isNextConnection(t)?e+t.height/2:e-t.height/2):oe.isTopRow(e)?oe.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2}recordElemPositions_(e){let t=e.xPos;for(let r=0,a;a=e.elements[r];r++)oe.isSpacer(a)&&(a.height=e.height),a.xPos=t,a.centerline=this.getElemCenterline_(e,a),t+=a.width}finalize_(){let e=0,t=0;for(let r=0,a;a=this.rows[r];r++)a.yPos=t,a.xPos=this.startX,t+=a.height,e=Math.max(e,a.widthWithConnectedBlocks),this.recordElemPositions_(a);if(this.outputConnection&&this.block_.nextConnection){const r=this.block_.nextConnection.targetBlock();r&&(e=Math.max(e,r.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline,this.bottomRow.baseline=t-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let t;if(((t=this.outputConnection)==null?void 0:t.connectionModel)===e)return this.outputConnection;for(const r of this.rows)for(const a of r.elements)if(a instanceof js&&a.connectionModel===e)return a;return null}},Cd=class{constructor(e,t,r){this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=r,this.style=t,this.svgRoot=e,this.svgPath=de(he.PATH,{class:"blocklyPath"},this.svgRoot),this.setClass_("blocklyBlock",!0)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,t){e&&(t?Le(this.svgRoot,e):be(this.svgRoot,e))}updateHighlighted(e){e?this.setClass_("blocklyHighlighted",!0):this.setClass_("blocklyHighlighted",!1)}updateShadow_(e){e?(this.setClass_("blocklyShadow",!0),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)):this.setClass_("blocklyShadow",!1)}updateDisabled_(e){this.setClass_("blocklyDisabled",e),this.setClass_("blocklyDisabledPattern",e)}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){}addConnectionHighlight(e,t,r,a){return r=`translate(${r.x}, ${r.y})`+(a?" scale(-1 1)":""),(a=this.connectionHighlights.get(e))?(a.setAttribute("d",t),a.setAttribute("transform",r),a):(t=de(he.PATH,{id:e.id,class:"blocklyHighlightedConnectionPath",style:"display: none;",d:t,transform:r},this.svgRoot),this.connectionHighlights.set(e,t),t)}removeConnectionHighlight(e){const t=this.connectionHighlights.get(e);t&&(Ke(t),this.connectionHighlights.delete(e))}},yd=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Object.assign(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,t,r){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName(),r)}refreshDom(e,t,r){const a=this.getConstants();a.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=a.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t,r)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Ad}makeRenderInfo_(e){return new hu(this,e)}makeDrawer_(e,t){return new Od(e,t)}makePathObject(e,t){return new Cd(e,t,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,t,r){return!!Xt.getConnectionForOrphanedConnection(e,r===qe.OUTPUT_VALUE?t.outputConnection:t.previousConnection)}render(e){const t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()}},ei={};ei.BottomRow=zf,ei.Connection=js,ei.ConstantProvider=Ad,ei.Drawer=Od,ei.ExternalValueInput=Yf,ei.Field=jf,ei.Hat=uS,ei.Icon=cS,ei.InRowSpacer=dr,ei.InlineInput=qf,ei.InputConnection=Id,ei.InputRow=Jf,ei.JaggedEdge=dS,ei.Measurable=oo,ei.NextConnection=hS,ei.OutputConnection=_S,ei.PathObject=Cd,ei.PreviousConnection=pS,ei.RenderInfo=hu,ei.Renderer=yd,ei.RoundCorner=cu,ei.Row=uu,ei.SpacerRow=Zf,ei.SquareCorner=du,ei.StatementInput=vd,ei.TopRow=Qf,ei.Types=oe,ei.init=dp,ei.register=Bl,ei.unregister=qE;var fS=class{constructor(e,t){this.workspace=e,this.theme=t,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var t=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(t&&(t=t.getClassName())&&be(e,t),(t=this.theme.getClassName())&&Le(e,t));for(let r=0,a;a=this.subscribedWorkspaces[r];r++)a.refreshTheme();for(const[r,a]of this.componentDB)for(const u of a){e=u.element,t=u.propertyName;const S=this.theme&&this.theme.getComponentStyle(r);e.style.setProperty(t,S||"")}for(const r of this.subscribedWorkspaces)r.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!q(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,t,r){this.componentDB.has(t)||this.componentDB.set(t,[]),this.componentDB.get(t).push({element:e,propertyName:r}),t=this.theme&&this.theme.getComponentStyle(t),e.style.setProperty(r,t||"")}unsubscribe(e){if(e)for(const[t,r]of this.componentDB){for(let a=r.length-1;a>=0;a--)r[a].element===e&&r.splice(a,1);r.length||this.componentDB.delete(t)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},eg="VARIABLE_DYNAMIC",ls={CATEGORY_NAME:eg};ls.flyoutCategory=hp,ls.flyoutCategoryBlocks=_p,ls.internalFlyoutCategory=Rc,ls.onCreateVariableButtonClick_Colour=yc,ls.onCreateVariableButtonClick_Number=Cc,ls.onCreateVariableButtonClick_String=Oc;var gS=class{canConnect(e,t,r,a){return this.canConnectWithReason(e,t,r,a)===Xt.CAN_CONNECT}canConnectWithReason(e,t,r,a){const u=this.doSafetyChecks(e,t);return u!==Xt.CAN_CONNECT?u:this.doTypeChecks(e,t)?r&&!this.doDragChecks(e,t,a||0)?Xt.REASON_DRAG_CHECKS_FAILED:Xt.CAN_CONNECT:Xt.REASON_CHECKS_FAILED}getErrorMessage(e,t,r){switch(e){case Xt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Xt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Xt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Xt.REASON_TARGET_NULL:return"Target connection is null.";case Xt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(t+" expected "+t.getCheck()+", found "+r.getCheck());case Xt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Xt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Xt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,t){if(!e||!t)return Xt.REASON_TARGET_NULL;let r,a,u;return e.isSuperior()?(r=e.getSourceBlock(),a=t.getSourceBlock(),u=t):(a=e.getSourceBlock(),r=t.getSourceBlock(),u=e,e=t),r===a?Xt.REASON_SELF_CONNECTION:u.type!==Ys[e.type]?Xt.REASON_WRONG_TYPE:r.workspace!==a.workspace?Xt.REASON_DIFFERENT_WORKSPACES:r.isShadow()&&!a.isShadow()?Xt.REASON_SHADOW_PARENT:u.type===qe.OUTPUT_VALUE&&a.previousConnection&&a.previousConnection.isConnected()||u.type===qe.PREVIOUS_STATEMENT&&a.outputConnection&&a.outputConnection.isConnected()?Xt.REASON_PREVIOUS_AND_OUTPUT:Xt.CAN_CONNECT}doTypeChecks(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(let r=0;r<e.length;r++)if(t.includes(e[r]))return!0;return!1}doDragChecks(e,t,r){if(e.distanceFrom(t)>r||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case qe.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case qe.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case qe.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;case qe.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection||t.targetBlock()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow())return!1;break;default:return!1}return!Kl.includes(t)}canConnectToPrevious_(e,t){return e.targetConnection||Kl.includes(t)?!1:t.targetConnection?(e=t.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};s(De.CONNECTION_CHECKER,rr,gS);var Ya=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new lS,this.readOnly=!1,this.potentialVariableMap=null,this.id=O(),Xe(this),this.options=e||new io({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(y(De.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new(this.getVariableMapClass())(this),this.setIsReadOnly(this.options.readOnly)}dispose(){this.listeners.length=0,this.clear(),le(this)}sortObjects(e,t){const r=a=>({getBoundingRectangle:()=>{const u=a.getRelativeToSurfaceXY();return new Dt(u.y,u.y,u.x,u.x)},moveBy:()=>{}});return this.sortByOrigin(r(e),r(t))}sortByOrigin(e,t){const r=Math.sin(rc(Ya.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getBoundingRectangle().getOrigin(),t=t.getBoundingRectangle().getOrigin(),e.y+r*e.x-(t.y+r*t.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!q(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const t=[].concat(this.topBlocks);return e&&t.length>1&&t.sort(this.sortObjects.bind(this)),t}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){q(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,t=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),t&&e&&e.length>1&&e.sort(this.sortObjects.bind(this)),e.filter(r=>!r.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!q(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const t=[].concat(this.topComments);return e&&t.length>1&&t.sort(this.sortObjects.bind(this)),t}getAllBlocks(e=!1){if(e){var t=this.getTopBlocks(!0);e=[];for(let r=0;r<t.length;r++)e.push(...t[r].getDescendants(!0))}else for(e=this.getTopBlocks(!1),t=0;t<e.length;t++)e.push(...e[t].getChildren(!1));return e.filter(r=>!r.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=o.getGroup$$module$build$src$core$events$utils();for(e||o.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();o.setGroup$$module$build$src$core$events$utils(e),this.isFlyout||this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,t){cn("Blockly.Workspace.renameVariableById","v12","v13","Blockly.Workspace.getVariableMap().renameVariable"),(e=this.variableMap.getVariableById(e))&&this.variableMap.renameVariable(e,t)}createVariable(e,t,r){return cn("Blockly.Workspace.createVariable","v12","v13","Blockly.Workspace.getVariableMap().createVariable"),this.variableMap.createVariable(e,t??void 0,r??void 0)}getVariableUsesById(e){return cn("Blockly.Workspace.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),$a(this,e)}deleteVariableById(e){cn("Blockly.Workspace.deleteVariableById","v12","v13","Blockly.Workspace.getVariableMap().deleteVariable");const t=this.variableMap.getVariableById(e);t?o.deleteVariable$$module$build$src$core$variables(this,t):console.warn(`Can't delete non-existent variable: ${e}`)}getVariable(e,t){return cn("Blockly.Workspace.getVariable","v12","v13","Blockly.Workspace.getVariableMap().getVariable"),this.variableMap.getVariable(e,t)}getVariableById(e){return cn("Blockly.Workspace.getVariableById","v12","v13","Blockly.Workspace.getVariableMap().getVariableById"),this.variableMap.getVariableById(e)}getVariablesOfType(e){return cn("Blockly.Workspace.getVariablesOfType","v12","v13","Blockly.Workspace.getVariableMap().getVariablesOfType"),this.variableMap.getVariablesOfType(e??"")}getAllVariables(){return cn("Blockly.Workspace.getAllVariables","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables()}getAllVariableNames(){return cn("Blockly.Workspace.getAllVariableNames","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables().map(e=>e.getName())}getWidth(){return 0}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let t=0;for(const r in e){if(e[r]>this.remainingCapacityOfType(r))return!1;t+=e[r]}return!(t>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var t=e?this.redoStack_:this.undoStack_,r=e?this.undoStack_:this.redoStack_;const a=t.pop();if(a){for(var u=[a];t.length&&a.group&&a.group===t[t.length-1].group;){const S=t.pop();S&&u.push(S)}for(t=0;t<u.length;t++)r.push(u[t]);o.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(r=0;r<u.length;r++)u[r].run(e)}finally{o.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,te()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){q(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&this.MAX_UNDO>=0;)this.undoStack_.shift();for(let t=0;t<this.listeners.length;t++)(0,this.listeners[t])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,t){this.blockDB.set(e,t)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let t;return(t=this.commentDB.get(e))!=null?t:null}allInputsFilled(e){const t=this.getTopBlocks(!1);for(let r=0;r<t.length;r++)if(!t[r].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new(this.getVariableMapClass())(this,!0)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const t=this.options.parentWorkspace;return this.isFlyout?t&&t.options&&(e=t.options.parentWorkspace):t&&(e=t),e}static getById(e){return ke(e)}static getAll(){return ve()}getVariableMapClass(){const e=y(De.VARIABLE_MAP,this.options,!0);if(!e)throw Error("No variable map is registered.");return e}isReadOnly(){return this.readOnly}setIsReadOnly(e){this.readOnly=e,this.options.readOnly=e}};Ya.SCAN_ANGLE=3;var RO=100,mS=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,t){if(e.length){try{var r=new globalThis.Audio}catch{return}for(let u=0;u<e.length;u++){const S=e[u],B=S.match(/\.(\w+)$/);if(B&&r.canPlayType("audio/"+B[1])){var a=new globalThis.Audio(S);break}}a&&this.sounds.set(t,a)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const t=e.play();if(t!==void 0?t.then(e.pause).catch(function(){}):e.pause(),Uc||OT)break}}play(e,t){if(!this.muted){var r=this.sounds.get(e);r?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<RO||(this.lastSound=e,r=Uc||Yp?r:r.cloneNode(),r.volume=t===void 0?1:t,r.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,t)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},NO=20,Cn=class extends Ya{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardMoveInProgress=this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.navigator=new Hf,this.metricsManager=new(y(De.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||Cn.setTopLevelWorkspaceMetrics,this.componentManager=new $i,this.connectionDBList=Ga.init(this.connectionChecker),this.audioManager=new mS(e.parentWorkspace),this.grid=this.options.gridPattern?new Wf(this.options.gridPattern,e.gridOptions):null,this.markerManager=new Kf(this),Bi&&Qu&&this.registerToolboxCategoryCallback(gf,Qu),ls&&Rc&&this.registerToolboxCategoryCallback(eg,Rc),On&&vc&&(this.registerToolboxCategoryCallback(Sd,vc),this.addChangeListener(up)),this.addChangeListener(this.variableChangeCallback.bind(this)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new fS(this,this.options.theme||dd),this.themeManager_.subscribeWorkspace(this);let t;this.renderer=dp(this.options.renderer||"geras",this.getTheme(),(t=this.options.rendererOverrides)!=null?t:void 0),this.cachedParentSvgSize=new kt(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}getMarker(e){return this.markerManager.getMarker(e)}getCursor(){return this.markerManager.getCursor()}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=dd),this.themeManager_.setTheme(e)}refreshTheme(){if(this.svgGroup_){var e=this.options.parentWorkspace===null;this.renderer.refreshDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0)}this.updateBlockStyles(this.getAllBlocks(!1).filter(t=>!!t.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0),e=new(Be(pe.THEME_CHANGE))(this.getTheme().name,this.id),Ie(e)}updateBlockStyles(e){for(let t=0,r;r=e[t];t++){const a=r.getStyleName();a&&r.setStyle(a)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let t=0,r=0,a=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(a=this.scale);do{const u=Ye(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(a=1),t+=u.x*a,r+=u.y*a,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new Fe(t,r)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new kt(e.width,e.height)}getOriginOffsetInPixels(){return Ze(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,t){return this.injectionDiv||(this.injectionDiv=t??null),this.svgGroup_=de(he.G,{class:"blocklyWorkspace",id:this.id}),t&&Gi(this.svgGroup_,Pi.LABEL,o.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),e&&(this.svgBackground_=de(he.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="var(--blocklyGridPattern)":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new CO(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(C(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),C(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(y(De.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=y(De.CURSOR,this.options))&&this.markerManager.setCursor(new e(this)),e=this.options.parentWorkspace===null,this.renderer.createDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0),o.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!!this.injectionDiv||this.isFlyout),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&Ke(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&Ke(e.parentNode)}this.resizeHandlerWrapper&&(k(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null),o.getFocusManager$$module$build$src$core$focus_manager().isRegistered(this)&&o.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}addTrashcan(){this.trashcan=Cn.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new KT(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}copyOptionsForFlyout(){return new io({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,plugins:this.options.plugins,modalInputs:this.options.modalInputs,move:{scrollbars:!0}})}addFlyout(e){const t=this.copyOptionsForFlyout();return t.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(y(De.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(y(De.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox?this.toolbox.position():this.flyout&&this.flyout.position();const e=this.componentManager.getComponents($i.Capability.POSITIONABLE,!0),t=this.getMetricsManager().getUiMetrics(),r=[];for(let a=0,u;u=e[a];a++){u.position(t,r);const S=u.getBoundingRectangle();S&&r.push(S)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=bi();Fe.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,t){const r=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,r.setAttribute("data-cached-width",`${e}`)),t!=null&&(this.cachedParentSvgSize.height=t,r.setAttribute("data-cached-height",`${t}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ue()){var e=this.scale,t=-this.scrollY,r=-this.scrollX;if(!(e===this.oldScale&&Math.abs(t-this.oldTop)<1&&Math.abs(r-this.oldLeft)<1)){var a=new(Be(pe.VIEWPORT_CHANGE))(t,r,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=t,this.oldLeft=r,Ie(a)}}}translate(e,t){let r;(r=this.layerManager)==null||r.translateLayers(new Fe(e,t),this.scale);let a;(a=this.grid)==null||a.moveTo(e,t),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let t=e.length-1;t>=0;t--)e[t].queueRender();this.getTopBlocks().flatMap(t=>t.getDescendants(!1)).filter(t=>t.isInsertionMarker()).forEach(t=>t.queueRender())}highlightBlock(e,t){if(t===void 0){for(let r=0,a;a=this.highlightedBlocks[r];r++)a.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((t=t===void 0||t)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):q(this.highlightedBlocks,e),e.setHighlighted(t))}variableChangeCallback(e){switch(e.type){case pe.VAR_CREATE:case pe.VAR_DELETE:case pe.VAR_RENAME:case pe.VAR_TYPE_CHANGE:this.refreshToolboxSelection()}}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}recordDragTargets(){const e=this.componentManager.getComponents($i.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let t=0,r;r=e[t];t++){const a=r.getClientRect();a&&this.dragTargetAreas.push({component:r,clientRect:a})}}newBlock(e,t){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let t=0,r;r=this.dragTargetAreas[t];t++)if(r.clientRect.contains(e.clientX,e.clientY))return r.component;return null}onMouseDown(e){const t=this.getGesture(e);t&&t.handleWsStart(e,this)}startDrag(e,t){fc(this,e,t)}moveDrag(e){return gc(this,e)}setKeyboardMoveInProgress(e){this.keyboardMoveInProgress=e}isDragging(){return this.keyboardMoveInProgress||this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(bd.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,r=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||r){var a=D(e);if(jp)var u=e.metaKey;t&&(e.ctrlKey||u||!r)?(a=-a.y/50,t=I(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,a)):(t=this.scrollX-a.x,r=this.scrollY-a.y,e.shiftKey&&!a.x&&(t=this.scrollX-a.y,r=this.scrollY),this.scroll(t,r)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new Dt(0,0,0,0);const t=e[0].getBoundingRectangle();for(let a=1;a<e.length;a++){var r=e[a];r.isInsertionMarker&&r.isInsertionMarker()||(r=r.getBoundingRectangle(),r.top<t.top&&(t.top=r.top),r.bottom>t.bottom&&(t.bottom=r.bottom),r.left<t.left&&(t.left=r.left),r.right>t.right&&(t.right=r.right))}return t}cleanUp(){this.setResizesEnabled(!1);const e=o.getGroup$$module$build$src$core$events$utils();e||o.setGroup$$module$build$src$core$events$utils(!0);var t=this.getTopBlocks(!0),r=t.filter(B=>B.isMovable());const a=t.filter(B=>!B.isMovable()).map(B=>B.getBoundingRectangle());t=function(B){for(const Z of a)if(B.intersects(Z))return Z;return null};var u=0;const S=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const B of r){for(r=B.getBoundingRectangle(),B.moveBy(-r.left,u-r.top,["cleanup"]),B.snapToGrid(),r=B.getBoundingRectangle(),u=t(r);u!=null;)u=u.top+u.getHeight()+S,B.moveBy(0,u-r.top,["cleanup"]),B.snapToGrid(),r=B.getBoundingRectangle(),u=t(r);u=B.getRelativeToSurfaceXY().y+B.getHeightWidth().height+S}o.setGroup$$module$build$src$core$events$utils(e),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.isReadOnly()&&!this.isFlyout){var t=Bt.registry.getContextMenuOptions({workspace:this,focusedNode:this},e);this.configureContextMenu&&this.configureContextMenu(t,e);var r=e instanceof PointerEvent?new Fe(e.clientX,e.clientY):Hi(this,new Fe(5,5));Aa(e,t,this.RTL,this,r)}}updateToolbox(e){if(e=jo(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Gu(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(V(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,t,r){r=Math.pow(this.options.zoomOptions.scaleSpeed,r);const a=this.scale*r;if(this.scale!==a){a>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale/this.scale:a<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale/this.scale);var u=this.getCanvas().getCTM(),S=this.getParentSvg().createSVGPoint();S.x=e,S.y=t,S=S.matrixTransform(u.inverse()),e=S.x,t=S.y,u=u.translate(e*(1-r),t*(1-r)).scale(r),this.scrollX=u.e,this.scrollY=u.f,this.setScale(a)}}zoomCenter(e){var t=this.getMetrics();let r;this.flyout?(r=t.svgWidth?t.svgWidth/2:0,t=t.svgHeight?t.svgHeight/2:0):(r=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop),this.zoom(r,t,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var r=this.getBlocksBoundingBox(),a=NO*2,u=r.right-r.left+a;if(r=r.bottom-r.top+a,u){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),r+=this.flyout.getHeight()/this.scale):(t+=this.flyout.getWidth(),u+=this.flyout.getWidth()/this.scale)),t/=u,e/=r,o.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{o.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){Le(this.getCanvas(),"blocklyCanvasTransitioning"),Le(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){be(this.getCanvas(),"blocklyCanvasTransitioning"),be(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,r=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,r=-r-e.scrollTop,this.scroll(t,r)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,t){if(this.isMovable()){var r=e?this.getBlockById(e):null;if(r){e=r.getRelativeToSurfaceXY(),r=t?{height:r.height,width:r.width}:r.getHeightWidth();var a=this.scale;t=(e.x+(this.RTL?-1:1)*r.width/2)*a,e=(e.y+r.height/2)*a,r=this.getMetrics(),this.scroll(-(t-r.viewWidth/2),-(e-r.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.scale}getAbsoluteScale(){const e=r=>{if(r.isFlyout){let a;const u=(a=r.targetWorkspace)==null?void 0:a.getFlyout();if(u instanceof Ed)return u.getFlyoutScale()}return r.getScale()},t=(r,a)=>r.options.parentWorkspace&&r.options.parentWorkspace.getSvgGroup().contains(r.getSvgGroup())?t(r.options.parentWorkspace,a*e(r)):a*e(r);return t(this,1)}scroll(e,t){this.hideChaff(!0);const r=this.getMetrics();e=Math.min(e,-r.scrollLeft),t=Math.min(t,-r.scrollTop);const a=r.scrollTop+Math.max(0,r.scrollHeight-r.viewHeight);e=Math.max(e,-(r.scrollLeft+Math.max(0,r.scrollWidth-r.viewWidth))),t=Math.max(t,-a),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+r.scrollLeft),-(t+r.scrollTop),!1),e+=r.absoluteLeft,t+=r.absoluteTop,this.translate(e,t)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getTopComments(e=!1){return super.getTopComments(e)}getCommentById(e){return super.getCommentById(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){q(this.topBoundedElements,e)}getTopBoundedElements(e=!1){const t=[].concat(this.topBoundedElements);return e&&t.sort(this.sortByOrigin.bind(this)),t}setResizesEnabled(e){const t=!this.resizesEnabled&&e;this.resizesEnabled=e,t&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,t){if(typeof t!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,t)}getButtonCallback(e){let t;return(t=this.flyoutButtonCallbacks.get(e))!=null?t:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,t){if(typeof t!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,t)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){if(this.keyboardMoveInProgress)return e.preventDefault(),e.stopPropagation(),null;const t=e.type==="pointerdown";let r;return t&&((r=this.currentGesture_)!=null&&r.hasStarted())&&(console.warn("Tried to start the same gesture twice."),this.currentGesture_.cancel()),!this.currentGesture_&&t&&(this.currentGesture_=new bd(e,this)),this.currentGesture_}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){So(),wl(this),Jr(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents($i.Capability.AUTOHIDEABLE,!0).forEach(t=>t.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const t=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)}addClass(e){this.injectionDiv&&Le(this.injectionDiv,e)}removeClass(e){this.injectionDiv&&be(this.injectionDiv,e)}setIsReadOnly(e){super.setIsReadOnly(e),e?this.addClass("blocklyReadOnly"):this.removeClass("blocklyReadOnly")}scrollBoundsIntoView(e,t=10){if(!bd.inProgress()){var r=this.getScale(),a=this.getMetricsManager().getViewMetrics(!0);if(a=new Dt(a.top,a.top+a.height,a.left,a.left+a.width),!(e.left>=a.left&&e.top>=a.top&&e.right<=a.right&&e.bottom<=a.bottom)){e=e.clone(),e.top-=t,e.bottom+=t,e.left-=t,e.right+=t;var u=t=0;e.left<a.left?t=this.RTL?Math.min(a.left-e.left,a.right-e.right):a.left-e.left:e.right>a.right&&(t=this.RTL?a.right-e.right:Math.max(a.right-e.right,a.left-e.left)),e.top<a.top?u=a.top-e.top:e.bottom>a.bottom&&(u=Math.max(a.bottom-e.bottom,a.top-e.top)),this.scroll(this.scrollX+t*r,this.scrollY+u*r)}}}getFocusableElement(){return this.svgGroup_}getFocusableTree(){return this.isMutator&&this.options.parentWorkspace||this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(e)return null;let t;if(e=(t=this.targetWorkspace)==null?void 0:t.getFlyout(),this.isFlyout&&e){let a,u;return(u=(a=e.getContents().find(S=>(S=S.getElement(),ae(S)&&S.canBeFocused())))==null?void 0:a.getElement())!=null?u:null}let r;return(r=this.getTopBlocks(!0)[0])!=null?r:null}getNestedTrees(){const e=this.getAllBlocks().map(r=>r.getIcons()).flat().filter(r=>r instanceof o.MutatorIcon$$module$build$src$core$icons$mutator_icon&&r.bubbleIsVisible()).map(r=>{let a;return(a=r.getBubble())==null?void 0:a.getWorkspace()}).filter(r=>!!r),t=this.getFlyout(!0);return t&&e.push(t.getWorkspace()),e}searchForWorkspaceComment(e){for(const t of this.getTopComments())if(t instanceof No&&t.canBeFocused()&&t.getFocusableElement().id===e)return t}lookUpFocusableNode(e){var t;const r=(t=this.targetWorkspace)==null?void 0:t.getFlyout();if(this.isFlyout&&r){for(var a of r.getContents())if(t=a.getElement(),ae(t)&&t.canBeFocused()&&t.getFocusableElement().id===e)return t}if(a=e.indexOf("_field_"),t=e.indexOf("_connection_"),a!==-1){var u=e.substring(0,a);if(u=this.getBlockById(u)){for(var S of u.getFields())if(S.canBeFocused()&&S.getFocusableElement().id===e)return S}return null}if(t!==-1){if(u=e.substring(0,t),u=this.getBlockById(u)){for(const Z of u.getConnections_(!0))if(Z.id===e)return Z}return null}if(S=Math.max(e.indexOf(Nf),e.indexOf(Lb),e.indexOf(Mb)),S!==-1&&(S=e.substring(0,S),S=this.searchForWorkspaceComment(S))){if(e.indexOf(Nf)>-1)return S.getEditorFocusableNode();var B;return(B=S.view.getCommentBarButtons().find(Z=>Z.getFocusableElement().id.includes(e)))!=null?B:null}if((B=this.getAllBlocks(!1).find(Z=>Z.getFocusableElement().id===e))||(B=this.searchForWorkspaceComment(e)))return B;B=this.getAllBlocks().map(Z=>Z.getIcons()).flat();for(u of B){if(u.canBeFocused()&&u.getFocusableElement().id===e)return u;if(ys(u)){if((B=u.getBubble())&&B.canBeFocused()&&B.getFocusableElement().id===e)return B;if(B instanceof pd&&B.getEditor().getFocusableElement().id===e)return B.getEditor()}}return null}onTreeFocus(e,t){}onTreeBlur(e){if(this.isFlyout&&this.targetWorkspace&&!o.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()){var t=this.targetWorkspace.getToolbox();t&&e===t||GE(t)&&t.autoHide(!1)}}getNavigator(){return this.navigator}setNavigator(e){this.navigator=e}},ja=class extends ka{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.getWorkspace().id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new ja),t.varId=e.varId,t}},tg=class extends ja{constructor(e){super(e),this.type=pe.VAR_CREATE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new tg),t.varType=e.varType,t.varName=e.varName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t=t.getVariableMap(),e?t.createVariable(this.varName,this.varType,this.varId):(e=t.getVariableById(this.varId))&&t.deleteVariable(e)}};s(De.EVENT,pe.VAR_CREATE,tg);var $S=class{constructor(e,t,r,a){this.workspace=e,this.name=t,this.type=r||"",this.id=a||O()}getId(){return this.id}getName(){return this.name}setName(e){return this.name=e,this}getType(){return this.type}setType(e){return this.type=e,this}getWorkspace(){return this.workspace}save(){const e={name:this.getName(),id:this.getId()},t=this.getType();return t&&(e.type=t),e}static load(e,t){e=new this(t,e.name,e.type,e.id),t.getVariableMap().addVariable(e),Ie(new(Be(pe.VAR_CREATE))(e))}};s(De.VARIABLE_MODEL,rr,$S);var ig=class extends ja{constructor(e){super(e),this.type=pe.VAR_DELETE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new ig),t.varType=e.varType,t.varName=e.varName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t=t.getVariableMap(),e?(e=t.getVariableById(this.varId))&&t.deleteVariable(e):t.createVariable(this.varName,this.varType,this.varId)}};s(De.EVENT,pe.VAR_DELETE,ig);var ng=class extends ja{constructor(e,t){super(e),this.type=pe.VAR_RENAME,e&&(this.oldName=e.getName(),this.newName=typeof t>"u"?"":t)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new ng),t.oldName=e.oldName,t.newName=e.newName,t}run(e){var t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");t=t.getVariableMap();const r=t.getVariableById(this.varId);e?r&&t.renameVariable(r,this.newName):r&&t.renameVariable(r,this.oldName)}};s(De.EVENT,pe.VAR_RENAME,ng);var ES=class{constructor(e,t=!1){this.workspace=e,this.potentialMap=t,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(const t of e.values())this.deleteVariable(t);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,t){if(e.getName()===t)return e;var r=e.getType();r=this.getVariable(t,r);const a=this.workspace.getAllBlocks(!1);let u="";this.potentialMap||(u=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0);try{r&&r.getId()!==e.getId()?this.renameVariableWithConflict(e,t,r,a):this.renameVariableAndUses(e,t,a)}finally{this.potentialMap||o.setGroup$$module$build$src$core$events$utils(u)}return e}changeVariableType(e,t){const r=e.getType();if(r===t)return e;var a=this.variableMap.get(r);a?.delete(e.getId()),a?.size===0&&this.variableMap.delete(r),e.setType(t);let u;return a=(u=this.variableMap.get(t))!=null?u:new Map,a.set(e.getId(),e),this.variableMap.has(t)||this.variableMap.set(t,a),Ie(new(Be(pe.VAR_TYPE_CHANGE))(e,r,t)),e}renameVariableById(e,t){cn("VariableMap.renameVariableById","v12","v13","VariableMap.renameVariable");const r=this.getVariableById(e);if(!r)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(r,t)}renameVariableAndUses(e,t,r){for(this.potentialMap||Ie(new(Be(pe.VAR_RENAME))(e,t)),e.setName(t),t=0;t<r.length;t++)r[t].updateVarName(e)}renameVariableWithConflict(e,t,r,a){const u=e.getType(),S=r.getName();for(t!==S&&this.renameVariableAndUses(r,t,a),t=0;t<a.length;t++)a[t].renameVarById(e.getId(),r.getId());this.potentialMap||Ie(new(Be(pe.VAR_DELETE))(e));let B;(B=this.variableMap.get(u))==null||B.delete(e.getId())}createVariable(e,t,r){var a=this.getVariable(e,t);if(a){if(r&&a.getId()!==r)throw Error('Variable "'+e+'" is already in use and its id is "'+a.getId()+'" which conflicts with the passed in id, "'+r+'".');return a}if(r&&this.getVariableById(r))throw Error('Variable id, "'+r+'", is already in use.');if(a=r||O(),t=t||"",r=y(De.VARIABLE_MODEL,this.workspace.options,!0),!r)throw Error("No variable model is registered.");a=new r(this.workspace,e,t,a);let u;return e=(u=this.variableMap.get(t))!=null?u:new Map,e.set(a.getId(),a),this.variableMap.has(t)||this.variableMap.set(t,e),this.potentialMap||Ie(new(Be(pe.VAR_CREATE))(a)),a}addVariable(e){const t=e.getType();this.variableMap.has(t)||this.variableMap.set(t,new Map);let r;(r=this.variableMap.get(t))==null||r.set(e.getId(),e)}deleteVariable(e){const t=$a(this.workspace,e.getId());let r="";this.potentialMap||(r=o.getGroup$$module$build$src$core$events$utils())||o.setGroup$$module$build$src$core$events$utils(!0);try{for(let u=0;u<t.length;u++)t[u].dispose(!0);const a=this.variableMap.get(e.getType());a&&a.has(e.getId())&&(a.delete(e.getId()),this.potentialMap||Ie(new(Be(pe.VAR_DELETE))(e)),a.size===0&&this.variableMap.delete(e.getType()))}finally{this.potentialMap||o.setGroup$$module$build$src$core$events$utils(r)}}deleteVariableById(e){cn("VariableMap.deleteVariableById","v12","v13","Blockly.Variables.deleteVariable"),(e=this.getVariableById(e))&&o.deleteVariable$$module$build$src$core$variables(this.workspace,e)}getVariable(e,t){if(t=this.variableMap.get(t||""),!t)return null;let r;return(r=[...t.values()].find(a=>o.Names$$module$build$src$core$names.equals(a.getName(),e)))!=null?r:null}getVariableById(e){for(const t of this.variableMap.values())if(t.has(e)){let r;return(r=t.get(e))!=null?r:null}return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?[...e.values()]:[]}getTypes(){return[...this.variableMap.keys()]}getAllVariables(){let e=[];for(const t of this.variableMap.values())e=e.concat(...t.values());return e}getAllVariableNames(){cn("VariableMap.getAllVariableNames","v12","v13","Blockly.Variables.getAllVariables");const e=[];for(const t of this.variableMap.values())for(const r of t.values())e.push(r.getName());return e}getVariableUsesById(e){return cn("VariableMap.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),$a(this.workspace,e)}};s(De.VARIABLE_MAP,rr,ES);var rg=class extends to{constructor(e,t){super(t),this.type=pe.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new rg),t.isOpen=e.isOpen,t}};s(De.EVENT,pe.TRASHCAN_OPEN,rg);var TS=class extends md{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,this.workspace.options.maxTrashcanContents<=0||(e=this.workspace.copyOptionsForFlyout(),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===Lt.TOP?Lt.BOTTOM:Lt.TOP,this.flyout=new(y(De.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===Lt.RIGHT?Lt.LEFT:Lt.RIGHT,this.flyout=new(y(De.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=de(he.G,{class:"blocklyTrash"});let e;const t=String(Math.random()).substring(2);e=de(he.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup),de(he.RECT,{width:qa,height:Rd,y:Ja},e);const r=de(he.IMAGE,{width:wn.width,x:-og,height:wn.height,y:-sg,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup);return r.setAttributeNS(or,"xlink:href",this.workspace.options.pathToMedia+wn.url),e=de(he.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup),de(he.RECT,{width:qa,height:Ja},e),this.svgLid=de(he.IMAGE,{width:wn.width,x:-og,height:wn.height,y:-sg,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup),this.svgLid.setAttributeNS(or,"xlink:href",this.workspace.options.pathToMedia+wn.url),x(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),x(this.svgGroup,"pointerup",this,this.click),x(r,"pointerover",this,this.mouseOver),x(r,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){if(this.workspace.options.maxTrashcanContents>0){const e=this.flyout.createDom(he.SVG);Le(e,"blocklyTrashcanFlyout"),at(e,this.workspace.getParentSvg()),this.flyout.init(this.workspace)}this.workspace.getComponentManager().addComponent({component:this,weight:$i.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[$i.Capability.AUTOHIDEABLE,$i.Capability.DELETE_AREA,$i.Capability.DRAG_TARGET,$i.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&Ke(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(r){return JSON.parse(r)}),t=this.workspace.getParentSvg().style;t.cursor="wait",setTimeout(()=>{let r;(r=this.flyout)==null||r.show(e),t.cursor="";let a;(a=this.workspace.scrollbar)==null||a.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var t;(t=this.workspace.scrollbar)==null||t.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,t){if(this.initialized){var r=zu(this.workspace,e);e=Ku(r,new kt(qa,Rd+Ja),DO,bS,e,this.workspace),t=Yu(e,bS,r.vertical===yo.TOP?rs.DOWN:rs.UP,t),this.top=t.top,this.left=t.left;var a;(a=this.svgGroup)==null||a.setAttribute("transform","translate("+this.left+","+this.top+")");var u;(u=this.flyout)==null||u.position()}}getBoundingRectangle(){return new Dt(this.top,this.top+Rd+Ja,this.left,this.left+qa)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const t=e.top+sg-Nd;return e=e.left+og-Nd,new Dt(t,t+Ja+Rd+2*Nd,e,e+qa+2*Nd)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=wO;var t=1/(e+1);this.lidOpen+=this.isLidOpen?t:-t,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*IS),t=SS+this.lidOpen*(MO-SS),this.svgGroup&&(this.svgGroup.style.opacity=`${t}`),this.lidOpen>this.minOpenness&&this.lidOpen<1&&(this.lidTask=setTimeout(this.animateLid.bind(this),LO/e))}setLidAngle(e){const t=this.workspace.toolboxPosition===Lt.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let r;(r=this.svgLid)==null||r.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:qa-4)+","+(Ja-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*IS)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(Be(pe.TRASHCAN_OPEN))(e,this.workspace.id),Ie(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(this.workspace.options.maxTrashcanContents<=0||!W(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(kO)}}}cleanBlockJson(e){function t(r){if(r){if(delete r.id,delete r.x,delete r.y,delete r.enabled,delete r.disabledReasons,r.icons&&r.icons.comment){var a=r.icons.comment;delete a.height,delete a.width,delete a.pinned}a=r.inputs;for(var u in a){var S=a[u];const B=S.block;S=S.shadow,B&&t(B),S&&t(S)}r.next&&(u=r.next,r=u.block,u=u.shadow,r&&t(r),u&&t(u))}}return e=JSON.parse(JSON.stringify(e)),t(e),Object.assign({},{kind:"BLOCK"},e)}},qa=47,Rd=44,Ja=16,bS=20,DO=20,Nd=10,og=0,sg=32,kO=.1,LO=80,wO=4,SS=.4,MO=.8,IS=45,_u=null,pu=null,Dd=void 0,Fr={};Fr.BlockPaster=lu,Fr.copy=Nc,Fr.getLastCopiedData=Dc,Fr.getLastCopiedLocation=pp,Fr.getLastCopiedWorkspace=kc,Fr.paste=es,Fr.registry=uf,Fr.setLastCopiedData=ZE,Fr.setLastCopiedLocation=eT,Fr.setLastCopiedWorkspace=QE;var us={};us.CollapseCommentBarButton=wb,us.CommentBarButton=ad,us.CommentEditor=ld,us.CommentView=ru,us.DeleteCommentBarButton=xb,us.RenderedWorkspaceComment=No,us.WorkspaceComment=ud;var so;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(so||(so={})),vp();var ao={};ao.names=so,ao.registerCopy=Ep,ao.registerCut=Tp,ao.registerDefaultShortcuts=vp,ao.registerDelete=mp,ao.registerEscape=gp,ao.registerPaste=bp,ao.registerRedo=Ip,ao.registerUndo=Sp;var xO=class{constructor(e,t){this.procedureModelClass=e,this.parameterModelClass=t,this.priority=YT}save(e){return e=e.getProcedureMap().getProcedures().map(t=>Ap(t)),e.length?e:null}load(e,t){const r=t.getProcedureMap();for(const a of e)r.add(Op(this.procedureModelClass,this.parameterModelClass,a,t))}clear(e){e.getProcedureMap().clear()}},kd={};kd.ProcedureSerializer=xO,kd.loadProcedure=Op,kd.saveProcedure=Ap;var vS=class{constructor(){this.priority=zT}save(e){return e=e.getAllVariables().map(t=>t.save()),e.length?e:null}load(e,t){const r=M(De.VARIABLE_MODEL,rr);e.forEach(a=>{r?.load(a,t)})}clear(e){e.getVariableMap().clear()}};Al("variables",new vS);var AS={};AS.VariableSerializer=vS;var ag={};ag.load=iT,ag.save=tT;var FO={blocks:Ql,exceptions:Bs,priorities:dO,procedures:kd,registry:lf,variables:AS,workspaceComments:Gc,workspaces:ag};"Blockly"in globalThis||(globalThis.Blockly={Msg:eb});var lg="label",OS=class{load(e,t){return e=new Mn(t.getWorkspace(),t.targetWorkspace,e,!0),e.show(),new Ka(e,lg)}gapForItem(e,t){return t}disposeItem(e){e=e.getElement(),e instanceof Mn&&e.dispose()}getType(){return lg}};s(De.FLYOUT_INFLATER,lg,OS);var CS=class extends Ad{constructor(e){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,e&&(this.GRID_UNIT=e),this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+this.FIELD_BORDER_RECT_Y_PADDING*2}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&Ke(this.selectedGlowFilter),this.replacementGlowFilter&&Ke(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH,r=zn("c",[tt(25,-e),tt(71,-e),tt(t,0)]);return{height:e*.75,width:t,path:r}}makeHexagonal(){function e(r,a,u){var S=r/2;return S=S>t?t:S,u=u?-1:1,r=(a?-1:1)*r/2,eo(-u*S,r)+eo(u*S,r)}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(r){return r/=2,r>t?t:r},height(r){return r},connectionOffsetY(r){return r/2},connectionOffsetX(r){return-r},pathDown(r){return e(r,!1,!1)},pathUp(r){return e(r,!0,!1)},pathRightDown(r){return e(r,!1,!0)},pathRightUp(r){return e(r,!1,!0)}}}makeRounded(){function e(a,u,S){const B=a>r?a-r:0;a=(a>r?r:a)/2;const Z=S===u?"0":"1";return xi("a","0 0,"+Z,a,tt((S?1:-1)*a,(u?-1:1)*a))+nt("v",(u?-1:1)*B)+xi("a","0 0,"+Z,a,tt((S?-1:1)*a,(u?-1:1)*a))}const t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=t*2;return{type:this.SHAPES.ROUND,isDynamic:!0,width(a){return a/=2,a>t?t:a},height(a){return a},connectionOffsetY(a){return a/2},connectionOffsetX(a){return-a},pathDown(a){return e(a,!1,!1)},pathUp(a){return e(a,!0,!1)},pathRightDown(a){return e(a,!1,!0)},pathRightUp(a){return e(a,!1,!0)}}}makeSquared(){function e(r,a,u){r-=t*2;const S=u===a?"0":"1";return xi("a","0 0,"+S,t,tt((u?1:-1)*t,(a?-1:1)*t))+nt("v",(a?-1:1)*r)+xi("a","0 0,"+S,t,tt((u?-1:1)*t,(a?-1:1)*t))}const t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(r){return t},height(r){return r},connectionOffsetY(r){return r/2},connectionOffsetX(r){return-r},pathDown(r){return e(r,!1,!1)},pathUp(r){return e(r,!0,!1)},pathRightDown(r){return e(r,!1,!0)},pathRightUp(r){return e(r,!1,!0)}}}shapeFor(e){let t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case qe.INPUT_VALUE:case qe.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&t.includes("Boolean")?this.HEXAGONAL:t&&t.includes("Number")?this.ROUNDED:(t&&t.includes("String"),this.ROUNDED);case qe.PREVIOUS_STATEMENT:case qe.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(et){return zn("c",[tt(et*u/2,0),tt(et*u*3/4,B/2),tt(et*u,B)])+Ca([tt(et*u,S)])+zn("c",[tt(et*u/4,B/2),tt(et*u/2,B),tt(et*u,B)])+nt("h",et*a)+zn("c",[tt(et*u/2,0),tt(et*u*3/4,-(B/2)),tt(et*u,-B)])+Ca([tt(et*u,-S)])+zn("c",[tt(et*u/4,-(B/2)),tt(et*u/2,-B),tt(et*u,-B)])}const t=this.NOTCH_WIDTH,r=this.NOTCH_HEIGHT,a=t/3,u=a/3,S=r/2,B=S/2,Z=e(1),ye=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:r,pathLeft:Z,pathRight:ye}}makeInsideCorners(){const e=this.CORNER_RADIUS,t=xi("a","0 0,0",e,tt(-e,e)),r=xi("a","0 0,1",e,tt(-e,e)),a=xi("a","0 0,0",e,tt(e,e)),u=xi("a","0 0,1",e,tt(e,e));return{width:e,height:e,pathTop:t,pathBottom:a,rightWidth:e,rightHeight:e,pathTopRight:r,pathBottomRight:u}}generateSecondaryColour_(e){return Ns("#000",e,.15)||e}generateTertiaryColour_(e){return Ns("#000",e,.25)||e}createDom(e,t,r,a){super.createDom(e,t,r,a),e=de(he.DEFS,{},e),t=de(he.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),de(he.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),r=de(he.FECOMPONENTTRANSFER,{result:"outBlur"},t),de(he.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},r),de(he.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),de(he.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter=t,e=de(he.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),de(he.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=de(he.FECOMPONENTTRANSFER,{result:"outBlur"},e),de(he.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),de(he.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),de(he.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),de(he.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e,a&&(a.style.setProperty("--blocklySelectedGlowFilter",`url(#${this.selectedGlowFilterId})`),a.style.setProperty("--blocklyReplacementGlowFilter",`url(#${this.replacementGlowFilterId})`))}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableField>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text,`,`${e} .blocklyNonEditableField>g>text,`,`${e} .blocklyEditableField>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .blocklyMenuItem,`,`${e}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabledPattern > .blocklyOutlinePath {`,"fill: var(--blocklyDisabledPattern)","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}",`${e} .blocklySelected>.blocklyPath.blocklyPathSelected {`,"fill: none;","filter: var(--blocklySelectedGlowFilter);","}",`${e} .blocklyReplaceable>.blocklyPath {`,"filter: var(--blocklyReplacementGlowFilter);","}"]}},yS=class extends Od{constructor(e,t){super(e,t)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(e.height<=0)){if(oe.isSpacer(e)){const a=e.precedesStatement;var t=e.followsStatement;if(a||t){const u=this.constants_.INSIDE_CORNERS;var r=u.rightHeight;r=e.height-(a?r:0),t=t?u.pathBottomRight:"",e=r>0?nt("V",e.yPos+r):"",this.outlinePath_+=t+e+(a?u.pathTopRight:"");return}}this.outlinePath_+=nt("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Ri(e.xPos,this.info_.startY),this.outlinePath_+=nt("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=nt("V",e.baseline),this.outlinePath_+=nt("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const t=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=dn(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(t,e))}getInlineInputPath(e){const t=e.width-e.connectionWidth*2,r=e.height;return nt("h",t)+e.shape.pathRightDown(r)+nt("h",-t)+e.shape.pathUp(r)+"z"}drawStatementInput_(e){var t=e.getLastInput();const r=t.xPos+t.notchOffset+t.shape.width,a=this.constants_.INSIDE_CORNERS,u=t.shape.pathRight+nt("h",-(t.notchOffset-a.width))+a.pathTop,S=e.height-2*a.height;t=a.pathBottom+nt("h",t.notchOffset-a.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=nt("H",r)+u+nt("v",S)+t+nt("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const t=e.connectionModel;if(t.type===qe.NEXT_STATEMENT||t.type===qe.PREVIOUS_STATEMENT||t.type===qe.OUTPUT_VALUE&&!e.isDynamicShape)return super.drawConnectionHighlightPath(e);e=t.type===qe.INPUT_VALUE?dn(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):dn(e.width,-e.height/2)+e.shape.pathDown(e.height);const r=t.getSourceBlock();let a,u;return(u=(a=r.pathObject).addConnectionHighlight)==null?void 0:u.call(a,t,e,t.getOffsetInBlock(),r.RTL)}},qs=class extends ri{constructor(e,t,r,a,u,S,B){if(super(ri.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",r=Number(Mi(r)),t=Number(Mi(t)),isNaN(r)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(r<=0||t<=0)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new kt(t,r+qs.Y_PADDING),this.imageHeight=r,typeof u=="function"&&(this.clickHandler=u),e!==ri.SKIP_SETUP&&(B?this.configure_(B):(this.flipRtl=!!S,this.altText=Mi(a)||""),this.setValue(Mi(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=Mi(e.alt))}initView(){this.imageElement=de(he.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(or,"xlink:href",this.value_),this.fieldGroup_&&Le(this.fieldGroup_,"blocklyImageField"),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(or,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}isClickable(){return super.isClickable()&&!!this.clickHandler}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};qs.Y_PADDING=1,Qr("field_image",qs),qs.prototype.DEFAULT_VALUE="";var Ld=14,Za=class extends ri{set size_(e){super.size_=e}get size_(){const e=super.size_;return e.width<Ld&&(e.width=Ld),e}constructor(e,t,r){super(ri.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,e!==ri.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new Ui;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()),this.fieldGroup_&&Le(this.fieldGroup_,"blocklyInputField")}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new Ui;let t;return this.fullBlockClickTarget_=!((t=this.getConstants())==null||!t.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,t=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&ue()&&this.value_!==e&&t&&Ie(new(Be(pe.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new Ui;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.getColourTertiary())):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(be(e,"blocklyInvalidInput"),Gi(e,Pi.INVALID,!1)):(Le(e,"blocklyInvalidInput"),Gi(e,Pi.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new Ui;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,t=!1,r=!0){this.workspace_=this.sourceBlock_.workspace,!t&&this.workspace_.options.modalInputs&&(CT||Yp||Uc)?this.showPromptEditor():this.showInlineEditor(t,r)}showPromptEditor(){Zu(o.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e,t){const r=this.getSourceBlock();if(!r)throw new Ui;pc(this,r.RTL,this.widgetDispose_.bind(this),this.workspace_,t),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new Ui;o.setGroup$$module$build$src$core$events$utils(!0);const t=Ia();var r=this.getClickTarget_();if(!r)throw Error("A click target has not been set.");Le(r,"blocklyEditing"),r=document.createElement("input"),r.className="blocklyHtmlInput",r.setAttribute("spellcheck",this.spellcheck_);const a=this.workspace_.getAbsoluteScale();var u=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";return t.style.fontSize=u,r.style.fontSize=u,u=Za.BORDERRADIUS*a+"px",this.isFullBlockField()&&(u=this.getScaledBBox(),u=(u.bottom-u.top)/2+"px",e=e.getParent()?e.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),r.style.border=1*a+"px solid "+e,t.style.borderRadius=u,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*a+"px")),r.style.borderRadius=u,t.appendChild(r),r.value=r.defaultValue=this.getEditorText_(this.value_),r.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(r),r}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ue()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(Ie(new(Be(pe.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),o.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=Ia().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");be(e,"blocklyEditing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=C(e,"keydown",this,this.onHtmlInputKeyDown_),this.onInputWrapper=C(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(k(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onInputWrapper&&(k(this.onInputWrapper),this.onInputWrapper=null)}onHtmlInputKeyDown_(e){if(e.key==="Enter")Ds(this),Jr();else if(e.key==="Escape")this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),Ds(this),Jr();else if(e.key==="Tab"){e.preventDefault();var t,r=(t=this.workspace_)==null?void 0:t.getCursor();t=a=>(a instanceof Za||a instanceof ui&&a.isSimpleReporter())&&a!==this.getSourceBlock(),e=e.shiftKey?r?.getPreviousNode(this,t,!1):r?.getNextNode(this,t,!1),e=e instanceof ui&&e.isSimpleReporter()?e.getFields().next().value:e,e instanceof Za&&(Ds(this),Jr(),r=e.getSourceBlock(),e.isFullBlockField()&&r&&r instanceof ui?o.getFocusManager$$module$build$src$core$focus_manager().focusNode(r):o.getFocusManager$$module$build$src$core$focus_manager().focusNode(e),e.showEditor())}}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ue()&&this.value_!==e&&Ie(new(Be(pe.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,t=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,t)}resizeEditor_(){qr().then(()=>{const e=this.getSourceBlock();if(!e)throw new Ui;const t=Ia(),r=this.getScaledBBox();t.style.width=r.right-r.left+"px",t.style.height=r.bottom-r.top+"px";const a=r.top;t.style.left=`${e.RTL?r.right-t.offsetWidth:r.left}px`,t.style.top=`${a}px`})}repositionForWindowResize(){let e;const t=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return t instanceof ui?(Ra(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),t)||this.resizeEditor_(),!0):!1}positionTextElement_(e,t){const r=e*2+t;super.positionTextElement_(e+(r<Ld?(Ld-r)/2:0),t)}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};Za.BORDERRADIUS=4,o.FieldTextInput$$module$build$src$core$field_textinput=class extends Za{constructor(e,t,r){super(e,t,r)}initView(){super.initView(),this.fieldGroup_&&Le(this.fieldGroup_,"blocklyTextInputField")}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(Mi(e.text),void 0,e)}},Qr("field_input",o.FieldTextInput$$module$build$src$core$field_textinput),o.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",o.FieldTextInput$$module$build$src$core$field_textinput;var RS=class extends zf{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},wd=class extends vd{constructor(e,t){if(super(e,t),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;t=e.getNextBlock();)e=t;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},NS=class extends oo{constructor(e){super(e),this.width=this.height=0,this.type|=oe.getType("RIGHT_CONNECTION")}},DS=class extends Qf{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const t=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},kS=class extends hu{constructor(e,t){super(e,t),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new DS(this.constants_),this.bottomRow=new RS(this.constants_),this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=t.statementInputCount>0,this.rightSide=this.outputConnection?new NS(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,t){return t?t instanceof Lo||e instanceof cr||t instanceof cr?!0:e instanceof o.ValueInput$$module$build$src$core$inputs$value_input||e instanceof no||e instanceof Lo?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&oe.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&oe.isLeftRoundedCorner(e)&&t&&(oe.isPreviousConnection(t)||oe.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&oe.isLeftSquareCorner(e)&&t&&oe.isHat(t)||e&&oe.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,t){if(oe.isTopRow(e)&&oe.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const r=oe.isInputRow(e)&&e.hasStatement,a=oe.isInputRow(t)&&t.hasStatement;return a||r?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),a&&r?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):oe.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):oe.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,t){const r=this.width-this.startX;return oe.isInputRow(e)&&e.hasStatement||oe.isInputRow(t)&&t.hasStatement?Math.max(r,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):r}getElemCenterline_(e,t){if(e.hasStatement&&!oe.isSpacer(t)&&!oe.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(oe.isInlineInput(t)){const r=t.connectedBlock;if(r&&r.outputConnection&&r.nextConnection)return e.yPos+r.height/2}return super.getElemCenterline_(e,t)}addInput_(e,t){if((e instanceof no||e instanceof Lo)&&t.hasDummyInput&&t.align===o.Align$$module$build$src$core$inputs$align.LEFT&&e.align===o.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(t,e);else if(e instanceof cr){t.elements.push(new wd(this.constants_,e)),t.hasStatement=!0,t.align===null&&(t.align=e.align);return}super.addInput_(e,t)}addAlignmentPadding_(e,t){if(this.rightAlignedDummyInputs.get(e)){let r;for(let a=0;a<e.elements.length;a++){const u=e.elements[a];if(oe.isSpacer(u)&&(r=u),oe.isField(u)&&u.parentInput===this.rightAlignedDummyInputs.get(e))break}if(r){r.width+=t,e.width+=t;return}}super.addAlignmentPadding_(e,t)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let t=e;for(let u=2;u<this.rows.length-1;u+=2){var r=this.rows[u-1];const S=this.rows[u];var a=this.rows[u+1];if(r=u===2?!!this.topRow.hasPreviousConnection:!!r.followsStatement,a=u+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!a.precedesStatement,oe.isInputRow(S)&&S.hasStatement){S.measure();let B,Z;t=S.width-((Z=(B=S.getLastInput())==null?void 0:B.width)!=null?Z:0)+e}else if(r&&(u===2||a)&&oe.isInputRow(S)&&!S.hasStatement){a=S.xPos,r=null;for(let B=0;B<S.elements.length;B++){const Z=S.elements[B];oe.isSpacer(Z)&&(r=Z),!(r&&(oe.isField(Z)||oe.isInput(Z))&&a<t)||oe.isField(Z)&&(Z.field instanceof zs||Z.field instanceof qs)||(r.width+=t-a),a+=Z.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var t=0,r=0;r<this.rows.length;r++){const a=this.rows[r];a.yPos=t,t+=a.height}this.height=t,r=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=e.height(r),r=e.width(r),this.outputConnection.height=t,this.outputConnection.width=r,this.outputConnection.startX=r,this.outputConnection.connectionOffsetY=e.connectionOffsetY(t),this.outputConnection.connectionOffsetX=e.connectionOffsetX(r),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=r,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=r,this.width+=r+e,this.widthWithChildren+=r+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,t=0;t<this.rows.length;t++){var r=this.rows[t];if(!oe.isInputRow(r))continue;e=r.elements[r.elements.length-2];let a=this.getNegativeSpacing_(r.elements[1]),u=this.getNegativeSpacing_(e);e=a+u;const S=this.constants_.MIN_BLOCK_WIDTH+this.outputConnection.width*2;this.width-e<S&&(e=this.width-S,a=e/2,u=e/2),r.elements.unshift(new dr(this.constants_,-a)),r.elements.push(new dr(this.constants_,-u))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,t=0;t<this.rows.length;t++)r=this.rows[t],oe.isTopOrBottomRow(r)&&(r.elements[1].width-=e),r.width-=e,r.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const t=this.outputConnection.width;var r=this.outputConnection.shape.type;const a=this.constants_;if(this.inputRows.length>1)return r===a.SHAPES.ROUND?(r=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,r=this.height/2>r?r:this.height/2,t-r*(1-Math.sin(Math.acos((r-this.constants_.SMALL_PADDING)/r)))):0;if(oe.isInlineInput(e)){const u=e.connectedBlock;return e=u?u.pathObject.outputShapeType:e.shape.type,e==null||u&&u.outputConnection&&(u.statementInputCount||u.nextConnection)||r===a.SHAPES.HEXAGONAL&&r!==e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[r][e]}return oe.isField(e)?r===a.SHAPES.ROUND&&e.field instanceof o.FieldTextInput$$module$build$src$core$field_textinput?t-2.75*a.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[r][0]:oe.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let a=2;a<this.rows.length-1;a+=2){const u=this.rows[a-1],S=this.rows[a],B=this.rows[a+1];var e=a===2,t=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!B.precedesStatement;if(e?this.topRow.hasPreviousConnection:u.followsStatement){var r=S.elements[1];if(r=S.elements.length===3&&r instanceof jf&&(r.field instanceof zs||r.field instanceof qs),!e&&r)u.height-=this.constants_.SMALL_PADDING,B.height-=this.constants_.SMALL_PADDING,S.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!t)u.height+=this.constants_.SMALL_PADDING;else if(t){for(e=!1,t=0;t<S.elements.length;t++)if(r=S.elements[t],oe.isInlineInput(r)&&r.connectedBlock&&!r.connectedBlock.isShadow()&&r.connectedBlock.getHeightWidth().height>=40){e=!0;break}e&&(u.height-=this.constants_.SMALL_PADDING,B.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},LS=class extends Cd{constructor(e,t,r){super(e,t,r),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=r}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const t=e.getParent();e.isShadow()&&t&&this.svgPath.setAttribute("stroke",t.getColourTertiary());for(const r of this.outlines.values())r.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.classList.add("blocklyPathSelected"),be(this.svgPathSelected,Tn.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),be(this.svgPathSelected,Tn.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME),this.svgPathSelected.removeAttribute("tabindex"),this.svgPathSelected.removeAttribute("id"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,t){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,t){e=this.getOutlinePath(e),e.setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,de(he.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let t,r;(t=this.outlines.get(e))==null||(r=t.parentNode)==null||r.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},ug=class extends yd{constructor(e){super(e)}makeConstants_(){return new CS}makeRenderInfo_(e){return new kS(this,e)}makeDrawer_(e,t){return new yS(e,t)}makePathObject(e,t){return new LS(e,t,this.getConstants())}getConstants(){return this.constants_}};Bl("zelos",ug);var wS=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,t,r){o.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=r,r.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(t)&&(t.highlight(),this.staticConn=t)}finally{o.enable$$module$build$src$core$events$utils()}}previewConnection(e,t){if(e!==this.draggedConn||t!==this.staticConn){o.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,t)&&(this.markerConn=this.previewMarker(e,t)),this.workspace.getRenderer().shouldHighlightConnection(t)&&t.highlight(),this.draggedConn=e,this.staticConn=t}finally{o.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,t){return t.type===qe.PREVIOUS_STATEMENT||t.type===qe.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof ug)}previewMarker(e,t){const r=e.getSourceBlock(),a=this.createInsertionMarker(r),u=this.getMatchingConnection(r,a,e);if(!u)return null;a.queueRender(),qo(),u.connect(t);const S={x:t.x-u.x,y:t.y-u.y},B=u.getOffsetInBlock().clone();return qr().then(()=>{if(!a.isDeadOrDying()){o.disable$$module$build$src$core$events$utils();try{a?.positionNearConnection(u,S,B),a?.getSvgRoot().setAttribute("visibility","visible")}finally{o.enable$$module$build$src$core$events$utils()}}}),u}serializeBlockToInsertionMarker(e){const t=Tr(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!t)throw Error(`Failed to serialize source block. ${e.toDevString()}`);return t}createInsertionMarker(e){e=this.serializeBlockToInsertionMarker(e),e=Jo(e,this.workspace);for(const t of e.getDescendants(!1))t.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,t,r){if(e=e.getConnections_(!0),t=t.getConnections_(!0),e.length!==t.length)return null;for(let a=0;a<e.length;a++)if(e[a]===r)return t[a];return null}hidePreview(){o.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{o.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const t=e.getSourceBlock(),r=t.outputConnection;let a;if((a=t.previousConnection)!=null&&a.targetConnection||r!=null&&r.targetConnection)t.unplug(!0);else{let u;(u=e.targetBlock())==null||u.unplug(!1)}t.dispose()}dispose(){this.hidePreview()}};s(De.CONNECTION_PREVIEWER,rr,wS);var cs={};cs.Align=o.Align$$module$build$src$core$inputs$align,cs.DummyInput=no,cs.EndRowInput=Lo,cs.Input=Wa,cs.StatementInput=cr,cs.ValueInput=o.ValueInput$$module$build$src$core$inputs$value_input,cs.inputTypes=o.inputTypes$$module$build$src$core$inputs$input_types;var MS=!1,xS;o.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=v());var t=[];this.init(e),e=e.getTopBlocks(!0);for(let r=0,a;a=e[r];r++){let u=this.blockToCode(a);Array.isArray(u)&&(u=u[0]),u&&(a.outputConnection&&(u=this.scrubNakedValue(u),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,a)+u),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,a))),t.push(u))}return t=t.join(`
`),t=this.finish(t),t=t.replace(/^\s+\n/,""),t=t.replace(/\n\s+$/,`
`),t=t.replace(/[ \t]+\n/g,`
`)}prefixLines(e,t){return t+e.replace(/(?!\n$)\n/g,`
`+t)}allNestedComments(e){const t=[];e=e.getDescendants(!0);for(let r=0;r<e.length;r++){const a=e[r].getCommentText();a&&t.push(a)}return t.length&&t.push(""),t.join(`
`)}blockToCode(e,t){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var r=this.forBlock[e.type];if(typeof r!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(r=r.call(e,e,this),Array.isArray(r)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,r[0],t),r[1]]}if(typeof r=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,e)+r),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,r,t);if(r===null)return"";throw SyntaxError("Invalid code generated: "+r)}valueToCode(e,t,r){if(isNaN(r))throw TypeError("Expecting valid order from block: "+e.type);var a=e.getInputTargetBlock(t);if(!a&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(!a||(t=this.blockToCode(a),t===""))return"";if(!Array.isArray(t))throw TypeError(`Expecting tuple from value block: ${a.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+a.type);if(!e)return"";a=!1;var u=Math.floor(r);const S=Math.floor(t);if(u<=S&&(u!==S||u!==0&&u!==99)){for(a=!0,u=0;u<this.ORDER_OVERRIDES.length;u++)if(this.ORDER_OVERRIDES[u][0]===r&&this.ORDER_OVERRIDES[u][1]===t){a=!1;break}}return a&&(e="("+e+")"),e}statementToCode(e,t){const r=e.getInputTargetBlock(t);if(!r&&!e.getInput(t))throw ReferenceError(`Input "${t}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(r),typeof e!="string")throw TypeError("Expecting code from statement block: "+(r&&r.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e}injectId(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,t){if(!this.definitions_[e]){const r=this.nameDB_.getDistinctName(e,o.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=r,Array.isArray(t)&&(t=t.join(`
`)),t=t.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,r);let a;for(;a!==t;)a=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]}getVariableName(e){return this.getName(e,o.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,o.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,t){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,t)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,t,r){return t}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},xS={},xS.CodeGenerator=o.CodeGenerator$$module$build$src$core$generator;var cg=class extends Ed{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),r=t.getScrollMetrics(),a=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(r.top+(r.height-a.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),r=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Lt.LEFT?e.width:r.width-this.getWidth():this.toolboxPosition_===Lt.LEFT?0:r.width:this.toolboxPosition_===Lt.LEFT?0:r.width+t.left-this.getWidth()}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height;var t=this.getWidth()-this.CORNER_RADIUS;this.setBackgroundPath(t,e.height-2*this.CORNER_RADIUS),e=this.getX(),t=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,t)}}setBackgroundPath(e,t){const r=this.toolboxPosition_===Lt.RIGHT;var a=e+this.CORNER_RADIUS;a=["M "+(r?a:0)+",0"],a.push("h",r?-e:e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",Math.max(0,t)),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,r?0:1,r?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",r?e:-e),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var t=D(e);if(t.y){const r=this.workspace_.getMetricsManager(),a=r.getScrollMetrics();t=r.getViewMetrics().top-a.top+t.y;let u;(u=this.workspace_.scrollbar)==null||u.setY(t),wl(this.workspace_),Jr()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;var t=this.MARGIN;const r=this.RTL?t:t+this.tabWidth_;for(const a of e)a.getElement().moveBy(r,t),t+=a.getElement().getBoundingRectangle().getHeight()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_===Lt.LEFT?new Dt(-1e9,1e9,-1e9,t+e.width):new Dt(-1e9,1e9,t,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((t,r)=>Math.max(t,r.getElement().getBoundingRectangle().getWidth()),0);if(e+=this.MARGIN*1.5+this.tabWidth_,e*=this.workspace_.scale,e+=Fi.scrollbarThickness,this.getWidth()!==e){if(this.RTL)for(const t of this.getContents()){const r=t.getElement().getBoundingRectangle().left,a=e/this.workspace_.scale-t.getElement().getBoundingRectangle().getWidth()-this.MARGIN-this.tabWidth_;t.getElement().moveBy(a-r,0)}this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Lt.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};cg.registryName="verticalFlyout",s(De.FLYOUTS_VERTICAL_TOOLBOX,rr,cg);var FS=class extends Ed{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),r=t.getScrollMetrics(),a=t.getViewMetrics();t=t.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(r.left+(r.width-a.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const t=e.getAbsoluteMetrics(),r=e.getViewMetrics();e=e.getToolboxMetrics();const a=this.toolboxPosition_===Lt.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?a?e.height:r.height-this.getHeight():a?0:r.height:a?0:r.height+t.top-this.getHeight()}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,e=e.width-2*this.CORNER_RADIUS;var t=this.getHeight()-this.CORNER_RADIUS;this.setBackgroundPath(e,t),e=this.getX(),t=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,t)}}setBackgroundPath(e,t){const r=this.toolboxPosition_===Lt.TOP,a=["M 0,"+(r?0:this.CORNER_RADIUS)];r?(a.push("h",e+2*this.CORNER_RADIUS),a.push("v",t),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",-e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),a.push("h",e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",t),a.push("h",-e-2*this.CORNER_RADIUS)),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var t=D(e);if(t=t.x||t.y){const r=this.workspace_.getMetricsManager(),a=r.getScrollMetrics();t=r.getViewMetrics().left-a.left+t;let u;(u=this.workspace_.scrollbar)==null||u.setX(t),wl(this.workspace_),Jr()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;const t=this.MARGIN;let r=t+this.tabWidth_;this.RTL&&(e=e.reverse());for(const a of e)e=a.getElement().getBoundingRectangle(),e=this.RTL?r+e.getWidth():r,a.getElement().moveBy(e,t),r+=a.getElement().getBoundingRectangle().getWidth()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_===Lt.TOP?new Dt(-1e9,t+e.height,-1e9,1e9):new Dt(t,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((t,r)=>Math.max(t,r.getElement().getBoundingRectangle().getHeight()),0);e+=this.MARGIN*1.5,e*=this.workspace_.scale,e+=Fi.scrollbarThickness,this.getHeight()!==e&&(this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Lt.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets())}};s(De.FLYOUTS_HORIZONTAL_TOOLBOX,rr,FS);var fu=class extends bn{constructor(e,t,r,a,u){super(ri.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=fu.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new kt(0,0),e!==ri.SKIP_SETUP&&(u?this.configure_(u):this.setTypes(r,a),t&&this.setValidator(t))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new Ui;this.variable||(e=o.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}initView(){super.initView(),Le(this.fieldGroup_,"blocklyVariableField")}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new Ui;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var t=this.getSourceBlock();if(!t)throw new Ui;const r=e.getAttribute("id"),a=e.textContent,u=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=o.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,r,a,u),u!==null&&u!==t.getType())throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.getType()+", and does not match variable field that references it: "+Zr(e)+".");this.setValue(t.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.getName(),this.variable.getType()&&e.setAttribute("variabletype",this.variable.getType()),e}saveState(e){var t=this.saveLegacyState(fu);return t!==null||(this.initModel(),t={id:this.variable.getId()},e&&(t.name=this.variable.getName(),t.type=this.variable.getType())),t}loadState(e){const t=this.getSourceBlock();if(!t)throw new Ui;this.loadLegacyState(fu,e)||(e=o.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.getName():""}getVariable(){return this.variable}getDefaultType(){return this.defaultType}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var t=this.getSourceBlock();if(!t)throw new Ui;return t=o.getVariable$$module$build$src$core$variables(t.workspace,e),t?(t=t.getType(),this.typeIsAllowed(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const t=this.getSourceBlock();if(!t)throw new Ui;this.variable=o.getVariable$$module$build$src$core$variables(t.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const t=this.getVariableTypes();if(!t)return!0;for(let r=0;r<t.length;r++)if(e===t[r])return!0;return!1}getVariableTypes(){if(this.variableTypes)return this.variableTypes;if(!this.sourceBlock_||this.sourceBlock_.isDeadOrDying())return[""];let e=this.sourceBlock_.workspace.getVariableMap().getTypes();if(this.sourceBlock_.isInFlyout){const t=this.sourceBlock_.workspace.getPotentialVariableMap();if(!t)return e;e=Array.from(new Set([...e,...t.getTypes()]))}return e}setTypes(e=null,t=""){var r=this.getText();if(Array.isArray(e)){if(e.length===0)throw Error(`'variableTypes' of field variable ${r} was an empty list. If you want to include all variable types, pass 'null' instead.`);r=!1;for(let a=0;a<e.length;a++)e[a]===t&&(r=!0);if(!r)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}else if(e!==null)throw Error(`'variableTypes' was not an array or null in the definition of FieldVariable ${r}`);this.defaultType=t,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,t){if(e=t.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===xf&&this.variable){o.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===Ff&&this.variable){e=this.variable.getWorkspace(),o.deleteVariable$$module$build$src$core$variables(e,this.variable,this.sourceBlock_);return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(Mi(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let t=[];var r=this.getSourceBlock();if(r&&!r.isDeadOrDying()){r=r.workspace;const S=this.getVariableTypes();for(let B=0;B<S.length;B++){const Z=S[B],ye=r.getVariableMap().getVariablesOfType(Z);if(t=t.concat(ye),r.isFlyout){var a=void 0,u=void 0;t=t.concat((u=(a=r.getPotentialVariableMap())==null?void 0:a.getVariablesOfType(Z))!=null?u:[])}}}for(t.sort(ma),a=[],u=0;u<t.length;u++)a[u]=[t[u].getName(),t[u].getId()];return a.push([o.Msg$$module$build$src$core$msg.RENAME_VARIABLE,xf]),o.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&a.push([o.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),Ff]),a}};Qr("field_variable",fu);var dg=class extends Za{constructor(e,t,r,a,u,S){super(ri.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==ri.SKIP_SETUP&&(S?this.configure_(S):this.setConstraints(t,r,a),this.setValue(e),u&&this.setValidator(u))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,t,r){this.setMinInternal(e),this.setMaxInternal(t),this.setPrecisionInternal(r),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let t=String(this.precision_);t.includes("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const r=t.indexOf(".");this.decimalPlaces=r===-1?e?0:null:t.length-r-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return this.min_>-1/0&&(e.min=`${this.min_}`,Gi(e,Pi.VALUEMIN,this.min_)),this.max_<1/0&&(e.max=`${this.max_}`,Gi(e,Pi.VALUEMAX,this.max_)),e}initView(){super.initView(),this.fieldGroup_&&Le(this.fieldGroup_,"blocklyNumberField")}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Qr("field_number",dg),dg.prototype.DEFAULT_VALUE=0;var PS=class extends zs{constructor(e,t,r){super(String(e??""),t,r),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(Mi(e.text),void 0,e)}};Qr("field_label_serializable",PS);var Js=class extends ri{constructor(e,t,r){super(ri.SKIP_SETUP),this.SERIALIZABLE=!0,this.value_=this.value_,this.checkChar=Js.CHECK_CHAR,e!==ri.SKIP_SETUP&&(r&&this.configure_(r),this.setValue(e),t&&this.setValidator(t))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(Js);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();Le(this.fieldGroup_,"blocklyCheckboxField"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||Js.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};Js.CHECK_CHAR="✓",Qr("field_checkbox",Js),Js.prototype.DEFAULT_VALUE=!1;var BS=class{constructor(e,t){this.draggable=e,this.workspace=t,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){o.getGroup$$module$build$src$core$events$utils()||o.setGroup$$module$build$src$core$events$utils(!0),this.draggable.startDrag(e)}onDrag(e,t){this.moveDraggable(e,t),t=this.getRoot(this.draggable),br(t)&&t.setDeleteStyle(this.wouldDeleteDraggable(e,t)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const t=this.getRoot(this.draggable);if(this.dragTarget!==e){let r;(r=this.dragTarget)==null||r.onDragExit(t),e?.onDragEnter(t)}e?.onDragOver(t),this.dragTarget=e}moveDraggable(e,t){t=this.pixelsToWorkspaceUnits(t),t=Fe.sum(this.startLoc,t),this.draggable.drag(t,e)}wouldDeleteDraggable(e,t){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,$i.Capability.DELETE_AREA)?e.wouldDelete(t):!1}onDragEnd(e){const t=o.getGroup$$module$build$src$core$events$utils();var r=this.workspace.getDragTarget(e);const a=this.getRoot(this.draggable);if(r){let u;(u=this.dragTarget)==null||u.onDrop(a)}this.shouldReturnToStart(e,a)&&this.draggable.revertDrag(),(r=br(a)&&this.wouldDeleteDraggable(e,a))&&this.draggable instanceof ui&&bc(this.draggable.getRootBlock()),this.draggable.endDrag(e),r&&br(a)&&(o.setGroup$$module$build$src$core$events$utils(t),a.dispose()),o.setGroup$$module$build$src$core$events$utils(!1),!r&&ae(this.draggable)&&o.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.draggable)}getRoot(e){return e instanceof ui?e.getRootBlock():e}shouldReturnToStart(e,t){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(t):!1}pixelsToWorkspaceUnits(e){return e=new Fe(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};s(De.BLOCK_DRAGGER,rr,BS);var gu={};gu.BlockDragStrategy=Wb,gu.BubbleDragStrategy=Pb,gu.CommentDragStrategy=Db,gu.Dragger=BS;var hg=class extends to{constructor(e,t,r){super(e?e.workspace.id:void 0),this.type=pe.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=t,this.blocks=r)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new hg),t.isStart=e.isStart,t.blockId=e.blockId,t.blocks=e.blocks,t}};s(De.EVENT,pe.BLOCK_DRAG,hg);var _g=class extends Us{constructor(e,t,r,a){super(e),this.type=pe.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=t,this.oldValue=r,this.newValue=a)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new _g),t.name=e.name,t.oldValue=e.oldValue,t.newValue=e.newValue,t}isNull(){return this.oldValue===this.newValue}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(t=t.getBlockById(this.blockId),!t)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};s(De.EVENT,pe.BLOCK_FIELD_INTERMEDIATE_CHANGE,_g);var pg=class extends Us{constructor(e){super(e),this.type=pe.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new pg),t.oldParentId=e.oldParentId,t.oldInputName=e.oldInputName,e.oldCoordinate&&(r=e.oldCoordinate.split(","),t.oldCoordinate=new Fe(Number(r[0]),Number(r[1]))),t.newParentId=e.newParentId,t.newInputName=e.newInputName,e.newCoordinate&&(r=e.newCoordinate.split(","),t.newCoordinate=new Fe(Number(r[0]),Number(r[1]))),e.reason!==void 0&&(t.reason=e.reason),e.recordUndo!==void 0&&(t.recordUndo=e.recordUndo),t}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var t=e.getBlockById(this.blockId);if(!t)throw Error("The block associated with the block move event could not be found");e={};const r=t.getParent();return r?(e.parentId=r.id,(t=r.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Fe.equals(this.oldCoordinate,this.newCoordinate)}run(e){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var r=t.getBlockById(this.blockId);if(r){var a=e?this.newParentId:this.oldParentId,u=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,a){var S=t.getBlockById(a);if(!S){console.warn("Can't connect to non-existent block: "+a);return}}if(r.getParent()&&r.unplug(),e)u=r.getRelativeToSurfaceXY(),r.moveBy(e.x-u.x,e.y-u.y,this.reason);else{t=r.outputConnection,(!t||r.previousConnection&&r.previousConnection.isConnected())&&(t=r.previousConnection);let B,Z;r=(Z=t)==null?void 0:Z.type,u?(r=S.getInput(u))&&(B=r.connection):r===qe.PREVIOUS_STATEMENT&&(B=S.nextConnection),B&&t?t.connect(B):console.warn("Can't connect to non-existent input: "+u)}}else console.warn("Can't move non-existent block: "+this.blockId)}};s(De.EVENT,pe.BLOCK_MOVE,pg);var fg=class extends to{constructor(e,t,r){super(e?e.workspace.id:void 0),this.type=pe.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=t,this.bubbleType=r)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new fg),t.isOpen=e.isOpen,t.bubbleType=e.bubbleType,t.blockId=e.blockId,t}},gg;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(gg||(gg={})),s(De.EVENT,pe.BUBBLE_OPEN,fg);var lo=class extends ka{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=o.getGroup$$module$build$src$core$events$utils(),this.recordUndo=Ce())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new lo),t.commentId=e.commentId,t}static CommentCreateDeleteHelper(e,t){const r=e.getEventWorkspace_();if(t){if(!e.json)throw Error("Encountered a comment event without proper json");Ol(e.json,r)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=r.getCommentById(e.commentId))?t.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},mg=class extends lo{constructor(e,t,r){super(e),this.type=pe.COMMENT_CHANGE,e&&(this.oldContents_=typeof t>"u"?"":t,this.newContents_=typeof r>"u"?"":r)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new mg),t.oldContents_=e.oldContents,t.newContents_=e.newContents,t}isNull(){return this.oldContents_===this.newContents_}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){var r=e?this.newContents_:this.oldContents_;if(r===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");t.setText(r)}else console.warn("Can't change non-existent comment: "+this.commentId)}};s(De.EVENT,pe.COMMENT_CHANGE,mg);var $g=class extends lo{constructor(e,t){super(e),this.newCollapsed=t,this.type=pe.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new $g),t.newCollapsed=e.newCollapsed,t}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(t=t.getCommentById(this.commentId))?t.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};s(De.EVENT,pe.COMMENT_COLLAPSE,$g);var Eg=class extends lo{constructor(e){super(e),this.type=pe.COMMENT_CREATE,e&&(this.xml=xl(e),this.json=fa(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Zr(this.xml),e.json=this.json,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Eg),t.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}run(e){lo.CommentCreateDeleteHelper(this,e)}};s(De.EVENT,pe.COMMENT_CREATE,Eg);var Tg=class extends lo{constructor(e){super(e),this.type=pe.COMMENT_DELETE,e&&(this.xml=xl(e),this.json=fa(e,{addCoordinates:!0}))}run(e){lo.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Zr(this.xml),e.json=this.json,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Tg),t.xml=o.textToDom$$module$build$src$core$utils$xml(e.xml),t.json=e.json,t}};s(De.EVENT,pe.COMMENT_DELETE,Tg);var bg=class extends to{constructor(e,t){super(e?e.workspace.id:void 0),this.type=pe.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=t)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new bg),t.isStart=e.isStart,t.commentId=e.commentId,t}};s(De.EVENT,pe.COMMENT_DRAG,bg);var Sg=class extends lo{constructor(e){super(e),this.type=pe.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Sg),r=e.oldCoordinate.split(","),t.oldCoordinate_=new Fe(Number(r[0]),Number(r[1])),r=e.newCoordinate.split(","),t.newCoordinate_=new Fe(Number(r[0]),Number(r[1])),t}isNull(){return Fe.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");t.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};s(De.EVENT,pe.COMMENT_MOVE,Sg);var Ig=class extends lo{constructor(e){super(e),this.type=pe.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Ig),t.oldSize=new kt(e.oldWidth,e.oldHeight),t.newSize=new kt(e.newWidth,e.newHeight),t}isNull(){return kt.equals(this.oldSize,this.newSize)}run(e){var t=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(t=t.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");t.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};s(De.EVENT,pe.COMMENT_RESIZE,Ig);var vg=class extends to{constructor(e,t,r){super(r),this.type=pe.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=t??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new vg),t.oldItem=e.oldItem,t.newItem=e.newItem,t}};s(De.EVENT,pe.TOOLBOX_ITEM_SELECT,vg);var Ag=class extends ja{constructor(e,t,r){super(e),this.oldType=t,this.newType=r,this.type=pe.VAR_TYPE_CHANGE}toJson(){const e=super.toJson();if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");return e.oldType=this.oldType,e.newType=this.newType,e}static fromJson(e,t,r){return t=super.fromJson(e,t,r??new Ag),t.oldType=e.oldType,t.newType=e.newType,t}run(e){const t=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");const r=t.getVariableMap().getVariableById(this.varId);r&&(e?t.getVariableMap().changeVariableType(r,this.newType):t.getVariableMap().changeVariableType(r,this.oldType))}};s(De.EVENT,pe.VAR_TYPE_CHANGE,Ag);var US=class extends ka{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=pe.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};s(De.EVENT,pe.FINISHED_LOADING,US);var VS,HS,GS,WS,XS,KS,zS,YS,jS,qS,JS,ZS,QS,eI,tI,iI,nI,rI,oI,sI,aI,lI,uI,cI,ze;o.BLOCK_CHANGE$$module$build$src$core$events$events=pe.BLOCK_CHANGE,o.BLOCK_CREATE$$module$build$src$core$events$events=pe.BLOCK_CREATE,o.BLOCK_DELETE$$module$build$src$core$events$events=pe.BLOCK_DELETE,VS=pe.BLOCK_DRAG,o.BLOCK_MOVE$$module$build$src$core$events$events=pe.BLOCK_MOVE,HS=pe.BLOCK_FIELD_INTERMEDIATE_CHANGE,GS=pe.BUBBLE_OPEN,WS=pe.BLOCK_CHANGE,XS=pe.CLICK,KS=pe.COMMENT_CHANGE,zS=pe.COMMENT_CREATE,YS=pe.COMMENT_DELETE,jS=pe.COMMENT_MOVE,qS=pe.COMMENT_RESIZE,JS=pe.COMMENT_DRAG,ZS=pe.BLOCK_CREATE,QS=pe.BLOCK_DELETE,eI=pe.FINISHED_LOADING,tI=pe.BLOCK_MOVE,iI=pe.SELECTED,nI=pe.THEME_CHANGE,rI=pe.TOOLBOX_ITEM_SELECT,oI=pe.TRASHCAN_OPEN,sI=pe.UI,aI=pe.VAR_CREATE,lI=pe.VAR_DELETE,uI=pe.VAR_RENAME,cI=pe.VIEWPORT_CHANGE,ze={},ze.Abstract=ka,ze.BLOCK_CHANGE=o.BLOCK_CHANGE$$module$build$src$core$events$events,ze.BLOCK_CREATE=o.BLOCK_CREATE$$module$build$src$core$events$events,ze.BLOCK_DELETE=o.BLOCK_DELETE$$module$build$src$core$events$events,ze.BLOCK_DRAG=VS,ze.BLOCK_FIELD_INTERMEDIATE_CHANGE=HS,ze.BLOCK_MOVE=o.BLOCK_MOVE$$module$build$src$core$events$events,ze.BUBBLE_OPEN=GS,ze.BUMP_EVENTS=NT,ze.BlockBase=Us,ze.BlockChange=Vs,ze.BlockCreate=Df,ze.BlockDelete=Mf,ze.BlockDrag=hg,ze.BlockFieldIntermediateChange=_g,ze.BlockMove=pg,ze.BubbleOpen=fg,ze.BubbleType=gg,ze.CHANGE=WS,ze.CLICK=XS,ze.COMMENT_CHANGE=KS,ze.COMMENT_CREATE=zS,ze.COMMENT_DELETE=YS,ze.COMMENT_DRAG=JS,ze.COMMENT_MOVE=jS,ze.COMMENT_RESIZE=qS,ze.CREATE=ZS,ze.Click=ef,ze.ClickTarget=tf,ze.CommentBase=lo,ze.CommentChange=mg,ze.CommentCollapse=$g,ze.CommentCreate=Eg,ze.CommentDelete=Tg,ze.CommentDrag=bg,ze.CommentMove=Sg,ze.CommentResize=Ig,ze.DELETE=QS,ze.FINISHED_LOADING=eI,ze.FinishedLoading=US,ze.MOVE=tI,ze.SELECTED=iI,ze.Selected=wf,ze.THEME_CHANGE=nI,ze.TOOLBOX_ITEM_SELECT=rI,ze.TRASHCAN_OPEN=oI,ze.ThemeChange=kf,ze.ToolboxItemSelect=vg,ze.TrashcanOpen=rg,ze.UI=sI,ze.UiBase=to,ze.VAR_CREATE=aI,ze.VAR_DELETE=lI,ze.VAR_RENAME=uI,ze.VIEWPORT_CHANGE=cI,ze.VarBase=ja,ze.VarCreate=tg,ze.VarDelete=ig,ze.VarRename=ng,ze.VarTypeChange=Ag,ze.ViewportChange=Lf,ze.clearPendingUndo=te,ze.disable=o.disable$$module$build$src$core$events$utils,ze.disableOrphans=Rt,ze.enable=o.enable$$module$build$src$core$events$utils,ze.filter=ce,ze.fire=Ie,ze.fromJson=st,ze.get=Be,ze.getDescendantIds=we,ze.getGroup=o.getGroup$$module$build$src$core$events$utils,ze.getRecordUndo=Ce,ze.isEnabled=ue,ze.setGroup=o.setGroup$$module$build$src$core$events$utils,ze.setRecordUndo=o.setRecordUndo$$module$build$src$core$events$utils;var uo={};uo.BottomRow=RS,uo.ConstantProvider=CS,uo.Drawer=yS,uo.PathObject=LS,uo.RenderInfo=kS,uo.Renderer=ug,uo.RightConnectionShape=NS,uo.StatementInput=wd,uo.TopRow=DS,Xp();var en={};en.registerCleanup=Rp,en.registerCollapse=Dp,en.registerCollapseExpandBlock=Pp,en.registerComment=xp,en.registerCommentCreate=Wp,en.registerCommentDelete=Hp,en.registerCommentDuplicate=Gp,en.registerCommentOptions=hT,en.registerDefaultOptions=Xp,en.registerDelete=Up,en.registerDeleteAll=wp,en.registerDisable=Bp,en.registerDuplicate=Mp,en.registerExpand=kp,en.registerHelp=Vp,en.registerInline=Fp,en.registerRedo=yp,en.registerUndo=Cp;var Og="button",dI=class{load(e,t){return e=new Mn(t.getWorkspace(),t.targetWorkspace,e,!1),e.show(),new Ka(e,Og)}gapForItem(e,t){return t}disposeItem(e){e=e.getElement(),e instanceof Mn&&e.dispose()}getType(){return Og}};s(De.FLYOUT_INFLATER,Og,dI);var mu={};mu.Bubble=Qt,mu.MiniWorkspaceBubble=Do,mu.TextBubble=Xb,mu.TextInputBubble=pd;var PO="WORKSPACE_AT_BLOCK_CAPACITY",Cg="block",hI=class{constructor(){this.permanentlyDisabledBlocks=new Set,this.listeners=new Map,this.capacityWrapper=this.filterFlyoutBasedOnCapacity.bind(this)}load(e,t){return this.setFlyout(t),e=this.createBlock(e,t.getWorkspace()),e.isEnabled()?this.updateStateBasedOnCapacity(e):this.permanentlyDisabledBlocks.add(e),e.getDescendants(!1).forEach(r=>r.isInFlyout=!0),this.addBlockListeners(e),new Ka(e,Cg)}createBlock(e,t){return e.blockxml?(e=typeof e.blockxml=="string"?o.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,t=ks(e,t)):(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[Sr]),"x"in e&&delete e.x,"y"in e&&delete e.y,t=Ea(e,t)),t}gapForItem(e,t){let r;return e.gap?r=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?o.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,r=parseInt(e.getAttribute("gap"))),!r||isNaN(r)?t:r}disposeItem(e){e=e.getElement(),e instanceof ui&&(this.removeListeners(e.id),e.dispose(!1,!1))}removeListeners(e){let t;((t=this.listeners.get(e))!=null?t:[]).forEach(r=>k(r)),this.listeners.delete(e)}setFlyout(e){if(this.flyout!==e){if(this.flyout){let r;(r=this.flyout.targetWorkspace)==null||r.removeChangeListener(this.capacityWrapper)}this.flyout=e;var t;(t=this.flyout.targetWorkspace)==null||t.addChangeListener(this.capacityWrapper)}}updateStateBasedOnCapacity(e){let t,r;const a=(t=this.flyout)==null||(r=t.targetWorkspace)==null?void 0:r.isCapacityAvailable(h(e));for(;e;)e.setDisabledReason(!a,PO),e=e.getNextBlock()}addBlockListeners(e){const t=[];t.push(C(e.getSvgRoot(),"pointerdown",e,r=>{let a,u;const S=(a=this.flyout)==null||(u=a.targetWorkspace)==null?void 0:u.getGesture(r);S&&this.flyout&&(S.setStartBlock(e),S.handleFlyoutStart(r,this.flyout))})),t.push(x(e.getSvgRoot(),"pointermove",null,()=>{let r,a;!((r=this.flyout)==null||(a=r.targetWorkspace)==null)&&a.isDragging()||e.addSelect()})),t.push(x(e.getSvgRoot(),"pointerleave",null,()=>{let r,a;!((r=this.flyout)==null||(a=r.targetWorkspace)==null)&&a.isDragging()||e.removeSelect()})),this.listeners.set(e.id,t)}filterFlyoutBasedOnCapacity(e){!this.flyout||e&&e.type!==pe.BLOCK_CREATE&&e.type!==pe.BLOCK_DELETE||this.flyout.getWorkspace().getTopBlocks(!1).forEach(t=>{this.permanentlyDisabledBlocks.has(t)||this.updateStateBasedOnCapacity(t)})}getType(){return Cg}};s(De.FLYOUT_INFLATER,Cg,hI);var _I=class extends Ad{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},pI=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=Ri(e.xPos,this.info_.startY);for(let t=0,r;r=e.elements[t];t++)oe.isLeftSquareCorner(r)?this.steps_+=this.highlightConstants_.START_POINT:oe.isLeftRoundedCorner(r)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):oe.isPreviousConnection(r)?this.steps_+=this.notchPaths_.pathLeft:oe.isHat(r)?this.steps_+=this.startPaths_.path(this.RTL_):oe.isSpacer(r)&&r.width!==0&&(this.steps_+=nt("H",r.xPos+r.width-this.highlightOffset));this.steps_+=nt("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+nt("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const t=e.getLastInput();if(this.RTL_){const r=e.height-t.connectionHeight;this.steps_+=dn(t.xPos+t.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+nt("v",r)}else this.steps_+=dn(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const t=e.getLastInput();if(t)if(this.RTL_){const r=e.height-2*this.insideCornerPaths_.height;this.steps_+=dn(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+nt("v",r)+this.insideCornerPaths_.pathBottom(this.RTL_)+eo(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=dn(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+eo(e.width-t.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const t=e.xPos+e.width-this.highlightOffset;e instanceof Zf&&e.followsStatement&&(this.steps_+=nt("H",t)),this.RTL_&&(this.steps_+=nt("H",t),e.height>this.highlightOffset&&(this.steps_+=nt("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=nt("V",e.baseline-this.highlightOffset);else{const t=this.info_.bottomRow.elements[0];oe.isLeftSquareCorner(t)?this.steps_+=dn(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):oe.isLeftRoundedCorner(t)&&(this.steps_+=dn(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=dn(this.info_.startX,e):(this.steps_+=dn(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=nt("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,oe.isLeftRoundedCorner(e.elements[0])?this.steps_+=nt("V",this.outsideCornerPaths_.height):this.steps_+=nt("V",e.capline+this.highlightOffset))}drawInlineInput(e){const t=this.highlightOffset,r=e.xPos+e.connectionWidth;var a=e.centerline-e.height/2;const u=e.width-e.connectionWidth,S=a+t;this.RTL_?(a=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=dn(r-t,S)+nt("v",a)+this.puzzleTabPaths_.pathDown(this.RTL_)+nt("v",e)+nt("h",u)):this.inlineSteps_+=dn(e.xPos+e.width+t,S)+nt("v",e.height)+nt("h",-u)+dn(r,a+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},fI=class extends Od{constructor(e,t){super(e,t),this.highlighter_=new pI(t)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=nt("H",e.xPos+e.width)+nt("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const t=e.centerline-e.height/2;if(e.connectionModel){let r=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),e.connectionModel.setOffsetInBlock(r,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const t=e.getLastInput();if(t!=null&&t.connectionModel){let r=e.xPos+e.statementEdge+t.notchOffset;r=this.info_.RTL?r*-1:r+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(r,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const t=e.getLastInput();if(t&&t.connectionModel){let r=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(r*=-1),t.connectionModel.setOffsetInBlock(r,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const t=e.connection,r=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-r:r)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},gI=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=Ri(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,r=(1-Math.SQRT1_2)*(e+t)-t,a=Ri(r,r)+xi("a","0 0,0",e,tt(-r-t,e-r)),u=xi("a","0 0,0",e+t,tt(e+t,e+t)),S=Ri(r,-r)+xi("a","0 0,0",e+t,tt(e-r,r+t));return{width:e+t,height:e,pathTop(B){return B?a:""},pathBottom(B){return B?u:S}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,r=(1-Math.SQRT1_2)*(e-t)+t,a=Ri(r,r)+xi("a","0 0,1",e-t,tt(e-r,-r+t)),u=Ri(t,e)+xi("a","0 0,1",e-t,tt(e,-e+t)),S=-r,B=Ri(r,S)+xi("a","0 0,1",e-t,tt(-r+t,-S-e));return{height:e,topLeft(Z){return Z?a:u},bottomLeft(){return B}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,r=Ri(-2,-t+2.5+.9)+eo(e*-.45,-2.1),a=nt("v",2.5)+Ri(-e*.97,2.5)+zn("q",[tt(-e*.05,10),tt(e*.3,9.5)])+Ri(e*.67,-1.9)+nt("v",2.5),u=nt("v",-1.5)+Ri(e*-.92,-.5)+zn("q",[tt(e*-.19,-5.5),tt(0,-11)])+Ri(e*.92,1),S=Ri(-5,t-.7)+eo(e*.46,-2.1);return{width:e,height:t,pathUp(B){return B?r:u},pathDown(B){return B?a:S}}}makeNotch(){return{pathLeft:nt("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:eo(5.1,2.6)+Ri(-10.2,6.8)+eo(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,t=Ri(25,-8.7)+zn("c",[tt(29.7,-6.2),tt(57.2,-.5),tt(75,8.7)]),r=zn("c",[tt(17.8,-9.2),tt(45.3,-14.9),tt(75,-8.7)])+dn(100.5,e+.5);return{path(a){return a?t:r}}}},mI=class extends qf{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},$I=class extends vd{constructor(e,t){super(e,t),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},EI=class extends hu{constructor(e,t){super(e,t),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof cr||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,t){this.isInline&&e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new mI(this.constants_,e)),t.hasInlineInput=!0):e instanceof cr?(t.elements.push(new $I(this.constants_,e)),t.hasStatement=!0):e instanceof o.ValueInput$$module$build$src$core$inputs$value_input?(t.elements.push(new Yf(this.constants_,e)),t.hasExternalInput=!0):(e instanceof no||e instanceof Lo)&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||t.align!==null||(t.align=e.align)}addElemSpacing_(){let e=!1;for(let r=0,a;a=this.rows[r];r++)a.hasExternalInput&&(e=!0);for(let r=0,a;a=this.rows[r];r++){var t=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new dr(this.constants_,this.getInRowSpacing_(null,t[0]))),t.length){for(let u=0;u<t.length-1;u++){a.elements.push(t[u]);const S=this.getInRowSpacing_(t[u],t[u+1]);a.elements.push(new dr(this.constants_,S))}a.elements.push(t[t.length-1]),a.endsWithElemSpacer()&&(t=this.getInRowSpacing_(t[t.length-1],null),e&&a.hasDummyInput&&(t+=this.constants_.TAB_WIDTH),a.elements.push(new dr(this.constants_,t)))}}}getInRowSpacing_(e,t){if(!e)return t&&oe.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&oe.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&oe.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!oe.isInput(e)&&(!t||oe.isStatementInput(t)))return oe.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:oe.isIcon(e)?this.constants_.LARGE_PADDING*2+1:oe.isHat(e)?this.constants_.NO_PADDING:oe.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:oe.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:oe.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(oe.isInput(e)&&!t){if(oe.isExternalInput(e))return this.constants_.NO_PADDING;if(oe.isInlineInput(e))return this.constants_.LARGE_PADDING;if(oe.isStatementInput(e))return this.constants_.NO_PADDING}if(!oe.isInput(e)&&t&&oe.isInput(t)){if(oe.isField(e)&&e.isEditable){if(oe.isInlineInput(t)||oe.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(oe.isInlineInput(t)||oe.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(oe.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(oe.isIcon(e)&&t&&!oe.isInput(t))return this.constants_.LARGE_PADDING;if(oe.isInlineInput(e)&&t&&oe.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(oe.isLeftSquareCorner(e)&&t){if(oe.isHat(t))return this.constants_.NO_PADDING;if(oe.isPreviousConnection(t))return t.notchOffset;if(oe.isNextConnection(t))return t.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(oe.isLeftRoundedCorner(e)&&t){if(oe.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(oe.isNextConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return oe.isField(e)&&t&&oe.isField(t)&&e.isEditable===t.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:t&&oe.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return oe.isTopRow(e)&&oe.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:oe.isTopRow(e)||oe.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(oe.isSpacer(t))return e.yPos+t.height/2;if(oe.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,oe.isNextConnection(t)?e+t.height/2:e-t.height/2;if(oe.isTopRow(e))return oe.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let r=e.yPos;return oe.isField(t)||oe.isIcon(t)?(r+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(r+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):r=oe.isInlineInput(t)?r+t.height/2:r+e.height/2,r}alignRowElements_(){if(this.isInline){var e=0,t=new WeakMap,r=null;for(let a=this.rows.length-1,u;u=this.rows[a];a--)t.set(u,e),oe.isInputRow(u)&&(u.hasStatement&&this.alignStatementRow_(u),r&&r.hasStatement&&u.width<r.width?t.set(u,r.width):e=u.hasStatement?u.width:Math.max(e,u.width),r=u);e=0;for(let a=0,u;u=this.rows[a];a++)u.hasStatement?e=this.getDesiredRowWidth_(u):oe.isSpacer(u)?u.width=Math.max(e,t.get(u)):(r=u.width,e=Math.max(e,t.get(u))-r,e>0&&this.addAlignmentPadding_(u,e),e=u.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,t=0;for(let a=0,u;u=this.rows[a];a++){u.yPos=t,u.xPos=this.startX,t+=u.height,e=Math.max(e,u.widthWithConnectedBlocks);var r=t-this.topRow.ascenderHeight;u===this.bottomRow&&r<this.constants_.MIN_BLOCK_HEIGHT&&(r=this.constants_.MIN_BLOCK_HEIGHT-r,this.bottomRow.height+=r,t+=r),this.recordElemPositions_(u)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(r=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,r.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=t+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},TI=class extends Cd{constructor(e,t,r){super(e,t,r),this.constants=r,this.colourDark="#000000",this.svgPathDark=de(he.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=de(he.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=Ns("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){super.updateHighlighted(e),this.svgPathLight.style.display=e?"none":"inline"}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},bI=class extends yd{constructor(e){super(e),this.highlightConstants=null}init(e,t){super.init(e,t),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,t,r){super.refreshDom(e,t,r),this.getHighlightConstants().init()}makeConstants_(){return new _I}makeRenderInfo_(e){return new EI(this,e)}makeDrawer_(e,t){return new fI(e,t)}makePathObject(e,t){return new TI(e,t,this.getConstants())}makeHighlightConstants_(){return new gI(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Bl("geras",bI);var co={};co.ConstantProvider=_I,co.Drawer=fI,co.HighlightConstantProvider=gI,co.Highlighter=pI,co.InlineInput=mI,co.PathObject=TI,co.RenderInfo=EI,co.Renderer=bI,co.StatementInput=$I;var SI=class extends hu{constructor(e,t){super(e,t)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var t=0;t<this.rows.length;t++)if(this.rows[t].hasExternalInput){e=!0;break}for(t=0;t<this.rows.length;t++){const a=this.rows[t];var r=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new dr(this.constants_,this.getInRowSpacing_(null,r[0]))),r.length){for(let u=0;u<r.length-1;u++){a.elements.push(r[u]);const S=this.getInRowSpacing_(r[u],r[u+1]);a.elements.push(new dr(this.constants_,S))}a.elements.push(r[r.length-1]),a.endsWithElemSpacer()&&(r=this.getInRowSpacing_(r[r.length-1],null),e&&a.hasDummyInput&&(r+=this.constants_.TAB_WIDTH),a.elements.push(new dr(this.constants_,r)))}}}getInRowSpacing_(e,t){if(!e)return t&&oe.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&oe.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&oe.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!oe.isInput(e)&&!t)return oe.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:oe.isIcon(e)?this.constants_.LARGE_PADDING*2+1:oe.isHat(e)?this.constants_.NO_PADDING:oe.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:oe.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:oe.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(oe.isInput(e)&&!t){if(oe.isExternalInput(e))return this.constants_.NO_PADDING;if(oe.isInlineInput(e))return this.constants_.LARGE_PADDING;if(oe.isStatementInput(e))return this.constants_.NO_PADDING}if(!oe.isInput(e)&&t&&oe.isInput(t)){if(oe.isField(e)&&e.isEditable){if(oe.isInlineInput(t)||oe.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(oe.isInlineInput(t)||oe.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(oe.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(oe.isIcon(e)&&t&&!oe.isInput(t))return this.constants_.LARGE_PADDING;if(oe.isInlineInput(e)&&t&&oe.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(oe.isLeftSquareCorner(e)&&t){if(oe.isHat(t))return this.constants_.NO_PADDING;if(oe.isPreviousConnection(t)||oe.isNextConnection(t))return t.notchOffset}return oe.isLeftRoundedCorner(e)&&t?t.notchOffset-this.constants_.CORNER_RADIUS:oe.isField(e)&&t&&oe.isField(t)&&e.isEditable===t.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:t&&oe.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,t){return oe.isTopRow(e)&&oe.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:oe.isTopRow(e)||oe.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,t){if(oe.isSpacer(t))return e.yPos+t.height/2;if(oe.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,oe.isNextConnection(t)?e+t.height/2:e-t.height/2;if(oe.isTopRow(e))return oe.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;let r=e.yPos;return r=oe.isField(t)&&e.hasStatement?r+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+t.height/2):r+e.height/2}finalize_(){let e=0,t=0;for(var r=0;r<this.rows.length;r++){const u=this.rows[r];u.yPos=t,u.xPos=this.startX,t+=u.height,e=Math.max(e,u.widthWithConnectedBlocks);var a=t-this.topRow.ascenderHeight;u===this.bottomRow&&a<this.constants_.MIN_BLOCK_HEIGHT&&(a=this.constants_.MIN_BLOCK_HEIGHT-a,this.bottomRow.height+=a,t+=a),this.recordElemPositions_(u)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(r=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,r.getHeightWidth().width)),this.bottomRow.baseline=t-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=t,this.startY=this.topRow.capline}},II=class extends yd{constructor(e){super(e)}makeRenderInfo_(e){return new SI(this,e)}};Bl("thrasos",II);var yg={};yg.RenderInfo=SI,yg.Renderer=II;var BO={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},UO={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},VO=new Ks("zelos",BO,UO),HO={Classic:dd,Zelos:VO},Rg=class{constructor(e,t,r){this.id_=e.toolboxitemid||U(),this.level_=(this.parent_=r||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}getFocusableElement(){const e=this.getDiv();if(!e)throw Error("Trying to access toolbox item before DOM is initialized.");if(!(e instanceof HTMLElement))throw Error("Toolbox item div is unexpectedly not an HTML element.");return e}getFocusableTree(){return this.parentToolbox_}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}},Pr=class extends Rg{constructor(e,t,r){super(e,t,r),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategoryContainer",row:"blocklyToolboxCategory",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyToolboxCategoryIcon",label:"blocklyToolboxCategoryLabel",contents:"blocklyToolboxCategoryGroup",selected:"blocklyToolboxSelected",openicon:"blocklyToolboxCategoryIconOpen",closedicon:"blocklyToolboxCategoryIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let t=0;t<e.length;t++){const r=e[t];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(r)}}parseCategoryDef_(e){this.name_="name"in e?Mi(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),jr(this.htmlDiv_,sr.TREEITEM),Gi(this.htmlDiv_,Pi.SELECTED,!1),Gi(this.htmlDiv_,Pi.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),jr(this.iconDom_,sr.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&Gi(this.htmlDiv_,Pi.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const t=this.cssConfig_.container;return t&&Le(e,t),e}createRowContainer_(){const e=document.createElement("div");var t=this.cssConfig_.row;return t&&Le(e,t),t=`${Pr.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e}createRowContentsContainer_(){const e=document.createElement("div"),t=this.cssConfig_.rowcontentcontainer;return t&&Le(e,t),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&Le(e,t)}return e.style.display="inline-block",e}createLabelDom_(e){const t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,(e=this.cssConfig_.label)&&Le(t,e),t}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=Pr.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const t=e.categorystyle||e.categoryStyle;if((e=e.colour)&&t)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(t)return this.getColourfromStyle(t);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=Mi(e),e==null||e==="")return"";var t=Number(e);return isNaN(t)?(t=Rs(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):k_(t)}openIcon_(e){if(e){var t=this.cssConfig_.closedicon;t&&_e(e,t),(t=this.cssConfig_.openicon)&&Le(e,t)}}closeIcon_(e){if(e){var t=this.cssConfig_.openicon;t&&_e(e,t),(t=this.cssConfig_.closedicon)&&Le(e,t)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var t=this.cssConfig_.selected;if(e){const r=this.parseColour(Pr.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||r,t&&Le(this.rowDiv_,t)}else this.rowDiv_.style.backgroundColor="",t&&be(this.rowDiv_,t);Gi(this.htmlDiv_,Pi.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:vl(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){Ke(this.htmlDiv_)}};Pr.registrationName="category",Pr.nestedPadding=19,Pr.borderWidth=8,Pr.defaultBackgroundColour="#57e",ee(`
.blocklyToolboxCategory:not(.blocklyToolboxSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolbox[layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 5px 1px 0;
}

.blocklyToolbox[dir="RTL"][layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 0 1px 5px;
}

.blocklyToolboxCategory {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategory {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyToolboxCategoryIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyToolboxCategoryIconClosed {
  background-position: -32px -1px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategoryIconClosed {
  background-position: 0 -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: -32px -17px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: 0 -17px;
}

.blocklyToolboxCategoryIconOpen {
  background-position: -16px -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconOpen {
  background-position: -16px -17px;
}

.blocklyToolboxCategoryLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyToolboxCategoryLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxSelected .blocklyToolboxCategoryLabel {
  color: #fff;
}
`),s(De.TOOLBOX_ITEM,Pr.registrationName,Pr);var $u=class extends Rg{constructor(e,t){super(e,t),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const t=this.cssConfig_.container;return t&&Le(e,t),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){Ke(this.htmlDiv)}};$u.registrationName="sep",ee(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolbox[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),s(De.TOOLBOX_ITEM,$u.registrationName,$u);var Qa=class extends Pr{constructor(e,t,r){super(e,t,r),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxCategoryGroup",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const t=e.contents;if(t){this.flyoutItems_=[],e=!0;for(let r=0;r<t.length;r++){const a=t[r];!$(De.TOOLBOX_ITEM,a.kind)||a.kind.toLowerCase()===$u.registrationName&&e?(this.flyoutItems_.push(a),e=!0):(this.createToolboxItem(a),e=!1)}}}}createToolboxItem(e){let t=e.kind;t.toUpperCase()==="CATEGORY"&&Wu(e)&&(t=Qa.registrationName),e=new(R(De.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),jr(this.subcategoriesDiv_,sr.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Gi(this.htmlDiv_,Pi.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const t=this.cssConfig_.icon;t&&Le(e,t),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const t=document.createElement("div");t.style.display="none";var r=this.cssConfig_.contents;for(r&&Le(t,r),r=0;r<e.length;r++){const a=e[r];a.init();const u=a.getDiv();if(t.appendChild(u),a.getClickTarget){let S;(S=a.getClickTarget())==null||S.setAttribute("id",a.getId())}}return t}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;(t=this.parentToolbox_.getFlyout())==null||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Gi(this.htmlDiv_,Pi.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const t=this.getChildToolboxItems();for(let r=0;r<t.length;r++)t[r].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Qa.registrationName="collapsibleCategory",s(De.TOOLBOX_ITEM,Qa.registrationName,Qa);var vI=class extends md{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.height_=this.width_=0,this.flyout=null,this.contents=new Map,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const t=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_);const r=this.flyout.createDom("svg");Le(r,"blocklyToolboxFlyout"),at(r,t),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:$i.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[$i.Capability.AUTOHIDEABLE,$i.Capability.DELETE_AREA,$i.Capability.DRAG_TARGET]}),o.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!0)}createDom_(e){e=e.getParentSvg();const t=this.createContainer_();return t.id=U(),this.contentsDiv_=this.createContentsContainer_(),jr(this.contentsDiv_,sr.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),Le(e,"blocklyToolbox"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return Le(e,"blocklyToolboxCategoryGroup"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,t){e=C(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),t=C(t,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(t)}onClick_(e){if(f(e)||e.target===this.HtmlDiv)v().hideChaff(!1);else{var t=e.target.getAttribute("id");t&&(t=this.getToolboxItemById(t),t.isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),v().hideChaff(!0)}F()}onKeyDown_(e){let t=!1;switch(e.key){case"ArrowDown":t=this.selectNext();break;case"ArrowUp":t=this.selectPrevious();break;case"ArrowLeft":t=this.selectParent();break;case"ArrowRight":t=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()}createFlyout_(){const e=this.workspace_,t=e.copyOptionsForFlyout();return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?y(De.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):y(De.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)}render(e){this.toolboxDef_=e,this.contents.forEach(t=>t.dispose()),this.contents.clear(),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const t=document.createDocumentFragment();for(let r=0;r<e.length;r++)this.createToolboxItem(e[r],t);this.contentsDiv_.appendChild(t)}createToolboxItem(e,t){var r=e.kind;r.toUpperCase()==="CATEGORY"&&Wu(e)&&(r=Qa.registrationName),(r=R(De.TOOLBOX_ITEM,r.toLowerCase()))&&(e=new r(e,this),e.init(),this.addToolboxItem_(e),(r=e.getDiv())&&t.appendChild(r),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents.set(e.getId(),e),e.isCollapsible()){e=e.getChildToolboxItems();for(let t=0;t<e.length;t++)this.addToolboxItem_(e[t])}}getToolboxItems(){return[...this.contents.values()]}addStyle(e){e&&this.HtmlDiv&&Le(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&be(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const t=e.top,r=t+e.height,a=e.left;return e=a+e.width,this.toolboxPosition===Lt.TOP?new Dt(-1e7,r,-1e7,1e7):this.toolboxPosition===Lt.BOTTOM?new Dt(t,1e7,-1e7,1e7):this.toolboxPosition===Lt.LEFT?new Dt(-1e7,1e7,-1e7,e):new Dt(-1e7,1e7,a,1e7)}wouldDelete(e){return e instanceof ui?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(br(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)}getToolboxItemById(e){return this.contents.get(e)||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===Lt.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition===Lt.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_;var t=this.HtmlDiv.getBoundingClientRect();const r=this.getFlyout(),a=this.toolboxPosition===Lt.LEFT?e.scrollX+t.width+(r!=null&&r.isVisible()?r.getWidth():0):e.scrollX;t=this.toolboxPosition===Lt.TOP?e.scrollY+t.height+(r!=null&&r.isVisible()?r.getHeight():0):e.scrollY,e.translate(a,t),m(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){this.contents.forEach(e=>{e.refreshTheme&&e.refreshTheme()})}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const t=this.selectedItem_;!e&&!t||e&&!fT(e)||(this.shouldDeselectItem_(t,e)&&t!==null&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&e!==null&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent(t,e))}shouldDeselectItem_(e,t){return e!==null&&(!e.isCollapsible()||e!==t)}shouldSelectItem_(e,t){return t!==null&&t!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),Gi(this.contentsDiv_,Pi.ACTIVEDESCENDANT,"")}selectItem_(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),Gi(this.contentsDiv_,Pi.ACTIVEDESCENDANT,t.getId())}selectItemByPosition(e){(e=this.getToolboxItems()[e])&&this.setSelectedItem(e)}updateFlyout_(e,t){t&&(e!==t||t.isCollapsible())&&t.getContents().length?(this.flyout.show(t.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,t){const r=e&&e.getName();let a=t&&t.getName();e===t&&(a=null),e=new(Be(pe.TOOLBOX_ITEM_SELECT))(r,a,this.workspace_.id),Ie(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let t=e.indexOf(this.selectedItem_)+1;if(t>-1&&t<e.length){let r=e[t];for(;r&&!r.isSelectable();)r=e[++t];if(r&&r.isSelectable())return this.setSelectedItem(r),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let t=e.indexOf(this.selectedItem_)-1;if(t>-1&&t<e.length){let r=e[t];for(;r&&!r.isSelectable();)r=e[--t];if(r&&r.isSelectable())return this.setSelectedItem(r),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose(),this.contents.forEach(e=>e.dispose());for(let e=0;e<this.boundEvents_.length;e++)k(this.boundEvents_[e]);this.boundEvents_=[],this.contents.clear(),this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),Ke(this.HtmlDiv)),o.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}getFocusableElement(){if(!this.HtmlDiv)throw Error("Toolbox DOM has not yet been created.");return this.HtmlDiv}getFocusableTree(){return this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(!e||e===this){let t;return(t=this.getToolboxItems().find(r=>r.isSelectable()))!=null?t:null}return null}getNestedTrees(){return[]}lookUpFocusableNode(e){return this.getToolboxItemById(e)}onTreeFocus(e,t){e!==this?this.getSelectedItem()!==e&&this.setSelectedItem(e):this.clearSelection()}onTreeBlur(e){let t;e&&e===((t=this.flyout)==null?void 0:t.getWorkspace())||this.autoHide(!1)}};ee(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolbox {
  box-sizing: border-box;
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxCategoryGroup {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxCategoryGroup:focus {
  outline: none;
}
`),s(De.TOOLBOX,rr,vI);var GO="12.3.1",WO=qe.INPUT_VALUE,XO=qe.OUTPUT_VALUE,KO=qe.NEXT_STATEMENT,zO=qe.PREVIOUS_STATEMENT,YO=Lt.TOP,jO=Lt.BOTTOM,qO=Lt.LEFT,JO=Lt.RIGHT;Ya.prototype.newBlock=function(e,t){return new Xa(this,e,t)},Cn.prototype.newBlock=function(e,t){return new ui(this,e,t)},Ya.prototype.newComment=function(e){return new ud(this,e)},Cn.prototype.newComment=function(e){return new No(this,e)},Cn.newTrashcan=function(e){return new TS(e)},Do.prototype.newWorkspaceSvg=function(e){return new Cn(e)},o.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Pl(e),e=e[0].concat(e[1]);for(let t=0;t<e.length;t++)this.getName(e[t][0],o.Names$$module$build$src$core$names.NameType.PROCEDURE)};var fe={};return fe.Block=Xa,fe.BlockFlyoutInflater=hI,fe.BlockNavigationPolicy=Jb,fe.BlockSvg=ui,fe.Blocks=mi,fe.ButtonFlyoutInflater=dI,fe.COLLAPSED_FIELD_NAME=Kc,fe.COLLAPSED_INPUT_NAME=ql,fe.COLLAPSE_CHARS=Vb,fe.CodeGenerator=o.CodeGenerator$$module$build$src$core$generator,fe.CollapsibleToolboxCategory=Qa,fe.ComponentManager=$i,fe.Connection=Xt,fe.ConnectionChecker=gS,fe.ConnectionDB=Ga,fe.ConnectionNavigationPolicy=Zb,fe.ConnectionType=qe,fe.ContextMenu=Xs,fe.ContextMenuItems=en,fe.ContextMenuRegistry=Bt,fe.Css=of,fe.DELETE_VARIABLE_ID=Ff,fe.DeleteArea=md,fe.DragTarget=Kb,fe.DropDownDiv=vn,fe.Events=ze,fe.Extensions=Mr,fe.Field=ri,fe.FieldCheckbox=Js,fe.FieldDropdown=bn,fe.FieldImage=qs,fe.FieldLabel=zs,fe.FieldLabelSerializable=PS,fe.FieldNavigationPolicy=Qb,fe.FieldNumber=dg,fe.FieldTextInput=o.FieldTextInput$$module$build$src$core$field_textinput,fe.FieldVariable=fu,fe.Flyout=Ed,fe.FlyoutButton=Mn,fe.FlyoutButtonNavigationPolicy=Yb,fe.FlyoutItem=Ka,fe.FlyoutMetricsManager=zb,fe.FlyoutNavigationPolicy=jb,fe.FlyoutNavigator=nS,fe.FlyoutSeparator=$d,fe.FlyoutSeparatorNavigationPolicy=qb,fe.FocusManager=Tn,fe.FocusableTreeTraverser=_n,fe.Generator=o.CodeGenerator$$module$build$src$core$generator,fe.Gesture=bd,fe.Grid=Wf,fe.HorizontalFlyout=FS,fe.INPUT_VALUE=WO,fe.Input=Wa,fe.InsertionMarkerPreviewer=wS,fe.KeyboardNavigationController=oS,fe.LabelFlyoutInflater=OS,fe.LineCursor=Xf,fe.Marker=aS,fe.MarkerManager=Kf,fe.Menu=df,fe.MenuItem=Xc,fe.MetricsManager=Bf,fe.Msg=o.Msg$$module$build$src$core$msg,fe.NEXT_STATEMENT=KO,fe.Names=o.Names$$module$build$src$core$names,fe.Navigator=Hf,fe.OPPOSITE_TYPE=Ys,fe.OUTPUT_VALUE=XO,fe.Options=io,fe.PREVIOUS_STATEMENT=zO,fe.PROCEDURE_CATEGORY_NAME=Sd,fe.Procedures=On,fe.RENAME_VARIABLE_ID=xf,fe.RenderedConnection=pn,fe.Scrollbar=Fi,fe.ScrollbarPair=Gf,fe.SeparatorFlyoutInflater=rS,fe.ShortcutItems=ao,fe.ShortcutRegistry=li,fe.TOOLBOX_AT_BOTTOM=jO,fe.TOOLBOX_AT_LEFT=qO,fe.TOOLBOX_AT_RIGHT=JO,fe.TOOLBOX_AT_TOP=YO,fe.Theme=Ks,fe.ThemeManager=fS,fe.Themes=HO,fe.Toast=Ps,fe.Toolbox=vI,fe.ToolboxCategory=Pr,fe.ToolboxItem=Rg,fe.ToolboxSeparator=$u,fe.Tooltip=ar,fe.Touch=ws,fe.Trashcan=TS,fe.UnattachedFieldError=Ui,fe.VARIABLE_CATEGORY_NAME=gf,fe.VARIABLE_DYNAMIC_CATEGORY_NAME=eg,fe.VERSION=GO,fe.VariableMap=ES,fe.VariableModel=$S,fe.Variables=Bi,fe.VariablesDynamic=ls,fe.VerticalFlyout=cg,fe.WidgetDiv=wr,fe.Workspace=Ya,fe.WorkspaceAudio=mS,fe.WorkspaceDragger=sS,fe.WorkspaceNavigationPolicy=iS,fe.WorkspaceSvg=Cn,fe.Xml=An,fe.ZoomControls=KT,fe.blockAnimations=au,fe.blockRendering=ei,fe.browserEvents=vo,fe.bubbles=mu,fe.bumpObjects=gd,fe.clipboard=Fr,fe.comments=us,fe.common=Qi,fe.config=o.config$$module$build$src$core$config,fe.constants=pO,fe.defineBlocksWithJsonArray=b,fe.dialog=Ro,fe.dragging=gu,fe.fieldRegistry=cd,fe.geras=co,fe.getFocusManager=o.getFocusManager$$module$build$src$core$focus_manager,fe.getMainWorkspace=v,fe.getSelected=J,fe.hasBubble=ys,fe.hideChaff=gT,fe.icons=as,fe.inject=nT,fe.inputs=cs,fe.isCopyable=Ul,fe.isDeletable=br,fe.isDraggable=Da,fe.isIcon=J_,fe.isObservable=Ic,fe.isPaster=_T,fe.isRenderedElement=pT,fe.isSelectable=Y,fe.isSerializable=Cl,fe.isVariableBackedParameterModel=Zh,fe.keyboardNavigationController=Td,fe.layers=fO,fe.navigateBlock=kr,fe.navigateStacks=Na,fe.procedures=On,fe.registry=Io,fe.renderManagement=Yc,fe.serialization=FO,fe.setLocale=ff,fe.setParentContainer=A,fe.svgResize=m,fe.thrasos=yg,fe.uiPosition=Fs,fe.utils=Si,fe.zelos=uo,fe.__namespace__=o,fe})})(Jd)),Jd.exports}var hR=Er();const _R=xu(hR),{Block:BF,BlockFlyoutInflater:pR,BlockNavigationPolicy:UF,BlockSvg:fR,Blocks:mt,ButtonFlyoutInflater:VF,COLLAPSED_FIELD_NAME:HF,COLLAPSED_INPUT_NAME:GF,COLLAPSE_CHARS:WF,CodeGenerator:XF,CollapsibleToolboxCategory:KF,ComponentManager:zF,Connection:YF,ConnectionChecker:jF,ConnectionDB:qF,ConnectionNavigationPolicy:JF,ConnectionType:ZF,ContextMenu:QF,ContextMenuItems:gR,ContextMenuRegistry:eP,Css:mR,DELETE_VARIABLE_ID:tP,DeleteArea:iP,DragTarget:nP,DropDownDiv:rP,Events:Nu,Extensions:oP,Field:sP,FieldCheckbox:Hu,FieldDropdown:bo,FieldImage:aP,FieldLabel:lP,FieldLabelSerializable:VA,FieldNavigationPolicy:uP,FieldNumber:$R,FieldTextInput:zi,FieldVariable:cP,Flyout:dP,FlyoutButton:ER,FlyoutButtonNavigationPolicy:hP,FlyoutItem:_P,FlyoutMetricsManager:TR,FlyoutNavigationPolicy:pP,FlyoutNavigator:fP,FlyoutSeparator:gP,FlyoutSeparatorNavigationPolicy:mP,FocusManager:$P,FocusableTreeTraverser:EP,Generator:TP,Gesture:bP,Grid:SP,HorizontalFlyout:IP,INPUT_VALUE:vP,Input:AP,InsertionMarkerPreviewer:OP,KeyboardNavigationController:CP,LabelFlyoutInflater:yP,LineCursor:RP,Marker:NP,MarkerManager:DP,Menu:kP,MenuItem:LP,MetricsManager:bR,Msg:Ou,NEXT_STATEMENT:wP,Names:sv,Navigator:MP,OPPOSITE_TYPE:xP,OUTPUT_VALUE:FP,Options:PP,PREVIOUS_STATEMENT:BP,PROCEDURE_CATEGORY_NAME:UP,Procedures:SR,RENAME_VARIABLE_ID:VP,RenderedConnection:HP,Scrollbar:GP,ScrollbarPair:WP,SeparatorFlyoutInflater:XP,ShortcutItems:KP,ShortcutRegistry:zP,TOOLBOX_AT_BOTTOM:IR,TOOLBOX_AT_LEFT:av,TOOLBOX_AT_RIGHT:vR,TOOLBOX_AT_TOP:lv,Theme:HA,ThemeManager:YP,Themes:AR,Toast:jP,Toolbox:OR,ToolboxCategory:vh,ToolboxItem:qP,ToolboxSeparator:JP,Tooltip:ZP,Touch:QP,Trashcan:eB,UnattachedFieldError:tB,VARIABLE_CATEGORY_NAME:iB,VARIABLE_DYNAMIC_CATEGORY_NAME:nB,VERSION:rB,VariableMap:oB,VariableModel:sB,Variables:aB,VariablesDynamic:lB,VerticalFlyout:CR,WidgetDiv:uB,Workspace:cB,WorkspaceAudio:dB,WorkspaceDragger:hB,WorkspaceNavigationPolicy:_B,WorkspaceSvg:pB,Xml:fB,ZoomControls:gB,blockAnimations:mB,blockRendering:$B,browserEvents:EB,bubbles:TB,bumpObjects:bB,clipboard:SB,comments:IB,common:vB,config:AB,constants:OB,defineBlocksWithJsonArray:CB,dialog:yB,dragging:RB,fieldRegistry:NB,geras:DB,getFocusManager:kB,getMainWorkspace:LB,getSelected:wB,hasBubble:MB,hideChaff:xB,icons:Um,inject:yR,inputs:Nr,isCopyable:FB,isDeletable:PB,isDraggable:BB,isIcon:UB,isObservable:VB,isPaster:HB,isRenderedElement:GB,isSelectable:WB,isSerializable:XB,isVariableBackedParameterModel:KB,keyboardNavigationController:zB,layers:YB,navigateBlock:jB,navigateStacks:qB,procedures:JB,registry:_o,renderManagement:ZB,serialization:uv,setLocale:RR,setParentContainer:QB,svgResize:eU,thrasos:tU,uiPosition:iU,utils:ol,zelos:nU}=_R,Vm=HA.defineTheme("hats",{name:"hats",base:AR.Zelos,startHats:!0,categoryStyles:{json_category:{colour:"#d9534f"},extension_category:{colour:"#6c757d"},advanced_category:{colour:"#ff00ff"},browser_category:{colour:"#ff5722"},scratch_category:{colour:"#6C9BCF"},category_category:{colour:"#8e44ad"}},blockStyles:{json_blocks:{colourPrimary:"#d9534f"},advanced_blocks:{colourPrimary:"#ff00ff"},browser_blocks:{colourPrimary:"#ff5722"},scratch_blocks:{colourPrimary:"#6C9BCF"},category_blocks:{colourPrimary:"#8e44ad"}}}),NR=HA.defineTheme("hats-dark",{name:"hats-dark",base:Vm,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"#333",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0"},startHats:!0});var Zd={exports:{}},DR=Zd.exports,cv;function kR(){return cv||(cv=1,(function(i,n){(function(o,s){i.exports=s(Er())})(DR,function(o){var s=o.__namespace__,l=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),p={customContextMenu:function(v){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(J={text:s.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:E(this)},ne=this.getField("VAR").getText(),ne={text:s.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ne),enabled:!0,callback:$(this)},v.unshift(J),v.unshift(ne));else{if(this.type==="variables_get_dynamic")var V="variables_set_dynamic",J=s.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else V="variables_get_dynamic",J=s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ne=this.getField("VAR");V={type:V,fields:{VAR:ne.saveState(!0)}},v.push({enabled:this.workspace.remainingCapacity()>0,text:J.replace("%1",ne.getText()),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,V)})}},onchange:function(v){v=this.getFieldValue("VAR"),v=s.getVariable$$module$build$src$core$variables(this.workspace,v),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(v.getType()):this.getInput("VALUE").connection.setCheck(v.getType())}},E=function(v){return function(){const V=v.workspace,J=v.getField("VAR").getVariable();s.renameVariable$$module$build$src$core$variables(V,J)}},$=function(v){return function(){const V=v.getField("VAR").getVariable();V&&s.deleteVariable$$module$build$src$core$variables(V.getWorkspace(),V,v)}};s.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",p),s.defineBlocks$$module$build$src$core$common(l);var R={blocks:l},M=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),L={customContextMenu:function(v){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(J={text:s.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:y(this)},ne=this.getField("VAR").getText(),ne={text:s.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",ne),enabled:!0,callback:N(this)},v.unshift(J),v.unshift(ne));else{if(this.type==="variables_get")var V="variables_set",J=s.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else V="variables_get",J=s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var ne=this.getField("VAR");V={type:V,fields:{VAR:ne.saveState(!0)}},v.push({enabled:this.workspace.remainingCapacity()>0,text:J.replace("%1",ne.getText()),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,V)})}}},y=function(v){return function(){const V=v.workspace,J=v.getField("VAR").getVariable();s.renameVariable$$module$build$src$core$variables(V,J)}},N=function(v){return function(){const V=v.getField("VAR").getVariable();V&&s.deleteVariable$$module$build$src$core$variables(V.getWorkspace(),V,v)}};s.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",L),s.defineBlocks$$module$build$src$core$common(M);var P={blocks:M},F=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),K={init:function(){this.WHERE_OPTIONS_1=[[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const v=V=>{const J=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+V]});return J.setValidator(function(ne){const Ne=this.getValue();ne=ne==="FROM_START"||ne==="FROM_END",ne!==(Ne==="FROM_START"||Ne==="FROM_END")&&this.getSourceBlock().updateAt_(V,ne)}),J};this.appendDummyInput("WHERE1_INPUT").appendField(v(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(v(2),"WHERE2"),this.appendDummyInput("AT2"),s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");var V=this.getInput("AT1")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return v.setAttribute("at1",`${V}`),V=this.getInput("AT2")instanceof s.ValueInput$$module$build$src$core$inputs$value_input,v.setAttribute("at2",`${V}`),v},domToMutation:function(v){const V=v.getAttribute("at1")==="true";v=v.getAttribute("at2")==="true",this.updateAt_(1,V),this.updateAt_(2,v)},updateAt_:function(v,V){this.removeInput("AT"+v),this.removeInput("ORDINAL"+v,!0),V?(this.appendValueInput("AT"+v).setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+v).appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+v),v===2&&s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),v===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};F.text_getSubstring=K,F.text_changeCase={init:function(){const v=[[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:v}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},F.text_trim={init:function(){const v=[[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[s.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:v}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(s.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},F.text_print={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var g={updateType_:function(v){this.outputConnection.setCheck(v==="NUMBER"?"Number":"String")},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");return v.setAttribute("type",this.getFieldValue("TYPE")),v},domToMutation:function(v){this.updateType_(v.getAttribute("type"))}};F.text_prompt_ext=Object.assign({},g,{init:function(){var v=[[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),v=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:v}),v.setValidator(V=>{this.updateType_(V)}),this.appendValueInput("TEXT").appendField(v,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),F.text_prompt=Object.assign({},g,{init:function(){this.mixin(d);var v=[[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(s.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),v=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:v}),v.setValidator(V=>{this.updateType_(V)}),this.appendDummyInput().appendField(v,"TYPE").appendField(this.newQuote_(!0)).appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:s.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),F.text_count={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},F.text_replace={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},F.text_reverse={init:function(){this.jsonInit({message0:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:s.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var d={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(v){for(let V=0,J;J=this.inputList[V];V++)for(let ne=0,Ne;Ne=J.fieldRow[ne];ne++)if(v===Ne.name){J.insertFieldAt(ne,this.newQuote_(!0)),J.insertFieldAt(ne+2,this.newQuote_(!1));return}console.warn('field named "'+v+'" not found in '+this.toDevString())},newQuote_:function(v){return v=this.RTL?!v:v,s.fromJson$$module$build$src$core$field_registry({type:"field_image",src:v?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:v?"“":"”"})}},C=function(){this.mixin(d),this.quoteField_("TEXT")},x={itemCount_:0,mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");return v.setAttribute("items",`${this.itemCount_}`),v},domToMutation:function(v){this.itemCount_=parseInt(v.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(v){this.itemCount_=v.itemCount,this.updateShape_()},decompose:function(v){const V=v.newBlock("text_create_join_container");V.initSvg();let J=V.getInput("STACK").connection;for(let ne=0;ne<this.itemCount_;ne++){const Ne=v.newBlock("text_create_join_item");Ne.initSvg(),J.connect(Ne.previousConnection),J=Ne.nextConnection}return V},compose:function(v){var V=v.getInputTargetBlock("STACK");for(v=[];V;)V.isInsertionMarker()||v.push(V.valueConnection_),V=V.getNextBlock();for(V=0;V<this.itemCount_;V++){const J=this.getInput("ADD"+V).connection.targetConnection;J&&!v.includes(J)&&J.disconnect()}for(this.itemCount_=v.length,this.updateShape_(),V=0;V<this.itemCount_;V++){let J;(J=v[V])==null||J.reconnect(this,"ADD"+V)}},saveConnections:function(v){v=v.getInputTargetBlock("STACK");let V=0;for(;v;){if(v.isInsertionMarker()){v=v.getNextBlock();continue}const J=this.getInput("ADD"+V);v.valueConnection_=J&&J.connection.targetConnection,v=v.getNextBlock(),V++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var v=0;v<this.itemCount_;v++)if(!this.getInput("ADD"+v)){const V=this.appendValueInput("ADD"+v).setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT);v===0&&V.appendField(s.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(v=this.itemCount_;this.getInput("ADD"+v);v++)this.removeInput("ADD"+v)}},k=function(){this.mixin(d),this.itemCount_=2,this.updateShape_(),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};s.register$$module$build$src$core$extensions("text_append_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var H=function(){this.setTooltip(()=>s.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},f={isAt_:!1,mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");return v.setAttribute("at",`${this.isAt_}`),v},domToMutation:function(v){v=v.getAttribute("at")!=="false",this.updateAt_(v)},updateAt_:function(v){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),v&&(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=v}},I=function(){this.getField("WHERE").setValidator(function(v){v=v==="FROM_START"||v==="FROM_END";const V=this.getSourceBlock();v!==V.isAt_&&V.updateAt_(v)}),this.updateAt_(!0),this.setTooltip(()=>{var v=this.getFieldValue("WHERE");let V=s.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(v==="FROM_START"||v==="FROM_END")&&(v=v==="FROM_START"?s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(V+="  "+v.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),V})};s.register$$module$build$src$core$extensions("text_indexOf_tooltip",H),s.register$$module$build$src$core$extensions("text_quotes",C),s.registerMixin$$module$build$src$core$extensions("quote_image_mixin",d),s.registerMutator$$module$build$src$core$extensions("text_join_mutator",x,k),s.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",f,I),s.defineBlocks$$module$build$src$core$common(F);var D={blocks:F},U={},O={setStatements_:function(v){this.hasStatements_!==v&&(v?(this.appendStatementInput("STACK").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=v)},updateParams_:function(){let v="";this.arguments_.length&&(v=s.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),s.disable$$module$build$src$core$events$utils();try{this.setFieldValue(v,"PARAMS")}finally{s.enable$$module$build$src$core$events$utils()}},mutationToDom:function(v){const V=s.createElement$$module$build$src$core$utils$xml("mutation");v&&V.setAttribute("name",this.getFieldValue("NAME"));for(let J=0;J<this.argumentVarModels_.length;J++){const ne=s.createElement$$module$build$src$core$utils$xml("arg"),Ne=this.argumentVarModels_[J];ne.setAttribute("name",Ne.getName()),ne.setAttribute("varid",Ne.getId()),v&&this.paramIds_&&ne.setAttribute("paramId",this.paramIds_[J]),V.appendChild(ne)}return this.hasStatements_||V.setAttribute("statements","false"),V},domToMutation:function(v){this.arguments_=[],this.argumentVarModels_=[];for(let J=0,ne;ne=v.childNodes[J];J++)if(ne.nodeName.toLowerCase()==="arg"){var V=ne;const Ne=V.getAttribute("name");V=V.getAttribute("varid")||V.getAttribute("varId"),this.arguments_.push(Ne),V=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,V,Ne,""),V!==null?this.argumentVarModels_.push(V):console.log(`Failed to create a variable named "${Ne}", ignoring.`)}this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(v.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const v=Object.create(null);if(this.argumentVarModels_.length){v.params=[];for(let V=0;V<this.argumentVarModels_.length;V++)v.params.push({name:this.argumentVarModels_[V].getName(),id:this.argumentVarModels_[V].getId()})}return this.hasStatements_||(v.hasStatements=!1),v},loadExtraState:function(v){if(this.arguments_=[],this.argumentVarModels_=[],v.params)for(let J=0;J<v.params.length;J++){var V=v.params[J];V=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,V.id,V.name,""),this.arguments_.push(V.getName()),this.argumentVarModels_.push(V)}this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(v.hasStatements!==!1)},decompose:function(v){const V=s.createElement$$module$build$src$core$utils$xml("block");V.setAttribute("type","procedures_mutatorcontainer");var J=s.createElement$$module$build$src$core$utils$xml("statement");J.setAttribute("name","STACK"),V.appendChild(J);for(let Ne=0;Ne<this.arguments_.length;Ne++){const _=s.createElement$$module$build$src$core$utils$xml("block");_.setAttribute("type","procedures_mutatorarg");var ne=s.createElement$$module$build$src$core$utils$xml("field");ne.setAttribute("name","NAME");const A=s.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Ne]);ne.appendChild(A),_.appendChild(ne),ne=s.createElement$$module$build$src$core$utils$xml("next"),_.appendChild(ne),J.appendChild(_),J=ne}return v=s.domToBlock$$module$build$src$core$xml(V,v),this.type==="procedures_defreturn"?v.setFieldValue(this.hasStatements_,"STATEMENTS"):v.removeInput("STATEMENT_INPUT"),s.mutateCallers$$module$build$src$core$procedures(this),v},compose:function(v){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let V=v.getInputTargetBlock("STACK");for(;V&&!V.isInsertionMarker();){var J=V.getFieldValue("NAME");this.arguments_.push(J),J=this.workspace.getVariable(J,""),this.argumentVarModels_.push(J),this.paramIds_.push(V.id),V=V.nextConnection&&V.nextConnection.targetBlock()}if(this.updateParams_(),s.mutateCallers$$module$build$src$core$procedures(this),v=v.getFieldValue("STATEMENTS"),v!==null&&(v=v==="TRUE",this.hasStatements_!==v))if(v){this.setStatements_(!0);var ne;(ne=this.statementConnection_)==null||ne.reconnect(this,"STACK"),this.statementConnection_=null}else ne=this.getInput("STACK").connection,(this.statementConnection_=ne.targetConnection)&&(ne=ne.targetBlock(),ne.unplug(),ne.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(v,V){var J=this.workspace.getVariableById(v);if(J.getType()===""){J=J.getName(),V=this.workspace.getVariableById(V);var ne=!1;for(let Ne=0;Ne<this.argumentVarModels_.length;Ne++)this.argumentVarModels_[Ne].getId()===v&&(this.arguments_[Ne]=V.getName(),this.argumentVarModels_[Ne]=V,ne=!0);ne&&(this.displayRenamedVar_(J,V.getName()),s.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(v){const V=v.getName();let J=!1,ne;for(let Ne=0;Ne<this.argumentVarModels_.length;Ne++)this.argumentVarModels_[Ne].getId()===v.getId()&&(ne=this.arguments_[Ne],this.arguments_[Ne]=V,J=!0);J&&(this.displayRenamedVar_(ne,V),s.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(v,V){this.updateParams_();var J=this.getIcon(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(J&&J.bubbleIsVisible()){J=J.getWorkspace().getAllBlocks(!1);for(let ne=0,Ne;Ne=J[ne];ne++)Ne.type==="procedures_mutatorarg"&&s.Names$$module$build$src$core$names.equals(v,Ne.getFieldValue("NAME"))&&Ne.setFieldValue(V,"NAME")}},customContextMenu:function(v){if(!this.isInFlyout){var V=this.getFieldValue("NAME"),J={type:this.callType_,extraState:{name:V,params:this.arguments_}};if(v.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",V),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,J)}),!this.isCollapsed())for(V=0;V<this.argumentVarModels_.length;V++){J=this.argumentVarModels_[V];const ne={type:"variables_get",fields:{VAR:{name:J.getName(),id:J.getId(),type:J.getType()}}};v.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",J.getName()),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,ne)})}}}};U.procedures_defnoreturn=Object.assign({},O,{init:function(){var v=s.findLegalName$$module$build$src$core$procedures("",this);v=s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:v}),v.setValidator(s.rename$$module$build$src$core$procedures),v.setSpellcheck(!1),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(v,"NAME").appendField("","PARAMS"),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),U.procedures_defreturn=Object.assign({},O,{init:function(){var v=s.findLegalName$$module$build$src$core$procedures("",this);v=s.fromJson$$module$build$src$core$field_registry({type:"field_input",text:v}),v.setValidator(s.rename$$module$build$src$core$procedures),v.setSpellcheck(!1),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(v,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT).appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var X={init:function(){this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(s.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};U.procedures_mutatorcontainer=X;var W=class extends s.FieldTextInput$$module$build$src$core$field_textinput{constructor(){super(...arguments),this.editingInteractively=!1}showEditor_(v){super.showEditor_(v),this.editingInteractively=!0,this.editingVariable=void 0}onFinishEditing_(v){super.onFinishEditing_(v),this.editingInteractively=!1}},re={init:function(){const v=new W(s.DEFAULT_ARG$$module$build$src$core$procedures,this.validator_);this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(v,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1},validator_:function(v){var V=this.getSourceBlock();const J=V.workspace.getRootWorkspace();if(v=v.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!v)return null;const ne=(V.workspace.targetWorkspace||V.workspace).getAllBlocks(!1),Ne=v.toLowerCase();for(let _=0;_<ne.length;_++){if(ne[_].id===this.getSourceBlock().id)continue;const A=ne[_].getFieldValue("NAME");if(A&&A.toLowerCase()===Ne)return null}return V.isInFlyout||((V=J.getVariable(v,""))&&V.getName()!==v&&J.renameVariableById(V.getId(),v),V||(this.editingInteractively?this.editingVariable?J.renameVariableById(this.editingVariable.getId(),v):this.editingVariable=J.createVariable(v,""):J.createVariable(v,""))),v}};U.procedures_mutatorarg=re;var se="DISABLED_PROCEDURE_DEFINITION",Ue={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(v,V){s.Names$$module$build$src$core$names.equals(v,this.getProcedureCall())&&(this.setFieldValue(V,"NAME"),this.setTooltip((this.outputConnection?s.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:s.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",V)))},setProcedureParameters_:function(v,V){var J=s.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((J=(J=J&&J.getIcon(s.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&J.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),v.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=V;else{if(V.length!==v.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Ne=0;Ne<this.arguments_.length;Ne++){var ne=this.getInput("ARG"+Ne);ne&&(ne=ne.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Ne]]=ne,J&&ne&&!V.includes(this.quarkIds_[Ne])&&(ne.disconnect(),ne.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(v),this.argumentVarModels_=[],v=0;v<this.arguments_.length;v++)J=s.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[v],""),this.argumentVarModels_.push(J);if(this.updateShape_(),this.quarkIds_=V){for(V=0;V<this.arguments_.length;V++)if(v=this.quarkIds_[V],v in this.quarkConnections_){let Ne;(Ne=this.quarkConnections_[v])!=null&&Ne.reconnect(this,"ARG"+V)||delete this.quarkConnections_[v]}}}},updateShape_:function(){for(var v=0;v<this.arguments_.length;v++){var V=this.getField("ARGNAME"+v);if(V){s.disable$$module$build$src$core$events$utils();try{V.setValue(this.arguments_[v])}finally{s.enable$$module$build$src$core$events$utils()}}else V=s.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[v]}),this.appendValueInput("ARG"+v).setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT).appendField(V,"ARGNAME"+v)}for(v=this.arguments_.length;this.getInput("ARG"+v);v++)this.removeInput("ARG"+v);(v=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||v.appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&v.removeField("WITH"))},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");v.setAttribute("name",this.getProcedureCall());for(let V=0;V<this.arguments_.length;V++){const J=s.createElement$$module$build$src$core$utils$xml("arg");J.setAttribute("name",this.arguments_[V]),v.appendChild(J)}return v},domToMutation:function(v){var V=v.getAttribute("name");this.renameProcedure(this.getProcedureCall(),V),V=[];const J=[];for(let ne=0,Ne;Ne=v.childNodes[ne];ne++)Ne.nodeName.toLowerCase()==="arg"&&(V.push(Ne.getAttribute("name")),J.push(Ne.getAttribute("paramId")));this.setProcedureParameters_(V,J)},saveExtraState:function(){const v=Object.create(null);return v.name=this.getProcedureCall(),this.arguments_.length&&(v.params=this.arguments_),v},loadExtraState:function(v){if(this.renameProcedure(this.getProcedureCall(),v.name),v=v.params){const V=[];V.length=v.length,V.fill(null),this.setProcedureParameters_(v,V)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(v){if(this.workspace&&!this.workspace.isFlyout&&v.recordUndo)if(v.type===s.BLOCK_CREATE$$module$build$src$core$events$events&&v.ids.includes(this.id)){var V=this.getProcedureCall(),J=s.getDefinition$$module$build$src$core$procedures(V,this.workspace);if(!J||J.type===this.defType_&&JSON.stringify(J.getVars())===JSON.stringify(this.arguments_)||(J=null),J)J.isEnabled()||(this.setDisabledReason(!0,se),this.setWarningText(s.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",V)));else{s.setGroup$$module$build$src$core$events$utils(v.group),v=s.createElement$$module$build$src$core$utils$xml("xml"),V=s.createElement$$module$build$src$core$utils$xml("block"),V.setAttribute("type",this.defType_),J=this.getRelativeToSurfaceXY();var ne=J.y+s.config$$module$build$src$core$config.snapRadius*2;V.setAttribute("x",`${J.x+s.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),V.setAttribute("y",`${ne}`),J=this.mutationToDom(),V.appendChild(J),J=s.createElement$$module$build$src$core$utils$xml("field"),J.setAttribute("name","NAME"),ne=this.getProcedureCall();const Ne=s.findLegalName$$module$build$src$core$procedures(ne,this);ne!==Ne&&this.renameProcedure(ne,Ne),J.appendChild(s.createTextNode$$module$build$src$core$utils$xml(ne)),V.appendChild(J),v.appendChild(V),s.domToWorkspace$$module$build$src$core$xml(v,this.workspace),s.setGroup$$module$build$src$core$events$utils(!1)}}else v.type===s.BLOCK_DELETE$$module$build$src$core$events$events?(V=this.getProcedureCall(),s.getDefinition$$module$build$src$core$procedures(V,this.workspace)||(s.setGroup$$module$build$src$core$events$utils(v.group),this.dispose(!0),s.setGroup$$module$build$src$core$events$utils(!1))):v.type===s.BLOCK_CHANGE$$module$build$src$core$events$events&&v.element==="disabled"&&(V=this.getProcedureCall(),(ne=s.getDefinition$$module$build$src$core$procedures(V,this.workspace))&&ne.id===v.blockId&&((J=s.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),s.setGroup$$module$build$src$core$events$utils(v.group),v=ne.isEnabled(),this.setDisabledReason(!v,se),this.setWarningText(v?null:s.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",V)),s.setGroup$$module$build$src$core$events$utils(J)))},customContextMenu:function(v){if(this.workspace.isMovable()){var V=this.getProcedureCall(),J=this.workspace;v.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const ne=s.getDefinition$$module$build$src$core$procedures(V,J);ne&&(J.centerOnBlock(ne.id),s.getFocusManager$$module$build$src$core$focus_manager().focusNode(ne))}})}}};U.procedures_callnoreturn=Object.assign({},Ue,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),U.procedures_callreturn=Object.assign({},Ue,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var me="UNPARENTED_IFRETURN",Se={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");return v.setAttribute("value",String(Number(this.hasReturnValue_))),v},domToMutation:function(v){this.hasReturnValue_=v.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(v){if(!(this.workspace.isDragging&&this.workspace.isDragging()||v.type!==s.BLOCK_MOVE$$module$build$src$core$events$events&&v.type!==s.BLOCK_CREATE$$module$build$src$core$events$events)){v=!1;var V=this;do{if(this.FUNCTION_TYPES.includes(V.type)){v=!0;break}V=V.getSurroundParent()}while(V);if(v?(V.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):V.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(s.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(s.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{s.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!v,me)}finally{s.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};U.procedures_ifreturn=Se,s.defineBlocks$$module$build$src$core$common(U);var xe={blocks:U},Ce=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),Ie={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};s.register$$module$build$src$core$extensions("math_op_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Ie));var je={mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation"),V=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return v.setAttribute("divisor_input",String(V)),v},domToMutation:function(v){v=v.getAttribute("divisor_input")==="true",this.updateShape_(v)},updateShape_:function(v){const V=this.getInput("DIVISOR");v?V||this.appendValueInput("DIVISOR").setCheck("Number"):V&&this.removeInput("DIVISOR")}},Ve=function(){this.getField("PROPERTY").setValidator(function(v){v=v==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(v)})};s.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",je,Ve),s.register$$module$build$src$core$extensions("math_change_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Me={updateType_:function(v){v==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");return v.setAttribute("op",this.getFieldValue("OP")),v},domToMutation:function(v){if(v=v.getAttribute("op"),v===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(v)}},ce=function(){this.getField("OP").setValidator((function(v){this.updateType_(v)}).bind(this))};s.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",Me,ce),s.defineBlocks$$module$build$src$core$common(Ce);var te={blocks:Ce},ue=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),ge={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};s.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",ge));var we={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};s.register$$module$build$src$core$extensions("controls_flow_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",we));var st={customContextMenu:function(v){if(!this.isInFlyout){var V=this.getField("VAR"),J=V.getVariable().getName();this.isCollapsed()||J===null||(V={type:"variables_get",fields:{VAR:V.saveState(!0)}},v.push({enabled:!0,text:s.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",J),callback:s.callbackFactory$$module$build$src$core$contextmenu(this,V)}))}}};s.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",st),s.register$$module$build$src$core$extensions("controls_for_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),s.register$$module$build$src$core$extensions("controls_forEach_tooltip",s.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var Be=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),Rt="CONTROL_FLOW_NOT_IN_LOOP",de={getSurroundLoop:function(){let v=this;do{if(Be.has(v.type))return v;v=v.getSurroundParent()}while(v);return null},onchange:function(v){const V=this.workspace;if(V.isDragging&&!V.isDragging()&&(v.type===s.BLOCK_MOVE$$module$build$src$core$events$events||v.type===s.BLOCK_CREATE$$module$build$src$core$events$events)&&(v=!!this.getSurroundLoop(),this.setWarningText(v?null:s.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{s.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!v,Rt)}finally{s.setRecordUndo$$module$build$src$core$events$utils(!0)}}};s.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",de),s.defineBlocks$$module$build$src$core$common(ue);var Le={blocks:ue,loopTypes:Be},_e=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),be={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};s.register$$module$build$src$core$extensions("logic_op_tooltip",s.buildTooltipForDropdown$$module$build$src$core$extensions("OP",be));var We={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const v=s.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&v.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&v.setAttribute("else","1"),v},domToMutation:function(v){this.elseifCount_=parseInt(v.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(v.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const v=Object.create(null);return this.elseifCount_&&(v.elseIfCount=this.elseifCount_),this.elseCount_&&(v.hasElse=!0),v},loadExtraState:function(v){this.elseifCount_=v.elseIfCount||0,this.elseCount_=v.hasElse?1:0,this.updateShape_()},decompose:function(v){const V=v.newBlock("controls_if_if");V.initSvg();let J=V.nextConnection;for(let ne=1;ne<=this.elseifCount_;ne++){const Ne=v.newBlock("controls_if_elseif");Ne.initSvg(),J.connect(Ne.previousConnection),J=Ne.nextConnection}return this.elseCount_&&(v=v.newBlock("controls_if_else"),v.initSvg(),J.connect(v.previousConnection)),V},compose:function(v){v=v.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const V=[null],J=[null];let ne=null;for(;v;){if(!v.isInsertionMarker())switch(v.type){case"controls_if_elseif":this.elseifCount_++,V.push(v.valueConnection_),J.push(v.statementConnection_);break;case"controls_if_else":this.elseCount_++,ne=v.statementConnection_;break;default:throw TypeError("Unknown block type: "+v.type)}v=v.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(V,J,ne)},saveConnections:function(v){v=v.nextConnection.targetBlock();let V=1;for(;v;){if(!v.isInsertionMarker())switch(v.type){case"controls_if_elseif":var J=this.getInput("IF"+V);const ne=this.getInput("DO"+V);v.valueConnection_=J&&J.connection.targetConnection,v.statementConnection_=ne&&ne.connection.targetConnection,V++;break;case"controls_if_else":J=this.getInput("ELSE"),v.statementConnection_=J&&J.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+v.type)}v=v.getNextBlock()}},rebuildShape_:function(){const v=[null],V=[null];let J=null;this.getInput("ELSE")&&(J=this.getInput("ELSE").connection.targetConnection);for(let ne=1;this.getInput("IF"+ne);ne++){const Ne=this.getInput("IF"+ne),_=this.getInput("DO"+ne);v.push(Ne.connection.targetConnection),V.push(_.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(v,V,J)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var v=1;this.getInput("IF"+v);v++)this.removeInput("IF"+v),this.removeInput("DO"+v);for(v=1;v<=this.elseifCount_;v++)this.appendValueInput("IF"+v).setCheck("Boolean").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+v).appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(s.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(v,V,J){for(let ne=1;ne<=this.elseifCount_;ne++){let Ne;(Ne=v[ne])==null||Ne.reconnect(this,"IF"+ne);let _;(_=V[ne])==null||_.reconnect(this,"DO"+ne)}J?.reconnect(this,"ELSE")}};s.registerMutator$$module$build$src$core$extensions("controls_if_mutator",We,null,["controls_if_elseif","controls_if_else"]);var Ke=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return s.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};s.register$$module$build$src$core$extensions("controls_if_tooltip",Ke);var at={onchange:function(v){this.prevBlocks_||(this.prevBlocks_=[null,null]);var V=this.getInputTargetBlock("A");const J=this.getInputTargetBlock("B");V&&J&&!this.workspace.connectionChecker.doTypeChecks(V.outputConnection,J.outputConnection)&&(s.setGroup$$module$build$src$core$events$utils(v.group),v=this.prevBlocks_[0],v!==V&&(V.unplug(),!v||v.isDisposed()||v.isShadow()||this.getInput("A").connection.connect(v.outputConnection)),V=this.prevBlocks_[1],V!==J&&(J.unplug(),!V||V.isDisposed()||V.isShadow()||this.getInput("B").connection.connect(V.outputConnection)),this.bumpNeighbours(),s.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},ct=function(){this.mixin(at)};s.register$$module$build$src$core$extensions("logic_compare",ct);var Ht={prevParentConnection_:null,onchange:function(v){const V=this.getInputTargetBlock("THEN"),J=this.getInputTargetBlock("ELSE"),ne=this.outputConnection.targetConnection;if((V||J)&&ne)for(let Ne=0;Ne<2;Ne++){const _=Ne===1?V:J;_&&!_.workspace.connectionChecker.doTypeChecks(_.outputConnection,ne)&&(s.setGroup$$module$build$src$core$events$utils(v.group),ne===this.prevParentConnection_?(this.unplug(),ne.getSourceBlock().bumpNeighbours()):(_.unplug(),_.bumpNeighbours()),s.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=ne}};s.registerMixin$$module$build$src$core$extensions("logic_ternary",Ht),s.defineBlocks$$module$build$src$core$common(_e);var pt={blocks:_e},St=s.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Et={init:function(){this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new s.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");return v.setAttribute("items",String(this.itemCount_)),v},domToMutation:function(v){if(v=v.getAttribute("items"),!v)throw new TypeError("element did not have items");this.itemCount_=parseInt(v,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(v){this.itemCount_=v.itemCount,this.updateShape_()},decompose:function(v){const V=v.newBlock("lists_create_with_container");V.initSvg();let J=V.getInput("STACK").connection;for(let ne=0;ne<this.itemCount_;ne++){const Ne=v.newBlock("lists_create_with_item");if(Ne.initSvg(),!Ne.previousConnection)throw Error("itemBlock has no previousConnection");J.connect(Ne.previousConnection),J=Ne.nextConnection}return V},compose:function(v){var V=v.getInputTargetBlock("STACK");for(v=[];V;)V.isInsertionMarker()||v.push(V.valueConnection_),V=V.getNextBlock();for(V=0;V<this.itemCount_;V++){const J=this.getInput("ADD"+V).connection.targetConnection;J&&!v.includes(J)&&J.disconnect()}for(this.itemCount_=v.length,this.updateShape_(),V=0;V<this.itemCount_;V++){let J;(J=v[V])==null||J.reconnect(this,"ADD"+V)}},saveConnections:function(v){v=v.getInputTargetBlock("STACK");let V=0;for(;v;){if(v.isInsertionMarker()){v=v.getNextBlock();continue}const J=this.getInput("ADD"+V);let ne;v.valueConnection_=(ne=J)==null?void 0:ne.connection.targetConnection,v=v.getNextBlock(),V++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var v=0;v<this.itemCount_;v++)if(!this.getInput("ADD"+v)){const V=this.appendValueInput("ADD"+v).setAlign(s.Align$$module$build$src$core$inputs$align.RIGHT);v===0&&V.appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(v=this.itemCount_;this.getInput("ADD"+v);v++)this.removeInput("ADD"+v)}};St.lists_create_with=Et;var dt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};St.lists_create_with_container=dt;var T={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};St.lists_create_with_item=T;var ae={init:function(){var v=[[s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),v=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:v}),!v)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(v,"END"),this.setInputsInline(!0),this.setTooltip(()=>s.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};St.lists_indexOf=ae;var Y={init:function(){var v=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),v=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:v}),v.setValidator(function(V){V=V==="REMOVE",this.getSourceBlock().updateStatement_(V)}),this.appendValueInput("VALUE").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(v,"MODE").appendField("","SPACE"),v=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),v.setValidator(function(V){const J=this.getValue();V=V==="FROM_START"||V==="FROM_END",V!==(J==="FROM_START"||J==="FROM_END")&&this.getSourceBlock().updateAt_(V)}),this.appendDummyInput().appendField(v,"WHERE"),this.appendDummyInput("AT"),s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const V=this.getFieldValue("MODE"),J=this.getFieldValue("WHERE");let ne="";switch(V+" "+J){case"GET FROM_START":case"GET FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(J==="FROM_START"||J==="FROM_END")&&(ne+="  "+(J==="FROM_START"?s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ne})},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");v.setAttribute("statement",String(!this.outputConnection));const V=this.getInput("AT")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return v.setAttribute("at",String(V)),v},domToMutation:function(v){const V=v.getAttribute("statement")==="true";this.updateStatement_(V),v=v.getAttribute("at")!=="false",this.updateAt_(v)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(v){v.isStatement?this.updateStatement_(!0):typeof v=="string"&&this.domToMutation(s.textToDom$$module$build$src$core$utils$xml(v))},updateStatement_:function(v){v!==!this.outputConnection&&(this.unplug(!0,!0),v?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(v){this.removeInput("AT"),this.removeInput("ORDINAL",!0),v?(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};St.lists_getIndex=Y;var Te={init:function(){var v=[[s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[s.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),v=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:v}),this.appendDummyInput().appendField(v,"MODE").appendField("","SPACE"),v=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),v.setValidator(function(V){const J=this.getValue();V=V==="FROM_START"||V==="FROM_END",V!==(J==="FROM_START"||J==="FROM_END")&&this.getSourceBlock().updateAt_(V)}),this.appendDummyInput().appendField(v,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const V=this.getFieldValue("MODE"),J=this.getFieldValue("WHERE");let ne="";switch(V+" "+J){case"SET FROM_START":case"SET FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":ne=s.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(J==="FROM_START"||J==="FROM_END")&&(ne+="  "+s.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),ne})},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation"),V=this.getInput("AT")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return v.setAttribute("at",String(V)),v},domToMutation:function(v){v=v.getAttribute("at")!=="false",this.updateAt_(v)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(v){this.removeInput("AT"),this.removeInput("ORDINAL",!0),v?(this.appendValueInput("AT").setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};St.lists_setIndex=Te;var ke={init:function(){this.WHERE_OPTIONS_1=[[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const v=V=>{const J=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+V]});return J.setValidator(function(ne){const Ne=this.getValue();ne=ne==="FROM_START"||ne==="FROM_END",ne!==(Ne==="FROM_START"||Ne==="FROM_END")&&this.getSourceBlock().updateAt_(V,ne)}),J};this.appendDummyInput("WHERE1_INPUT").appendField(v(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(v(2),"WHERE2"),this.appendDummyInput("AT2"),s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");var V=this.getInput("AT1")instanceof s.ValueInput$$module$build$src$core$inputs$value_input;return v.setAttribute("at1",String(V)),V=this.getInput("AT2")instanceof s.ValueInput$$module$build$src$core$inputs$value_input,v.setAttribute("at2",String(V)),v},domToMutation:function(v){const V=v.getAttribute("at1")==="true";v=v.getAttribute("at2")==="true",this.updateAt_(1,V),this.updateAt_(2,v)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(v,V){this.removeInput("AT"+v),this.removeInput("ORDINAL"+v,!0),V?(this.appendValueInput("AT"+v).setCheck("Number"),s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+v).appendField(s.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+v),v===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),s.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};St.lists_getSublist=ke,St.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},St.lists_split={init:function(){const v=s.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[s.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!v)throw Error("field_dropdown not found");v.setValidator(V=>{this.updateType_(V)}),this.setHelpUrl(s.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(v,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(s.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const V=this.getFieldValue("MODE");if(V==="SPLIT")return s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(V==="JOIN")return s.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+V)})},updateType_:function(v){if(this.getFieldValue("MODE")!==v){const V=this.getInput("INPUT").connection;V.setShadowDom(null);const J=V.targetBlock();J&&(V.disconnect(),J.isShadow()?J.dispose(!1):this.bumpNeighbours())}v==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const v=s.createElement$$module$build$src$core$utils$xml("mutation");return v.setAttribute("mode",this.getFieldValue("MODE")),v},domToMutation:function(v){this.updateType_(v.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function(v){this.updateType_(v.mode)}},s.defineBlocks$$module$build$src$core$common(St);var ve={blocks:St},Xe=Object.assign({},St,_e,ue,Ce,U,F,M,l),le={blocks:Xe,lists:ve,logic:pt,loops:Le,math:te,procedures:xe,texts:D,variables:P,variablesDynamic:R};return le.__namespace__=s,le})})(Zd)),Zd.exports}var LR=kR();const wR=xu(LR),{blocks:rU,lists:oU,logic:sU,loops:aU,math:lU,procedures:uU,texts:cU,variables:dU,variablesDynamic:hU}=wR;var Qd={exports:{}},MR=Qd.exports,dv;function xR(){return dv||(dv=1,(function(i,n){(function(o,s){i.exports=s()})(MR,function(){var o=o||{Msg:Object.create(null)};return o.Msg.ADD_COMMENT="Add Comment",o.Msg.ALT_KEY="Alt",o.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",o.Msg.CHANGE_VALUE_TITLE="Change value:",o.Msg.CHROME_OS="ChromeOS",o.Msg.CLEAN_UP="Clean up Blocks",o.Msg.CLOSE="Close",o.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",o.Msg.COLLAPSE_ALL="Collapse Blocks",o.Msg.COLLAPSE_BLOCK="Collapse Block",o.Msg.COLOUR_BLEND_COLOUR1="colour 1",o.Msg.COLOUR_BLEND_COLOUR2="colour 2",o.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",o.Msg.COLOUR_BLEND_RATIO="ratio",o.Msg.COLOUR_BLEND_TITLE="blend",o.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",o.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",o.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",o.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",o.Msg.COLOUR_RANDOM_TITLE="random colour",o.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",o.Msg.COLOUR_RGB_BLUE="blue",o.Msg.COLOUR_RGB_GREEN="green",o.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",o.Msg.COLOUR_RGB_RED="red",o.Msg.COLOUR_RGB_TITLE="colour with",o.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",o.Msg.COMMAND_KEY="⌘ Command",o.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",o.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",o.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",o.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",o.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",o.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",o.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",o.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",o.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",o.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",o.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",o.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",o.Msg.CONTROLS_IF_MSG_ELSE="else",o.Msg.CONTROLS_IF_MSG_ELSEIF="else if",o.Msg.CONTROLS_IF_MSG_IF="if",o.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",o.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",o.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",o.Msg.CONTROLS_REPEAT_INPUT_DO="do",o.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",o.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",o.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",o.Msg.CONTROL_KEY="Ctrl",o.Msg.COPY_SHORTCUT="Copy",o.Msg.CUT_SHORTCUT="Cut",o.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",o.Msg.DELETE_BLOCK="Delete Block",o.Msg.DELETE_VARIABLE="Delete the '%1' variable",o.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",o.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",o.Msg.DIALOG_CANCEL="Cancel",o.Msg.DIALOG_OK="OK",o.Msg.DISABLE_BLOCK="Disable Block",o.Msg.DUPLICATE_BLOCK="Duplicate",o.Msg.DUPLICATE_COMMENT="Duplicate Comment",o.Msg.EDIT_BLOCK_CONTENTS="Edit Block contents",o.Msg.ENABLE_BLOCK="Enable Block",o.Msg.EXPAND_ALL="Expand Blocks",o.Msg.EXPAND_BLOCK="Expand Block",o.Msg.EXTERNAL_INPUTS="External Inputs",o.Msg.HELP="Help",o.Msg.HELP_PROMPT="Press %1 for help on keyboard controls",o.Msg.INLINE_INPUTS="Inline Inputs",o.Msg.KEYBOARD_NAV_CONSTRAINED_MOVE_HINT="Use the arrow keys to move, then %1 to accept the position",o.Msg.KEYBOARD_NAV_COPIED_HINT="Copied. Press %1 to paste.",o.Msg.KEYBOARD_NAV_CUT_HINT="Cut. Press %1 to paste.",o.Msg.KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT="Hold %1 and use arrow keys to move freely, then %2 to accept the position",o.Msg.LINUX="Linux",o.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",o.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",o.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",o.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",o.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",o.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",o.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",o.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",o.Msg.LISTS_GET_INDEX_FIRST="first",o.Msg.LISTS_GET_INDEX_FROM_END="# from end",o.Msg.LISTS_GET_INDEX_FROM_START="#",o.Msg.LISTS_GET_INDEX_GET="get",o.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",o.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",o.Msg.LISTS_GET_INDEX_LAST="last",o.Msg.LISTS_GET_INDEX_RANDOM="random",o.Msg.LISTS_GET_INDEX_REMOVE="remove",o.Msg.LISTS_GET_INDEX_TAIL="",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",o.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",o.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",o.Msg.LISTS_GET_SUBLIST_END_LAST="to last",o.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",o.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",o.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",o.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",o.Msg.LISTS_GET_SUBLIST_TAIL="",o.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",o.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",o.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",o.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",o.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",o.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",o.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",o.Msg.LISTS_INLIST="in list",o.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",o.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",o.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",o.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",o.Msg.LISTS_LENGTH_TITLE="length of %1",o.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",o.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",o.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",o.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",o.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",o.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",o.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",o.Msg.LISTS_SET_INDEX_INPUT_TO="as",o.Msg.LISTS_SET_INDEX_INSERT="insert at",o.Msg.LISTS_SET_INDEX_SET="set",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",o.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",o.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",o.Msg.LISTS_SORT_ORDER_DESCENDING="descending",o.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",o.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",o.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",o.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",o.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",o.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",o.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",o.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",o.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",o.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",o.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",o.Msg.LOGIC_BOOLEAN_FALSE="false",o.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",o.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",o.Msg.LOGIC_BOOLEAN_TRUE="true",o.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",o.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",o.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",o.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",o.Msg.LOGIC_NEGATE_TITLE="not %1",o.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",o.Msg.LOGIC_NULL="null",o.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",o.Msg.LOGIC_NULL_TOOLTIP="Returns null.",o.Msg.LOGIC_OPERATION_AND="and",o.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",o.Msg.LOGIC_OPERATION_OR="or",o.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",o.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",o.Msg.LOGIC_TERNARY_CONDITION="test",o.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",o.Msg.LOGIC_TERNARY_IF_FALSE="if false",o.Msg.LOGIC_TERNARY_IF_TRUE="if true",o.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",o.Msg.MAC_OS="macOS",o.Msg.MATH_ADDITION_SYMBOL="+",o.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",o.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",o.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",o.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",o.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",o.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",o.Msg.MATH_CHANGE_TITLE="change %1 by %2",o.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",o.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",o.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).",o.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",o.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",o.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",o.Msg.MATH_DIVISION_SYMBOL="÷",o.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",o.Msg.MATH_IS_EVEN="is even",o.Msg.MATH_IS_NEGATIVE="is negative",o.Msg.MATH_IS_ODD="is odd",o.Msg.MATH_IS_POSITIVE="is positive",o.Msg.MATH_IS_PRIME="is prime",o.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",o.Msg.MATH_IS_WHOLE="is whole",o.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",o.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2",o.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",o.Msg.MATH_MULTIPLICATION_SYMBOL="×",o.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",o.Msg.MATH_NUMBER_TOOLTIP="A number.",o.Msg.MATH_ONLIST_HELPURL="",o.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",o.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",o.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",o.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",o.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",o.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",o.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",o.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",o.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",o.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",o.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",o.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",o.Msg.MATH_POWER_SYMBOL="^",o.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",o.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",o.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",o.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",o.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",o.Msg.MATH_ROUND_OPERATOR_ROUND="round",o.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",o.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",o.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",o.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",o.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",o.Msg.MATH_SINGLE_OP_ROOT="square root",o.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",o.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",o.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",o.Msg.MATH_SUBTRACTION_SYMBOL="-",o.Msg.MATH_TRIG_ACOS="acos",o.Msg.MATH_TRIG_ASIN="asin",o.Msg.MATH_TRIG_ATAN="atan",o.Msg.MATH_TRIG_COS="cos",o.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",o.Msg.MATH_TRIG_SIN="sin",o.Msg.MATH_TRIG_TAN="tan",o.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",o.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",o.Msg.MOVE_BLOCK="Move Block",o.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",o.Msg.NEW_NUMBER_VARIABLE="Create number variable...",o.Msg.NEW_STRING_VARIABLE="Create string variable...",o.Msg.NEW_VARIABLE="Create variable...",o.Msg.NEW_VARIABLE_TITLE="New variable name:",o.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",o.Msg.OPTION_KEY="⌥ Option",o.Msg.ORDINAL_NUMBER_SUFFIX="",o.Msg.PASTE_SHORTCUT="Paste",o.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",o.Msg.PROCEDURES_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",o.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",o.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",o.Msg.PROCEDURES_CREATE_DO="Create '%1'",o.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",o.Msg.PROCEDURES_DEFNORETURN_DO="",o.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",o.Msg.PROCEDURES_DEFNORETURN_TITLE="to",o.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",o.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFRETURN_RETURN="return",o.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",o.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",o.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",o.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",o.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",o.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",o.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",o.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",o.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",o.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",o.Msg.REDO="Redo",o.Msg.REMOVE_COMMENT="Remove Comment",o.Msg.RENAME_VARIABLE="Rename variable...",o.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",o.Msg.SHORTCUTS_CODE_NAVIGATION="Code navigation",o.Msg.SHORTCUTS_EDITING="Editing",o.Msg.SHORTCUTS_GENERAL="General",o.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_APPEND_TITLE="to %1 append text %2",o.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",o.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",o.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",o.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",o.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",o.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",o.Msg.TEXT_CHARAT_FIRST="get first letter",o.Msg.TEXT_CHARAT_FROM_END="get letter # from end",o.Msg.TEXT_CHARAT_FROM_START="get letter #",o.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",o.Msg.TEXT_CHARAT_LAST="get last letter",o.Msg.TEXT_CHARAT_RANDOM="get random letter",o.Msg.TEXT_CHARAT_TAIL="",o.Msg.TEXT_CHARAT_TITLE="in text %1 %2",o.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",o.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",o.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",o.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",o.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",o.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",o.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",o.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",o.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",o.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",o.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",o.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",o.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",o.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",o.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",o.Msg.TEXT_GET_SUBSTRING_TAIL="",o.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",o.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",o.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",o.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",o.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",o.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",o.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",o.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",o.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",o.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",o.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",o.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",o.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_LENGTH_TITLE="length of %1",o.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",o.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",o.Msg.TEXT_PRINT_TITLE="print %1",o.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",o.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",o.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",o.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",o.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",o.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",o.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",o.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",o.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",o.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",o.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",o.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",o.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",o.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",o.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",o.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",o.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",o.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",o.Msg.TODAY="Today",o.Msg.UNDO="Undo",o.Msg.UNKNOWN="Unknown",o.Msg.UNNAMED_KEY="unnamed",o.Msg.VARIABLES_DEFAULT_NAME="item",o.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",o.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",o.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",o.Msg.VARIABLES_SET="set %1 to %2",o.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",o.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",o.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",o.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",o.Msg.WINDOWS="Windows",o.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",o.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",o.Msg.CONTROLS_FOREACH_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_FOR_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=o.Msg.CONTROLS_IF_MSG_ELSEIF,o.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=o.Msg.CONTROLS_IF_MSG_ELSE,o.Msg.CONTROLS_IF_IF_TITLE_IF=o.Msg.CONTROLS_IF_MSG_IF,o.Msg.CONTROLS_IF_MSG_THEN=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.LISTS_CREATE_WITH_ITEM_TITLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.MATH_CHANGE_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.PROCEDURES_DEFRETURN_COMMENT=o.Msg.PROCEDURES_DEFNORETURN_COMMENT,o.Msg.PROCEDURES_DEFRETURN_DO=o.Msg.PROCEDURES_DEFNORETURN_DO,o.Msg.PROCEDURES_DEFRETURN_PROCEDURE=o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,o.Msg.PROCEDURES_DEFRETURN_TITLE=o.Msg.PROCEDURES_DEFNORETURN_TITLE,o.Msg.TEXT_APPEND_VARIABLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.COLOUR_HUE="20",o.Msg.LISTS_HUE="260",o.Msg.LOGIC_HUE="210",o.Msg.LOOPS_HUE="120",o.Msg.MATH_HUE="230",o.Msg.PROCEDURES_HUE="290",o.Msg.TEXTS_HUE="160",o.Msg.VARIABLES_DYNAMIC_HUE="310",o.Msg.VARIABLES_HUE="330",o.Msg})})(Qd)),Qd.exports}var FR=xR();const PR=xu(FR),{LOGIC_HUE:BR,LOOPS_HUE:UR,MATH_HUE:VR,TEXTS_HUE:HR,LISTS_HUE:GR,COLOUR_HUE:WR,VARIABLES_HUE:XR,VARIABLES_DYNAMIC_HUE:KR,PROCEDURES_HUE:zR,VARIABLES_DEFAULT_NAME:YR,UNNAMED_KEY:jR,TODAY:qR,DUPLICATE_BLOCK:JR,ADD_COMMENT:ZR,REMOVE_COMMENT:QR,DUPLICATE_COMMENT:eN,EXTERNAL_INPUTS:tN,INLINE_INPUTS:iN,DELETE_BLOCK:nN,DELETE_X_BLOCKS:rN,DELETE_ALL_BLOCKS:oN,CLEAN_UP:sN,CLOSE:aN,COLLAPSE_BLOCK:lN,COLLAPSE_ALL:uN,EXPAND_BLOCK:cN,EXPAND_ALL:dN,DISABLE_BLOCK:hN,ENABLE_BLOCK:_N,HELP:pN,UNDO:fN,REDO:gN,CHANGE_VALUE_TITLE:mN,RENAME_VARIABLE:$N,RENAME_VARIABLE_TITLE:EN,NEW_VARIABLE:TN,NEW_STRING_VARIABLE:bN,NEW_NUMBER_VARIABLE:SN,NEW_COLOUR_VARIABLE:IN,NEW_VARIABLE_TYPE_TITLE:vN,NEW_VARIABLE_TITLE:AN,VARIABLE_ALREADY_EXISTS:ON,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:CN,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:yN,DELETE_VARIABLE_CONFIRMATION:RN,CANNOT_DELETE_VARIABLE_PROCEDURE:NN,DELETE_VARIABLE:DN,COLOUR_PICKER_HELPURL:kN,COLOUR_PICKER_TOOLTIP:LN,COLOUR_RANDOM_HELPURL:wN,COLOUR_RANDOM_TITLE:MN,COLOUR_RANDOM_TOOLTIP:xN,COLOUR_RGB_HELPURL:FN,COLOUR_RGB_TITLE:PN,COLOUR_RGB_RED:BN,COLOUR_RGB_GREEN:UN,COLOUR_RGB_BLUE:VN,COLOUR_RGB_TOOLTIP:HN,COLOUR_BLEND_HELPURL:GN,COLOUR_BLEND_TITLE:WN,COLOUR_BLEND_COLOUR1:XN,COLOUR_BLEND_COLOUR2:KN,COLOUR_BLEND_RATIO:zN,COLOUR_BLEND_TOOLTIP:YN,CONTROLS_REPEAT_HELPURL:jN,CONTROLS_REPEAT_TITLE:qN,CONTROLS_REPEAT_INPUT_DO:JN,CONTROLS_REPEAT_TOOLTIP:ZN,CONTROLS_WHILEUNTIL_HELPURL:QN,CONTROLS_WHILEUNTIL_INPUT_DO:eD,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:tD,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:iD,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:nD,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:rD,CONTROLS_FOR_HELPURL:oD,CONTROLS_FOR_TOOLTIP:sD,CONTROLS_FOR_TITLE:aD,CONTROLS_FOR_INPUT_DO:lD,CONTROLS_FOREACH_HELPURL:uD,CONTROLS_FOREACH_TITLE:cD,CONTROLS_FOREACH_INPUT_DO:dD,CONTROLS_FOREACH_TOOLTIP:hD,CONTROLS_FLOW_STATEMENTS_HELPURL:_D,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:pD,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:fD,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:gD,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:mD,CONTROLS_FLOW_STATEMENTS_WARNING:$D,CONTROLS_IF_HELPURL:ED,CONTROLS_IF_TOOLTIP_1:TD,CONTROLS_IF_TOOLTIP_2:bD,CONTROLS_IF_TOOLTIP_3:SD,CONTROLS_IF_TOOLTIP_4:ID,CONTROLS_IF_MSG_IF:vD,CONTROLS_IF_MSG_ELSEIF:AD,CONTROLS_IF_MSG_ELSE:OD,CONTROLS_IF_MSG_THEN:CD,CONTROLS_IF_IF_TITLE_IF:yD,CONTROLS_IF_IF_TOOLTIP:RD,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:ND,CONTROLS_IF_ELSEIF_TOOLTIP:DD,CONTROLS_IF_ELSE_TITLE_ELSE:kD,CONTROLS_IF_ELSE_TOOLTIP:LD,LOGIC_COMPARE_HELPURL:wD,LOGIC_COMPARE_TOOLTIP_EQ:MD,LOGIC_COMPARE_TOOLTIP_NEQ:xD,LOGIC_COMPARE_TOOLTIP_LT:FD,LOGIC_COMPARE_TOOLTIP_LTE:PD,LOGIC_COMPARE_TOOLTIP_GT:BD,LOGIC_COMPARE_TOOLTIP_GTE:UD,LOGIC_OPERATION_HELPURL:VD,LOGIC_OPERATION_TOOLTIP_AND:HD,LOGIC_OPERATION_AND:GD,LOGIC_OPERATION_TOOLTIP_OR:WD,LOGIC_OPERATION_OR:XD,LOGIC_NEGATE_HELPURL:KD,LOGIC_NEGATE_TITLE:zD,LOGIC_NEGATE_TOOLTIP:YD,LOGIC_BOOLEAN_HELPURL:jD,LOGIC_BOOLEAN_TRUE:qD,LOGIC_BOOLEAN_FALSE:JD,LOGIC_BOOLEAN_TOOLTIP:ZD,LOGIC_NULL_HELPURL:QD,LOGIC_NULL:ek,LOGIC_NULL_TOOLTIP:tk,LOGIC_TERNARY_HELPURL:ik,LOGIC_TERNARY_CONDITION:nk,LOGIC_TERNARY_IF_TRUE:rk,LOGIC_TERNARY_IF_FALSE:ok,LOGIC_TERNARY_TOOLTIP:sk,MATH_NUMBER_HELPURL:ak,MATH_NUMBER_TOOLTIP:lk,MATH_ADDITION_SYMBOL:uk,MATH_SUBTRACTION_SYMBOL:ck,MATH_DIVISION_SYMBOL:dk,MATH_MULTIPLICATION_SYMBOL:hk,MATH_POWER_SYMBOL:_k,MATH_TRIG_SIN:pk,MATH_TRIG_COS:fk,MATH_TRIG_TAN:gk,MATH_TRIG_ASIN:mk,MATH_TRIG_ACOS:$k,MATH_TRIG_ATAN:Ek,MATH_ARITHMETIC_HELPURL:Tk,MATH_ARITHMETIC_TOOLTIP_ADD:bk,MATH_ARITHMETIC_TOOLTIP_MINUS:Sk,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:Ik,MATH_ARITHMETIC_TOOLTIP_DIVIDE:vk,MATH_ARITHMETIC_TOOLTIP_POWER:Ak,MATH_SINGLE_HELPURL:Ok,MATH_SINGLE_OP_ROOT:Ck,MATH_SINGLE_TOOLTIP_ROOT:yk,MATH_SINGLE_OP_ABSOLUTE:Rk,MATH_SINGLE_TOOLTIP_ABS:Nk,MATH_SINGLE_TOOLTIP_NEG:Dk,MATH_SINGLE_TOOLTIP_LN:kk,MATH_SINGLE_TOOLTIP_LOG10:Lk,MATH_SINGLE_TOOLTIP_EXP:wk,MATH_SINGLE_TOOLTIP_POW10:Mk,MATH_TRIG_HELPURL:xk,MATH_TRIG_TOOLTIP_SIN:Fk,MATH_TRIG_TOOLTIP_COS:Pk,MATH_TRIG_TOOLTIP_TAN:Bk,MATH_TRIG_TOOLTIP_ASIN:Uk,MATH_TRIG_TOOLTIP_ACOS:Vk,MATH_TRIG_TOOLTIP_ATAN:Hk,MATH_CONSTANT_HELPURL:Gk,MATH_CONSTANT_TOOLTIP:Wk,MATH_IS_EVEN:Xk,MATH_IS_ODD:Kk,MATH_IS_PRIME:zk,MATH_IS_WHOLE:Yk,MATH_IS_POSITIVE:jk,MATH_IS_NEGATIVE:qk,MATH_IS_DIVISIBLE_BY:Jk,MATH_IS_TOOLTIP:Zk,MATH_CHANGE_HELPURL:Qk,MATH_CHANGE_TITLE:eL,MATH_CHANGE_TITLE_ITEM:tL,MATH_CHANGE_TOOLTIP:iL,MATH_ROUND_HELPURL:nL,MATH_ROUND_TOOLTIP:rL,MATH_ROUND_OPERATOR_ROUND:oL,MATH_ROUND_OPERATOR_ROUNDUP:sL,MATH_ROUND_OPERATOR_ROUNDDOWN:aL,MATH_ONLIST_HELPURL:lL,MATH_ONLIST_OPERATOR_SUM:uL,MATH_ONLIST_TOOLTIP_SUM:cL,MATH_ONLIST_OPERATOR_MIN:dL,MATH_ONLIST_TOOLTIP_MIN:hL,MATH_ONLIST_OPERATOR_MAX:_L,MATH_ONLIST_TOOLTIP_MAX:pL,MATH_ONLIST_OPERATOR_AVERAGE:fL,MATH_ONLIST_TOOLTIP_AVERAGE:gL,MATH_ONLIST_OPERATOR_MEDIAN:mL,MATH_ONLIST_TOOLTIP_MEDIAN:$L,MATH_ONLIST_OPERATOR_MODE:EL,MATH_ONLIST_TOOLTIP_MODE:TL,MATH_ONLIST_OPERATOR_STD_DEV:bL,MATH_ONLIST_TOOLTIP_STD_DEV:SL,MATH_ONLIST_OPERATOR_RANDOM:IL,MATH_ONLIST_TOOLTIP_RANDOM:vL,MATH_MODULO_HELPURL:AL,MATH_MODULO_TITLE:OL,MATH_MODULO_TOOLTIP:CL,MATH_CONSTRAIN_HELPURL:yL,MATH_CONSTRAIN_TITLE:RL,MATH_CONSTRAIN_TOOLTIP:NL,MATH_RANDOM_INT_HELPURL:DL,MATH_RANDOM_INT_TITLE:kL,MATH_RANDOM_INT_TOOLTIP:LL,MATH_RANDOM_FLOAT_HELPURL:wL,MATH_RANDOM_FLOAT_TITLE_RANDOM:ML,MATH_RANDOM_FLOAT_TOOLTIP:xL,MATH_ATAN2_HELPURL:FL,MATH_ATAN2_TITLE:PL,MATH_ATAN2_TOOLTIP:BL,TEXT_TEXT_HELPURL:UL,TEXT_TEXT_TOOLTIP:VL,TEXT_JOIN_HELPURL:HL,TEXT_JOIN_TITLE_CREATEWITH:GL,TEXT_JOIN_TOOLTIP:WL,TEXT_CREATE_JOIN_TITLE_JOIN:XL,TEXT_CREATE_JOIN_TOOLTIP:KL,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:zL,TEXT_CREATE_JOIN_ITEM_TOOLTIP:YL,TEXT_APPEND_HELPURL:jL,TEXT_APPEND_TITLE:qL,TEXT_APPEND_VARIABLE:JL,TEXT_APPEND_TOOLTIP:ZL,TEXT_LENGTH_HELPURL:QL,TEXT_LENGTH_TITLE:ew,TEXT_LENGTH_TOOLTIP:tw,TEXT_ISEMPTY_HELPURL:iw,TEXT_ISEMPTY_TITLE:nw,TEXT_ISEMPTY_TOOLTIP:rw,TEXT_INDEXOF_HELPURL:ow,TEXT_INDEXOF_TOOLTIP:sw,TEXT_INDEXOF_TITLE:aw,TEXT_INDEXOF_OPERATOR_FIRST:lw,TEXT_INDEXOF_OPERATOR_LAST:uw,TEXT_CHARAT_HELPURL:cw,TEXT_CHARAT_TITLE:dw,TEXT_CHARAT_FROM_START:hw,TEXT_CHARAT_FROM_END:_w,TEXT_CHARAT_FIRST:pw,TEXT_CHARAT_LAST:fw,TEXT_CHARAT_RANDOM:gw,TEXT_CHARAT_TAIL:mw,TEXT_CHARAT_TOOLTIP:$w,TEXT_GET_SUBSTRING_TOOLTIP:Ew,TEXT_GET_SUBSTRING_HELPURL:Tw,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:bw,TEXT_GET_SUBSTRING_START_FROM_START:Sw,TEXT_GET_SUBSTRING_START_FROM_END:Iw,TEXT_GET_SUBSTRING_START_FIRST:vw,TEXT_GET_SUBSTRING_END_FROM_START:Aw,TEXT_GET_SUBSTRING_END_FROM_END:Ow,TEXT_GET_SUBSTRING_END_LAST:Cw,TEXT_GET_SUBSTRING_TAIL:yw,TEXT_CHANGECASE_HELPURL:Rw,TEXT_CHANGECASE_TOOLTIP:Nw,TEXT_CHANGECASE_OPERATOR_UPPERCASE:Dw,TEXT_CHANGECASE_OPERATOR_LOWERCASE:kw,TEXT_CHANGECASE_OPERATOR_TITLECASE:Lw,TEXT_TRIM_HELPURL:ww,TEXT_TRIM_TOOLTIP:Mw,TEXT_TRIM_OPERATOR_BOTH:xw,TEXT_TRIM_OPERATOR_LEFT:Fw,TEXT_TRIM_OPERATOR_RIGHT:Pw,TEXT_PRINT_HELPURL:Bw,TEXT_PRINT_TITLE:Uw,TEXT_PRINT_TOOLTIP:Vw,TEXT_PROMPT_HELPURL:Hw,TEXT_PROMPT_TYPE_TEXT:Gw,TEXT_PROMPT_TYPE_NUMBER:Ww,TEXT_PROMPT_TOOLTIP_NUMBER:Xw,TEXT_PROMPT_TOOLTIP_TEXT:Kw,TEXT_COUNT_MESSAGE0:zw,TEXT_COUNT_HELPURL:Yw,TEXT_COUNT_TOOLTIP:jw,TEXT_REPLACE_MESSAGE0:qw,TEXT_REPLACE_HELPURL:Jw,TEXT_REPLACE_TOOLTIP:Zw,TEXT_REVERSE_MESSAGE0:Qw,TEXT_REVERSE_HELPURL:eM,TEXT_REVERSE_TOOLTIP:tM,LISTS_CREATE_EMPTY_HELPURL:iM,LISTS_CREATE_EMPTY_TITLE:nM,LISTS_CREATE_EMPTY_TOOLTIP:rM,LISTS_CREATE_WITH_HELPURL:oM,LISTS_CREATE_WITH_TOOLTIP:sM,LISTS_CREATE_WITH_INPUT_WITH:aM,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:lM,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:uM,LISTS_CREATE_WITH_ITEM_TITLE:cM,LISTS_CREATE_WITH_ITEM_TOOLTIP:dM,LISTS_REPEAT_HELPURL:hM,LISTS_REPEAT_TOOLTIP:_M,LISTS_REPEAT_TITLE:pM,LISTS_LENGTH_HELPURL:fM,LISTS_LENGTH_TITLE:gM,LISTS_LENGTH_TOOLTIP:mM,LISTS_ISEMPTY_HELPURL:$M,LISTS_ISEMPTY_TITLE:EM,LISTS_ISEMPTY_TOOLTIP:TM,LISTS_INLIST:bM,LISTS_INDEX_OF_HELPURL:SM,LISTS_INDEX_OF_INPUT_IN_LIST:IM,LISTS_INDEX_OF_FIRST:vM,LISTS_INDEX_OF_LAST:AM,LISTS_INDEX_OF_TOOLTIP:OM,LISTS_GET_INDEX_HELPURL:CM,LISTS_GET_INDEX_GET:yM,LISTS_GET_INDEX_GET_REMOVE:RM,LISTS_GET_INDEX_REMOVE:NM,LISTS_GET_INDEX_FROM_START:DM,LISTS_GET_INDEX_FROM_END:kM,LISTS_GET_INDEX_FIRST:LM,LISTS_GET_INDEX_LAST:wM,LISTS_GET_INDEX_RANDOM:MM,LISTS_GET_INDEX_TAIL:xM,LISTS_GET_INDEX_INPUT_IN_LIST:FM,LISTS_INDEX_FROM_START_TOOLTIP:PM,LISTS_INDEX_FROM_END_TOOLTIP:BM,LISTS_GET_INDEX_TOOLTIP_GET_FROM:UM,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:VM,LISTS_GET_INDEX_TOOLTIP_GET_LAST:HM,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:GM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:WM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:XM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:KM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:zM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:YM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:jM,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:qM,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:JM,LISTS_SET_INDEX_HELPURL:ZM,LISTS_SET_INDEX_INPUT_IN_LIST:QM,LISTS_SET_INDEX_SET:e0,LISTS_SET_INDEX_INSERT:t0,LISTS_SET_INDEX_INPUT_TO:i0,LISTS_SET_INDEX_TOOLTIP_SET_FROM:n0,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:r0,LISTS_SET_INDEX_TOOLTIP_SET_LAST:o0,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:s0,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:a0,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:l0,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:u0,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:c0,LISTS_GET_SUBLIST_HELPURL:d0,LISTS_GET_SUBLIST_INPUT_IN_LIST:h0,LISTS_GET_SUBLIST_START_FROM_START:_0,LISTS_GET_SUBLIST_START_FROM_END:p0,LISTS_GET_SUBLIST_START_FIRST:f0,LISTS_GET_SUBLIST_END_FROM_START:g0,LISTS_GET_SUBLIST_END_FROM_END:m0,LISTS_GET_SUBLIST_END_LAST:$0,LISTS_GET_SUBLIST_TAIL:E0,LISTS_GET_SUBLIST_TOOLTIP:T0,LISTS_SORT_HELPURL:b0,LISTS_SORT_TITLE:S0,LISTS_SORT_TOOLTIP:I0,LISTS_SORT_ORDER_ASCENDING:v0,LISTS_SORT_ORDER_DESCENDING:A0,LISTS_SORT_TYPE_NUMERIC:O0,LISTS_SORT_TYPE_TEXT:C0,LISTS_SORT_TYPE_IGNORECASE:y0,LISTS_SPLIT_HELPURL:R0,LISTS_SPLIT_LIST_FROM_TEXT:N0,LISTS_SPLIT_TEXT_FROM_LIST:D0,LISTS_SPLIT_WITH_DELIMITER:k0,LISTS_SPLIT_TOOLTIP_SPLIT:L0,LISTS_SPLIT_TOOLTIP_JOIN:w0,LISTS_REVERSE_HELPURL:M0,LISTS_REVERSE_MESSAGE0:x0,LISTS_REVERSE_TOOLTIP:F0,ORDINAL_NUMBER_SUFFIX:P0,VARIABLES_GET_HELPURL:B0,VARIABLES_GET_TOOLTIP:U0,VARIABLES_GET_CREATE_SET:V0,VARIABLES_SET_HELPURL:H0,VARIABLES_SET:G0,VARIABLES_SET_TOOLTIP:W0,VARIABLES_SET_CREATE_GET:X0,PROCEDURES_DEFNORETURN_HELPURL:K0,PROCEDURES_DEFNORETURN_TITLE:z0,PROCEDURES_DEFNORETURN_PROCEDURE:Y0,PROCEDURES_BEFORE_PARAMS:j0,PROCEDURES_CALL_BEFORE_PARAMS:q0,PROCEDURES_CALL_DISABLED_DEF_WARNING:J0,PROCEDURES_DEFNORETURN_DO:Z0,PROCEDURES_DEFNORETURN_TOOLTIP:Q0,PROCEDURES_DEFNORETURN_COMMENT:ex,PROCEDURES_DEFRETURN_HELPURL:tx,PROCEDURES_DEFRETURN_TITLE:ix,PROCEDURES_DEFRETURN_PROCEDURE:nx,PROCEDURES_DEFRETURN_DO:rx,PROCEDURES_DEFRETURN_COMMENT:ox,PROCEDURES_DEFRETURN_RETURN:sx,PROCEDURES_DEFRETURN_TOOLTIP:ax,PROCEDURES_ALLOW_STATEMENTS:lx,PROCEDURES_DEF_DUPLICATE_WARNING:ux,PROCEDURES_CALLNORETURN_HELPURL:cx,PROCEDURES_CALLNORETURN_TOOLTIP:dx,PROCEDURES_CALLRETURN_HELPURL:hx,PROCEDURES_CALLRETURN_TOOLTIP:_x,PROCEDURES_MUTATORCONTAINER_TITLE:px,PROCEDURES_MUTATORCONTAINER_TOOLTIP:fx,PROCEDURES_MUTATORARG_TITLE:gx,PROCEDURES_MUTATORARG_TOOLTIP:mx,PROCEDURES_HIGHLIGHT_DEF:$x,PROCEDURES_CREATE_DO:Ex,PROCEDURES_IFRETURN_TOOLTIP:Tx,PROCEDURES_IFRETURN_HELPURL:bx,PROCEDURES_IFRETURN_WARNING:Sx,WORKSPACE_COMMENT_DEFAULT_TEXT:Ix,WORKSPACE_ARIA_LABEL:vx,COLLAPSED_WARNINGS_WARNING:Ax,DIALOG_OK:Ox,DIALOG_CANCEL:Cx,EDIT_BLOCK_CONTENTS:yx,MOVE_BLOCK:Rx,WINDOWS:Nx,MAC_OS:Dx,CHROME_OS:kx,LINUX:Lx,UNKNOWN:wx,CONTROL_KEY:Mx,COMMAND_KEY:xx,OPTION_KEY:Fx,ALT_KEY:Px,CUT_SHORTCUT:Bx,COPY_SHORTCUT:Ux,PASTE_SHORTCUT:Vx,HELP_PROMPT:Hx,SHORTCUTS_GENERAL:Gx,SHORTCUTS_EDITING:Wx,SHORTCUTS_CODE_NAVIGATION:Xx,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:Kx,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:zx,KEYBOARD_NAV_COPIED_HINT:Yx,KEYBOARD_NAV_CUT_HINT:jx}=PR,qx=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT:ZR,ALT_KEY:Px,CANNOT_DELETE_VARIABLE_PROCEDURE:NN,CHANGE_VALUE_TITLE:mN,CHROME_OS:kx,CLEAN_UP:sN,CLOSE:aN,COLLAPSED_WARNINGS_WARNING:Ax,COLLAPSE_ALL:uN,COLLAPSE_BLOCK:lN,COLOUR_BLEND_COLOUR1:XN,COLOUR_BLEND_COLOUR2:KN,COLOUR_BLEND_HELPURL:GN,COLOUR_BLEND_RATIO:zN,COLOUR_BLEND_TITLE:WN,COLOUR_BLEND_TOOLTIP:YN,COLOUR_HUE:WR,COLOUR_PICKER_HELPURL:kN,COLOUR_PICKER_TOOLTIP:LN,COLOUR_RANDOM_HELPURL:wN,COLOUR_RANDOM_TITLE:MN,COLOUR_RANDOM_TOOLTIP:xN,COLOUR_RGB_BLUE:VN,COLOUR_RGB_GREEN:UN,COLOUR_RGB_HELPURL:FN,COLOUR_RGB_RED:BN,COLOUR_RGB_TITLE:PN,COLOUR_RGB_TOOLTIP:HN,COMMAND_KEY:xx,CONTROLS_FLOW_STATEMENTS_HELPURL:_D,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:pD,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:fD,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:gD,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:mD,CONTROLS_FLOW_STATEMENTS_WARNING:$D,CONTROLS_FOREACH_HELPURL:uD,CONTROLS_FOREACH_INPUT_DO:dD,CONTROLS_FOREACH_TITLE:cD,CONTROLS_FOREACH_TOOLTIP:hD,CONTROLS_FOR_HELPURL:oD,CONTROLS_FOR_INPUT_DO:lD,CONTROLS_FOR_TITLE:aD,CONTROLS_FOR_TOOLTIP:sD,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:ND,CONTROLS_IF_ELSEIF_TOOLTIP:DD,CONTROLS_IF_ELSE_TITLE_ELSE:kD,CONTROLS_IF_ELSE_TOOLTIP:LD,CONTROLS_IF_HELPURL:ED,CONTROLS_IF_IF_TITLE_IF:yD,CONTROLS_IF_IF_TOOLTIP:RD,CONTROLS_IF_MSG_ELSE:OD,CONTROLS_IF_MSG_ELSEIF:AD,CONTROLS_IF_MSG_IF:vD,CONTROLS_IF_MSG_THEN:CD,CONTROLS_IF_TOOLTIP_1:TD,CONTROLS_IF_TOOLTIP_2:bD,CONTROLS_IF_TOOLTIP_3:SD,CONTROLS_IF_TOOLTIP_4:ID,CONTROLS_REPEAT_HELPURL:jN,CONTROLS_REPEAT_INPUT_DO:JN,CONTROLS_REPEAT_TITLE:qN,CONTROLS_REPEAT_TOOLTIP:ZN,CONTROLS_WHILEUNTIL_HELPURL:QN,CONTROLS_WHILEUNTIL_INPUT_DO:eD,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:iD,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:tD,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:rD,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:nD,CONTROL_KEY:Mx,COPY_SHORTCUT:Ux,CUT_SHORTCUT:Bx,DELETE_ALL_BLOCKS:oN,DELETE_BLOCK:nN,DELETE_VARIABLE:DN,DELETE_VARIABLE_CONFIRMATION:RN,DELETE_X_BLOCKS:rN,DIALOG_CANCEL:Cx,DIALOG_OK:Ox,DISABLE_BLOCK:hN,DUPLICATE_BLOCK:JR,DUPLICATE_COMMENT:eN,EDIT_BLOCK_CONTENTS:yx,ENABLE_BLOCK:_N,EXPAND_ALL:dN,EXPAND_BLOCK:cN,EXTERNAL_INPUTS:tN,HELP:pN,HELP_PROMPT:Hx,INLINE_INPUTS:iN,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:zx,KEYBOARD_NAV_COPIED_HINT:Yx,KEYBOARD_NAV_CUT_HINT:jx,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:Kx,LINUX:Lx,LISTS_CREATE_EMPTY_HELPURL:iM,LISTS_CREATE_EMPTY_TITLE:nM,LISTS_CREATE_EMPTY_TOOLTIP:rM,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:lM,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:uM,LISTS_CREATE_WITH_HELPURL:oM,LISTS_CREATE_WITH_INPUT_WITH:aM,LISTS_CREATE_WITH_ITEM_TITLE:cM,LISTS_CREATE_WITH_ITEM_TOOLTIP:dM,LISTS_CREATE_WITH_TOOLTIP:sM,LISTS_GET_INDEX_FIRST:LM,LISTS_GET_INDEX_FROM_END:kM,LISTS_GET_INDEX_FROM_START:DM,LISTS_GET_INDEX_GET:yM,LISTS_GET_INDEX_GET_REMOVE:RM,LISTS_GET_INDEX_HELPURL:CM,LISTS_GET_INDEX_INPUT_IN_LIST:FM,LISTS_GET_INDEX_LAST:wM,LISTS_GET_INDEX_RANDOM:MM,LISTS_GET_INDEX_REMOVE:NM,LISTS_GET_INDEX_TAIL:xM,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:VM,LISTS_GET_INDEX_TOOLTIP_GET_FROM:UM,LISTS_GET_INDEX_TOOLTIP_GET_LAST:HM,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:GM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:XM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:WM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:KM,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:zM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:jM,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:YM,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:qM,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:JM,LISTS_GET_SUBLIST_END_FROM_END:m0,LISTS_GET_SUBLIST_END_FROM_START:g0,LISTS_GET_SUBLIST_END_LAST:$0,LISTS_GET_SUBLIST_HELPURL:d0,LISTS_GET_SUBLIST_INPUT_IN_LIST:h0,LISTS_GET_SUBLIST_START_FIRST:f0,LISTS_GET_SUBLIST_START_FROM_END:p0,LISTS_GET_SUBLIST_START_FROM_START:_0,LISTS_GET_SUBLIST_TAIL:E0,LISTS_GET_SUBLIST_TOOLTIP:T0,LISTS_HUE:GR,LISTS_INDEX_FROM_END_TOOLTIP:BM,LISTS_INDEX_FROM_START_TOOLTIP:PM,LISTS_INDEX_OF_FIRST:vM,LISTS_INDEX_OF_HELPURL:SM,LISTS_INDEX_OF_INPUT_IN_LIST:IM,LISTS_INDEX_OF_LAST:AM,LISTS_INDEX_OF_TOOLTIP:OM,LISTS_INLIST:bM,LISTS_ISEMPTY_HELPURL:$M,LISTS_ISEMPTY_TITLE:EM,LISTS_ISEMPTY_TOOLTIP:TM,LISTS_LENGTH_HELPURL:fM,LISTS_LENGTH_TITLE:gM,LISTS_LENGTH_TOOLTIP:mM,LISTS_REPEAT_HELPURL:hM,LISTS_REPEAT_TITLE:pM,LISTS_REPEAT_TOOLTIP:_M,LISTS_REVERSE_HELPURL:M0,LISTS_REVERSE_MESSAGE0:x0,LISTS_REVERSE_TOOLTIP:F0,LISTS_SET_INDEX_HELPURL:ZM,LISTS_SET_INDEX_INPUT_IN_LIST:QM,LISTS_SET_INDEX_INPUT_TO:i0,LISTS_SET_INDEX_INSERT:t0,LISTS_SET_INDEX_SET:e0,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:l0,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:a0,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:u0,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:c0,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:r0,LISTS_SET_INDEX_TOOLTIP_SET_FROM:n0,LISTS_SET_INDEX_TOOLTIP_SET_LAST:o0,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:s0,LISTS_SORT_HELPURL:b0,LISTS_SORT_ORDER_ASCENDING:v0,LISTS_SORT_ORDER_DESCENDING:A0,LISTS_SORT_TITLE:S0,LISTS_SORT_TOOLTIP:I0,LISTS_SORT_TYPE_IGNORECASE:y0,LISTS_SORT_TYPE_NUMERIC:O0,LISTS_SORT_TYPE_TEXT:C0,LISTS_SPLIT_HELPURL:R0,LISTS_SPLIT_LIST_FROM_TEXT:N0,LISTS_SPLIT_TEXT_FROM_LIST:D0,LISTS_SPLIT_TOOLTIP_JOIN:w0,LISTS_SPLIT_TOOLTIP_SPLIT:L0,LISTS_SPLIT_WITH_DELIMITER:k0,LOGIC_BOOLEAN_FALSE:JD,LOGIC_BOOLEAN_HELPURL:jD,LOGIC_BOOLEAN_TOOLTIP:ZD,LOGIC_BOOLEAN_TRUE:qD,LOGIC_COMPARE_HELPURL:wD,LOGIC_COMPARE_TOOLTIP_EQ:MD,LOGIC_COMPARE_TOOLTIP_GT:BD,LOGIC_COMPARE_TOOLTIP_GTE:UD,LOGIC_COMPARE_TOOLTIP_LT:FD,LOGIC_COMPARE_TOOLTIP_LTE:PD,LOGIC_COMPARE_TOOLTIP_NEQ:xD,LOGIC_HUE:BR,LOGIC_NEGATE_HELPURL:KD,LOGIC_NEGATE_TITLE:zD,LOGIC_NEGATE_TOOLTIP:YD,LOGIC_NULL:ek,LOGIC_NULL_HELPURL:QD,LOGIC_NULL_TOOLTIP:tk,LOGIC_OPERATION_AND:GD,LOGIC_OPERATION_HELPURL:VD,LOGIC_OPERATION_OR:XD,LOGIC_OPERATION_TOOLTIP_AND:HD,LOGIC_OPERATION_TOOLTIP_OR:WD,LOGIC_TERNARY_CONDITION:nk,LOGIC_TERNARY_HELPURL:ik,LOGIC_TERNARY_IF_FALSE:ok,LOGIC_TERNARY_IF_TRUE:rk,LOGIC_TERNARY_TOOLTIP:sk,LOOPS_HUE:UR,MAC_OS:Dx,MATH_ADDITION_SYMBOL:uk,MATH_ARITHMETIC_HELPURL:Tk,MATH_ARITHMETIC_TOOLTIP_ADD:bk,MATH_ARITHMETIC_TOOLTIP_DIVIDE:vk,MATH_ARITHMETIC_TOOLTIP_MINUS:Sk,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:Ik,MATH_ARITHMETIC_TOOLTIP_POWER:Ak,MATH_ATAN2_HELPURL:FL,MATH_ATAN2_TITLE:PL,MATH_ATAN2_TOOLTIP:BL,MATH_CHANGE_HELPURL:Qk,MATH_CHANGE_TITLE:eL,MATH_CHANGE_TITLE_ITEM:tL,MATH_CHANGE_TOOLTIP:iL,MATH_CONSTANT_HELPURL:Gk,MATH_CONSTANT_TOOLTIP:Wk,MATH_CONSTRAIN_HELPURL:yL,MATH_CONSTRAIN_TITLE:RL,MATH_CONSTRAIN_TOOLTIP:NL,MATH_DIVISION_SYMBOL:dk,MATH_HUE:VR,MATH_IS_DIVISIBLE_BY:Jk,MATH_IS_EVEN:Xk,MATH_IS_NEGATIVE:qk,MATH_IS_ODD:Kk,MATH_IS_POSITIVE:jk,MATH_IS_PRIME:zk,MATH_IS_TOOLTIP:Zk,MATH_IS_WHOLE:Yk,MATH_MODULO_HELPURL:AL,MATH_MODULO_TITLE:OL,MATH_MODULO_TOOLTIP:CL,MATH_MULTIPLICATION_SYMBOL:hk,MATH_NUMBER_HELPURL:ak,MATH_NUMBER_TOOLTIP:lk,MATH_ONLIST_HELPURL:lL,MATH_ONLIST_OPERATOR_AVERAGE:fL,MATH_ONLIST_OPERATOR_MAX:_L,MATH_ONLIST_OPERATOR_MEDIAN:mL,MATH_ONLIST_OPERATOR_MIN:dL,MATH_ONLIST_OPERATOR_MODE:EL,MATH_ONLIST_OPERATOR_RANDOM:IL,MATH_ONLIST_OPERATOR_STD_DEV:bL,MATH_ONLIST_OPERATOR_SUM:uL,MATH_ONLIST_TOOLTIP_AVERAGE:gL,MATH_ONLIST_TOOLTIP_MAX:pL,MATH_ONLIST_TOOLTIP_MEDIAN:$L,MATH_ONLIST_TOOLTIP_MIN:hL,MATH_ONLIST_TOOLTIP_MODE:TL,MATH_ONLIST_TOOLTIP_RANDOM:vL,MATH_ONLIST_TOOLTIP_STD_DEV:SL,MATH_ONLIST_TOOLTIP_SUM:cL,MATH_POWER_SYMBOL:_k,MATH_RANDOM_FLOAT_HELPURL:wL,MATH_RANDOM_FLOAT_TITLE_RANDOM:ML,MATH_RANDOM_FLOAT_TOOLTIP:xL,MATH_RANDOM_INT_HELPURL:DL,MATH_RANDOM_INT_TITLE:kL,MATH_RANDOM_INT_TOOLTIP:LL,MATH_ROUND_HELPURL:nL,MATH_ROUND_OPERATOR_ROUND:oL,MATH_ROUND_OPERATOR_ROUNDDOWN:aL,MATH_ROUND_OPERATOR_ROUNDUP:sL,MATH_ROUND_TOOLTIP:rL,MATH_SINGLE_HELPURL:Ok,MATH_SINGLE_OP_ABSOLUTE:Rk,MATH_SINGLE_OP_ROOT:Ck,MATH_SINGLE_TOOLTIP_ABS:Nk,MATH_SINGLE_TOOLTIP_EXP:wk,MATH_SINGLE_TOOLTIP_LN:kk,MATH_SINGLE_TOOLTIP_LOG10:Lk,MATH_SINGLE_TOOLTIP_NEG:Dk,MATH_SINGLE_TOOLTIP_POW10:Mk,MATH_SINGLE_TOOLTIP_ROOT:yk,MATH_SUBTRACTION_SYMBOL:ck,MATH_TRIG_ACOS:$k,MATH_TRIG_ASIN:mk,MATH_TRIG_ATAN:Ek,MATH_TRIG_COS:fk,MATH_TRIG_HELPURL:xk,MATH_TRIG_SIN:pk,MATH_TRIG_TAN:gk,MATH_TRIG_TOOLTIP_ACOS:Vk,MATH_TRIG_TOOLTIP_ASIN:Uk,MATH_TRIG_TOOLTIP_ATAN:Hk,MATH_TRIG_TOOLTIP_COS:Pk,MATH_TRIG_TOOLTIP_SIN:Fk,MATH_TRIG_TOOLTIP_TAN:Bk,MOVE_BLOCK:Rx,NEW_COLOUR_VARIABLE:IN,NEW_NUMBER_VARIABLE:SN,NEW_STRING_VARIABLE:bN,NEW_VARIABLE:TN,NEW_VARIABLE_TITLE:AN,NEW_VARIABLE_TYPE_TITLE:vN,OPTION_KEY:Fx,ORDINAL_NUMBER_SUFFIX:P0,PASTE_SHORTCUT:Vx,PROCEDURES_ALLOW_STATEMENTS:lx,PROCEDURES_BEFORE_PARAMS:j0,PROCEDURES_CALLNORETURN_HELPURL:cx,PROCEDURES_CALLNORETURN_TOOLTIP:dx,PROCEDURES_CALLRETURN_HELPURL:hx,PROCEDURES_CALLRETURN_TOOLTIP:_x,PROCEDURES_CALL_BEFORE_PARAMS:q0,PROCEDURES_CALL_DISABLED_DEF_WARNING:J0,PROCEDURES_CREATE_DO:Ex,PROCEDURES_DEFNORETURN_COMMENT:ex,PROCEDURES_DEFNORETURN_DO:Z0,PROCEDURES_DEFNORETURN_HELPURL:K0,PROCEDURES_DEFNORETURN_PROCEDURE:Y0,PROCEDURES_DEFNORETURN_TITLE:z0,PROCEDURES_DEFNORETURN_TOOLTIP:Q0,PROCEDURES_DEFRETURN_COMMENT:ox,PROCEDURES_DEFRETURN_DO:rx,PROCEDURES_DEFRETURN_HELPURL:tx,PROCEDURES_DEFRETURN_PROCEDURE:nx,PROCEDURES_DEFRETURN_RETURN:sx,PROCEDURES_DEFRETURN_TITLE:ix,PROCEDURES_DEFRETURN_TOOLTIP:ax,PROCEDURES_DEF_DUPLICATE_WARNING:ux,PROCEDURES_HIGHLIGHT_DEF:$x,PROCEDURES_HUE:zR,PROCEDURES_IFRETURN_HELPURL:bx,PROCEDURES_IFRETURN_TOOLTIP:Tx,PROCEDURES_IFRETURN_WARNING:Sx,PROCEDURES_MUTATORARG_TITLE:gx,PROCEDURES_MUTATORARG_TOOLTIP:mx,PROCEDURES_MUTATORCONTAINER_TITLE:px,PROCEDURES_MUTATORCONTAINER_TOOLTIP:fx,REDO:gN,REMOVE_COMMENT:QR,RENAME_VARIABLE:$N,RENAME_VARIABLE_TITLE:EN,SHORTCUTS_CODE_NAVIGATION:Xx,SHORTCUTS_EDITING:Wx,SHORTCUTS_GENERAL:Gx,TEXTS_HUE:HR,TEXT_APPEND_HELPURL:jL,TEXT_APPEND_TITLE:qL,TEXT_APPEND_TOOLTIP:ZL,TEXT_APPEND_VARIABLE:JL,TEXT_CHANGECASE_HELPURL:Rw,TEXT_CHANGECASE_OPERATOR_LOWERCASE:kw,TEXT_CHANGECASE_OPERATOR_TITLECASE:Lw,TEXT_CHANGECASE_OPERATOR_UPPERCASE:Dw,TEXT_CHANGECASE_TOOLTIP:Nw,TEXT_CHARAT_FIRST:pw,TEXT_CHARAT_FROM_END:_w,TEXT_CHARAT_FROM_START:hw,TEXT_CHARAT_HELPURL:cw,TEXT_CHARAT_LAST:fw,TEXT_CHARAT_RANDOM:gw,TEXT_CHARAT_TAIL:mw,TEXT_CHARAT_TITLE:dw,TEXT_CHARAT_TOOLTIP:$w,TEXT_COUNT_HELPURL:Yw,TEXT_COUNT_MESSAGE0:zw,TEXT_COUNT_TOOLTIP:jw,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:zL,TEXT_CREATE_JOIN_ITEM_TOOLTIP:YL,TEXT_CREATE_JOIN_TITLE_JOIN:XL,TEXT_CREATE_JOIN_TOOLTIP:KL,TEXT_GET_SUBSTRING_END_FROM_END:Ow,TEXT_GET_SUBSTRING_END_FROM_START:Aw,TEXT_GET_SUBSTRING_END_LAST:Cw,TEXT_GET_SUBSTRING_HELPURL:Tw,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:bw,TEXT_GET_SUBSTRING_START_FIRST:vw,TEXT_GET_SUBSTRING_START_FROM_END:Iw,TEXT_GET_SUBSTRING_START_FROM_START:Sw,TEXT_GET_SUBSTRING_TAIL:yw,TEXT_GET_SUBSTRING_TOOLTIP:Ew,TEXT_INDEXOF_HELPURL:ow,TEXT_INDEXOF_OPERATOR_FIRST:lw,TEXT_INDEXOF_OPERATOR_LAST:uw,TEXT_INDEXOF_TITLE:aw,TEXT_INDEXOF_TOOLTIP:sw,TEXT_ISEMPTY_HELPURL:iw,TEXT_ISEMPTY_TITLE:nw,TEXT_ISEMPTY_TOOLTIP:rw,TEXT_JOIN_HELPURL:HL,TEXT_JOIN_TITLE_CREATEWITH:GL,TEXT_JOIN_TOOLTIP:WL,TEXT_LENGTH_HELPURL:QL,TEXT_LENGTH_TITLE:ew,TEXT_LENGTH_TOOLTIP:tw,TEXT_PRINT_HELPURL:Bw,TEXT_PRINT_TITLE:Uw,TEXT_PRINT_TOOLTIP:Vw,TEXT_PROMPT_HELPURL:Hw,TEXT_PROMPT_TOOLTIP_NUMBER:Xw,TEXT_PROMPT_TOOLTIP_TEXT:Kw,TEXT_PROMPT_TYPE_NUMBER:Ww,TEXT_PROMPT_TYPE_TEXT:Gw,TEXT_REPLACE_HELPURL:Jw,TEXT_REPLACE_MESSAGE0:qw,TEXT_REPLACE_TOOLTIP:Zw,TEXT_REVERSE_HELPURL:eM,TEXT_REVERSE_MESSAGE0:Qw,TEXT_REVERSE_TOOLTIP:tM,TEXT_TEXT_HELPURL:UL,TEXT_TEXT_TOOLTIP:VL,TEXT_TRIM_HELPURL:ww,TEXT_TRIM_OPERATOR_BOTH:xw,TEXT_TRIM_OPERATOR_LEFT:Fw,TEXT_TRIM_OPERATOR_RIGHT:Pw,TEXT_TRIM_TOOLTIP:Mw,TODAY:qR,UNDO:fN,UNKNOWN:wx,UNNAMED_KEY:jR,VARIABLES_DEFAULT_NAME:YR,VARIABLES_DYNAMIC_HUE:KR,VARIABLES_GET_CREATE_SET:V0,VARIABLES_GET_HELPURL:B0,VARIABLES_GET_TOOLTIP:U0,VARIABLES_HUE:XR,VARIABLES_SET:G0,VARIABLES_SET_CREATE_GET:X0,VARIABLES_SET_HELPURL:H0,VARIABLES_SET_TOOLTIP:W0,VARIABLE_ALREADY_EXISTS:ON,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:CN,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:yN,WINDOWS:Nx,WORKSPACE_ARIA_LABEL:vx,WORKSPACE_COMMENT_DEFAULT_TEXT:Ix},Symbol.toStringTag,{value:"Module"}));class Jx extends vh{createLabelDom_(n){const o=document.createElement("div");return o.setAttribute("id",this.getId()+".label"),o.textContent=n,o.classList.add(this.cssConfig_.label??""),o}createIconDom_(){const n=document.createElement("div");return n.classList.add("categoryBubble"),n.style.backgroundColor=this.colour_,n}addColourBorder_(){}setSelected(n){!this.rowDiv_||!this.htmlDiv_||(n?(this.rowDiv_.style.backgroundColor="gray",ol.dom.addClass(this.rowDiv_,this.cssConfig_.selected??"")):(this.rowDiv_.style.backgroundColor="",ol.dom.removeClass(this.rowDiv_,this.cssConfig_.selected??"")),ol.aria.setState(this.htmlDiv_,ol.aria.State.SELECTED,n))}}class Hm extends OR{init(){super.init(),this.getFlyout().show(this.getInitialFlyoutContents()),this.getWorkspace().addChangeListener(o=>{(o.type===Nu.BLOCK_CREATE||o.type===Nu.BLOCK_DELETE||o.type===Nu.BLOCK_CHANGE)&&this.refreshSelection()})}getFlyout(){return super.getFlyout()}getInitialFlyoutContents(){return this.getToolboxItems().flatMap(this.convertToolboxItemToFlyoutItems)}convertToolboxItemToFlyoutItems(n){let o=[];if(n instanceof vh){o.push({kind:"LABEL",text:n.getName()});let s=n.getContents();typeof s=="string"&&(s=[{custom:s,kind:"CATEGORY"}]),o=o.concat(s)}return o}refreshSelection(){this.getFlyout().isVisible()&&(this.refreshDebouncer&&clearTimeout(this.refreshDebouncer),this.refreshDebouncer=setTimeout(()=>{this.getFlyout().show(this.getInitialFlyoutContents())},100))}updateFlyout_(n,o){o?(this.getFlyout().scrollToCategory(o),this.getFlyout().isVisible()||this.getFlyout().show(this.getInitialFlyoutContents())):this.getFlyout().autoClose&&this.getFlyout().hide()}shouldDeselectItem_(n,o){return!!(n&&n!==o)}getCategoryByName(n){const o=this.getToolboxItems().find(s=>s instanceof vh&&s.isSelectable()&&n===s.getName());return o||null}selectCategoryByName(n){const o=this.getCategoryByName(n);if(!o)return;const s=this.selectedItem_;s&&this.shouldDeselectItem_(s,o)&&this.deselectItem_(s),this.shouldSelectItem_(s,o)&&this.selectItem_(s,o)}getClientRect(){const n=this.getFlyout();return n&&!n.autoClose?n.getClientRect():super.getClientRect()}}class Zx extends TR{getScrollMetrics(n,o,s){const l=super.getScrollMetrics(n,o,s),p=s||this.getContentMetrics(n),E=o||this.getViewMetrics(n);return l&&(l.height+=this.flyout_.calculateBottomPadding(p,E)),l}}class GA extends pR{constructor(){super(...arguments),this.recyclingEnabled=!1,this.recycledBlocks=new Map}createBlock(n,o){const s=this.getTypeFromDefinition(n);return this.getRecycledBlock(s)??super.createBlock(n,o)}getTypeFromDefinition(n){let o;if(n.blockxml?o=(typeof n.blockxml=="string"?ol.xml.textToDom(n.blockxml):n.blockxml).getAttribute("type"):o=n.type,!o)throw new Error(`Block type is not specified in block definition: ${JSON.stringify(n)}`);return o}recycleBlock(n){const o=n.getRelativeToSurfaceXY();n.moveBy(-o.x,-o.y),this.recycledBlocks.set(n.type,n)}getRecycledBlock(n){const o=this.recycledBlocks.get(n);return this.recycledBlocks.delete(n),o}blockIsRecyclable(n){if(!this.recyclingEnabled)return!1;if(this.recycleEligibilityChecker)return this.recycleEligibilityChecker(n);if(n.mutationToDom||n.domToMutation||n.saveExtraState||n.loadExtraState||!n.isEnabled())return!1;for(const o of n.inputList){for(const s of o.fieldRow)if(s.referencesVariables()||s instanceof bo&&s.isOptionListDynamic())return!1;if(o.connection){const s=o.connection.targetBlock();if(s&&!this.blockIsRecyclable(s))return!1}}return!0}disposeItem(n){const o=n.getElement();o instanceof fR&&this.blockIsRecyclable(o)?(this.removeListeners(o.id),this.recycleBlock(o)):super.disposeItem(n)}emptyRecycledBlocks(){this.recycledBlocks.forEach(n=>n.dispose(!1,!1)),this.recycledBlocks.clear()}}class WA extends CR{constructor(n){super(n),this.scrollPositions=new Map,this.scrollAnimationFraction=.3,this.autoClose=!1,this.getWorkspace().setMetricsManager(new Zx(this.getWorkspace(),this)),this.getWorkspace().addChangeListener(o=>{o.type===Nu.VIEWPORT_CHANGE&&this.selectCategoryByScrollPosition(-this.getWorkspace().scrollY)}),this.setRecyclingEnabled(!0)}getParentToolbox(){const n=this.targetWorkspace.getToolbox();return!n||n instanceof Hm?n:(console.warn("Expected a `ContinuousToolbox` instance but did not find one. Make sure `registerContinuousToolbox()` has been called and the continuous toolbox has been injected."),null)}recordScrollPositions(){this.scrollPositions.clear(),this.getContents().filter(this.toolboxItemIsLabel.bind(this)).map(n=>n.getElement()).forEach(n=>{this.scrollPositions.set(n.getButtonText(),Math.max(0,n.getPosition().y-this.GAP_Y/2))})}toolboxItemIsLabel(n){const o=n.getElement();return!!(n.getType()==="label"&&o instanceof ER&&o.isLabel()&&this.getParentToolbox()?.getCategoryByName(o.getButtonText()))}getCategoryScrollPosition(n){const o=this.scrollPositions.get(n);return o===void 0&&console.warn(`Scroll position not recorded for category ${n}`),o??null}selectCategoryByScrollPosition(n){if(this.scrollTarget)return;const o=Math.round(n/this.getWorkspace().scale);for(const[s,l]of[...this.scrollPositions.entries()].reverse())if(o>=l){this.getParentToolbox()?.selectCategoryByName(s);return}}scrollTo(n){const o=this.getWorkspace().getMetrics();this.scrollTarget=Math.min(n*this.getWorkspace().scale,o.scrollHeight-o.viewHeight),this.stepScrollAnimation()}scrollToCategory(n){const o=this.scrollPositions.get(n.getName());if(o===void 0){console.warn(`Scroll position not recorded for category ${name}`);return}this.scrollTo(o)}stepScrollAnimation(){if(this.scrollTarget===void 0)return;const n=-this.getWorkspace().scrollY,o=this.scrollTarget-n;if(Math.abs(o)<1){this.getWorkspace().scrollbar?.setY(this.scrollTarget),this.scrollTarget=void 0;return}this.getWorkspace().scrollbar?.setY(n+o*this.scrollAnimationFraction),requestAnimationFrame(this.stepScrollAnimation.bind(this))}wheel_(n){this.scrollTarget||super.wheel_(n)}calculateBottomPadding(n,o){if(this.scrollPositions.size===0)return 0;const s=([...this.scrollPositions.values()].pop()??0)*this.getWorkspace().scale,l=n.height-s;return l<o.height?o.height-l:0}getX(){return this.isVisible()&&this.targetWorkspace.toolboxPosition===this.toolboxPosition_&&this.targetWorkspace.getToolbox()&&this.toolboxPosition_!==ol.toolbox.Position.LEFT?this.targetWorkspace.getMetricsManager().getViewMetrics().width:super.getX()}show(n){super.show(n),this.recordScrollPositions(),this.getWorkspace().resizeContents(),this.getParentToolbox()?.getSelectedItem()||this.selectCategoryByScrollPosition(0),this.getRecyclableInflater().emptyRecycledBlocks()}setBlockIsRecyclable(n){this.getRecyclableInflater().recycleEligibilityChecker=n}setRecyclingEnabled(n){this.getRecyclableInflater().recyclingEnabled=n}getRecyclableInflater(){const n=this.getInflaterForType("block");if(!(n instanceof GA))throw new Error("The RecyclableBlockFlyoutInflater is not registered.");return n}}class XA extends bR{getViewMetrics(n=!1){const o=n?this.workspace_.scale:1,s=this.getSvgMetrics(),l=this.getToolboxMetrics(),p=this.getFlyoutMetrics(!1),E=l.position;return this.workspace_.getToolbox()&&(E==lv||E==IR?s.height-=l.height+p.height:(E==av||E==vR)&&(s.width-=l.width+p.width)),{height:s.height/o,width:s.width/o,top:-this.workspace_.scrollY/o,left:-this.workspace_.scrollX/o}}getAbsoluteMetrics(){const n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!1),s=n.position;let l=0;this.workspace_.getToolbox()&&s==av&&(l=n.width+o.width);let p=0;return this.workspace_.getToolbox()&&s==lv&&(p=n.height+o.height),{top:p,left:l}}}function Qx(){_o.register(_o.Type.TOOLBOX_ITEM,vh.registrationName,Jx,!0),_o.register(_o.Type.METRICS_MANAGER,"ContinuousMetrics",XA,!0),_o.register(_o.Type.FLYOUTS_VERTICAL_TOOLBOX,"ContinuousFlyout",WA,!0),_o.register(_o.Type.TOOLBOX,"ContinuousToolbox",Hm,!0),_o.register(_o.Type.FLYOUT_INFLATER,"block",GA,!0),mR.register(`
  .categoryBubble {
    margin: 0 auto 0.125rem;
    border-radius: 100%;
    border: 1px solid;
    width: 1.25rem;
    height: 1.25rem;
  }
  .blocklyToolboxCategory {
    height: initial;
    padding: 3px 0;
  }
  .blocklyTreeRowContentContainer {
    display: flex;
    flex-direction: column;
  }
  .blocklyToolboxCategoryLabel {
    margin: auto;
  }
  .blocklyToolboxCategoryLabel {
    text-align: center;
  }
  `)}const eF="categoryToolbox",tF=[{kind:"search",name:"Search",contents:[]},{kind:"category",name:"Blocks",categorystyle:"scratch_category",contents:[{kind:"block",type:"create_block",gap:8,enabled:!0},{kind:"block",type:"create_input",gap:8,enabled:!0},{kind:"block",type:"input_menu",gap:8,enabled:!0},{kind:"block",type:"create_menu",gap:8,enabled:!0},{kind:"block",type:"create_dynamic_menu",gap:8,enabled:!0},{kind:"block",type:"create_input_menu",gap:8,enabled:!0},{kind:"block",type:"menu_item",gap:8,enabled:!0},{kind:"block",type:"get_input",gap:8,enabled:!0},{kind:"block",type:"return_block",gap:8,enabled:!0},{kind:"block",type:"create_hat",gap:8,enabled:!0},{kind:"block",type:"call_hat",gap:8,enabled:!0},{kind:"block",type:"call_hat_with_args",gap:8,enabled:!0}]},{kind:"category",name:"Category",categorystyle:"category_category",contents:[{kind:"block",type:"order_category",gap:8,enabled:!0},{kind:"block",type:"create_label",gap:8,enabled:!0},{kind:"block",type:"create_button",gap:8,enabled:!0},{kind:"block",type:"use_block",gap:8,enabled:!0},{kind:"block",type:"use_hat",gap:8,enabled:!0}]},{kind:"category",name:"JSON",categorystyle:"json_category",contents:[{kind:"block",type:"json_new",gap:8,enabled:!0,extraState:{itemCount:0}},{kind:"block",type:"json_new",gap:8,enabled:!0},{kind:"block",type:"json_get",gap:8,enabled:!0},{kind:"block",type:"json_set",gap:8,enabled:!0},{kind:"block",type:"json_encode",gap:8,enabled:!0},{kind:"block",type:"json_entries",gap:8,enabled:!0},{kind:"block",type:"json_has_key",gap:8,enabled:!0}]},{kind:"category",name:"Functions",categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"category",name:"Variables",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Text",categorystyle:"text_category",contents:[{kind:"block",type:"text_multiline",gap:8,enabled:!0},{kind:"block",type:"text",gap:8,enabled:!0},{kind:"block",type:"text_join",gap:8,enabled:!0},{kind:"block",type:"text_append",gap:8,enabled:!0},{kind:"block",type:"text_length",gap:8,enabled:!0},{kind:"block",type:"text_isEmpty",gap:8,enabled:!0},{kind:"block",type:"text_indexOf",gap:8,enabled:!0},{kind:"block",type:"text_charAt",gap:8,enabled:!0},{kind:"block",type:"text_getSubstring",gap:8,enabled:!0},{kind:"block",type:"text_changeCase",gap:8,enabled:!0},{kind:"block",type:"text_trim",gap:8,enabled:!0},{kind:"block",type:"text_prompt_ext",gap:8,enabled:!0},{kind:"block",type:"text_prompt",gap:8,enabled:!0},{kind:"block",type:"text_count",gap:8,enabled:!0},{kind:"block",type:"text_replace",gap:8,enabled:!0},{kind:"block",type:"text_reverse",gap:8,enabled:!0},{kind:"block",type:"newline",gap:8,enabled:!0}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_angle",gap:8,enabled:!0},{kind:"block",type:"math_number",gap:8,enabled:!0},{kind:"block",type:"math_arithmetic",gap:8,enabled:!0},{kind:"block",type:"math_single",gap:8,enabled:!0},{kind:"block",type:"math_trig",gap:8,enabled:!0},{kind:"block",type:"math_constant",gap:8,enabled:!0},{kind:"block",type:"math_number_property",gap:8,enabled:!0},{kind:"block",type:"math_round",gap:8,enabled:!0},{kind:"block",type:"math_on_list",gap:8,enabled:!0},{kind:"block",type:"math_modulo",gap:8,enabled:!0},{kind:"block",type:"math_constrain",gap:8,enabled:!0},{kind:"block",type:"math_random_int",gap:8,enabled:!0},{kind:"block",type:"math_random_float",gap:8,enabled:!0},{kind:"block",type:"math_atan2",gap:8,enabled:!0},{kind:"block",type:"math_convert_degrees",gap:8,enabled:!0}]},{kind:"category",name:"Lists",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_with",gap:8,enabled:!0,extraState:{itemCount:0}},{kind:"block",type:"lists_create_with",gap:8,enabled:!0},{kind:"block",type:"lists_repeat",gap:8,enabled:!0},{kind:"block",type:"lists_reverse",gap:8,enabled:!0},{kind:"block",type:"lists_isEmpty",gap:8,enabled:!0},{kind:"block",type:"lists_length",gap:8,enabled:!0},{kind:"block",type:"lists_indexOf",gap:8,enabled:!0},{kind:"block",type:"lists_getIndex",gap:8,enabled:!0},{kind:"block",type:"lists_setIndex",gap:8,enabled:!0},{kind:"block",type:"lists_getSublist",gap:8,enabled:!0},{kind:"block",type:"lists_sort",gap:8,enabled:!0},{kind:"block",type:"lists_split",gap:8,enabled:!0}]},{kind:"category",name:"Controls",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",gap:8,enabled:!0},{kind:"block",type:"controls_repeat",gap:8,enabled:!0},{kind:"block",type:"controls_whileUntil",gap:8,enabled:!0},{kind:"block",type:"controls_for",gap:8,enabled:!0},{kind:"block",type:"controls_forEach",gap:8,enabled:!0},{kind:"block",type:"controls_flow_statements",gap:8,enabled:!0},{kind:"block",type:"controls_wait",gap:8,enabled:!0},{kind:"block",type:"controls_wait_until",gap:8,enabled:!0},{kind:"block",type:"controls_try",gap:8,enabled:!0}]},{kind:"category",name:"Logic",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_boolean",gap:8,enabled:!0},{kind:"block",type:"logic_compare",gap:8,enabled:!0},{kind:"block",type:"logic_operation",gap:8,enabled:!0},{kind:"block",type:"logic_negate",gap:8,enabled:!0},{kind:"block",type:"logic_null",gap:8,enabled:!0},{kind:"block",type:"logic_ternary",gap:8,enabled:!0},{kind:"block",type:"controls_if",gap:8,enabled:!0},{kind:"block",type:"controls_if",extraState:{hasElse:!0}},{kind:"block",type:"controls_if",extraState:{hasElse:!0,elseIfCount:1}},{kind:"block",type:"logic_switch"},{kind:"block",type:"logic_switch",extraState:{hasDefault:!0}},{kind:"block",type:"logic_switch_break"},{kind:"block",type:"logic_switch_expr"},{kind:"block",type:"logic_switch_expr",extraState:{hasDefault:!0}}]},{kind:"category",name:"Color",categorystyle:"colour_category",contents:[{kind:"block",type:"colour_hsv_sliders",gap:8,enabled:!0},{kind:"block",type:"colour_picker",gap:8,enabled:!0},{kind:"block",type:"colour_rgb",gap:8,enabled:!0},{kind:"block",type:"colour_random",gap:8,enabled:!0},{kind:"block",type:"colour_blend",gap:8,enabled:!0}]},{kind:"category",name:"Browser",categorystyle:"browser_category",contents:[{kind:"block",type:"browser_console",gap:8,enabled:!0},{kind:"block",type:"browser_alert",gap:8,enabled:!0},{kind:"block",type:"browser_prompt",gap:8,enabled:!0},{kind:"block",type:"browser_confirm",gap:8,enabled:!0}]},{kind:"category",name:"Advanced",categorystyle:"advanced_category",contents:[{kind:"block",type:"eval",gap:8,enabled:!0},{kind:"block",type:"eval_ret",gap:8,enabled:!0},{kind:"block",type:"raw",gap:8,enabled:!0},{kind:"block",type:"raw_ret",gap:8,enabled:!0}]},{kind:"category",name:"Extensions",categorystyle:"extension_category",contents:[{kind:"button",text:"Load Extension",callbackKey:"Load_Extension"}]},{kind:"sep"}],sl={kind:eF,contents:tF};var eh={exports:{}};var iF=eh.exports,hv;function nF(){return hv||(hv=1,(function(i,n){(function(o,s){i.exports=s(Er())})(iF,o=>(()=>{var s={370:R=>{R.exports=o}},l={},p=(function R(M){var L=l[M];if(L!==void 0)return L.exports;var y=l[M]={exports:{}};return s[M](y,y.exports,R),y.exports})(370);class E{constructor(){this.trigramsToBlocks=new Map}indexBlocks(M){const L=new p.Workspace;M.forEach(y=>{const N=y.type;if(!N||N==="")return;const P=L.newBlock(N);this.indexBlockText(N.replaceAll("_"," "),y),P.inputList.forEach(F=>{F.fieldRow.forEach(K=>{this.indexDropdownOption(K,y),this.indexBlockText(K.getText(),y)})})})}indexDropdownOption(M,L){M instanceof p.FieldDropdown&&M.getOptions(!0).forEach(y=>{typeof y[0]=="string"?this.indexBlockText(y[0],L):"alt"in y[0]&&this.indexBlockText(y[0].alt,L)})}blockTypesMatching(M){return[...this.generateTrigrams(M).map(L=>{var y;return(y=this.trigramsToBlocks.get(L))!==null&&y!==void 0?y:new Set}).reduce((L,y)=>this.getIntersection(L,y)).values()]}indexBlockText(M,L){this.generateTrigrams(M).forEach(y=>{var N;const P=(N=this.trigramsToBlocks.get(y))!==null&&N!==void 0?N:new Set;P.add(L),this.trigramsToBlocks.set(y,P)})}generateTrigrams(M){const L=M.toLowerCase();if(!L)return[];if(L.length<=3)return[L];const y=[];for(let N=0;N<=L.length-3;N++)y.push(L.substring(N,N+3));return y}getIntersection(M,L){return new Set([...M].filter(y=>L.has(y)))}}class $ extends p.ToolboxCategory{constructor(M,L,y){super(M,L,y),this.SEARCH_INPUT_ID="toolbox-search-input",this.blockSearcher=new E,this.initBlockSearcher(),this.registerShortcut()}createDom_(){var M;const L=super.createDom_();return this.searchField=document.createElement("input"),this.searchField.id=this.SEARCH_INPUT_ID,this.searchField.type="search",this.searchField.placeholder="Search",this.workspace_.RTL?this.searchField.style.marginRight="8px":this.searchField.style.marginLeft="8px",this.searchField.addEventListener("keyup",y=>{y.key!=="Escape"?this.matchBlocks():this.parentToolbox_.clearSelection()}),(M=this.rowContents_)===null||M===void 0||M.replaceChildren(this.searchField),L}getId(){return this.SEARCH_INPUT_ID}getPosition(){var M;const L=((M=this.workspace_.options.languageTree)===null||M===void 0?void 0:M.contents)||[];for(let y=0;y<L.length;y++)if(L[y].kind===$.SEARCH_CATEGORY_KIND)return y;return-1}registerShortcut(){const M=p.ShortcutRegistry.registry.createSerializedKey(p.utils.KeyCodes.B,[p.utils.KeyCodes.CTRL]);p.ShortcutRegistry.registry.register({name:$.START_SEARCH_SHORTCUT,callback:()=>!(this.getPosition()<0||(p.getFocusManager().focusNode(this),0)),keyCodes:[M]})}getAvailableBlocks(M,L){"contents"in M?M.contents.forEach(y=>{this.getAvailableBlocks(y,L)}):M.kind.toLowerCase()==="block"&&"type"in M&&M.type&&L.add(M)}initBlockSearcher(){var M,L;const y=new Set;(L=(M=this.workspace_.options.languageTree)===null||M===void 0?void 0:M.contents)===null||L===void 0||L.forEach(N=>this.getAvailableBlocks(N,y)),this.blockSearcher.indexBlocks([...y])}getFocusableElement(){if(!this.searchField)throw Error("This field currently has no representative DOM element.");return this.searchField}onNodeFocus(){this.matchBlocks()}onNodeBlur(){this.searchField&&(this.searchField.value="")}matchBlocks(){var M;const L=((M=this.searchField)===null||M===void 0?void 0:M.value)||"";this.flyoutItems_=L?this.blockSearcher.blockTypesMatching(L):[],this.flyoutItems_.length||this.flyoutItems_.push({kind:"label",text:L.length<3?"Type to search for blocks":"No matching blocks found"}),this.parentToolbox_.refreshSelection()}dispose(){super.dispose(),p.ShortcutRegistry.registry.unregister($.START_SEARCH_SHORTCUT)}}return $.START_SEARCH_SHORTCUT="startSearch",$.SEARCH_CATEGORY_KIND="search",p.registry.register(p.registry.Type.TOOLBOX_ITEM,$.SEARCH_CATEGORY_KIND,$),{}})())})(eh)),eh.exports}nF();var th={exports:{}};var rF=th.exports,_v;function oF(){return _v||(_v=1,(function(i,n){(function(o,s){i.exports=s(Er())})(rF,o=>(()=>{var s={370:L=>{L.exports=o}},l={};function p(L){var y=l[L];if(y!==void 0)return y.exports;var N=l[L]={exports:{}};return s[L](N,N.exports,p),N.exports}p.d=(L,y)=>{for(var N in y)p.o(y,N)&&!p.o(L,N)&&Object.defineProperty(L,N,{enumerable:!0,get:y[N]})},p.o=(L,y)=>Object.prototype.hasOwnProperty.call(L,y),p.r=L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})};var E={};p.r(E),p.d(E,{WorkspaceSearch:()=>M});var $=p(370);const R=(function(){let L=!1;return function(){if(L)return;L=!0;const y=document.createElement("style");y.id="blockly-ws-search-style";const N=document.createTextNode(`path.blocklyPath.blockly-ws-search-highlight {
    fill: #000;
  }
  path.blocklyPath.blockly-ws-search-highlight.blockly-ws-search-current {
    fill: grey;
  }
  .blockly-ws-search-close-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=) no-repeat top left;
  }
  .blockly-ws-search-next-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNNy40MSA4LjU5TDEyIDEzLjE3bDQuNTktNC41OEwxOCAxMGwtNiA2LTYtNiAxLjQxLTEuNDF6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PC9zdmc+) no-repeat top left;
  }
  .blockly-ws-search-previous-btn {
    background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNNy40MSAxNS40MUwxMiAxMC44M2w0LjU5IDQuNThMMTggMTRsLTYtNi02IDZ6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==) no-repeat top left;
  }
  .blockly-ws-search {
    background: #fff;
    border: solid lightgrey 0.5px;
    box-shadow: 0px 10px 20px grey;
    justify-content: center;
    padding: 0.25em;
    position: absolute;
    z-index: 70;
  }
  .blockly-ws-search-input input {
    border: none;
  }
  .blockly-ws-search button {
    border: none;
    padding-left: 6px;
    padding-right: 6px;
  }
  .blockly-ws-search-actions {
    display: flex;
  }
  .blockly-ws-search-container {
    display: flex;
  }
  .blockly-ws-search-content {
    display: flex;
  }`);y.appendChild(N),document.head.insertBefore(y,document.head.firstChild)}})();class M{constructor(y){this.workspace=y,this.id="workspaceSearch",this.htmlDiv=null,this.actionDiv=null,this.inputElement=null,this.textInputPlaceholder="Search",this.blocks=[],this.lastHighlighted=null,this.currentBlockIndex=-1,this.searchText="",this.searchOnInput=!0,this.caseSensitive=!1,this.preserveSelected=!0,this.boundEvents=[]}init(){this.workspace.getComponentManager().addComponent({component:this,weight:0,capabilities:[$.ComponentManager.Capability.POSITIONABLE]}),R(),this.createDom(),this.setVisible(!1),this.workspace.resize()}dispose(){for(const y of this.boundEvents)$.browserEvents.unbind(y);this.boundEvents.length=0,this.htmlDiv&&(this.htmlDiv.remove(),this.htmlDiv=null),this.actionDiv=null,this.inputElement=null}createDom(){const y=this.workspace.getInjectionDiv();this.addEvent(y,"keydown",this,C=>this.onWorkspaceKeyDown(C)),this.htmlDiv=document.createElement("div"),$.utils.dom.addClass(this.htmlDiv,"blockly-ws-search");const N=document.createElement("div");$.utils.dom.addClass(N,"blockly-ws-search-container");const P=document.createElement("div");$.utils.dom.addClass(P,"blockly-ws-search-content"),N.appendChild(P);const F=document.createElement("div");$.utils.dom.addClass(F,"blockly-ws-search-input"),this.inputElement=this.createTextInput(),this.addEvent(this.inputElement,"keydown",this,C=>this.onKeyDown(C)),this.addEvent(this.inputElement,"input",this,()=>this.onInput()),this.addEvent(this.inputElement,"click",this,()=>{var C;this.searchAndHighlight(this.searchText,this.preserveSelected),(C=this.inputElement)===null||C===void 0||C.select()}),F.appendChild(this.inputElement),P.appendChild(F),this.actionDiv=document.createElement("div"),$.utils.dom.addClass(this.actionDiv,"blockly-ws-search-actions"),P.appendChild(this.actionDiv);const K=this.createNextBtn();K&&this.addActionBtn(K,()=>this.next());const g=this.createPreviousBtn();g&&this.addActionBtn(g,()=>this.previous());const d=this.createCloseBtn();d&&(this.addBtnListener(d,()=>this.close()),N.appendChild(d)),this.htmlDiv.appendChild(N),y.insertBefore(this.htmlDiv,this.workspace.getParentSvg())}addEvent(y,N,P,F){const K=$.browserEvents.conditionalBind(y,N,P,F);this.boundEvents.push(K)}addActionBtn(y,N){var P;this.addBtnListener(y,N),(P=this.actionDiv)===null||P===void 0||P.appendChild(y)}createTextInput(){const y=document.createElement("input");return y.type="text",y.setAttribute("placeholder",this.textInputPlaceholder),y}createNextBtn(){return this.createBtn("blockly-ws-search-next-btn","Find next")}createPreviousBtn(){return this.createBtn("blockly-ws-search-previous-btn","Find previous")}createCloseBtn(){return this.createBtn("blockly-ws-search-close-btn","Close search bar")}createBtn(y,N){const P=document.createElement("button");return $.utils.dom.addClass(P,y),P.setAttribute("aria-label",N),P}addBtnListener(y,N){this.addEvent(y,"click",this,N),this.addEvent(y,"keydown",this,P=>{P.key==="Enter"?(N(P),P.preventDefault()):P.key==="Escape"&&this.close(),P.stopPropagation()})}getBoundingRectangle(){return null}position(y,N){this.htmlDiv&&(this.workspace.RTL?this.htmlDiv.style.left=y.absoluteMetrics.left+"px":y.toolboxMetrics.position===$.TOOLBOX_AT_RIGHT?this.htmlDiv.style.right=y.toolboxMetrics.width+"px":this.htmlDiv.style.right="0",this.htmlDiv.style.top=y.absoluteMetrics.top+"px")}onInput(){if(this.searchOnInput&&this.inputElement){const y=this.inputElement.value.trim();y!==this.searchText&&this.searchAndHighlight(y,this.preserveSelected)}}onKeyDown(y){if(y.key==="Escape")this.close();else if(y.key==="Enter")if(this.searchOnInput)y.shiftKey?this.previous():this.next();else{if(!this.inputElement)return;const N=this.inputElement.value.trim();N!==this.searchText&&this.searchAndHighlight(N,this.preserveSelected)}}onWorkspaceKeyDown(y){(y.ctrlKey||y.metaKey)&&y.key==="f"&&(this.open(),y.preventDefault(),y.stopPropagation())}previous(){this.setCurrentBlock(this.currentBlockIndex-1)}next(){this.setCurrentBlock(this.currentBlockIndex+1)}setSearchPlaceholder(y){this.textInputPlaceholder=y,this.inputElement&&this.inputElement.setAttribute("placeholder",this.textInputPlaceholder)}setCurrentBlock(y){if(!this.blocks.length)return;let N=this.blocks[this.currentBlockIndex];N&&this.unhighlightCurrentSelection(N),this.currentBlockIndex=(y%this.blocks.length+this.blocks.length)%this.blocks.length,N=this.blocks[this.currentBlockIndex],this.highlightCurrentSelection(N),this.workspace.centerOnBlock(N.id,!1),this.lastHighlighted=N}open(){var y,N;this.setVisible(!0),(y=this.inputElement)===null||y===void 0||y.focus(),(N=this.inputElement)===null||N===void 0||N.select(),this.searchText&&this.searchAndHighlight(this.searchText)}close(){this.setVisible(!1);const y=$.FocusManager.getFocusManager();this.lastHighlighted&&!this.lastHighlighted.isDisposed()?y.focusNode(this.lastHighlighted):y.focusTree(this.workspace),this.clearBlocks(),this.lastHighlighted=null}setVisible(y){this.htmlDiv&&(this.htmlDiv.style.display=y?"flex":"none")}searchAndHighlight(y,N){const P=this.blocks[this.currentBlockIndex];this.searchText=y.trim(),this.clearBlocks(),this.blocks=this.getMatchingBlocks(this.workspace,this.searchText,this.caseSensitive),this.highlightSearchGroup(this.blocks);let F=0;N&&(F=this.blocks.indexOf(P),F=F>-1?F:0),this.setCurrentBlock(F)}getSearchPool(y){return y.getAllBlocks(!0).filter(N=>{const P=N.getSurroundParent();return!P||!P.isCollapsed()})}isBlockMatch(y,N,P){let F="";if(y.isCollapsed())F=y.toString();else{const K=[];y.inputList.forEach(g=>{g.fieldRow.forEach(d=>{K.push(d.getText())})}),F=K.join(" ").trim()}return P||(F=F.toLowerCase()),F.indexOf(N)>-1}getMatchingBlocks(y,N,P){return N?(this.caseSensitive||(N=N.toLowerCase()),this.getSearchPool(y).filter(F=>this.isBlockMatch(F,N,P))):[]}clearBlocks(){this.unhighlightSearchGroup(this.blocks);const y=this.blocks[this.currentBlockIndex];y&&this.unhighlightCurrentSelection(y),this.currentBlockIndex=-1,this.blocks=[]}highlightCurrentSelection(y){const N=y.pathObject.svgPath;$.utils.dom.addClass(N,"blockly-ws-search-current")}unhighlightCurrentSelection(y){const N=y.pathObject.svgPath;$.utils.dom.removeClass(N,"blockly-ws-search-current")}highlightSearchGroup(y){y.forEach(N=>{const P=N.pathObject.svgPath;$.utils.dom.addClass(P,"blockly-ws-search-highlight")})}unhighlightSearchGroup(y){y.forEach(N=>{const P=N.pathObject.svgPath;$.utils.dom.removeClass(P,"blockly-ws-search-highlight")})}}return E})())})(th)),th.exports}var sF=oF(),ih={exports:{}},aF=ih.exports,pv;function Wh(){return pv||(pv=1,(function(i,n){(function(o,s){i.exports=s(Er())})(aF,function(o){var s=o.__namespace__,l=function(c,b){return["[]",T.ATOMIC]},p=function(c,b){const w=Array(c.itemCount_);for(let z=0;z<c.itemCount_;z++)w[z]=b.valueToCode(c,"ADD"+z,T.NONE)||"null";return["["+w.join(", ")+"]",T.ATOMIC]},E=function(c,b){const w=b.provideFunction_("listsRepeat",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),z=b.valueToCode(c,"ITEM",T.NONE)||"null";return c=b.valueToCode(c,"NUM",T.NONE)||"0",[w+"("+z+", "+c+")",T.FUNCTION_CALL]},$=function(c,b){return[(b.valueToCode(c,"VALUE",T.MEMBER)||"[]")+".length",T.MEMBER]},R=function(c,b){return["!"+(b.valueToCode(c,"VALUE",T.MEMBER)||"[]")+".length",T.LOGICAL_NOT]},M=function(c,b){const w=c.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",z=b.valueToCode(c,"FIND",T.NONE)||"''";return b=(b.valueToCode(c,"VALUE",T.MEMBER)||"[]")+"."+w+"("+z+")",c.workspace.options.oneBasedIndex?[b+" + 1",T.ADDITION]:[b,T.FUNCTION_CALL]},L=function(c,b){const w=c.getFieldValue("MODE")||"GET",z=c.getFieldValue("WHERE")||"FROM_START";var q=b.valueToCode(c,"VALUE",z==="RANDOM"?T.NONE:T.MEMBER)||"[]";switch(z){case"FIRST":if(w==="GET")return[q+"[0]",T.MEMBER];if(w==="GET_REMOVE")return[q+".shift()",T.MEMBER];if(w==="REMOVE")return q+`.shift();
`;break;case"LAST":if(w==="GET")return[q+".slice(-1)[0]",T.MEMBER];if(w==="GET_REMOVE")return[q+".pop()",T.MEMBER];if(w==="REMOVE")return q+`.pop();
`;break;case"FROM_START":if(c=b.getAdjusted(c,"AT"),w==="GET")return[q+"["+c+"]",T.MEMBER];if(w==="GET_REMOVE")return[q+".splice("+c+", 1)[0]",T.FUNCTION_CALL];if(w==="REMOVE")return q+".splice("+c+`, 1);
`;break;case"FROM_END":if(c=b.getAdjusted(c,"AT",1,!0),w==="GET")return[q+".slice("+c+")[0]",T.FUNCTION_CALL];if(w==="GET_REMOVE")return[q+".splice("+c+", 1)[0]",T.FUNCTION_CALL];if(w==="REMOVE")return q+".splice("+c+", 1);";break;case"RANDOM":if(q=b.provideFunction_("listsGetRandomItem",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+q+", "+(w!=="GET")+")",w==="GET"||w==="GET_REMOVE")return[q,T.FUNCTION_CALL];if(w==="REMOVE")return q+`;
`}throw Error("Unhandled combination (lists_getIndex).")},y=function(c,b){function w(){if(z.match(/^\w+$/))return"";const Je=b.nameDB_.getDistinctName("tmpList",s.NameType$$module$build$src$core$names.VARIABLE),At="var "+Je+" = "+z+`;
`;return z=Je,At}let z=b.valueToCode(c,"LIST",T.MEMBER)||"[]";const q=c.getFieldValue("MODE")||"GET";var ee=c.getFieldValue("WHERE")||"FROM_START";const Pe=b.valueToCode(c,"TO",T.ASSIGNMENT)||"null";switch(ee){case"FIRST":if(q==="SET")return z+"[0] = "+Pe+`;
`;if(q==="INSERT")return z+".unshift("+Pe+`);
`;break;case"LAST":if(q==="SET")return w()+(z+"["+z+".length - 1] = "+Pe+`;
`);if(q==="INSERT")return z+".push("+Pe+`);
`;break;case"FROM_START":if(c=b.getAdjusted(c,"AT"),q==="SET")return z+"["+c+"] = "+Pe+`;
`;if(q==="INSERT")return z+".splice("+c+", 0, "+Pe+`);
`;break;case"FROM_END":if(c=b.getAdjusted(c,"AT",1,!1,T.SUBTRACTION),ee=w(),q==="SET")return ee+(z+"["+z+".length - "+c+"] = "+Pe+`;
`);if(q==="INSERT")return ee+(z+".splice("+z+".length - "+c+", 0, "+Pe+`);
`);break;case"RANDOM":if(c=w(),ee=b.nameDB_.getDistinctName("tmpX",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+ee+" = Math.floor(Math.random() * "+z+`.length);
`,q==="SET")return c+(z+"["+ee+"] = "+Pe+`;
`);if(q==="INSERT")return c+(z+".splice("+ee+", 0, "+Pe+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},N=function(c,b){var w={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},z=b.valueToCode(c,"LIST",T.MEMBER)||"[]";const q=c.getFieldValue("WHERE1"),ee=c.getFieldValue("WHERE2");if(q==="FIRST"&&ee==="LAST")z+=".slice(0)";else if(z.match(/^\w+$/)||q!=="FROM_END"&&ee==="FROM_START"){switch(q){case"FROM_START":w=b.getAdjusted(c,"AT1");break;case"FROM_END":w=b.getAdjusted(c,"AT1",1,!1,T.SUBTRACTION),w=z+".length - "+w;break;case"FIRST":w="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(ee){case"FROM_START":b=b.getAdjusted(c,"AT2",1);break;case"FROM_END":b=b.getAdjusted(c,"AT2",0,!1,T.SUBTRACTION),b=z+".length - "+b;break;case"LAST":b=z+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}z=z+".slice("+w+", "+b+")"}else{const Pe=b.getAdjusted(c,"AT1");c=b.getAdjusted(c,"AT2"),z=b.provideFunction_("subsequence"+w[q]+w[ee],`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(sequence${q==="FROM_END"||q==="FROM_START"?", at1":""}${ee==="FROM_END"||ee==="FROM_START"?", at2":""}) {
  var start = ${Y("sequence",q,"at1")};
  var end = ${Y("sequence",ee,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+z+(q==="FROM_END"||q==="FROM_START"?", "+Pe:"")+(ee==="FROM_END"||ee==="FROM_START"?", "+c:"")+")"}return[z,T.FUNCTION_CALL]},P=function(c,b){const w=b.valueToCode(c,"LIST",T.FUNCTION_CALL)||"[]",z=c.getFieldValue("DIRECTION")==="1"?1:-1;return c=c.getFieldValue("TYPE"),b=b.provideFunction_("listsGetSortCompare",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[w+".slice().sort("+b+'("'+c+'", '+z+"))",T.FUNCTION_CALL]},F=function(c,b){let w=b.valueToCode(c,"INPUT",T.MEMBER);if(b=b.valueToCode(c,"DELIM",T.NONE)||"''",c=c.getFieldValue("MODE"),c==="SPLIT")w||(w="''"),c="split";else if(c==="JOIN")w||(w="[]"),c="join";else throw Error("Unknown mode: "+c);return[w+"."+c+"("+b+")",T.FUNCTION_CALL]},K=function(c,b){return[(b.valueToCode(c,"LIST",T.FUNCTION_CALL)||"[]")+".slice().reverse()",T.FUNCTION_CALL]},g=function(c,b){var w=0;let z="";b.STATEMENT_PREFIX&&(z+=b.injectId(b.STATEMENT_PREFIX,c));do{const q=b.valueToCode(c,"IF"+w,T.NONE)||"false";let ee=b.statementToCode(c,"DO"+w);b.STATEMENT_SUFFIX&&(ee=b.prefixLines(b.injectId(b.STATEMENT_SUFFIX,c),b.INDENT)+ee),z+=(w>0?" else ":"")+"if ("+q+`) {
`+ee+"}",w++}while(c.getInput("IF"+w));return(c.getInput("ELSE")||b.STATEMENT_SUFFIX)&&(w=c.getInput("ELSE")?b.statementToCode(c,"ELSE"):"",b.STATEMENT_SUFFIX&&(w=b.prefixLines(b.injectId(b.STATEMENT_SUFFIX,c),b.INDENT)+w),z+=` else {
`+w+"}"),z+`
`},d=function(c,b){const w={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[c.getFieldValue("OP")],z=w==="=="||w==="!="?T.EQUALITY:T.RELATIONAL,q=b.valueToCode(c,"A",z)||"0";return c=b.valueToCode(c,"B",z)||"0",[q+" "+w+" "+c,z]},C=function(c,b){const w=c.getFieldValue("OP")==="AND"?"&&":"||",z=w==="&&"?T.LOGICAL_AND:T.LOGICAL_OR;let q=b.valueToCode(c,"A",z);return c=b.valueToCode(c,"B",z),q||c?(b=w==="&&"?"true":"false",q||(q=b),c||(c=b)):c=q="false",[q+" "+w+" "+c,z]},x=function(c,b){const w=T.LOGICAL_NOT;return["!"+(b.valueToCode(c,"BOOL",w)||"true"),w]},k=function(c,b){return[c.getFieldValue("BOOL")==="TRUE"?"true":"false",T.ATOMIC]},H=function(c,b){return["null",T.ATOMIC]},f=function(c,b){const w=b.valueToCode(c,"IF",T.CONDITIONAL)||"false",z=b.valueToCode(c,"THEN",T.CONDITIONAL)||"null";return c=b.valueToCode(c,"ELSE",T.CONDITIONAL)||"null",[w+" ? "+z+" : "+c,T.CONDITIONAL]},I=function(c,b){let w;w=c.getField("TIMES")?String(Number(c.getFieldValue("TIMES"))):b.valueToCode(c,"TIMES",T.ASSIGNMENT)||"0";let z=b.statementToCode(c,"DO");z=b.addLoopTrap(z,c),c="";const q=b.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE);let ee=w;return w.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(w)||(ee=b.nameDB_.getDistinctName("repeat_end",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+ee+" = "+w+`;
`),c+("for (var "+q+" = 0; "+q+" < "+ee+"; "+q+`++) {
`+z+`}
`)},D=function(c,b){const w=c.getFieldValue("MODE")==="UNTIL";let z=b.valueToCode(c,"BOOL",w?T.LOGICAL_NOT:T.NONE)||"false",q=b.statementToCode(c,"DO");return q=b.addLoopTrap(q,c),w&&(z="!"+z),"while ("+z+`) {
`+q+`}
`},U=function(c,b){var w=b.getVariableName(c.getFieldValue("VAR")),z=b.valueToCode(c,"FROM",T.ASSIGNMENT)||"0",q=b.valueToCode(c,"TO",T.ASSIGNMENT)||"0";const ee=b.valueToCode(c,"BY",T.ASSIGNMENT)||"1";let Pe=b.statementToCode(c,"DO");if(Pe=b.addLoopTrap(Pe,c),s.isNumber$$module$build$src$core$utils$string(z)&&s.isNumber$$module$build$src$core$utils$string(q)&&s.isNumber$$module$build$src$core$utils$string(ee))b=Number(z)<=Number(q),c="for ("+w+" = "+z+"; "+w+(b?" <= ":" >= ")+q+"; "+w,w=Math.abs(Number(ee)),c=w===1?c+(b?"++":"--"):c+((b?" += ":" -= ")+w),c+=`) {
`+Pe+`}
`;else{c="";let Je=z;z.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(z)||(Je=b.nameDB_.getDistinctName(w+"_start",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+Je+" = "+z+`;
`),z=q,q.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(q)||(z=b.nameDB_.getDistinctName(w+"_end",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+z+" = "+q+`;
`),q=b.nameDB_.getDistinctName(w+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+q+" = ",c=s.isNumber$$module$build$src$core$utils$string(ee)?c+(Math.abs(Number(ee))+`;
`):c+("Math.abs("+ee+`);
`),c+="if ("+Je+" > "+z+`) {
`,c+=b.INDENT+q+" = -"+q+`;
`,c=c+`}
for (`+(w+" = "+Je+"; "+q+" >= 0 ? "+w+" <= "+z+" : "+w+" >= "+z+"; "+w+" += "+q+`) {
`+Pe+`}
`)}return c},O=function(c,b){const w=b.getVariableName(c.getFieldValue("VAR"));var z=b.valueToCode(c,"LIST",T.ASSIGNMENT)||"[]";let q=b.statementToCode(c,"DO");q=b.addLoopTrap(q,c),c="";let ee=z;return z.match(/^\w+$/)||(ee=b.nameDB_.getDistinctName(w+"_list",s.NameType$$module$build$src$core$names.VARIABLE),c+="var "+ee+" = "+z+`;
`),z=b.nameDB_.getDistinctName(w+"_index",s.NameType$$module$build$src$core$names.VARIABLE),q=b.INDENT+w+" = "+ee+"["+z+`];
`+q,c+("for (var "+z+" in "+ee+`) {
`+q+`}
`)},X=function(c,b){let w="";if(b.STATEMENT_PREFIX&&(w+=b.injectId(b.STATEMENT_PREFIX,c)),b.STATEMENT_SUFFIX&&(w+=b.injectId(b.STATEMENT_SUFFIX,c)),b.STATEMENT_PREFIX){const z=c.getSurroundLoop();z&&!z.suppressPrefixSuffix&&(w+=b.injectId(b.STATEMENT_PREFIX,z))}switch(c.getFieldValue("FLOW")){case"BREAK":return w+`break;
`;case"CONTINUE":return w+`continue;
`}throw Error("Unknown flow statement.")},W=function(c,b){return c=Number(c.getFieldValue("NUM")),[String(c),c>=0?T.ATOMIC:T.UNARY_NEGATION]},re=function(c,b){var w={ADD:[" + ",T.ADDITION],MINUS:[" - ",T.SUBTRACTION],MULTIPLY:[" * ",T.MULTIPLICATION],DIVIDE:[" / ",T.DIVISION],POWER:[null,T.NONE]}[c.getFieldValue("OP")];const z=w[0];w=w[1];const q=b.valueToCode(c,"A",w)||"0";return c=b.valueToCode(c,"B",w)||"0",z?[q+z+c,w]:["Math.pow("+q+", "+c+")",T.FUNCTION_CALL]},se=function(c,b){const w=c.getFieldValue("OP");let z;if(w==="NEG")return c=b.valueToCode(c,"NUM",T.UNARY_NEGATION)||"0",c[0]==="-"&&(c=" "+c),["-"+c,T.UNARY_NEGATION];switch(c=w==="SIN"||w==="COS"||w==="TAN"?b.valueToCode(c,"NUM",T.DIVISION)||"0":b.valueToCode(c,"NUM",T.NONE)||"0",w){case"ABS":z="Math.abs("+c+")";break;case"ROOT":z="Math.sqrt("+c+")";break;case"LN":z="Math.log("+c+")";break;case"EXP":z="Math.exp("+c+")";break;case"POW10":z="Math.pow(10,"+c+")";break;case"ROUND":z="Math.round("+c+")";break;case"ROUNDUP":z="Math.ceil("+c+")";break;case"ROUNDDOWN":z="Math.floor("+c+")";break;case"SIN":z="Math.sin("+c+" / 180 * Math.PI)";break;case"COS":z="Math.cos("+c+" / 180 * Math.PI)";break;case"TAN":z="Math.tan("+c+" / 180 * Math.PI)"}if(z)return[z,T.FUNCTION_CALL];switch(w){case"LOG10":z="Math.log("+c+") / Math.log(10)";break;case"ASIN":z="Math.asin("+c+") / Math.PI * 180";break;case"ACOS":z="Math.acos("+c+") / Math.PI * 180";break;case"ATAN":z="Math.atan("+c+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+w)}return[z,T.DIVISION]},Ue=function(c,b){return{PI:["Math.PI",T.MEMBER],E:["Math.E",T.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",T.DIVISION],SQRT2:["Math.SQRT2",T.MEMBER],SQRT1_2:["Math.SQRT1_2",T.MEMBER],INFINITY:["Infinity",T.ATOMIC]}[c.getFieldValue("CONSTANT")]},me=function(c,b){var w={EVEN:[" % 2 === 0",T.MODULUS,T.EQUALITY],ODD:[" % 2 === 1",T.MODULUS,T.EQUALITY],WHOLE:[" % 1 === 0",T.MODULUS,T.EQUALITY],POSITIVE:[" > 0",T.RELATIONAL,T.RELATIONAL],NEGATIVE:[" < 0",T.RELATIONAL,T.RELATIONAL],DIVISIBLE_BY:[null,T.MODULUS,T.EQUALITY],PRIME:[null,T.NONE,T.FUNCTION_CALL]};const z=c.getFieldValue("PROPERTY"),[q,ee,Pe]=w[z];return w=b.valueToCode(c,"NUMBER_TO_CHECK",ee)||"0",z==="PRIME"?c=b.provideFunction_("mathIsPrime",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+w+")":z==="DIVISIBLE_BY"?(c=b.valueToCode(c,"DIVISOR",T.MODULUS)||"0",c=w+" % "+c+" === 0"):c=w+q,[c,Pe]},Se=function(c,b){const w=b.valueToCode(c,"DELTA",T.ADDITION)||"0";return c=b.getVariableName(c.getFieldValue("VAR")),c+" = (typeof "+c+" === 'number' ? "+c+" : 0) + "+w+`;
`},xe=function(c,b){var w=c.getFieldValue("OP");switch(w){case"SUM":c=b.valueToCode(c,"LIST",T.MEMBER)||"[]",c+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":c=b.valueToCode(c,"LIST",T.NONE)||"[]",c="Math.min.apply(null, "+c+")";break;case"MAX":c=b.valueToCode(c,"LIST",T.NONE)||"[]",c="Math.max.apply(null, "+c+")";break;case"AVERAGE":w=b.provideFunction_("mathMean",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),c=b.valueToCode(c,"LIST",T.NONE)||"[]",c=w+"("+c+")";break;case"MEDIAN":w=b.provideFunction_("mathMedian",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),c=b.valueToCode(c,"LIST",T.NONE)||"[]",c=w+"("+c+")";break;case"MODE":w=b.provideFunction_("mathModes",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),c=b.valueToCode(c,"LIST",T.NONE)||"[]",c=w+"("+c+")";break;case"STD_DEV":w=b.provideFunction_("mathStandardDeviation",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),c=b.valueToCode(c,"LIST",T.NONE)||"[]",c=w+"("+c+")";break;case"RANDOM":w=b.provideFunction_("mathRandomList",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),c=b.valueToCode(c,"LIST",T.NONE)||"[]",c=w+"("+c+")";break;default:throw Error("Unknown operator: "+w)}return[c,T.FUNCTION_CALL]},Ce=function(c,b){const w=b.valueToCode(c,"DIVIDEND",T.MODULUS)||"0";return c=b.valueToCode(c,"DIVISOR",T.MODULUS)||"0",[w+" % "+c,T.MODULUS]},Ie=function(c,b){const w=b.valueToCode(c,"VALUE",T.NONE)||"0",z=b.valueToCode(c,"LOW",T.NONE)||"0";return c=b.valueToCode(c,"HIGH",T.NONE)||"Infinity",["Math.min(Math.max("+w+", "+z+"), "+c+")",T.FUNCTION_CALL]},je=function(c,b){const w=b.valueToCode(c,"FROM",T.NONE)||"0";return c=b.valueToCode(c,"TO",T.NONE)||"0",[b.provideFunction_("mathRandomInt",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+w+", "+c+")",T.FUNCTION_CALL]},Ve=function(c,b){return["Math.random()",T.FUNCTION_CALL]},Me=function(c,b){const w=b.valueToCode(c,"X",T.NONE)||"0";return["Math.atan2("+(b.valueToCode(c,"Y",T.NONE)||"0")+", "+w+") / Math.PI * 180",T.DIVISION]},ce=function(c,b){const w=b.getProcedureName(c.getFieldValue("NAME"));var z="";b.STATEMENT_PREFIX&&(z+=b.injectId(b.STATEMENT_PREFIX,c)),b.STATEMENT_SUFFIX&&(z+=b.injectId(b.STATEMENT_SUFFIX,c)),z&&(z=b.prefixLines(z,b.INDENT));let q="";b.INFINITE_LOOP_TRAP&&(q=b.prefixLines(b.injectId(b.INFINITE_LOOP_TRAP,c),b.INDENT));let ee="";c.getInput("STACK")&&(ee=b.statementToCode(c,"STACK"));let Pe="";c.getInput("RETURN")&&(Pe=b.valueToCode(c,"RETURN",T.NONE)||"");let Je="";ee&&Pe&&(Je=z),Pe&&(Pe=b.INDENT+"return "+Pe+`;
`);const At=[],it=c.getVars();for(let wi=0;wi<it.length;wi++)At[wi]=b.getVariableName(it[wi]);return z="function "+w+"("+At.join(", ")+`) {
`+z+q+ee+Je+Pe+"}",z=b.scrub_(c,z),b.definitions_["%"+w]=z,null},te=function(c,b){const w=b.getProcedureName(c.getFieldValue("NAME")),z=[],q=c.getVars();for(let ee=0;ee<q.length;ee++)z[ee]=b.valueToCode(c,"ARG"+ee,T.NONE)||"null";return[w+"("+z.join(", ")+")",T.FUNCTION_CALL]},ue=function(c,b){return b.forBlock.procedures_callreturn(c,b)[0]+`;
`},ge=function(c,b){let w="if ("+(b.valueToCode(c,"CONDITION",T.NONE)||"false")+`) {
`;return b.STATEMENT_SUFFIX&&(w+=b.prefixLines(b.injectId(b.STATEMENT_SUFFIX,c),b.INDENT)),c.hasReturnValue_?(c=b.valueToCode(c,"VALUE",T.NONE)||"null",w+=b.INDENT+"return "+c+`;
`):w+=b.INDENT+`return;
`,w+`}
`},we=function(c,b){return[b.quote_(c.getFieldValue("TEXT")),T.ATOMIC]},st=function(c,b){switch(c.itemCount_){case 0:return["''",T.ATOMIC];case 1:return c=b.valueToCode(c,"ADD0",T.NONE)||"''",V(c);case 2:var w=b.valueToCode(c,"ADD0",T.NONE)||"''";return c=b.valueToCode(c,"ADD1",T.NONE)||"''",[V(w)[0]+" + "+V(c)[0],T.ADDITION];default:w=Array(c.itemCount_);for(let z=0;z<c.itemCount_;z++)w[z]=b.valueToCode(c,"ADD"+z,T.NONE)||"''";return["["+w.join(",")+"].join('')",T.FUNCTION_CALL]}},Be=function(c,b){const w=b.getVariableName(c.getFieldValue("VAR"));return c=b.valueToCode(c,"TEXT",T.NONE)||"''",w+" += "+V(c)[0]+`;
`},Rt=function(c,b){return[(b.valueToCode(c,"VALUE",T.MEMBER)||"''")+".length",T.MEMBER]},de=function(c,b){return["!"+(b.valueToCode(c,"VALUE",T.MEMBER)||"''")+".length",T.LOGICAL_NOT]},Le=function(c,b){const w=c.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",z=b.valueToCode(c,"FIND",T.NONE)||"''";return b=(b.valueToCode(c,"VALUE",T.MEMBER)||"''")+"."+w+"("+z+")",c.workspace.options.oneBasedIndex?[b+" + 1",T.ADDITION]:[b,T.FUNCTION_CALL]},_e=function(c,b){const w=c.getFieldValue("WHERE")||"FROM_START",z=b.valueToCode(c,"VALUE",w==="RANDOM"?T.NONE:T.MEMBER)||"''";switch(w){case"FIRST":return[z+".charAt(0)",T.FUNCTION_CALL];case"LAST":return[z+".slice(-1)",T.FUNCTION_CALL];case"FROM_START":return c=b.getAdjusted(c,"AT"),[z+".charAt("+c+")",T.FUNCTION_CALL];case"FROM_END":return c=b.getAdjusted(c,"AT",1,!0),[z+".slice("+c+").charAt(0)",T.FUNCTION_CALL];case"RANDOM":return[b.provideFunction_("textRandomLetter",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+z+")",T.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},be=function(c,b){var w={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const z=c.getFieldValue("WHERE1"),q=c.getFieldValue("WHERE2");var ee=z!=="FROM_END"&&z!=="LAST"&&q!=="FROM_END"&&q!=="LAST",Pe=b.valueToCode(c,"STRING",ee?T.MEMBER:T.NONE)||"''";if(z==="FIRST"&&q==="LAST")return[Pe,T.NONE];if(Pe.match(/^'?\w+'?$/)||ee){switch(z){case"FROM_START":w=b.getAdjusted(c,"AT1");break;case"FROM_END":w=b.getAdjusted(c,"AT1",1,!1,T.SUBTRACTION),w=Pe+".length - "+w;break;case"FIRST":w="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(q){case"FROM_START":b=b.getAdjusted(c,"AT2",1);break;case"FROM_END":b=b.getAdjusted(c,"AT2",0,!1,T.SUBTRACTION),b=Pe+".length - "+b;break;case"LAST":b=Pe+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}Pe=Pe+".slice("+w+", "+b+")"}else ee=b.getAdjusted(c,"AT1"),c=b.getAdjusted(c,"AT2"),Pe=b.provideFunction_("subsequence"+w[z]+w[q],`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(sequence${z==="FROM_END"||z==="FROM_START"?", at1":""}${q==="FROM_END"||q==="FROM_START"?", at2":""}) {
  var start = ${J("sequence",z,"at1")};
  var end = ${J("sequence",q,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+Pe+(z==="FROM_END"||z==="FROM_START"?", "+ee:"")+(q==="FROM_END"||q==="FROM_START"?", "+c:"")+")";return[Pe,T.FUNCTION_CALL]},We=function(c,b){const w={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[c.getFieldValue("CASE")];return c=b.valueToCode(c,"TEXT",w?T.MEMBER:T.NONE)||"''",[w?c+w:b.provideFunction_("textToTitleCase",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+c+")",T.FUNCTION_CALL]},Ke=function(c,b){const w={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[c.getFieldValue("MODE")];return[(b.valueToCode(c,"TEXT",T.MEMBER)||"''")+w,T.FUNCTION_CALL]},at=function(c,b){return"window.alert("+(b.valueToCode(c,"TEXT",T.NONE)||"''")+`);
`},ct=function(c,b){return b="window.prompt("+(c.getField("TEXT")?b.quote_(c.getFieldValue("TEXT")):b.valueToCode(c,"TEXT",T.NONE)||"''")+")",c.getFieldValue("TYPE")==="NUMBER"&&(b="Number("+b+")"),[b,T.FUNCTION_CALL]},Ht=function(c,b){const w=b.valueToCode(c,"TEXT",T.NONE)||"''";return c=b.valueToCode(c,"SUB",T.NONE)||"''",[b.provideFunction_("textCount",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+w+", "+c+")",T.FUNCTION_CALL]},pt=function(c,b){const w=b.valueToCode(c,"TEXT",T.NONE)||"''",z=b.valueToCode(c,"FROM",T.NONE)||"''";return c=b.valueToCode(c,"TO",T.NONE)||"''",[b.provideFunction_("textReplace",`
function ${b.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+w+", "+z+", "+c+")",T.FUNCTION_CALL]},St=function(c,b){return[(b.valueToCode(c,"TEXT",T.MEMBER)||"''")+".split('').reverse().join('')",T.FUNCTION_CALL]},Et=function(c,b){return[b.getVariableName(c.getFieldValue("VAR")),T.ATOMIC]},dt=function(c,b){const w=b.valueToCode(c,"VALUE",T.ASSIGNMENT)||"0";return b.getVariableName(c.getFieldValue("VAR"))+" = "+w+`;
`},T;(function(c){c[c.ATOMIC=0]="ATOMIC",c[c.NEW=1.1]="NEW",c[c.MEMBER=1.2]="MEMBER",c[c.FUNCTION_CALL=2]="FUNCTION_CALL",c[c.INCREMENT=3]="INCREMENT",c[c.DECREMENT=3]="DECREMENT",c[c.BITWISE_NOT=4.1]="BITWISE_NOT",c[c.UNARY_PLUS=4.2]="UNARY_PLUS",c[c.UNARY_NEGATION=4.3]="UNARY_NEGATION",c[c.LOGICAL_NOT=4.4]="LOGICAL_NOT",c[c.TYPEOF=4.5]="TYPEOF",c[c.VOID=4.6]="VOID",c[c.DELETE=4.7]="DELETE",c[c.AWAIT=4.8]="AWAIT",c[c.EXPONENTIATION=5]="EXPONENTIATION",c[c.MULTIPLICATION=5.1]="MULTIPLICATION",c[c.DIVISION=5.2]="DIVISION",c[c.MODULUS=5.3]="MODULUS",c[c.SUBTRACTION=6.1]="SUBTRACTION",c[c.ADDITION=6.2]="ADDITION",c[c.BITWISE_SHIFT=7]="BITWISE_SHIFT",c[c.RELATIONAL=8]="RELATIONAL",c[c.IN=8]="IN",c[c.INSTANCEOF=8]="INSTANCEOF",c[c.EQUALITY=9]="EQUALITY",c[c.BITWISE_AND=10]="BITWISE_AND",c[c.BITWISE_XOR=11]="BITWISE_XOR",c[c.BITWISE_OR=12]="BITWISE_OR",c[c.LOGICAL_AND=13]="LOGICAL_AND",c[c.LOGICAL_OR=14]="LOGICAL_OR",c[c.CONDITIONAL=15]="CONDITIONAL",c[c.ASSIGNMENT=16]="ASSIGNMENT",c[c.YIELD=17]="YIELD",c[c.COMMA=18]="COMMA",c[c.NONE=99]="NONE"})(T||(T={}));var ae=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(c="JavaScript"){super(c),this.ORDER_OVERRIDES=[[T.FUNCTION_CALL,T.MEMBER],[T.FUNCTION_CALL,T.FUNCTION_CALL],[T.MEMBER,T.MEMBER],[T.MEMBER,T.FUNCTION_CALL],[T.LOGICAL_NOT,T.LOGICAL_NOT],[T.MULTIPLICATION,T.MULTIPLICATION],[T.ADDITION,T.ADDITION],[T.LOGICAL_AND,T.LOGICAL_AND],[T.LOGICAL_OR,T.LOGICAL_OR]],this.isInitialized=!1;for(const b in T)c=T[b],typeof c!="string"&&(this["ORDER_"+b]=c);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(c){super.init(c),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(c.getVariableMap()),this.nameDB_.populateVariables(c),this.nameDB_.populateProcedures(c);const b=[];var w=s.allDeveloperVariables$$module$build$src$core$variables(c);for(let z=0;z<w.length;z++)b.push(this.nameDB_.getName(w[z],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(c=s.allUsedVarModels$$module$build$src$core$variables(c),w=0;w<c.length;w++)b.push(this.nameDB_.getName(c[w].getId(),s.NameType$$module$build$src$core$names.VARIABLE));b.length&&(this.definitions_.variables="var "+b.join(", ")+";"),this.isInitialized=!0}finish(c){const b=Object.values(this.definitions_);return super.finish(c),this.isInitialized=!1,this.nameDB_.reset(),b.join(`

`)+`


`+c}scrubNakedValue(c){return c+`;
`}quote_(c){return c=c.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+c+"'"}multiline_quote_(c){return c.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(c,b,w=!1){let z="";if(!c.outputConnection||!c.outputConnection.targetConnection){var q=c.getCommentText();q&&(q=s.wrap$$module$build$src$core$utils$string(q,this.COMMENT_WRAP-3),z+=this.prefixLines(q+`
`,"// "));for(let ee=0;ee<c.inputList.length;ee++)c.inputList[ee].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(q=c.inputList[ee].connection.targetBlock())&&(q=this.allNestedComments(q))&&(z+=this.prefixLines(q,"// "))}return c=c.nextConnection&&c.nextConnection.targetBlock(),w=w?"":this.blockToCode(c),z+b+w}getAdjusted(c,b,w=0,z=!1,q=T.NONE){c.workspace.options.oneBasedIndex&&w--;const ee=c.workspace.options.oneBasedIndex?"1":"0";let Pe=q;return w>0?Pe=T.ADDITION:w<0?Pe=T.SUBTRACTION:z&&(Pe=T.UNARY_NEGATION),c=this.valueToCode(c,b,Pe)||ee,w===0&&!z?c:s.isNumber$$module$build$src$core$utils$string(c)?(c=String(Number(c)+w),z&&(c=String(-Number(c))),c):(w>0?c=`${c} + ${w}`:w<0&&(c=`${c} - ${-w}`),z&&(c=w?`-(${c})`:`-${c}`),Math.floor(q)>=Math.floor(Pe)&&(c=`(${c})`),c)}},Y=function(c,b,w){return b==="FIRST"?"0":b==="FROM_END"?c+".length - 1 - "+w:b==="LAST"?c+".length - 1":w},Te={};Te.lists_create_empty=l,Te.lists_create_with=p,Te.lists_getIndex=L,Te.lists_getSublist=N,Te.lists_indexOf=M,Te.lists_isEmpty=R,Te.lists_length=$,Te.lists_repeat=E,Te.lists_reverse=K,Te.lists_setIndex=y,Te.lists_sort=P,Te.lists_split=F;var ke={};ke.controls_if=g,ke.controls_ifelse=g,ke.logic_boolean=k,ke.logic_compare=d,ke.logic_negate=x,ke.logic_null=H,ke.logic_operation=C,ke.logic_ternary=f;var ve={};ve.controls_flow_statements=X,ve.controls_for=U,ve.controls_forEach=O,ve.controls_repeat=I,ve.controls_repeat_ext=I,ve.controls_whileUntil=D;var Xe={};Xe.math_arithmetic=re,Xe.math_atan2=Me,Xe.math_change=Se,Xe.math_constant=Ue,Xe.math_constrain=Ie,Xe.math_modulo=Ce,Xe.math_number=W,Xe.math_number_property=me,Xe.math_on_list=xe,Xe.math_random_float=Ve,Xe.math_random_int=je,Xe.math_round=se,Xe.math_single=se,Xe.math_trig=se;var le={};le.procedures_callnoreturn=ue,le.procedures_callreturn=te,le.procedures_defnoreturn=ce,le.procedures_defreturn=ce,le.procedures_ifreturn=ge;var v=/^\s*'([^']|\\')*'\s*$/,V=function(c){return v.test(c)?[c,T.ATOMIC]:["String("+c+")",T.FUNCTION_CALL]},J=function(c,b,w){return b==="FIRST"?"0":b==="FROM_END"?c+".length - 1 - "+w:b==="LAST"?c+".length - 1":w},ne={};ne.text=we,ne.text_append=Be,ne.text_changeCase=We,ne.text_charAt=_e,ne.text_count=Ht,ne.text_getSubstring=be,ne.text_indexOf=Le,ne.text_isEmpty=de,ne.text_join=st,ne.text_length=Rt,ne.text_print=at,ne.text_prompt=ct,ne.text_prompt_ext=ct,ne.text_replace=pt,ne.text_reverse=St,ne.text_trim=Ke;var Ne={};Ne.variables_get=Et,Ne.variables_set=dt;var _={};_.variables_get_dynamic=Et,_.variables_set_dynamic=dt;var A=new ae,m=Object.assign({},Te,ke,ve,Xe,le,ne,Ne,_);for(const c in m)A.forBlock[c]=m[c];var h={};return h.JavascriptGenerator=ae,h.Order=T,h.javascriptGenerator=A,h.__namespace__=s,h})})(ih)),ih.exports}var lF=Wh();const uF=xu(lF),{JavascriptGenerator:_U,Order:_t,javascriptGenerator:$t}=uF;var nh={exports:{}};var cF=nh.exports,fv;function dF(){return fv||(fv=1,(function(i,n){(function(o,s){i.exports=s(Er())})(cF,o=>(()=>{var s={370:y=>{y.exports=o}},l={};function p(y){var N=l[y];if(N!==void 0)return N.exports;var P=l[y]={exports:{}};return s[y](P,P.exports,p),P.exports}p.d=(y,N)=>{for(var P in N)p.o(N,P)&&!p.o(y,P)&&Object.defineProperty(y,P,{enumerable:!0,get:N[P]})},p.o=(y,N)=>Object.prototype.hasOwnProperty.call(y,N),p.r=y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(y,"__esModule",{value:!0})};var E={};p.r(E),p.d(E,{FieldAngle:()=>M,Mode:()=>$,registerFieldAngle:()=>L});var $,R=p(370);class M extends R.FieldNumber{constructor(N,P,F){super(R.Field.SKIP_SETUP),this.clockwise=!1,this.offset=0,this.displayMin=0,this.displayMax=360,this.minorTick=15,this.majorTick=45,this.symbol="°",this.boundEvents=[],this.line=null,this.gauge=null,this.symbolElement=null,N!==R.Field.SKIP_SETUP&&(F?(this.configure_(F),F.min!==void 0&&F.min!==null||this.setMin(M.DEFAULT_MIN),F.max!==void 0&&F.max!==null||this.setMax(M.DEFAULT_MAX),F.precision!==void 0&&F.precision!==null||this.setPrecision(M.DEFAULT_PRECISION)):(this.setMin(M.DEFAULT_MIN),this.setMax(M.DEFAULT_MAX),this.setPrecision(M.DEFAULT_PRECISION)),this.setValue(N),P&&this.setValidator(P))}configure_(N){switch(super.configure_(N),N.mode){case $.COMPASS:this.clockwise=!0,this.offset=90;break;case $.PROTRACTOR:this.clockwise=!1,this.offset=0}if(N.clockwise!==void 0&&(this.clockwise=N.clockwise),N.offset!==void 0&&(this.offset=N.offset),N.displayMin!==void 0&&(this.displayMin=N.displayMin),N.displayMax!==void 0&&(this.displayMax=N.displayMax),N.minorTick!==void 0&&(this.minorTick=N.minorTick),N.majorTick!==void 0&&(this.majorTick=N.majorTick),N.symbol!==void 0&&(this.symbol=N.symbol),this.displayMin>=this.displayMax)throw Error("Display min must be larger than display max");if(this.minorTick<0||this.majorTick<0)throw Error("Ticks cannot be negative")}initView(){super.initView(),this.symbol&&(this.symbolElement=R.utils.dom.createSvgElement(R.utils.Svg.TSPAN,{}),this.symbolElement.appendChild(document.createTextNode(this.symbol)),this.getTextElement().appendChild(this.symbolElement))}render_(){super.render_(),this.updateGraph()}showEditor_(N){const P=R.utils.userAgent.MOBILE||R.utils.userAgent.ANDROID||R.utils.userAgent.IPAD;super.showEditor_(N,P,!1);const F=this.dropdownCreate();R.DropDownDiv.getContentDiv().appendChild(F);const K=this.getSourceBlock();K instanceof R.BlockSvg&&R.DropDownDiv.setColour(K.style.colourPrimary,K.style.colourTertiary),R.DropDownDiv.showPositionedByField(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const N=R.utils.dom.createSvgElement(R.utils.Svg.SVG,{xmlns:R.utils.dom.SVG_NS,"xmlns:html":R.utils.dom.HTML_NS,"xmlns:xlink":R.utils.dom.XLINK_NS,version:"1.1",height:2*M.HALF+"px",width:2*M.HALF+"px"});N.style.touchAction="none";const P=R.utils.dom.createSvgElement(R.utils.Svg.CIRCLE,{cx:M.HALF,cy:M.HALF,r:M.RADIUS,class:"blocklyAngleCircle"},N);this.gauge=R.utils.dom.createSvgElement(R.utils.Svg.PATH,{class:"blocklyAngleGauge"},N),this.line=R.utils.dom.createSvgElement(R.utils.Svg.LINE,{x1:M.HALF,y1:M.HALF,class:"blocklyAngleLine"},N);const F=R.utils.math.toDegrees(this.fieldAngleToRadians(this.min_)),K=R.utils.math.toDegrees(this.fieldAngleToRadians(this.max_)),g=(k,H)=>{let f=Math.ceil(F/k)*k,I=Math.floor(K/k)*k;this.clockwise?f<I&&(f+=360):f>I&&(I+=360),I===f&&(I+=360),f>I&&([f,I]=[I,f]);for(let D=f;D<=I;D+=k)R.utils.dom.createSvgElement(R.utils.Svg.LINE,{x1:M.HALF+M.RADIUS,y1:M.HALF,x2:M.HALF+M.RADIUS-H,y2:M.HALF,class:"blocklyAngleMarks",transform:"rotate("+-D+","+M.HALF+","+M.HALF+")"},N)},d=this.displayMax-this.displayMin,C=360/d*this.minorTick;C&&g(C,5);const x=360/d*this.majorTick;return x&&g(x,10),this.boundEvents.push(R.browserEvents.conditionalBind(N,"click",this,this.hide)),this.boundEvents.push(R.browserEvents.conditionalBind(P,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(R.browserEvents.conditionalBind(P,"pointermove",this,this.onMouseMove_,!0)),N}dropdownDispose(){for(const N of this.boundEvents)R.browserEvents.unbind(N);this.boundEvents.length=0,this.gauge=null,this.line=null}hide(){R.DropDownDiv.hideIfOwner(this),R.WidgetDiv.hide()}onMouseMove_(N){var P,F;const K=(F=(P=this.gauge)===null||P===void 0?void 0:P.ownerSVGElement)===null||F===void 0?void 0:F.getBoundingClientRect();if(!K)return;const g=N.clientX-K.left-M.HALF,d=N.clientY-K.top-M.HALF;let C=Math.atan2(-d,g);isNaN(C)||(C=this.radiansToFieldAngle(C),this.displayMouseOrKeyboardValue(C))}radiansToFieldAngle(N){return N/=2*Math.PI,N-=this.offset/360,this.clockwise&&(N*=-1),(N%=1)<0&&(N+=1),(N*=this.displayMax-this.displayMin)+this.displayMin}fieldAngleToRadians(N){return N-=this.displayMin,N/=this.displayMax-this.displayMin,this.clockwise&&(N*=-1),N+=this.offset/360,(N%=1)>.5&&(N-=1),N<-.5&&(N+=1),N*(2*Math.PI)}displayMouseOrKeyboardValue(N){const P=this.doClassValidation_(N);if(P!==null&&P!==this.value_){const F=this.value_;this.setEditorValue_(P,!1),this.sourceBlock_&&R.Events.isEnabled()&&this.value_!==F&&R.Events.fire(new(R.Events.get(R.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,F,this.value_))}}updateGraph(){if(!this.gauge||!this.line)return;let N=Number(this.getText());if(isNaN(N))return;N=this.fieldAngleToRadians(N);let P=`M ${M.HALF},${M.HALF}`,F=M.HALF,K=M.HALF;if(!isNaN(N)){const g=R.utils.math.toRadians(this.offset),d=Math.cos(g)*M.RADIUS,C=Math.sin(g)*-M.RADIUS;F+=Math.cos(N)*M.RADIUS,K-=Math.sin(N)*M.RADIUS;const x=Number(this.clockwise);let k=Math.abs(Math.floor((N-g)/Math.PI)%2);x&&(k=1-k),P+=` l ${d},${C} A ${M.RADIUS},${M.RADIUS} 0 ${k} ${x} ${F},${K} z`}this.gauge.setAttribute("d",P),this.line.setAttribute("x2",`${F}`),this.line.setAttribute("y2",`${K}`)}onHtmlInputKeyDown_(N){super.onHtmlInputKeyDown_(N);const P=this.getSourceBlock();if(!P)throw new Error("The field has not yet been attached to its input. Call appendField to attach it.");let F=0;switch(N.key){case"ArrowLeft":F=P.RTL?1:-1;break;case"ArrowRight":F=P.RTL?-1:1;break;case"ArrowDown":F=-1;break;case"ArrowUp":F=1}if(F){const K=this.getValue();this.displayMouseOrKeyboardValue(K+F*this.precision_),N.preventDefault(),N.stopPropagation()}}doClassValidation_(N){if(N===null)return null;let P=Number(N);if(isNaN(P)||!isFinite(P))return null;P=this.wrapValue(P),this.precision_&&(P=Math.round(P/this.precision_)*this.precision_),P=Number(P.toFixed(10));const F=this.displayMax-this.displayMin,K=this.max_-this.min_;if(P<this.min_){const g=this.min_-P;P=g<F-g-K?this.min_:this.max_}if(P>this.max_){const g=P-this.max_;P=F-g-K<g?this.min_:this.max_}return P}wrapValue(N){const P=this.displayMax-this.displayMin;for(N%=P;N<this.displayMin;)N+=P;for(;N>=this.displayMax;)N-=P;return N}static fromJson(N){return new this(N.value,void 0,N)}}function L(){R.fieldRegistry.register("field_angle",M)}return M.HALF=50,M.RADIUS=M.HALF-1,M.DEFAULT_PRECISION=15,M.DEFAULT_MIN=0,M.DEFAULT_MAX=360,M.prototype.DEFAULT_VALUE=0,R.Css.register(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),(function(y){y.COMPASS="compass",y.PROTRACTOR="protractor"})($||($={})),E})())})(nh)),nh.exports}var Gm=dF();Gm.registerFieldAngle();mt.math_angle={init:function(){this.appendDummyInput().appendField(new Gm.FieldAngle(90),"Angle"),this.setOutput(!0,"Number"),this.setStyle("math_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.math_angle=function(i){return[i.getFieldValue("Angle"),_t.ATOMIC]};mt.math_convert_degrees={init:function(){this.appendValueInput("Degrees").setCheck("Number").appendField(new bo([["to degrees","degrees"],["to radians","radians"]]),"to"),this.setOutput(!0,"Number"),this.setStyle("math_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.math_convert_degrees=function(i,n){const o=i.getFieldValue("to"),s=n.valueToCode(i,"Degrees",_t.ATOMIC);let l;return o==="degrees"?l=`(${s}*180/Math.PI)`:l=`(${s}*Math.PI/180)`,[l,_t.ATOMIC]};var rh={exports:{}},oh={exports:{}},hF=oh.exports,gv;function Wm(){return gv||(gv=1,(function(i,n){(function(o,s){i.exports=s(Er())})(hF,function(o){var s=o.__namespace__,l=function(_,A){return["[]",T.ATOMIC]},p=function(_,A){const m=Array(_.itemCount_);for(let h=0;h<_.itemCount_;h++)m[h]=A.valueToCode(_,"ADD"+h,T.NONE)||"null";return["["+m.join(", ")+"]",T.ATOMIC]},E=function(_,A){const m=A.valueToCode(_,"ITEM",T.NONE)||"null";return["new List.filled("+(A.valueToCode(_,"NUM",T.NONE)||"0")+", "+m+")",T.UNARY_POSTFIX]},$=function(_,A){return[(A.valueToCode(_,"VALUE",T.UNARY_POSTFIX)||"[]")+".length",T.UNARY_POSTFIX]},R=function(_,A){return[(A.valueToCode(_,"VALUE",T.UNARY_POSTFIX)||"[]")+".isEmpty",T.UNARY_POSTFIX]},M=function(_,A){const m=_.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",h=A.valueToCode(_,"FIND",T.NONE)||"''";return A=(A.valueToCode(_,"VALUE",T.UNARY_POSTFIX)||"[]")+"."+m+"("+h+")",_.workspace.options.oneBasedIndex?[A+" + 1",T.ADDITIVE]:[A,T.UNARY_POSTFIX]},L=function(_,A){function m(){const w=A.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),z="List "+w+" = "+b+`;
`;return b=w,z}var h=_.getFieldValue("MODE")||"GET";const c=_.getFieldValue("WHERE")||"FROM_START";let b=A.valueToCode(_,"VALUE",c==="RANDOM"||c==="FROM_END"?T.NONE:T.UNARY_POSTFIX)||"[]";if((c!=="RANDOM"||h!=="REMOVE")&&c!=="FROM_END"||b.match(/^\w+$/))switch(c){case"FIRST":if(h==="GET")return[b+".first",T.UNARY_POSTFIX];if(h==="GET_REMOVE")return[b+".removeAt(0)",T.UNARY_POSTFIX];if(h==="REMOVE")return b+`.removeAt(0);
`;break;case"LAST":if(h==="GET")return[b+".last",T.UNARY_POSTFIX];if(h==="GET_REMOVE")return[b+".removeLast()",T.UNARY_POSTFIX];if(h==="REMOVE")return b+`.removeLast();
`;break;case"FROM_START":if(_=A.getAdjusted(_,"AT"),h==="GET")return[b+"["+_+"]",T.UNARY_POSTFIX];if(h==="GET_REMOVE")return[b+".removeAt("+_+")",T.UNARY_POSTFIX];if(h==="REMOVE")return b+".removeAt("+_+`);
`;break;case"FROM_END":if(_=A.getAdjusted(_,"AT",1,!1,T.ADDITIVE),h==="GET")return[b+"["+b+".length - "+_+"]",T.UNARY_POSTFIX];if(h==="GET_REMOVE"||h==="REMOVE"){if(_=b+".removeAt("+b+".length - "+_+")",h==="GET_REMOVE")return[_,T.UNARY_POSTFIX];if(h==="REMOVE")return _+`;
`}break;case"RANDOM":if(A.definitions_.import_dart_math="import 'dart:math' as Math;",h==="REMOVE")return h=A.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),"int "+h+" = new Math.Random().nextInt("+b+`.length);
`+(b+".removeAt("+h+`);
`);if(h==="GET")return[A.provideFunction_("lists_get_random_item",`
dynamic ${A.FUNCTION_NAME_PLACEHOLDER_}(List my_list) {
  int x = new Math.Random().nextInt(my_list.length);
  return my_list[x];
}
`)+"("+b+")",T.UNARY_POSTFIX];if(h==="GET_REMOVE")return[A.provideFunction_("lists_remove_random_item",`
dynamic ${A.FUNCTION_NAME_PLACEHOLDER_}(List my_list) {
  int x = new Math.Random().nextInt(my_list.length);
  return my_list.removeAt(x);
}
`)+"("+b+")",T.UNARY_POSTFIX]}else{if(c==="RANDOM")return A.definitions_.import_dart_math="import 'dart:math' as Math;",h=m(),_=A.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),h+("int "+_+" = new Math.Random().nextInt("+b+`.length);
`)+(b+".removeAt("+_+`);
`);if(h==="REMOVE")return h=A.getAdjusted(_,"AT",1,!1,T.ADDITIVE),m()+(b+".removeAt("+b+".length - "+h+`);
`);if(h==="GET")return h=A.getAdjusted(_,"AT",1),[A.provideFunction_("lists_get_from_end",`
dynamic ${A.FUNCTION_NAME_PLACEHOLDER_}(List my_list, num x) {
  x = my_list.length - x;
  return my_list[x];
}
`)+"("+b+", "+h+")",T.UNARY_POSTFIX];if(h==="GET_REMOVE")return h=A.getAdjusted(_,"AT",1),[A.provideFunction_("lists_remove_from_end",`
dynamic ${A.FUNCTION_NAME_PLACEHOLDER_}(List my_list, num x) {
  x = my_list.length - x;
  return my_list.removeAt(x);
}
`)+"("+b+", "+h+")",T.UNARY_POSTFIX]}throw Error("Unhandled combination (lists_getIndex).")},y=function(_,A){function m(){if(b.match(/^\w+$/))return"";const z=A.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),q="List "+z+" = "+b+`;
`;return b=z,q}const h=_.getFieldValue("MODE")||"GET";var c=_.getFieldValue("WHERE")||"FROM_START";let b=A.valueToCode(_,"LIST",T.UNARY_POSTFIX)||"[]";const w=A.valueToCode(_,"TO",T.ASSIGNMENT)||"null";switch(c){case"FIRST":if(h==="SET")return b+"[0] = "+w+`;
`;if(h==="INSERT")return b+".insert(0, "+w+`);
`;break;case"LAST":if(h==="SET")return m()+(b+"["+b+".length - 1] = "+w+`;
`);if(h==="INSERT")return b+".add("+w+`);
`;break;case"FROM_START":if(_=A.getAdjusted(_,"AT"),h==="SET")return b+"["+_+"] = "+w+`;
`;if(h==="INSERT")return b+".insert("+_+", "+w+`);
`;break;case"FROM_END":if(_=A.getAdjusted(_,"AT",1,!1,T.ADDITIVE),c=m(),h==="SET")return c+(b+"["+b+".length - "+_+"] = "+w+`;
`);if(h==="INSERT")return c+(b+".insert("+b+".length - "+_+", "+w+`);
`);break;case"RANDOM":if(A.definitions_.import_dart_math="import 'dart:math' as Math;",_=m(),c=A.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),_+="int "+c+" = new Math.Random().nextInt("+b+`.length);
`,h==="SET")return _+(b+"["+c+"] = "+w+`;
`);if(h==="INSERT")return _+(b+".insert("+c+", "+w+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},N=function(_,A){const m=A.valueToCode(_,"LIST",T.UNARY_POSTFIX)||"[]";var h=_.getFieldValue("WHERE1");const c=_.getFieldValue("WHERE2");if(m.match(/^\w+$/)||h!=="FROM_END"&&c==="FROM_START"){switch(h){case"FROM_START":h=A.getAdjusted(_,"AT1");break;case"FROM_END":h=A.getAdjusted(_,"AT1",1,!1,T.ADDITIVE),h=m+".length - "+h;break;case"FIRST":h="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":var b=A.getAdjusted(_,"AT2",1);break;case"FROM_END":b=A.getAdjusted(_,"AT2",0,!1,T.ADDITIVE),b=m+".length - "+b;break;case"LAST":break;default:throw Error("Unhandled option (lists_getSublist).")}A=c==="LAST"?m+".sublist("+h+")":m+".sublist("+h+", "+b+")"}else b=A.getAdjusted(_,"AT1"),_=A.getAdjusted(_,"AT2"),A=A.provideFunction_("lists_get_sublist",`
List ${A.FUNCTION_NAME_PLACEHOLDER_}(List list, String where1, num at1, String where2, num at2) {
  int getAt(String where, num at) {
    if (where == 'FROM_END') {
      at = list.length - 1 - at;
    } else if (where == 'FIRST') {
      at = 0;
    } else if (where == 'LAST') {
      at = list.length - 1;
    } else if (where != 'FROM_START') {
      throw 'Unhandled option (lists_getSublist).';
    }
    return at;
  }
  at1 = getAt(where1, at1);
  at2 = getAt(where2, at2) + 1;
  return list.sublist(at1, at2);
}
`)+"("+m+", '"+h+"', "+b+", '"+c+"', "+_+")";return[A,T.UNARY_POSTFIX]},P=function(_,A){const m=A.valueToCode(_,"LIST",T.NONE)||"[]",h=_.getFieldValue("DIRECTION")==="1"?1:-1;return _=_.getFieldValue("TYPE"),[A.provideFunction_("lists_sort",`
List ${A.FUNCTION_NAME_PLACEHOLDER_}(List list, String type, int direction) {
  var compareFuncs = {
    'NUMERIC': (a, b) => (direction * a.compareTo(b)).toInt(),
    'TEXT': (a, b) => direction * a.toString().compareTo(b.toString()),
    'IGNORE_CASE':
      (a, b) => direction *
      a.toString().toLowerCase().compareTo(b.toString().toLowerCase())
  };
  list = new List.from(list);
  var compare = compareFuncs[type];
  list.sort(compare);
  return list;
}
`)+"("+m+', "'+_+'", '+h+")",T.UNARY_POSTFIX]},F=function(_,A){let m=A.valueToCode(_,"INPUT",T.UNARY_POSTFIX);if(A=A.valueToCode(_,"DELIM",T.NONE)||"''",_=_.getFieldValue("MODE"),_==="SPLIT")m||(m="''"),_="split";else if(_==="JOIN")m||(m="[]"),_="join";else throw Error("Unknown mode: "+_);return[m+"."+_+"("+A+")",T.UNARY_POSTFIX]},K=function(_,A){return["new List.from("+(A.valueToCode(_,"LIST",T.NONE)||"[]")+".reversed)",T.UNARY_POSTFIX]},g=function(_,A){let m=0,h="",c,b;A.STATEMENT_PREFIX&&(h+=A.injectId(A.STATEMENT_PREFIX,_));do b=A.valueToCode(_,"IF"+m,T.NONE)||"false",c=A.statementToCode(_,"DO"+m),A.STATEMENT_SUFFIX&&(c=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,_),A.INDENT)+c),h+=(m>0?"else ":"")+"if ("+b+`) {
`+c+"}",m++;while(_.getInput("IF"+m));return(_.getInput("ELSE")||A.STATEMENT_SUFFIX)&&(c=_.getInput("ELSE")?A.statementToCode(_,"ELSE"):"",A.STATEMENT_SUFFIX&&(c=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,_),A.INDENT)+c),h+=` else {
`+c+"}"),h+`
`},d=function(_,A){const m={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[_.getFieldValue("OP")],h=m==="=="||m==="!="?T.EQUALITY:T.RELATIONAL,c=A.valueToCode(_,"A",h)||"0";return _=A.valueToCode(_,"B",h)||"0",[c+" "+m+" "+_,h]},C=function(_,A){const m=_.getFieldValue("OP")==="AND"?"&&":"||",h=m==="&&"?T.LOGICAL_AND:T.LOGICAL_OR;let c=A.valueToCode(_,"A",h);return _=A.valueToCode(_,"B",h),c||_?(A=m==="&&"?"true":"false",c||(c=A),_||(_=A)):_=c="false",[c+" "+m+" "+_,h]},x=function(_,A){const m=T.UNARY_PREFIX;return["!"+(A.valueToCode(_,"BOOL",m)||"true"),m]},k=function(_,A){return[_.getFieldValue("BOOL")==="TRUE"?"true":"false",T.ATOMIC]},H=function(_,A){return["null",T.ATOMIC]},f=function(_,A){const m=A.valueToCode(_,"IF",T.CONDITIONAL)||"false",h=A.valueToCode(_,"THEN",T.CONDITIONAL)||"null";return _=A.valueToCode(_,"ELSE",T.CONDITIONAL)||"null",[m+" ? "+h+" : "+_,T.CONDITIONAL]},I=function(_,A){let m;m=_.getField("TIMES")?String(Number(_.getFieldValue("TIMES"))):A.valueToCode(_,"TIMES",T.ASSIGNMENT)||"0";let h=A.statementToCode(_,"DO");h=A.addLoopTrap(h,_),_="";const c=A.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE);let b=m;return m.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(m)||(b=A.nameDB_.getDistinctName("repeat_end",s.NameType$$module$build$src$core$names.VARIABLE),_+="var "+b+" = "+m+`;
`),_+("for (int "+c+" = 0; "+c+" < "+b+"; "+c+`++) {
`+h+`}
`)},D=function(_,A){const m=_.getFieldValue("MODE")==="UNTIL";let h=A.valueToCode(_,"BOOL",m?T.UNARY_PREFIX:T.NONE)||"false",c=A.statementToCode(_,"DO");return c=A.addLoopTrap(c,_),m&&(h="!"+h),"while ("+h+`) {
`+c+`}
`},U=function(_,A){var m=A.getVariableName(_.getFieldValue("VAR")),h=A.valueToCode(_,"FROM",T.ASSIGNMENT)||"0",c=A.valueToCode(_,"TO",T.ASSIGNMENT)||"0";const b=A.valueToCode(_,"BY",T.ASSIGNMENT)||"1";let w=A.statementToCode(_,"DO");if(w=A.addLoopTrap(w,_),s.isNumber$$module$build$src$core$utils$string(h)&&s.isNumber$$module$build$src$core$utils$string(c)&&s.isNumber$$module$build$src$core$utils$string(b))A=Number(h)<=Number(c),_="for ("+m+" = "+h+"; "+m+(A?" <= ":" >= ")+c+"; "+m,m=Math.abs(Number(b)),_=m===1?_+(A?"++":"--"):_+((A?" += ":" -= ")+m),_+=`) {
`+w+`}
`;else{_="";let z=h;h.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(h)||(z=A.nameDB_.getDistinctName(m+"_start",s.NameType$$module$build$src$core$names.VARIABLE),_+="var "+z+" = "+h+`;
`),h=c,c.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(c)||(h=A.nameDB_.getDistinctName(m+"_end",s.NameType$$module$build$src$core$names.VARIABLE),_+="var "+h+" = "+c+`;
`),c=A.nameDB_.getDistinctName(m+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),_+="num "+c+" = ",_=s.isNumber$$module$build$src$core$utils$string(b)?_+(Math.abs(Number(b))+`;
`):_+("("+b+`).abs();
`),_+="if ("+z+" > "+h+`) {
`,_+=A.INDENT+c+" = -"+c+`;
`,_=_+`}
for (`+(m+" = "+z+"; "+c+" >= 0 ? "+m+" <= "+h+" : "+m+" >= "+h+"; "+m+" += "+c+`) {
`+w+`}
`)}return _},O=function(_,A){const m=A.getVariableName(_.getFieldValue("VAR")),h=A.valueToCode(_,"LIST",T.ASSIGNMENT)||"[]";let c=A.statementToCode(_,"DO");return c=A.addLoopTrap(c,_),"for (var "+m+" in "+h+`) {
`+c+`}
`},X=function(_,A){let m="";if(A.STATEMENT_PREFIX&&(m+=A.injectId(A.STATEMENT_PREFIX,_)),A.STATEMENT_SUFFIX&&(m+=A.injectId(A.STATEMENT_SUFFIX,_)),A.STATEMENT_PREFIX){const h=_.getSurroundLoop();h&&!h.suppressPrefixSuffix&&(m+=A.injectId(A.STATEMENT_PREFIX,h))}switch(_.getFieldValue("FLOW")){case"BREAK":return m+`break;
`;case"CONTINUE":return m+`continue;
`}throw Error("Unknown flow statement.")},W=function(_,A){return _=Number(_.getFieldValue("NUM")),_===1/0?["double.infinity",T.UNARY_POSTFIX]:_===-1/0?["-double.infinity",T.UNARY_PREFIX]:[String(_),_<0?T.UNARY_PREFIX:T.ATOMIC]},re=function(_,A){var m={ADD:[" + ",T.ADDITIVE],MINUS:[" - ",T.ADDITIVE],MULTIPLY:[" * ",T.MULTIPLICATIVE],DIVIDE:[" / ",T.MULTIPLICATIVE],POWER:[null,T.NONE]}[_.getFieldValue("OP")];const h=m[0];m=m[1];const c=A.valueToCode(_,"A",m)||"0";return _=A.valueToCode(_,"B",m)||"0",h?[c+h+_,m]:(A.definitions_.import_dart_math="import 'dart:math' as Math;",["Math.pow("+c+", "+_+")",T.UNARY_POSTFIX])},se=function(_,A){const m=_.getFieldValue("OP");let h;if(m==="NEG")return _=A.valueToCode(_,"NUM",T.UNARY_PREFIX)||"0",_[0]==="-"&&(_=" "+_),["-"+_,T.UNARY_PREFIX];switch(A.definitions_.import_dart_math="import 'dart:math' as Math;",_=m==="ABS"||m.substring(0,5)==="ROUND"?A.valueToCode(_,"NUM",T.UNARY_POSTFIX)||"0":m==="SIN"||m==="COS"||m==="TAN"?A.valueToCode(_,"NUM",T.MULTIPLICATIVE)||"0":A.valueToCode(_,"NUM",T.NONE)||"0",m){case"ABS":h=_+".abs()";break;case"ROOT":h="Math.sqrt("+_+")";break;case"LN":h="Math.log("+_+")";break;case"EXP":h="Math.exp("+_+")";break;case"POW10":h="Math.pow(10,"+_+")";break;case"ROUND":h=_+".round()";break;case"ROUNDUP":h=_+".ceil()";break;case"ROUNDDOWN":h=_+".floor()";break;case"SIN":h="Math.sin("+_+" / 180 * Math.pi)";break;case"COS":h="Math.cos("+_+" / 180 * Math.pi)";break;case"TAN":h="Math.tan("+_+" / 180 * Math.pi)"}if(h)return[h,T.UNARY_POSTFIX];switch(m){case"LOG10":h="Math.log("+_+") / Math.log(10)";break;case"ASIN":h="Math.asin("+_+") / Math.pi * 180";break;case"ACOS":h="Math.acos("+_+") / Math.pi * 180";break;case"ATAN":h="Math.atan("+_+") / Math.pi * 180";break;default:throw Error("Unknown math operator: "+m)}return[h,T.MULTIPLICATIVE]},Ue=function(_,A){const m={PI:["Math.pi",T.UNARY_POSTFIX],E:["Math.e",T.UNARY_POSTFIX],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",T.MULTIPLICATIVE],SQRT2:["Math.sqrt2",T.UNARY_POSTFIX],SQRT1_2:["Math.sqrt1_2",T.UNARY_POSTFIX],INFINITY:["double.infinity",T.ATOMIC]};return _=_.getFieldValue("CONSTANT"),_!=="INFINITY"&&(A.definitions_.import_dart_math="import 'dart:math' as Math;"),m[_]},me=function(_,A){var m={EVEN:[" % 2 == 0",T.MULTIPLICATIVE,T.EQUALITY],ODD:[" % 2 == 1",T.MULTIPLICATIVE,T.EQUALITY],WHOLE:[" % 1 == 0",T.MULTIPLICATIVE,T.EQUALITY],POSITIVE:[" > 0",T.RELATIONAL,T.RELATIONAL],NEGATIVE:[" < 0",T.RELATIONAL,T.RELATIONAL],DIVISIBLE_BY:[null,T.MULTIPLICATIVE,T.EQUALITY],PRIME:[null,T.NONE,T.UNARY_POSTFIX]};const h=_.getFieldValue("PROPERTY"),[c,b,w]=m[h];if(m=A.valueToCode(_,"NUMBER_TO_CHECK",b)||"0",h==="PRIME")A.definitions_.import_dart_math="import 'dart:math' as Math;",_=A.provideFunction_("math_isPrime",`
bool ${A.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is null, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (n == null || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) == 0 || n % (x + 1) == 0) {
      return false;
    }
  }
  return true;
}
`)+"("+m+")";else if(h==="DIVISIBLE_BY"){if(_=A.valueToCode(_,"DIVISOR",T.MULTIPLICATIVE)||"0",_==="0")return["false",T.ATOMIC];_=m+" % "+_+" == 0"}else _=m+c;return[_,w]},Se=function(_,A){const m=A.valueToCode(_,"DELTA",T.ADDITIVE)||"0";return _=A.getVariableName(_.getFieldValue("VAR")),_+" = ("+_+" is num ? "+_+" : 0) + "+m+`;
`},xe=function(_,A){const m=_.getFieldValue("OP");switch(_=A.valueToCode(_,"LIST",T.NONE)||"[]",m){case"SUM":A=A.provideFunction_("math_sum",`
num ${A.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  num sumVal = 0;
  myList.forEach((num entry) {sumVal += entry;});
  return sumVal;
}
`)+"("+_+")";break;case"MIN":A.definitions_.import_dart_math="import 'dart:math' as Math;",A=A.provideFunction_("math_min",`
num ${A.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  if (myList.isEmpty) return null;
  num minVal = myList[0];
  myList.forEach((num entry) {minVal = Math.min(minVal, entry);});
  return minVal;
}
`)+"("+_+")";break;case"MAX":A.definitions_.import_dart_math="import 'dart:math' as Math;",A=A.provideFunction_("math_max",`
num ${A.FUNCTION_NAME_PLACEHOLDER_}(List<num> myList) {
  if (myList.isEmpty) return null;
  num maxVal = myList[0];
  myList.forEach((num entry) {maxVal = Math.max(maxVal, entry);});
  return maxVal;
}
`)+"("+_+")";break;case"AVERAGE":A=A.provideFunction_("math_mean",`
num ${A.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only.
  List localList = new List.from(myList);
  localList.removeWhere((a) => a is! num);
  if (localList.isEmpty) return null;
  num sumVal = 0;
  localList.forEach((var entry) {sumVal += entry;});
  return sumVal / localList.length;
}
`)+"("+_+")";break;case"MEDIAN":A=A.provideFunction_("math_median",`
num ${A.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only, then sort, then return middle value
  // or the average of two middle values if list has an even number of elements.
  List localList = new List.from(myList);
  localList.removeWhere((a) => a is! num);
  if (localList.isEmpty) return null;
  localList.sort((a, b) => (a - b));
  int index = localList.length ~/ 2;
  if (localList.length % 2 == 1) {
    return localList[index];
  } else {
    return (localList[index - 1] + localList[index]) / 2;
  }
}
`)+"("+_+")";break;case"MODE":A.definitions_.import_dart_math="import 'dart:math' as Math;",A=A.provideFunction_("math_modes",`
List ${A.FUNCTION_NAME_PLACEHOLDER_}(List values) {
  List modes = [];
  List counts = [];
  int maxCount = 0;
  for (int i = 0; i < values.length; i++) {
    var value = values[i];
    bool found = false;
    int thisCount;
    for (int j = 0; j < counts.length; j++) {
      if (counts[j][0] == value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.add([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (int j = 0; j < counts.length; j++) {
    if (counts[j][1] == maxCount) {
        modes.add(counts[j][0]);
    }
  }
  return modes;
}
`)+"("+_+")";break;case"STD_DEV":A.definitions_.import_dart_math="import 'dart:math' as Math;",A=A.provideFunction_("math_standard_deviation",`
num ${A.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  // First filter list for numbers only.
  List numbers = new List.from(myList);
  numbers.removeWhere((a) => a is! num);
  if (numbers.isEmpty) return null;
  num n = numbers.length;
  num sum = 0;
  numbers.forEach((x) => sum += x);
  num mean = sum / n;
  num sumSquare = 0;
  numbers.forEach((x) => sumSquare += Math.pow(x - mean, 2));
  return Math.sqrt(sumSquare / n);
}
`)+"("+_+")";break;case"RANDOM":A.definitions_.import_dart_math="import 'dart:math' as Math;",A=A.provideFunction_("math_random_item",`
dynamic ${A.FUNCTION_NAME_PLACEHOLDER_}(List myList) {
  int x = new Math.Random().nextInt(myList.length);
  return myList[x];
}
`)+"("+_+")";break;default:throw Error("Unknown operator: "+m)}return[A,T.UNARY_POSTFIX]},Ce=function(_,A){const m=A.valueToCode(_,"DIVIDEND",T.MULTIPLICATIVE)||"0";return _=A.valueToCode(_,"DIVISOR",T.MULTIPLICATIVE)||"0",[m+" % "+_,T.MULTIPLICATIVE]},Ie=function(_,A){A.definitions_.import_dart_math="import 'dart:math' as Math;";const m=A.valueToCode(_,"VALUE",T.NONE)||"0",h=A.valueToCode(_,"LOW",T.NONE)||"0";return _=A.valueToCode(_,"HIGH",T.NONE)||"double.infinity",["Math.min(Math.max("+m+", "+h+"), "+_+")",T.UNARY_POSTFIX]},je=function(_,A){A.definitions_.import_dart_math="import 'dart:math' as Math;";const m=A.valueToCode(_,"FROM",T.NONE)||"0";return _=A.valueToCode(_,"TO",T.NONE)||"0",[A.provideFunction_("math_random_int",`
int ${A.FUNCTION_NAME_PLACEHOLDER_}(num a, num b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    num c = a;
    a = b;
    b = c;
  }
  return new Math.Random().nextInt(b - a + 1) + a;
}
`)+"("+m+", "+_+")",T.UNARY_POSTFIX]},Ve=function(_,A){return A.definitions_.import_dart_math="import 'dart:math' as Math;",["new Math.Random().nextDouble()",T.UNARY_POSTFIX]},Me=function(_,A){A.definitions_.import_dart_math="import 'dart:math' as Math;";const m=A.valueToCode(_,"X",T.NONE)||"0";return["Math.atan2("+(A.valueToCode(_,"Y",T.NONE)||"0")+", "+m+") / Math.pi * 180",T.MULTIPLICATIVE]},ce=function(_,A){const m=A.getProcedureName(_.getFieldValue("NAME"));var h="";A.STATEMENT_PREFIX&&(h+=A.injectId(A.STATEMENT_PREFIX,_)),A.STATEMENT_SUFFIX&&(h+=A.injectId(A.STATEMENT_SUFFIX,_)),h&&(h=A.prefixLines(h,A.INDENT));let c="";A.INFINITE_LOOP_TRAP&&(c=A.prefixLines(A.injectId(A.INFINITE_LOOP_TRAP,_),A.INDENT));let b="";_.getInput("STACK")&&(b=A.statementToCode(_,"STACK"));let w="";_.getInput("RETURN")&&(w=A.valueToCode(_,"RETURN",T.NONE)||"");let z="";b&&w&&(z=h),w&&(w=A.INDENT+"return "+w+`;
`);const q=w?"dynamic":"void",ee=[],Pe=_.getVars();for(let Je=0;Je<Pe.length;Je++)ee[Je]=A.getVariableName(Pe[Je]);return h=q+" "+m+"("+ee.join(", ")+`) {
`+h+c+b+z+w+"}",h=A.scrub_(_,h),A.definitions_["%"+m]=h,null},te=function(_,A){const m=A.getProcedureName(_.getFieldValue("NAME")),h=[],c=_.getVars();for(let b=0;b<c.length;b++)h[b]=A.valueToCode(_,"ARG"+b,T.NONE)||"null";return[m+"("+h.join(", ")+")",T.UNARY_POSTFIX]},ue=function(_,A){return A.forBlock.procedures_callreturn(_,A)[0]+`;
`},ge=function(_,A){let m="if ("+(A.valueToCode(_,"CONDITION",T.NONE)||"false")+`) {
`;return A.STATEMENT_SUFFIX&&(m+=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,_),A.INDENT)),_.hasReturnValue_?(_=A.valueToCode(_,"VALUE",T.NONE)||"null",m+=A.INDENT+"return "+_+`;
`):m+=A.INDENT+`return;
`,m+`}
`},we=function(_,A){return[A.quote_(_.getFieldValue("TEXT")),T.ATOMIC]},st=function(_,A){switch(_.itemCount_){case 0:return["''",T.ATOMIC];case 1:return[(A.valueToCode(_,"ADD0",T.UNARY_POSTFIX)||"''")+".toString()",T.UNARY_POSTFIX];default:const m=Array(_.itemCount_);for(let h=0;h<_.itemCount_;h++)m[h]=A.valueToCode(_,"ADD"+h,T.NONE)||"''";return["["+m.join(",")+"].join()",T.UNARY_POSTFIX]}},Be=function(_,A){const m=A.getVariableName(_.getFieldValue("VAR"));return _=A.valueToCode(_,"TEXT",T.NONE)||"''",m+" = ["+m+", "+_+`].join();
`},Rt=function(_,A){return[(A.valueToCode(_,"VALUE",T.UNARY_POSTFIX)||"''")+".length",T.UNARY_POSTFIX]},de=function(_,A){return[(A.valueToCode(_,"VALUE",T.UNARY_POSTFIX)||"''")+".isEmpty",T.UNARY_POSTFIX]},Le=function(_,A){const m=_.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",h=A.valueToCode(_,"FIND",T.NONE)||"''";return A=(A.valueToCode(_,"VALUE",T.UNARY_POSTFIX)||"''")+"."+m+"("+h+")",_.workspace.options.oneBasedIndex?[A+" + 1",T.ADDITIVE]:[A,T.UNARY_POSTFIX]},_e=function(_,A){const m=_.getFieldValue("WHERE")||"FROM_START",h=A.valueToCode(_,"VALUE",m==="FIRST"||m==="FROM_START"?T.UNARY_POSTFIX:T.NONE)||"''";switch(m){case"FIRST":return[h+"[0]",T.UNARY_POSTFIX];case"FROM_START":return _=A.getAdjusted(_,"AT"),[h+"["+_+"]",T.UNARY_POSTFIX];case"LAST":case"FROM_END":return _=m==="LAST"?1:A.getAdjusted(_,"AT",1),[`${A.provideFunction_("text_get_from_end",`
String ${A.FUNCTION_NAME_PLACEHOLDER_}(String text, num x) {
  return text[text.length - x];
}
`)}(${h}, ${_})`,T.UNARY_POSTFIX];case"RANDOM":return A.definitions_.import_dart_math="import 'dart:math' as Math;",[A.provideFunction_("text_random_letter",`
String ${A.FUNCTION_NAME_PLACEHOLDER_}(String text) {
  int x = new Math.Random().nextInt(text.length);
  return text[x];
}
`)+"("+h+")",T.UNARY_POSTFIX]}throw Error("Unhandled option (text_charAt).")},be=function(_,A){var m=_.getFieldValue("WHERE1");const h=_.getFieldValue("WHERE2"),c=m!=="FROM_END"&&h==="FROM_START",b=A.valueToCode(_,"STRING",c?T.UNARY_POSTFIX:T.NONE)||"''";if(m==="FIRST"&&h==="LAST")return[b,T.NONE];if(b.match(/^'?\w+'?$/)||c){switch(m){case"FROM_START":m=A.getAdjusted(_,"AT1");break;case"FROM_END":m=A.getAdjusted(_,"AT1",1,!1,T.ADDITIVE),m=b+".length - "+m;break;case"FIRST":m="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(h){case"FROM_START":var w=A.getAdjusted(_,"AT2",1);break;case"FROM_END":w=A.getAdjusted(_,"AT2",0,!1,T.ADDITIVE),w=b+".length - "+w;break;case"LAST":break;default:throw Error("Unhandled option (text_getSubstring).")}A=h==="LAST"?b+".substring("+m+")":b+".substring("+m+", "+w+")"}else w=A.getAdjusted(_,"AT1"),_=A.getAdjusted(_,"AT2"),A=A.provideFunction_("text_get_substring",`
String ${A.FUNCTION_NAME_PLACEHOLDER_}(String text, String where1, num at1, String where2, num at2) {
  int getAt(String where, num at) {
    if (where == 'FROM_END') {
      at = text.length - 1 - at;
    } else if (where == 'FIRST') {
      at = 0;
    } else if (where == 'LAST') {
      at = text.length - 1;
    } else if (where != 'FROM_START') {
      throw 'Unhandled option (text_getSubstring).';
    }
    return at;
  }
  at1 = getAt(where1, at1);
  at2 = getAt(where2, at2) + 1;
  return text.substring(at1, at2);
}
`)+"("+b+", '"+m+"', "+w+", '"+h+"', "+_+")";return[A,T.UNARY_POSTFIX]},We=function(_,A){const m={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[_.getFieldValue("CASE")];return _=A.valueToCode(_,"TEXT",m?T.UNARY_POSTFIX:T.NONE)||"''",[m?_+m:A.provideFunction_("text_toTitleCase",`
String ${A.FUNCTION_NAME_PLACEHOLDER_}(String str) {
  RegExp exp = new RegExp(r'\\b');
  List<String> list = str.split(exp);
  final title = new StringBuffer();
  for (String part in list) {
    if (part.length > 0) {
      title.write(part[0].toUpperCase());
      if (part.length > 0) {
        title.write(part.substring(1).toLowerCase());
      }
    }
  }
  return title.toString();
}
`)+"("+_+")",T.UNARY_POSTFIX]},Ke=function(_,A){const m={LEFT:".replaceFirst(new RegExp(r'^\\s+'), '')",RIGHT:".replaceFirst(new RegExp(r'\\s+$'), '')",BOTH:".trim()"}[_.getFieldValue("MODE")];return[(A.valueToCode(_,"TEXT",T.UNARY_POSTFIX)||"''")+m,T.UNARY_POSTFIX]},at=function(_,A){return"print("+(A.valueToCode(_,"TEXT",T.NONE)||"''")+`);
`},ct=function(_,A){A.definitions_.import_dart_html="import 'dart:html' as Html;";let m="Html.window.prompt("+(_.getField("TEXT")?A.quote_(_.getFieldValue("TEXT")):A.valueToCode(_,"TEXT",T.NONE)||"''")+", '')";return _.getFieldValue("TYPE")==="NUMBER"&&(A.definitions_.import_dart_math="import 'dart:math' as Math;",m="Math.parseDouble("+m+")"),[m,T.UNARY_POSTFIX]},Ht=function(_,A){const m=A.valueToCode(_,"TEXT",T.NONE)||"''";return _=A.valueToCode(_,"SUB",T.NONE)||"''",[A.provideFunction_("text_count",`
int ${A.FUNCTION_NAME_PLACEHOLDER_}(String haystack, String needle) {
  if (needle.length == 0) {
    return haystack.length + 1;
  }
  int index = 0;
  int count = 0;
  while (index != -1) {
    index = haystack.indexOf(needle, index);
    if (index != -1) {
      count++;
     index += needle.length;
    }
  }
  return count;
}
`)+"("+m+", "+_+")",T.UNARY_POSTFIX]},pt=function(_,A){const m=A.valueToCode(_,"TEXT",T.UNARY_POSTFIX)||"''",h=A.valueToCode(_,"FROM",T.NONE)||"''";return _=A.valueToCode(_,"TO",T.NONE)||"''",[m+".replaceAll("+h+", "+_+")",T.UNARY_POSTFIX]},St=function(_,A){return["new String.fromCharCodes("+(A.valueToCode(_,"TEXT",T.UNARY_POSTFIX)||"''")+".runes.toList().reversed)",T.UNARY_PREFIX]},Et=function(_,A){return[A.getVariableName(_.getFieldValue("VAR")),T.ATOMIC]},dt=function(_,A){const m=A.valueToCode(_,"VALUE",T.ASSIGNMENT)||"0";return A.getVariableName(_.getFieldValue("VAR"))+" = "+m+`;
`},T;(function(_){_[_.ATOMIC=0]="ATOMIC",_[_.UNARY_POSTFIX=1]="UNARY_POSTFIX",_[_.UNARY_PREFIX=2]="UNARY_PREFIX",_[_.MULTIPLICATIVE=3]="MULTIPLICATIVE",_[_.ADDITIVE=4]="ADDITIVE",_[_.SHIFT=5]="SHIFT",_[_.BITWISE_AND=6]="BITWISE_AND",_[_.BITWISE_XOR=7]="BITWISE_XOR",_[_.BITWISE_OR=8]="BITWISE_OR",_[_.RELATIONAL=9]="RELATIONAL",_[_.EQUALITY=10]="EQUALITY",_[_.LOGICAL_AND=11]="LOGICAL_AND",_[_.LOGICAL_OR=12]="LOGICAL_OR",_[_.IF_NULL=13]="IF_NULL",_[_.CONDITIONAL=14]="CONDITIONAL",_[_.CASCADE=15]="CASCADE",_[_.ASSIGNMENT=16]="ASSIGNMENT",_[_.NONE=99]="NONE"})(T||(T={}));var ae=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(_="Dart"){super(_),this.isInitialized=!1;for(const A in T)_=T[A],typeof _!="string"&&(this["ORDER_"+A]=_);this.addReservedWords("assert,break,case,catch,class,const,continue,default,do,else,enum,extends,false,final,finally,for,if,in,is,new,null,rethrow,return,super,switch,this,throw,true,try,var,void,while,with,print,identityHashCode,identical,BidirectionalIterator,Comparable,double,Function,int,Invocation,Iterable,Iterator,List,Map,Match,num,Pattern,RegExp,Set,StackTrace,String,StringSink,Type,bool,DateTime,Deprecated,Duration,Expando,Null,Object,RuneIterator,Runes,Stopwatch,StringBuffer,Symbol,Uri,Comparator,AbstractClassInstantiationError,ArgumentError,AssertionError,CastError,ConcurrentModificationError,CyclicInitializationError,Error,Exception,FallThroughError,FormatException,IntegerDivisionByZeroException,NoSuchMethodError,NullThrownError,OutOfMemoryError,RangeError,StackOverflowError,StateError,TypeError,UnimplementedError,UnsupportedError")}init(_){super.init(_),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(_.getVariableMap()),this.nameDB_.populateVariables(_),this.nameDB_.populateProcedures(_);const A=[];var m=s.allDeveloperVariables$$module$build$src$core$variables(_);for(let h=0;h<m.length;h++)A.push(this.nameDB_.getName(m[h],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(_=s.allUsedVarModels$$module$build$src$core$variables(_),m=0;m<_.length;m++)A.push(this.nameDB_.getName(_[m].getId(),s.NameType$$module$build$src$core$names.VARIABLE));A.length&&(this.definitions_.variables="var "+A.join(", ")+";"),this.isInitialized=!0}finish(_){_&&(_=this.prefixLines(_,this.INDENT)),_=`main() {
`+_+"}";const A=[],m=[];for(let h in this.definitions_){const c=this.definitions_[h];c.match(/^import\s/)?A.push(c):m.push(c)}return _=super.finish(_),this.isInitialized=!1,this.nameDB_.reset(),(A.join(`
`)+`

`+m.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+_}scrubNakedValue(_){return _+`;
`}quote_(_){return _=_.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/\$/g,"\\$").replace(/'/g,"\\'"),"'"+_+"'"}multiline_quote_(_){return _.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)}scrub_(_,A,m=!1){let h="";if(!_.outputConnection||!_.outputConnection.targetConnection){var c=_.getCommentText();c&&(c=s.wrap$$module$build$src$core$utils$string(c,this.COMMENT_WRAP-3),h=_.getProcedureDef?h+this.prefixLines(c+`
`,"/// "):h+this.prefixLines(c+`
`,"// "));for(let b=0;b<_.inputList.length;b++)_.inputList[b].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(c=_.inputList[b].connection.targetBlock())&&(c=this.allNestedComments(c))&&(h+=this.prefixLines(c,"// "))}return _=_.nextConnection&&_.nextConnection.targetBlock(),m=m?"":this.blockToCode(_),h+A+m}getAdjusted(_,A,m=0,h=!1,c=T.NONE){_.workspace.options.oneBasedIndex&&m--;const b=_.workspace.options.oneBasedIndex?"1":"0";let w=c;return m?w=T.ADDITIVE:h&&(w=T.UNARY_PREFIX),_=this.valueToCode(_,A,w)||b,m===0&&!h?_:s.isNumber$$module$build$src$core$utils$string(_)?(_=String(Number(_)+m),h&&(_=String(-Number(_))),_):(m>0?_=`${_} + ${m}`:m<0&&(_=`${_} - ${-m}`),h&&(_=m?`-(${_})`:`-${_}`),Math.floor(c)>=Math.floor(w)&&(_=`(${_})`),_)}},Y={};Y.lists_create_empty=l,Y.lists_create_with=p,Y.lists_getIndex=L,Y.lists_getSublist=N,Y.lists_indexOf=M,Y.lists_isEmpty=R,Y.lists_length=$,Y.lists_repeat=E,Y.lists_reverse=K,Y.lists_setIndex=y,Y.lists_sort=P,Y.lists_split=F;var Te={};Te.controls_if=g,Te.controls_ifelse=g,Te.logic_boolean=k,Te.logic_compare=d,Te.logic_negate=x,Te.logic_null=H,Te.logic_operation=C,Te.logic_ternary=f;var ke={};ke.controls_flow_statements=X,ke.controls_for=U,ke.controls_forEach=O,ke.controls_repeat=I,ke.controls_repeat_ext=I,ke.controls_whileUntil=D;var ve={};ve.math_arithmetic=re,ve.math_atan2=Me,ve.math_change=Se,ve.math_constant=Ue,ve.math_constrain=Ie,ve.math_modulo=Ce,ve.math_number=W,ve.math_number_property=me,ve.math_on_list=xe,ve.math_random_float=Ve,ve.math_random_int=je,ve.math_round=se,ve.math_single=se,ve.math_trig=se;var Xe={};Xe.procedures_callnoreturn=ue,Xe.procedures_callreturn=te,Xe.procedures_defnoreturn=ce,Xe.procedures_defreturn=ce,Xe.procedures_ifreturn=ge;var le={};le.text=we,le.text_append=Be,le.text_changeCase=We,le.text_charAt=_e,le.text_count=Ht,le.text_getSubstring=be,le.text_indexOf=Le,le.text_isEmpty=de,le.text_join=st,le.text_length=Rt,le.text_print=at,le.text_prompt=ct,le.text_prompt_ext=ct,le.text_replace=pt,le.text_reverse=St,le.text_trim=Ke;var v={};v.variables_get=Et,v.variables_set=dt;var V={};V.variables_get_dynamic=Et,V.variables_set_dynamic=dt;var J=new ae;J.addReservedWords("Html,Math");var ne=Object.assign({},Y,Te,ke,ve,Xe,le,v,V);for(const _ in ne)J.forBlock[_]=ne[_];var Ne={};return Ne.DartGenerator=ae,Ne.Order=T,Ne.dartGenerator=J,Ne.__namespace__=s,Ne})})(oh)),oh.exports}var sh={exports:{}},_F=sh.exports,mv;function Xm(){return mv||(mv=1,(function(i,n){(function(o,s){i.exports=s(Er())})(_F,function(o){var s=o.__namespace__,l=function(h,c){return["{}",ae.HIGH]},p=function(h,c){const b=Array(h.itemCount_);for(let w=0;w<h.itemCount_;w++)b[w]=c.valueToCode(h,"ADD"+w,ae.NONE)||"nil";return["{"+b.join(", ")+"}",ae.HIGH]},E=function(h,c){const b=c.provideFunction_("create_list_repeated",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(item, count)
  local t = {}
  for i = 1, count do
    table.insert(t, item)
  end
  return t
end
  `),w=c.valueToCode(h,"ITEM",ae.NONE)||"nil";return h=c.valueToCode(h,"NUM",ae.NONE)||"0",[b+"("+w+", "+h+")",ae.HIGH]},$=function(h,c){return["#"+(c.valueToCode(h,"VALUE",ae.UNARY)||"{}"),ae.UNARY]},R=function(h,c){return["#"+(c.valueToCode(h,"VALUE",ae.UNARY)||"{}")+" == 0",ae.RELATIONAL]},M=function(h,c){const b=c.valueToCode(h,"FIND",ae.NONE)||"''",w=c.valueToCode(h,"VALUE",ae.NONE)||"{}";return[(h.getFieldValue("END")==="FIRST"?c.provideFunction_("first_index",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t, elem)
  for k, v in ipairs(t) do
    if v == elem then
      return k
    end
  end
  return 0
end
`):c.provideFunction_("last_index",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t, elem)
  for i = #t, 1, -1 do
    if t[i] == elem then
      return i
    end
  end
  return 0
end
`))+"("+w+", "+b+")",ae.HIGH]},L=function(h,c){var b=h.getFieldValue("MODE")||"GET",w=h.getFieldValue("WHERE")||"FROM_START";const z=c.valueToCode(h,"VALUE",ae.HIGH)||"({})";return w!=="LAST"&&w!=="FROM_END"&&w!=="RANDOM"||z.match(/^\w+$/)?(c=c.valueToCode(h,"AT",b==="GET"&&w==="FROM_END"?ae.ADDITIVE:ae.NONE)||"1",c=Te(z,w,c),b==="GET"?[z+"["+c+"]",ae.HIGH]:(w="table.remove("+z+", "+c+")",b==="GET_REMOVE"?[w,ae.HIGH]:w+`
`)):b==="REMOVE"?(b=c.valueToCode(h,"AT",w==="FROM_END"?ae.ADDITIVE:ae.NONE)||"1",c=c.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),b=Te(c,w,b),c+" = "+z+`
table.remove(`+c+", "+b+`)
`):(h=c.valueToCode(h,"AT",ae.NONE)||"1",[(b==="GET"?c.provideFunction_("list_get_"+w.toLowerCase(),["function "+c.FUNCTION_NAME_PLACEHOLDER_+"(t"+(w==="FROM_END"||w==="FROM_START"?", at)":")"),"  return t["+Te("t",w,"at")+"]","end"]):c.provideFunction_("list_remove_"+w.toLowerCase(),["function "+c.FUNCTION_NAME_PLACEHOLDER_+"(t"+(w==="FROM_END"||w==="FROM_START"?", at)":")"),"  return table.remove(t, "+Te("t",w,"at")+")","end"]))+"("+z+(w==="FROM_END"||w==="FROM_START"?", "+h:"")+")",ae.HIGH])},y=function(h,c){let b=c.valueToCode(h,"LIST",ae.HIGH)||"{}";const w=h.getFieldValue("MODE")||"SET",z=h.getFieldValue("WHERE")||"FROM_START",q=c.valueToCode(h,"AT",ae.ADDITIVE)||"1";h=c.valueToCode(h,"TO",ae.NONE)||"Nil";let ee="";return z!=="LAST"&&z!=="FROM_END"&&z!=="RANDOM"||b.match(/^\w+$/)||(c=c.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),ee=c+" = "+b+`
`,b=c),ee=w==="SET"?ee+(b+"["+Te(b,z,q)+"] = "+h):ee+("table.insert("+b+", "+(Te(b,z,q)+(z==="LAST"?" + 1":""))+", "+h+")"),ee+`
`},N=function(h,c){const b=c.valueToCode(h,"LIST",ae.NONE)||"{}",w=h.getFieldValue("WHERE1"),z=h.getFieldValue("WHERE2"),q=c.valueToCode(h,"AT1",ae.NONE)||"1";h=c.valueToCode(h,"AT2",ae.NONE)||"1";const ee=w==="FROM_END"||w==="FROM_START"?", at1":"",Pe=z==="FROM_END"||z==="FROM_START"?", at2":"";return[c.provideFunction_("list_sublist_"+w.toLowerCase()+"_"+z.toLowerCase(),`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(source${ee}${Pe})
  local t = {}
  local start = ${Te("source",w,"at1")}
  local finish = ${Te("source",z,"at2")}
  for i = start, finish do
    table.insert(t, source[i])
  end
  return t
end
`)+"("+b+(w==="FROM_END"||w==="FROM_START"?", "+q:"")+(z==="FROM_END"||z==="FROM_START"?", "+h:"")+")",ae.HIGH]},P=function(h,c){const b=c.valueToCode(h,"LIST",ae.NONE)||"{}",w=h.getFieldValue("DIRECTION")==="1"?1:-1;return h=h.getFieldValue("TYPE"),[c.provideFunction_("list_sort",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(list, typev, direction)
  local t = {}
  for n,v in pairs(list) do table.insert(t, v) end
  local compareFuncs = {
    NUMERIC = function(a, b)
      return (tonumber(tostring(a)) or 0)
          < (tonumber(tostring(b)) or 0) end,
    TEXT = function(a, b)
      return tostring(a) < tostring(b) end,
    IGNORE_CASE = function(a, b)
      return string.lower(tostring(a)) < string.lower(tostring(b)) end
  }
  local compareTemp = compareFuncs[typev]
  local compare = compareTemp
  if direction == -1
  then compare = function(a, b) return compareTemp(b, a) end
  end
  table.sort(t, compare)
  return t
end
`)+"("+b+',"'+h+'", '+w+")",ae.HIGH]},F=function(h,c){let b=c.valueToCode(h,"INPUT",ae.NONE);const w=c.valueToCode(h,"DELIM",ae.NONE)||"''";if(h=h.getFieldValue("MODE"),h==="SPLIT")b||(b="''"),c=c.provideFunction_("list_string_split",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(input, delim)
  local t = {}
  local pos = 1
  while true do
    next_delim = string.find(input, delim, pos)
    if next_delim == nil then
      table.insert(t, string.sub(input, pos))
      break
    else
      table.insert(t, string.sub(input, pos, next_delim-1))
      pos = next_delim + #delim
    end
  end
  return t
end
`);else if(h==="JOIN")b||(b="{}"),c="table.concat";else throw Error("Unknown mode: "+h);return[c+"("+b+", "+w+")",ae.HIGH]},K=function(h,c){return h=c.valueToCode(h,"LIST",ae.NONE)||"{}",[c.provideFunction_("list_reverse",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(input)
  local reversed = {}
  for i = #input, 1, -1 do
    table.insert(reversed, input[i])
  end
  return reversed
end
`)+"("+h+")",ae.HIGH]},g=function(h,c){var b=0;let w="";c.STATEMENT_PREFIX&&(w+=c.injectId(c.STATEMENT_PREFIX,h));do{const z=c.valueToCode(h,"IF"+b,ae.NONE)||"false";let q=c.statementToCode(h,"DO"+b);c.STATEMENT_SUFFIX&&(q=c.prefixLines(c.injectId(c.STATEMENT_SUFFIX,h),c.INDENT)+q),w+=(b>0?"else":"")+"if "+z+` then
`+q,b++}while(h.getInput("IF"+b));return(h.getInput("ELSE")||c.STATEMENT_SUFFIX)&&(b=h.getInput("ELSE")?c.statementToCode(h,"ELSE"):"",c.STATEMENT_SUFFIX&&(b=c.prefixLines(c.injectId(c.STATEMENT_SUFFIX,h),c.INDENT)+b),w+=`else
`+b),w+`end
`},d=function(h,c){const b={EQ:"==",NEQ:"~=",LT:"<",LTE:"<=",GT:">",GTE:">="}[h.getFieldValue("OP")],w=c.valueToCode(h,"A",ae.RELATIONAL)||"0";return h=c.valueToCode(h,"B",ae.RELATIONAL)||"0",[w+" "+b+" "+h,ae.RELATIONAL]},C=function(h,c){const b=h.getFieldValue("OP")==="AND"?"and":"or",w=b==="and"?ae.AND:ae.OR;let z=c.valueToCode(h,"A",w);return h=c.valueToCode(h,"B",w),z||h?(c=b==="and"?"true":"false",z||(z=c),h||(h=c)):h=z="false",[z+" "+b+" "+h,w]},x=function(h,c){return["not "+(c.valueToCode(h,"BOOL",ae.UNARY)||"true"),ae.UNARY]},k=function(h,c){return[h.getFieldValue("BOOL")==="TRUE"?"true":"false",ae.ATOMIC]},H=function(h,c){return["nil",ae.ATOMIC]},f=function(h,c){const b=c.valueToCode(h,"IF",ae.AND)||"false",w=c.valueToCode(h,"THEN",ae.AND)||"nil";return h=c.valueToCode(h,"ELSE",ae.OR)||"nil",[b+" and "+w+" or "+h,ae.OR]},I=function(h,c){return h.includes(Xe)?h+c+`::continue::
`:h},D=function(h,c){let b;b=h.getField("TIMES")?String(Number(h.getFieldValue("TIMES"))):c.valueToCode(h,"TIMES",ae.NONE)||"0",b=s.isNumber$$module$build$src$core$utils$string(b)?parseInt(b,10):"math.floor("+b+")";let w=c.statementToCode(h,"DO");return w=c.addLoopTrap(w,h),w=I(w,c.INDENT),"for "+c.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE)+" = 1, "+b+` do
`+w+`end
`},U=function(h,c){const b=h.getFieldValue("MODE")==="UNTIL";let w=c.valueToCode(h,"BOOL",b?ae.UNARY:ae.NONE)||"false",z=c.statementToCode(h,"DO");return z=c.addLoopTrap(z,h),z=I(z,c.INDENT),b&&(w="not "+w),"while "+w+` do
`+z+`end
`},O=function(h,c){const b=c.getVariableName(h.getFieldValue("VAR")),w=c.valueToCode(h,"FROM",ae.NONE)||"0",z=c.valueToCode(h,"TO",ae.NONE)||"0",q=c.valueToCode(h,"BY",ae.NONE)||"1";let ee=c.statementToCode(h,"DO");ee=c.addLoopTrap(ee,h),ee=I(ee,c.INDENT),h="";let Pe;return s.isNumber$$module$build$src$core$utils$string(w)&&s.isNumber$$module$build$src$core$utils$string(z)&&s.isNumber$$module$build$src$core$utils$string(q)?Pe=(Number(w)<=Number(z)?"":"-")+Math.abs(Number(q)):(h="",Pe=c.nameDB_.getDistinctName(b+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),h+=Pe+" = ",h=s.isNumber$$module$build$src$core$utils$string(q)?h+(Math.abs(q)+`
`):h+("math.abs("+q+`)
`),h=h+("if ("+w+") > ("+z+`) then
`)+(c.INDENT+Pe+" = -"+Pe+`
`),h+=`end
`),h+("for "+b+" = "+w+", "+z+", "+Pe)+(` do
`+ee+`end
`)},X=function(h,c){const b=c.getVariableName(h.getFieldValue("VAR")),w=c.valueToCode(h,"LIST",ae.NONE)||"{}";let z=c.statementToCode(h,"DO");return z=c.addLoopTrap(z,h),z=I(z,c.INDENT),"for _, "+b+" in ipairs("+w+`) do 
`+z+`end
`},W=function(h,c){let b="";if(c.STATEMENT_PREFIX&&(b+=c.injectId(c.STATEMENT_PREFIX,h)),c.STATEMENT_SUFFIX&&(b+=c.injectId(c.STATEMENT_SUFFIX,h)),c.STATEMENT_PREFIX){const w=h.getSurroundLoop();w&&!w.suppressPrefixSuffix&&(b+=c.injectId(c.STATEMENT_PREFIX,w))}switch(h.getFieldValue("FLOW")){case"BREAK":return b+`break
`;case"CONTINUE":return b+Xe}throw Error("Unknown flow statement.")},re=function(h,c){return h=Number(h.getFieldValue("NUM")),[String(h),h<0?ae.UNARY:ae.ATOMIC]},se=function(h,c){var b={ADD:[" + ",ae.ADDITIVE],MINUS:[" - ",ae.ADDITIVE],MULTIPLY:[" * ",ae.MULTIPLICATIVE],DIVIDE:[" / ",ae.MULTIPLICATIVE],POWER:[" ^ ",ae.EXPONENTIATION]}[h.getFieldValue("OP")];const w=b[0];b=b[1];const z=c.valueToCode(h,"A",b)||"0";return h=c.valueToCode(h,"B",b)||"0",[z+w+h,b]},Ue=function(h,c){var b=h.getFieldValue("OP");if(b==="NEG")return h=c.valueToCode(h,"NUM",ae.UNARY)||"0",["-"+h,ae.UNARY];if(b==="POW10")return h=c.valueToCode(h,"NUM",ae.EXPONENTIATION)||"0",["10 ^ "+h,ae.EXPONENTIATION];switch(h=b==="ROUND"?c.valueToCode(h,"NUM",ae.ADDITIVE)||"0":c.valueToCode(h,"NUM",ae.NONE)||"0",b){case"ABS":b="math.abs("+h+")";break;case"ROOT":b="math.sqrt("+h+")";break;case"LN":b="math.log("+h+")";break;case"LOG10":b="math.log("+h+", 10)";break;case"EXP":b="math.exp("+h+")";break;case"ROUND":b="math.floor("+h+" + .5)";break;case"ROUNDUP":b="math.ceil("+h+")";break;case"ROUNDDOWN":b="math.floor("+h+")";break;case"SIN":b="math.sin(math.rad("+h+"))";break;case"COS":b="math.cos(math.rad("+h+"))";break;case"TAN":b="math.tan(math.rad("+h+"))";break;case"ASIN":b="math.deg(math.asin("+h+"))";break;case"ACOS":b="math.deg(math.acos("+h+"))";break;case"ATAN":b="math.deg(math.atan("+h+"))";break;default:throw Error("Unknown math operator: "+b)}return[b,ae.HIGH]},me=function(h,c){return{PI:["math.pi",ae.HIGH],E:["math.exp(1)",ae.HIGH],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",ae.MULTIPLICATIVE],SQRT2:["math.sqrt(2)",ae.HIGH],SQRT1_2:["math.sqrt(1 / 2)",ae.HIGH],INFINITY:["math.huge",ae.HIGH]}[h.getFieldValue("CONSTANT")]},Se=function(h,c){var b={EVEN:[" % 2 == 0",ae.MULTIPLICATIVE,ae.RELATIONAL],ODD:[" % 2 == 1",ae.MULTIPLICATIVE,ae.RELATIONAL],WHOLE:[" % 1 == 0",ae.MULTIPLICATIVE,ae.RELATIONAL],POSITIVE:[" > 0",ae.RELATIONAL,ae.RELATIONAL],NEGATIVE:[" < 0",ae.RELATIONAL,ae.RELATIONAL],DIVISIBLE_BY:[null,ae.MULTIPLICATIVE,ae.RELATIONAL],PRIME:[null,ae.NONE,ae.HIGH]};const w=h.getFieldValue("PROPERTY"),[z,q,ee]=b[w];if(b=c.valueToCode(h,"NUMBER_TO_CHECK",q)||"0",w==="PRIME")h=c.provideFunction_("math_isPrime",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(n)
  -- https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if n == 2 or n == 3 then
    return true
  end
  -- False if n is NaN, negative, is 1, or not whole.
  -- And false if n is divisible by 2 or 3.
  if not(n > 1) or n % 1 ~= 0 or n % 2 == 0 or n % 3 == 0 then
    return false
  end
  -- Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x = 6, math.sqrt(n) + 1.5, 6 do
    if n % (x - 1) == 0 or n % (x + 1) == 0 then
      return false
    end
  end
  return true
end
`)+"("+b+")";else if(w==="DIVISIBLE_BY"){if(h=c.valueToCode(h,"DIVISOR",ae.MULTIPLICATIVE)||"0",h==="0")return["nil",ae.ATOMIC];h=b+" % "+h+" == 0"}else h=b+z;return[h,ee]},xe=function(h,c){const b=c.valueToCode(h,"DELTA",ae.ADDITIVE)||"0";return h=c.getVariableName(h.getFieldValue("VAR")),h+" = "+h+" + "+b+`
`},Ce=function(h,c){function b(){return c.provideFunction_("math_sum",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  local result = 0
  for _, v in ipairs(t) do
    result = result + v
  end
  return result
end
`)}var w=h.getFieldValue("OP");switch(h=c.valueToCode(h,"LIST",ae.NONE)||"{}",w){case"SUM":w=b();break;case"MIN":w=c.provideFunction_("math_min",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  if #t == 0 then
    return 0
  end
  local result = math.huge
  for _, v in ipairs(t) do
    if v < result then
      result = v
    end
  end
  return result
end
`);break;case"AVERAGE":w=c.provideFunction_("math_average",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  if #t == 0 then
    return 0
  end
  return ${b()}(t) / #t
end
`);break;case"MAX":w=c.provideFunction_("math_max",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  if #t == 0 then
    return 0
  end
  local result = -math.huge
  for _, v in ipairs(t) do
    if v > result then
      result = v
    end
  end
  return result
end
`);break;case"MEDIAN":w=c.provideFunction_("math_median",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  -- Source: http://lua-users.org/wiki/SimpleStats
  if #t == 0 then
    return 0
  end
  local temp = {}
  for _, v in ipairs(t) do
    if type(v) == 'number' then
      table.insert(temp, v)
    end
  end
  table.sort(temp)
  if #temp % 2 == 0 then
    return (temp[#temp / 2] + temp[(#temp / 2) + 1]) / 2
  else
    return temp[math.ceil(#temp / 2)]
  end
end
`);break;case"MODE":w=c.provideFunction_("math_modes",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  -- Source: http://lua-users.org/wiki/SimpleStats
  local counts = {}
  for _, v in ipairs(t) do
    if counts[v] == nil then
      counts[v] = 1
    else
      counts[v] = counts[v] + 1
    end
  end
  local biggestCount = 0
  for _, v  in pairs(counts) do
    if v > biggestCount then
      biggestCount = v
    end
  end
  local temp = {}
  for k, v in pairs(counts) do
    if v == biggestCount then
      table.insert(temp, k)
    end
  end
  return temp
end
`);break;case"STD_DEV":w=c.provideFunction_("math_standard_deviation",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  local m
  local vm
  local total = 0
  local count = 0
  local result
  m = #t == 0 and 0 or ${b()}(t) / #t
  for _, v in ipairs(t) do
    if type(v) == 'number' then
      vm = v - m
      total = total + (vm * vm)
      count = count + 1
    end
  end
  result = math.sqrt(total / (count-1))
  return result
end
`);break;case"RANDOM":w=c.provideFunction_("math_random_list",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(t)
  if #t == 0 then
    return nil
  end
  return t[math.random(#t)]
end
`);break;default:throw Error("Unknown operator: "+w)}return[w+"("+h+")",ae.HIGH]},Ie=function(h,c){const b=c.valueToCode(h,"DIVIDEND",ae.MULTIPLICATIVE)||"0";return h=c.valueToCode(h,"DIVISOR",ae.MULTIPLICATIVE)||"0",[b+" % "+h,ae.MULTIPLICATIVE]},je=function(h,c){const b=c.valueToCode(h,"VALUE",ae.NONE)||"0",w=c.valueToCode(h,"LOW",ae.NONE)||"-math.huge";return h=c.valueToCode(h,"HIGH",ae.NONE)||"math.huge",["math.min(math.max("+b+", "+w+"), "+h+")",ae.HIGH]},Ve=function(h,c){const b=c.valueToCode(h,"FROM",ae.NONE)||"0";return h=c.valueToCode(h,"TO",ae.NONE)||"0",["math.random("+b+", "+h+")",ae.HIGH]},Me=function(h,c){return["math.random()",ae.HIGH]},ce=function(h,c){const b=c.valueToCode(h,"X",ae.NONE)||"0";return["math.deg(math.atan2("+(c.valueToCode(h,"Y",ae.NONE)||"0")+", "+b+"))",ae.HIGH]},te=function(h,c){const b=c.getProcedureName(h.getFieldValue("NAME"));var w="";c.STATEMENT_PREFIX&&(w+=c.injectId(c.STATEMENT_PREFIX,h)),c.STATEMENT_SUFFIX&&(w+=c.injectId(c.STATEMENT_SUFFIX,h)),w&&(w=c.prefixLines(w,c.INDENT));let z="";c.INFINITE_LOOP_TRAP&&(z=c.prefixLines(c.injectId(c.INFINITE_LOOP_TRAP,h),c.INDENT));let q="";h.getInput("STACK")&&(q=c.statementToCode(h,"STACK"));let ee="";h.getInput("RETURN")&&(ee=c.valueToCode(h,"RETURN",ae.NONE)||"");let Pe="";q&&ee&&(Pe=w),ee?ee=c.INDENT+"return "+ee+`
`:q||(q="");const Je=[],At=h.getVars();for(let it=0;it<At.length;it++)Je[it]=c.getVariableName(At[it]);return w="function "+b+"("+Je.join(", ")+`)
`+w+z+q+Pe+ee+`end
`,w=c.scrub_(h,w),c.definitions_["%"+b]=w,null},ue=function(h,c){const b=c.getProcedureName(h.getFieldValue("NAME")),w=[],z=h.getVars();for(let q=0;q<z.length;q++)w[q]=c.valueToCode(h,"ARG"+q,ae.NONE)||"nil";return[b+"("+w.join(", ")+")",ae.HIGH]},ge=function(h,c){return c.forBlock.procedures_callreturn(h,c)[0]+`
`},we=function(h,c){let b="if "+(c.valueToCode(h,"CONDITION",ae.NONE)||"false")+` then
`;return c.STATEMENT_SUFFIX&&(b+=c.prefixLines(c.injectId(c.STATEMENT_SUFFIX,h),c.INDENT)),h.hasReturnValue_?(h=c.valueToCode(h,"VALUE",ae.NONE)||"nil",b+=c.INDENT+"return "+h+`
`):b+=c.INDENT+`return
`,b+`end
`},st=function(h,c){return[c.quote_(h.getFieldValue("TEXT")),ae.ATOMIC]},Be=function(h,c){if(h.itemCount_===0)return["''",ae.ATOMIC];if(h.itemCount_===1)return["tostring("+(c.valueToCode(h,"ADD0",ae.NONE)||"''")+")",ae.HIGH];if(h.itemCount_===2){var b=c.valueToCode(h,"ADD0",ae.CONCATENATION)||"''";return h=c.valueToCode(h,"ADD1",ae.CONCATENATION)||"''",[b+" .. "+h,ae.CONCATENATION]}b=[];for(let w=0;w<h.itemCount_;w++)b[w]=c.valueToCode(h,"ADD"+w,ae.NONE)||"''";return["table.concat({"+b.join(", ")+"})",ae.HIGH]},Rt=function(h,c){const b=c.getVariableName(h.getFieldValue("VAR"));return h=c.valueToCode(h,"TEXT",ae.CONCATENATION)||"''",b+" = "+b+" .. "+h+`
`},de=function(h,c){return["#"+(c.valueToCode(h,"VALUE",ae.UNARY)||"''"),ae.UNARY]},Le=function(h,c){return["#"+(c.valueToCode(h,"VALUE",ae.UNARY)||"''")+" == 0",ae.RELATIONAL]},_e=function(h,c){const b=c.valueToCode(h,"FIND",ae.NONE)||"''",w=c.valueToCode(h,"VALUE",ae.NONE)||"''";return[(h.getFieldValue("END")==="FIRST"?c.provideFunction_("firstIndexOf",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str, substr)
  local i = string.find(str, substr, 1, true)
  if i == nil then
    return 0
  end
  return i
end
`):c.provideFunction_("lastIndexOf",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str, substr)
  local i = string.find(string.reverse(str), string.reverse(substr), 1, true)
  if i then
    return #str + 2 - i - #substr
  end
  return 0
end
`))+"("+w+", "+b+")",ae.HIGH]},be=function(h,c){var b=h.getFieldValue("WHERE")||"FROM_START";const w=c.valueToCode(h,"VALUE",ae.NONE)||"''";if(b==="RANDOM")c=c.provideFunction_("text_random_letter",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str)
  local index = math.random(string.len(str))
  return string.sub(str, index, index)
end
`)+"("+w+")";else{if(b==="FIRST")b="1";else if(b==="LAST")b="-1";else if(h=c.valueToCode(h,"AT",b==="FROM_END"?ae.UNARY:ae.NONE)||"1",b==="FROM_START")b=h;else if(b==="FROM_END")b="-"+h;else throw Error("Unhandled option (text_charAt).");c=b.match(/^-?\w*$/)?"string.sub("+w+", "+b+", "+b+")":c.provideFunction_("text_char_at",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str, index)
  return string.sub(str, index, index)
end
`)+"("+w+", "+b+")"}return[c,ae.HIGH]},We=function(h,c){const b=c.valueToCode(h,"STRING",ae.NONE)||"''";var w=h.getFieldValue("WHERE1"),z=c.valueToCode(h,"AT1",w==="FROM_END"?ae.UNARY:ae.NONE)||"1";if(w==="FIRST")w=1;else if(w==="FROM_START")w=z;else if(w==="FROM_END")w="-"+z;else throw Error("Unhandled option (text_getSubstring)");if(z=h.getFieldValue("WHERE2"),h=c.valueToCode(h,"AT2",z==="FROM_END"?ae.UNARY:ae.NONE)||"1",z==="LAST")h=-1;else if(z!=="FROM_START")if(z==="FROM_END")h="-"+h;else throw Error("Unhandled option (text_getSubstring)");return["string.sub("+b+", "+w+", "+h+")",ae.HIGH]},Ke=function(h,c){const b=h.getFieldValue("CASE");h=c.valueToCode(h,"TEXT",ae.NONE)||"''";let w;return b==="UPPERCASE"?w="string.upper":b==="LOWERCASE"?w="string.lower":b==="TITLECASE"&&(w=c.provideFunction_("text_titlecase",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(str)
  local buf = {}
  local inWord = false
  for i = 1, #str do
    local c = string.sub(str, i, i)
    if inWord then
      table.insert(buf, string.lower(c))
      if string.find(c, "%s") then
        inWord = false
      end
    else
      table.insert(buf, string.upper(c))
      inWord = true
    end
  end
  return table.concat(buf)
end
`)),[w+"("+h+")",ae.HIGH]},at=function(h,c){const b={LEFT:"^%s*(,-)",RIGHT:"(.-)%s*$",BOTH:"^%s*(.-)%s*$"}[h.getFieldValue("MODE")];return["string.gsub("+(c.valueToCode(h,"TEXT",ae.NONE)||"''")+', "'+b+'", "%1")',ae.HIGH]},ct=function(h,c){return"print("+(c.valueToCode(h,"TEXT",ae.NONE)||"''")+`)
`},Ht=function(h,c){let b;return b=h.getField("TEXT")?c.quote_(h.getFieldValue("TEXT")):c.valueToCode(h,"TEXT",ae.NONE)||"''",c=c.provideFunction_("text_prompt",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(msg)
  io.write(msg)
  io.flush()
  return io.read()
end
`)+"("+b+")",h.getFieldValue("TYPE")==="NUMBER"&&(c="tonumber("+c+", 10)"),[c,ae.HIGH]},pt=function(h,c){const b=c.valueToCode(h,"TEXT",ae.NONE)||"''";return h=c.valueToCode(h,"SUB",ae.NONE)||"''",[c.provideFunction_("text_count",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle)
  if #needle == 0 then
    return #haystack + 1
  end
  local i = 1
  local count = 0
  while true do
    i = string.find(haystack, needle, i, true)
    if i == nil then
      break
    end
    count = count + 1
    i = i + #needle
  end
  return count
end
`)+"("+b+", "+h+")",ae.HIGH]},St=function(h,c){const b=c.valueToCode(h,"TEXT",ae.NONE)||"''",w=c.valueToCode(h,"FROM",ae.NONE)||"''";return h=c.valueToCode(h,"TO",ae.NONE)||"''",[c.provideFunction_("text_replace",`
function ${c.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement)
  local buf = {}
  local i = 1
  while i <= #haystack do
    if string.sub(haystack, i, i + #needle - 1) == needle then
      for j = 1, #replacement do
        table.insert(buf, string.sub(replacement, j, j))
      end
      i = i + #needle
    else
      table.insert(buf, string.sub(haystack, i, i))
      i = i + 1
    end
  end
  return table.concat(buf)
end
`)+"("+b+", "+w+", "+h+")",ae.HIGH]},Et=function(h,c){return["string.reverse("+(c.valueToCode(h,"TEXT",ae.NONE)||"''")+")",ae.HIGH]},dt=function(h,c){return[c.getVariableName(h.getFieldValue("VAR")),ae.ATOMIC]},T=function(h,c){const b=c.valueToCode(h,"VALUE",ae.NONE)||"0";return c.getVariableName(h.getFieldValue("VAR"))+" = "+b+`
`},ae;(function(h){h[h.ATOMIC=0]="ATOMIC",h[h.HIGH=1]="HIGH",h[h.EXPONENTIATION=2]="EXPONENTIATION",h[h.UNARY=3]="UNARY",h[h.MULTIPLICATIVE=4]="MULTIPLICATIVE",h[h.ADDITIVE=5]="ADDITIVE",h[h.CONCATENATION=6]="CONCATENATION",h[h.RELATIONAL=7]="RELATIONAL",h[h.AND=8]="AND",h[h.OR=9]="OR",h[h.NONE=99]="NONE"})(ae||(ae={}));var Y=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(h="Lua"){super(h),this.isInitialized=!1;for(const c in ae)h=ae[c],typeof h!="string"&&(this["ORDER_"+c]=h);this.addReservedWords("_,__inext,assert,bit,colors,colours,coroutine,disk,dofile,error,fs,fetfenv,getmetatable,gps,help,io,ipairs,keys,loadfile,loadstring,math,native,next,os,paintutils,pairs,parallel,pcall,peripheral,print,printError,rawequal,rawget,rawset,read,rednet,redstone,rs,select,setfenv,setmetatable,sleep,string,table,term,textutils,tonumber,tostring,turtle,type,unpack,vector,write,xpcall,_VERSION,__indext,HTTP,and,break,do,else,elseif,end,false,for,function,if,in,local,nil,not,or,repeat,return,then,true,until,while,add,sub,mul,div,mod,pow,unm,concat,len,eq,lt,le,index,newindex,call,assert,collectgarbage,dofile,error,_G,getmetatable,inpairs,load,loadfile,next,pairs,pcall,print,rawequal,rawget,rawlen,rawset,select,setmetatable,tonumber,tostring,type,_VERSION,xpcall,require,package,string,table,math,bit32,io,file,os,debug")}init(h){super.init(h),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(h.getVariableMap()),this.nameDB_.populateVariables(h),this.nameDB_.populateProcedures(h),this.isInitialized=!0}finish(h){const c=Object.values(this.definitions_);return h=super.finish(h),this.isInitialized=!1,this.nameDB_.reset(),c.join(`

`)+`


`+h}scrubNakedValue(h){return"local _ = "+h+`
`}quote_(h){return h=h.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+h+"'"}multiline_quote_(h){return h.split(/\n/g).map(this.quote_).join(` .. '\\n' ..
`)}scrub_(h,c,b=!1){let w="";if(!h.outputConnection||!h.outputConnection.targetConnection){var z=h.getCommentText();z&&(z=s.wrap$$module$build$src$core$utils$string(z,this.COMMENT_WRAP-3),w+=this.prefixLines(z,"-- ")+`
`);for(let q=0;q<h.inputList.length;q++)h.inputList[q].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(z=h.inputList[q].connection.targetBlock())&&(z=this.allNestedComments(z))&&(w+=this.prefixLines(z,"-- "))}return h=h.nextConnection&&h.nextConnection.targetBlock(),b=b?"":this.blockToCode(h),w+c+b}},Te=function(h,c,b){return c==="FIRST"?"1":c==="FROM_END"?"#"+h+" + 1 - "+b:c==="LAST"?"#"+h:c==="RANDOM"?"math.random(#"+h+")":b},ke={};ke.lists_create_empty=l,ke.lists_create_with=p,ke.lists_getIndex=L,ke.lists_getSublist=N,ke.lists_indexOf=M,ke.lists_isEmpty=R,ke.lists_length=$,ke.lists_repeat=E,ke.lists_reverse=K,ke.lists_setIndex=y,ke.lists_sort=P,ke.lists_split=F;var ve={};ve.controls_if=g,ve.controls_ifelse=g,ve.logic_boolean=k,ve.logic_compare=d,ve.logic_negate=x,ve.logic_null=H,ve.logic_operation=C,ve.logic_ternary=f;var Xe=`goto continue
`,le={};le.controls_flow_statements=W,le.controls_for=O,le.controls_forEach=X,le.controls_repeat=D,le.controls_repeat_ext=D,le.controls_whileUntil=U;var v={};v.math_arithmetic=se,v.math_atan2=ce,v.math_change=xe,v.math_constant=me,v.math_constrain=je,v.math_modulo=Ie,v.math_number=re,v.math_number_property=Se,v.math_on_list=Ce,v.math_random_float=Me,v.math_random_int=Ve,v.math_round=Ue,v.math_single=Ue,v.math_trig=Ue;var V={};V.procedures_callnoreturn=ge,V.procedures_callreturn=ue,V.procedures_defnoreturn=te,V.procedures_defreturn=te,V.procedures_ifreturn=we;var J={};J.text=st,J.text_append=Rt,J.text_changeCase=Ke,J.text_charAt=be,J.text_count=pt,J.text_getSubstring=We,J.text_indexOf=_e,J.text_isEmpty=Le,J.text_join=Be,J.text_length=de,J.text_print=ct,J.text_prompt=Ht,J.text_prompt_ext=Ht,J.text_replace=St,J.text_reverse=Et,J.text_trim=at;var ne={};ne.variables_get=dt,ne.variables_set=T;var Ne={};Ne.variables_get_dynamic=dt,Ne.variables_set_dynamic=T;var _=new Y,A=Object.assign({},ke,ve,le,v,V,J,ne,Ne);for(const h in A)_.forBlock[h]=A[h];var m={};return m.LuaGenerator=Y,m.Order=ae,m.luaGenerator=_,m.__namespace__=s,m})})(sh)),sh.exports}var ah={exports:{}},pF=ah.exports,$v;function Km(){return $v||($v=1,(function(i,n){(function(o,s){i.exports=s(Er())})(pF,function(o){var s=o.__namespace__,l=function(_,A){return["array()",T.FUNCTION_CALL]},p=function(_,A){const m=Array(_.itemCount_);for(let h=0;h<_.itemCount_;h++)m[h]=A.valueToCode(_,"ADD"+h,T.NONE)||"null";return["array("+m.join(", ")+")",T.FUNCTION_CALL]},E=function(_,A){const m=A.provideFunction_("lists_repeat",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($value, $count) {
  $array = array();
  for ($index = 0; $index < $count; $index++) {
    $array[] = $value;
  }
  return $array;
}
`),h=A.valueToCode(_,"ITEM",T.NONE)||"null";return _=A.valueToCode(_,"NUM",T.NONE)||"0",[m+"("+h+", "+_+")",T.FUNCTION_CALL]},$=function(_,A){const m=A.provideFunction_("length",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($value) {
  if (is_string($value)) {
    return strlen($value);
  } else {
    return count($value);
  }
}
`);return _=A.valueToCode(_,"VALUE",T.NONE)||"''",[m+"("+_+")",T.FUNCTION_CALL]},R=function(_,A){return["empty("+(A.valueToCode(_,"VALUE",T.FUNCTION_CALL)||"array()")+")",T.FUNCTION_CALL]},M=function(_,A){const m=A.valueToCode(_,"FIND",T.NONE)||"''",h=A.valueToCode(_,"VALUE",T.MEMBER)||"[]";let c=" -1",b="";return _.workspace.options.oneBasedIndex&&(c=" 0",b=" + 1"),[(_.getFieldValue("END")==="FIRST"?A.provideFunction_("indexOf",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($haystack, $needle) {
  for ($index = 0; $index < count($haystack); $index++) {
    if ($haystack[$index] == $needle) return $index${b};
  }
  return ${c};
}
`):A.provideFunction_("lastIndexOf",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($haystack, $needle) {
  $last = ${c};
  for ($index = 0; $index < count($haystack); $index++) {
    if ($haystack[$index] == $needle) $last = $index${b};
  }
  return $last;
}
`))+"("+h+", "+m+")",T.FUNCTION_CALL]},L=function(_,A){var m=_.getFieldValue("MODE")||"GET";switch(_.getFieldValue("WHERE")||"FROM_START"){case"FIRST":if(m==="GET")return[(A.valueToCode(_,"VALUE",T.MEMBER)||"array()")+"[0]",T.MEMBER];if(m==="GET_REMOVE")return["array_shift("+(A.valueToCode(_,"VALUE",T.NONE)||"array()")+")",T.FUNCTION_CALL];if(m==="REMOVE")return"array_shift("+(A.valueToCode(_,"VALUE",T.NONE)||"array()")+`);
`;break;case"LAST":if(m==="GET")return["end("+(A.valueToCode(_,"VALUE",T.NONE)||"array()")+")",T.FUNCTION_CALL];if(m==="GET_REMOVE")return["array_pop("+(A.valueToCode(_,"VALUE",T.NONE)||"array()")+")",T.FUNCTION_CALL];if(m==="REMOVE")return"array_pop("+(A.valueToCode(_,"VALUE",T.NONE)||"array()")+`);
`;break;case"FROM_START":var h=A.getAdjusted(_,"AT");if(m==="GET")return[(A.valueToCode(_,"VALUE",T.MEMBER)||"array()")+"["+h+"]",T.MEMBER];if(m==="GET_REMOVE")return["array_splice("+(A.valueToCode(_,"VALUE",T.NONE)||"array()")+", "+h+", 1)[0]",T.FUNCTION_CALL];if(m==="REMOVE")return"array_splice("+(A.valueToCode(_,"VALUE",T.NONE)||"array()")+", "+h+`, 1);
`;break;case"FROM_END":if(m==="GET")return m=A.valueToCode(_,"VALUE",T.NONE)||"array()",A=A.getAdjusted(_,"AT",1,!0),["array_slice("+m+", "+A+", 1)[0]",T.FUNCTION_CALL];if(m==="GET_REMOVE"||m==="REMOVE"){if(h=A.valueToCode(_,"VALUE",T.NONE)||"array()",A=A.getAdjusted(_,"AT",1,!1,T.SUBTRACTION),A="array_splice("+h+", count("+h+") - "+A+", 1)[0]",m==="GET_REMOVE")return[A,T.FUNCTION_CALL];if(m==="REMOVE")return A+`;
`}break;case"RANDOM":if(_=A.valueToCode(_,"VALUE",T.NONE)||"array()",m==="GET")return[A.provideFunction_("lists_get_random_item",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($list) {
  return $list[rand(0,count($list)-1)];
}
`)+"("+_+")",T.FUNCTION_CALL];if(m==="GET_REMOVE")return[A.provideFunction_("lists_get_remove_random_item",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(&$list) {
  $x = rand(0,count($list)-1);
  unset($list[$x]);
  return array_values($list);
}
`)+"("+_+")",T.FUNCTION_CALL];if(m==="REMOVE")return A.provideFunction_("lists_remove_random_item",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(&$list) {
  unset($list[rand(0,count($list)-1)]);
}
`)+"("+_+`);
`}throw Error("Unhandled combination (lists_getIndex).")},y=function(_,A){const m=_.getFieldValue("MODE")||"GET";var h=_.getFieldValue("WHERE")||"FROM_START";const c=A.valueToCode(_,"TO",T.ASSIGNMENT)||"null";switch(h){case"FIRST":if(m==="SET")return(A.valueToCode(_,"LIST",T.MEMBER)||"array()")+"[0] = "+c+`;
`;if(m==="INSERT")return"array_unshift("+(A.valueToCode(_,"LIST",T.NONE)||"array()")+", "+c+`);
`;break;case"LAST":if(_=A.valueToCode(_,"LIST",T.NONE)||"array()",m==="SET")return A.provideFunction_("lists_set_last_item",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(&$list, $value) {
  $list[count($list) - 1] = $value;
}
`)+"("+_+", "+c+`);
`;if(m==="INSERT")return"array_push("+_+", "+c+`);
`;break;case"FROM_START":if(h=A.getAdjusted(_,"AT"),m==="SET")return(A.valueToCode(_,"LIST",T.MEMBER)||"array()")+"["+h+"] = "+c+`;
`;if(m==="INSERT")return"array_splice("+(A.valueToCode(_,"LIST",T.NONE)||"array()")+", "+h+", 0, "+c+`);
`;break;case"FROM_END":if(h=A.valueToCode(_,"LIST",T.NONE)||"array()",_=A.getAdjusted(_,"AT",1),m==="SET")return A.provideFunction_("lists_set_from_end",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(&$list, $at, $value) {
  $list[count($list) - $at] = $value;
}
`)+"("+h+", "+_+", "+c+`);
`;if(m==="INSERT")return A.provideFunction_("lists_insert_from_end",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}(&$list, $at, $value) {
  return array_splice($list, count($list) - $at, 0, $value);
}
`)+"("+h+", "+_+", "+c+`);
`;break;case"RANDOM":if(_=A.valueToCode(_,"LIST",T.REFERENCE)||"array()",_.match(/^\$\w+$/))h="";else{h=A.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE);var b=h+" = &"+_+`;
`;_=h,h=b}if(A=A.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),h+=A+" = rand(0, count("+_+`)-1);
`,m==="SET")return h+(_+"["+A+"] = "+c+`;
`);if(m==="INSERT")return h+("array_splice("+_+", "+A+", 0, "+c+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},N=function(_,A){var m=A.valueToCode(_,"LIST",T.NONE)||"array()",h=_.getFieldValue("WHERE1");const c=_.getFieldValue("WHERE2");if(h!=="FIRST"||c!=="LAST")if(m.match(/^\$\w+$/)||h!=="FROM_END"&&c==="FROM_START"){switch(h){case"FROM_START":h=A.getAdjusted(_,"AT1");break;case"FROM_END":h=A.getAdjusted(_,"AT1",1,!1,T.SUBTRACTION),h="count("+m+") - "+h;break;case"FIRST":h="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":A=A.getAdjusted(_,"AT2",0,!1,T.SUBTRACTION),A+=" - ",A=s.isNumber$$module$build$src$core$utils$string(String(h))||String(h).match(/^\(.+\)$/)?A+h:A+("("+h+")"),A+=" + 1";break;case"FROM_END":A=A.getAdjusted(_,"AT2",0,!1,T.SUBTRACTION),A="count("+m+") - "+A+" - ",A=s.isNumber$$module$build$src$core$utils$string(String(h))||String(h).match(/^\(.+\)$/)?A+h:A+("("+h+")");break;case"LAST":A="count("+m+") - ",A=s.isNumber$$module$build$src$core$utils$string(String(h))||String(h).match(/^\(.+\)$/)?A+h:A+("("+h+")");break;default:throw Error("Unhandled option (lists_getSublist).")}m="array_slice("+m+", "+h+", "+A+")"}else{const b=A.getAdjusted(_,"AT1");_=A.getAdjusted(_,"AT2"),m=A.provideFunction_("lists_get_sublist",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($list, $where1, $at1, $where2, $at2) {
  if ($where1 == 'FROM_END') {
    $at1 = count($list) - 1 - $at1;
  } else if ($where1 == 'FIRST') {
    $at1 = 0;
  } else if ($where1 != 'FROM_START') {
    throw new Exception('Unhandled option (lists_get_sublist).');
  }
  $length = 0;
  if ($where2 == 'FROM_START') {
    $length = $at2 - $at1 + 1;
  } else if ($where2 == 'FROM_END') {
    $length = count($list) - $at1 - $at2;
  } else if ($where2 == 'LAST') {
    $length = count($list) - $at1;
  } else {
    throw new Exception('Unhandled option (lists_get_sublist).');
  }
  return array_slice($list, $at1, $length);
}
`)+"("+m+", '"+h+"', "+b+", '"+c+"', "+_+")"}return[m,T.FUNCTION_CALL]},P=function(_,A){const m=A.valueToCode(_,"LIST",T.NONE)||"array()",h=_.getFieldValue("DIRECTION")==="1"?1:-1;return _=_.getFieldValue("TYPE"),[A.provideFunction_("lists_sort",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($list, $type, $direction) {
  $sortCmpFuncs = array(
    'NUMERIC' => 'strnatcasecmp',
    'TEXT' => 'strcmp',
    'IGNORE_CASE' => 'strcasecmp'
  );
  $sortCmp = $sortCmpFuncs[$type];
  $list2 = $list;
  usort($list2, $sortCmp);
  if ($direction == -1) {
    $list2 = array_reverse($list2);
  }
  return $list2;
}
`)+"("+m+', "'+_+'", '+h+")",T.FUNCTION_CALL]},F=function(_,A){let m=A.valueToCode(_,"INPUT",T.NONE);if(A=A.valueToCode(_,"DELIM",T.NONE)||"''",_=_.getFieldValue("MODE"),_==="SPLIT")m||(m="''"),_="explode";else if(_==="JOIN")m||(m="array()"),_="implode";else throw Error("Unknown mode: "+_);return[_+"("+A+", "+m+")",T.FUNCTION_CALL]},K=function(_,A){return["array_reverse("+(A.valueToCode(_,"LIST",T.NONE)||"[]")+")",T.FUNCTION_CALL]},g=function(_,A){let m=0,h="",c,b;A.STATEMENT_PREFIX&&(h+=A.injectId(A.STATEMENT_PREFIX,_));do b=A.valueToCode(_,"IF"+m,T.NONE)||"false",c=A.statementToCode(_,"DO"+m),A.STATEMENT_SUFFIX&&(c=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,_),A.INDENT)+c),h+=(m>0?" else ":"")+"if ("+b+`) {
`+c+"}",m++;while(_.getInput("IF"+m));return(_.getInput("ELSE")||A.STATEMENT_SUFFIX)&&(c=_.getInput("ELSE")?A.statementToCode(_,"ELSE"):"",A.STATEMENT_SUFFIX&&(c=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,_),A.INDENT)+c),h+=` else {
`+c+"}"),h+`
`},d=function(_,A){const m={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[_.getFieldValue("OP")],h=m==="=="||m==="!="?T.EQUALITY:T.RELATIONAL,c=A.valueToCode(_,"A",h)||"0";return _=A.valueToCode(_,"B",h)||"0",[c+" "+m+" "+_,h]},C=function(_,A){const m=_.getFieldValue("OP")==="AND"?"&&":"||",h=m==="&&"?T.LOGICAL_AND:T.LOGICAL_OR;let c=A.valueToCode(_,"A",h);return _=A.valueToCode(_,"B",h),c||_?(A=m==="&&"?"true":"false",c||(c=A),_||(_=A)):_=c="false",[c+" "+m+" "+_,h]},x=function(_,A){const m=T.LOGICAL_NOT;return["!"+(A.valueToCode(_,"BOOL",m)||"true"),m]},k=function(_,A){return[_.getFieldValue("BOOL")==="TRUE"?"true":"false",T.ATOMIC]},H=function(_,A){return["null",T.ATOMIC]},f=function(_,A){const m=A.valueToCode(_,"IF",T.CONDITIONAL)||"false",h=A.valueToCode(_,"THEN",T.CONDITIONAL)||"null";return _=A.valueToCode(_,"ELSE",T.CONDITIONAL)||"null",[m+" ? "+h+" : "+_,T.CONDITIONAL]},I=function(_,A){let m;m=_.getField("TIMES")?String(Number(_.getFieldValue("TIMES"))):A.valueToCode(_,"TIMES",T.ASSIGNMENT)||"0";let h=A.statementToCode(_,"DO");h=A.addLoopTrap(h,_),_="";const c=A.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE);let b=m;return m.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(m)||(b=A.nameDB_.getDistinctName("repeat_end",s.NameType$$module$build$src$core$names.VARIABLE),_+=b+" = "+m+`;
`),_+("for ("+c+" = 0; "+c+" < "+b+"; "+c+`++) {
`+h+`}
`)},D=function(_,A){const m=_.getFieldValue("MODE")==="UNTIL";let h=A.valueToCode(_,"BOOL",m?T.LOGICAL_NOT:T.NONE)||"false",c=A.statementToCode(_,"DO");return c=A.addLoopTrap(c,_),m&&(h="!"+h),"while ("+h+`) {
`+c+`}
`},U=function(_,A){var m=A.getVariableName(_.getFieldValue("VAR")),h=A.valueToCode(_,"FROM",T.ASSIGNMENT)||"0",c=A.valueToCode(_,"TO",T.ASSIGNMENT)||"0";const b=A.valueToCode(_,"BY",T.ASSIGNMENT)||"1";let w=A.statementToCode(_,"DO");if(w=A.addLoopTrap(w,_),s.isNumber$$module$build$src$core$utils$string(h)&&s.isNumber$$module$build$src$core$utils$string(c)&&s.isNumber$$module$build$src$core$utils$string(b))A=Number(h)<=Number(c),_="for ("+m+" = "+h+"; "+m+(A?" <= ":" >= ")+c+"; "+m,m=Math.abs(Number(b)),_=m===1?_+(A?"++":"--"):_+((A?" += ":" -= ")+m),_+=`) {
`+w+`}
`;else{_="";let z=h;h.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(h)||(z=A.nameDB_.getDistinctName(m+"_start",s.NameType$$module$build$src$core$names.VARIABLE),_+=z+" = "+h+`;
`),h=c,c.match(/^\w+$/)||s.isNumber$$module$build$src$core$utils$string(c)||(h=A.nameDB_.getDistinctName(m+"_end",s.NameType$$module$build$src$core$names.VARIABLE),_+=h+" = "+c+`;
`),c=A.nameDB_.getDistinctName(m+"_inc",s.NameType$$module$build$src$core$names.VARIABLE),_+=c+" = ",_=s.isNumber$$module$build$src$core$utils$string(b)?_+(Math.abs(Number(b))+`;
`):_+("abs("+b+`);
`),_+="if ("+z+" > "+h+`) {
`,_+=A.INDENT+c+" = -"+c+`;
`,_=_+`}
for (`+(m+" = "+z+"; "+c+" >= 0 ? "+m+" <= "+h+" : "+m+" >= "+h+"; "+m+" += "+c+`) {
`+w+`}
`)}return _},O=function(_,A){const m=A.getVariableName(_.getFieldValue("VAR")),h=A.valueToCode(_,"LIST",T.ASSIGNMENT)||"[]";let c=A.statementToCode(_,"DO");return c=A.addLoopTrap(c,_),"foreach ("+h+" as "+m+`) {
`+c+`}
`},X=function(_,A){let m="";if(A.STATEMENT_PREFIX&&(m+=A.injectId(A.STATEMENT_PREFIX,_)),A.STATEMENT_SUFFIX&&(m+=A.injectId(A.STATEMENT_SUFFIX,_)),A.STATEMENT_PREFIX){const h=_.getSurroundLoop();h&&!h.suppressPrefixSuffix&&(m+=A.injectId(A.STATEMENT_PREFIX,h))}switch(_.getFieldValue("FLOW")){case"BREAK":return m+`break;
`;case"CONTINUE":return m+`continue;
`}throw Error("Unknown flow statement.")},W=function(_,A){return _=Number(_.getFieldValue("NUM")),_===1/0?["INF",T.ATOMIC]:_===-1/0?["-INF",T.UNARY_NEGATION]:[String(_),_>=0?T.ATOMIC:T.UNARY_NEGATION]},re=function(_,A){var m={ADD:[" + ",T.ADDITION],MINUS:[" - ",T.SUBTRACTION],MULTIPLY:[" * ",T.MULTIPLICATION],DIVIDE:[" / ",T.DIVISION],POWER:[" ** ",T.POWER]}[_.getFieldValue("OP")];const h=m[0];m=m[1];const c=A.valueToCode(_,"A",m)||"0";return _=A.valueToCode(_,"B",m)||"0",[c+h+_,m]},se=function(_,A){const m=_.getFieldValue("OP");let h;if(m==="NEG")return _=A.valueToCode(_,"NUM",T.UNARY_NEGATION)||"0",_[0]==="-"&&(_=" "+_),["-"+_,T.UNARY_NEGATION];switch(_=m==="SIN"||m==="COS"||m==="TAN"?A.valueToCode(_,"NUM",T.DIVISION)||"0":A.valueToCode(_,"NUM",T.NONE)||"0",m){case"ABS":h="abs("+_+")";break;case"ROOT":h="sqrt("+_+")";break;case"LN":h="log("+_+")";break;case"EXP":h="exp("+_+")";break;case"POW10":h="pow(10,"+_+")";break;case"ROUND":h="round("+_+")";break;case"ROUNDUP":h="ceil("+_+")";break;case"ROUNDDOWN":h="floor("+_+")";break;case"SIN":h="sin("+_+" / 180 * pi())";break;case"COS":h="cos("+_+" / 180 * pi())";break;case"TAN":h="tan("+_+" / 180 * pi())"}if(h)return[h,T.FUNCTION_CALL];switch(m){case"LOG10":h="log("+_+") / log(10)";break;case"ASIN":h="asin("+_+") / pi() * 180";break;case"ACOS":h="acos("+_+") / pi() * 180";break;case"ATAN":h="atan("+_+") / pi() * 180";break;default:throw Error("Unknown math operator: "+m)}return[h,T.DIVISION]},Ue=function(_,A){return{PI:["M_PI",T.ATOMIC],E:["M_E",T.ATOMIC],GOLDEN_RATIO:["(1 + sqrt(5)) / 2",T.DIVISION],SQRT2:["M_SQRT2",T.ATOMIC],SQRT1_2:["M_SQRT1_2",T.ATOMIC],INFINITY:["INF",T.ATOMIC]}[_.getFieldValue("CONSTANT")]},me=function(_,A){var m={EVEN:[""," % 2 == 0",T.MODULUS,T.EQUALITY],ODD:[""," % 2 == 1",T.MODULUS,T.EQUALITY],WHOLE:["is_int(",")",T.NONE,T.FUNCTION_CALL],POSITIVE:[""," > 0",T.RELATIONAL,T.RELATIONAL],NEGATIVE:[""," < 0",T.RELATIONAL,T.RELATIONAL],DIVISIBLE_BY:[null,null,T.MODULUS,T.EQUALITY],PRIME:[null,null,T.NONE,T.FUNCTION_CALL]};const h=_.getFieldValue("PROPERTY"),[c,b,w,z]=m[h];if(m=A.valueToCode(_,"NUMBER_TO_CHECK",w)||"0",h==="PRIME")_=A.provideFunction_("math_isPrime",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if ($n == 2 || $n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (!is_numeric($n) || $n <= 1 || $n % 1 != 0 || $n % 2 == 0 || $n % 3 == 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for ($x = 6; $x <= sqrt($n) + 1; $x += 6) {
    if ($n % ($x - 1) == 0 || $n % ($x + 1) == 0) {
      return false;
    }
  }
  return true;
}
`)+"("+m+")";else if(h==="DIVISIBLE_BY"){if(_=A.valueToCode(_,"DIVISOR",T.MODULUS)||"0",_==="0")return["false",T.ATOMIC];_=m+" % "+_+" == 0"}else _=c+m+b;return[_,z]},Se=function(_,A){const m=A.valueToCode(_,"DELTA",T.ADDITION)||"0";return A.getVariableName(_.getFieldValue("VAR"))+" += "+m+`;
`},xe=function(_,A){var m=_.getFieldValue("OP");switch(m){case"SUM":_=A.valueToCode(_,"LIST",T.FUNCTION_CALL)||"array()",_="array_sum("+_+")";break;case"MIN":_=A.valueToCode(_,"LIST",T.FUNCTION_CALL)||"array()",_="min("+_+")";break;case"MAX":_=A.valueToCode(_,"LIST",T.FUNCTION_CALL)||"array()",_="max("+_+")";break;case"AVERAGE":m=A.provideFunction_("math_mean",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($myList) {
  return array_sum($myList) / count($myList);
}
`),_=A.valueToCode(_,"LIST",T.NONE)||"array()",_=m+"("+_+")";break;case"MEDIAN":m=A.provideFunction_("math_median",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($arr) {
  sort($arr,SORT_NUMERIC);
  return (count($arr) % 2) ? $arr[floor(count($arr) / 2)] :
      ($arr[floor(count($arr) / 2)] + $arr[floor(count($arr) / 2) - 1]) / 2;
}
`),_=A.valueToCode(_,"LIST",T.NONE)||"[]",_=m+"("+_+")";break;case"MODE":m=A.provideFunction_("math_modes",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($values) {
  if (empty($values)) return array();
  $counts = array_count_values($values);
  arsort($counts); // Sort counts in descending order
  $modes = array_keys($counts, current($counts), true);
  return $modes;
}
`),_=A.valueToCode(_,"LIST",T.NONE)||"[]",_=m+"("+_+")";break;case"STD_DEV":m=A.provideFunction_("math_standard_deviation",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($numbers) {
  $n = count($numbers);
  if (!$n) return null;
  $mean = array_sum($numbers) / count($numbers);
  foreach($numbers as $key => $num) $devs[$key] = pow($num - $mean, 2);
  return sqrt(array_sum($devs) / (count($devs) - 1));
}
`),_=A.valueToCode(_,"LIST",T.NONE)||"[]",_=m+"("+_+")";break;case"RANDOM":m=A.provideFunction_("math_random_list",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($list) {
  $x = rand(0, count($list)-1);
  return $list[$x];
}
`),_=A.valueToCode(_,"LIST",T.NONE)||"[]",_=m+"("+_+")";break;default:throw Error("Unknown operator: "+m)}return[_,T.FUNCTION_CALL]},Ce=function(_,A){const m=A.valueToCode(_,"DIVIDEND",T.MODULUS)||"0";return _=A.valueToCode(_,"DIVISOR",T.MODULUS)||"0",[m+" % "+_,T.MODULUS]},Ie=function(_,A){const m=A.valueToCode(_,"VALUE",T.NONE)||"0",h=A.valueToCode(_,"LOW",T.NONE)||"0";return _=A.valueToCode(_,"HIGH",T.NONE)||"Infinity",["min(max("+m+", "+h+"), "+_+")",T.FUNCTION_CALL]},je=function(_,A){const m=A.valueToCode(_,"FROM",T.NONE)||"0";return _=A.valueToCode(_,"TO",T.NONE)||"0",[A.provideFunction_("math_random_int",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($a, $b) {
  if ($a > $b) {
    return rand($b, $a);
  }
  return rand($a, $b);
}
`)+"("+m+", "+_+")",T.FUNCTION_CALL]},Ve=function(_,A){return["(float)rand()/(float)getrandmax()",T.FUNCTION_CALL]},Me=function(_,A){const m=A.valueToCode(_,"X",T.NONE)||"0";return["atan2("+(A.valueToCode(_,"Y",T.NONE)||"0")+", "+m+") / pi() * 180",T.DIVISION]},ce=function(_,A){var m=[],h=_.workspace,c=s.allUsedVarModels$$module$build$src$core$variables(h)||[];for(var b of c)c=b.getName(),_.getVars().includes(c)||m.push(A.getVariableName(c));for(h=s.allDeveloperVariables$$module$build$src$core$variables(h),b=0;b<h.length;b++)m.push(A.nameDB_.getName(h[b],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));h=m.length?A.INDENT+"global "+m.join(", ")+`;
`:"",m=A.getProcedureName(_.getFieldValue("NAME")),b="",A.STATEMENT_PREFIX&&(b+=A.injectId(A.STATEMENT_PREFIX,_)),A.STATEMENT_SUFFIX&&(b+=A.injectId(A.STATEMENT_SUFFIX,_)),b&&(b=A.prefixLines(b,A.INDENT)),c="",A.INFINITE_LOOP_TRAP&&(c=A.prefixLines(A.injectId(A.INFINITE_LOOP_TRAP,_),A.INDENT));let w="";_.getInput("STACK")&&(w=A.statementToCode(_,"STACK"));let z="";_.getInput("RETURN")&&(z=A.valueToCode(_,"RETURN",T.NONE)||"");let q="";w&&z&&(q=b),z&&(z=A.INDENT+"return "+z+`;
`);const ee=[],Pe=_.getVars();for(let Je=0;Je<Pe.length;Je++)ee[Je]=A.getVariableName(Pe[Je]);return h="function "+m+"("+ee.join(", ")+`) {
`+h+b+c+w+q+z+"}",h=A.scrub_(_,h),A.definitions_["%"+m]=h,null},te=function(_,A){const m=A.getProcedureName(_.getFieldValue("NAME")),h=[],c=_.getVars();for(let b=0;b<c.length;b++)h[b]=A.valueToCode(_,"ARG"+b,T.NONE)||"null";return[m+"("+h.join(", ")+")",T.FUNCTION_CALL]},ue=function(_,A){return A.forBlock.procedures_callreturn(_,A)[0]+`;
`},ge=function(_,A){let m="if ("+(A.valueToCode(_,"CONDITION",T.NONE)||"false")+`) {
`;return A.STATEMENT_SUFFIX&&(m+=A.prefixLines(A.injectId(A.STATEMENT_SUFFIX,_),A.INDENT)),_.hasReturnValue_?(_=A.valueToCode(_,"VALUE",T.NONE)||"null",m+=A.INDENT+"return "+_+`;
`):m+=A.INDENT+`return;
`,m+`}
`},we=function(_,A){return[A.quote_(_.getFieldValue("TEXT")),T.ATOMIC]},st=function(_,A){if(_.itemCount_===0)return["''",T.ATOMIC];if(_.itemCount_===1)return[A.valueToCode(_,"ADD0",T.NONE)||"''",T.NONE];if(_.itemCount_===2){var m=A.valueToCode(_,"ADD0",T.STRING_CONCAT)||"''";return _=A.valueToCode(_,"ADD1",T.STRING_CONCAT)||"''",[m+" . "+_,T.STRING_CONCAT]}m=Array(_.itemCount_);for(let h=0;h<_.itemCount_;h++)m[h]=A.valueToCode(_,"ADD"+h,T.NONE)||"''";return["implode('', array("+m.join(",")+"))",T.FUNCTION_CALL]},Be=function(_,A){const m=A.getVariableName(_.getFieldValue("VAR"));return _=A.valueToCode(_,"TEXT",T.ASSIGNMENT)||"''",m+" .= "+_+`;
`},Rt=function(_,A){const m=A.provideFunction_("length",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($value) {
  if (is_string($value)) {
    return strlen($value);
  }
  return count($value);
}
`);return _=A.valueToCode(_,"VALUE",T.NONE)||"''",[m+"("+_+")",T.FUNCTION_CALL]},de=function(_,A){return["empty("+(A.valueToCode(_,"VALUE",T.NONE)||"''")+")",T.FUNCTION_CALL]},Le=function(_,A){const m=_.getFieldValue("END")==="FIRST"?"strpos":"strrpos",h=A.valueToCode(_,"FIND",T.NONE)||"''",c=A.valueToCode(_,"VALUE",T.NONE)||"''";let b=" -1",w="";return _.workspace.options.oneBasedIndex&&(b=" 0",w=" + 1"),[A.provideFunction_(_.getFieldValue("END")==="FIRST"?"text_indexOf":"text_lastIndexOf",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($text, $search) {
  $pos = ${m}($text, $search);
  return $pos === false ? ${b} : $pos${w};
}
`)+"("+c+", "+h+")",T.FUNCTION_CALL]},_e=function(_,A){const m=_.getFieldValue("WHERE")||"FROM_START",h=A.valueToCode(_,"VALUE",T.NONE)||"''";switch(m){case"FIRST":return["substr("+h+", 0, 1)",T.FUNCTION_CALL];case"LAST":return["substr("+h+", -1)",T.FUNCTION_CALL];case"FROM_START":return _=A.getAdjusted(_,"AT"),["substr("+h+", "+_+", 1)",T.FUNCTION_CALL];case"FROM_END":return _=A.getAdjusted(_,"AT",1,!0),["substr("+h+", "+_+", 1)",T.FUNCTION_CALL];case"RANDOM":return[A.provideFunction_("text_random_letter",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($text) {
  return $text[rand(0, strlen($text) - 1)];
}
`)+"("+h+")",T.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},be=function(_,A){const m=_.getFieldValue("WHERE1"),h=_.getFieldValue("WHERE2"),c=A.valueToCode(_,"STRING",T.NONE)||"''";if(m==="FIRST"&&h==="LAST")return[c,T.NONE];const b=A.getAdjusted(_,"AT1");return _=A.getAdjusted(_,"AT2"),[A.provideFunction_("text_get_substring",`
function ${A.FUNCTION_NAME_PLACEHOLDER_}($text, $where1, $at1, $where2, $at2) {
  if ($where1 == 'FROM_END') {
    $at1 = strlen($text) - 1 - $at1;
  } else if ($where1 == 'FIRST') {
    $at1 = 0;
  } else if ($where1 != 'FROM_START') {
    throw new Exception('Unhandled option (text_get_substring).');
  }
  $length = 0;
  if ($where2 == 'FROM_START') {
    $length = $at2 - $at1 + 1;
  } else if ($where2 == 'FROM_END') {
    $length = strlen($text) - $at1 - $at2;
  } else if ($where2 == 'LAST') {
    $length = strlen($text) - $at1;
  } else {
    throw new Exception('Unhandled option (text_get_substring).');
  }
  return substr($text, $at1, $length);
}
`)+"("+c+", '"+m+"', "+b+", '"+h+"', "+_+")",T.FUNCTION_CALL]},We=function(_,A){A=A.valueToCode(_,"TEXT",T.NONE)||"''";let m;return _.getFieldValue("CASE")==="UPPERCASE"?m="strtoupper("+A+")":_.getFieldValue("CASE")==="LOWERCASE"?m="strtolower("+A+")":_.getFieldValue("CASE")==="TITLECASE"&&(m="ucwords(strtolower("+A+"))"),[m,T.FUNCTION_CALL]},Ke=function(_,A){const m={LEFT:"ltrim",RIGHT:"rtrim",BOTH:"trim"}[_.getFieldValue("MODE")];return _=A.valueToCode(_,"TEXT",T.NONE)||"''",[m+"("+_+")",T.FUNCTION_CALL]},at=function(_,A){return"print("+(A.valueToCode(_,"TEXT",T.NONE)||"''")+`);
`},ct=function(_,A){return A="readline("+(_.getField("TEXT")?A.quote_(_.getFieldValue("TEXT")):A.valueToCode(_,"TEXT",T.NONE)||"''")+")",_.getFieldValue("TYPE")==="NUMBER"&&(A="floatval("+A+")"),[A,T.FUNCTION_CALL]},Ht=function(_,A){const m=A.valueToCode(_,"TEXT",T.NONE)||"''";return _=A.valueToCode(_,"SUB",T.NONE)||"''",["strlen("+_+") === 0 ? strlen("+m+") + 1 : substr_count("+m+", "+_+")",T.CONDITIONAL]},pt=function(_,A){const m=A.valueToCode(_,"TEXT",T.NONE)||"''",h=A.valueToCode(_,"FROM",T.NONE)||"''";return _=A.valueToCode(_,"TO",T.NONE)||"''",["str_replace("+h+", "+_+", "+m+")",T.FUNCTION_CALL]},St=function(_,A){return["strrev("+(A.valueToCode(_,"TEXT",T.NONE)||"''")+")",T.FUNCTION_CALL]},Et=function(_,A){return[A.getVariableName(_.getFieldValue("VAR")),T.ATOMIC]},dt=function(_,A){const m=A.valueToCode(_,"VALUE",T.ASSIGNMENT)||"0";return A.getVariableName(_.getFieldValue("VAR"))+" = "+m+`;
`},T;(function(_){_[_.ATOMIC=0]="ATOMIC",_[_.CLONE=1]="CLONE",_[_.NEW=1]="NEW",_[_.MEMBER=2.1]="MEMBER",_[_.FUNCTION_CALL=2.2]="FUNCTION_CALL",_[_.POWER=3]="POWER",_[_.INCREMENT=4]="INCREMENT",_[_.DECREMENT=4]="DECREMENT",_[_.BITWISE_NOT=4]="BITWISE_NOT",_[_.CAST=4]="CAST",_[_.SUPPRESS_ERROR=4]="SUPPRESS_ERROR",_[_.INSTANCEOF=5]="INSTANCEOF",_[_.LOGICAL_NOT=6]="LOGICAL_NOT",_[_.UNARY_PLUS=7.1]="UNARY_PLUS",_[_.UNARY_NEGATION=7.2]="UNARY_NEGATION",_[_.MULTIPLICATION=8.1]="MULTIPLICATION",_[_.DIVISION=8.2]="DIVISION",_[_.MODULUS=8.3]="MODULUS",_[_.ADDITION=9.1]="ADDITION",_[_.SUBTRACTION=9.2]="SUBTRACTION",_[_.STRING_CONCAT=9.3]="STRING_CONCAT",_[_.BITWISE_SHIFT=10]="BITWISE_SHIFT",_[_.RELATIONAL=11]="RELATIONAL",_[_.EQUALITY=12]="EQUALITY",_[_.REFERENCE=13]="REFERENCE",_[_.BITWISE_AND=13]="BITWISE_AND",_[_.BITWISE_XOR=14]="BITWISE_XOR",_[_.BITWISE_OR=15]="BITWISE_OR",_[_.LOGICAL_AND=16]="LOGICAL_AND",_[_.LOGICAL_OR=17]="LOGICAL_OR",_[_.IF_NULL=18]="IF_NULL",_[_.CONDITIONAL=19]="CONDITIONAL",_[_.ASSIGNMENT=20]="ASSIGNMENT",_[_.LOGICAL_AND_WEAK=21]="LOGICAL_AND_WEAK",_[_.LOGICAL_XOR=22]="LOGICAL_XOR",_[_.LOGICAL_OR_WEAK=23]="LOGICAL_OR_WEAK",_[_.NONE=99]="NONE"})(T||(T={}));var ae=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(_="PHP"){super(_),this.ORDER_OVERRIDES=[[T.MEMBER,T.FUNCTION_CALL],[T.MEMBER,T.MEMBER],[T.LOGICAL_NOT,T.LOGICAL_NOT],[T.MULTIPLICATION,T.MULTIPLICATION],[T.ADDITION,T.ADDITION],[T.LOGICAL_AND,T.LOGICAL_AND],[T.LOGICAL_OR,T.LOGICAL_OR]],this.isInitialized=!1;for(const A in T)_=T[A],typeof _!="string"&&(this["ORDER_"+A]=_);this.addReservedWords("__halt_compiler,abstract,and,array,as,break,callable,case,catch,class,clone,const,continue,declare,default,die,do,echo,else,elseif,empty,enddeclare,endfor,endforeach,endif,endswitch,endwhile,eval,exit,extends,final,for,foreach,function,global,goto,if,implements,include,include_once,instanceof,insteadof,interface,isset,list,namespace,new,or,print,private,protected,public,require,require_once,return,static,switch,throw,trait,try,unset,use,var,while,xor,PHP_VERSION,PHP_MAJOR_VERSION,PHP_MINOR_VERSION,PHP_RELEASE_VERSION,PHP_VERSION_ID,PHP_EXTRA_VERSION,PHP_ZTS,PHP_DEBUG,PHP_MAXPATHLEN,PHP_OS,PHP_SAPI,PHP_EOL,PHP_INT_MAX,PHP_INT_SIZE,DEFAULT_INCLUDE_PATH,PEAR_INSTALL_DIR,PEAR_EXTENSION_DIR,PHP_EXTENSION_DIR,PHP_PREFIX,PHP_BINDIR,PHP_BINARY,PHP_MANDIR,PHP_LIBDIR,PHP_DATADIR,PHP_SYSCONFDIR,PHP_LOCALSTATEDIR,PHP_CONFIG_FILE_PATH,PHP_CONFIG_FILE_SCAN_DIR,PHP_SHLIB_SUFFIX,E_ERROR,E_WARNING,E_PARSE,E_NOTICE,E_CORE_ERROR,E_CORE_WARNING,E_COMPILE_ERROR,E_COMPILE_WARNING,E_USER_ERROR,E_USER_WARNING,E_USER_NOTICE,E_DEPRECATED,E_USER_DEPRECATED,E_ALL,E_STRICT,__COMPILER_HALT_OFFSET__,TRUE,FALSE,NULL,__CLASS__,__DIR__,__FILE__,__FUNCTION__,__LINE__,__METHOD__,__NAMESPACE__,__TRAIT__")}init(_){super.init(_),this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_,"$"),this.nameDB_.setVariableMap(_.getVariableMap()),this.nameDB_.populateVariables(_),this.nameDB_.populateProcedures(_),this.isInitialized=!0}finish(_){const A=Object.values(this.definitions_);return _=super.finish(_),this.isInitialized=!1,this.nameDB_.reset(),A.join(`

`)+`


`+_}scrubNakedValue(_){return _+`;
`}quote_(_){return _=_.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+_+"'"}multiline_quote_(_){return _.split(/\n/g).map(this.quote_).join(` . "\\n" .
`)}scrub_(_,A,m=!1){let h="";if(!_.outputConnection||!_.outputConnection.targetConnection){var c=_.getCommentText();c&&(c=s.wrap$$module$build$src$core$utils$string(c,this.COMMENT_WRAP-3),h+=this.prefixLines(c,"// ")+`
`);for(let b=0;b<_.inputList.length;b++)_.inputList[b].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(c=_.inputList[b].connection.targetBlock())&&(c=this.allNestedComments(c))&&(h+=this.prefixLines(c,"// "))}return _=_.nextConnection&&_.nextConnection.targetBlock(),m=m?"":this.blockToCode(_),h+A+m}getAdjusted(_,A,m=0,h=!1,c=T.NONE){_.workspace.options.oneBasedIndex&&m--;let b=_.workspace.options.oneBasedIndex?"1":"0",w=c;return m>0?w=T.ADDITION:m<0?w=T.SUBTRACTION:h&&(w=T.UNARY_NEGATION),_=this.valueToCode(_,A,w)||b,m===0&&!h?_:s.isNumber$$module$build$src$core$utils$string(_)?(_=String(Number(_)+m),h&&(_=String(-Number(_))),_):(m>0?_=`${_} + ${m}`:m<0&&(_=`${_} - ${-m}`),h&&(_=m?`-(${_})`:`-${_}`),Math.floor(c)>=Math.floor(w)&&(_=`(${_})`),_)}},Y={};Y.lists_create_empty=l,Y.lists_create_with=p,Y.lists_getIndex=L,Y.lists_getSublist=N,Y.lists_indexOf=M,Y.lists_isEmpty=R,Y.lists_length=$,Y.lists_repeat=E,Y.lists_reverse=K,Y.lists_setIndex=y,Y.lists_sort=P,Y.lists_split=F;var Te={};Te.controls_if=g,Te.controls_ifelse=g,Te.logic_boolean=k,Te.logic_compare=d,Te.logic_negate=x,Te.logic_null=H,Te.logic_operation=C,Te.logic_ternary=f;var ke={};ke.controls_flow_statements=X,ke.controls_for=U,ke.controls_forEach=O,ke.controls_repeat=I,ke.controls_repeat_ext=I,ke.controls_whileUntil=D;var ve={};ve.math_arithmetic=re,ve.math_atan2=Me,ve.math_change=Se,ve.math_constant=Ue,ve.math_constrain=Ie,ve.math_modulo=Ce,ve.math_number=W,ve.math_number_property=me,ve.math_on_list=xe,ve.math_random_float=Ve,ve.math_random_int=je,ve.math_round=se,ve.math_single=se,ve.math_trig=se;var Xe={};Xe.procedures_callnoreturn=ue,Xe.procedures_callreturn=te,Xe.procedures_defnoreturn=ce,Xe.procedures_defreturn=ce,Xe.procedures_ifreturn=ge;var le={};le.text=we,le.text_append=Be,le.text_changeCase=We,le.text_charAt=_e,le.text_count=Ht,le.text_getSubstring=be,le.text_indexOf=Le,le.text_isEmpty=de,le.text_join=st,le.text_length=Rt,le.text_print=at,le.text_prompt=ct,le.text_prompt_ext=ct,le.text_replace=pt,le.text_reverse=St,le.text_trim=Ke;var v={};v.variables_get=Et,v.variables_set=dt;var V={};V.variables_get_dynamic=Et,V.variables_set_dynamic=dt;var J=new ae,ne=Object.assign({},Y,Te,ke,ve,Xe,le,v,V);for(const _ in ne)J.forBlock[_]=ne[_];var Ne={};return Ne.Order=T,Ne.PhpGenerator=ae,Ne.phpGenerator=J,Ne.__namespace__=s,Ne})})(ah)),ah.exports}var lh={exports:{}},fF=lh.exports,Ev;function zm(){return Ev||(Ev=1,(function(i,n){(function(o,s){i.exports=s(Er())})(fF,function(o){var s=o.__namespace__,l=function(m,h){return["[]",T.ATOMIC]},p=function(m,h){const c=Array(m.itemCount_);for(let b=0;b<m.itemCount_;b++)c[b]=h.valueToCode(m,"ADD"+b,T.NONE)||"None";return["["+c.join(", ")+"]",T.ATOMIC]},E=function(m,h){const c=h.valueToCode(m,"ITEM",T.NONE)||"None";return m=h.valueToCode(m,"NUM",T.MULTIPLICATIVE)||"0",["["+c+"] * "+m,T.MULTIPLICATIVE]},$=function(m,h){return["len("+(h.valueToCode(m,"VALUE",T.NONE)||"[]")+")",T.FUNCTION_CALL]},R=function(m,h){return["not len("+(h.valueToCode(m,"VALUE",T.NONE)||"[]")+")",T.LOGICAL_NOT]},M=function(m,h){const c=h.valueToCode(m,"FIND",T.NONE)||"[]",b=h.valueToCode(m,"VALUE",T.NONE)||"''";let w=" -1",z="",q=" - 1";return m.workspace.options.oneBasedIndex&&(w=" 0",z=" + 1",q=""),[(m.getFieldValue("END")==="FIRST"?h.provideFunction_("first_index",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = my_list.index(elem)${z}
  except: index =${w}
  return index
`):h.provideFunction_("last_index",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(my_list, elem):
  try: index = len(my_list) - my_list[::-1].index(elem)${q}
  except: index =${w}
  return index
`))+"("+b+", "+c+")",T.FUNCTION_CALL]},L=function(m,h){const c=m.getFieldValue("MODE")||"GET",b=m.getFieldValue("WHERE")||"FROM_START";var w=h.valueToCode(m,"VALUE",b==="RANDOM"?T.NONE:T.MEMBER)||"[]";switch(b){case"FIRST":if(c==="GET")return[w+"[0]",T.MEMBER];if(c==="GET_REMOVE")return[w+".pop(0)",T.FUNCTION_CALL];if(c==="REMOVE")return w+`.pop(0)
`;break;case"LAST":if(c==="GET")return[w+"[-1]",T.MEMBER];if(c==="GET_REMOVE")return[w+".pop()",T.FUNCTION_CALL];if(c==="REMOVE")return w+`.pop()
`;break;case"FROM_START":if(m=h.getAdjustedInt(m,"AT"),c==="GET")return[w+"["+m+"]",T.MEMBER];if(c==="GET_REMOVE")return[w+".pop("+m+")",T.FUNCTION_CALL];if(c==="REMOVE")return w+".pop("+m+`)
`;break;case"FROM_END":if(m=h.getAdjustedInt(m,"AT",1,!0),c==="GET")return[w+"["+m+"]",T.MEMBER];if(c==="GET_REMOVE")return[w+".pop("+m+")",T.FUNCTION_CALL];if(c==="REMOVE")return w+".pop("+m+`)
`;break;case"RANDOM":if(h.definitions_.import_random="import random",c==="GET")return["random.choice("+w+")",T.FUNCTION_CALL];if(w=h.provideFunction_("lists_remove_random_item",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(myList):
  x = int(random.random() * len(myList))
  return myList.pop(x)
`)+"("+w+")",c==="GET_REMOVE")return[w,T.FUNCTION_CALL];if(c==="REMOVE")return w+`
`}throw Error("Unhandled combination (lists_getIndex).")},y=function(m,h){let c=h.valueToCode(m,"LIST",T.MEMBER)||"[]";const b=m.getFieldValue("MODE")||"GET";var w=m.getFieldValue("WHERE")||"FROM_START";const z=h.valueToCode(m,"TO",T.NONE)||"None";switch(w){case"FIRST":if(b==="SET")return c+"[0] = "+z+`
`;if(b==="INSERT")return c+".insert(0, "+z+`)
`;break;case"LAST":if(b==="SET")return c+"[-1] = "+z+`
`;if(b==="INSERT")return c+".append("+z+`)
`;break;case"FROM_START":if(h=h.getAdjustedInt(m,"AT"),b==="SET")return c+"["+h+"] = "+z+`
`;if(b==="INSERT")return c+".insert("+h+", "+z+`)
`;break;case"FROM_END":if(h=h.getAdjustedInt(m,"AT",1,!0),b==="SET")return c+"["+h+"] = "+z+`
`;if(b==="INSERT")return c+".insert("+h+", "+z+`)
`;break;case"RANDOM":if(h.definitions_.import_random="import random",c.match(/^\w+$/)?m="":(m=h.nameDB_.getDistinctName("tmp_list",s.NameType$$module$build$src$core$names.VARIABLE),w=m+" = "+c+`
`,c=m,m=w),h=h.nameDB_.getDistinctName("tmp_x",s.NameType$$module$build$src$core$names.VARIABLE),m+=h+" = int(random.random() * len("+c+`))
`,b==="SET")return m+(c+"["+h+"] = "+z+`
`);if(b==="INSERT")return m+(c+".insert("+h+", "+z+`)
`)}throw Error("Unhandled combination (lists_setIndex).")},N=function(m,h){const c=h.valueToCode(m,"LIST",T.MEMBER)||"[]";var b=m.getFieldValue("WHERE1");const w=m.getFieldValue("WHERE2");switch(b){case"FROM_START":b=h.getAdjustedInt(m,"AT1"),b===0&&(b="");break;case"FROM_END":b=h.getAdjustedInt(m,"AT1",1,!0);break;case"FIRST":b="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(w){case"FROM_START":m=h.getAdjustedInt(m,"AT2",1);break;case"FROM_END":m=h.getAdjustedInt(m,"AT2",0,!0),s.isNumber$$module$build$src$core$utils$string(String(m))?m===0&&(m=""):(h.definitions_.import_sys="import sys",m+=" or sys.maxsize");break;case"LAST":m="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[c+"["+b+" : "+m+"]",T.MEMBER]},P=function(m,h){const c=h.valueToCode(m,"LIST",T.NONE)||"[]",b=m.getFieldValue("TYPE");return m=m.getFieldValue("DIRECTION")==="1"?"False":"True",[h.provideFunction_("lists_sort",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(my_list, type, reverse):
  def try_float(s):
    try:
      return float(s)
    except:
      return 0
  key_funcs = {
    "NUMERIC": try_float,
    "TEXT": str,
    "IGNORE_CASE": lambda s: str(s).lower()
  }
  key_func = key_funcs[type]
  list_cpy = list(my_list)
  return sorted(list_cpy, key=key_func, reverse=reverse)
`)+"("+c+', "'+b+'", '+m+")",T.FUNCTION_CALL]},F=function(m,h){var c=m.getFieldValue("MODE");if(c==="SPLIT")c=h.valueToCode(m,"INPUT",T.MEMBER)||"''",m=h.valueToCode(m,"DELIM",T.NONE),m=c+".split("+m+")";else if(c==="JOIN")c=h.valueToCode(m,"INPUT",T.NONE)||"[]",m=(h.valueToCode(m,"DELIM",T.MEMBER)||"''")+".join("+c+")";else throw Error("Unknown mode: "+c);return[m,T.FUNCTION_CALL]},K=function(m,h){return["list(reversed("+(h.valueToCode(m,"LIST",T.NONE)||"[]")+"))",T.FUNCTION_CALL]},g=function(m,h){let c=0,b="",w,z;h.STATEMENT_PREFIX&&(b+=h.injectId(h.STATEMENT_PREFIX,m));do z=h.valueToCode(m,"IF"+c,T.NONE)||"False",w=h.statementToCode(m,"DO"+c)||h.PASS,h.STATEMENT_SUFFIX&&(w=h.prefixLines(h.injectId(h.STATEMENT_SUFFIX,m),h.INDENT)+w),b+=(c===0?"if ":"elif ")+z+`:
`+w,c++;while(m.getInput("IF"+c));return(m.getInput("ELSE")||h.STATEMENT_SUFFIX)&&(w=m.getInput("ELSE")&&h.statementToCode(m,"ELSE")||h.PASS,h.STATEMENT_SUFFIX&&(w=h.prefixLines(h.injectId(h.STATEMENT_SUFFIX,m),h.INDENT)+w),b+=`else:
`+w),b},d=function(m,h){const c={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[m.getFieldValue("OP")],b=T.RELATIONAL,w=h.valueToCode(m,"A",b)||"0";return m=h.valueToCode(m,"B",b)||"0",[w+" "+c+" "+m,b]},C=function(m,h){const c=m.getFieldValue("OP")==="AND"?"and":"or",b=c==="and"?T.LOGICAL_AND:T.LOGICAL_OR;let w=h.valueToCode(m,"A",b);return m=h.valueToCode(m,"B",b),w||m?(h=c==="and"?"True":"False",w||(w=h),m||(m=h)):m=w="False",[w+" "+c+" "+m,b]},x=function(m,h){return["not "+(h.valueToCode(m,"BOOL",T.LOGICAL_NOT)||"True"),T.LOGICAL_NOT]},k=function(m,h){return[m.getFieldValue("BOOL")==="TRUE"?"True":"False",T.ATOMIC]},H=function(m,h){return["None",T.ATOMIC]},f=function(m,h){const c=h.valueToCode(m,"IF",T.CONDITIONAL)||"False",b=h.valueToCode(m,"THEN",T.CONDITIONAL)||"None";return m=h.valueToCode(m,"ELSE",T.CONDITIONAL)||"None",[b+" if "+c+" else "+m,T.CONDITIONAL]},I=function(m,h){let c;c=m.getField("TIMES")?String(parseInt(m.getFieldValue("TIMES"),10)):h.valueToCode(m,"TIMES",T.NONE)||"0",c=s.isNumber$$module$build$src$core$utils$string(c)?parseInt(c,10):"int("+c+")";let b=h.statementToCode(m,"DO");return b=h.addLoopTrap(b,m)||h.PASS,"for "+h.nameDB_.getDistinctName("count",s.NameType$$module$build$src$core$names.VARIABLE)+" in range("+c+`):
`+b},D=function(m,h){const c=m.getFieldValue("MODE")==="UNTIL";let b=h.valueToCode(m,"BOOL",c?T.LOGICAL_NOT:T.NONE)||"False",w=h.statementToCode(m,"DO");return w=h.addLoopTrap(w,m)||h.PASS,c&&(b="not "+b),"while "+b+`:
`+w},U=function(m,h){const c=h.getVariableName(m.getFieldValue("VAR"));var b=h.valueToCode(m,"FROM",T.NONE)||"0",w=h.valueToCode(m,"TO",T.NONE)||"0",z=h.valueToCode(m,"BY",T.NONE)||"1";let q=h.statementToCode(m,"DO");q=h.addLoopTrap(q,m)||h.PASS;let ee="";m=function(){return h.provideFunction_("upRange",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start <= stop:
    yield start
    start += abs(step)
`)};const Pe=function(){return h.provideFunction_("downRange",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(start, stop, step):
  while start >= stop:
    yield start
    start -= abs(step)
`)};if(s.isNumber$$module$build$src$core$utils$string(b)&&s.isNumber$$module$build$src$core$utils$string(w)&&s.isNumber$$module$build$src$core$utils$string(z))b=Number(b),w=Number(w),z=Math.abs(Number(z)),b%1===0&&w%1===0&&z%1===0?(b<=w?(w++,m=b===0&&z===1?w:b+", "+w,z!==1&&(m+=", "+z)):(w--,m=b+", "+w+", -"+z),m="range("+m+")"):(m=b<w?m():Pe(),m+="("+b+", "+w+", "+z+")");else{const Je=function(At,it){return s.isNumber$$module$build$src$core$utils$string(At)?At=String(Number(At)):At.match(/^\w+$/)||(it=h.nameDB_.getDistinctName(c+it,s.NameType$$module$build$src$core$names.VARIABLE),ee+=it+" = "+At+`
`,At=it),At};b=Je(b,"_start"),w=Je(w,"_end"),z=Je(z,"_inc"),typeof b=="number"&&typeof w=="number"?(m=b<w?m():Pe(),m+="("+b+", "+w+", "+z+")"):m="("+b+" <= "+w+") and "+m()+"("+b+", "+w+", "+z+") or "+Pe()+"("+b+", "+w+", "+z+")"}return ee+="for "+c+" in "+m+`:
`+q},O=function(m,h){const c=h.getVariableName(m.getFieldValue("VAR")),b=h.valueToCode(m,"LIST",T.RELATIONAL)||"[]";let w=h.statementToCode(m,"DO");return w=h.addLoopTrap(w,m)||h.PASS,"for "+c+" in "+b+`:
`+w},X=function(m,h){let c="";if(h.STATEMENT_PREFIX&&(c+=h.injectId(h.STATEMENT_PREFIX,m)),h.STATEMENT_SUFFIX&&(c+=h.injectId(h.STATEMENT_SUFFIX,m)),h.STATEMENT_PREFIX){const b=m.getSurroundLoop();b&&!b.suppressPrefixSuffix&&(c+=h.injectId(h.STATEMENT_PREFIX,b))}switch(m.getFieldValue("FLOW")){case"BREAK":return c+`break
`;case"CONTINUE":return c+`continue
`}throw Error("Unknown flow statement.")},W=function(m,h){return m=Number(m.getFieldValue("NUM")),m===1/0?['float("inf")',T.FUNCTION_CALL]:m===-1/0?['-float("inf")',T.UNARY_SIGN]:[String(m),m<0?T.UNARY_SIGN:T.ATOMIC]},re=function(m,h){var c={ADD:[" + ",T.ADDITIVE],MINUS:[" - ",T.ADDITIVE],MULTIPLY:[" * ",T.MULTIPLICATIVE],DIVIDE:[" / ",T.MULTIPLICATIVE],POWER:[" ** ",T.EXPONENTIATION]}[m.getFieldValue("OP")];const b=c[0];c=c[1];const w=h.valueToCode(m,"A",c)||"0";return m=h.valueToCode(m,"B",c)||"0",[w+b+m,c]},se=function(m,h){const c=m.getFieldValue("OP");let b;if(c==="NEG")return b=h.valueToCode(m,"NUM",T.UNARY_SIGN)||"0",["-"+b,T.UNARY_SIGN];switch(h.definitions_.import_math="import math",m=c==="SIN"||c==="COS"||c==="TAN"?h.valueToCode(m,"NUM",T.MULTIPLICATIVE)||"0":h.valueToCode(m,"NUM",T.NONE)||"0",c){case"ABS":b="math.fabs("+m+")";break;case"ROOT":b="math.sqrt("+m+")";break;case"LN":b="math.log("+m+")";break;case"LOG10":b="math.log10("+m+")";break;case"EXP":b="math.exp("+m+")";break;case"POW10":b="math.pow(10,"+m+")";break;case"ROUND":b="round("+m+")";break;case"ROUNDUP":b="math.ceil("+m+")";break;case"ROUNDDOWN":b="math.floor("+m+")";break;case"SIN":b="math.sin("+m+" / 180.0 * math.pi)";break;case"COS":b="math.cos("+m+" / 180.0 * math.pi)";break;case"TAN":b="math.tan("+m+" / 180.0 * math.pi)"}if(b)return[b,T.FUNCTION_CALL];switch(c){case"ASIN":b="math.asin("+m+") / math.pi * 180";break;case"ACOS":b="math.acos("+m+") / math.pi * 180";break;case"ATAN":b="math.atan("+m+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+c)}return[b,T.MULTIPLICATIVE]},Ue=function(m,h){const c={PI:["math.pi",T.MEMBER],E:["math.e",T.MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",T.MULTIPLICATIVE],SQRT2:["math.sqrt(2)",T.MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",T.MEMBER],INFINITY:["float('inf')",T.ATOMIC]};return m=m.getFieldValue("CONSTANT"),m!=="INFINITY"&&(h.definitions_.import_math="import math"),c[m]},me=function(m,h){var c={EVEN:[" % 2 == 0",T.MULTIPLICATIVE,T.RELATIONAL],ODD:[" % 2 == 1",T.MULTIPLICATIVE,T.RELATIONAL],WHOLE:[" % 1 == 0",T.MULTIPLICATIVE,T.RELATIONAL],POSITIVE:[" > 0",T.RELATIONAL,T.RELATIONAL],NEGATIVE:[" < 0",T.RELATIONAL,T.RELATIONAL],DIVISIBLE_BY:[null,T.MULTIPLICATIVE,T.RELATIONAL],PRIME:[null,T.NONE,T.FUNCTION_CALL]};const b=m.getFieldValue("PROPERTY"),[w,z,q]=c[b];if(c=h.valueToCode(m,"NUMBER_TO_CHECK",z)||"0",b==="PRIME")h.definitions_.import_math="import math",h.definitions_.from_numbers_import_Number="from numbers import Number",m=h.provideFunction_("math_isPrime",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(n):
  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  # If n is not a number but a string, try parsing it.
  if not isinstance(n, Number):
    try:
      n = float(n)
    except:
      return False
  if n == 2 or n == 3:
    return True
  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.
  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:
    return False
  # Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x in range(6, int(math.sqrt(n)) + 2, 6):
    if n % (x - 1) == 0 or n % (x + 1) == 0:
      return False
  return True
`)+"("+c+")";else if(b==="DIVISIBLE_BY"){if(m=h.valueToCode(m,"DIVISOR",T.MULTIPLICATIVE)||"0",m==="0")return["False",T.ATOMIC];m=c+" % "+m+" == 0"}else m=c+w;return[m,q]},Se=function(m,h){h.definitions_.from_numbers_import_Number="from numbers import Number";const c=h.valueToCode(m,"DELTA",T.ADDITIVE)||"0";return m=h.getVariableName(m.getFieldValue("VAR")),m+" = ("+m+" if isinstance("+m+", Number) else 0) + "+c+`
`},xe=function(m,h){const c=m.getFieldValue("OP");switch(m=h.valueToCode(m,"LIST",T.NONE)||"[]",c){case"SUM":h="sum("+m+")";break;case"MIN":h="min("+m+")";break;case"MAX":h="max("+m+")";break;case"AVERAGE":h.definitions_.from_numbers_import_Number="from numbers import Number",h=h.provideFunction_("math_mean",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = [e for e in myList if isinstance(e, Number)]
  if not localList: return
  return float(sum(localList)) / len(localList)
`)+"("+m+")";break;case"MEDIAN":h.definitions_.from_numbers_import_Number="from numbers import Number",h=h.provideFunction_("math_median",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(myList):
  localList = sorted([e for e in myList if isinstance(e, Number)])
  if not localList: return
  if len(localList) % 2 == 0:
    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0
  else:
    return localList[(len(localList) - 1) // 2]
`)+"("+m+")";break;case"MODE":h=h.provideFunction_("math_modes",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(some_list):
  modes = []
  # Using a lists of [item, count] to keep count rather than dict
  # to avoid "unhashable" errors when the counted item is itself a list or dict.
  counts = []
  maxCount = 1
  for item in some_list:
    found = False
    for count in counts:
      if count[0] == item:
        count[1] += 1
        maxCount = max(maxCount, count[1])
        found = True
    if not found:
      counts.append([item, 1])
  for counted_item, item_count in counts:
    if item_count == maxCount:
      modes.append(counted_item)
  return modes
`)+"("+m+")";break;case"STD_DEV":h.definitions_.import_math="import math",h=h.provideFunction_("math_standard_deviation",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(numbers):
  n = len(numbers)
  if n == 0: return
  mean = float(sum(numbers)) / n
  variance = sum((x - mean) ** 2 for x in numbers) / n
  return math.sqrt(variance)
`)+"("+m+")";break;case"RANDOM":h.definitions_.import_random="import random",h="random.choice("+m+")";break;default:throw Error("Unknown operator: "+c)}return[h,T.FUNCTION_CALL]},Ce=function(m,h){const c=h.valueToCode(m,"DIVIDEND",T.MULTIPLICATIVE)||"0";return m=h.valueToCode(m,"DIVISOR",T.MULTIPLICATIVE)||"0",[c+" % "+m,T.MULTIPLICATIVE]},Ie=function(m,h){const c=h.valueToCode(m,"VALUE",T.NONE)||"0",b=h.valueToCode(m,"LOW",T.NONE)||"0";return m=h.valueToCode(m,"HIGH",T.NONE)||"float('inf')",["min(max("+c+", "+b+"), "+m+")",T.FUNCTION_CALL]},je=function(m,h){h.definitions_.import_random="import random";const c=h.valueToCode(m,"FROM",T.NONE)||"0";return m=h.valueToCode(m,"TO",T.NONE)||"0",["random.randint("+c+", "+m+")",T.FUNCTION_CALL]},Ve=function(m,h){return h.definitions_.import_random="import random",["random.random()",T.FUNCTION_CALL]},Me=function(m,h){h.definitions_.import_math="import math";const c=h.valueToCode(m,"X",T.NONE)||"0";return["math.atan2("+(h.valueToCode(m,"Y",T.NONE)||"0")+", "+c+") / math.pi * 180",T.MULTIPLICATIVE]},ce=function(m,h){var c=[],b=m.workspace,w=s.allUsedVarModels$$module$build$src$core$variables(b)||[];for(var z of w)w=z.getName(),m.getVars().includes(w)||c.push(h.getVariableName(w));for(b=s.allDeveloperVariables$$module$build$src$core$variables(b),z=0;z<b.length;z++)c.push(h.nameDB_.getName(b[z],s.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));b=c.length?h.INDENT+"global "+c.join(", ")+`
`:"",c=h.getProcedureName(m.getFieldValue("NAME")),z="",h.STATEMENT_PREFIX&&(z+=h.injectId(h.STATEMENT_PREFIX,m)),h.STATEMENT_SUFFIX&&(z+=h.injectId(h.STATEMENT_SUFFIX,m)),z&&(z=h.prefixLines(z,h.INDENT)),w="",h.INFINITE_LOOP_TRAP&&(w=h.prefixLines(h.injectId(h.INFINITE_LOOP_TRAP,m),h.INDENT));let q="";m.getInput("STACK")&&(q=h.statementToCode(m,"STACK"));let ee="";m.getInput("RETURN")&&(ee=h.valueToCode(m,"RETURN",T.NONE)||"");let Pe="";q&&ee&&(Pe=z),ee?ee=h.INDENT+"return "+ee+`
`:q||(q=h.PASS);const Je=[],At=m.getVars();for(let it=0;it<At.length;it++)Je[it]=h.getVariableName(At[it]);return b="def "+c+"("+Je.join(", ")+`):
`+b+z+w+q+Pe+ee,b=h.scrub_(m,b),h.definitions_["%"+c]=b,null},te=function(m,h){const c=h.getProcedureName(m.getFieldValue("NAME")),b=[],w=m.getVars();for(let z=0;z<w.length;z++)b[z]=h.valueToCode(m,"ARG"+z,T.NONE)||"None";return[c+"("+b.join(", ")+")",T.FUNCTION_CALL]},ue=function(m,h){return h.forBlock.procedures_callreturn(m,h)[0]+`
`},ge=function(m,h){let c="if "+(h.valueToCode(m,"CONDITION",T.NONE)||"False")+`:
`;return h.STATEMENT_SUFFIX&&(c+=h.prefixLines(h.injectId(h.STATEMENT_SUFFIX,m),h.INDENT)),m.hasReturnValue_?(m=h.valueToCode(m,"VALUE",T.NONE)||"None",c+=h.INDENT+"return "+m+`
`):c+=h.INDENT+`return
`,c},we=function(m,h){return[h.quote_(m.getFieldValue("TEXT")),T.ATOMIC]},st=function(m,h){switch(m.itemCount_){case 0:return["''",T.ATOMIC];case 1:return m=h.valueToCode(m,"ADD0",T.NONE)||"''",v(m);case 2:var c=h.valueToCode(m,"ADD0",T.NONE)||"''";return m=h.valueToCode(m,"ADD1",T.NONE)||"''",[v(c)[0]+" + "+v(m)[0],T.ADDITIVE];default:c=[];for(let b=0;b<m.itemCount_;b++)c[b]=h.valueToCode(m,"ADD"+b,T.NONE)||"''";return m=h.nameDB_.getDistinctName("x",s.NameType$$module$build$src$core$names.VARIABLE),["''.join([str("+m+") for "+m+" in ["+c.join(", ")+"]])",T.FUNCTION_CALL]}},Be=function(m,h){const c=h.getVariableName(m.getFieldValue("VAR"));return m=h.valueToCode(m,"TEXT",T.NONE)||"''",c+" = str("+c+") + "+v(m)[0]+`
`},Rt=function(m,h){return["len("+(h.valueToCode(m,"VALUE",T.NONE)||"''")+")",T.FUNCTION_CALL]},de=function(m,h){return["not len("+(h.valueToCode(m,"VALUE",T.NONE)||"''")+")",T.LOGICAL_NOT]},Le=function(m,h){const c=m.getFieldValue("END")==="FIRST"?"find":"rfind",b=h.valueToCode(m,"FIND",T.NONE)||"''";return h=(h.valueToCode(m,"VALUE",T.MEMBER)||"''")+"."+c+"("+b+")",m.workspace.options.oneBasedIndex?[h+" + 1",T.ADDITIVE]:[h,T.FUNCTION_CALL]},_e=function(m,h){const c=m.getFieldValue("WHERE")||"FROM_START",b=h.valueToCode(m,"VALUE",c==="RANDOM"?T.NONE:T.MEMBER)||"''";switch(c){case"FIRST":return[b+"[0]",T.MEMBER];case"LAST":return[b+"[-1]",T.MEMBER];case"FROM_START":return m=h.getAdjustedInt(m,"AT"),[b+"["+m+"]",T.MEMBER];case"FROM_END":return m=h.getAdjustedInt(m,"AT",1,!0),[b+"["+m+"]",T.MEMBER];case"RANDOM":return h.definitions_.import_random="import random",[h.provideFunction_("text_random_letter",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(text):
  x = int(random.random() * len(text))
  return text[x]
`)+"("+b+")",T.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},be=function(m,h){var c=m.getFieldValue("WHERE1");const b=m.getFieldValue("WHERE2"),w=h.valueToCode(m,"STRING",T.MEMBER)||"''";switch(c){case"FROM_START":c=h.getAdjustedInt(m,"AT1"),c===0&&(c="");break;case"FROM_END":c=h.getAdjustedInt(m,"AT1",1,!0);break;case"FIRST":c="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(b){case"FROM_START":m=h.getAdjustedInt(m,"AT2",1);break;case"FROM_END":m=h.getAdjustedInt(m,"AT2",0,!0),s.isNumber$$module$build$src$core$utils$string(String(m))?m===0&&(m=""):(h.definitions_.import_sys="import sys",m+=" or sys.maxsize");break;case"LAST":m="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[w+"["+c+" : "+m+"]",T.MEMBER]},We=function(m,h){const c={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[m.getFieldValue("CASE")];return[(h.valueToCode(m,"TEXT",T.MEMBER)||"''")+c,T.FUNCTION_CALL]},Ke=function(m,h){const c={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[m.getFieldValue("MODE")];return[(h.valueToCode(m,"TEXT",T.MEMBER)||"''")+c,T.FUNCTION_CALL]},at=function(m,h){return"print("+(h.valueToCode(m,"TEXT",T.NONE)||"''")+`)
`},ct=function(m,h){var c=h.provideFunction_("text_prompt",`
def ${h.FUNCTION_NAME_PLACEHOLDER_}(msg):
  try:
    return raw_input(msg)
  except NameError:
    return input(msg)
`);return h=m.getField("TEXT")?h.quote_(m.getFieldValue("TEXT")):h.valueToCode(m,"TEXT",T.NONE)||"''",c=c+"("+h+")",m.getFieldValue("TYPE")==="NUMBER"&&(c="float("+c+")"),[c,T.FUNCTION_CALL]},Ht=function(m,h){const c=h.valueToCode(m,"TEXT",T.MEMBER)||"''";return m=h.valueToCode(m,"SUB",T.NONE)||"''",[c+".count("+m+")",T.FUNCTION_CALL]},pt=function(m,h){const c=h.valueToCode(m,"TEXT",T.MEMBER)||"''",b=h.valueToCode(m,"FROM",T.NONE)||"''";return m=h.valueToCode(m,"TO",T.NONE)||"''",[c+".replace("+b+", "+m+")",T.MEMBER]},St=function(m,h){return[(h.valueToCode(m,"TEXT",T.MEMBER)||"''")+"[::-1]",T.MEMBER]},Et=function(m,h){return[h.getVariableName(m.getFieldValue("VAR")),T.ATOMIC]},dt=function(m,h){const c=h.valueToCode(m,"VALUE",T.NONE)||"0";return h.getVariableName(m.getFieldValue("VAR"))+" = "+c+`
`},T;(function(m){m[m.ATOMIC=0]="ATOMIC",m[m.COLLECTION=1]="COLLECTION",m[m.STRING_CONVERSION=1]="STRING_CONVERSION",m[m.MEMBER=2.1]="MEMBER",m[m.FUNCTION_CALL=2.2]="FUNCTION_CALL",m[m.EXPONENTIATION=3]="EXPONENTIATION",m[m.UNARY_SIGN=4]="UNARY_SIGN",m[m.BITWISE_NOT=4]="BITWISE_NOT",m[m.MULTIPLICATIVE=5]="MULTIPLICATIVE",m[m.ADDITIVE=6]="ADDITIVE",m[m.BITWISE_SHIFT=7]="BITWISE_SHIFT",m[m.BITWISE_AND=8]="BITWISE_AND",m[m.BITWISE_XOR=9]="BITWISE_XOR",m[m.BITWISE_OR=10]="BITWISE_OR",m[m.RELATIONAL=11]="RELATIONAL",m[m.LOGICAL_NOT=12]="LOGICAL_NOT",m[m.LOGICAL_AND=13]="LOGICAL_AND",m[m.LOGICAL_OR=14]="LOGICAL_OR",m[m.CONDITIONAL=15]="CONDITIONAL",m[m.LAMBDA=16]="LAMBDA",m[m.NONE=99]="NONE"})(T||(T={}));var ae=class extends s.CodeGenerator$$module$build$src$core$generator{constructor(m="Python"){super(m),this.ORDER_OVERRIDES=[[T.FUNCTION_CALL,T.MEMBER],[T.FUNCTION_CALL,T.FUNCTION_CALL],[T.MEMBER,T.MEMBER],[T.MEMBER,T.FUNCTION_CALL],[T.LOGICAL_NOT,T.LOGICAL_NOT],[T.LOGICAL_AND,T.LOGICAL_AND],[T.LOGICAL_OR,T.LOGICAL_OR]],this.PASS="",this.isInitialized=!1;for(const h in T)m=T[h],typeof m!="string"&&(this["ORDER_"+h]=m);this.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip")}init(m){super.init(m),this.PASS=this.INDENT+`pass
`,this.nameDB_?this.nameDB_.reset():this.nameDB_=new s.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(m.getVariableMap()),this.nameDB_.populateVariables(m),this.nameDB_.populateProcedures(m);const h=[];var c=s.allDeveloperVariables$$module$build$src$core$variables(m);for(let b=0;b<c.length;b++)h.push(this.nameDB_.getName(c[b],s.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE)+" = None");for(m=s.allUsedVarModels$$module$build$src$core$variables(m),c=0;c<m.length;c++)h.push(this.getVariableName(m[c].getId())+" = None");this.definitions_.variables=h.join(`
`),this.isInitialized=!0}finish(m){const h=[],c=[];for(let b in this.definitions_){const w=this.definitions_[b];w.match(/^(from\s+\S+\s+)?import\s+\S+/)?h.push(w):c.push(w)}return m=super.finish(m),this.isInitialized=!1,this.nameDB_.reset(),(h.join(`
`)+`

`+c.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+m}scrubNakedValue(m){return m+`
`}quote_(m){m=m.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`);let h="'";return m.includes("'")&&(m.includes('"')?m=m.replace(/'/g,"\\'"):h='"'),h+m+h}multiline_quote_(m){return m.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)}scrub_(m,h,c=!1){let b="";if(!m.outputConnection||!m.outputConnection.targetConnection){var w=m.getCommentText();w&&(w=s.wrap$$module$build$src$core$utils$string(w,this.COMMENT_WRAP-3),b+=this.prefixLines(w+`
`,"# "));for(let z=0;z<m.inputList.length;z++)m.inputList[z].type===s.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(w=m.inputList[z].connection.targetBlock())&&(w=this.allNestedComments(w))&&(b+=this.prefixLines(w,"# "))}return m=m.nextConnection&&m.nextConnection.targetBlock(),c=c?"":this.blockToCode(m),b+h+c}getAdjustedInt(m,h,c=0,b=!1){m.workspace.options.oneBasedIndex&&c--;const w=m.workspace.options.oneBasedIndex?"1":"0";return m=this.valueToCode(m,h,c?T.ADDITIVE:T.NONE)||w,s.isNumber$$module$build$src$core$utils$string(m)?(m=parseInt(m,10)+c,b&&(m=-m)):(m=c>0?"int("+m+" + "+c+")":c<0?"int("+m+" - "+-c+")":"int("+m+")",b&&(m="-"+m)),m}},Y={};Y.lists_create_empty=l,Y.lists_create_with=p,Y.lists_getIndex=L,Y.lists_getSublist=N,Y.lists_indexOf=M,Y.lists_isEmpty=R,Y.lists_length=$,Y.lists_repeat=E,Y.lists_reverse=K,Y.lists_setIndex=y,Y.lists_sort=P,Y.lists_split=F;var Te={};Te.controls_if=g,Te.controls_ifelse=g,Te.logic_boolean=k,Te.logic_compare=d,Te.logic_negate=x,Te.logic_null=H,Te.logic_operation=C,Te.logic_ternary=f;var ke={};ke.controls_flow_statements=X,ke.controls_for=U,ke.controls_forEach=O,ke.controls_repeat=I,ke.controls_repeat_ext=I,ke.controls_whileUntil=D;var ve={};ve.math_arithmetic=re,ve.math_atan2=Me,ve.math_change=Se,ve.math_constant=Ue,ve.math_constrain=Ie,ve.math_modulo=Ce,ve.math_number=W,ve.math_number_property=me,ve.math_on_list=xe,ve.math_random_float=Ve,ve.math_random_int=je,ve.math_round=se,ve.math_single=se,ve.math_trig=se;var Xe={};Xe.procedures_callnoreturn=ue,Xe.procedures_callreturn=te,Xe.procedures_defnoreturn=ce,Xe.procedures_defreturn=ce,Xe.procedures_ifreturn=ge;var le=/^\s*'([^']|\\')*'\s*$/,v=function(m){return le.test(m)?[m,T.ATOMIC]:["str("+m+")",T.FUNCTION_CALL]},V={};V.text=we,V.text_append=Be,V.text_changeCase=We,V.text_charAt=_e,V.text_count=Ht,V.text_getSubstring=be,V.text_indexOf=Le,V.text_isEmpty=de,V.text_join=st,V.text_length=Rt,V.text_print=at,V.text_prompt=ct,V.text_prompt_ext=ct,V.text_replace=pt,V.text_reverse=St,V.text_trim=Ke;var J={};J.variables_get=Et,J.variables_set=dt;var ne={};ne.variables_get_dynamic=Et,ne.variables_set_dynamic=dt;var Ne=new ae;Ne.addReservedWords("math,random,Number");var _=Object.assign({},Y,Te,ke,ve,Xe,V,J,ne);for(const m in _)Ne.forBlock[m]=_[m];var A={};return A.Order=T,A.PythonGenerator=ae,A.pythonGenerator=Ne,A.__namespace__=s,A})})(lh)),lh.exports}var gF=rh.exports,Tv;function mF(){return Tv||(Tv=1,(function(i,n){(function(o,s){i.exports=s(Er(),Wh(),Wm(),Xm(),Km(),zm())})(gF,(o,s,l,p,E,$)=>(()=>{var R={127:me=>{me.exports=s},157:me=>{me.exports=p},370:me=>{me.exports=o},379:me=>{me.exports=l},537:me=>{me.exports=E},557:me=>{me.exports=$}},M={};function L(me){var Se=M[me];if(Se!==void 0)return Se.exports;var xe=M[me]={exports:{}};return R[me](xe,xe.exports,L),xe.exports}L.d=(me,Se)=>{for(var xe in Se)L.o(Se,xe)&&!L.o(me,xe)&&Object.defineProperty(me,xe,{enumerable:!0,get:Se[xe]})},L.o=(me,Se)=>Object.prototype.hasOwnProperty.call(me,Se),L.r=me=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(me,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(me,"__esModule",{value:!0})};var y={};L.r(y),L.d(y,{FieldMultilineInput:()=>x,installAllBlocks:()=>Ue,registerFieldMultilineInput:()=>k,textMultiline:()=>N});var N={};L.r(N),L.d(N,{BLOCK_NAME:()=>H,blockDefinition:()=>re,installBlock:()=>se,toDart:()=>D,toJavascript:()=>I,toLua:()=>U,toPhp:()=>O,toPython:()=>X});var P=L(370),F=L(127),K=L(379),g=L(157),d=L(537),C=L(557);class x extends P.FieldTextInput{constructor(Se,xe,Ce){super(P.Field.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,Se!==P.Field.SKIP_SETUP&&(Ce&&this.configure_(Ce),this.setValue(Se),xe&&this.setValidator(xe))}configure_(Se){super.configure_(Se),Se.maxLines&&this.setMaxLines(Se.maxLines)}toXml(Se){return Se.textContent=this.getValue().replace(/\n/g,"&#10;"),Se}fromXml(Se){this.setValue(Se.textContent.replace(/&#10;/g,`
`))}saveState(){const Se=this.saveLegacyState(x);return Se!==null?Se:this.getValue()}loadState(Se){this.loadLegacyState(P.Field,Se)||this.setValue(Se)}initView(){this.createBorderRect_(),this.textGroup=P.utils.dom.createSvgElement(P.utils.Svg.G,{class:"blocklyEditableField"},this.fieldGroup_)}getDisplayText_(){const Se=this.getSourceBlock();if(!Se)throw new Error("The field has not yet been attached to its input. Call appendField to attach it.");let xe=this.getText();if(!xe)return P.Field.NBSP;const Ce=xe.split(`
`);xe="";const Ie=this.isOverflowedY_?this.maxLines_:Ce.length;for(let je=0;je<Ie;je++){let Ve=Ce[je];Ve.length>this.maxDisplayLength?Ve=Ve.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&je===Ie-1&&(Ve=Ve.substring(0,Ve.length-3)+"..."),Ve=Ve.replace(/\s/g,P.Field.NBSP),xe+=Ve,je!==Ie-1&&(xe+=`
`)}return Se.RTL&&(xe+="‏"),xe}doValueUpdate_(Se){super.doValueUpdate_(Se),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){const Se=this.getSourceBlock();if(!Se)throw new Error("The field has not yet been attached to its input. Call appendField to attach it.");let xe;const Ce=this.textGroup;for(;xe=Ce.firstChild;)Ce.removeChild(xe);const Ie=this.getConstants();if(!Ie)throw Error("Constants not found");const je=this.getDisplayText_().split(`
`);let Ve=0;for(let Me=0;Me<je.length;Me++){const ce=Ie.FIELD_TEXT_HEIGHT+Ie.FIELD_BORDER_RECT_Y_PADDING;P.utils.dom.createSvgElement(P.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:Ie.FIELD_BORDER_RECT_X_PADDING,y:Ve+Ie.FIELD_BORDER_RECT_Y_PADDING,dy:Ie.FIELD_TEXT_BASELINE},Ce).appendChild(document.createTextNode(je[Me])),Ve+=ce}if(this.isBeingEdited_){const Me=this.htmlInput_;this.isOverflowedY_?P.utils.dom.addClass(Me,"blocklyHtmlTextAreaInputOverflowedY"):P.utils.dom.removeClass(Me,"blocklyHtmlTextAreaInputOverflowedY")}if(this.updateSize_(),this.isBeingEdited_){Se.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_();const Me=this.htmlInput_;this.isTextValid_?(P.utils.dom.removeClass(Me,"blocklyInvalidInput"),P.utils.aria.setState(Me,P.utils.aria.State.INVALID,!1)):(P.utils.dom.addClass(Me,"blocklyInvalidInput"),P.utils.aria.setState(Me,P.utils.aria.State.INVALID,!0))}}updateSize_(){const Se=this.getConstants();if(!Se)throw Error("Constants not found");const xe=this.textGroup.childNodes;Se.FIELD_TEXT_FONTSIZE,Se.FIELD_TEXT_FONTWEIGHT,Se.FIELD_TEXT_FONTFAMILY;let Ce=0,Ie=0;for(let je=0;je<xe.length;je++){const Ve=xe[je],Me=P.utils.dom.getTextWidth(Ve);Me>Ce&&(Ce=Me),Ie+=Se.FIELD_TEXT_HEIGHT+(je>0?Se.FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){const je=String(this.value_).split(`
`),Ve=P.utils.dom.createSvgElement(P.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});for(let ce=0;ce<je.length;ce++){je[ce].length>this.maxDisplayLength&&(je[ce]=je[ce].substring(0,this.maxDisplayLength)),Ve.textContent=je[ce];const te=P.utils.dom.getTextWidth(Ve);te>Ce&&(Ce=te)}const Me=this.htmlInput_;Ce+=Me.offsetWidth-Me.clientWidth}this.borderRect_&&(Ie+=2*Se.FIELD_BORDER_RECT_Y_PADDING,Ce+=2*Se.FIELD_BORDER_RECT_X_PADDING+1,this.borderRect_.setAttribute("width",`${Ce}`),this.borderRect_.setAttribute("height",`${Ie}`)),this.size_.width=Ce,this.size_.height=Ie,this.positionBorderRect_()}showEditor_(Se,xe){super.showEditor_(Se,xe),this.forceRerender()}widgetCreate_(){const Se=P.WidgetDiv.getDiv(),xe=this.workspace_.getScale(),Ce=this.getConstants();if(!Ce)throw Error("Constants not found");const Ie=document.createElement("textarea");Ie.className="blocklyHtmlInput blocklyHtmlTextAreaInput",Ie.setAttribute("spellcheck",String(this.spellcheck_));const je=Ce.FIELD_TEXT_FONTSIZE*xe+"pt";Se.style.fontSize=je,Ie.style.fontSize=je;const Ve=P.FieldTextInput.BORDERRADIUS*xe+"px";Ie.style.borderRadius=Ve;const Me=Ce.FIELD_BORDER_RECT_X_PADDING*xe,ce=Ce.FIELD_BORDER_RECT_Y_PADDING*xe/2;Ie.style.padding=ce+"px "+Me+"px "+ce+"px "+Me+"px";const te=Ce.FIELD_TEXT_HEIGHT+Ce.FIELD_BORDER_RECT_Y_PADDING;return Ie.style.lineHeight=te*xe+"px",Se.appendChild(Ie),Ie.value=Ie.defaultValue=this.getEditorText_(this.value_),Ie.setAttribute("data-untyped-default-value",String(this.value_)),Ie.setAttribute("data-old-value",""),P.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(Ie),Ie}setMaxLines(Se){typeof Se=="number"&&Se>0&&Se!==this.maxLines_&&(this.maxLines_=Se,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(Se){Se.key!=="Enter"&&super.onHtmlInputKeyDown_(Se)}static fromJson(Se){return new this(P.utils.parsing.replaceMessageReferences(Se.text),void 0,Se)}}function k(){P.fieldRegistry.register("field_multilinetext",x)}P.Css.register(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);const H="text_multiline",f={type:H,message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]};function I(me,Se){const xe=Se.multiline_quote_(me.getFieldValue("TEXT")),Ce=xe.indexOf("+")!==-1?F.Order.ADDITION:F.Order.ATOMIC;return[xe,Ce]}function D(me,Se){const xe=Se.multiline_quote_(me.getFieldValue("TEXT")),Ce=xe.indexOf("+")!==-1?K.Order.ADDITIVE:K.Order.ATOMIC;return[xe,Ce]}function U(me,Se){const xe=Se.multiline_quote_(me.getFieldValue("TEXT")),Ce=xe.indexOf("..")!==-1?g.Order.CONCATENATION:g.Order.ATOMIC;return[xe,Ce]}function O(me,Se){const xe=Se.multiline_quote_(me.getFieldValue("TEXT")),Ce=xe.indexOf(".")!==-1?d.Order.STRING_CONCAT:d.Order.ATOMIC;return[xe,Ce]}function X(me,Se){const xe=Se.multiline_quote_(me.getFieldValue("TEXT")),Ce=xe.indexOf("+")!==-1?C.Order.ADDITIVE:C.Order.ATOMIC;return[xe,Ce]}const W=P.common.createBlockDefinitionsFromJsonArray([f]),re=W[H];function se(me={}){k(),P.common.defineBlocks(W),me.javascript&&(me.javascript.forBlock[H]=I),me.dart&&(me.dart.forBlock[H]=D),me.lua&&(me.lua.forBlock[H]=U),me.php&&(me.php.forBlock[H]=O),me.python&&(me.python.forBlock[H]=X)}const Ue=se;return y})())})(rh)),rh.exports}var Ym=mF();Ym.textMultiline.installBlock({javascript:$t});mt.newline={init:function(){this.appendDummyInput().appendField("new line"),this.setOutput(!0,"String"),this.setStyle("text_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.newline=function(){return['"\\n"',_t.ATOMIC]};var uh={exports:{}};var $F=uh.exports,bv;function EF(){return bv||(bv=1,(function(i,n){(function(o,s){i.exports=s(Er(),Wh(),Wm(),Xm(),Km(),zm())})($F,(o,s,l,p,E,$)=>(()=>{var R={127:N=>{N.exports=s},157:N=>{N.exports=p},370:N=>{N.exports=o},379:N=>{N.exports=l},537:N=>{N.exports=E},557:N=>{N.exports=$},594:function(N,P,F){var K;K=(g,d,C,x,k,H)=>(()=>{var f={127:O=>{O.exports=d},157:O=>{O.exports=x},370:O=>{O.exports=g},379:O=>{O.exports=C},462:function(O,X,W){var re;re=se=>(()=>{var Ue={370:Me=>{Me.exports=se}},me={};function Se(Me){var ce=me[Me];if(ce!==void 0)return ce.exports;var te=me[Me]={exports:{}};return Ue[Me](te,te.exports,Se),te.exports}Se.d=(Me,ce)=>{for(var te in ce)Se.o(ce,te)&&!Se.o(Me,te)&&Object.defineProperty(Me,te,{enumerable:!0,get:ce[te]})},Se.o=(Me,ce)=>Object.prototype.hasOwnProperty.call(Me,ce),Se.r=Me=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Me,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Me,"__esModule",{value:!0})};var xe={};Se.r(xe),Se.d(xe,{FieldGridDropdown:()=>Ve});var Ce=Se(370);class Ie{constructor(ce,te,ue,ge){this.value=ue,this.selected=!1,this.selectionCallback=ge,this.element=document.createElement("button"),this.element.id=Ce.utils.idGenerator.getNextUniqueId(),this.element.className="blocklyFieldGridItem",this.clickHandler=Ce.browserEvents.conditionalBind(this.element,"click",this,this.onClick,!0),ce.appendChild(this.element);const we=typeof te=="string"?document.createTextNode(te):te;this.element.appendChild(we),Ce.utils.aria.setRole(this.element,Ce.utils.aria.Role.GRIDCELL)}dispose(){this.selectionCallback=null,this.element.remove(),this.clickHandler&&(Ce.browserEvents.unbind(this.clickHandler),this.clickHandler=null)}getId(){return this.element.id}getValue(){return this.value}isSelected(){return this.selected}setSelected(ce){this.selected=ce,Ce.utils.aria.setState(this.element,Ce.utils.aria.State.SELECTED,this.selected),this.element.classList.toggle("blocklyFieldGridItemSelected",this.selected),this.isSelected()&&this.focus()}onClick(){var ce;this.setSelected(!0),(ce=this.selectionCallback)===null||ce===void 0||ce.call(this,this)}focus(){this.element.focus({preventScroll:!0});const ce=this.element.offsetParent;if(!ce)return;const te=this.element.offsetTop,ue=ce.scrollTop,ge=this.getInterItemSpacing();te<ue?ce.scrollTo(0,te-ge):te+this.element.offsetHeight>ue+ce.clientHeight&&ce.scrollBy(0,te+this.element.clientHeight-(ue+ce.clientHeight)+ge)}getInterItemSpacing(){const ce=this.element.closest(".blocklyFieldGrid");if(!ce)return 0;const te=[...ce.querySelectorAll(".blocklyFieldGridItem")];if(!te.length)return 0;const ue=te[0].offsetTop,ge=te[0].offsetHeight;for(const we of te)if(we.offsetTop!==ue)return we.offsetTop-ge-ue;return 0}}class je{constructor(ce,te,ue,ge,we){if(this.columns=ue,this.rtl=ge,this.itemIndices=new Map,this.items=new Array,this.keyDownHandler=null,this.pointerMoveHandler=null,this.selectionCallback=we,this.root=document.createElement("div"),this.root.className="blocklyFieldGrid",this.root.tabIndex=0,Ce.utils.aria.setRole(this.root,Ce.utils.aria.Role.GRID),ce.appendChild(this.root),this.populateItems(te),this.keyDownHandler=Ce.browserEvents.conditionalBind(this.root,"keydown",this,this.onKeyDown),this.pointerMoveHandler=Ce.browserEvents.conditionalBind(this.root,"pointermove",this,this.onPointerMove,!0),!(ue>=1))throw new Error(`Number of columns must be >= 1; got ${ue}`);this.columns=ue,this.root.style.setProperty("--grid-columns",`${this.columns}`)}populateItems(ce){let te=document.createElement("div");for(const[ue,ge]of ce.entries()){if(ge===Ce.FieldDropdown.SEPARATOR)continue;ue%this.columns===0&&(te=document.createElement("div"),te.className="blocklyFieldGridRow",Ce.utils.aria.setRole(te,Ce.utils.aria.Role.ROW),this.root.appendChild(te));const[we,st]=ge,Be=(()=>{if((de=we)&&typeof de=="object"&&"src"in de&&typeof de.src=="string"&&"alt"in de&&typeof de.alt=="string"&&"width"in de&&typeof de.width=="number"&&"height"in de&&typeof de.height=="number"){const Le=new Image(we.width,we.height);return Le.src=we.src,Le.alt=we.alt||"",Le}var de;return we})(),Rt=new Ie(te,Be,st,de=>{var Le;this.setSelectedValue(de.getValue()),(Le=this.selectionCallback)===null||Le===void 0||Le.call(this,de)});this.itemIndices.set(Rt.getId(),this.itemIndices.size),this.items.push(Rt)}}dispose(){this.selectionCallback=void 0;for(const ce of this.items)ce.dispose();this.itemIndices.clear(),this.items.length=0,this.keyDownHandler&&(Ce.browserEvents.unbind(this.keyDownHandler),this.keyDownHandler=null),this.pointerMoveHandler&&(Ce.browserEvents.unbind(this.pointerMoveHandler),this.pointerMoveHandler=null),this.root.remove()}onKeyDown(ce){if(!(!this.items.length||ce.shiftKey||ce.ctrlKey||ce.metaKey||ce.altKey)){switch(ce.key){case"ArrowUp":this.moveFocus(-1*this.columns,!0);break;case"ArrowDown":this.moveFocus(this.columns,!0);break;case"ArrowLeft":this.moveFocus(-1*(this.rtl?-1:1),!0);break;case"ArrowRight":this.moveFocus(1*(this.rtl?-1:1),!0);break;case"PageUp":case"Home":this.moveFocus(0,!1);break;case"PageDown":case"End":this.moveFocus(this.items.length-1,!1);break;case"Enter":case"Space":return void ce.stopPropagation();default:return}ce.preventDefault(),ce.stopPropagation()}}onPointerMove(ce){if(!ce.movementX&&!ce.movementY||!(ce.target instanceof Element))return;const te=ce.target.closest(".blocklyFieldGridItem");if(!te)return;const ue=te.id,ge=this.itemIndices.get(ue);ge!==void 0&&this.moveFocus(ge,!1)}setSelectedValue(ce){for(const[te,ue]of this.items.entries()){const ge=ue.getValue()===ce;ue.setSelected(ge),ge&&this.moveFocus(te,!1)}}moveFocus(ce,te){let ue=ce;if(te){const we=this.getFocusedItem();if(!we)return;ue+=this.indexOfItem(we)}const ge=this.itemAtIndex(ue);ge&&(ge.focus(),Ce.utils.aria.setState(this.root,Ce.utils.aria.State.ACTIVEDESCENDANT,ge.getId()))}indexOfItem(ce){var te;return(te=this.itemIndices.get(ce.getId()))!==null&&te!==void 0?te:-1}itemAtIndex(ce){return this.items[ce]}getFocusedItem(){var ce;const te=(ce=this.root.querySelector(".blocklyFieldGridItem:focus"))!==null&&ce!==void 0?ce:this.root.querySelector(".blocklyFieldGridItem");if(!te||!te.id)return;const ue=this.itemIndices.get(te.id);return ue!==void 0?this.itemAtIndex(ue):void 0}}class Ve extends Ce.FieldDropdown{constructor(ce,te,ue){super(ce,te,ue),this.columns=3,ue?.columns&&this.setColumns(parseInt(`${ue.columns}`)),ue&&ue.primaryColour&&(this.primaryColour=ue.primaryColour),ue&&ue.borderColour&&(this.borderColour=ue.borderColour)}static fromJson(ce){if(!ce.options)throw new Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(ce.options,void 0,ce)}setColumns(ce){var te;!isNaN(ce)&&ce>=1&&(this.columns=ce,Ce.DropDownDiv.getOwner()===this&&Ce.DropDownDiv.isVisible()&&((te=this.grid)===null||te===void 0||te.dispose(),this.showEditor_()))}showEditor_(ce){var te;Ce.DropDownDiv.clearContent();const ue=!!(!((te=this.getSourceBlock())===null||te===void 0)&&te.workspace.RTL);this.grid=new je(Ce.DropDownDiv.getContentDiv(),this.getOptions(!1),this.columns,ue,st=>{Ce.DropDownDiv.hideIfOwner(this),this.setValue(st.getValue())}),Ce.DropDownDiv.getContentDiv().classList.add("blocklyFieldGridContainer");const ge=this.getColours();ge&&ge.border&&Ce.DropDownDiv.setColour(ge.primary,ge.border),Ce.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));const we=this.getValue();we&&this.grid.setSelectedValue(we)}doValueUpdate_(ce){var te;super.doValueUpdate_(ce),(te=this.grid)===null||te===void 0||te.setSelectedValue(ce)}getColours(){var ce,te;if(this.primaryColour&&this.borderColour)return{primary:this.primaryColour,border:this.borderColour};const ue=this.getSourceBlock();if(!(ue instanceof Ce.BlockSvg))return;const ge=ue.isShadow()?ue.getParent():ue;return ge?{primary:(ce=this.primaryColour)!==null&&ce!==void 0?ce:ge.getColour(),border:(te=this.borderColour)!==null&&te!==void 0?te:ge.getColourTertiary()}:void 0}}return Ce.fieldRegistry.register("field_grid_dropdown",Ve),Ce.Css.register(`
   .blocklyFieldGridContainer {
     padding: 7px;
     overflow: auto;
   }
   
  .blocklyFieldGrid {
    display: grid;
    grid-gap: 7px;
    grid-template-columns: repeat(var(--grid-columns), min-content);
  }

 .blocklyFieldGrid .blocklyFieldGridItem {
   border: 1px solid rgba(1, 1, 1, 0.5);
   border-radius: 4px;
   color: white;
   min-width: auto;
   background: none;
   white-space: nowrap;
   cursor: pointer;
   padding: 6px 15px;
 }
 
 .blocklyFieldGrid .blocklyFieldGridRow {
   display: contents;
 }
 
 .blocklyFieldGrid .blocklyFieldGridItem.blocklyFieldGridItemSelected {
   background-color: rgba(1, 1, 1, 0.25);
 }

 .blocklyFieldGrid .blocklyFieldGridItem:focus {
   box-shadow: 0 0 0 4px hsla(0, 0%, 100%, .2);
   outline: none;
 }
 `),xe})(),O.exports=re(W(370))},537:O=>{O.exports=k},557:O=>{O.exports=H}},I={};function D(O){var X=I[O];if(X!==void 0)return X.exports;var W=I[O]={exports:{}};return f[O].call(W.exports,W,W.exports,D),W.exports}D.d=(O,X)=>{for(var W in X)D.o(X,W)&&!D.o(O,W)&&Object.defineProperty(O,W,{enumerable:!0,get:X[W]})},D.o=(O,X)=>Object.prototype.hasOwnProperty.call(O,X),D.r=O=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})};var U={};return(()=>{D.r(U),D.d(U,{FieldColour:()=>Se,colourBlend:()=>re,colourPicker:()=>O,colourRandom:()=>X,colourRgb:()=>W,installAllBlocks:()=>z,registerFieldColour:()=>Ce});var O={};D.r(O),D.d(O,{BLOCK_NAME:()=>te,blockDefinition:()=>Le,installBlock:()=>_e,toDart:()=>we,toJavascript:()=>ge,toLua:()=>st,toPhp:()=>Be,toPython:()=>Rt});var X={};D.r(X),D.d(X,{BLOCK_NAME:()=>be,blockDefinition:()=>Et,installBlock:()=>dt,toDart:()=>at,toJavascript:()=>Ke,toLua:()=>ct,toPhp:()=>Ht,toPython:()=>pt});var W={};D.r(W),D.d(W,{BLOCK_NAME:()=>T,blockDefinition:()=>v,installBlock:()=>V,toDart:()=>Te,toJavascript:()=>Y,toLua:()=>ke,toPhp:()=>ve,toPython:()=>Xe});var re={};D.r(re),D.d(re,{BLOCK_NAME:()=>J,blockDefinition:()=>b,installBlock:()=>w,toDart:()=>_,toJavascript:()=>Ne,toLua:()=>A,toPhp:()=>m,toPython:()=>h});var se=D(370),Ue=D(462);const me=["#ffffff","#cccccc","#c0c0c0","#999999","#666666","#333333","#000000","#ffcccc","#ff6666","#ff0000","#cc0000","#990000","#660000","#330000","#ffcc99","#ff9966","#ff9900","#ff6600","#cc6600","#993300","#663300","#ffff99","#ffff66","#ffcc66","#ffcc33","#cc9933","#996633","#663333","#ffffcc","#ffff33","#ffff00","#ffcc00","#999900","#666600","#333300","#99ff99","#66ff99","#33ff33","#33cc00","#009900","#006600","#003300","#99ffff","#33ffff","#66cccc","#00cccc","#339999","#336666","#003333","#ccffff","#66ffff","#33ccff","#3366ff","#3333ff","#000099","#000066","#ccccff","#9999ff","#6666cc","#6633ff","#6600cc","#333399","#330099","#ffccff","#ff99ff","#cc66cc","#cc33cc","#993399","#663366","#330033"];class Se extends Ue.FieldGridDropdown{constructor(ee,Pe,Je){var At,it;super(xe((At=Je?.colourOptions)!==null&&At!==void 0?At:me),Pe,Object.assign(Object.assign({},Je),{columns:(it=Je?.columns)!==null&&it!==void 0?it:7})),this.isDirty_=!1,ee!==se.Field.SKIP_SETUP&&this.setValue(ee)}trimOptions(ee){return{options:ee}}configure_(ee){super.configure_(ee),ee.colourOptions&&this.setColours(ee.colourOptions,ee.colourTitles)}initView(){const ee=this.getConstants();if(!ee)throw Error("Constants not found");this.size_=new se.utils.Size(ee.FIELD_COLOUR_DEFAULT_WIDTH,ee.FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}showEditor_(ee){super.showEditor_(ee),se.DropDownDiv.getContentDiv().classList.add("blocklyFieldColour"),se.DropDownDiv.repositionForWindowResize()}isFullBlockField(){if(!this.getSourceBlock())throw new se.UnattachedFieldError;const ee=this.getConstants();return this.blockIsSimpleReporter()&&!!ee?.FIELD_COLOUR_FULL_BLOCK}blockIsSimpleReporter(){const ee=this.getSourceBlock();if(!ee)throw new se.UnattachedFieldError;if(!ee.outputConnection)return!1;for(const Pe of ee.inputList)if(Pe.connection||Pe.fieldRow.length>1)return!1;return!0}applyColour(){const ee=this.getSourceBlock();if(!ee)throw new se.UnattachedFieldError;if(!this.fieldGroup_)return;const Pe=this.borderRect_;if(!Pe)throw new Error("The border rect has not been initialized");this.isFullBlockField()?(Pe.style.display="none",ee.pathObject.svgPath.setAttribute("fill",this.getValue()),ee.pathObject.svgPath.setAttribute("stroke","#fff")):(Pe.style.display="block",Pe.style.fill=this.getValue())}getSize(){var ee;return!((ee=this.getConstants())===null||ee===void 0)&&ee.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){this.updateSize_();const ee=this.getSourceBlock();if(!ee)throw new se.UnattachedFieldError;ee.applyColour()}updateSize_(ee){const Pe=this.getConstants();if(!Pe)return;let Je,At;this.isFullBlockField()?(Je=2*(ee??0),At=Pe.FIELD_TEXT_HEIGHT):(Je=Pe.FIELD_COLOUR_DEFAULT_WIDTH,At=Pe.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=At,this.size_.width=Je,this.positionBorderRect_()}doClassValidation_(ee){return typeof ee!="string"?null:se.utils.colour.parse(ee)}getText(){let ee=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(ee)&&(ee="#"+ee[1]+ee[3]+ee[5]),ee}setColours(ee,Pe){const Je=xe(ee,Pe);return this.setOptions(Je),this}static fromJson(ee){return new this(ee.colour,void 0,ee)}}function xe(q,ee){return q.map((Pe,Je)=>{const At=document.createElement("div");return At.className="blocklyColourSwatch",At.style.backgroundColor=Pe,ee&&Je<ee.length&&(At.title=ee[Je]),[At,Pe]})}function Ce(){se.fieldRegistry.register("field_colour",Se)}Se.prototype.DEFAULT_VALUE="#ffffff",se.Css.register(`
.blocklyFieldColour .blocklyFieldGridItemSelected,
.blocklyFieldGridItemSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}

.blocklyColourSwatch {
  width: 20px;
  height: 20px;
}

.blocklyGridContainer {
  padding: 0px;
}

.blocklyFieldColour .blocklyFieldGrid {
  grid-gap: 0px;
  row-gap: 4px;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyGridItem {
  border-radius: 0;
  padding: 0;
  border: 0.5px solid #888;
  cursor: pointer;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyFieldGridItem {
  border: 0.5px solid #888;
  padding: 0;
  margin: 0;
  border-radius: 0;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyFieldGridItem:focus {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
  border-radius: 0;
  outline: none;
}
`);var Ie=D(127),je=D(379),Ve=D(157),Me=D(537),ce=D(557);const te="colour_picker",ue={type:te,message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]};function ge(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),Ie.Order.ATOMIC]}function we(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),je.Order.ATOMIC]}function st(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),Ve.Order.ATOMIC]}function Be(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),Me.Order.ATOMIC]}function Rt(q,ee){return[ee.quote_(q.getFieldValue("COLOUR")),ce.Order.ATOMIC]}const de=se.common.createBlockDefinitionsFromJsonArray([ue]),Le=de[te];function _e(q={}){Ce(),se.common.defineBlocks(de),q.javascript&&(q.javascript.forBlock[te]=ge),q.dart&&(q.dart.forBlock[te]=we),q.lua&&(q.lua.forBlock[te]=st),q.php&&(q.php.forBlock[te]=Be),q.python&&(q.python.forBlock[te]=Rt)}const be="colour_random",We={type:be,message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"};function Ke(q,ee){return[ee.provideFunction_("colourRandom",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * 0x1000000);
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Ie.Order.FUNCTION_CALL]}function at(q,ee){return ee.definitions_.import_dart_math="import 'dart:math' as Math;",[ee.provideFunction_("colour_random",`
String ${ee.FUNCTION_NAME_PLACEHOLDER_}() {
  String hex = '0123456789abcdef';
  var rnd = new Math.Random();
  return '#\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}'
      '\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}'
      '\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}';
}
`)+"()",je.Order.UNARY_POSTFIX]}function ct(q,ee){return['string.format("#%06x", math.random(0, 2^24 - 1))',Ve.Order.HIGH]}function Ht(q,ee){return[ee.provideFunction_("colour_random",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}() {
  return '#' . str_pad(dechex(mt_rand(0, 0xFFFFFF)), 6, '0', STR_PAD_LEFT);
}
`)+"()",Me.Order.FUNCTION_CALL]}function pt(q,ee){return ee.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",ce.Order.FUNCTION_CALL]}const St=se.common.createBlockDefinitionsFromJsonArray([We]),Et=St[be];function dt(q={}){Ce(),se.common.defineBlocks(St),q.javascript&&(q.javascript.forBlock[be]=Ke),q.dart&&(q.dart.forBlock[be]=at),q.lua&&(q.lua.forBlock[be]=ct),q.php&&(q.php.forBlock[be]=Ht),q.python&&(q.python.forBlock[be]=pt)}const T="colour_rgb",ae={type:T,message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"};function Y(q,ee){const Pe=ee.valueToCode(q,"RED",Ie.Order.NONE)||0,Je=ee.valueToCode(q,"GREEN",Ie.Order.NONE)||0,At=ee.valueToCode(q,"BLUE",Ie.Order.NONE)||0;return[`${ee.provideFunction_("colourRgb",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)}(${Pe}, ${Je}, ${At})`,Ie.Order.FUNCTION_CALL]}function Te(q,ee){const Pe=ee.valueToCode(q,"RED",je.Order.NONE)||0,Je=ee.valueToCode(q,"GREEN",je.Order.NONE)||0,At=ee.valueToCode(q,"BLUE",je.Order.NONE)||0;return ee.definitions_.import_dart_math="import 'dart:math' as Math;",[`${ee.provideFunction_("colour_rgb",`
String ${ee.FUNCTION_NAME_PLACEHOLDER_}(num r, num g, num b) {
  num rn = (Math.max(Math.min(r, 100), 0) * 2.55).round();
  String rs = rn.toInt().toRadixString(16);
  rs = '0$rs';
  rs = rs.substring(rs.length - 2);
  num gn = (Math.max(Math.min(g, 100), 0) * 2.55).round();
  String gs = gn.toInt().toRadixString(16);
  gs = '0$gs';
  gs = gs.substring(gs.length - 2);
  num bn = (Math.max(Math.min(b, 100), 0) * 2.55).round();
  String bs = bn.toInt().toRadixString(16);
  bs = '0$bs';
  bs = bs.substring(bs.length - 2);
  return '#$rs$gs$bs';
}
`)}(${Pe}, ${Je}, ${At})`,je.Order.UNARY_POSTFIX]}function ke(q,ee){return[`${ee.provideFunction_("colour_rgb",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}(r, g, b)
  r = math.floor(math.min(100, math.max(0, r)) * 2.55 + .5)
  g = math.floor(math.min(100, math.max(0, g)) * 2.55 + .5)
  b = math.floor(math.min(100, math.max(0, b)) * 2.55 + .5)
  return string.format("#%02x%02x%02x", r, g, b)
end
`)}(${ee.valueToCode(q,"RED",Ve.Order.NONE)||0}, ${ee.valueToCode(q,"GREEN",Ve.Order.NONE)||0}, ${ee.valueToCode(q,"BLUE",Ve.Order.NONE)||0})`,Ve.Order.HIGH]}function ve(q,ee){const Pe=ee.valueToCode(q,"RED",Me.Order.NONE)||0,Je=ee.valueToCode(q,"GREEN",Me.Order.NONE)||0,At=ee.valueToCode(q,"BLUE",Me.Order.NONE)||0;return[`${ee.provideFunction_("colour_rgb",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}($r, $g, $b) {
  $r = round(max(min($r, 100), 0) * 2.55);
  $g = round(max(min($g, 100), 0) * 2.55);
  $b = round(max(min($b, 100), 0) * 2.55);
  $hex = '#';
  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);
  return $hex;
}
`)}(${Pe}, ${Je}, ${At})`,Me.Order.FUNCTION_CALL]}function Xe(q,ee){return[ee.provideFunction_("colour_rgb",`
def ${ee.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`)+"("+(ee.valueToCode(q,"RED",ce.Order.NONE)||0)+", "+(ee.valueToCode(q,"GREEN",ce.Order.NONE)||0)+", "+(ee.valueToCode(q,"BLUE",ce.Order.NONE)||0)+")",ce.Order.FUNCTION_CALL]}const le=se.common.createBlockDefinitionsFromJsonArray([ae]),v=le[T];function V(q={}){Ce(),se.common.defineBlocks(le),q.javascript&&(q.javascript.forBlock[T]=Y),q.dart&&(q.dart.forBlock[T]=Te,q.dart.addReservedWords("Math")),q.lua&&(q.lua.forBlock[T]=ke),q.php&&(q.php.forBlock[T]=ve),q.python&&(q.python.forBlock[T]=Xe)}const J="colour_blend",ne={type:J,message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"};function Ne(q,ee){const Pe=ee.valueToCode(q,"COLOUR1",Ie.Order.NONE)||"'#000000'",Je=ee.valueToCode(q,"COLOUR2",Ie.Order.NONE)||"'#000000'",At=ee.valueToCode(q,"RATIO",Ie.Order.NONE)||.5;return[`${ee.provideFunction_("colourBlend",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)}(${Pe}, ${Je}, ${At})`,Ie.Order.FUNCTION_CALL]}function _(q,ee){const Pe=ee.valueToCode(q,"COLOUR1",je.Order.NONE)||"'#000000'",Je=ee.valueToCode(q,"COLOUR2",je.Order.NONE)||"'#000000'",At=ee.valueToCode(q,"RATIO",je.Order.NONE)||.5;return ee.definitions_.import_dart_math="import 'dart:math' as Math;",[`${ee.provideFunction_("colour_blend",`
String ${ee.FUNCTION_NAME_PLACEHOLDER_}(String c1, String c2, num ratio) {
  ratio = Math.max(Math.min(ratio, 1), 0);
  int r1 = int.parse('0x\${c1.substring(1, 3)}');
  int g1 = int.parse('0x\${c1.substring(3, 5)}');
  int b1 = int.parse('0x\${c1.substring(5, 7)}');
  int r2 = int.parse('0x\${c2.substring(1, 3)}');
  int g2 = int.parse('0x\${c2.substring(3, 5)}');
  int b2 = int.parse('0x\${c2.substring(5, 7)}');
  num rn = (r1 * (1 - ratio) + r2 * ratio).round();
  String rs = rn.toInt().toRadixString(16);
  num gn = (g1 * (1 - ratio) + g2 * ratio).round();
  String gs = gn.toInt().toRadixString(16);
  num bn = (b1 * (1 - ratio) + b2 * ratio).round();
  String bs = bn.toInt().toRadixString(16);
  rs = '0$rs';
  rs = rs.substring(rs.length - 2);
  gs = '0$gs';
  gs = gs.substring(gs.length - 2);
  bs = '0$bs';
  bs = bs.substring(bs.length - 2);
  return '#$rs$gs$bs';
}
`)}(${Pe}, ${Je}, ${At})`,je.Order.UNARY_POSTFIX]}function A(q,ee){return[`${ee.provideFunction_("colour_blend",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio)
  local r1 = tonumber(string.sub(colour1, 2, 3), 16)
  local r2 = tonumber(string.sub(colour2, 2, 3), 16)
  local g1 = tonumber(string.sub(colour1, 4, 5), 16)
  local g2 = tonumber(string.sub(colour2, 4, 5), 16)
  local b1 = tonumber(string.sub(colour1, 6, 7), 16)
  local b2 = tonumber(string.sub(colour2, 6, 7), 16)
  local ratio = math.min(1, math.max(0, ratio))
  local r = math.floor(r1 * (1 - ratio) + r2 * ratio + .5)
  local g = math.floor(g1 * (1 - ratio) + g2 * ratio + .5)
  local b = math.floor(b1 * (1 - ratio) + b2 * ratio + .5)
  return string.format("#%02x%02x%02x", r, g, b)
end
`)}(${ee.valueToCode(q,"COLOUR1",Ve.Order.NONE)||"'#000000'"}, ${ee.valueToCode(q,"COLOUR2",Ve.Order.NONE)||"'#000000'"}, ${ee.valueToCode(q,"RATIO",Ve.Order.NONE)||0})`,Ve.Order.HIGH]}function m(q,ee){const Pe=ee.valueToCode(q,"COLOUR1",Me.Order.NONE)||"'#000000'",Je=ee.valueToCode(q,"COLOUR2",Me.Order.NONE)||"'#000000'",At=ee.valueToCode(q,"RATIO",Me.Order.NONE)||.5;return[`${ee.provideFunction_("colour_blend",`
function ${ee.FUNCTION_NAME_PLACEHOLDER_}($c1, $c2, $ratio) {
  $ratio = max(min($ratio, 1), 0);
  $r1 = hexdec(substr($c1, 1, 2));
  $g1 = hexdec(substr($c1, 3, 2));
  $b1 = hexdec(substr($c1, 5, 2));
  $r2 = hexdec(substr($c2, 1, 2));
  $g2 = hexdec(substr($c2, 3, 2));
  $b2 = hexdec(substr($c2, 5, 2));
  $r = round($r1 * (1 - $ratio) + $r2 * $ratio);
  $g = round($g1 * (1 - $ratio) + $g2 * $ratio);
  $b = round($b1 * (1 - $ratio) + $b2 * $ratio);
  $hex = '#';
  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);
  return $hex;
}
`)}(${Pe}, ${Je}, ${At})`,Me.Order.FUNCTION_CALL]}function h(q,ee){return[`${ee.provideFunction_("colour_blend",`
def ${ee.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`)}(${ee.valueToCode(q,"COLOUR1",ce.Order.NONE)||"'#000000'"}, ${ee.valueToCode(q,"COLOUR2",ce.Order.NONE)||"'#000000'"}, ${ee.valueToCode(q,"RATIO",ce.Order.NONE)||0})`,ce.Order.FUNCTION_CALL]}const c=se.common.createBlockDefinitionsFromJsonArray([ne]),b=c[J];function w(q={}){Ce(),se.common.defineBlocks(c),q.javascript&&(q.javascript.forBlock[J]=Ne),q.dart&&(q.dart.forBlock[J]=_,q.dart.addReservedWords("Math")),q.lua&&(q.lua.forBlock[J]=A),q.php&&(q.php.forBlock[J]=m),q.python&&(q.python.forBlock[J]=h)}function z(q={}){_e(q),V(q),dt(q),w(q)}})(),U})(),N.exports=K(F(370),F(127),F(379),F(157),F(537),F(557))}},M={};function L(N){var P=M[N];if(P!==void 0)return P.exports;var F=M[N]={exports:{}};return R[N].call(F.exports,F,F.exports,L),F.exports}L.d=(N,P)=>{for(var F in P)L.o(P,F)&&!L.o(N,F)&&Object.defineProperty(N,F,{enumerable:!0,get:P[F]})},L.o=(N,P)=>Object.prototype.hasOwnProperty.call(N,P),L.r=N=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})};var y={};return(()=>{L.r(y),L.d(y,{FieldColourHsvSliders:()=>K});var N=L(370),P=L(594);class F{constructor(d=0,C=0,x=0){this.r=d,this.g=C,this.b=x}static componentToHex(d){return d<=0?"00":d>=1?"ff":("0"+(255*d+.5>>>0).toString(16)).slice(-2)}toHex(){return"#"+F.componentToHex(this.r)+F.componentToHex(this.g)+F.componentToHex(this.b)}loadFromHex(d){return this.r=parseInt(d.slice(1,3),16)/255,this.g=parseInt(d.slice(3,5),16)/255,this.b=parseInt(d.slice(5,7),16)/255,this}loadFromHsv(d){const C=6*(d.h-Math.floor(d.h));return this.r=d.v*(1-d.s*Math.max(0,Math.min(1,2-Math.abs(C-3)))),this.g=d.v*(1-d.s*Math.max(0,Math.min(1,Math.abs(C-2)-1))),this.b=d.v*(1-d.s*Math.max(0,Math.min(1,Math.abs(C-4)-1))),this}}class K extends P.FieldColour{constructor(){super(...arguments),this.valueWhenEditorWasOpened=null,this.hsvBoundEvents=[],this.hueReadout=null,this.hueSlider=null,this.saturationReadout=null,this.saturationSlider=null,this.brightnessReadout=null,this.brightnessSlider=null,this.dropdownContainer=null}showEditor_(){if(this.createDropdownSliders(),!this.dropdownContainer||!this.hueSlider)throw new Error("Failed to initialize the HSV sliders.");N.DropDownDiv.getContentDiv().appendChild(this.dropdownContainer),N.DropDownDiv.showPositionedByField(this,this.dropdownDisposeSliders.bind(this)),this.valueWhenEditorWasOpened=this.value_,this.hueSlider.focus({preventScroll:!0})}static createLabelInContainer(d,C){const x=document.createElement("div"),k=document.createElement("span"),H=document.createElement("span");return x.classList.add("fieldColourSliderLabel"),k.textContent=d,x.appendChild(k),x.appendChild(H),C.appendChild(x),H}static createSliderInContainer(d,C,x){const k=document.createElement("input");return k.classList.add("fieldColourSlider"),k.type="range",k.min=String(0),k.max=String(d),k.step=String(C),x.appendChild(k),k}createDropdownSliders(){const d=document.createElement("div");if(d.classList.add("fieldColourSliderContainer"),this.hueReadout=K.createLabelInContainer("Hue",d),this.hueSlider=K.createSliderInContainer(K.HUE_SLIDER_MAX,2,d),this.saturationReadout=K.createLabelInContainer("Saturation",d),this.saturationSlider=K.createSliderInContainer(K.SATURATION_SLIDER_MAX,1,d),this.brightnessReadout=K.createLabelInContainer("Brightness",d),this.brightnessSlider=K.createSliderInContainer(K.BRIGHTNESS_SLIDER_MAX,1,d),this.hsvBoundEvents.push(N.browserEvents.conditionalBind(this.hueSlider,"input",this,this.onSliderChange)),this.hsvBoundEvents.push(N.browserEvents.conditionalBind(this.saturationSlider,"input",this,this.onSliderChange)),this.hsvBoundEvents.push(N.browserEvents.conditionalBind(this.brightnessSlider,"input",this,this.onSliderChange)),window.EyeDropper){const C=document.createElement("button");C.classList.add("fieldColourEyedropper"),d.appendChild(document.createElement("hr")),d.appendChild(C),this.hsvBoundEvents.push(N.browserEvents.conditionalBind(C,"click",this,this.onEyedropperEvent))}this.dropdownContainer=d,this.updateSliderValues()}dropdownDisposeSliders(){for(const d of this.hsvBoundEvents)N.browserEvents.unbind(d);this.hsvBoundEvents.length=0,this.hueReadout=null,this.hueSlider=null,this.saturationReadout=null,this.saturationSlider=null,this.brightnessReadout=null,this.brightnessSlider=null,this.dropdownContainer=null,this.sourceBlock_&&N.Events.isEnabled()&&this.valueWhenEditorWasOpened!==null&&this.valueWhenEditorWasOpened!==this.value_&&(N.Events.fire(new(N.Events.get(N.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened,this.value_)),this.valueWhenEditorWasOpened=null)}static hsvToHex(d,C,x){return K.helperHsv.h=d,K.helperHsv.s=C,K.helperHsv.v=x,K.helperRgb.loadFromHsv(K.helperHsv).toHex()}onSliderChange(d){if(!this.hueSlider||!this.saturationSlider||!this.brightnessSlider)throw new Error("The HSV sliders are missing.");const C=parseFloat(this.hueSlider.value)/K.HUE_SLIDER_MAX,x=parseFloat(this.saturationSlider.value)/K.SATURATION_SLIDER_MAX,k=parseFloat(this.brightnessSlider.value)/K.BRIGHTNESS_SLIDER_MAX;this.setIntermediateValue(K.hsvToHex(C,x,k)),this.renderSliders()}onEyedropperEvent(d){window.EyeDropper&&new window.EyeDropper().open().then(C=>{this.setIntermediateValue(C.sRGBHex),this.updateSliderValues()})}setIntermediateValue(d){const C=this.value_;this.setValue(d,!1),this.sourceBlock_&&N.Events.isEnabled()&&this.value_!==C&&N.Events.fire(new(N.Events.get(N.Events.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,C,this.value_))}renderSliders(){if(!(this.hueSlider&&this.hueReadout&&this.saturationSlider&&this.saturationReadout&&this.brightnessSlider&&this.brightnessReadout))throw new Error("The HSV sliders are missing.");this.hueReadout.textContent=this.hueSlider.value,this.saturationReadout.textContent=this.saturationSlider.value,this.brightnessReadout.textContent=this.brightnessSlider.value;const d=parseFloat(this.hueSlider.value)/K.HUE_SLIDER_MAX,C=parseFloat(this.saturationSlider.value)/K.SATURATION_SLIDER_MAX,x=parseFloat(this.brightnessSlider.value)/K.BRIGHTNESS_SLIDER_MAX;let k="linear-gradient(to right, ";k+=K.hsvToHex(0,C,x)+` ${K.THUMB_RADIUS}px, `,k+=K.hsvToHex(1/6,C,x)+", ",k+=K.hsvToHex(2/6,C,x)+", ",k+=K.hsvToHex(.5,C,x)+", ",k+=K.hsvToHex(4/6,C,x)+", ",k+=K.hsvToHex(5/6,C,x)+", ",k+=K.hsvToHex(1,C,x)+` calc(100% - ${K.THUMB_RADIUS}px))`,this.hueSlider.style.setProperty("--slider-track-background",k);let H="linear-gradient(to right, ";H+=K.hsvToHex(d,0,x)+` ${K.THUMB_RADIUS}px, `,H+=K.hsvToHex(d,1,x)+` calc(100% - ${K.THUMB_RADIUS}px))`,this.saturationSlider.style.setProperty("--slider-track-background",H);let f="linear-gradient(to right, ";f+=K.hsvToHex(d,C,0)+` ${K.THUMB_RADIUS}px, `,f+=K.hsvToHex(d,C,1)+` calc(100% - ${K.THUMB_RADIUS}px))`,this.brightnessSlider.style.setProperty("--slider-track-background",f)}updateSliderValues(){var d;if(!this.hueSlider||!this.saturationSlider||!this.brightnessSlider)return;const C=K.helperHsv.loadFromRgb(K.helperRgb.loadFromHex((d=this.getValue())!==null&&d!==void 0?d:""));this.hueSlider.value=String(C.h*K.HUE_SLIDER_MAX),this.saturationSlider.value=String(C.s*K.SATURATION_SLIDER_MAX),this.brightnessSlider.value=String(C.v*K.BRIGHTNESS_SLIDER_MAX),this.renderSliders()}}K.HUE_SLIDER_MAX=360,K.SATURATION_SLIDER_MAX=100,K.BRIGHTNESS_SLIDER_MAX=100,K.THUMB_RADIUS=12,K.helperHsv=new class{constructor(g=0,d=0,C=0){this.h=g,this.s=d,this.v=C}loadFromRgb(g){const d=Math.max(Math.max(g.r,g.g),g.b),C=Math.min(Math.min(g.r,g.g),g.b);if(this.v=d,C===d)return this.h=0,this.s=0,this;const x=d-C;let k;return this.s=x/d,k=g.r===d?(g.g-g.b)/x:g.g===d?2+(g.b-g.r)/x:4+(g.r-g.g)/x,k/=6,this.h=k-Math.floor(k),this}copy(g){return this.h=g.h,this.s=g.s,this.v=g.v,this}},K.helperRgb=new F,N.fieldRegistry.register("field_colour_hsv_sliders",K),N.Css.register(`
.fieldColourSliderContainer {
  padding: 4px;
  font-family: Roboto, Arial, sans-serif;
  color: #5c5c5c;
}
.fieldColourSliderContainer hr {
  border: none;
  border-top: 1px solid #bbb;
}
.fieldColourSliderLabel {
  display: flex;
  justify-content: space-between;
}
.fieldColourEyedropper {
  appearance: none;
  position: relative;
  border: none;
  border-radius: 4px;
  background: transparent;
  font: inherit;
  color: inherit;
  cursor: pointer;
  width: 100%;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}
.fieldColourEyedropper:hover {
  background: rgba(0,0,0,0.1)
}
.fieldColourEyedropper input {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
.fieldColourEyedropper::before {
  content: "Eyedropper";
}
.fieldColourEyedropper::after {
  content: "";
  margin-left: 8px;
  width: 24px;
  height: 24px;
  background: currentColor;
  pointer-events: none;
  -webkit-mask-image: var(--customize-dial-symbol);
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-image: var(--customize-dial-symbol);
  mask-repeat: no-repeat;
  mask-position: center;
  --customize-dial-symbol: url('data:image/svg+xml,    <svg xmlns="http://www.w3.org/2000/svg"          width="24px" height="24px"          viewBox="0 0 24 24">       <path stroke="black" strokewidth="1.414" fill="none"             d="m 13 8 L 6 15 Q 3 18 2 21 Q 0 23 .5 23.5 Q 1 24 3 22                 Q 6 21 9 18 L 16 11"/>       <path fill="black"             d="m 12 7 Q 11 6 12 5 Q 13 4 14 5 Q 15 6 16 5 Q 20 -1 22.5 1.5                 Q 25 4 19 8 Q 18 9 19 10 Q 20 11 19 12 Q 18 13 17 12"/>     </svg>');
}
.fieldColourSlider {
  -webkit-appearance: none;
  width: 150px;
  height: 24px;
  margin: 4px 8px 24px 8px;
  padding: 0;
}
.fieldColourSlider:last-child {
  margin-bottom: 4px;
}
.fieldColourSlider:focus {
  outline: none;
}
/* Webkit */
.fieldColourSlider::-webkit-slider-runnable-track {
  background: var(--slider-track-background);
  border-radius: 8px;
  height: 16px;
}
.fieldColourSlider::-webkit-slider-thumb {
  -webkit-appearance: none;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(0,0,0,.15);
  cursor: pointer;
  width: ${2*K.THUMB_RADIUS}px;
  height: ${2*K.THUMB_RADIUS}px;
  margin-top: -4px;
}
/* Firefox */
.fieldColourSlider::-moz-range-track {
  background: var(--slider-track-background);
  border-radius: 8px;
  height: 16px;
}
.fieldColourSlider::-moz-range-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(0,0,0,.15);
  cursor: pointer;
  width: ${2*K.THUMB_RADIUS}px;
  height: ${2*K.THUMB_RADIUS}px;
}
.fieldColourSlider::-moz-focus-outer {
  /* override the focus border style */
  border: 0;
}
/* IE */
.fieldColourSlider::-ms-track {
  background: var(--slider-track-background);
  border-radius: 12px;
  width: 100%;
  height: 24px;
  /* remove default tick marks */
  color: transparent;
}
.fieldColourSlider::-ms-fill-lower  {
  background: transparent;
}
.fieldColourSlider::-ms-fill-upper  {
  background: transparent;
}
.fieldColourSlider::-ms-thumb {
  background: #fff;
  border: none;
  border-radius: 50%;
  box-shadow: 0 0 0 4px rgba(0,0,0,.15);
  cursor: pointer;
  width: ${2*K.THUMB_RADIUS}px;
  height: ${2*K.THUMB_RADIUS}px;
}
`)})(),y})())})(uh)),uh.exports}var TF=EF(),ch={exports:{}};var bF=ch.exports,Sv;function SF(){return Sv||(Sv=1,(function(i,n){(function(o,s){i.exports=s(Er(),Wh(),Wm(),Xm(),Km(),zm())})(bF,(o,s,l,p,E,$)=>(()=>{var R={127:N=>{N.exports=s},157:N=>{N.exports=p},370:N=>{N.exports=o},379:N=>{N.exports=l},462:function(N,P,F){var K;K=g=>(()=>{var d={370:U=>{U.exports=g}},C={};function x(U){var O=C[U];if(O!==void 0)return O.exports;var X=C[U]={exports:{}};return d[U](X,X.exports,x),X.exports}x.d=(U,O)=>{for(var X in O)x.o(O,X)&&!x.o(U,X)&&Object.defineProperty(U,X,{enumerable:!0,get:O[X]})},x.o=(U,O)=>Object.prototype.hasOwnProperty.call(U,O),x.r=U=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})};var k={};x.r(k),x.d(k,{FieldGridDropdown:()=>D});var H=x(370);class f{constructor(O,X,W,re){this.value=W,this.selected=!1,this.selectionCallback=re,this.element=document.createElement("button"),this.element.id=H.utils.idGenerator.getNextUniqueId(),this.element.className="blocklyFieldGridItem",this.clickHandler=H.browserEvents.conditionalBind(this.element,"click",this,this.onClick,!0),O.appendChild(this.element);const se=typeof X=="string"?document.createTextNode(X):X;this.element.appendChild(se),H.utils.aria.setRole(this.element,H.utils.aria.Role.GRIDCELL)}dispose(){this.selectionCallback=null,this.element.remove(),this.clickHandler&&(H.browserEvents.unbind(this.clickHandler),this.clickHandler=null)}getId(){return this.element.id}getValue(){return this.value}isSelected(){return this.selected}setSelected(O){this.selected=O,H.utils.aria.setState(this.element,H.utils.aria.State.SELECTED,this.selected),this.element.classList.toggle("blocklyFieldGridItemSelected",this.selected),this.isSelected()&&this.focus()}onClick(){var O;this.setSelected(!0),(O=this.selectionCallback)===null||O===void 0||O.call(this,this)}focus(){this.element.focus({preventScroll:!0});const O=this.element.offsetParent;if(!O)return;const X=this.element.offsetTop,W=O.scrollTop,re=this.getInterItemSpacing();X<W?O.scrollTo(0,X-re):X+this.element.offsetHeight>W+O.clientHeight&&O.scrollBy(0,X+this.element.clientHeight-(W+O.clientHeight)+re)}getInterItemSpacing(){const O=this.element.closest(".blocklyFieldGrid");if(!O)return 0;const X=[...O.querySelectorAll(".blocklyFieldGridItem")];if(!X.length)return 0;const W=X[0].offsetTop,re=X[0].offsetHeight;for(const se of X)if(se.offsetTop!==W)return se.offsetTop-re-W;return 0}}class I{constructor(O,X,W,re,se){if(this.columns=W,this.rtl=re,this.itemIndices=new Map,this.items=new Array,this.keyDownHandler=null,this.pointerMoveHandler=null,this.selectionCallback=se,this.root=document.createElement("div"),this.root.className="blocklyFieldGrid",this.root.tabIndex=0,H.utils.aria.setRole(this.root,H.utils.aria.Role.GRID),O.appendChild(this.root),this.populateItems(X),this.keyDownHandler=H.browserEvents.conditionalBind(this.root,"keydown",this,this.onKeyDown),this.pointerMoveHandler=H.browserEvents.conditionalBind(this.root,"pointermove",this,this.onPointerMove,!0),!(W>=1))throw new Error(`Number of columns must be >= 1; got ${W}`);this.columns=W,this.root.style.setProperty("--grid-columns",`${this.columns}`)}populateItems(O){let X=document.createElement("div");for(const[W,re]of O.entries()){if(re===H.FieldDropdown.SEPARATOR)continue;W%this.columns===0&&(X=document.createElement("div"),X.className="blocklyFieldGridRow",H.utils.aria.setRole(X,H.utils.aria.Role.ROW),this.root.appendChild(X));const[se,Ue]=re,me=(()=>{if((xe=se)&&typeof xe=="object"&&"src"in xe&&typeof xe.src=="string"&&"alt"in xe&&typeof xe.alt=="string"&&"width"in xe&&typeof xe.width=="number"&&"height"in xe&&typeof xe.height=="number"){const Ce=new Image(se.width,se.height);return Ce.src=se.src,Ce.alt=se.alt||"",Ce}var xe;return se})(),Se=new f(X,me,Ue,xe=>{var Ce;this.setSelectedValue(xe.getValue()),(Ce=this.selectionCallback)===null||Ce===void 0||Ce.call(this,xe)});this.itemIndices.set(Se.getId(),this.itemIndices.size),this.items.push(Se)}}dispose(){this.selectionCallback=void 0;for(const O of this.items)O.dispose();this.itemIndices.clear(),this.items.length=0,this.keyDownHandler&&(H.browserEvents.unbind(this.keyDownHandler),this.keyDownHandler=null),this.pointerMoveHandler&&(H.browserEvents.unbind(this.pointerMoveHandler),this.pointerMoveHandler=null),this.root.remove()}onKeyDown(O){if(!(!this.items.length||O.shiftKey||O.ctrlKey||O.metaKey||O.altKey)){switch(O.key){case"ArrowUp":this.moveFocus(-1*this.columns,!0);break;case"ArrowDown":this.moveFocus(this.columns,!0);break;case"ArrowLeft":this.moveFocus(-1*(this.rtl?-1:1),!0);break;case"ArrowRight":this.moveFocus(1*(this.rtl?-1:1),!0);break;case"PageUp":case"Home":this.moveFocus(0,!1);break;case"PageDown":case"End":this.moveFocus(this.items.length-1,!1);break;case"Enter":case"Space":return void O.stopPropagation();default:return}O.preventDefault(),O.stopPropagation()}}onPointerMove(O){if(!O.movementX&&!O.movementY||!(O.target instanceof Element))return;const X=O.target.closest(".blocklyFieldGridItem");if(!X)return;const W=X.id,re=this.itemIndices.get(W);re!==void 0&&this.moveFocus(re,!1)}setSelectedValue(O){for(const[X,W]of this.items.entries()){const re=W.getValue()===O;W.setSelected(re),re&&this.moveFocus(X,!1)}}moveFocus(O,X){let W=O;if(X){const se=this.getFocusedItem();if(!se)return;W+=this.indexOfItem(se)}const re=this.itemAtIndex(W);re&&(re.focus(),H.utils.aria.setState(this.root,H.utils.aria.State.ACTIVEDESCENDANT,re.getId()))}indexOfItem(O){var X;return(X=this.itemIndices.get(O.getId()))!==null&&X!==void 0?X:-1}itemAtIndex(O){return this.items[O]}getFocusedItem(){var O;const X=(O=this.root.querySelector(".blocklyFieldGridItem:focus"))!==null&&O!==void 0?O:this.root.querySelector(".blocklyFieldGridItem");if(!X||!X.id)return;const W=this.itemIndices.get(X.id);return W!==void 0?this.itemAtIndex(W):void 0}}class D extends H.FieldDropdown{constructor(O,X,W){super(O,X,W),this.columns=3,W?.columns&&this.setColumns(parseInt(`${W.columns}`)),W&&W.primaryColour&&(this.primaryColour=W.primaryColour),W&&W.borderColour&&(this.borderColour=W.borderColour)}static fromJson(O){if(!O.options)throw new Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(O.options,void 0,O)}setColumns(O){var X;!isNaN(O)&&O>=1&&(this.columns=O,H.DropDownDiv.getOwner()===this&&H.DropDownDiv.isVisible()&&((X=this.grid)===null||X===void 0||X.dispose(),this.showEditor_()))}showEditor_(O){var X;H.DropDownDiv.clearContent();const W=!!(!((X=this.getSourceBlock())===null||X===void 0)&&X.workspace.RTL);this.grid=new I(H.DropDownDiv.getContentDiv(),this.getOptions(!1),this.columns,W,Ue=>{H.DropDownDiv.hideIfOwner(this),this.setValue(Ue.getValue())}),H.DropDownDiv.getContentDiv().classList.add("blocklyFieldGridContainer");const re=this.getColours();re&&re.border&&H.DropDownDiv.setColour(re.primary,re.border),H.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));const se=this.getValue();se&&this.grid.setSelectedValue(se)}doValueUpdate_(O){var X;super.doValueUpdate_(O),(X=this.grid)===null||X===void 0||X.setSelectedValue(O)}getColours(){var O,X;if(this.primaryColour&&this.borderColour)return{primary:this.primaryColour,border:this.borderColour};const W=this.getSourceBlock();if(!(W instanceof H.BlockSvg))return;const re=W.isShadow()?W.getParent():W;return re?{primary:(O=this.primaryColour)!==null&&O!==void 0?O:re.getColour(),border:(X=this.borderColour)!==null&&X!==void 0?X:re.getColourTertiary()}:void 0}}return H.fieldRegistry.register("field_grid_dropdown",D),H.Css.register(`
   .blocklyFieldGridContainer {
     padding: 7px;
     overflow: auto;
   }
   
  .blocklyFieldGrid {
    display: grid;
    grid-gap: 7px;
    grid-template-columns: repeat(var(--grid-columns), min-content);
  }

 .blocklyFieldGrid .blocklyFieldGridItem {
   border: 1px solid rgba(1, 1, 1, 0.5);
   border-radius: 4px;
   color: white;
   min-width: auto;
   background: none;
   white-space: nowrap;
   cursor: pointer;
   padding: 6px 15px;
 }
 
 .blocklyFieldGrid .blocklyFieldGridRow {
   display: contents;
 }
 
 .blocklyFieldGrid .blocklyFieldGridItem.blocklyFieldGridItemSelected {
   background-color: rgba(1, 1, 1, 0.25);
 }

 .blocklyFieldGrid .blocklyFieldGridItem:focus {
   box-shadow: 0 0 0 4px hsla(0, 0%, 100%, .2);
   outline: none;
 }
 `),k})(),N.exports=K(F(370))},537:N=>{N.exports=E},557:N=>{N.exports=$}},M={};function L(N){var P=M[N];if(P!==void 0)return P.exports;var F=M[N]={exports:{}};return R[N].call(F.exports,F,F.exports,L),F.exports}L.d=(N,P)=>{for(var F in P)L.o(P,F)&&!L.o(N,F)&&Object.defineProperty(N,F,{enumerable:!0,get:P[F]})},L.o=(N,P)=>Object.prototype.hasOwnProperty.call(N,P),L.r=N=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})};var y={};return(()=>{L.r(y),L.d(y,{FieldColour:()=>x,colourBlend:()=>K,colourPicker:()=>N,colourRandom:()=>P,colourRgb:()=>F,installAllBlocks:()=>Xe,registerFieldColour:()=>H});var N={};L.r(N),L.d(N,{BLOCK_NAME:()=>X,blockDefinition:()=>Ce,installBlock:()=>Ie,toDart:()=>se,toJavascript:()=>re,toLua:()=>Ue,toPhp:()=>me,toPython:()=>Se});var P={};L.r(P),L.d(P,{BLOCK_NAME:()=>je,blockDefinition:()=>st,installBlock:()=>Be,toDart:()=>ce,toJavascript:()=>Me,toLua:()=>te,toPhp:()=>ue,toPython:()=>ge});var F={};L.r(F),L.d(F,{BLOCK_NAME:()=>Rt,blockDefinition:()=>ct,installBlock:()=>Ht,toDart:()=>_e,toJavascript:()=>Le,toLua:()=>be,toPhp:()=>We,toPython:()=>Ke});var K={};L.r(K),L.d(K,{BLOCK_NAME:()=>pt,blockDefinition:()=>ke,installBlock:()=>ve,toDart:()=>dt,toJavascript:()=>Et,toLua:()=>T,toPhp:()=>ae,toPython:()=>Y});var g=L(370),d=L(462);const C=["#ffffff","#cccccc","#c0c0c0","#999999","#666666","#333333","#000000","#ffcccc","#ff6666","#ff0000","#cc0000","#990000","#660000","#330000","#ffcc99","#ff9966","#ff9900","#ff6600","#cc6600","#993300","#663300","#ffff99","#ffff66","#ffcc66","#ffcc33","#cc9933","#996633","#663333","#ffffcc","#ffff33","#ffff00","#ffcc00","#999900","#666600","#333300","#99ff99","#66ff99","#33ff33","#33cc00","#009900","#006600","#003300","#99ffff","#33ffff","#66cccc","#00cccc","#339999","#336666","#003333","#ccffff","#66ffff","#33ccff","#3366ff","#3333ff","#000099","#000066","#ccccff","#9999ff","#6666cc","#6633ff","#6600cc","#333399","#330099","#ffccff","#ff99ff","#cc66cc","#cc33cc","#993399","#663366","#330033"];class x extends d.FieldGridDropdown{constructor(v,V,J){var ne,Ne;super(k((ne=J?.colourOptions)!==null&&ne!==void 0?ne:C),V,Object.assign(Object.assign({},J),{columns:(Ne=J?.columns)!==null&&Ne!==void 0?Ne:7})),this.isDirty_=!1,v!==g.Field.SKIP_SETUP&&this.setValue(v)}trimOptions(v){return{options:v}}configure_(v){super.configure_(v),v.colourOptions&&this.setColours(v.colourOptions,v.colourTitles)}initView(){const v=this.getConstants();if(!v)throw Error("Constants not found");this.size_=new g.utils.Size(v.FIELD_COLOUR_DEFAULT_WIDTH,v.FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}showEditor_(v){super.showEditor_(v),g.DropDownDiv.getContentDiv().classList.add("blocklyFieldColour"),g.DropDownDiv.repositionForWindowResize()}isFullBlockField(){if(!this.getSourceBlock())throw new g.UnattachedFieldError;const v=this.getConstants();return this.blockIsSimpleReporter()&&!!v?.FIELD_COLOUR_FULL_BLOCK}blockIsSimpleReporter(){const v=this.getSourceBlock();if(!v)throw new g.UnattachedFieldError;if(!v.outputConnection)return!1;for(const V of v.inputList)if(V.connection||V.fieldRow.length>1)return!1;return!0}applyColour(){const v=this.getSourceBlock();if(!v)throw new g.UnattachedFieldError;if(!this.fieldGroup_)return;const V=this.borderRect_;if(!V)throw new Error("The border rect has not been initialized");this.isFullBlockField()?(V.style.display="none",v.pathObject.svgPath.setAttribute("fill",this.getValue()),v.pathObject.svgPath.setAttribute("stroke","#fff")):(V.style.display="block",V.style.fill=this.getValue())}getSize(){var v;return!((v=this.getConstants())===null||v===void 0)&&v.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){this.updateSize_();const v=this.getSourceBlock();if(!v)throw new g.UnattachedFieldError;v.applyColour()}updateSize_(v){const V=this.getConstants();if(!V)return;let J,ne;this.isFullBlockField()?(J=2*(v??0),ne=V.FIELD_TEXT_HEIGHT):(J=V.FIELD_COLOUR_DEFAULT_WIDTH,ne=V.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=ne,this.size_.width=J,this.positionBorderRect_()}doClassValidation_(v){return typeof v!="string"?null:g.utils.colour.parse(v)}getText(){let v=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(v)&&(v="#"+v[1]+v[3]+v[5]),v}setColours(v,V){const J=k(v,V);return this.setOptions(J),this}static fromJson(v){return new this(v.colour,void 0,v)}}function k(le,v){return le.map((V,J)=>{const ne=document.createElement("div");return ne.className="blocklyColourSwatch",ne.style.backgroundColor=V,v&&J<v.length&&(ne.title=v[J]),[ne,V]})}function H(){g.fieldRegistry.register("field_colour",x)}x.prototype.DEFAULT_VALUE="#ffffff",g.Css.register(`
.blocklyFieldColour .blocklyFieldGridItemSelected,
.blocklyFieldGridItemSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}

.blocklyColourSwatch {
  width: 20px;
  height: 20px;
}

.blocklyGridContainer {
  padding: 0px;
}

.blocklyFieldColour .blocklyFieldGrid {
  grid-gap: 0px;
  row-gap: 4px;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyGridItem {
  border-radius: 0;
  padding: 0;
  border: 0.5px solid #888;
  cursor: pointer;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyFieldGridItem {
  border: 0.5px solid #888;
  padding: 0;
  margin: 0;
  border-radius: 0;
}

.blocklyFieldColour .blocklyFieldGrid .blocklyFieldGridItem:focus {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
  border-radius: 0;
  outline: none;
}
`);var f=L(127),I=L(379),D=L(157),U=L(537),O=L(557);const X="colour_picker",W={type:X,message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]};function re(le,v){return[v.quote_(le.getFieldValue("COLOUR")),f.Order.ATOMIC]}function se(le,v){return[v.quote_(le.getFieldValue("COLOUR")),I.Order.ATOMIC]}function Ue(le,v){return[v.quote_(le.getFieldValue("COLOUR")),D.Order.ATOMIC]}function me(le,v){return[v.quote_(le.getFieldValue("COLOUR")),U.Order.ATOMIC]}function Se(le,v){return[v.quote_(le.getFieldValue("COLOUR")),O.Order.ATOMIC]}const xe=g.common.createBlockDefinitionsFromJsonArray([W]),Ce=xe[X];function Ie(le={}){H(),g.common.defineBlocks(xe),le.javascript&&(le.javascript.forBlock[X]=re),le.dart&&(le.dart.forBlock[X]=se),le.lua&&(le.lua.forBlock[X]=Ue),le.php&&(le.php.forBlock[X]=me),le.python&&(le.python.forBlock[X]=Se)}const je="colour_random",Ve={type:je,message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"};function Me(le,v){return[v.provideFunction_("colourRandom",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * 0x1000000);
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",f.Order.FUNCTION_CALL]}function ce(le,v){return v.definitions_.import_dart_math="import 'dart:math' as Math;",[v.provideFunction_("colour_random",`
String ${v.FUNCTION_NAME_PLACEHOLDER_}() {
  String hex = '0123456789abcdef';
  var rnd = new Math.Random();
  return '#\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}'
      '\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}'
      '\${hex[rnd.nextInt(16)]}\${hex[rnd.nextInt(16)]}';
}
`)+"()",I.Order.UNARY_POSTFIX]}function te(le,v){return['string.format("#%06x", math.random(0, 2^24 - 1))',D.Order.HIGH]}function ue(le,v){return[v.provideFunction_("colour_random",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}() {
  return '#' . str_pad(dechex(mt_rand(0, 0xFFFFFF)), 6, '0', STR_PAD_LEFT);
}
`)+"()",U.Order.FUNCTION_CALL]}function ge(le,v){return v.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",O.Order.FUNCTION_CALL]}const we=g.common.createBlockDefinitionsFromJsonArray([Ve]),st=we[je];function Be(le={}){H(),g.common.defineBlocks(we),le.javascript&&(le.javascript.forBlock[je]=Me),le.dart&&(le.dart.forBlock[je]=ce),le.lua&&(le.lua.forBlock[je]=te),le.php&&(le.php.forBlock[je]=ue),le.python&&(le.python.forBlock[je]=ge)}const Rt="colour_rgb",de={type:Rt,message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"};function Le(le,v){const V=v.valueToCode(le,"RED",f.Order.NONE)||0,J=v.valueToCode(le,"GREEN",f.Order.NONE)||0,ne=v.valueToCode(le,"BLUE",f.Order.NONE)||0;return[`${v.provideFunction_("colourRgb",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)}(${V}, ${J}, ${ne})`,f.Order.FUNCTION_CALL]}function _e(le,v){const V=v.valueToCode(le,"RED",I.Order.NONE)||0,J=v.valueToCode(le,"GREEN",I.Order.NONE)||0,ne=v.valueToCode(le,"BLUE",I.Order.NONE)||0;return v.definitions_.import_dart_math="import 'dart:math' as Math;",[`${v.provideFunction_("colour_rgb",`
String ${v.FUNCTION_NAME_PLACEHOLDER_}(num r, num g, num b) {
  num rn = (Math.max(Math.min(r, 100), 0) * 2.55).round();
  String rs = rn.toInt().toRadixString(16);
  rs = '0$rs';
  rs = rs.substring(rs.length - 2);
  num gn = (Math.max(Math.min(g, 100), 0) * 2.55).round();
  String gs = gn.toInt().toRadixString(16);
  gs = '0$gs';
  gs = gs.substring(gs.length - 2);
  num bn = (Math.max(Math.min(b, 100), 0) * 2.55).round();
  String bs = bn.toInt().toRadixString(16);
  bs = '0$bs';
  bs = bs.substring(bs.length - 2);
  return '#$rs$gs$bs';
}
`)}(${V}, ${J}, ${ne})`,I.Order.UNARY_POSTFIX]}function be(le,v){return[`${v.provideFunction_("colour_rgb",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(r, g, b)
  r = math.floor(math.min(100, math.max(0, r)) * 2.55 + .5)
  g = math.floor(math.min(100, math.max(0, g)) * 2.55 + .5)
  b = math.floor(math.min(100, math.max(0, b)) * 2.55 + .5)
  return string.format("#%02x%02x%02x", r, g, b)
end
`)}(${v.valueToCode(le,"RED",D.Order.NONE)||0}, ${v.valueToCode(le,"GREEN",D.Order.NONE)||0}, ${v.valueToCode(le,"BLUE",D.Order.NONE)||0})`,D.Order.HIGH]}function We(le,v){const V=v.valueToCode(le,"RED",U.Order.NONE)||0,J=v.valueToCode(le,"GREEN",U.Order.NONE)||0,ne=v.valueToCode(le,"BLUE",U.Order.NONE)||0;return[`${v.provideFunction_("colour_rgb",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($r, $g, $b) {
  $r = round(max(min($r, 100), 0) * 2.55);
  $g = round(max(min($g, 100), 0) * 2.55);
  $b = round(max(min($b, 100), 0) * 2.55);
  $hex = '#';
  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);
  return $hex;
}
`)}(${V}, ${J}, ${ne})`,U.Order.FUNCTION_CALL]}function Ke(le,v){return[v.provideFunction_("colour_rgb",`
def ${v.FUNCTION_NAME_PLACEHOLDER_}(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`)+"("+(v.valueToCode(le,"RED",O.Order.NONE)||0)+", "+(v.valueToCode(le,"GREEN",O.Order.NONE)||0)+", "+(v.valueToCode(le,"BLUE",O.Order.NONE)||0)+")",O.Order.FUNCTION_CALL]}const at=g.common.createBlockDefinitionsFromJsonArray([de]),ct=at[Rt];function Ht(le={}){H(),g.common.defineBlocks(at),le.javascript&&(le.javascript.forBlock[Rt]=Le),le.dart&&(le.dart.forBlock[Rt]=_e,le.dart.addReservedWords("Math")),le.lua&&(le.lua.forBlock[Rt]=be),le.php&&(le.php.forBlock[Rt]=We),le.python&&(le.python.forBlock[Rt]=Ke)}const pt="colour_blend",St={type:pt,message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"};function Et(le,v){const V=v.valueToCode(le,"COLOUR1",f.Order.NONE)||"'#000000'",J=v.valueToCode(le,"COLOUR2",f.Order.NONE)||"'#000000'",ne=v.valueToCode(le,"RATIO",f.Order.NONE)||.5;return[`${v.provideFunction_("colourBlend",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)}(${V}, ${J}, ${ne})`,f.Order.FUNCTION_CALL]}function dt(le,v){const V=v.valueToCode(le,"COLOUR1",I.Order.NONE)||"'#000000'",J=v.valueToCode(le,"COLOUR2",I.Order.NONE)||"'#000000'",ne=v.valueToCode(le,"RATIO",I.Order.NONE)||.5;return v.definitions_.import_dart_math="import 'dart:math' as Math;",[`${v.provideFunction_("colour_blend",`
String ${v.FUNCTION_NAME_PLACEHOLDER_}(String c1, String c2, num ratio) {
  ratio = Math.max(Math.min(ratio, 1), 0);
  int r1 = int.parse('0x\${c1.substring(1, 3)}');
  int g1 = int.parse('0x\${c1.substring(3, 5)}');
  int b1 = int.parse('0x\${c1.substring(5, 7)}');
  int r2 = int.parse('0x\${c2.substring(1, 3)}');
  int g2 = int.parse('0x\${c2.substring(3, 5)}');
  int b2 = int.parse('0x\${c2.substring(5, 7)}');
  num rn = (r1 * (1 - ratio) + r2 * ratio).round();
  String rs = rn.toInt().toRadixString(16);
  num gn = (g1 * (1 - ratio) + g2 * ratio).round();
  String gs = gn.toInt().toRadixString(16);
  num bn = (b1 * (1 - ratio) + b2 * ratio).round();
  String bs = bn.toInt().toRadixString(16);
  rs = '0$rs';
  rs = rs.substring(rs.length - 2);
  gs = '0$gs';
  gs = gs.substring(gs.length - 2);
  bs = '0$bs';
  bs = bs.substring(bs.length - 2);
  return '#$rs$gs$bs';
}
`)}(${V}, ${J}, ${ne})`,I.Order.UNARY_POSTFIX]}function T(le,v){return[`${v.provideFunction_("colour_blend",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio)
  local r1 = tonumber(string.sub(colour1, 2, 3), 16)
  local r2 = tonumber(string.sub(colour2, 2, 3), 16)
  local g1 = tonumber(string.sub(colour1, 4, 5), 16)
  local g2 = tonumber(string.sub(colour2, 4, 5), 16)
  local b1 = tonumber(string.sub(colour1, 6, 7), 16)
  local b2 = tonumber(string.sub(colour2, 6, 7), 16)
  local ratio = math.min(1, math.max(0, ratio))
  local r = math.floor(r1 * (1 - ratio) + r2 * ratio + .5)
  local g = math.floor(g1 * (1 - ratio) + g2 * ratio + .5)
  local b = math.floor(b1 * (1 - ratio) + b2 * ratio + .5)
  return string.format("#%02x%02x%02x", r, g, b)
end
`)}(${v.valueToCode(le,"COLOUR1",D.Order.NONE)||"'#000000'"}, ${v.valueToCode(le,"COLOUR2",D.Order.NONE)||"'#000000'"}, ${v.valueToCode(le,"RATIO",D.Order.NONE)||0})`,D.Order.HIGH]}function ae(le,v){const V=v.valueToCode(le,"COLOUR1",U.Order.NONE)||"'#000000'",J=v.valueToCode(le,"COLOUR2",U.Order.NONE)||"'#000000'",ne=v.valueToCode(le,"RATIO",U.Order.NONE)||.5;return[`${v.provideFunction_("colour_blend",`
function ${v.FUNCTION_NAME_PLACEHOLDER_}($c1, $c2, $ratio) {
  $ratio = max(min($ratio, 1), 0);
  $r1 = hexdec(substr($c1, 1, 2));
  $g1 = hexdec(substr($c1, 3, 2));
  $b1 = hexdec(substr($c1, 5, 2));
  $r2 = hexdec(substr($c2, 1, 2));
  $g2 = hexdec(substr($c2, 3, 2));
  $b2 = hexdec(substr($c2, 5, 2));
  $r = round($r1 * (1 - $ratio) + $r2 * $ratio);
  $g = round($g1 * (1 - $ratio) + $g2 * $ratio);
  $b = round($b1 * (1 - $ratio) + $b2 * $ratio);
  $hex = '#';
  $hex .= str_pad(dechex($r), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($g), 2, '0', STR_PAD_LEFT);
  $hex .= str_pad(dechex($b), 2, '0', STR_PAD_LEFT);
  return $hex;
}
`)}(${V}, ${J}, ${ne})`,U.Order.FUNCTION_CALL]}function Y(le,v){return[`${v.provideFunction_("colour_blend",`
def ${v.FUNCTION_NAME_PLACEHOLDER_}(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`)}(${v.valueToCode(le,"COLOUR1",O.Order.NONE)||"'#000000'"}, ${v.valueToCode(le,"COLOUR2",O.Order.NONE)||"'#000000'"}, ${v.valueToCode(le,"RATIO",O.Order.NONE)||0})`,O.Order.FUNCTION_CALL]}const Te=g.common.createBlockDefinitionsFromJsonArray([St]),ke=Te[pt];function ve(le={}){H(),g.common.defineBlocks(Te),le.javascript&&(le.javascript.forBlock[pt]=Et),le.dart&&(le.dart.forBlock[pt]=dt,le.dart.addReservedWords("Math")),le.lua&&(le.lua.forBlock[pt]=T),le.php&&(le.php.forBlock[pt]=ae),le.python&&(le.python.forBlock[pt]=Y)}function Xe(le={}){Ie(le),Ht(le),Be(le),ve(le)}})(),y})())})(ch)),ch.exports}var KA=SF();mt.colour_hsv_sliders={init:function(){this.appendDummyInput().appendField("hsv ").appendField(new TF.FieldColourHsvSliders("#ff0000"),"COLOUR"),this.setOutput(!0,"Colour"),this.setStyle("colour_blocks")}};$t.forBlock.colour_hsv_sliders=function(i,n){return[n.quote_(i.getFieldValue("COLOUR")),_t.ATOMIC]};KA.installAllBlocks({javascript:$t});mt.controls_wait={init:function(){this.appendValueInput("millis").setCheck("Number").appendField("wait"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("loop_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.controls_wait=function(i,n){return`(await ((m) => {
        return new Promise((r) => setTimeout(() => r(), m));
    })(${n.valueToCode(i,"millis",_t.ATOMIC)}));
`};mt.controls_try={init:function(){this.appendStatementInput("stmt").setCheck(null).appendField("try"),this.setInputsInline(!1),this.setOutput(!0,"Boolean"),this.setStyle("loop_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.controls_try=function(i,n){return[`(await( async() => {
        try {
            ${n.statementToCode(i,"stmt")}
            return true;
        } catch(e) {
            return false;
        }
    })())`,_t.ATOMIC]};mt.controls_wait_until={init:function(){this.appendValueInput("bool").setCheck("Boolean").appendField("wait until"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("loop_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.controls_wait_until=function(i,n){return`await new Promise(r => {
        async function loop() {
            if (${n.valueToCode(i,"bool",_t.ATOMIC)}) {
                r()
                return;
            }
            setTimeout(loop, 50)
        }
        setTimeout(loop)
    });`};mt.json_new={init:function(){this.itemCount_=3,this.setOutput(!0,"Object"),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks"),this.setMutator(new Um.MutatorIcon(["json_kv_mutator"],this)),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(i){this.itemCount_=i.itemCount??3,this.updateShape_()},updateShape_:function(){let i=0;for(;this.getInput(`V${i}`);)this.removeInput(`V${i}`),this.removeInput(`K${i}`),this.removeInput(`A${i}`),i++;this.removeInput("Cont",!0),this.itemCount_===0&&this.appendDummyInput("Cont").appendField(new VA("Empty JSON Object"),"Block");for(let n=0;n<this.itemCount_;n++)this.appendValueInput(`K${n}`).setAlign(Nr.Align.RIGHT).setCheck("String"),this.appendValueInput(`V${n}`).appendField(":"),this.appendEndRowInput(`A${n}`);this.itemCount_>0&&this.getInput("K0")?.appendField("JSON from")},decompose:function(i){const n=i.newBlock("json_new_container");n.initSvg();let o=n.getInput("STACK").connection;for(let s=0;s<this.itemCount_;s++){const l=i.newBlock("json_kv_mutator");l.initSvg(),o.connect(l.previousConnection),o=l.nextConnection}return n},compose:function(i){let n=i.getInputTargetBlock("STACK");const o=[],s=[];for(;n;)o.push(n.valueConnection_??null),s.push(n.keyConnection_??null),n=n.nextConnection?.targetBlock()??null;this.itemCount_=o.length,this.updateShape_();for(let l=0;l<o.length;l++)o[l]&&this.getInput(`V${l}`).connection.connect(o[l]),s[l]&&this.getInput(`K${l}`).connection.connect(s[l])},saveConnections:function(i){let n=i.getInputTargetBlock("STACK"),o=0;for(;n;){const s=this.getInput(`V${o}`);n.valueConnection_=s?.connection?.targetConnection??null;{const l=this.getInput(`K${o}`);n.keyConnection_=l?.connection?.targetConnection??null}o++,n=n.nextConnection?.targetBlock()??null}}};mt.json_new_container={init:function(){this.appendDummyInput("NAME").appendField(new VA("JSON"),"Block"),this.appendStatementInput("STACK"),this.setTooltip(""),this.setHelpUrl(""),this.setMovable(!1),this.setStyle("json_blocks")}};mt.json_kv_mutator={init:function(){this.appendDummyInput("NAME").appendField("Key"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};$t.forBlock.json_new=function(i,n){let o="({";for(let s=0;s<i.itemCount_;s++){const l=n.valueToCode(i,`K${s}`,_t.ATOMIC),p=n.valueToCode(i,`V${s}`,_t.ATOMIC);o+=`${l}: ${p},`}return o+="})",[o,_t.ATOMIC]};mt.json_get={init:function(){this.appendValueInput("JSON").setCheck("Object").appendField("In JSON"),this.appendValueInput("KEY").setCheck("String").appendField("get"),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};$t.forBlock.json_get=function(i,n){const o=n.valueToCode(i,"JSON",_t.ATOMIC),s=n.valueToCode(i,"KEY",_t.ATOMIC);return[`(${o}[${s}])`,_t.ATOMIC]};mt.json_set={init:function(){this.appendValueInput("JSON").setCheck("Object").appendField("In JSON"),this.appendValueInput("KEY").setCheck("String").appendField("set"),this.appendValueInput("VALUE").appendField("to"),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};$t.forBlock.json_set=function(i,n){const o=n.valueToCode(i,"JSON",_t.ATOMIC),s=n.valueToCode(i,"KEY",_t.ATOMIC),l=n.valueToCode(i,"VALUE",_t.ATOMIC);return`${o}[${s}]=${l};`};mt.json_encode={init:function(){this.appendDummyInput().appendField("JSON").appendField(new bo([["parse","parse"],["stringify","stringify"]],i=>(i==="parse"?this.setOutput(!0,"Object"):this.setOutput(!0,"string"),i)),"FUN"),this.appendValueInput("JSON").setCheck("Object"),this.setInputsInline(!0),this.setOutput(!0,"Object"),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};$t.forBlock.json_encode=function(i,n){const o=n.valueToCode(i,"JSON",_t.ATOMIC);return[`(JSON.${i.getFieldValue("FUN")}(${o}))`,_t.ATOMIC]};mt.json_entries={init:function(){this.appendDummyInput().appendField("Get").appendField(new bo([["keys","keys"],["values","values"],["entries","entries"]]),"FUN"),this.appendValueInput("JSON").setCheck("Object").appendField("from"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(""),this.setHelpUrl(""),this.setStyle("json_blocks")}};$t.forBlock.json_entries=function(i,n){const o=n.valueToCode(i,"JSON",_t.ATOMIC);return[`(Object.${i.getFieldValue("FUN")}(${o}))`,_t.ATOMIC]};mt.json_has_key={init:function(){this.appendValueInput("KEY").setCheck("String").appendField("Does key"),this.appendValueInput("OBJ").setCheck("Object").appendField("exist in"),this.setOutput(!0,"Boolean"),this.setInputsInline(!0),this.setStyle("json_blocks")}};$t.forBlock.json_has_key=function(i,n){const o=n.valueToCode(i,"OBJ",_t.ATOMIC);return[`(${i.getFieldValue("KEY")} in ${o})`,_t.ATOMIC]};mt.logic_compare={init:function(){this.appendValueInput("A"),this.appendValueInput("B").appendField(new bo([["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"],["≡","FEQ"],["≢","NFEQ"]]),"OP"),this.setStyle("logic_blocks"),this.setInputsInline(!0),this.setOutput(!0,"Boolean"),this.setHelpUrl(Ou.LOGIC_COMPARE_HELPURL)}};$t.forBlock.logic_compare=function(i,n){const s={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">=",FEQ:"===",NFEQ:"!=="}[i.getFieldValue("OP")],l=s==="=="||s==="!="||s==="==="||s==="!=="?_t.EQUALITY:_t.RELATIONAL,p=n.valueToCode(i,"A",l)||"0",E=n.valueToCode(i,"B",l)||"0";return[p+" "+s+" "+E,l]};mt.logic_switch_case_mutator={init:function(){this.appendDummyInput().appendField("case"),this.setStyle("logic_blocks"),this.setPreviousStatement(!0),this.setNextStatement(!0)}};mt.logic_switch_default_mutator={init:function(){this.appendDummyInput().appendField("default"),this.setStyle("logic_blocks"),this.setPreviousStatement(!0)}};mt.logic_switch_container_mutator={init:function(){this.appendStatementInput("STACK").appendField("Switch"),this.setMovable(!1),this.setStyle("logic_blocks")}};mt.logic_switch={init:function(){this.hasDefault_=!1,this.itemCount_=1,this.appendValueInput("VALUE").appendField("switch"),this.setStyle("logic_blocks"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setMutator(new Um.MutatorIcon(["logic_switch_case_mutator","logic_switch_default_mutator"],this)),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_,hasDefault:this.hasDefault_}},loadExtraState:function(i){this.itemCount_=i.itemCount??1,this.hasDefault_=i.hasDefault??!1,this.updateShape_()},updateShape_(){let i=0;for(;this.getInput(`C${i}`);)this.removeInput(`C${i}`),this.removeInput(`S${i}`),i++;this.removeInput("D",!0),this.removeInput("DI",!0);for(let n=0;n<this.itemCount_;n++)this.appendValueInput(`C${n}`).appendField("case").setAlign(Nr.Align.RIGHT),this.appendStatementInput(`S${n}`);this.hasDefault_&&(this.appendDummyInput("DI").appendField("default").setAlign(Nr.Align.RIGHT),this.appendStatementInput("D"))},decompose:function(i){const n=i.newBlock("logic_switch_container_mutator");n.initSvg();let o=n.getInput("STACK").connection;for(let s=0;s<this.itemCount_;s++){const l=i.newBlock("logic_switch_case_mutator");l.initSvg(),o.connect(l.previousConnection),o=l.nextConnection}if(this.hasDefault_){const s=i.newBlock("logic_switch_default_mutator");s.initSvg(),o.connect(s.previousConnection),o=s.nextConnection}return n},compose:function(i){let n=i.getInputTargetBlock("STACK");const o=[],s=[];let l=null;for(this.hasDefault_=!1;n;){if(n.type==="logic_switch_default_mutator"){this.hasDefault_=!0,l=n.defaultConnection_??null;break}o.push(n.caseConnection_??null),s.push(n.statementConnection_??null),n=n.nextConnection?.targetBlock()??null}this.itemCount_=o.length,this.updateShape_();for(let p=0;p<o.length;p++)o[p]&&this.getInput(`C${p}`).connection.connect(o[p]),s[p]&&this.getInput(`S${p}`).connection.connect(s[p]);l&&this.getInput("D").connection.connect(l)},saveConnections:function(i){let n=i.getInputTargetBlock("STACK"),o=0;for(;n;){if(n.type==="logic_switch_default_mutator"){const l=this.getInput("D");n.defaultConnection_=l?.connection?.targetConnection??null;break}const s=this.getInput(`C${o}`);n.caseConnection_=s?.connection?.targetConnection??null;{const l=this.getInput(`S${o}`);n.statementConnection_=l?.connection?.targetConnection??null}o++,n=n.nextConnection?.targetBlock()??null}}};$t.forBlock.logic_switch=function(i,n){let s=`switch(${n.valueToCode(i,"VALUE",_t.ATOMIC)}) {`;for(let l=0;l<i.itemCount_;l++){const p=n.valueToCode(i,"C"+l,_t.ATOMIC),E=n.statementToCode(i,"S"+l);s+=`case (${p}): {
                ${E}
            }
            `}if(i.hasDefault_){const l=n.statementToCode(i,"D");s+=`default: {
                ${l}
            }
            `}return s+="}",s};mt.logic_switch_expr={init:function(){this.hasDefault_=!1,this.itemCount_=1,this.appendValueInput("VALUE").appendField("switch"),this.appendEndRowInput(),this.setStyle("logic_blocks"),this.setOutput(!0),this.setInputsInline(!0),this.setMutator(new Um.MutatorIcon(["logic_switch_case_mutator","logic_switch_default_mutator"],this)),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_,hasDefault:this.hasDefault_}},loadExtraState:function(i){this.itemCount_=i.itemCount??1,this.hasDefault_=i.hasDefault??!1,this.updateShape_()},updateShape_(){let i=0;for(;this.getInput(`C${i}`);)this.removeInput(`C${i}`),this.removeInput(`S${i}`),this.removeInput(`A${i}`),i++;this.removeInput("D",!0);for(let n=0;n<this.itemCount_;n++)this.appendValueInput(`C${n}`).appendField("case").setAlign(Nr.Align.RIGHT),this.appendValueInput(`S${n}`).setAlign(Nr.Align.RIGHT).appendField(":"),this.appendEndRowInput(`A${n}`);this.hasDefault_&&this.appendValueInput("D").appendField("default").setAlign(Nr.Align.RIGHT)},decompose:function(i){const n=i.newBlock("logic_switch_container_mutator");n.initSvg();let o=n.getInput("STACK").connection;for(let s=0;s<this.itemCount_;s++){const l=i.newBlock("logic_switch_case_mutator");l.initSvg(),o.connect(l.previousConnection),o=l.nextConnection}if(this.hasDefault_){const s=i.newBlock("logic_switch_default_mutator");s.initSvg(),o.connect(s.previousConnection),o=s.nextConnection}return n},compose:function(i){let n=i.getInputTargetBlock("STACK");const o=[],s=[];let l=null;for(this.hasDefault_=!1;n;){if(n.type==="logic_switch_default_mutator"){this.hasDefault_=!0,l=n.defaultConnection_??null;break}o.push(n.caseConnection_??null),s.push(n.statementConnection_??null),n=n.nextConnection?.targetBlock()??null}this.itemCount_=o.length,this.updateShape_();for(let p=0;p<o.length;p++)o[p]&&this.getInput(`C${p}`).connection.connect(o[p]),s[p]&&this.getInput(`S${p}`).connection.connect(s[p]);l&&this.getInput("D").connection.connect(l)},saveConnections:function(i){let n=i.getInputTargetBlock("STACK"),o=0;for(;n;){if(n.type==="logic_switch_default_mutator"){const l=this.getInput("D");n.defaultConnection_=l?.connection?.targetConnection??null;break}const s=this.getInput(`C${o}`);n.caseConnection_=s?.connection?.targetConnection??null;{const l=this.getInput(`S${o}`);n.statementConnection_=l?.connection?.targetConnection??null}o++,n=n.nextConnection?.targetBlock()??null}}};$t.forBlock.logic_switch_expr=function(i,n){let s=`(await (async ()=>{switch(${n.valueToCode(i,"VALUE",_t.ATOMIC)}) {`;for(let l=0;l<i.itemCount_;l++){const p=n.valueToCode(i,"C"+l,_t.ATOMIC),E=n.valueToCode(i,"S"+l,_t.ATOMIC);s+=`case (${p}): {
                         return ${E};
                     }
                     `}if(i.hasDefault_){const l=n.valueToCode(i,"D",_t.ATOMIC);s+=`default: {
                         return ${l}
                     }
                     `}return s+="}})())",s};mt.logic_switch_break={init:function(){this.appendDummyInput().appendField("break"),this.setStyle("logic_blocks"),this.setPreviousStatement(!0)}};$t.forBlock.logic_switch_break=function(){return`break;
`};mt.logic_boolean={init:function(){this.appendDummyInput().appendField(new bo([[Ou.LOGIC_BOOLEAN_TRUE,"TRUE"],[Ou.LOGIC_BOOLEAN_FALSE,"FALSE"],["random","RANDOM"]]),"BOOL"),this.setOutput(!0,"Boolean"),this.setStyle("logic_blocks"),this.setTooltip(Ou.LOGIC_BOOLEAN_TOOLTIP),this.setHelpUrl(Ou.LOGIC_BOOLEAN_HELPURL)}};$t.forBlock.logic_boolean=function(i,n){const o=i.getFieldValue("BOOL");return o==="RANDOM"?["(Math.round(Math.random()) === 1)",_t.ATOMIC]:[o==="TRUE"?"true":"false",_t.ATOMIC]};mt.eval={init:function(){this.appendValueInput("eval").setCheck("String").appendField("eval"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("advanced_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.eval=function(i,n){return`eval(${n.valueToCode(i,"eval",_t.ATOMIC)});
`};mt.eval_ret={init:function(){this.appendValueInput("eval").setCheck("String").appendField("eval"),this.setOutput(!0,null),this.setStyle("advanced_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.eval_ret=function(i,n){return[`eval(${n.valueToCode(i,"eval",_t.ATOMIC)})`,_t.ATOMIC]};mt.raw={init:function(){this.appendDummyInput().appendField("raw").appendField(new Ym.FieldMultilineInput,"raw"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("advanced_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.raw=function(i){return i.getFieldValue("raw")};mt.raw_ret={init:function(){this.appendDummyInput().appendField("raw").appendField(new Ym.FieldMultilineInput,"raw"),this.setOutput(!0,null),this.setStyle("advanced_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.raw_ret=function(i){return[i.getFieldValue("raw"),_t.ATOMIC]};mt.inline_function_a={init:function(){this.appendDummyInput().appendField("inline function"),this.appendStatementInput("statement").setCheck(null),this.setStyle("procedure_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.inline_function_a=function(i,n){return`(await (async () => {
        ${n.statementToCode(i,"statement")}
    })());
`};mt.inline_function_b={init:function(){this.appendDummyInput().appendField("inline function"),this.appendStatementInput("statement").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("procedure_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.inline_function_b=function(i,n){return`(await (async () => {
        ${n.statementToCode(i,"statement")}
    })());
`};mt.inline_function_c={init:function(){this.appendDummyInput().appendField("inline function"),this.appendStatementInput("statement").setCheck(null),this.setOutput(!0,null),this.setStyle("procedure_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.inline_function_c=function(i,n){return[`(await (async () => {
        ${n.statementToCode(i,"statement")}
    })())`,_t.ATOMIC]};mt.return_block_function={init:function(){this.appendValueInput("value").setCheck(null).appendField("return"),this.setPreviousStatement(!0,null),this.setStyle("procedure_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.return_block_function=function(i,n){return`return ${n.valueToCode(i,"value",_t.ATOMIC)};`};function zA(i,n){const o=n.getProcedureName(i.getFieldValue("NAME"));let s="";n.STATEMENT_PREFIX&&(s+=n.injectId(n.STATEMENT_PREFIX,i)),n.STATEMENT_SUFFIX&&(s+=n.injectId(n.STATEMENT_SUFFIX,i)),s&&(s=n.prefixLines(s,n.INDENT));let l="";n.INFINITE_LOOP_TRAP&&(l=n.prefixLines(n.injectId(n.INFINITE_LOOP_TRAP,i),n.INDENT));let p="";i.getInput("STACK")&&(p=n.statementToCode(i,"STACK"));let E="";i.getInput("RETURN")&&(E=n.valueToCode(i,"RETURN",_t.NONE)||"");let $="";p&&E&&($=s),E&&(E=n.INDENT+"return "+E+`;
`);const R=[],M=i.getVars();for(let y=0;y<M.length;y++)R[y]=n.getVariableName(M[y]);let L="async function "+o+"("+R.join(", ")+`) {
`+s+l+p+$+E+"}";return L=n.scrub_(i,L),n.definitions_["%"+o]=L,null}$t.forBlock.procedures_defreturn=zA;$t.forBlock.procedures_defnoreturn=zA;mt.browser_console={init:function(){this.appendValueInput("VALUE").appendField("console").appendField(new bo([["log","log"],["warn","warn"],["error","error"],["info","info"]]),"FUN"),this.setStyle("browser_blocks"),this.setPreviousStatement(!0),this.setNextStatement(!0)}};$t.forBlock.browser_console=function(i,n){const o=i.getFieldValue("FUN"),s=n.valueToCode(i,"VALUE",_t.ATOMIC);return`console.${o}(${s});
`};mt.browser_alert={init:function(){this.appendValueInput("alert").setCheck("String").appendField("alert"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("browser_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.browser_alert=function(i,n){return`alert(${n.valueToCode(i,"alert",_t.ATOMIC)});
`};mt.browser_confirm={init:function(){this.appendValueInput("val").setCheck("String").appendField("confirm"),this.setOutput(!0,"Boolean"),this.setStyle("browser_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.browser_confirm=function(i,n){return[`confirm(${n.valueToCode(i,"val",_t.ATOMIC)})`,_t.ATOMIC]};mt.browser_prompt={init:function(){this.appendValueInput("val").setCheck("String").appendField("prompt"),this.setOutput(!0,"String"),this.setStyle("browser_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.browser_prompt=function(i,n){return[`prompt(${n.valueToCode(i,"val",_t.ATOMIC)})`,_t.ATOMIC]};const gt=new class{end="";very_end="";menus=0;extensions={};get Extension_ID_DEFAULT(){return this.Extension_ID||"extensionid"}get Extension_ID(){return Kt("#ExtensionID").value()}set Extension_ID(i){Kt("#ExtensionID").value(i)}get Extension_Name_DEFAULT(){return this.Extension_Name||"Extension Name"}get Extension_Name(){return Kt("#ExtensionName").value()}set Extension_Name(i){Kt("#ExtensionName").value(i)}get Extension_Color(){return Kt("#extcolor").value()}set Extension_Color(i){Kt("#extcolor").value(i)}get Force_Unsandboxed(){return Kt("#unsandboxed").checked()}set Force_Unsandboxed(i){Kt("#unsandboxed").checked(i)}};mt.create_block={init:function(){this.appendDummyInput().setAlign(Nr.Align.LEFT).appendField("Create Block"),this.appendDummyInput().appendField("ID").appendField(new zi("ID"),"ID"),this.appendDummyInput().appendField("Text").appendField(new zi("Text"),"Text"),this.appendDummyInput().appendField("Show monitor").appendField(new Hu("TRUE"),"Show"),this.appendDummyInput().appendField("type").appendField(new bo([["block","Block"],["reporter","Reporter"],["boolean","boolean"]]),"type"),this.appendDummyInput().setAlign(Nr.Align.RIGHT).appendField("Inputs"),this.appendStatementInput("Inputs").setCheck(null),this.appendDummyInput().setAlign(Nr.Align.RIGHT).appendField("function"),this.appendStatementInput("Function").setCheck(null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.create_block=function(i,n){const o=`${gt.Extension_ID_DEFAULT}_Block_${i.getFieldValue("ID")}`,s=i.getFieldValue("Text"),l=i.getFieldValue("Show")=="TRUE",p=i.getFieldValue("type"),E=n.statementToCode(i,"Inputs"),$=n.statementToCode(i,"Function");var R="";switch(p){case"Block":R="COMMAND";break;case"Reporter":R="REPORTER";break;case"boolean":R="BOOLEAN";break}return`
    blocks.push({
        opcode: "${o}",
        blockType: Scratch.BlockType.${R},
        text: "${s}",
        arguments: {
            ${E}
        },
        disableMonitor: ${!l}
    });
    Extension.prototype["${o}"] = async function(args, util) {
        ${$}
    };
    `};mt.get_input={init:function(){this.appendDummyInput().appendField("get Input").appendField(new zi("inputID"),"ID"),this.setOutput(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.get_input=function(i){return[`args["${i.getFieldValue("ID")}"]`,_t.ATOMIC]};mt.create_hat={init:function(){this.appendDummyInput().appendField("Create Hat"),this.appendDummyInput().appendField("ID").appendField(new zi("ID"),"ID"),this.appendDummyInput().appendField("Text").appendField(new zi("Text"),"Text"),this.appendDummyInput().appendField("Inputs"),this.appendStatementInput("Inputs").setCheck(null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.create_hat=function(i,n){const o=`${gt.Extension_ID_DEFAULT}_Hat_${i.getFieldValue("ID")}`,s=i.getFieldValue("Text"),l=n.statementToCode(i,"Inputs");return`blocks.push({
        blockType: Scratch.BlockType.EVENT,
        opcode: "${o}",
        text: "${s}",
        arguments: {
            ${l}
        },
        isEdgeActivated: false
    })`};mt.call_hat={init:function(){this.appendDummyInput().appendField("Call Hat").appendField(new zi("ID"),"ID"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.call_hat=function(i){const n=`${gt.Extension_ID_DEFAULT}_Hat_${i.getFieldValue("ID")}`;if(i.getTopStackBlock().type==="create_block")var o=`util.startHats('${gt.Extension_ID_DEFAULT}_${n}');
`;else var o=`Scratch.vm.runtime.startHats('${gt.Extension_ID_DEFAULT}_${n}');
`;return o};mt.call_hat_with_args={init:function(){this.appendDummyInput().appendField("Call Hat").appendField(new zi("ID"),"ID"),this.appendValueInput("Args").setCheck("Object").appendField("with Args"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.call_hat_with_args=function(i,n){const o=`${gt.Extension_ID_DEFAULT}_Hat_${i.getFieldValue("ID")}`,s=n.valueToCode(i,"Args",_t.ATOMIC);if(i.getTopStackBlock().type==="create_block")var l=`util.startHats('${gt.Extension_ID_DEFAULT}_${o}', ${s});
`;else var l=`Scratch.vm.runtime.startHats('${gt.Extension_ID_DEFAULT}_${o}', ${s});
`;return l};mt.create_input={init:function(){this.appendDummyInput().setAlign(Nr.Align.LEFT).appendField("Create Input"),this.appendDummyInput().appendField("ID").appendField(new zi("ID"),"ID"),this.appendDummyInput().appendField("type").appendField(new bo([["string","String"],["number","Number"],["boolean","Boolean"],["empty","Empty"],["color","Color"],["costume","Costume"],["sound","Sound"],["angle","Angle"],["note","Note"],["matrix","Matrix"]]),"Type"),this.appendDummyInput().appendField("default text").appendField(new zi(""),"_default"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.create_input=function(i){const n=i.getFieldValue("ID"),o=i.getFieldValue("Type"),s=i.getFieldValue("_default");return`"${n}": {
        type: Scratch.ArgumentType.${(()=>{switch(o){case"String":return"STRING";case"Number":return"NUMBER";case"Boolean":return"BOOLEAN";case"Empty":return"empty";case"Color":return"COLOR";case"Costume":return"COSTUME";case"Sound":return"SOUND";case"Angle":return"ANGLE";case"Note":return"NOTE";case"Matrix":return"MATRIX"}})()},
        defaultValue: \`${s}\`
    },
`};mt.input_menu={init:function(){this.appendDummyInput().appendField("Create Input Menu"),this.appendDummyInput().appendField("ID").appendField(new zi("ID"),"ID"),this.appendDummyInput().appendField("Accept Reporters").appendField(new Hu("TRUE"),"REPORTERS"),this.appendValueInput("MENU").setCheck("Array").appendField("menu"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.input_menu=function(i,n){const o=i.getFieldValue("ID"),s=i.getFieldValue("REPORTERS")==="TRUE",l=n.valueToCode(i,"MENU",_t.ATOMIC),p=`"${o}": {
        type: Scratch.ArgumentType.STRING,
        menu: "${gt.Extension_ID_DEFAULT}_menu_${gt.menus}",
    },
`;return gt.end+=`
    menus["${gt.Extension_ID_DEFAULT}_menu_${gt.menus}"] = {
        acceptReporters: ${s},
        items: ${l},
    };
    
`,gt.menus++,p};mt.create_menu={init:function(){this.appendDummyInput().setAlign(Nr.Align.LEFT).appendField("Create Menu"),this.appendDummyInput().appendField("ID").appendField(new zi("ID"),"ID"),this.appendDummyInput().appendField("Accept Reporters").appendField(new Hu("TRUE"),"REPORTERS"),this.appendValueInput("MENU").setCheck("Array").appendField("menu"),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.create_menu=function(i,n){const o=i.getFieldValue("ID"),s=i.getFieldValue("REPORTERS")==="TRUE",l=n.valueToCode(i,"MENU",_t.ATOMIC);return`menus["${gt.Extension_ID_DEFAULT}_customMenu_${o}"] = {
        acceptReporters: ${s},
        items: ${l},
    };`};mt.create_input_menu={init:function(){this.appendDummyInput().appendField("create Input from menu"),this.appendDummyInput().appendField("ID").appendField(new zi("ID"),"ID"),this.appendDummyInput().appendField("Menu ID").appendField(new zi("MenuID"),"MenuID"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.create_input_menu=function(i){const n=i.getFieldValue("ID"),o=i.getFieldValue("MenuID");return`"${n}": {
        type: Scratch.ArgumentType.STRING,
        menu: "${gt.Extension_ID_DEFAULT}_customMenu_${o}",
    },
`};mt.create_dynamic_menu={init:function(){this.appendDummyInput().setAlign(Nr.Align.LEFT).appendField("Create Dynamic Menu"),this.appendDummyInput().appendField("ID").appendField(new zi("ID"),"ID"),this.appendDummyInput().appendField("Accept Reporters").appendField(new Hu("TRUE"),"Accept"),this.appendStatementInput("Function").setCheck(null).appendField("Function"),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.create_dynamic_menu=function(i,n){const o=i.getFieldValue("ID"),s=i.getFieldValue("Accept")==="TRUE",l=n.statementToCode(i,"Function");return`
    menus["${gt.Extension_ID_DEFAULT}_customMenu_${o}"] = {
        acceptReporters: ${s},
        items: "${gt.Extension_ID_DEFAULT}_customMenu_${o}_func",
    };
    Extension.prototype["${gt.Extension_ID_DEFAULT}_customMenu_${o}_func"] = async function() {
        ${l}
    };
    `};mt.menu_item={init:function(){this.appendDummyInput().appendField("menu item text:").appendField(new zi("text"),"TEXT").appendField(" value:").appendField(new zi("value"),"VALUE"),this.setOutput(!0,"Object"),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.menu_item=function(i){const n=i.getFieldValue("TEXT"),o=i.getFieldValue("VALUE");return[`{text:"${n}", value: "${o}"}`,_t.ATOMIC]};mt.return_block={init:function(){this.appendValueInput("value").setCheck(null).appendField("return"),this.setPreviousStatement(!0,null),this.setStyle("scratch_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.return_block=function(i,n){return`return ${n.valueToCode(i,"value",_t.NONE)};`};mt.create_label={init:function(){this.appendDummyInput().appendField("create label with text").appendField(new zi("text"),"text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.create_label=function(i){const n=i.getFieldValue("text"),o="label_"+crypto.randomUUID();return gt.end+=`
    blocks.push({
        opcode: "${o}",
        blockType: Scratch.BlockType.LABEL,
        text: "${n}",
    });
    `,`"${o}", `};mt.create_button={init:function(){this.appendDummyInput().appendField("create button"),this.appendDummyInput().appendField("text").appendField(new zi("text"),"text"),this.appendStatementInput("on_click").setCheck(null).appendField("on click"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.create_button=function(i,n){const o=i.getFieldValue("text"),s=n.statementToCode(i,"on_click"),l="button_"+crypto.randomUUID();return gt.end+=`
    blocks.push({
        opcode: "${l}",
        func: "${l}",
        blockType: Scratch.BlockType.BUTTON,
        text: "${o}",
      });
      Extension.prototype["${l}"] = async function(util) {
        ${s}
      };`,`"${l}", `};mt.order_category={init:function(){this.appendDummyInput().appendField("Order Category"),this.appendStatementInput("types").setCheck(null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.order_category=function(i,n){const o=n.statementToCode(i,"types");return gt.very_end+=`
    (() => {
    const temp = [
        ${o}
    ];
    blocks.sort((a, b) => {
        a = temp.indexOf(a.opcode);
        b = temp.indexOf(b.opcode);
        if(a === -1) {
          if(b === -1) {
            return 0;
          } else {
            return 1;
          }
        } else if(b === -1) {
          return -1;
        }
        return a - b;
      })
})();`,""};mt.use_block={init:function(){this.appendDummyInput().appendField("use block id:").appendField(new zi("id"),"id"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.use_block=function(i){const n=i.getFieldValue("id");return`"${gt.Extension_ID_DEFAULT}_Block_${n}",`};mt.use_hat={init:function(){this.appendDummyInput().appendField("use hat id:").appendField(new zi("id"),"id"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setStyle("category_blocks"),this.setTooltip(""),this.setHelpUrl("")}};$t.forBlock.use_hat=function(i){const n=i.getFieldValue("id");return`"${gt.Extension_ID_DEFAULT}_Hat_${n}",`};var Vg={exports:{}},Su={},Vd={exports:{}},Hg={},Gg={},Iv;function jm(){if(Iv)return Gg;Iv=1;function i(s){this.__parent=s,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}i.prototype.clone_empty=function(){var s=new i(this.__parent);return s.set_indent(this.__indent_count,this.__alignment_count),s},i.prototype.item=function(s){return s<0?this.__items[this.__items.length+s]:this.__items[s]},i.prototype.has_match=function(s){for(var l=this.__items.length-1;l>=0;l--)if(this.__items[l].match(s))return!0;return!1},i.prototype.set_indent=function(s,l){this.is_empty()&&(this.__indent_count=s||0,this.__alignment_count=l||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},i.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},i.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},i.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var s=this.__parent.current_line;return s.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),s.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),s.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,s.__items[0]===" "&&(s.__items.splice(0,1),s.__character_count-=1),!0}return!1},i.prototype.is_empty=function(){return this.__items.length===0},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(s){this.__items.push(s);var l=s.lastIndexOf(`
`);l!==-1?this.__character_count=s.length-l:this.__character_count+=s.length},i.prototype.pop=function(){var s=null;return this.is_empty()||(s=this.__items.pop(),this.__character_count-=s.length),s},i.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},i.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},i.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var s="";return this.is_empty()?this.__parent.indent_empty_lines&&(s=this.__parent.get_indent_string(this.__indent_count)):(s=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),s+=this.__items.join("")),s};function n(s,l){this.__cache=[""],this.__indent_size=s.indent_size,this.__indent_string=s.indent_char,s.indent_with_tabs||(this.__indent_string=new Array(s.indent_size+1).join(s.indent_char)),l=l||"",s.indent_level>0&&(l=new Array(s.indent_level+1).join(this.__indent_string)),this.__base_string=l,this.__base_string_length=l.length}n.prototype.get_indent_size=function(s,l){var p=this.__base_string_length;return l=l||0,s<0&&(p=0),p+=s*this.__indent_size,p+=l,p},n.prototype.get_indent_string=function(s,l){var p=this.__base_string;return l=l||0,s<0&&(s=0,p=""),l+=s*this.__indent_size,this.__ensure_cache(l),p+=this.__cache[l],p},n.prototype.__ensure_cache=function(s){for(;s>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var s=this.__cache.length,l=0,p="";this.__indent_size&&s>=this.__indent_size&&(l=Math.floor(s/this.__indent_size),s-=l*this.__indent_size,p=new Array(l+1).join(this.__indent_string)),s&&(p+=new Array(s+1).join(" ")),this.__cache.push(p)};function o(s,l){this.__indent_cache=new n(s,l),this.raw=!1,this._end_with_newline=s.end_with_newline,this.indent_size=s.indent_size,this.wrap_line_length=s.wrap_line_length,this.indent_empty_lines=s.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new i(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}return o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(s,l){return this.__indent_cache.get_indent_string(s,l)},o.prototype.get_indent_size=function(s,l){return this.__indent_cache.get_indent_size(s,l)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(s){return this.is_empty()||!s&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(s){this.trim(!0);var l=this.current_line.pop();l&&(l[l.length-1]===`
`&&(l=l.replace(/\n+$/g,"")),this.current_line.push(l)),this._end_with_newline&&this.__add_outputline();var p=this.__lines.join(`
`);return s!==`
`&&(p=p.replace(/[\n]/g,s)),p},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(s,l){return s=s||0,l=l||0,this.next_line.set_indent(s,l),this.__lines.length>1?(this.current_line.set_indent(s,l),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(s){for(var l=0;l<s.newlines;l++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(s.whitespace_before),this.current_line.push(s.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(s){this.__add_space_before_token(),this.current_line.push(s),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},o.prototype.remove_indent=function(s){for(var l=this.__lines.length;s<l;)this.__lines[s]._remove_indent(),s++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(s){for(s=s===void 0?!1:s,this.current_line.trim();s&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(s,l){for(var p=this.__lines.length-2;p>=0;){var E=this.__lines[p];if(E.is_empty())break;if(E.item(0).indexOf(s)!==0&&E.item(-1)!==l){this.__lines.splice(p+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}p--}},Gg.Output=o,Gg}var Wg={},vv;function YA(){if(vv)return Wg;vv=1;function i(n,o,s,l){this.type=n,this.text=o,this.comments_before=null,this.newlines=s||0,this.whitespace_before=l||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}return Wg.Token=i,Wg}var Xg={},Av;function jA(){return Av||(Av=1,(function(i){var n="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",o="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",s="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",l="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",p="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",E="(?:"+p+"|["+n+s+"])",$="(?:"+p+"|["+o+s+l+"])*";i.identifier=new RegExp(E+$,"g"),i.identifierStart=new RegExp(E),i.identifierMatch=new RegExp("(?:"+p+"|["+o+s+l+"])+"),i.newline=/[\n\r\u2028\u2029]/,i.lineBreak=new RegExp(`\r
|`+i.newline.source),i.allLineBreaks=new RegExp(i.lineBreak.source,"g")})(Xg)),Xg}var Kg={},Iu={},Ov;function qm(){if(Ov)return Iu;Ov=1;function i(s,l){this.raw_options=n(s,l),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","angular","django","erb","handlebars","php","smarty"],["auto"])}i.prototype._get_array=function(s,l){var p=this.raw_options[s],E=l||[];return typeof p=="object"?p!==null&&typeof p.concat=="function"&&(E=p.concat()):typeof p=="string"&&(E=p.split(/[^a-zA-Z0-9_\/\-]+/)),E},i.prototype._get_boolean=function(s,l){var p=this.raw_options[s],E=p===void 0?!!l:!!p;return E},i.prototype._get_characters=function(s,l){var p=this.raw_options[s],E=l||"";return typeof p=="string"&&(E=p.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),E},i.prototype._get_number=function(s,l){var p=this.raw_options[s];l=parseInt(l,10),isNaN(l)&&(l=0);var E=parseInt(p,10);return isNaN(E)&&(E=l),E},i.prototype._get_selection=function(s,l,p){var E=this._get_selection_list(s,l,p);if(E.length!==1)throw new Error("Invalid Option Value: The option '"+s+`' can only be one of the following values:
`+l+`
You passed in: '`+this.raw_options[s]+"'");return E[0]},i.prototype._get_selection_list=function(s,l,p){if(!l||l.length===0)throw new Error("Selection list cannot be empty.");if(p=p||[l[0]],!this._is_valid_selection(p,l))throw new Error("Invalid Default Value!");var E=this._get_array(s,p);if(!this._is_valid_selection(E,l))throw new Error("Invalid Option Value: The option '"+s+`' can contain only the following values:
`+l+`
You passed in: '`+this.raw_options[s]+"'");return E},i.prototype._is_valid_selection=function(s,l){return s.length&&l.length&&!s.some(function(p){return l.indexOf(p)===-1})};function n(s,l){var p={};s=o(s);var E;for(E in s)E!==l&&(p[E]=s[E]);if(l&&s[l])for(E in s[l])p[E]=s[l][E];return p}function o(s){var l={},p;for(p in s){var E=p.replace(/-/g,"_");l[E]=s[p]}return l}return Iu.Options=i,Iu.normalizeOpts=o,Iu.mergeOpts=n,Iu}var Cv;function qA(){if(Cv)return Kg;Cv=1;var i=qm().Options,n=["before-newline","after-newline","preserve-newline"];function o(s){i.call(this,s,"js");var l=this.raw_options.brace_style||null;l==="expand-strict"?this.raw_options.brace_style="expand":l==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var p=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var E=0;E<p.length;E++)p[E]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=p[E];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",n),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}return o.prototype=new i,Kg.Options=o,Kg}var el={},zg={},yv;function Jm(){if(yv)return zg;yv=1;var i=RegExp.prototype.hasOwnProperty("sticky");function n(o){this.__input=o||"",this.__input_length=this.__input.length,this.__position=0}return n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var o=null;return this.hasNext()&&(o=this.__input.charAt(this.__position),this.__position+=1),o},n.prototype.peek=function(o){var s=null;return o=o||0,o+=this.__position,o>=0&&o<this.__input_length&&(s=this.__input.charAt(o)),s},n.prototype.__match=function(o,s){o.lastIndex=s;var l=o.exec(this.__input);return l&&!(i&&o.sticky)&&l.index!==s&&(l=null),l},n.prototype.test=function(o,s){return s=s||0,s+=this.__position,s>=0&&s<this.__input_length?!!this.__match(o,s):!1},n.prototype.testChar=function(o,s){var l=this.peek(s);return o.lastIndex=0,l!==null&&o.test(l)},n.prototype.match=function(o){var s=this.__match(o,this.__position);return s?this.__position+=s[0].length:s=null,s},n.prototype.read=function(o,s,l){var p="",E;return o&&(E=this.match(o),E&&(p+=E[0])),s&&(E||!o)&&(p+=this.readUntil(s,l)),p},n.prototype.readUntil=function(o,s){var l="",p=this.__position;o.lastIndex=this.__position;var E=o.exec(this.__input);return E?(p=E.index,s&&(p+=E[0].length)):p=this.__input_length,l=this.__input.substring(this.__position,p),this.__position=p,l},n.prototype.readUntilAfter=function(o){return this.readUntil(o,!0)},n.prototype.get_regexp=function(o,s){var l=null,p="g";return s&&i&&(p="y"),typeof o=="string"&&o!==""?l=new RegExp(o,p):o&&(l=new RegExp(o.source,p)),l},n.prototype.get_literal_regexp=function(o){return RegExp(o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},n.prototype.peekUntilAfter=function(o){var s=this.__position,l=this.readUntilAfter(o);return this.__position=s,l},n.prototype.lookBack=function(o){var s=this.__position-1;return s>=o.length&&this.__input.substring(s-o.length,s).toLowerCase()===o},zg.InputScanner=n,zg}var Hd={},Yg={},Rv;function IF(){if(Rv)return Yg;Rv=1;function i(n){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=n}return i.prototype.restart=function(){this.__position=0},i.prototype.isEmpty=function(){return this.__tokens_length===0},i.prototype.hasNext=function(){return this.__position<this.__tokens_length},i.prototype.next=function(){var n=null;return this.hasNext()&&(n=this.__tokens[this.__position],this.__position+=1),n},i.prototype.peek=function(n){var o=null;return n=n||0,n+=this.__position,n>=0&&n<this.__tokens_length&&(o=this.__tokens[n]),o},i.prototype.add=function(n){this.__parent_token&&(n.parent=this.__parent_token),this.__tokens.push(n),this.__tokens_length+=1},Yg.TokenStream=i,Yg}var jg={},qg={},Nv;function Xh(){if(Nv)return qg;Nv=1;function i(n,o){this._input=n,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,o&&(this._starting_pattern=this._input.get_regexp(o._starting_pattern,!0),this._match_pattern=this._input.get_regexp(o._match_pattern,!0),this._until_pattern=this._input.get_regexp(o._until_pattern),this._until_after=o._until_after)}return i.prototype.read=function(){var n=this._input.read(this._starting_pattern);return(!this._starting_pattern||n)&&(n+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),n},i.prototype.read_match=function(){return this._input.match(this._match_pattern)},i.prototype.until_after=function(n){var o=this._create();return o._until_after=!0,o._until_pattern=this._input.get_regexp(n),o._update(),o},i.prototype.until=function(n){var o=this._create();return o._until_after=!1,o._until_pattern=this._input.get_regexp(n),o._update(),o},i.prototype.starting_with=function(n){var o=this._create();return o._starting_pattern=this._input.get_regexp(n,!0),o._update(),o},i.prototype.matching=function(n){var o=this._create();return o._match_pattern=this._input.get_regexp(n,!0),o._update(),o},i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){},qg.Pattern=i,qg}var Dv;function vF(){if(Dv)return jg;Dv=1;var i=Xh().Pattern;function n(o,s){i.call(this,o,s),s?this._line_regexp=this._input.get_regexp(s._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}return n.prototype=new i,n.prototype.__set_whitespace_patterns=function(o,s){o+="\\t ",s+="\\n\\r",this._match_pattern=this._input.get_regexp("["+o+s+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+s+"]")},n.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var o=this._input.read(this._match_pattern);if(o===" ")this.whitespace_before_token=" ";else if(o){var s=this.__split(this._newline_regexp,o);this.newline_count=s.length-1,this.whitespace_before_token=s[this.newline_count]}return o},n.prototype.matching=function(o,s){var l=this._create();return l.__set_whitespace_patterns(o,s),l._update(),l},n.prototype._create=function(){return new n(this._input,this)},n.prototype.__split=function(o,s){o.lastIndex=0;for(var l=0,p=[],E=o.exec(s);E;)p.push(s.substring(l,E.index)),l=E.index+E[0].length,E=o.exec(s);return l<s.length?p.push(s.substring(l,s.length)):p.push(""),p},jg.WhitespacePattern=n,jg}var kv;function Ah(){if(kv)return Hd;kv=1;var i=Jm().InputScanner,n=YA().Token,o=IF().TokenStream,s=vF().WhitespacePattern,l={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},p=function(E,$){this._input=new i(E),this._options=$||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};return p.prototype.tokenize=function(){this._input.restart(),this.__tokens=new o,this._reset();for(var E,$=new n(l.START,""),R=null,M=[],L=new o;$.type!==l.EOF;){for(E=this._get_next_token($,R);this._is_comment(E);)L.add(E),E=this._get_next_token($,R);L.isEmpty()||(E.comments_before=L,L=new o),E.parent=R,this._is_opening(E)?(M.push(R),R=E):R&&this._is_closing(E,R)&&(E.opened=R,R.closed=E,R=M.pop(),E.parent=R),E.previous=$,$.next=E,this.__tokens.add(E),$=E}return this.__tokens},p.prototype._is_first_token=function(){return this.__tokens.isEmpty()},p.prototype._reset=function(){},p.prototype._get_next_token=function(E,$){this._readWhitespace();var R=this._input.read(/.+/g);return R?this._create_token(l.RAW,R):this._create_token(l.EOF,"")},p.prototype._is_comment=function(E){return!1},p.prototype._is_opening=function(E){return!1},p.prototype._is_closing=function(E,$){return!1},p.prototype._create_token=function(E,$){var R=new n(E,$,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return R},p.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},Hd.Tokenizer=p,Hd.TOKEN=l,Hd}var Jg={},Lv;function Zm(){if(Lv)return Jg;Lv=1;function i(n,o){n=typeof n=="string"?n:n.source,o=typeof o=="string"?o:o.source,this.__directives_block_pattern=new RegExp(n+/ beautify( \w+[:]\w+)+ /.source+o,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(n+/\sbeautify\signore:end\s/.source+o,"g")}return i.prototype.get_directives=function(n){if(!n.match(this.__directives_block_pattern))return null;var o={};this.__directive_pattern.lastIndex=0;for(var s=this.__directive_pattern.exec(n);s;)o[s[1]]=s[2],s=this.__directive_pattern.exec(n);return o},i.prototype.readIgnored=function(n){return n.readUntilAfter(this.__directives_end_ignore_pattern)},Jg.Directives=i,Jg}var Zg={},wv;function JA(){if(wv)return Zg;wv=1;var i=Xh().Pattern,n={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1,angular:!1};function o(s,l){i.call(this,s,l),this.__template_pattern=null,this._disabled=Object.assign({},n),this._excluded=Object.assign({},n),l&&(this.__template_pattern=this._input.get_regexp(l.__template_pattern),this._excluded=Object.assign(this._excluded,l._excluded),this._disabled=Object.assign(this._disabled,l._disabled));var p=new i(s);this.__patterns={handlebars_comment:p.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:p.starting_with(/{{{/).until_after(/}}}/),handlebars:p.starting_with(/{{/).until_after(/}}/),php:p.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:p.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:p.starting_with(/{%/).until_after(/%}/),django_value:p.starting_with(/{{/).until_after(/}}/),django_comment:p.starting_with(/{#/).until_after(/#}/),smarty:p.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:p.starting_with(/{\*/).until_after(/\*}/),smarty_literal:p.starting_with(/{literal}/).until_after(/{\/literal}/)}}return o.prototype=new i,o.prototype._create=function(){return new o(this._input,this)},o.prototype._update=function(){this.__set_templated_pattern()},o.prototype.disable=function(s){var l=this._create();return l._disabled[s]=!0,l._update(),l},o.prototype.read_options=function(s){var l=this._create();for(var p in n)l._disabled[p]=s.templating.indexOf(p)===-1;return l._update(),l},o.prototype.exclude=function(s){var l=this._create();return l._excluded[s]=!0,l._update(),l},o.prototype.read=function(){var s="";this._match_pattern?s=this._input.read(this._starting_pattern):s=this._input.read(this._starting_pattern,this.__template_pattern);for(var l=this._read_template();l;)this._match_pattern?l+=this._input.read(this._match_pattern):l+=this._input.readUntil(this.__template_pattern),s+=l,l=this._read_template();return this._until_after&&(s+=this._input.readUntilAfter(this._until_pattern)),s},o.prototype.__set_templated_pattern=function(){var s=[];this._disabled.php||s.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||s.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.angular||s.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||s.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(s.push(this.__patterns.django._starting_pattern.source),s.push(this.__patterns.django_value._starting_pattern.source),s.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||s.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&s.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+s.join("|")+")")},o.prototype._read_template=function(){var s="",l=this._input.peek();if(l==="<"){var p=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&p==="?"&&(s=s||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&p==="%"&&(s=s||this.__patterns.erb.read())}else l==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(s=s||this.__patterns.handlebars_comment.read(),s=s||this.__patterns.handlebars_unescaped.read(),s=s||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(s=s||this.__patterns.django_value.read()),this._excluded.django||(s=s||this.__patterns.django_comment.read(),s=s||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(s=s||this.__patterns.smarty_comment.read(),s=s||this.__patterns.smarty_literal.read(),s=s||this.__patterns.smarty.read()));return s},Zg.TemplatablePattern=o,Zg}var Mv;function Gd(){if(Mv)return el;Mv=1;var i=Jm().InputScanner,n=Ah().Tokenizer,o=Ah().TOKEN,s=Zm().Directives,l=jA(),p=Xh().Pattern,E=JA().TemplatablePattern;function $(f,I){return I.indexOf(f)!==-1}var R={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:o.START,RAW:o.RAW,EOF:o.EOF},M=new s(/\/\*/,/\*\//),L=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,y=/[0-9]/,N=/[^\d\.]/,P=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),F=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";F=F.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),F="\\?\\.(?!\\d) "+F,F=F.replace(/ /g,"|");var K=new RegExp(F),g="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),d=g.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),C=new RegExp("^(?:"+d.join("|")+")$"),x,k=function(f,I){n.call(this,f,I),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var D=new p(this._input),U=new E(this._input).read_options(this._options);this.__patterns={template:U,identifier:U.starting_with(l.identifier).matching(l.identifierMatch),number:D.matching(L),punct:D.matching(K),comment:D.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:D.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:D.matching(/<!--/),html_comment_end:D.matching(/-->/),include:D.starting_with(/#include/).until_after(l.lineBreak),shebang:D.starting_with(/#!/).until_after(l.lineBreak),xml:D.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:U.until(/['\\\n\r\u2028\u2029]/),double_quote:U.until(/["\\\n\r\u2028\u2029]/),template_text:U.until(/[`\\$]/),template_expression:U.until(/[`}\\]/)}};k.prototype=new n,k.prototype._is_comment=function(f){return f.type===R.COMMENT||f.type===R.BLOCK_COMMENT||f.type===R.UNKNOWN},k.prototype._is_opening=function(f){return f.type===R.START_BLOCK||f.type===R.START_EXPR},k.prototype._is_closing=function(f,I){return(f.type===R.END_BLOCK||f.type===R.END_EXPR)&&I&&(f.text==="]"&&I.text==="["||f.text===")"&&I.text==="("||f.text==="}"&&I.text==="{")},k.prototype._reset=function(){x=!1},k.prototype._get_next_token=function(f,I){var D=null;this._readWhitespace();var U=this._input.peek();return U===null?this._create_token(R.EOF,""):(D=D||this._read_non_javascript(U),D=D||this._read_string(U),D=D||this._read_pair(U,this._input.peek(1)),D=D||this._read_word(f),D=D||this._read_singles(U),D=D||this._read_comment(U),D=D||this._read_regexp(U,f),D=D||this._read_xml(U,f),D=D||this._read_punctuation(),D=D||this._create_token(R.UNKNOWN,this._input.next()),D)},k.prototype._read_word=function(f){var I;if(I=this.__patterns.identifier.read(),I!=="")return I=I.replace(l.allLineBreaks,`
`),!(f.type===R.DOT||f.type===R.RESERVED&&(f.text==="set"||f.text==="get"))&&C.test(I)?(I==="in"||I==="of")&&(f.type===R.WORD||f.type===R.STRING)?this._create_token(R.OPERATOR,I):this._create_token(R.RESERVED,I):this._create_token(R.WORD,I);if(I=this.__patterns.number.read(),I!=="")return this._create_token(R.WORD,I)},k.prototype._read_singles=function(f){var I=null;return f==="("||f==="["?I=this._create_token(R.START_EXPR,f):f===")"||f==="]"?I=this._create_token(R.END_EXPR,f):f==="{"?I=this._create_token(R.START_BLOCK,f):f==="}"?I=this._create_token(R.END_BLOCK,f):f===";"?I=this._create_token(R.SEMICOLON,f):f==="."&&N.test(this._input.peek(1))?I=this._create_token(R.DOT,f):f===","&&(I=this._create_token(R.COMMA,f)),I&&this._input.next(),I},k.prototype._read_pair=function(f,I){var D=null;return f==="#"&&I==="{"&&(D=this._create_token(R.START_BLOCK,f+I)),D&&(this._input.next(),this._input.next()),D},k.prototype._read_punctuation=function(){var f=this.__patterns.punct.read();if(f!=="")return f==="="?this._create_token(R.EQUALS,f):f==="?."?this._create_token(R.DOT,f):this._create_token(R.OPERATOR,f)},k.prototype._read_non_javascript=function(f){var I="";if(f==="#"){if(this._is_first_token()&&(I=this.__patterns.shebang.read(),I))return this._create_token(R.UNKNOWN,I.trim()+`
`);if(I=this.__patterns.include.read(),I)return this._create_token(R.UNKNOWN,I.trim()+`
`);f=this._input.next();var D="#";if(this._input.hasNext()&&this._input.testChar(y)){do f=this._input.next(),D+=f;while(this._input.hasNext()&&f!=="#"&&f!=="=");return f==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(D+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(D+="{}",this._input.next(),this._input.next())),this._create_token(R.WORD,D)}this._input.back()}else if(f==="<"&&this._is_first_token()){if(I=this.__patterns.html_comment_start.read(),I){for(;this._input.hasNext()&&!this._input.testChar(l.newline);)I+=this._input.next();return x=!0,this._create_token(R.COMMENT,I)}}else if(x&&f==="-"&&(I=this.__patterns.html_comment_end.read(),I))return x=!1,this._create_token(R.COMMENT,I);return null},k.prototype._read_comment=function(f){var I=null;if(f==="/"){var D="";if(this._input.peek(1)==="*"){D=this.__patterns.block_comment.read();var U=M.get_directives(D);U&&U.ignore==="start"&&(D+=M.readIgnored(this._input)),D=D.replace(l.allLineBreaks,`
`),I=this._create_token(R.BLOCK_COMMENT,D),I.directives=U}else this._input.peek(1)==="/"&&(D=this.__patterns.comment.read(),I=this._create_token(R.COMMENT,D))}return I},k.prototype._read_string=function(f){if(f==="`"||f==="'"||f==='"'){var I=this._input.next();return this.has_char_escapes=!1,f==="`"?I+=this._read_string_recursive("`",!0,"${"):I+=this._read_string_recursive(f),this.has_char_escapes&&this._options.unescape_strings&&(I=H(I)),this._input.peek()===f&&(I+=this._input.next()),I=I.replace(l.allLineBreaks,`
`),this._create_token(R.STRING,I)}return null},k.prototype._allow_regexp_or_xml=function(f){return f.type===R.RESERVED&&$(f.text,["return","case","throw","else","do","typeof","yield"])||f.type===R.END_EXPR&&f.text===")"&&f.opened.previous.type===R.RESERVED&&$(f.opened.previous.text,["if","while","for"])||$(f.type,[R.COMMENT,R.START_EXPR,R.START_BLOCK,R.START,R.END_BLOCK,R.OPERATOR,R.EQUALS,R.EOF,R.SEMICOLON,R.COMMA])},k.prototype._read_regexp=function(f,I){if(f==="/"&&this._allow_regexp_or_xml(I)){for(var D=this._input.next(),U=!1,O=!1;this._input.hasNext()&&(U||O||this._input.peek()!==f)&&!this._input.testChar(l.newline);)D+=this._input.peek(),U?U=!1:(U=this._input.peek()==="\\",this._input.peek()==="["?O=!0:this._input.peek()==="]"&&(O=!1)),this._input.next();return this._input.peek()===f&&(D+=this._input.next(),D+=this._input.read(l.identifier)),this._create_token(R.STRING,D)}return null},k.prototype._read_xml=function(f,I){if(this._options.e4x&&f==="<"&&this._allow_regexp_or_xml(I)){var D="",U=this.__patterns.xml.read_match();if(U){for(var O=U[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),X=O.indexOf("{")===0,W=0;U;){var re=!!U[1],se=U[2],Ue=!!U[U.length-1]||se.slice(0,8)==="![CDATA[";if(!Ue&&(se===O||X&&se.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(re?--W:++W),D+=U[0],W<=0)break;U=this.__patterns.xml.read_match()}return U||(D+=this._input.match(/[\s\S]*/g)[0]),D=D.replace(l.allLineBreaks,`
`),this._create_token(R.STRING,D)}}return null};function H(f){for(var I="",D=0,U=new i(f),O=null;U.hasNext();)if(O=U.match(/([\s]|[^\\]|\\\\)+/g),O&&(I+=O[0]),U.peek()==="\\"){if(U.next(),U.peek()==="x")O=U.match(/x([0-9A-Fa-f]{2})/g);else if(U.peek()==="u")O=U.match(/u([0-9A-Fa-f]{4})/g),O||(O=U.match(/u\{([0-9A-Fa-f]+)\}/g));else{I+="\\",U.hasNext()&&(I+=U.next());continue}if(!O||(D=parseInt(O[1],16),D>126&&D<=255&&O[0].indexOf("x")===0))return f;D>=0&&D<32||D>1114111?I+="\\"+O[0]:D===34||D===39||D===92?I+="\\"+String.fromCharCode(D):I+=String.fromCharCode(D)}return I}return k.prototype._read_string_recursive=function(f,I,D){var U,O;f==="'"?O=this.__patterns.single_quote:f==='"'?O=this.__patterns.double_quote:f==="`"?O=this.__patterns.template_text:f==="}"&&(O=this.__patterns.template_expression);for(var X=O.read(),W="";this._input.hasNext();){if(W=this._input.next(),W===f||!I&&l.newline.test(W)){this._input.back();break}else W==="\\"&&this._input.hasNext()?(U=this._input.peek(),U==="x"||U==="u"?this.has_char_escapes=!0:U==="\r"&&this._input.peek(1)===`
`&&this._input.next(),W+=this._input.next()):D&&(D==="${"&&W==="$"&&this._input.peek()==="{"&&(W+=this._input.next()),D===W&&(f==="`"?W+=this._read_string_recursive("}",I,"`"):W+=this._read_string_recursive("`",I,"${"),this._input.hasNext()&&(W+=this._input.next())));W+=O.read(),X+=W}return X},el.Tokenizer=k,el.TOKEN=R,el.positionable_operators=P.slice(),el.line_starters=g.slice(),el}var xv;function AF(){if(xv)return Hg;xv=1;var i=jm().Output,n=YA().Token,o=jA(),s=qA().Options,l=Gd().Tokenizer,p=Gd().line_starters,E=Gd().positionable_operators,$=Gd().TOKEN;function R(O,X){return X.indexOf(O)!==-1}function M(O){return O.replace(/^\s+/g,"")}function L(O){for(var X={},W=0;W<O.length;W++)X[O[W].replace(/-/g,"_")]=O[W];return X}function y(O,X){return O&&O.type===$.RESERVED&&O.text===X}function N(O,X){return O&&O.type===$.RESERVED&&R(O.text,X)}var P=["case","return","do","if","throw","else","await","break","continue","async"],F=["before-newline","after-newline","preserve-newline"],K=L(F),g=[K.before_newline,K.preserve_newline],d={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function C(O,X){X.multiline_frame||X.mode===d.ForInitializer||X.mode===d.Conditional||O.remove_indent(X.start_line_index)}function x(O){O=O.replace(o.allLineBreaks,`
`);for(var X=[],W=O.indexOf(`
`);W!==-1;)X.push(O.substring(0,W)),O=O.substring(W+1),W=O.indexOf(`
`);return O.length&&X.push(O),X}function k(O){return O===d.ArrayLiteral}function H(O){return R(O,[d.Expression,d.ForInitializer,d.Conditional])}function f(O,X){for(var W=0;W<O.length;W++){var re=O[W].trim();if(re.charAt(0)!==X)return!1}return!0}function I(O,X){for(var W=0,re=O.length,se;W<re;W++)if(se=O[W],se&&se.indexOf(X)!==0)return!1;return!0}function D(O,X){X=X||{},this._source_text=O||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new s(X)}D.prototype.create_flags=function(O,X){var W=0;O&&(W=O.indentation_level,!this._output.just_added_newline()&&O.line_indent_level>W&&(W=O.line_indent_level));var re={mode:X,parent:O,last_token:O?O.last_token:new n($.START_BLOCK,""),last_word:O?O.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:W,alignment:0,line_indent_level:O?O.line_indent_level:W,start_line_index:this._output.get_line_number(),ternary_depth:0};return re},D.prototype._reset=function(O){var X=O.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new i(this._options,X),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(d.BlockStatement);var W=new l(O,this._options);return this._tokens=W.tokenize(),O},D.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var O,X=this._reset(this._source_text),W=this._options.eol;this._options.eol==="auto"&&(W=`
`,X&&o.lineBreak.test(X||"")&&(W=X.match(o.lineBreak)[0]));for(var re=this._tokens.next();re;)this.handle_token(re),this._last_last_text=this._flags.last_token.text,this._flags.last_token=re,re=this._tokens.next();return O=this._output.get_code(W),O},D.prototype.handle_token=function(O,X){O.type===$.START_EXPR?this.handle_start_expr(O):O.type===$.END_EXPR?this.handle_end_expr(O):O.type===$.START_BLOCK?this.handle_start_block(O):O.type===$.END_BLOCK?this.handle_end_block(O):O.type===$.WORD?this.handle_word(O):O.type===$.RESERVED?this.handle_word(O):O.type===$.SEMICOLON?this.handle_semicolon(O):O.type===$.STRING?this.handle_string(O):O.type===$.EQUALS?this.handle_equals(O):O.type===$.OPERATOR?this.handle_operator(O):O.type===$.COMMA?this.handle_comma(O):O.type===$.BLOCK_COMMENT?this.handle_block_comment(O,X):O.type===$.COMMENT?this.handle_comment(O,X):O.type===$.DOT?this.handle_dot(O):O.type===$.EOF?this.handle_eof(O):O.type===$.UNKNOWN?this.handle_unknown(O,X):this.handle_unknown(O,X)},D.prototype.handle_whitespace_and_comments=function(O,X){var W=O.newlines,re=this._options.keep_array_indentation&&k(this._flags.mode);if(O.comments_before)for(var se=O.comments_before.next();se;)this.handle_whitespace_and_comments(se,X),this.handle_token(se,X),se=O.comments_before.next();if(re)for(var Ue=0;Ue<W;Ue+=1)this.print_newline(Ue>0,X);else if(this._options.max_preserve_newlines&&W>this._options.max_preserve_newlines&&(W=this._options.max_preserve_newlines),this._options.preserve_newlines&&W>1){this.print_newline(!1,X);for(var me=1;me<W;me+=1)this.print_newline(!0,X)}};var U=["async","break","continue","return","throw","yield"];return D.prototype.allow_wrap_or_preserved_newline=function(O,X){if(X=X===void 0?!1:X,!this._output.just_added_newline()){var W=this._options.preserve_newlines&&O.newlines||X,re=R(this._flags.last_token.text,E)||R(O.text,E);if(re){var se=R(this._flags.last_token.text,E)&&R(this._options.operator_position,g)||R(O.text,E);W=W&&se}if(W)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(N(this._flags.last_token,U))return;this._output.set_wrap_point()}}},D.prototype.print_newline=function(O,X){if(!X&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==$.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var W=this._tokens.peek();this._flags.mode===d.Statement&&!(this._flags.if_block&&y(W,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(O)&&(this._flags.multiline_frame=!0)},D.prototype.print_token_line_indentation=function(O){this._output.just_added_newline()&&(this._options.keep_array_indentation&&O.newlines&&(O.text==="["||k(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(O.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},D.prototype.print_token=function(O){if(this._output.raw){this._output.add_raw_token(O);return}if(this._options.comma_first&&O.previous&&O.previous.type===$.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var X=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(X),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(O),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(O),this._output.non_breaking_space=!0,this._output.add_token(O.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)},D.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},D.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},D.prototype.set_mode=function(O){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,O),this._flags=this.create_flags(this._previous_flags,O),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},D.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===d.Statement&&C(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},D.prototype.start_of_object_property=function(){return this._flags.parent.mode===d.ObjectLiteral&&this._flags.mode===d.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||N(this._flags.last_token,["get","set"]))},D.prototype.start_of_statement=function(O){var X=!1;return X=X||N(this._flags.last_token,["var","let","const"])&&O.type===$.WORD,X=X||y(this._flags.last_token,"do"),X=X||!(this._flags.parent.mode===d.ObjectLiteral&&this._flags.mode===d.Statement)&&N(this._flags.last_token,U)&&!O.newlines,X=X||y(this._flags.last_token,"else")&&!(y(O,"if")&&!O.comments_before),X=X||this._flags.last_token.type===$.END_EXPR&&(this._previous_flags.mode===d.ForInitializer||this._previous_flags.mode===d.Conditional),X=X||this._flags.last_token.type===$.WORD&&this._flags.mode===d.BlockStatement&&!this._flags.in_case&&!(O.text==="--"||O.text==="++")&&this._last_last_text!=="function"&&O.type!==$.WORD&&O.type!==$.RESERVED,X=X||this._flags.mode===d.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||N(this._flags.last_token,["get","set"])),X?(this.set_mode(d.Statement),this.indent(),this.handle_whitespace_and_comments(O,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(O,N(O,["do","for","if","while"])),!0):!1},D.prototype.handle_start_expr=function(O){this.start_of_statement(O)||this.handle_whitespace_and_comments(O);var X=d.Expression;if(O.text==="["){if(this._flags.last_token.type===$.WORD||this._flags.last_token.text===")"){N(this._flags.last_token,p)&&(this._output.space_before_token=!0),this.print_token(O),this.set_mode(X),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}X=d.ArrayLiteral,k(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),R(this._flags.last_token.type,[$.START_EXPR,$.END_EXPR,$.WORD,$.OPERATOR,$.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===$.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,X=d.ForInitializer):R(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,X=d.Conditional):R(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&O.whitespace_before===""?this._output.space_before_token=!1:(R(this._flags.last_token.text,p)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===$.EQUALS||this._flags.last_token.type===$.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(O);else if(this._flags.last_token.type===$.WORD){this._output.space_before_token=!1;var W=this._tokens.peek(-3);if(this._options.space_after_named_function&&W){var re=this._tokens.peek(-4);N(W,["async","function"])||W.text==="*"&&N(re,["async","function"])?this._output.space_before_token=!0:this._flags.mode===d.ObjectLiteral?(W.text==="{"||W.text===","||W.text==="*"&&(re.text==="{"||re.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(O);(this._flags.last_token.type===$.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(R(this._last_last_text,["function","yield"])||this._flags.mode===d.ObjectLiteral&&R(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===$.START_BLOCK?this.print_newline():(this._flags.last_token.type===$.END_EXPR||this._flags.last_token.type===$.START_EXPR||this._flags.last_token.type===$.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===$.COMMA)&&this.allow_wrap_or_preserved_newline(O,O.newlines),this.print_token(O),this.set_mode(X),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},D.prototype.handle_end_expr=function(O){for(;this._flags.mode===d.Statement;)this.restore_mode();this.handle_whitespace_and_comments(O),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(O,O.text==="]"&&k(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===$.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(O),this.restore_mode(),C(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===d.Conditional&&(this._previous_flags.mode=d.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},D.prototype.handle_start_block=function(O){this.handle_whitespace_and_comments(O);var X=this._tokens.peek(),W=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===$.END_EXPR?(this.set_mode(d.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(d.BlockStatement):W&&(R(W.text,[":",","])&&R(X.type,[$.STRING,$.WORD,$.RESERVED])||R(X.text,["get","set","..."])&&R(W.type,[$.WORD,$.RESERVED]))?R(this._last_last_text,["class","interface"])&&!R(W.text,[":",","])?this.set_mode(d.BlockStatement):this.set_mode(d.ObjectLiteral):this._flags.last_token.type===$.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(d.BlockStatement):R(this._flags.last_token.type,[$.EQUALS,$.START_EXPR,$.COMMA,$.OPERATOR])||N(this._flags.last_token,["return","throw","import","default"])?this.set_mode(d.ObjectLiteral):this.set_mode(d.BlockStatement),this._flags.last_token&&N(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var re=!X.comments_before&&X.text==="}",se=re&&this._flags.last_word==="function"&&this._flags.last_token.type===$.END_EXPR;if(this._options.brace_preserve_inline){var Ue=0,me=null;this._flags.inline_frame=!0;do if(Ue+=1,me=this._tokens.peek(Ue-1),me.newlines){this._flags.inline_frame=!1;break}while(me.type!==$.EOF&&!(me.type===$.END_BLOCK&&me.opened===O))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&O.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==$.OPERATOR&&(se||this._flags.last_token.type===$.EQUALS||N(this._flags.last_token,P)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(k(this._previous_flags.mode)&&(this._flags.last_token.type===$.START_EXPR||this._flags.last_token.type===$.COMMA)&&((this._flags.last_token.type===$.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===$.COMMA||this._flags.last_token.type===$.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(O),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==$.OPERATOR&&this._flags.last_token.type!==$.START_EXPR&&(R(this._flags.last_token.type,[$.START_BLOCK,$.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(O),this.indent(),!re&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()},D.prototype.handle_end_block=function(O){for(this.handle_whitespace_and_comments(O);this._flags.mode===d.Statement;)this.restore_mode();var X=this._flags.last_token.type===$.START_BLOCK;this._flags.inline_frame&&!X?this._output.space_before_token=!0:this._options.brace_style==="expand"?X||this.print_newline():X||(k(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(O)},D.prototype.handle_word=function(O){if(O.type===$.RESERVED){if(R(O.text,["set","get"])&&this._flags.mode!==d.ObjectLiteral)O.type=$.WORD;else if(O.text==="import"&&R(this._tokens.peek().text,["(","."]))O.type=$.WORD;else if(R(O.text,["as","from"])&&!this._flags.import_block)O.type=$.WORD;else if(this._flags.mode===d.ObjectLiteral){var X=this._tokens.peek();X.text===":"&&(O.type=$.WORD)}}if(this.start_of_statement(O)?N(this._flags.last_token,["var","let","const"])&&O.type===$.WORD&&(this._flags.declaration_statement=!0):O.newlines&&!H(this._flags.mode)&&(this._flags.last_token.type!==$.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==$.EQUALS&&(this._options.preserve_newlines||!N(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(O),this.print_newline()):this.handle_whitespace_and_comments(O),this._flags.do_block&&!this._flags.do_while)if(y(O,"while")){this._output.space_before_token=!0,this.print_token(O),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&y(O,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===d.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&N(O,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(O),this._flags.in_case=!0;return}if((this._flags.last_token.type===$.COMMA||this._flags.last_token.type===$.START_EXPR||this._flags.last_token.type===$.EQUALS||this._flags.last_token.type===$.OPERATOR)&&!this.start_of_object_property()&&!(R(this._flags.last_token.text,["+","-"])&&this._last_last_text===":"&&this._flags.parent.mode===d.ObjectLiteral)&&this.allow_wrap_or_preserved_newline(O),y(O,"function")){(R(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(R(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===$.OPERATOR))&&!this._output.just_added_blankline()&&!O.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===$.RESERVED||this._flags.last_token.type===$.WORD?N(this._flags.last_token,["get","set","new","export"])||N(this._flags.last_token,U)?this._output.space_before_token=!0:y(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===$.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(H(this._flags.mode)||k(this._flags.mode))||this.print_newline(),this.print_token(O),this._flags.last_word=O.text;return}var W="NONE";if(this._flags.last_token.type===$.END_BLOCK?this._previous_flags.inline_frame?W="SPACE":N(O,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&O.newlines?W="NEWLINE":(W="SPACE",this._output.space_before_token=!0):W="NEWLINE":this._flags.last_token.type===$.SEMICOLON&&this._flags.mode===d.BlockStatement?W="NEWLINE":this._flags.last_token.type===$.SEMICOLON&&H(this._flags.mode)?W="SPACE":this._flags.last_token.type===$.STRING?W="NEWLINE":this._flags.last_token.type===$.RESERVED||this._flags.last_token.type===$.WORD||this._flags.last_token.text==="*"&&(R(this._last_last_text,["function","yield"])||this._flags.mode===d.ObjectLiteral&&R(this._last_last_text,["{",","]))?W="SPACE":this._flags.last_token.type===$.START_BLOCK?this._flags.inline_frame?W="SPACE":W="NEWLINE":this._flags.last_token.type===$.END_EXPR&&(this._output.space_before_token=!0,W="NEWLINE"),N(O,p)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?W="SPACE":W="NEWLINE"),N(O,["else","catch","finally"]))if((!(this._flags.last_token.type===$.END_BLOCK&&this._previous_flags.mode===d.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&O.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var re=this._output.current_line;re.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else W==="NEWLINE"?N(this._flags.last_token,P)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&N(O,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==$.END_EXPR?(this._flags.last_token.type!==$.START_EXPR||!N(O,["var","let","const"]))&&this._flags.last_token.text!==":"&&(y(O,"if")&&y(O.previous,"else")?this._output.space_before_token=!0:this.print_newline()):N(O,p)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&k(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():W==="SPACE"&&(this._output.space_before_token=!0);O.previous&&(O.previous.type===$.WORD||O.previous.type===$.RESERVED)&&(this._output.space_before_token=!0),this.print_token(O),this._flags.last_word=O.text,O.type===$.RESERVED&&(O.text==="do"?this._flags.do_block=!0:O.text==="if"?this._flags.if_block=!0:O.text==="import"?this._flags.import_block=!0:this._flags.import_block&&y(O,"from")&&(this._flags.import_block=!1))},D.prototype.handle_semicolon=function(O){this.start_of_statement(O)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(O);for(var X=this._tokens.peek();this._flags.mode===d.Statement&&!(this._flags.if_block&&y(X,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(O)},D.prototype.handle_string=function(O){O.text.startsWith("`")&&O.newlines===0&&O.whitespace_before===""&&(O.previous.text===")"||this._flags.last_token.type===$.WORD)||(this.start_of_statement(O)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(O),this._flags.last_token.type===$.RESERVED||this._flags.last_token.type===$.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===$.COMMA||this._flags.last_token.type===$.START_EXPR||this._flags.last_token.type===$.EQUALS||this._flags.last_token.type===$.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(O):O.text.startsWith("`")&&this._flags.last_token.type===$.END_EXPR&&(O.previous.text==="]"||O.previous.text===")")&&O.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(O)},D.prototype.handle_equals=function(O){this.start_of_statement(O)||this.handle_whitespace_and_comments(O),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(O),this._output.space_before_token=!0},D.prototype.handle_comma=function(O){this.handle_whitespace_and_comments(O,!0),this.print_token(O),this._output.space_before_token=!0,this._flags.declaration_statement?(H(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(O)):this._flags.mode===d.ObjectLiteral||this._flags.mode===d.Statement&&this._flags.parent.mode===d.ObjectLiteral?(this._flags.mode===d.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(O)},D.prototype.handle_operator=function(O){var X=O.text==="*"&&(N(this._flags.last_token,["function","yield"])||R(this._flags.last_token.type,[$.START_BLOCK,$.COMMA,$.END_BLOCK,$.SEMICOLON])),W=R(O.text,["-","+"])&&(R(this._flags.last_token.type,[$.START_BLOCK,$.START_EXPR,$.EQUALS,$.OPERATOR])||R(this._flags.last_token.text,p)||this._flags.last_token.text===",");if(!this.start_of_statement(O)){var re=!X;this.handle_whitespace_and_comments(O,re)}if(O.text==="*"&&this._flags.last_token.type===$.DOT){this.print_token(O);return}if(O.text==="::"){this.print_token(O);return}if(R(O.text,["-","+"])&&this.start_of_object_property()){this.print_token(O);return}if(this._flags.last_token.type===$.OPERATOR&&R(this._options.operator_position,g)&&this.allow_wrap_or_preserved_newline(O),O.text===":"&&this._flags.in_case){this.print_token(O),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==$.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var se=!0,Ue=!0,me=!1;if(O.text===":"?this._flags.ternary_depth===0?se=!1:(this._flags.ternary_depth-=1,me=!0):O.text==="?"&&(this._flags.ternary_depth+=1),!W&&!X&&this._options.preserve_newlines&&R(O.text,E)){var Se=O.text===":",xe=Se&&me,Ce=Se&&!me;switch(this._options.operator_position){case K.before_newline:this._output.space_before_token=!Ce,this.print_token(O),(!Se||xe)&&this.allow_wrap_or_preserved_newline(O),this._output.space_before_token=!0;return;case K.after_newline:this._output.space_before_token=!0,!Se||xe?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(O):this._output.space_before_token=!1,this.print_token(O),this._output.space_before_token=!0;return;case K.preserve_newline:Ce||this.allow_wrap_or_preserved_newline(O),se=!(this._output.just_added_newline()||Ce),this._output.space_before_token=se,this.print_token(O),this._output.space_before_token=!0;return}}if(X){this.allow_wrap_or_preserved_newline(O),se=!1;var Ie=this._tokens.peek();Ue=Ie&&R(Ie.type,[$.WORD,$.RESERVED])}else if(O.text==="...")this.allow_wrap_or_preserved_newline(O),se=this._flags.last_token.type===$.START_BLOCK,Ue=!1;else if(R(O.text,["--","++","!","~"])||W){if((this._flags.last_token.type===$.COMMA||this._flags.last_token.type===$.START_EXPR)&&this.allow_wrap_or_preserved_newline(O),se=!1,Ue=!1,O.newlines&&(O.text==="--"||O.text==="++"||O.text==="~")){var je=N(this._flags.last_token,P)&&O.newlines;je&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(je,!0)}this._flags.last_token.text===";"&&H(this._flags.mode)&&(se=!0),this._flags.last_token.type===$.RESERVED?se=!0:this._flags.last_token.type===$.END_EXPR?se=!(this._flags.last_token.text==="]"&&(O.text==="--"||O.text==="++")):this._flags.last_token.type===$.OPERATOR&&(se=R(O.text,["--","-","++","+"])&&R(this._flags.last_token.text,["--","-","++","+"]),R(O.text,["+","-"])&&R(this._flags.last_token.text,["--","++"])&&(Ue=!0)),(this._flags.mode===d.BlockStatement&&!this._flags.inline_frame||this._flags.mode===d.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||se,this.print_token(O),this._output.space_before_token=Ue},D.prototype.handle_block_comment=function(O,X){if(this._output.raw){this._output.add_raw_token(O),O.directives&&O.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(O.directives){this.print_newline(!1,X),this.print_token(O),O.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!o.newline.test(O.text)&&!O.newlines){this._output.space_before_token=!0,this.print_token(O),this._output.space_before_token=!0;return}else this.print_block_commment(O,X)},D.prototype.print_block_commment=function(O,X){var W=x(O.text),re,se=!1,Ue=!1,me=O.whitespace_before,Se=me.length;if(this.print_newline(!1,X),this.print_token_line_indentation(O),this._output.add_token(W[0]),this.print_newline(!1,X),W.length>1){for(W=W.slice(1),se=f(W,"*"),Ue=I(W,me),se&&(this._flags.alignment=1),re=0;re<W.length;re++)se?(this.print_token_line_indentation(O),this._output.add_token(M(W[re]))):Ue&&W[re]?(this.print_token_line_indentation(O),this._output.add_token(W[re].substring(Se))):(this._output.current_line.set_indent(-1),this._output.add_token(W[re])),this.print_newline(!1,X);this._flags.alignment=0}},D.prototype.handle_comment=function(O,X){O.newlines?this.print_newline(!1,X):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(O),this.print_newline(!1,X)},D.prototype.handle_dot=function(O){this.start_of_statement(O)||this.handle_whitespace_and_comments(O,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),N(this._flags.last_token,P)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(O,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(O)},D.prototype.handle_unknown=function(O,X){this.print_token(O),O.text[O.text.length-1]===`
`&&this.print_newline(!1,X)},D.prototype.handle_eof=function(O){for(;this._flags.mode===d.Statement;)this.restore_mode();this.handle_whitespace_and_comments(O)},Hg.Beautifier=D,Hg}var Fv;function OF(){if(Fv)return Vd.exports;Fv=1;var i=AF().Beautifier,n=qA().Options;function o(s,l){var p=new i(s,l);return p.beautify()}return Vd.exports=o,Vd.exports.defaultOptions=function(){return new n},Vd.exports}var Wd={exports:{}},Qg={},em={},Pv;function ZA(){if(Pv)return em;Pv=1;var i=qm().Options;function n(o){i.call(this,o,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var s=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||s;var l=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var p=0;p<l.length;p++)l[p]!=="expand"?this.brace_style="collapse":this.brace_style=l[p]}return n.prototype=new i,em.Options=n,em}var Bv;function CF(){if(Bv)return Qg;Bv=1;var i=ZA().Options,n=jm().Output,o=Jm().InputScanner,s=Zm().Directives,l=new s(/\/\*/,/\*\//),p=/\r\n|[\r\n]/,E=/\r\n|[\r\n]/g,$=/\s/,R=/(?:\s|\n)+/g,M=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,L=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function y(N,P){this._source_text=N||"",this._options=new i(P),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}return y.prototype.eatString=function(N){var P="";for(this._ch=this._input.next();this._ch;){if(P+=this._ch,this._ch==="\\")P+=this._input.next();else if(N.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return P},y.prototype.eatWhitespace=function(N){for(var P=$.test(this._input.peek()),F=0;$.test(this._input.peek());)this._ch=this._input.next(),N&&this._ch===`
`&&(F===0||F<this._options.max_preserve_newlines)&&(F++,this._output.add_new_line(!0));return P},y.prototype.foundNestedPseudoClass=function(){for(var N=0,P=1,F=this._input.peek(P);F;){if(F==="{")return!0;if(F==="(")N+=1;else if(F===")"){if(N===0)return!1;N-=1}else if(F===";"||F==="}")return!1;P++,F=this._input.peek(P)}return!1},y.prototype.print_string=function(N){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(N)},y.prototype.preserveSingleSpace=function(N){N&&(this._output.space_before_token=!0)},y.prototype.indent=function(){this._indentLevel++},y.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},y.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var N=this._source_text,P=this._options.eol;P==="auto"&&(P=`
`,N&&p.test(N||"")&&(P=N.match(p)[0])),N=N.replace(E,`
`);var F=N.match(/^[\t ]*/)[0];this._output=new n(this._options,F),this._input=new o(N),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var K=0,g=!1,d=!1,C=!1,x=!1,k=!1,H=this._ch,f=!1,I,D,U;I=this._input.read(R),D=I!=="",U=H,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),H=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var O=this._input.read(M),X=l.get_directives(O);X&&X.ignore==="start"&&(O+=l.readIgnored(this._input)),this.print_string(O),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(L)),this.eatWhitespace(!0);else if(this._ch==="$"){this.preserveSingleSpace(D),this.print_string(this._ch);var W=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);W.match(/[ :]$/)&&(W=this.eatString(": ").replace(/\s+$/,""),this.print_string(W),this._output.space_before_token=!0),K===0&&W.indexOf(":")!==-1&&(d=!0,this.indent())}else if(this._ch==="@")if(this.preserveSingleSpace(D),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var re=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);re.match(/[ :]$/)&&(re=this.eatString(": ").replace(/\s+$/,""),this.print_string(re),this._output.space_before_token=!0),K===0&&re.indexOf(":")!==-1?(d=!0,this.indent()):re in this.NESTED_AT_RULE?(this._nestedLevel+=1,re in this.CONDITIONAL_GROUP_RULE&&(C=!0)):K===0&&!d&&(x=!0)}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(D),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")d&&(d=!1,this.outdent()),x=!1,C?(C=!1,g=this._indentLevel>=this._nestedLevel):g=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&g&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(U==="("?this._output.space_before_token=!1:U!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),U==="{"&&this._output.trim(!0),d&&(this.outdent(),d=!1),this.print_string(this._ch),g=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var se=0;se<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;se++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[se])){f=!0;break}(g||C)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!x&&K===0?(this.print_string(":"),d||(d=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var Ue=U==='"'||U==="'";this.preserveSingleSpace(Ue||D),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")f=!1,K===0?(d&&(this.outdent(),d=!1),x=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),K++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),K&&(K--,this.outdent()));else{var me=!1;this._input.lookBack("with")&&(me=!0),this.preserveSingleSpace(D||me),this.print_string(this._ch),d&&U==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),k=!0):(this.eatWhitespace(),K++,this.indent())}else if(this._ch===")")K&&(K--,this.outdent()),k&&this._input.peek()===";"&&this._options.selector_separator_newline&&(k=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!d||k)&&K===0&&!x?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!d&&K===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&$.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(D),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),$.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var Se=U==='"'||U==="'";this.preserveSingleSpace(Se||D),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&f&&this._output.add_new_line()}var xe=this._output.get_code(P);return xe},Qg.Beautifier=y,Qg}var Uv;function yF(){if(Uv)return Wd.exports;Uv=1;var i=CF().Beautifier,n=ZA().Options;function o(s,l){var p=new i(s,l);return p.beautify()}return Wd.exports=o,Wd.exports.defaultOptions=function(){return new n},Wd.exports}var Xd={exports:{}},tm={},im={},Vv;function QA(){if(Vv)return im;Vv=1;var i=qm().Options;function n(o){i.call(this,o,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}return n.prototype=new i,im.Options=n,im}var Kd={},Hv;function Gv(){if(Hv)return Kd;Hv=1;var i=Ah().Tokenizer,n=Ah().TOKEN,o=Zm().Directives,s=JA().TemplatablePattern,l=Xh().Pattern,p={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",CONTROL_FLOW_OPEN:"TK_CONTROL_FLOW_OPEN",CONTROL_FLOW_CLOSE:"TK_CONTROL_FLOW_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:n.START,RAW:n.RAW,EOF:n.EOF},E=new o(/<\!--/,/-->/),$=function(R,M){i.call(this,R,M),this._current_tag_name="";var L=new s(this._input).read_options(this._options),y=new l(this._input);if(this.__patterns={word:L.until(/[\n\r\t <]/),word_control_flow_close_excluded:L.until(/[\n\r\t <}]/),single_quote:L.until_after(/'/),double_quote:L.until_after(/"/),attribute:L.until(/[\n\r\t =>]|\/>/),element_name:L.until(/[\n\r\t >\/]/),angular_control_flow_start:y.matching(/\@[a-zA-Z]+[^({]*[({]/),handlebars_comment:y.starting_with(/{{!--/).until_after(/--}}/),handlebars:y.starting_with(/{{/).until_after(/}}/),handlebars_open:y.until(/[\n\r\t }]/),handlebars_raw_close:y.until(/}}/),comment:y.starting_with(/<!--/).until_after(/-->/),cdata:y.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:y.starting_with(/<!\[/).until_after(/]>/),processing:y.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"),this.__patterns.word_control_flow_close_excluded=this.__patterns.word_control_flow_close_excluded.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var N=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=y.matching(N).until_after(N)}};return $.prototype=new i,$.prototype._is_comment=function(R){return!1},$.prototype._is_opening=function(R){return R.type===p.TAG_OPEN||R.type===p.CONTROL_FLOW_OPEN},$.prototype._is_closing=function(R,M){return R.type===p.TAG_CLOSE&&M&&((R.text===">"||R.text==="/>")&&M.text[0]==="<"||R.text==="}}"&&M.text[0]==="{"&&M.text[1]==="{")||R.type===p.CONTROL_FLOW_CLOSE&&R.text==="}"&&M.text.endsWith("{")},$.prototype._reset=function(){this._current_tag_name=""},$.prototype._get_next_token=function(R,M){var L=null;this._readWhitespace();var y=this._input.peek();return y===null?this._create_token(p.EOF,""):(L=L||this._read_open_handlebars(y,M),L=L||this._read_attribute(y,R,M),L=L||this._read_close(y,M),L=L||this._read_script_and_style(y,R),L=L||this._read_control_flows(y,M),L=L||this._read_raw_content(y,R,M),L=L||this._read_content_word(y,M),L=L||this._read_comment_or_cdata(y),L=L||this._read_processing(y),L=L||this._read_open(y,M),L=L||this._create_token(p.UNKNOWN,this._input.next()),L)},$.prototype._read_comment_or_cdata=function(R){var M=null,L=null,y=null;if(R==="<"){var N=this._input.peek(1);N==="!"&&(L=this.__patterns.comment.read(),L?(y=E.get_directives(L),y&&y.ignore==="start"&&(L+=E.readIgnored(this._input))):L=this.__patterns.cdata.read()),L&&(M=this._create_token(p.COMMENT,L),M.directives=y)}return M},$.prototype._read_processing=function(R){var M=null,L=null,y=null;if(R==="<"){var N=this._input.peek(1);(N==="!"||N==="?")&&(L=this.__patterns.conditional_comment.read(),L=L||this.__patterns.processing.read()),L&&(M=this._create_token(p.COMMENT,L),M.directives=y)}return M},$.prototype._read_open=function(R,M){var L=null,y=null;return(!M||M.type===p.CONTROL_FLOW_OPEN)&&R==="<"&&(L=this._input.next(),this._input.peek()==="/"&&(L+=this._input.next()),L+=this.__patterns.element_name.read(),y=this._create_token(p.TAG_OPEN,L)),y},$.prototype._read_open_handlebars=function(R,M){var L=null,y=null;return(!M||M.type===p.CONTROL_FLOW_OPEN)&&(this._options.templating.includes("angular")||this._options.indent_handlebars)&&R==="{"&&this._input.peek(1)==="{"&&(this._options.indent_handlebars&&this._input.peek(2)==="!"?(L=this.__patterns.handlebars_comment.read(),L=L||this.__patterns.handlebars.read(),y=this._create_token(p.COMMENT,L)):(L=this.__patterns.handlebars_open.read(),y=this._create_token(p.TAG_OPEN,L))),y},$.prototype._read_control_flows=function(R,M){var L="",y=null;if(!this._options.templating.includes("angular"))return y;if(R==="@"){if(L=this.__patterns.angular_control_flow_start.read(),L==="")return y;for(var N=L.endsWith("(")?1:0,P=0;!(L.endsWith("{")&&N===P);){var F=this._input.next();if(F===null)break;F==="("?N++:F===")"&&P++,L+=F}y=this._create_token(p.CONTROL_FLOW_OPEN,L)}else R==="}"&&M&&M.type===p.CONTROL_FLOW_OPEN&&(L=this._input.next(),y=this._create_token(p.CONTROL_FLOW_CLOSE,L));return y},$.prototype._read_close=function(R,M){var L=null,y=null;return M&&M.type===p.TAG_OPEN&&(M.text[0]==="<"&&(R===">"||R==="/"&&this._input.peek(1)===">")?(L=this._input.next(),R==="/"&&(L+=this._input.next()),y=this._create_token(p.TAG_CLOSE,L)):M.text[0]==="{"&&R==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),y=this._create_token(p.TAG_CLOSE,"}}"))),y},$.prototype._read_attribute=function(R,M,L){var y=null,N="";if(L&&L.text[0]==="<")if(R==="=")y=this._create_token(p.EQUALS,this._input.next());else if(R==='"'||R==="'"){var P=this._input.next();R==='"'?P+=this.__patterns.double_quote.read():P+=this.__patterns.single_quote.read(),y=this._create_token(p.VALUE,P)}else N=this.__patterns.attribute.read(),N&&(M.type===p.EQUALS?y=this._create_token(p.VALUE,N):y=this._create_token(p.ATTRIBUTE,N));return y},$.prototype._is_content_unformatted=function(R){return this._options.void_elements.indexOf(R)===-1&&(this._options.content_unformatted.indexOf(R)!==-1||this._options.unformatted.indexOf(R)!==-1)},$.prototype._read_raw_content=function(R,M,L){var y="";if(L&&L.text[0]==="{")y=this.__patterns.handlebars_raw_close.read();else if(M.type===p.TAG_CLOSE&&M.opened.text[0]==="<"&&M.text[0]!=="/"){var N=M.opened.text.substr(1).toLowerCase();this._is_content_unformatted(N)&&(y=this._input.readUntil(new RegExp("</"+N+"[\\n\\r\\t ]*?>","ig")))}return y?this._create_token(p.TEXT,y):null},$.prototype._read_script_and_style=function(R,M){if(M.type===p.TAG_CLOSE&&M.opened.text[0]==="<"&&M.text[0]!=="/"){var L=M.opened.text.substr(1).toLowerCase();if(L==="script"||L==="style"){var y=this._read_comment_or_cdata(R);if(y)return y.type=p.TEXT,y;var N=this._input.readUntil(new RegExp("</"+L+"[\\n\\r\\t ]*?>","ig"));if(N)return this._create_token(p.TEXT,N)}}return null},$.prototype._read_content_word=function(R,M){var L="";return this._options.unformatted_content_delimiter&&R===this._options.unformatted_content_delimiter[0]&&(L=this.__patterns.unformatted_content_delimiter.read()),L||(L=M&&M.type===p.CONTROL_FLOW_OPEN?this.__patterns.word_control_flow_close_excluded.read():this.__patterns.word.read()),L?this._create_token(p.TEXT,L):null},Kd.Tokenizer=$,Kd.TOKEN=p,Kd}var Wv;function RF(){if(Wv)return tm;Wv=1;var i=QA().Options,n=jm().Output,o=Gv().Tokenizer,s=Gv().TOKEN,l=/\r\n|[\r\n]/,p=/\r\n|[\r\n]/g,E=function(g,d){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=g.max_preserve_newlines,this.preserve_newlines=g.preserve_newlines,this._output=new n(g,d)};E.prototype.current_line_has_match=function(g){return this._output.current_line.has_match(g)},E.prototype.set_space_before_token=function(g,d){this._output.space_before_token=g,this._output.non_breaking_space=d},E.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},E.prototype.add_raw_token=function(g){this._output.add_raw_token(g)},E.prototype.print_preserved_newlines=function(g){var d=0;g.type!==s.TEXT&&g.previous.type!==s.TEXT&&(d=g.newlines?1:0),this.preserve_newlines&&(d=g.newlines<this.max_preserve_newlines+1?g.newlines:this.max_preserve_newlines+1);for(var C=0;C<d;C++)this.print_newline(C>0);return d!==0},E.prototype.traverse_whitespace=function(g){return g.whitespace_before||g.newlines?(this.print_preserved_newlines(g)||(this._output.space_before_token=!0),!0):!1},E.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},E.prototype.print_newline=function(g){this._output.add_new_line(g)},E.prototype.print_token=function(g){g.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(g.text))},E.prototype.indent=function(){this.indent_level++},E.prototype.deindent=function(){this.indent_level>0&&(this.indent_level--,this._output.set_indent(this.indent_level,this.alignment_size))},E.prototype.get_full_indent=function(g){return g=this.indent_level+(g||0),g<1?"":this._output.get_indent_string(g)};var $=function(g){for(var d=null,C=g.next;C.type!==s.EOF&&g.closed!==C;){if(C.type===s.ATTRIBUTE&&C.text==="type"){C.next&&C.next.type===s.EQUALS&&C.next.next&&C.next.next.type===s.VALUE&&(d=C.next.next.text);break}C=C.next}return d},R=function(g,d){var C=null,x=null;return d.closed?(g==="script"?C="text/javascript":g==="style"&&(C="text/css"),C=$(d)||C,C.search("text/css")>-1?x="css":C.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?x="javascript":C.search(/(text|application|dojo)\/(x-)?(html)/)>-1?x="html":C.search(/test\/null/)>-1&&(x="null"),x):null};function M(g,d){return d.indexOf(g)!==-1}function L(g,d,C){this.parent=g||null,this.tag=d?d.tag_name:"",this.indent_level=C||0,this.parser_token=d||null}function y(g){this._printer=g,this._current_frame=null}y.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},y.prototype.record_tag=function(g){var d=new L(this._current_frame,g,this._printer.indent_level);this._current_frame=d},y.prototype._try_pop_frame=function(g){var d=null;return g&&(d=g.parser_token,this._printer.indent_level=g.indent_level,this._current_frame=g.parent),d},y.prototype._get_frame=function(g,d){for(var C=this._current_frame;C&&g.indexOf(C.tag)===-1;){if(d&&d.indexOf(C.tag)!==-1){C=null;break}C=C.parent}return C},y.prototype.try_pop=function(g,d){var C=this._get_frame([g],d);return this._try_pop_frame(C)},y.prototype.indent_to_tag=function(g){var d=this._get_frame(g);d&&(this._printer.indent_level=d.indent_level)};function N(g,d,C,x){this._source_text=g||"",d=d||{},this._js_beautify=C,this._css_beautify=x,this._tag_stack=null;var k=new i(d,"html");this._options=k,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}N.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var g=this._source_text,d=this._options.eol;this._options.eol==="auto"&&(d=`
`,g&&l.test(g)&&(d=g.match(l)[0])),g=g.replace(p,`
`);var C=g.match(/^[\t ]*/)[0],x={text:"",type:""},k=new P(this._options),H=new E(this._options,C),f=new o(g,this._options).tokenize();this._tag_stack=new y(H);for(var I=null,D=f.next();D.type!==s.EOF;)D.type===s.TAG_OPEN||D.type===s.COMMENT?(I=this._handle_tag_open(H,D,k,x,f),k=I):D.type===s.ATTRIBUTE||D.type===s.EQUALS||D.type===s.VALUE||D.type===s.TEXT&&!k.tag_complete?I=this._handle_inside_tag(H,D,k,x):D.type===s.TAG_CLOSE?I=this._handle_tag_close(H,D,k):D.type===s.TEXT?I=this._handle_text(H,D,k):D.type===s.CONTROL_FLOW_OPEN?I=this._handle_control_flow_open(H,D):D.type===s.CONTROL_FLOW_CLOSE?I=this._handle_control_flow_close(H,D):H.add_raw_token(D),x=I,D=f.next();var U=H._output.get_code(d);return U},N.prototype._handle_control_flow_open=function(g,d){var C={text:d.text,type:d.type};return g.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),d.newlines?g.print_preserved_newlines(d):g.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),g.print_token(d),g.indent(),C},N.prototype._handle_control_flow_close=function(g,d){var C={text:d.text,type:d.type};return g.deindent(),d.newlines?g.print_preserved_newlines(d):g.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),g.print_token(d),C},N.prototype._handle_tag_close=function(g,d,C){var x={text:d.text,type:d.type};return g.alignment_size=0,C.tag_complete=!0,g.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),C.is_unformatted?g.add_raw_token(d):(C.tag_start_char==="<"&&(g.set_space_before_token(d.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&C.has_wrapped_attrs&&g.print_newline(!1)),g.print_token(d)),C.indent_content&&!(C.is_unformatted||C.is_content_unformatted)&&(g.indent(),C.indent_content=!1),!C.is_inline_element&&!(C.is_unformatted||C.is_content_unformatted)&&g.set_wrap_point(),x},N.prototype._handle_inside_tag=function(g,d,C,x){var k=C.has_wrapped_attrs,H={text:d.text,type:d.type};return g.set_space_before_token(d.newlines||d.whitespace_before!=="",!0),C.is_unformatted?g.add_raw_token(d):C.tag_start_char==="{"&&d.type===s.TEXT?g.print_preserved_newlines(d)?(d.newlines=0,g.add_raw_token(d)):g.print_token(d):(d.type===s.ATTRIBUTE?g.set_space_before_token(!0):(d.type===s.EQUALS||d.type===s.VALUE&&d.previous.type===s.EQUALS)&&g.set_space_before_token(!1),d.type===s.ATTRIBUTE&&C.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(g.traverse_whitespace(d),k=k||d.newlines!==0),this._is_wrap_attributes_force&&C.attr_count>=this._options.wrap_attributes_min_attrs&&(x.type!==s.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(g.print_newline(!1),k=!0)),g.print_token(d),k=k||g.previous_token_wrapped(),C.has_wrapped_attrs=k),H},N.prototype._handle_text=function(g,d,C){var x={text:d.text,type:"TK_CONTENT"};return C.custom_beautifier_name?this._print_custom_beatifier_text(g,d,C):C.is_unformatted||C.is_content_unformatted?g.add_raw_token(d):(g.traverse_whitespace(d),g.print_token(d)),x},N.prototype._print_custom_beatifier_text=function(g,d,C){var x=this;if(d.text!==""){var k=d.text,H,f=1,I="",D="";C.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?H=this._js_beautify:C.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?H=this._css_beautify:C.custom_beautifier_name==="html"&&(H=function(se,Ue){var me=new N(se,Ue,x._js_beautify,x._css_beautify);return me.beautify()}),this._options.indent_scripts==="keep"?f=0:this._options.indent_scripts==="separate"&&(f=-g.indent_level);var U=g.get_full_indent(f);if(k=k.replace(/\n[ \t]*$/,""),C.custom_beautifier_name!=="html"&&k[0]==="<"&&k.match(/^(<!--|<!\[CDATA\[)/)){var O=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(k);if(!O){g.add_raw_token(d);return}I=U+O[1]+`
`,k=O[4],O[5]&&(D=U+O[5]),k=k.replace(/\n[ \t]*$/,""),(O[2]||O[3].indexOf(`
`)!==-1)&&(O=O[3].match(/[ \t]+$/),O&&(d.whitespace_before=O[0]))}if(k)if(H){var X=function(){this.eol=`
`};X.prototype=this._options.raw_options;var W=new X;k=H(U+k,W)}else{var re=d.whitespace_before;re&&(k=k.replace(new RegExp(`
(`+re+")?","g"),`
`)),k=U+k.replace(/\n/g,`
`+U)}I&&(k?k=I+k+`
`+D:k=I+D),g.print_newline(!1),k&&(d.text=k,d.whitespace_before="",d.newlines=0,g.add_raw_token(d),g.print_newline(!0))}},N.prototype._handle_tag_open=function(g,d,C,x,k){var H=this._get_tag_open_token(d);if((C.is_unformatted||C.is_content_unformatted)&&!C.is_empty_element&&d.type===s.TAG_OPEN&&!H.is_start_tag?(g.add_raw_token(d),H.start_tag_token=this._tag_stack.try_pop(H.tag_name)):(g.traverse_whitespace(d),this._set_tag_position(g,d,H,C,x),H.is_inline_element||g.set_wrap_point(),g.print_token(d)),H.is_start_tag&&this._is_wrap_attributes_force){var f=0,I;do I=k.peek(f),I.type===s.ATTRIBUTE&&(H.attr_count+=1),f+=1;while(I.type!==s.EOF&&I.type!==s.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(H.alignment_size=d.text.length+1),!H.tag_complete&&!H.is_unformatted&&(g.alignment_size=H.alignment_size),H};var P=function(g,d,C){if(this.parent=d||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!C)this.tag_complete=!0;else{var x;this.tag_start_char=C.text[0],this.text=C.text,this.tag_start_char==="<"?(x=C.text.match(/^<([^\s>]*)/),this.tag_check=x?x[1]:""):(x=C.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=x?x[1]:"",(C.text.startsWith("{{#>")||C.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&C.next!==null?this.tag_check=C.next.text.split(" ")[0]:this.tag_check=C.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),C.type===s.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||C.closed&&C.closed.text==="/>";var k=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(k=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(!g.indent_handlebars||this.text.length<3||/[^#\^]/.test(this.text.charAt(k)))}};N.prototype._get_tag_open_token=function(g){var d=new P(this._options,this._tag_stack.get_parser_token(),g);return d.alignment_size=this._options.wrap_attributes_indent_size,d.is_end_tag=d.is_end_tag||M(d.tag_check,this._options.void_elements),d.is_empty_element=d.tag_complete||d.is_start_tag&&d.is_end_tag,d.is_unformatted=!d.tag_complete&&M(d.tag_check,this._options.unformatted),d.is_content_unformatted=!d.is_empty_element&&M(d.tag_check,this._options.content_unformatted),d.is_inline_element=M(d.tag_name,this._options.inline)||this._options.inline_custom_elements&&d.tag_name.includes("-")||d.tag_start_char==="{",d},N.prototype._set_tag_position=function(g,d,C,x,k){if(C.is_empty_element||(C.is_end_tag?C.start_tag_token=this._tag_stack.try_pop(C.tag_name):(this._do_optional_end_element(C)&&(C.is_inline_element||g.print_newline(!1)),this._tag_stack.record_tag(C),(C.tag_name==="script"||C.tag_name==="style")&&!(C.is_unformatted||C.is_content_unformatted)&&(C.custom_beautifier_name=R(C.tag_check,d)))),M(C.tag_check,this._options.extra_liners)&&(g.print_newline(!1),g._output.just_added_blankline()||g.print_newline(!0)),C.is_empty_element){if(C.tag_start_char==="{"&&C.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),C.indent_content=!0;var H=g.current_line_has_match(/{{#if/);H||g.print_newline(!1)}C.tag_name==="!--"&&k.type===s.TAG_CLOSE&&x.is_end_tag&&C.text.indexOf(`
`)===-1||(C.is_inline_element||C.is_unformatted||g.print_newline(!1),this._calcluate_parent_multiline(g,C))}else if(C.is_end_tag){var f=!1;f=C.start_tag_token&&C.start_tag_token.multiline_content,f=f||!C.is_inline_element&&!(x.is_inline_element||x.is_unformatted)&&!(k.type===s.TAG_CLOSE&&C.start_tag_token===x)&&k.type!=="TK_CONTENT",(C.is_content_unformatted||C.is_unformatted)&&(f=!1),f&&g.print_newline(!1)}else C.indent_content=!C.custom_beautifier_name,C.tag_start_char==="<"&&(C.tag_name==="html"?C.indent_content=this._options.indent_inner_html:C.tag_name==="head"?C.indent_content=this._options.indent_head_inner_html:C.tag_name==="body"&&(C.indent_content=this._options.indent_body_inner_html)),!(C.is_inline_element||C.is_unformatted)&&(k.type!=="TK_CONTENT"||C.is_content_unformatted)&&g.print_newline(!1),this._calcluate_parent_multiline(g,C)},N.prototype._calcluate_parent_multiline=function(g,d){d.parent&&g._output.just_added_newline()&&!((d.is_inline_element||d.is_unformatted)&&d.parent.is_inline_element)&&(d.parent.multiline_content=!0)};var F=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],K=["a","audio","del","ins","map","noscript","video"];return N.prototype._do_optional_end_element=function(g){var d=null;if(!(g.is_empty_element||!g.is_start_tag||!g.parent)){if(g.tag_name==="body")d=d||this._tag_stack.try_pop("head");else if(g.tag_name==="li")d=d||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if(g.tag_name==="dd"||g.tag_name==="dt")d=d||this._tag_stack.try_pop("dt",["dl"]),d=d||this._tag_stack.try_pop("dd",["dl"]);else if(g.parent.tag_name==="p"&&F.indexOf(g.tag_name)!==-1){var C=g.parent.parent;(!C||K.indexOf(C.tag_name)===-1)&&(d=d||this._tag_stack.try_pop("p"))}else g.tag_name==="rp"||g.tag_name==="rt"?(d=d||this._tag_stack.try_pop("rt",["ruby","rtc"]),d=d||this._tag_stack.try_pop("rp",["ruby","rtc"])):g.tag_name==="optgroup"?d=d||this._tag_stack.try_pop("optgroup",["select"]):g.tag_name==="option"?d=d||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):g.tag_name==="colgroup"?d=d||this._tag_stack.try_pop("caption",["table"]):g.tag_name==="thead"?(d=d||this._tag_stack.try_pop("caption",["table"]),d=d||this._tag_stack.try_pop("colgroup",["table"])):g.tag_name==="tbody"||g.tag_name==="tfoot"?(d=d||this._tag_stack.try_pop("caption",["table"]),d=d||this._tag_stack.try_pop("colgroup",["table"]),d=d||this._tag_stack.try_pop("thead",["table"]),d=d||this._tag_stack.try_pop("tbody",["table"])):g.tag_name==="tr"?(d=d||this._tag_stack.try_pop("caption",["table"]),d=d||this._tag_stack.try_pop("colgroup",["table"]),d=d||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(g.tag_name==="th"||g.tag_name==="td")&&(d=d||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),d=d||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return g.parent=this._tag_stack.get_parser_token(),d}},tm.Beautifier=N,tm}var Xv;function NF(){if(Xv)return Xd.exports;Xv=1;var i=RF().Beautifier,n=QA().Options;function o(s,l,p,E){var $=new i(s,l,p,E);return $.beautify()}return Xd.exports=o,Xd.exports.defaultOptions=function(){return new n},Xd.exports}var Kv;function DF(){if(Kv)return Su;Kv=1;var i=OF(),n=yF(),o=NF();function s(l,p,E,$){return E=E||i,$=$||n,o(l,p,E,$)}return s.defaultOptions=o.defaultOptions,Su.js=i,Su.css=n,Su.html=s,Su}var zv;function kF(){return zv||(zv=1,(function(i){function n(o,s,l){var p=function(E,$){return o.js_beautify(E,$)};return p.js=o.js_beautify,p.css=s.css_beautify,p.html=l.html_beautify,p.js_beautify=o.js_beautify,p.css_beautify=s.css_beautify,p.html_beautify=l.html_beautify,p}(function(o){var s=DF();s.js_beautify=s.js,s.css_beautify=s.css,s.html_beautify=s.html,o.exports=n(s,s,s)})(i)})(Vg)),Vg.exports}var LF=kF();function eO(i,n,o,s){const l={_getType(p){return Array.isArray(p)?p.includes("Any")?null:p:p==="Any"?null:p},_setFields(p,E){if(Array.isArray(E))for(const $ of E)switch($.kind){case"text":p.appendField($.value);break;case"text_input":p.appendField(new zi($.default),$.ID);break;case"number_input":p.appendField(new $R($.default),$.ID);break;case"angle_input":p.appendField(new Gm.FieldAngle($.default),$.ID);break;case"menu_input":p.appendField(new bo(this._getMenuItems($.value)),$.ID);break;case"checkbox_input":p.appendField(new Hu($.default?"TRUE":"FALSE"),$.ID);break;case"color_input":p.appendField(new KA.FieldColour($.default),$.ID);break}},_getMenuItems(p){return Array.isArray(p)?p.map(E=>[E,E]):Object.entries(p)},LoadExtension(p){const E=new p,$=E.Info(),R=$.ID,M="Remove_Extension_"+s,L=[{kind:"button",text:`Remove ${$.name}`,callbackKey:M}];n.registerButtonCallback(M,()=>{const N=i.contents.findIndex(P=>P.id==s);delete gt.extensions[s],i.contents.splice(N),n.updateToolbox(i),n.refreshToolboxSelection()});const y=this;i.contents.push({kind:"category",name:$.name,colour:$.color,contents:L,id:s});for(const N of $.blocks){const P=`${R}_${N.blockType.kind}_${N.opcode}`;L.push({kind:"block",type:P,gap:8}),mt[P]={init:function(){N.blockType.kind==="Statement"?(this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)):N.blockType.kind==="Value"&&this.setOutput(!0,y._getType(N.blockType.type));for(const F of N.args)switch(F.kind){case"Statement":y._setFields(this.appendStatementInput(F.ID).setCheck(null),F.fields);break;case"Value":y._setFields(this.appendValueInput(F.ID).setCheck(y._getType(F.type)),F.fields);break;case"Dummy":y._setFields(this.appendDummyInput(),F.fields);break}this.setColour(N.color??$.color),this.setTooltip(""),this.setHelpUrl("")}},$t.forBlock[P]=function(F,K){const g=E.generator[N.opcode](new y.Block(F,K));return N.blockType.kind==="Value"?[g,_t.ATOMIC]:g}}n.updateToolbox(i),n.refreshToolboxSelection()},Block:class{constructor(E,$){this.BlocklyBlock=E,this.BlocklyGenerator=$}getField(E){return this.BlocklyBlock.getFieldValue(E)+""}getValue(E){return this.BlocklyGenerator?.valueToCode(this.BlocklyBlock,E,_t.ATOMIC)+""}getStatement(E){return this.BlocklyGenerator?.statementToCode(this.BlocklyBlock,E)+""}get parent(){return this.BlocklyBlock.parentBlock_===null?null:new l.Block(this.BlocklyBlock.parentBlock_,void 0)}get top(){return this.parent===null?this:this.parent.top}get ID(){return this.BlocklyBlock.type}},blockType:{Statement(){return{kind:"Statement"}},Value(p){return{kind:"Value",type:p}},Hat(){return{kind:"Hat"}}},Argument:{Value(p,E,$=[]){return{kind:"Value",ID:p,type:E,fields:$}},Statement(p,E=[]){return{kind:"Statement",ID:p,fields:E}},Dummy(p=[]){return{kind:"Dummy",fields:p}}},Field:{Text(p){return{kind:"text",value:p}},TextInput(p,E=""){return{kind:"text_input",ID:p,default:E}},NumberInput(p,E=0){return{kind:"number_input",ID:p,default:E}},AngleInput(p,E=0){return{kind:"angle_input",ID:p,default:E}},MenuInput(p,E){return{kind:"menu_input",ID:p,value:E}},CheckboxInput(p,E=!0){return{kind:"checkbox_input",ID:p,default:E}},ColorInput(p,E="#FFFFFF"){return{kind:"color_input",ID:p,default:E}}}};new Function("Penguin",o)(l)}const wF=""+new URL("default.png",import.meta.url).href;async function MF(i){const n=Kt("#extensionGallery"),o=Kt.create("div").css({display:"flex","flex-wrap":"wrap","justify-content":"center",gap:"10px"});n.child(o);async function s(L,y){const N=`https://raw.githubusercontent.com/PenguinBuilder/ExtensionGallery/refs/heads/main/${L.name}/${y}`,P=await fetch(N);return P.ok?[!0,await P.text()]:[!1,null]}async function l(L,y){const N=`https://raw.githubusercontent.com/PenguinBuilder/ExtensionGallery/refs/heads/main/${L.name}/${y}`;return(await fetch(N)).ok?[!0,N]:[!1,null]}function p(L,y,N,P,F){return Kt.create("sl-card").child([Kt.create("img").props({slot:"image",src:L}),Kt.create("strong").text(y),Kt.create("br"),Kt.create("div").text(N).css({"overflow-y":"auto",display:"block",height:"3em"}),Kt.create("br"),Kt.create("small").text(`by: ${P}`),Kt.create("div").props({slot:"footer"}).child(Kt.create("sl-button").props({variant:"primary"}).text("Load Extension").click(F))]).css({width:"300px"})}const E="https://api.github.com/repos/chickencuber/PenguinBuilder_ExtensionGallery/contents?cache="+Date.now(),$=["extensions.d.ts","tsconfig.json","README.md","example"],R=(await(await fetch(E)).json())?.filter?.(L=>!$.includes(L.name))||[{name:"from_file"},{name:"from_url"}];function M(L){const y=p(L.image??wF,L.options.display_name,L.options.description,L.options.creator,async()=>{let N=L.index,P=L.name;if(L.options.loader){const[F,K]=await new Function("$",L.index)(Kt);N=F,P=K}P="e_"+P,N=UA(N).code,gt.extensions[P]=N,i(N,P),n.elt.hide()});o.child(y)}for(const L of R){const y={};y.name=L.name;const[N,P]=await s(L,"options.json"),[F,K]=await s(L,"index.js"),[g,d]=await l(L,"image.png");if(!N||!F)continue;g&&(y.image=d);let C;y.options={};try{C=JSON.parse(P)}catch{continue}if(!("creator"in C)||!("potential-danger"in C)||!("display-name"in C)||!("description"in C))continue;y.options.creator=C.creator,y.options.potential_danger=C["potential-danger"],y.options.display_name=C["display-name"],y.options.description=C.description,y.options.WIP=C.WIP??!1,y.options.loader=C.loader??!1,y.index=K;const x=new URLSearchParams(location.search.toLowerCase());y.options.WIP&&!x.has("wip")||M(y)}return function(){n.elt.show()}}Kt("#ExtensionID").on("input",function(){this.value=this.value.toLowerCase().replaceAll(/[^a-z0-9]/g,"")});RR(qx);Qx();gR.registerCommentOptions();const Bn=yR("block-editor",{plugins:{toolbox:Hm,flyoutsVerticalToolbox:WA,metricsManager:XA},renderer:"zelos",toolbox:sl,theme:Vm});Bn.registerToolboxCategoryCallback("PROCEDURE",function(i){const n=[{kind:"block",type:"inline_function_a",gap:8,enabled:!0},{kind:"block",type:"inline_function_b",gap:8,enabled:!0},{kind:"block",type:"inline_function_c",gap:8,enabled:!0},{kind:"block",type:"return_block_function",gap:8,enabled:!0}];return[...SR.flyoutCategory(i,!1),...n]});function Yv(i,{variant:n="primary",icon:o="info-circle",duration:s=3e3,closable:l=!0,header:p=""}={}){const E=Kt.create("sl-alert").props({variant:n,duration:s,closable:l?"":null,countdown:"rtl"});E.child(Kt.create("sl-icon").props({name:o})),E.child([Kt.create("strong").text(p).css({"margin-left":"10px"}),Kt.create("br")]),E.child(Kt.from(document.createTextNode(i))),Kt.body().child(E),setTimeout(()=>E.elt.toast(),100)}iC(()=>{const i={workspace:uv.workspaces.save(Bn),extension_color:gt.Extension_Color,force_unsandboxed:gt.Force_Unsandboxed,extensions:gt.extensions};return gt.Extension_ID!==""&&(i.extension_id=gt.Extension_ID),gt.Extension_Name!==""&&(i.extension_name=gt.Extension_Name),[i,gt.Extension_ID_DEFAULT]},i=>{gt.Force_Unsandboxed=i.force_unsandboxed,gt.Extension_Color=i.extension_color,gt.Extension_ID=i.extension_id||"",gt.Extension_Name=i.extension_name||"";for(const o of Object.keys(gt.extensions)){const s=sl.contents.findIndex(l=>l.id==o);sl.contents.splice(s)}Bn.updateToolbox(sl),Bn.refreshToolboxSelection(),gt.extensions={},uv.workspaces.load(i.workspace,Bn);const n=i.extensions??{};for(const[o,s]of Object.entries(n))gt.extensions[o]=s,eO(sl,Bn,s,o)});eC(()=>Bn.setTheme(Vm),()=>Bn.setTheme(NR));{const i=sv.prototype.getName;sv.prototype.getName=function(n,o){return gt.Extension_ID_DEFAULT+"_"+i.call(this,n,o)}}function tO(i=!1){gt.end="",gt.very_end="",gt.menus=0;const n=`
    // Made with PenguinBuilder ${Kt("#version").text()}
    // use PenguinBuilder at "https://penguinbuilder.github.io"
    (async function(Scratch) {
        const blocks = [];
        const menus = {};

        ${gt.Force_Unsandboxed?`if (!Scratch.extensions.unsandboxed) {
            throw new Error('${gt.Extension_Name_DEFAULT} must run unsandboxed');
        }`:""}

        class Extension {
            getInfo() {
                return {
                    "id": "${gt.Extension_ID_DEFAULT}",
                    "name": "${gt.Extension_Name_DEFAULT}",
                    "color1": "${gt.Extension_Color}",
                    "blocks": blocks,
                    "menus": menus,
                }
            }
        }
        
`+$t.workspaceToCode(Bn)+`

        ${gt.end}
        ${gt.very_end}
        Scratch.extensions.register(new Extension());
    })(Scratch);
    `;return i?UA(n).code:LF.js_beautify(n,{indent_size:4,max_preserve_newlines:2})}Kt("#test").click(()=>{const i=tO(!0);if(iO()){const n=encodeURI("data:application/javascript;base64,"+btoa(i));window.open("https://studio.penguinmod.com/editor.html?extension="+n)}});function iO(){return Bn.getTopBlocks(!1).filter(n=>n.isEnabled()).length===0?(Yv("You can't export when the workspace is empty",{header:"Failed Export",variant:"danger",icon:"exclamation-octagon"}),!1):Kt("#ExtensionID").is(":invalid")?(Yv("The ExtensionID is invalid",{header:"Failed Export",variant:"danger",icon:"exclamation-octagon"}),!1):!0}Kt("#export").click(async()=>{if(!iO())return;const n=await(await window.showSaveFilePicker({suggestedName:gt.Extension_ID_DEFAULT+".js",types:[{description:"PenguinBuilder Save",accept:{"application/javascript":[".js"]}}]})).createWritable();await n.write(tO()),await n.close()});Bn.setScale(.7);Bn.addChangeListener(Nu.disableOrphans);const xF=new sF.WorkspaceSearch(Bn);xF.init();const FF=await MF(eO.bind(null,sl,Bn));Bn.registerButtonCallback("Load_Extension",()=>{FF()});

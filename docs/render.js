import{A as p,x as u,H as d,y as g,G as m,t as f,v as b}from"./save_svg.js";import{s as v}from"./style-selector.js";import{$ as s}from"./jsquery.js";f(b);const e=u("block-editor",{renderer:"zues",theme:d}),i=[];let c=()=>{};function k(o){c=o,v(t=>{const r=s("#content").elt.scrollTop/s("#content").elt.scrollHeight;e.options.renderer=t,e.renderer=p.init(e.options.renderer||"",e.getTheme(),e.options.rendererOverrides??void 0);for(const n of i){URL.revokeObjectURL(n.url);const l=a(n.json);n.elt.props({src:l}),n.url=l}s("#content").elt.scrollTop=r*s("#content").elt.scrollHeight,c(),c=()=>{}})}function U(o,t){const r=a(t);o.props({src:r}),i.push({elt:o,json:t,url:r})}function a(o){g.workspaces.load(o,e);const t=m(e),r=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(r)}export{k as onDone,U as registerElt};

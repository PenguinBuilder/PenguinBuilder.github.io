import{A as m,x as d,H as g,y as b,G as f,t as v,v as h}from"./save_svg.js";import{s as L}from"./style-selector.js";import{$ as s}from"./jsquery.js";v(h);const e=d("block-editor",{renderer:"zues",theme:g}),a=[];let i=()=>{};function H(t){i=t,L(r=>{const o=s("#content").elt.scrollTop/s("#content").elt.scrollHeight;e.options.renderer=r,e.renderer=m.init(e.options.renderer||"",e.getTheme(),e.options.rendererOverrides??void 0);function l(c){if(c>=a.length)return;const n=a[c];URL.revokeObjectURL(n.url);const u=p(n.json);n.elt.props({src:u}),n.url=u,s("#content").elt.scrollTop=o*s("#content").elt.scrollHeight,i(),i=()=>{},requestAnimationFrame(l.bind(null,c+1))}requestAnimationFrame(l.bind(null,0))})}function j(t,r){const o=p(r);t.props({src:o}),a.push({elt:t,json:r,url:o})}function p(t){b.workspaces.load(t,e);const r=f(e),o=new Blob([r],{type:"image/svg+xml"});return URL.createObjectURL(o)}export{H as onDone,j as registerElt};

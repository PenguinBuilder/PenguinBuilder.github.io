import{z as p,w as u,H as d,x as g,A as m,s as f,t as b}from"./zues.js";import{s as v}from"./style-selector.js";import{$ as n}from"./jsquery.js";f(b);const e=u("block-editor",{renderer:"zues",theme:d}),i=[];let c=()=>{};function k(o){c=o,v(t=>{const r=n("#content").elt.scrollTop/n("#content").elt.scrollHeight;e.options.renderer=t,e.renderer=p.init(e.options.renderer||"",e.getTheme(),e.options.rendererOverrides??void 0);for(const s of i){URL.revokeObjectURL(s.url);const l=a(s.json);s.elt.props({src:l}),s.url=l}n("#content").elt.scrollTop=r*n("#content").elt.scrollHeight,c(),c=()=>{}})}function U(o,t){const r=a(t);o.props({src:r}),i.push({elt:o,json:t,url:r})}function a(o){g.workspaces.load(o,e);const t=m(e),r=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(r)}export{k as onDone,U as registerElt};
